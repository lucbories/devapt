{"version":3,"names":[],"mappings":"","sources":["devapt-browser.js"],"sourcesContent":["require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _util = require('util');\n\nvar _stream = require('../../common/messaging/stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _binding_stream = require('./binding_stream');\n\nvar _binding_stream2 = _interopRequireDefault(_binding_stream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/binding_service';\n\n/**\r\n * @file UI binding class for service stream.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar BindingService = function (_BindingStream) {\n\t_inherits(BindingService, _BindingStream);\n\n\t/**\r\n  * Creates an instance of Binding.\r\n  * @extends Bindable\r\n  *\r\n  * @param {string} arg_id - binding identifier.\r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Component} arg_component - component instance.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction BindingService(arg_id, arg_runtime, arg_component) {\n\t\t_classCallCheck(this, BindingService);\n\n\t\tvar _this = _possibleConstructorReturn(this, (BindingService.__proto__ || Object.getPrototypeOf(BindingService)).call(this, arg_id, arg_runtime, arg_component));\n\n\t\t_this.is_binding_service = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Build binding.\r\n  * \r\n  * @returns {Promise} \r\n  */\n\n\n\t_createClass(BindingService, [{\n\t\tkey: 'build',\n\t\tvalue: function build() {\n\t\t\tthis._component.enter_group('build');\n\n\t\t\t// console.log(context + ':build:loading binding for component=% and service=%s', this._component.get_name(), this._source_svc_name)\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._source_svc_name), context + (0, _util.format)(':build:component=%s:bad service name=%s', this._component.get_name(), this._source_svc_name));\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._source_svc_method), context + (0, _util.format)(':build:component=%s:service=%s:bad service method=%s', this._component.get_name(), this._source_svc_name, this._source_svc_method));\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(this._targets) && this._targets.length > 0, context + (0, _util.format)(':build:component=%s:service=%s:bad targets', this._component.get_name(), this._source_svc_name));\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._target_method), context + (0, _util.format)(':build:component=%s:service=%s,bad target method=%s', this._component.get_name(), this._source_svc_name, this._target_method));\n\n\t\t\tvar promise = this.bind_svc();\n\n\t\t\t// if ( T.isArray(this._state_path) && this._state_path.length > 0 )\n\t\t\t// {\n\t\t\t// \tconst opds = { method:{ operands:[this._state_path]}}\n\t\t\t// \tthis.set_targets_instances_array([this._component])\n\t\t\t// \tthis.set_target_method_name('dispatch_update_state_value_action')\n\t\t\t// \tthis.set_options(opds)\n\t\t\t// \tthis._unsubscribe_state_update = this.bind_svc()\n\t\t\t// }\n\n\t\t\tthis._component.leave_group('build:async');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Bind a service stream event on object method.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'bind_svc',\n\t\tvalue: function bind_svc() {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis._component.enter_group('bind_svc');\n\n\t\t\tconsole.info(context + ':bind_svc:loading binding for component ' + this._component.get_name());\n\n\t\t\tvar promise = this._runtime.register_service(this._source_svc_name).then(function (svc) {\n\t\t\t\t_this2._component.enter_group('bind_svc - service found');\n\n\t\t\t\t(0, _assert2.default)(_this2._source_svc_method in svc && _typr2.default.isFunction(svc[_this2._source_svc_method]), context + ':bind_svc - service found:bad bound method function');\n\t\t\t\tconsole.info(context + ':bind_svc:service found for component ' + _this2._component.get_name() + ' and service ' + _this2._source_svc_name);\n\n\t\t\t\tif (_this2._source_svc_method == 'post') {\n\t\t\t\t\tsvc.subscribe(); // TODO ?????\n\t\t\t\t}\n\n\t\t\t\tvar method_cfg = _typr2.default.isObject(_this2._options) ? _this2._options.method : undefined;\n\t\t\t\tvar stream = new _stream2.default(svc[_this2._source_svc_method](method_cfg));\n\n\t\t\t\tif (_this2._source_svc_name == 'resources') {\n\t\t\t\t\t// DEBUG\n\t\t\t\t\tstream.get_transformed_stream().onValue(function (values) {\n\t\t\t\t\t\tconsole.log(context + ':bind_svc:resources stream:%s:values=', _this2._component.get_name(), values);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_this2.set_stream(stream);\n\t\t\t\t_get(BindingService.prototype.__proto__ || Object.getPrototypeOf(BindingService.prototype), 'build', _this2).call(_this2);\n\n\t\t\t\t_this2._component.leave_group('bind_svc - service found');\n\t\t\t});\n\n\t\t\tthis._component.leave_group('bind_svc:async');\n\t\t\treturn promise;\n\t\t}\n\t}]);\n\n\treturn BindingService;\n}(_binding_stream2.default);\n\nexports.default = BindingService;\n\n\n},{\"../../common/messaging/stream\":49,\"./binding_stream\":3,\"assert\":107,\"typr/lib/typr\":218,\"util\":222}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _util = require('util');\n\nvar _transform = require('../../common/utils/transform');\n\nvar _stream = require('../../common/messaging/stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _binding_stream = require('./binding_stream');\n\nvar _binding_stream2 = _interopRequireDefault(_binding_stream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/binding_service_timeline';\n\n/**\r\n * @file UI binding class for service based timeline.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar BindingServiceTimeline = function (_BindingStream) {\n\t_inherits(BindingServiceTimeline, _BindingStream);\n\n\t/**\r\n  * Creates an instance of Binding.\r\n  * @extends Bindable\r\n  *\r\n  * @param {string} arg_id - binding identifier.\r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Component} arg_component - component instance.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction BindingServiceTimeline(arg_id, arg_runtime, arg_component) {\n\t\t_classCallCheck(this, BindingServiceTimeline);\n\n\t\tvar _this = _possibleConstructorReturn(this, (BindingServiceTimeline.__proto__ || Object.getPrototypeOf(BindingServiceTimeline)).call(this, arg_id, arg_runtime, arg_component));\n\n\t\t_this.is_binding_service_timeline = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Build binding.\r\n  * \r\n  * @returns {Promise} \r\n  */\n\n\n\t_createClass(BindingServiceTimeline, [{\n\t\tkey: 'build',\n\t\tvalue: function build() {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis._component.enter_group('build');\n\n\t\t\tconsole.info(context + ':build:loading binding for component ' + this._component.get_name(), this._stream);\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._source_timeline), context + (0, _util.format)(':build:component=%s:bad timeline name=%s', this._component.get_name(), this._source_timeline));\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._source_svc_name), context + (0, _util.format)(':build:component=%s:bad service name=%s,timeline=%s', this._component.get_name(), this._source_timeline, this._source_svc_name));\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._source_svc_method), context + (0, _util.format)(':build:component=%s:bad service name=%s,timeline=%s', this._component.get_name(), this._source_timeline, this._source_svc_method));\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(this._targets) && this._targets.length > 0, context + (0, _util.format)(':build:component=%s,timeline=%s:bad targets', this._component.get_name(), this._source_timeline, this._source_svc_method));\n\t\t\t(0, _assert2.default)(_typr2.default.isString(this._target_method), context + (0, _util.format)(':build:component=%s,timeline=%s:bad target method=%s', this._component.get_name(), this._source_timeline, this._target_method));\n\n\t\t\tvar promise = this.bind_timeline();\n\t\t\tpromise = promise.then(function (unsubscribe) {\n\t\t\t\t_this2._unsubscribe = unsubscribe;\n\n\t\t\t\tif (_typr2.default.isArray(_this2._state_path) && _this2._state_path.length > 0) {\n\t\t\t\t\tvar opds = { method: { operands: [_this2._state_path] } };\n\t\t\t\t\t_this2.set_targets_instances_array([_this2._component]);\n\t\t\t\t\t_this2.set_target_method_name('dispatch_update_state_value_action');\n\t\t\t\t\t_this2.set_options(opds);\n\t\t\t\t\treturn _this2.bind_timeline().then(function (unsubscribe) {\n\t\t\t\t\t\t_this2._unsubscribe_state_update = unsubscribe;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._component.leave_group('build:async');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Bind a service timeline stream event on object method.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'bind_timeline',\n\t\tvalue: function bind_timeline() {\n\t\t\tvar _this3 = this;\n\n\t\t\t// console.info(context + ':bind_timeline:loading binding for component ' + this._component.get_name(), this._source_timeline)\n\n\t\t\treturn this._runtime.register_service(this._source_svc_name).then(function (svc) {\n\t\t\t\t// console.log(context + ':bind_timeline:svc', svc)\n\t\t\t\t(0, _assert2.default)(_this3._source_svc_method in svc && _typr2.default.isFunction(svc[_this3._source_svc_method]), context + ':bind_timeline:bad bound method function');\n\n\t\t\t\tif (_this3._source_svc_method == 'post') {\n\t\t\t\t\tsvc.subscribe(); // TODO ???????\n\t\t\t\t}\n\n\t\t\t\tvar method_cfg = _typr2.default.isObject(_this3._options) ? _this3._options.method : undefined;\n\t\t\t\tvar operands = _typr2.default.isObject(method_cfg) ? method_cfg.operands : undefined;\n\t\t\t\tvar format_cfg = _typr2.default.isObject(_this3._options) ? _this3._options.format : undefined;\n\n\t\t\t\t(0, _assert2.default)(_this3._source_timeline in svc[_this3._source_svc_method].timelines, context + ':bind_timeline:timeline name [' + _this3._source_timeline + '] not found');\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(svc[_this3._source_svc_method].timelines[_this3._source_timeline]), context + ':bind_timeline:bad timeline object');\n\n\t\t\t\tvar stream = svc[_this3._source_svc_method].timelines[_this3._source_timeline].stream;\n\t\t\t\t// stream.subscribe( (datas) => {console.log(context + ':bind_timeline:timeline=%s datas=', arg_timeline_name, datas) } )\n\n\t\t\t\tvar unsubscribes = [];\n\t\t\t\t_this3._targets.forEach(function (target, index) {\n\t\t\t\t\t// const method = this._target_method\n\t\t\t\t\t// console.info(context + ':bind_timeline:component=%s timeline=%s target at %s method=%s', this._component.get_name(), this._source_timeline, index, method)\n\n\t\t\t\t\tvar values_xform = {\n\t\t\t\t\t\t\"result_type\": \"single\",\n\t\t\t\t\t\t\"fields\": [{\n\t\t\t\t\t\t\t\"name\": 'value at ' + index,\n\t\t\t\t\t\t\t\"path\": 'value'\n\t\t\t\t\t\t}]\n\t\t\t\t\t};\n\n\t\t\t\t\tvar datas_xform = function datas_xform(arg_stream_record) {\n\t\t\t\t\t\tif (arg_stream_record.datas) {\n\t\t\t\t\t\t\t// console.log(context + ':bind_stream:datas', arg_stream_record.datas)\n\t\t\t\t\t\t\treturn arg_stream_record.datas;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn arg_stream_record;\n\t\t\t\t\t};\n\n\t\t\t\t\tvar extracted_stream = stream.map(datas_xform).map((0, _transform.transform)(values_xform));\n\t\t\t\t\tif (_this3._options && _typr2.default.isBoolean(_this3._options.dispatch) && _this3._options.dispatch) {\n\t\t\t\t\t\tvar at_index_xform = function at_index_xform(arg_stream_record) {\n\t\t\t\t\t\t\tif (_typr2.default.isArray(arg_stream_record) && arg_stream_record.length > index) {\n\t\t\t\t\t\t\t\treturn arg_stream_record[index];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\textracted_stream = extracted_stream.map(at_index_xform);\n\t\t\t\t\t}\n\n\t\t\t\t\t// INIT STARTING VALUE\n\t\t\t\t\t_this3._stream = new _stream2.default(extracted_stream.startWith(_this3._starting_value));\n\n\t\t\t\t\t// DEBUG\n\t\t\t\t\t// this._stream.get_source_stream().onValue(\n\t\t\t\t\t// \t(extracted_value) => {\n\t\t\t\t\t// \t\tconsole.log(context + ':bind_timeline:timeline=%s method=%s stream value=', this._source_timeline, method, extracted_value)\n\t\t\t\t\t// \t}\n\t\t\t\t\t// )\n\n\t\t\t\t\tvar unbind = _this3.bind_stream(_this3._stream, _this3._source_xform, target, _this3._target_method, operands, format_cfg, _this3._starting_value);\n\t\t\t\t\tunsubscribes.push(unbind);\n\n\t\t\t\t\t// if ( T.isArray(this._state_path) && this._state_path.length > 0 )\n\t\t\t\t\t// {\n\t\t\t\t\t// \tconst opds = { method:{ operands:[this._state_path]}}\n\t\t\t\t\t// \tthis._unsubscribe_state_update = this.bind_stream(this._stream, this._source_xform, [this._component], 'dispatch_update_state_value_action', opds)\n\t\t\t\t\t// }\n\t\t\t\t});\n\n\t\t\t\treturn function () {\n\t\t\t\t\tunsubscribes.forEach(function (unsubscribe) {\n\t\t\t\t\t\tunsubscribe();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn BindingServiceTimeline;\n}(_binding_stream2.default);\n\nexports.default = BindingServiceTimeline;\n\n\n},{\"../../common/messaging/stream\":49,\"../../common/utils/transform\":104,\"./binding_stream\":3,\"assert\":107,\"typr/lib/typr\":218,\"util\":222}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _util = require('util');\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _uid = require('../../common/utils/uid.js');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _transform = require('../../common/utils/transform');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'browser/base/binding_stream';\n\n/**\r\n * @file UI component binding class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar BindingStream = function () {\n\t/**\r\n  * Creates an instance of Binding for stream.\r\n  *\r\n  * @param {string} arg_id - binding identifier.\r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Component} arg_component - component instance.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction BindingStream(arg_id, arg_runtime, arg_component) {\n\t\t_classCallCheck(this, BindingStream);\n\n\t\tthis.is_binding_stream = true;\n\n\t\tthis._id = arg_id ? arg_id : 'binding_' + (0, _uid2.default)();\n\t\tthis._runtime = arg_runtime;\n\t\tthis._component = arg_component;\n\n\t\tthis._unsubscribe = undefined;\n\t\tthis._unsubscribe_state_update = undefined;\n\n\t\tthis._stream = undefined;\n\t\tthis._state_path = undefined;\n\t\tthis._starting_value = undefined;\n\t\tthis._source_svc_name = undefined;\n\t\tthis._source_svc_method = undefined;\n\t\tthis._source_xform = undefined;\n\t\tthis._source_timeline = undefined;\n\t\tthis._targets = undefined;\n\t\tthis._target_method = undefined;\n\t\tthis._options = undefined;\n\t}\n\n\t_createClass(BindingStream, [{\n\t\tkey: 'set_stream',\n\t\tvalue: function set_stream(arg_stream) {\n\t\t\tthis._stream = arg_stream;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_state_path',\n\t\tvalue: function set_state_path(arg_state_path) {\n\t\t\tthis._state_path = arg_state_path;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_starting_value',\n\t\tvalue: function set_starting_value(arg_starting_value) {\n\t\t\tthis._starting_value = arg_starting_value;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_source_service_name',\n\t\tvalue: function set_source_service_name(arg_source_svc_name) {\n\t\t\tthis._source_svc_name = arg_source_svc_name;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_source_service_method',\n\t\tvalue: function set_source_service_method(arg_source_svc_method) {\n\t\t\tthis._source_svc_method = arg_source_svc_method;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_source_transformation',\n\t\tvalue: function set_source_transformation(arg_transformation) {\n\t\t\tthis._source_xform = arg_transformation;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_source_timeline_name',\n\t\tvalue: function set_source_timeline_name(arg_source_timeline) {\n\t\t\tthis._source_timeline = arg_source_timeline;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_targets_instances_array',\n\t\tvalue: function set_targets_instances_array(arg_targets) {\n\t\t\tthis._targets = arg_targets;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_target_method_name',\n\t\tvalue: function set_target_method_name(arg_target_method) {\n\t\t\tthis._target_method = arg_target_method;\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'set_options',\n\t\tvalue: function set_options(arg_options) {\n\t\t\tthis._options = arg_options;\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Build binding.\r\n   * \r\n   * @returns {Promise} \r\n   */\n\n\t}, {\n\t\tkey: 'build',\n\t\tvalue: function build() {\n\t\t\tvar _this = this;\n\n\t\t\tconsole.info(context + ':build:loading binding for component ' + this._component.get_name(), this._target_method, this._stream);\n\n\t\t\tthis._component.enter_group('build');\n\n\t\t\t// CHECK ATTRIBUTES\n\t\t\tif (_types2.default.isArray(this._stream)) {\n\t\t\t\tthis._stream.forEach(function (stream, index) {\n\t\t\t\t\t(0, _assert2.default)(_types2.default.isObject(stream) && stream.is_stream, context + (0, _util.format)(':build:component=%s:bad stream object at index=%s', _this._component.get_name(), index));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t(0, _assert2.default)(_types2.default.isObject(this._stream) && this._stream.is_stream, context + (0, _util.format)(':build:component=%s:bad stream object', this._component.get_name()));\n\t\t\t}\n\t\t\t(0, _assert2.default)(_types2.default.isArray(this._targets) && this._targets.length > 0, context + (0, _util.format)(':build:component=%s,timeline=%s:bad targets', this._component.get_name(), this._source_timeline, this._source_svc_method));\n\t\t\t(0, _assert2.default)(_types2.default.isString(this._target_method) || _types2.default.isNotEmptyArray(this._target_method), context + (0, _util.format)(':build:component=%s,timeline=%s:bad target method=%s', this._component.get_name(), this._source_timeline, this._target_method));\n\n\t\t\tvar method_cfg = _types2.default.isObject(this._options) ? this._options.method : undefined;\n\t\t\tvar operands = _types2.default.isObject(method_cfg) ? method_cfg.operands : undefined;\n\t\t\tvar format_cfg = _types2.default.isObject(this._options) ? this._options.format : undefined;\n\n\t\t\tvar unsubscribes = [];\n\t\t\tthis._targets.forEach(function (target, index) {\n\t\t\t\tvar stream = _types2.default.isArray(_this._stream) ? _this._stream.length > index ? _this._stream[index] : _this._stream[_this._stream.length - 1] : _this._stream;\n\n\t\t\t\tvar unbind = undefined;\n\t\t\t\tif (_types2.default.isString(_this._target_method)) {\n\t\t\t\t\t// console.info(context + ':build:loading binding for component ' + this._component.get_name() + ' with method=' + this._target_method)\n\n\t\t\t\t\tunbind = _this.bind_stream(stream, _this._source_xform, target, _this._target_method, operands, format_cfg, _this._starting_value);\n\t\t\t\t\tunsubscribes.push(unbind);\n\t\t\t\t} else if (_types2.default.isNotEmptyArray(_this._target_method)) {\n\t\t\t\t\t_this._target_method.forEach(function (method_name) {\n\t\t\t\t\t\tif (_types2.default.isString(method_name)) {\n\t\t\t\t\t\t\t// console.info(context + ':build:loading binding for component ' + this._component.get_name() + ' with methods=' + method_name)\n\n\t\t\t\t\t\t\tunbind = _this.bind_stream(stream, _this._source_xform, target, method_name, operands, format_cfg, _this._starting_value);\n\t\t\t\t\t\t\tunsubscribes.push(unbind);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._unsubscribe = function () {\n\t\t\t\tunsubscribes.forEach(function (unsubscribe) {\n\t\t\t\t\tunsubscribe();\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (_types2.default.isArray(this._state_path) && this._state_path.length > 0) {\n\t\t\t\tvar stream = _types2.default.isArray(this._stream) ? this._stream[0] : this._stream;\n\t\t\t\tif (!_types2.default.isObject(stream) || !stream.is_stream) {\n\t\t\t\t\tconsole.warn(context + ':build:bad state path stream for component %s', this._component.get_name(), this._stream, stream);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._unsubscribe_state_update = this.bind_stream(stream, this._source_xform, this._component, 'dispatch_update_state_value_action', [this._state_path]);\n\t\t\t}\n\n\t\t\tthis._component.leave_group('build:async');\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t/**\r\n   * Bind a stream to a target object action.\r\n   * \r\n   * @param {object}    arg_stream           - stream instance.\r\n   * @param {string|array|function} arg_values_xform - values transformation (optional).\r\n   * @param {object}    arg_bound_object     - target object instance (optional: this as default).\r\n   * @param {string}    arg_bound_method     - target object method string.\r\n   * @param {anything}  arg_method_operands  - target object method operands (optional).\r\n   * @param {object}    arg_format_object    - formatting settings.\r\n   * @param {any}       arg_starting_value   - starting value.\r\n   * @param {object}    arg_options          - binding options.\r\n   * \r\n   * @returns {function} - unsubscribe function.\r\n   */\n\n\t}, {\n\t\tkey: 'bind_stream',\n\t\tvalue: function bind_stream(arg_stream, arg_values_xform, arg_bound_object, arg_bound_method, arg_method_operands, arg_format_object, arg_starting_value, arg_options) {\n\t\t\tvar _this2 = this;\n\n\t\t\t// console.info(context + ':bind_stream:loading binding for component ' + this._component.get_name(), arg_bound_method, arg_method_operands, this._stream, arg_bound_object, this._source_timeline)\n\n\t\t\tvar unbind_cb = undefined;\n\n\t\t\t// SET TARGET OBJECT\n\t\t\targ_bound_object = arg_bound_object ? arg_bound_object : this._component;\n\t\t\tif (_types2.default.isString(arg_bound_object)) {\n\t\t\t\tif (_types2.default.isUndefined(arg_bound_method)) {\n\t\t\t\t\targ_bound_method = arg_bound_object;\n\t\t\t\t\targ_bound_object = this._component;\n\t\t\t\t} else if (arg_bound_object == 'this') {\n\t\t\t\t\targ_bound_object = this._component;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(context + ':bind_stream:bad bound object string:%s', arg_bound_object);\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: DO NOT USE TYPR TO TEST DOM ELEMENTS\n\t\t\t// TYPR USE toString FUNCTION TO TEST TYPE against [object Object].\n\t\t\t// FOR OBJECT, toString give [object Object]\n\t\t\t// BUT DOM ELEMENTS toString GIVE [object HTMLXXXElement]\n\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_stream) && arg_stream.is_stream, context + ':bind_stream:bad stream object');\n\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_bound_object) || (typeof arg_bound_object === 'undefined' ? 'undefined' : _typeof(arg_bound_object)) == 'object', context + ':bind_stream:bad bound object');\n\t\t\t(0, _assert2.default)(_types2.default.isString(arg_bound_method), context + ':bind_stream:bad bound method string');\n\n\t\t\t// CHECK OBJECT METHOD\n\t\t\tif (!(arg_bound_method in arg_bound_object)) {\n\t\t\t\tconsole.error(context + ':bind_stream:bad method [%s] for bound object=', arg_bound_method, arg_bound_object);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\targ_stream.get_transformed_stream().onValue(function (values) {\n\t\t\t\tconsole.log(context + ':bind_stream:on initial stream:%s:bound method=%s, bound object, values', _this2._component.get_name(), arg_bound_method, arg_bound_object, values);\n\t\t\t});\n\n\t\t\t// SET FORMATTING FUNCTION\n\t\t\tvar formatting_xform = undefined;\n\t\t\tif (_types2.default.isObject(arg_format_object) && _types2.default.isString(arg_format_object.type)) {\n\t\t\t\tformatting_xform = this.get_format_value_function(arg_format_object);\n\t\t\t}\n\n\t\t\t// SET XFORM FOR SIMPLE SETTINGS\n\t\t\tif (_types2.default.isString(arg_values_xform)) {\n\t\t\t\tvar field_name = arg_values_xform;\n\t\t\t\targ_values_xform = {\n\t\t\t\t\t\"result_type\": \"single\",\n\t\t\t\t\t\"fields\": [{\n\t\t\t\t\t\t\"name\": field_name,\n\t\t\t\t\t\t\"path\": field_name\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (_types2.default.isUndefined(arg_values_xform) || arg_values_xform == null) {\n\t\t\t\tvar xform_stream = _types2.default.isFunction(formatting_xform) ? arg_stream.get_transformed_stream().map(formatting_xform) : arg_stream.get_transformed_stream();\n\n\t\t\t\tif (!_types2.default.isUndefined(arg_starting_value)) {\n\t\t\t\t\txform_stream = xform_stream.startWith(arg_starting_value);\n\t\t\t\t}\n\n\t\t\t\tif (arg_method_operands) {\n\t\t\t\t\tif (_types2.default.isArray(arg_method_operands)) {\n\t\t\t\t\t\tvar _xform_stream$toPrope;\n\n\t\t\t\t\t\t// console.log(context + ':bind_stream:set a stream handler for method=%s with array operands=', arg_bound_method, arg_method_operands)\n\t\t\t\t\t\tunbind_cb = (_xform_stream$toPrope = xform_stream.toProperty()).assign.apply(_xform_stream$toPrope, [arg_bound_object, arg_bound_method].concat(_toConsumableArray(arg_method_operands)));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// console.log(context + ':bind_stream:set a stream handler for method=%s with not array operands=', arg_bound_method, arg_method_operands)\n\t\t\t\t\t\tunbind_cb = xform_stream.toProperty().assign(arg_bound_object, arg_bound_method, arg_method_operands);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunbind_cb = xform_stream.toProperty().assign(arg_bound_object, arg_bound_method);\n\t\t\t\t}\n\t\t\t} else if (_types2.default.isFunction(arg_values_xform)) {\n\t\t\t\tvar _xform_stream = arg_stream.get_transformed_stream().map(arg_values_xform);\n\t\t\t\t_xform_stream = _types2.default.isFunction(formatting_xform) ? _xform_stream.map(formatting_xform) : _xform_stream;\n\n\t\t\t\tif (!_types2.default.isUndefined(arg_starting_value)) {\n\t\t\t\t\t_xform_stream = _xform_stream.startWith(arg_starting_value);\n\t\t\t\t}\n\n\t\t\t\tif (arg_method_operands) {\n\t\t\t\t\tvar _xform_stream$toPrope2;\n\n\t\t\t\t\tunbind_cb = (_xform_stream$toPrope2 = _xform_stream.toProperty()).assign.apply(_xform_stream$toPrope2, [arg_bound_object, arg_bound_method].concat(_toConsumableArray(arg_method_operands)));\n\t\t\t\t} else {\n\t\t\t\t\tunbind_cb = _xform_stream.map(arg_values_xform).toProperty().assign(arg_bound_object, arg_bound_method);\n\t\t\t\t}\n\t\t\t} else if (_types2.default.isObject(arg_values_xform)) {\n\t\t\t\tvar datas_xform = function datas_xform(arg_stream_record) {\n\t\t\t\t\tif (arg_stream_record.datas) {\n\t\t\t\t\t\treturn arg_stream_record.datas;\n\t\t\t\t\t}\n\t\t\t\t\treturn arg_stream_record;\n\t\t\t\t};\n\n\t\t\t\tvar _xform_stream2 = arg_stream.get_transformed_stream().map(datas_xform).map((0, _transform.transform)(arg_values_xform));\n\n\t\t\t\t// DEBUG\n\t\t\t\t// xform_stream.map(datas_xform).map( transform(arg_values_xform) ).onValue(\n\t\t\t\t// \t(values) => {\n\t\t\t\t// \t\tconsole.log(context + ':bind_stream:%s:on values_xform stream:bound method=%s, bound object, values', name, arg_bound_method, arg_bound_object, values)\n\t\t\t\t// \t}\n\t\t\t\t// )\n\n\t\t\t\t_xform_stream2 = _types2.default.isFunction(formatting_xform) ? _xform_stream2.map(formatting_xform) : _xform_stream2;\n\n\t\t\t\tif (!_types2.default.isUndefined(arg_starting_value)) {\n\t\t\t\t\t_xform_stream2 = _xform_stream2.startWith(arg_starting_value);\n\t\t\t\t}\n\n\t\t\t\tif (arg_options && _types2.default.isBoolean(arg_options.dispatch) && arg_options.dispatch && _types2.default.isNumber(arg_options.index) && arg_options.index > 0) {\n\t\t\t\t\tvar at_index_xform = function at_index_xform(arg_stream_record) {\n\t\t\t\t\t\tif (_types2.default.isArray(arg_stream_record) && arg_stream_record.length > arg_options.index) {\n\t\t\t\t\t\t\treturn arg_stream_record[arg_options.index];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t};\n\n\t\t\t\t\t_xform_stream2 = _xform_stream2.map(at_index_xform);\n\t\t\t\t}\n\n\t\t\t\t// DEBUG\n\t\t\t\t// xform_stream.onValue(\n\t\t\t\t// \t(values) => {\n\t\t\t\t// \t\tconsole.log(context + ':bind_stream:on transformed stream:%s:bound method=%s, bound object, values', name, arg_bound_method, arg_bound_object, values)\n\t\t\t\t// \t}\n\t\t\t\t// )\n\t\t\t\tif (this._runtime.shoud_log_bindingd_stream()) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar target = arg_bound_object && arg_bound_object.get_name ? arg_bound_object.get_name() : arg_bound_object && arg_bound_object.attr ? arg_bound_object.attr('id') : arg_bound_object && arg_bound_object.getAtttribute ? arg_bound_object.getAttribute('id') : 'unknow';\n\t\t\t\t\t\t_xform_stream2.onValue(function (values) {\n\t\t\t\t\t\t\tvar datas = _types2.default.isArray(values) ? 'array of length ' + values.length : _types2.default.isObject(values) ? 'object of keys ' + Object.keys(values).toString() : 'datas';\n\t\t\t\t\t\t\t_this2._component.debug('bind_stream:on transformed stream:%s:target=%s,method=%s:values', name, target, arg_bound_method, datas);\n\t\t\t\t\t\t});\n\t\t\t\t\t})();\n\t\t\t\t}\n\n\t\t\t\tif (arg_method_operands) {\n\t\t\t\t\tif (_types2.default.isArray(arg_method_operands)) {\n\t\t\t\t\t\tvar _xform_stream3;\n\n\t\t\t\t\t\tunbind_cb = (_xform_stream3 = _xform_stream2).onValue.apply(_xform_stream3, [arg_bound_object, arg_bound_method].concat(_toConsumableArray(arg_method_operands)));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunbind_cb = _xform_stream2.onValue(arg_bound_object, arg_bound_method, arg_method_operands);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunbind_cb = _xform_stream2.onValue(arg_bound_object, arg_bound_method);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t(0, _assert2.default)(false, context + ':bind_svc:bad values paths string|array|function');\n\t\t\t}\n\n\t\t\treturn unbind_cb;\n\t\t}\n\n\t\t/**\r\n   * Get a formatting function or identity.\r\n   * Format settings example:\r\n   * \t\t{\r\n   * \t\t\t\"type\":\"number\",\r\n   * \t\t\t\"digits\":2\r\n   * \t\t}\r\n   * \r\n   * @param {object} arg_format_object - format settings.\r\n   * \r\n   * @returns {Function} - Formatting function or identity.\r\n   */\n\n\t}, {\n\t\tkey: 'get_format_value_function',\n\t\tvalue: function get_format_value_function(arg_format_object) {\n\t\t\tif (!_types2.default.isObject(arg_format_object) || !_types2.default.isString(arg_format_object.type)) {\n\t\t\t\treturn function (x) {\n\t\t\t\t\treturn x;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tswitch (arg_format_object.type.toLocaleLowerCase()) {\n\t\t\t\tcase 'number':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (_types2.default.isNumber(arg_format_object.digits)) {\n\t\t\t\t\t\t\treturn function (x) {\n\t\t\t\t\t\t\t\tif (_types2.default.isNumber(x)) {\n\t\t\t\t\t\t\t\t\treturn x.toFixed(arg_format_object.digits);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn function (x) {\n\t\t\t\t\t\t\treturn _types2.default.isNumber(x) ? x : undefined;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn function (x) {\n\t\t\t\treturn x;\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn BindingStream;\n}();\n\nexports.default = BindingStream;\n\n\n},{\"../../common/utils/transform\":104,\"../../common/utils/types\":105,\"../../common/utils/uid.js\":106,\"assert\":107,\"util\":222}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _util = require('util');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _stream = require('../../common/messaging/stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _binding_stream = require('./binding_stream');\n\nvar _binding_stream2 = _interopRequireDefault(_binding_stream);\n\nvar _binding_service_timeline = require('./binding_service_timeline');\n\nvar _binding_service_timeline2 = _interopRequireDefault(_binding_service_timeline);\n\nvar _binding_service = require('./binding_service');\n\nvar _binding_service2 = _interopRequireDefault(_binding_service);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'browser/base/binding_Loader';\n\n/**\r\n * @file UI component binding loader class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar BindingLoader = function () {\n\t/**\r\n  * Creates an instance of BindingLoader.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction BindingLoader() {\n\t\t_classCallCheck(this, BindingLoader);\n\t}\n\n\t/**\r\n  * Normalize an array of objects selectors in an array of objects.\r\n  * @static\r\n  * \r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Component} arg_component - component instance.\r\n  * @param {array} arg_selectors - selectors strings array.\r\n  * @param {array|string} arg_dom_types - selected items types strings array or single string (default \"dom\").\r\n  * \r\n  * @returns {array} - objects|strings array.\r\n  */\n\n\n\t_createClass(BindingLoader, null, [{\n\t\tkey: 'normalize_objects',\n\t\tvalue: function normalize_objects(arg_runtime, arg_component, arg_selectors) {\n\t\t\tvar arg_types = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'dom';\n\n\t\t\targ_component.enter_group('normalize_objects');\n\n\t\t\tif (!_types2.default.isArray(arg_selectors)) {\n\t\t\t\targ_component.leave_group('normalize_objects:bad selectors array');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tvar objects = [];\n\t\t\targ_selectors.forEach(function (selector, index) {\n\t\t\t\tif (!_types2.default.isString(selector)) {\n\t\t\t\t\tconsole.warn('normalize_objects:component=%s:bad selector type=%s', arg_component.get_name(), typeof selector === 'undefined' ? 'undefined' : _typeof(selector));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// DEBUG\n\t\t\t\t// console.log(context + ':normalize_objects:component=%s:binding target dom selector=%s', arg_component.get_name(), dom_selector)\n\n\t\t\t\tvar object_type = _types2.default.isString(arg_types) ? arg_types : _types2.default.isArray(arg_types) && arg_types.length > index ? arg_types[index] : arg_types[arg_types.length - 1];\n\n\t\t\t\tif (object_type == 'view') {\n\t\t\t\t\tif (selector == 'this') {\n\t\t\t\t\t\targ_component.debug('normalize_objects:view:this is found');\n\t\t\t\t\t\tobjects.push(arg_component);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\targ_component.debug('normalize_objects:view:' + selector);\n\t\t\t\t\tvar target_object = arg_runtime._ui.get(selector);\n\t\t\t\t\tif (target_object) {\n\t\t\t\t\t\tobjects.push(target_object);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(context + ':normalize_objects:component=%s:bad view selector=%s', arg_component.get_name(), selector);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (object_type == 'jquery') {\n\t\t\t\t\tif (selector == 'this') {\n\t\t\t\t\t\targ_component.debug('normalize_objects:jquery:this is found');\n\t\t\t\t\t\tobjects.push($(arg_component.get_dom_id()));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\targ_component.debug('normalize_objects:jquery:' + selector);\n\t\t\t\t\tvar jqo = $(selector);\n\t\t\t\t\tif (jqo && jqo.length > 0) {\n\t\t\t\t\t\tobjects.push(jqo);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(context + ':normalize_objects:component=%s:bad jquery selector=%s', arg_component.get_name(), selector, jqo);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (object_type == 'dom') {\n\t\t\t\t\tif (selector == 'this') {\n\t\t\t\t\t\targ_component.debug('normalize_objects:dom:this is found');\n\t\t\t\t\t\tobjects.push(arg_component.get_dom_element());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\targ_component.debug('normalize_objects:dom:' + selector);\n\t\t\t\t\tvar element = document.getElementById(selector);\n\t\t\t\t\tif (element) {\n\t\t\t\t\t\tobjects.push(element);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar selection = document.querySelector(selector);\n\t\t\t\t\tif (selection) {\n\t\t\t\t\t\tobjects.push(selection);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(context + ':normalize_objects:component=%s:bad dom selector=%s', arg_component.get_name(), selector);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (object_type == 'delegate') {\n\t\t\t\t\tobjects.push(selector);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconsole.warn(context + ':normalize_objects:component=%s:bad selector type=%s for selector=%s', arg_component.get_name(), object_type, selector);\n\t\t\t});\n\n\t\t\targ_component.leave_group('normalize_objects');\n\t\t\treturn objects;\n\t\t}\n\n\t\t/**\r\n   * Load and apply a component binding configuration.\r\n   * \r\n   * @param {string} arg_id - binding identifier.\r\n   * @param {RuntimeBase} arg_runtime - client runtime.\r\n   * @param {Component} arg_component - component instance.\r\n   * @param {Immutable.Map|undefined} arg_binding_cfg - component binding configuration.\r\n   * \r\n   * @returns {BindingStream|array} \r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(arg_id, arg_runtime, arg_component, arg_binding_cfg) {\n\t\t\t// console.info(context + ':load:loading binding for component ' + arg_component.get_name(), arg_binding_cfg)\n\n\t\t\t// CHECK BINDING CONFIGURATION\n\t\t\tif (!_types2.default.isObject(arg_binding_cfg)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// GET CONFIGURATION ATTRIBUTES\n\t\t\tvar type = 'type' in arg_binding_cfg ? arg_binding_cfg['type'] : undefined;\n\t\t\tvar state_path = 'state_path' in arg_binding_cfg ? arg_binding_cfg['state_path'] : ['bindings_values', arg_id];\n\t\t\tvar xform = 'transform' in arg_binding_cfg ? arg_binding_cfg['transform'] : undefined;\n\t\t\tvar options = 'options' in arg_binding_cfg ? arg_binding_cfg['options'] : undefined;\n\n\t\t\tvar source_svc_name = 'service' in arg_binding_cfg ? arg_binding_cfg['service'] : undefined;\n\t\t\tvar source_svc_method = 'method' in arg_binding_cfg ? arg_binding_cfg['method'] : undefined;\n\t\t\tvar source_timeline = 'timeline' in arg_binding_cfg ? arg_binding_cfg['timeline'] : undefined;\n\t\t\tvar source_stream = 'source_stream' in arg_binding_cfg ? arg_binding_cfg['source_stream'] : undefined;\n\t\t\t// const source_event      = ('event' in arg_binding_cfg) ? arg_binding_cfg['event'] : undefined\n\t\t\tvar source_dom_event = 'dom_event' in arg_binding_cfg ? arg_binding_cfg['dom_event'] : undefined;\n\n\t\t\t// SOURCES\n\t\t\tvar source_type = 'source_type' in arg_binding_cfg ? arg_binding_cfg['source_type'] : undefined;\n\t\t\tvar source_types = 'source_types' in arg_binding_cfg ? arg_binding_cfg['source_types'] : source_type ? [source_type] : undefined;\n\n\t\t\tvar source_selector = 'source_selector' in arg_binding_cfg ? arg_binding_cfg['source_selector'] : undefined;\n\t\t\tvar source_selectors = 'source_selectors' in arg_binding_cfg ? arg_binding_cfg['source_selectors'] : source_selector ? [source_selector] : undefined;\n\n\t\t\t// TARGETS\n\t\t\tvar target_type = 'target_type' in arg_binding_cfg ? arg_binding_cfg['target_type'] : undefined;\n\t\t\tvar target_types = 'target_types' in arg_binding_cfg ? arg_binding_cfg['target_types'] : target_type ? [target_type] : undefined;\n\n\t\t\tvar target_selector = 'target_selector' in arg_binding_cfg ? arg_binding_cfg['target_selector'] : undefined;\n\t\t\tvar target_selectors = 'target_selectors' in arg_binding_cfg ? arg_binding_cfg['target_selectors'] : target_selector ? [target_selector] : undefined;\n\n\t\t\t// METHOD\n\t\t\tvar target_method = 'target_method' in arg_binding_cfg ? arg_binding_cfg['target_method'] : undefined;\n\t\t\tvar target_methods = 'target_methods' in arg_binding_cfg ? arg_binding_cfg['target_methods'] : undefined;\n\n\t\t\t// NORMALIZE SOURCES\n\t\t\t// console.log(context + ':load:component=%s:binding type=%s:source_selectors&source_types=', arg_component.get_name(), type, source_selectors, source_types)\n\t\t\tvar sources = source_selectors ? this.normalize_objects(arg_runtime, arg_component, source_selectors, source_types) : undefined;\n\n\t\t\t// NORMALIZE TARGETS\n\t\t\t// console.log(context + ':load:component=%s:binding type=%s:target_selectors&target_types=', arg_component.get_name(), type, target_selectors, target_types)\n\t\t\tvar targets = target_selectors ? this.normalize_objects(arg_runtime, arg_component, target_selectors, target_types) : undefined;\n\n\t\t\t// GET STARTING VALUE\n\t\t\tvar starting_value = undefined;\n\t\t\tif (_types2.default.isArray(state_path) && state_path.length > 0) {\n\t\t\t\tstarting_value = arg_component.get_state_value(state_path, undefined);\n\t\t\t\tif (!starting_value) {\n\t\t\t\t\tstarting_value = arg_runtime.get_state_store().get_state().getIn(state_path, undefined);\n\t\t\t\t\tif (starting_value && starting_value.toJS) {\n\t\t\t\t\t\tstarting_value = starting_value.toJS();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// BIND SOURCES AND TARGETS\n\t\t\tconsole.log(context + ':load:component=%s:binding type=%s', arg_component.get_name(), type);\n\t\t\tswitch (type) {\n\t\t\t\tcase 'timeline':\n\t\t\t\t\t{\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_timeline), context + (0, _util.format)(':load:component=%s:bad timeline name=%s', arg_component.get_name(), source_timeline));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_svc_name), context + (0, _util.format)(':load:component=%s:bad service name=%s,timeline=%s', arg_component.get_name(), source_timeline, source_svc_name));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_svc_method), context + (0, _util.format)(':load:component=%s:bad service name=%s,timeline=%s', arg_component.get_name(), source_timeline, source_svc_method));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(targets) && targets.length > 0, context + (0, _util.format)(':load:component=%s,timeline=%s:bad targets', arg_component.get_name(), source_timeline, source_svc_method));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(target_method), context + (0, _util.format)(':load:component=%s,timeline=%s:bad target method=%s', arg_component.get_name(), source_timeline, target_method));\n\n\t\t\t\t\t\treturn new _binding_service_timeline2.default(arg_id, arg_runtime, arg_component).set_state_path(state_path).set_starting_value(starting_value).set_source_service_name(source_svc_name).set_source_service_method(source_svc_method).set_source_timeline_name(source_timeline).set_targets_instances_array(targets).set_target_method_name(target_method).set_options(options).build();\n\t\t\t\t\t}\n\n\t\t\t\tcase 'service':\n\t\t\t\t\t{\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_svc_name), context + (0, _util.format)(':load:component=%s:bad service name=%s', arg_component.get_name(), source_svc_name));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_svc_method), context + (0, _util.format)(':load:component=%s:bad method name=%s', arg_component.get_name(), source_svc_method));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(targets) && targets.length > 0, context + (0, _util.format)(':load:component=%s:bad targets', arg_component.get_name()));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(target_method), context + (0, _util.format)(':load:component=%s:bad target method=%s', arg_component.get_name(), target_method));\n\n\t\t\t\t\t\treturn new _binding_service2.default(arg_id, arg_runtime, arg_component).set_state_path(state_path).set_starting_value(starting_value).set_source_service_name(source_svc_name).set_source_service_method(source_svc_method).set_source_transformation(xform).set_targets_instances_array(targets).set_target_method_name(target_method).set_options(options).build();\n\t\t\t\t\t}\n\n\t\t\t\tcase 'emitter_jquery':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret = function () {\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(sources), context + (0, _util.format)(':load:component=%s:bad sources array=%s', arg_component.get_name()));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(targets) && targets.length > 0, context + (0, _util.format)(':load:component=%s:bad targets', arg_component.get_name()));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_dom_event), context + (0, _util.format)(':load:component=%s:bad source event=%s', arg_component.get_name(), source_dom_event));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(target_method), context + (0, _util.format)(':load:component=%s:bad target method=%s', arg_component.get_name(), target_method));\n\n\t\t\t\t\t\t\tvar streams = [];\n\t\t\t\t\t\t\tsources.forEach(function (jqo) {\n\t\t\t\t\t\t\t\tvar stream = new _stream2.default(jqo.asEventStream(source_dom_event));\n\t\t\t\t\t\t\t\tstreams.push(stream);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:binding type=%s:event=%s:sources=', arg_component.get_name(), type, source_dom_event, sources);\n\n\t\t\t\t\t\t\tif (!xform) {\n\t\t\t\t\t\t\t\txform = function xform(event) {\n\t\t\t\t\t\t\t\t\tvar method_cfg = _types2.default.isObject(options) ? options.method : undefined;\n\t\t\t\t\t\t\t\t\tvar operands = _types2.default.isObject(method_cfg) ? method_cfg.operands : undefined;\n\n\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:binding type=%s:event=%s:on handler:data=', arg_component.get_name(), type, source_dom_event, operands);\n\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tis_event_handler: true,\n\t\t\t\t\t\t\t\t\t\tcomponent_name: undefined,\n\t\t\t\t\t\t\t\t\t\tevent_name: source_dom_event,\n\t\t\t\t\t\t\t\t\t\tdom_selector: undefined,\n\t\t\t\t\t\t\t\t\t\ttarget: event.target,\n\t\t\t\t\t\t\t\t\t\tdata: operands\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tv: new _binding_stream2.default(arg_id, arg_runtime, arg_component).set_stream(streams).set_state_path(state_path).set_source_transformation(xform).set_targets_instances_array(targets).set_target_method_name(target_method).set_options(options).build()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'emitter_dom':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret2 = function () {\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(sources), context + (0, _util.format)(':load:component=%s:bad sources array=%s', arg_component.get_name()));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(targets) && targets.length > 0, context + (0, _util.format)(':load:component=%s:bad targets', arg_component.get_name()));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(source_dom_event), context + (0, _util.format)(':load:component=%s:bad source event=%s', arg_component.get_name(), source_dom_event));\n\t\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(target_method) || _types2.default.isNotEmptyArray(target_methods), context + (0, _util.format)(':load:component=%s:bad target method=%s:methods=%s', arg_component.get_name(), target_method, target_methods));\n\n\t\t\t\t\t\t\tvar data = options && options.method && options.method.operands ? options.method.operands : undefined;\n\t\t\t\t\t\t\tvar trace_enabled = false;\n\n\t\t\t\t\t\t\tif (_types2.default.isString(target_method)) {\n\t\t\t\t\t\t\t\tvar _ret3 = function () {\n\t\t\t\t\t\t\t\t\tvar streams = [];\n\t\t\t\t\t\t\t\t\tsources.forEach(function (arg_dom_selector) {\n\t\t\t\t\t\t\t\t\t\tvar stream = new _stream2.default();\n\t\t\t\t\t\t\t\t\t\tvar handler = function handler(component, dom_event_name, arg_selector, dom_event, dom_event_target, arg_data) {\n\t\t\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tis_event_handler: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent_name: component.get_name(),\n\t\t\t\t\t\t\t\t\t\t\t\tevent_name: dom_event_name,\n\t\t\t\t\t\t\t\t\t\t\t\tdom_selector: arg_selector,\n\t\t\t\t\t\t\t\t\t\t\t\ttarget: dom_event_target,\n\t\t\t\t\t\t\t\t\t\t\t\tdata: arg_data\n\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:binding type=%s:event=%s:on handler:data=', arg_component.get_name(), type, source_dom_event, data);\n\n\t\t\t\t\t\t\t\t\t\t\tstream.push(data);\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:binding type=%s:event=%s:selector=%s', arg_component.get_name(), type, source_dom_event, arg_dom_selector);\n\n\t\t\t\t\t\t\t\t\t\targ_component.on_dom_event(source_dom_event, arg_dom_selector, handler, data, trace_enabled);\n\t\t\t\t\t\t\t\t\t\tstreams.push(stream);\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t// console.log(context + ':load:component=%s:binding type=%s:event=%s:sources=', arg_component.get_name(), type, source_dom_event, sources)\n\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tv: {\n\t\t\t\t\t\t\t\t\t\t\tv: new _binding_stream2.default(arg_id, arg_runtime, arg_component).set_stream(streams).set_state_path(state_path).set_source_transformation(xform).set_targets_instances_array(targets).set_target_method_name(target_method).set_options(options).build()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}();\n\n\t\t\t\t\t\t\t\tif ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (_types2.default.isNotEmptyArray(target_methods)) {\n\t\t\t\t\t\t\t\tvar _ret4 = function () {\n\t\t\t\t\t\t\t\t\tvar binding_streams = [];\n\t\t\t\t\t\t\t\t\tsources.forEach(function (arg_dom_selector) {\n\t\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:target_methods binding type=%s:event=%s:selector=%s:methods=', arg_component.get_name(), type, source_dom_event, arg_dom_selector, target_methods);\n\n\t\t\t\t\t\t\t\t\t\tvar stream = new _stream2.default();\n\t\t\t\t\t\t\t\t\t\tvar handler = function handler(component, dom_event_name, arg_selector, dom_event, dom_event_target, arg_data) {\n\t\t\t\t\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\t\t\t\t\tis_event_handler: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent_name: component.get_name(),\n\t\t\t\t\t\t\t\t\t\t\t\tevent_name: dom_event_name,\n\t\t\t\t\t\t\t\t\t\t\t\tdom_selector: arg_selector,\n\t\t\t\t\t\t\t\t\t\t\t\ttarget: dom_event_target,\n\t\t\t\t\t\t\t\t\t\t\t\tdata: arg_data\n\t\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:target_methods binding type=%s:event=%s:on handler:data=', arg_component.get_name(), type, source_dom_event, data);\n\n\t\t\t\t\t\t\t\t\t\t\tstream.push(data);\n\t\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t\targ_component.on_dom_event(source_dom_event, arg_dom_selector, handler, data, trace_enabled);\n\n\t\t\t\t\t\t\t\t\t\t_lodash2.default.forEach(targets, function (target, index) {\n\t\t\t\t\t\t\t\t\t\t\tvar method = index < target_methods.length ? target_methods[index] : target_methods[target_methods.length - 1];\n\t\t\t\t\t\t\t\t\t\t\tvar method_name = undefined;\n\t\t\t\t\t\t\t\t\t\t\tvar method_operands = undefined;\n\t\t\t\t\t\t\t\t\t\t\tif (_types2.default.isObject(method)) {\n\t\t\t\t\t\t\t\t\t\t\t\tmethod_name = method.method;\n\t\t\t\t\t\t\t\t\t\t\t\tmethod_operands = method.operands;\n\t\t\t\t\t\t\t\t\t\t\t} else if (_types2.default.isString(method)) {\n\t\t\t\t\t\t\t\t\t\t\t\tmethod_name = method;\n\t\t\t\t\t\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmethod_operands = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toperands: data\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn(context + ':load:component=%s:error bad method:binding type=%s:event=%s:selector=%s:methods=%s', arg_component.get_name(), type, source_dom_event, arg_dom_selector, target_methods);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(context + ':load:component=%s:target_methods binding type=%s:method_name=%s:method_operands=', arg_component.get_name(), type, method_name, method_operands);\n\n\t\t\t\t\t\t\t\t\t\t\tvar binding_stream = new _binding_stream2.default(arg_id, arg_runtime, arg_component).set_stream(stream).set_state_path(state_path).set_source_transformation(xform).set_targets_instances_array([target]).set_target_method_name(method_name).set_options(method_operands).build();\n\t\t\t\t\t\t\t\t\t\t\tbinding_streams.push(binding_stream);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tv: {\n\t\t\t\t\t\t\t\t\t\t\tv: binding_streams\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}();\n\n\t\t\t\t\t\t\t\tif ((typeof _ret4 === 'undefined' ? 'undefined' : _typeof(_ret4)) === \"object\") return _ret4.v;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn 'break';\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tswitch (_ret2) {\n\t\t\t\t\t\t\tcase 'break':\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tif ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tcase 'stream':\n\t\t\t\t\t{\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isObject(source_stream) && source_stream.is_stream, context + (0, _util.format)(':load:component=%s:bad source stream', arg_component.get_name()));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isArray(targets) && targets.length > 0, context + (0, _util.format)(':load:component=%s:bad targets', arg_component.get_name()));\n\t\t\t\t\t\t(0, _assert2.default)(_types2.default.isString(target_method) || _types2.default.isNotEmptyArray(target_methods), context + (0, _util.format)(':load:component=%s:bad target method=%s', arg_component.get_name(), target_method));\n\n\t\t\t\t\t\tconsole.log(context + ':load:component=%s:target_methods binding type=%s:method_name=%s:method_operands=', arg_component.get_name(), type, target_method, options);\n\n\t\t\t\t\t\treturn new _binding_stream2.default(arg_id, arg_runtime, arg_component).set_stream(source_stream).set_state_path(state_path).set_source_transformation(xform).set_targets_instances_array(targets).set_target_method_name(target_methods ? target_methods : target_method).set_options(options).build();\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn(context + ':load:component=%s:binding type=%s:type not found', arg_component.get_name(), type);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn BindingLoader;\n}();\n\nexports.default = BindingLoader;\n\n\n},{\"../../common/messaging/stream\":49,\"../../common/utils/types\":105,\"./binding_service\":1,\"./binding_service_timeline\":2,\"./binding_stream\":3,\"assert\":107,\"lodash\":187,\"util\":222}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _uid = require('../../common/utils/uid.js');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _bindings_loader = require('./bindings_loader');\n\nvar _bindings_loader2 = _interopRequireDefault(_bindings_loader);\n\nvar _dom = require('./dom');\n\nvar _dom2 = _interopRequireDefault(_dom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/component';\n\n/**\r\n * @file UI component class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Component = function (_Dom) {\n\t_inherits(Component, _Dom);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * @extends Dom\r\n  * \r\n  * \tAPI\r\n  * \t\t->render():Promise - Render component DOM element.\r\n  * \t\t->process_rendering_vnode(arg_rendering_result, arg_credentials):nothing - Process rendering VNode: create or update DOM element.\r\n  * \t\t->save_rendering():nothing - Save rendering virtul node. Update component VNode with current component HTML.\r\n  * \r\n  * \t\t->update():Promise - Update view with current state.\r\n  * \t\t->update_children():Promise - Update view with current state.\r\n  * \r\n  * \t\t->clear():Promise - Clear component to initial values.\r\n  * \t\t->destroy():Promise - Destroy component DOM element.\r\n  * \r\n  * \t\t->load(arg_state):nothing - Load and apply a component configuration.\r\n  * \t\t->init_bindings():nothing - Init bindings.\r\n  * \t\t->unload():nothing - Unload a component configuration.\r\n  * \r\n  *\t\t->dispatch_update_state_action(arg_new_state):nothing - Dispatch update state action.\r\n  * \t\t->dispatch_update_state_value_action(arg_path, arg_value):nothing - Dispatch update state action.\r\n  * \r\n  * \t\t->get_children_component():array - Get view children components.\r\n  * \r\n  * \t\t->get_text_value():string - Get component content value string.\r\n  * \t\t->set_text_value(arg_value):nothing - Set component content value string.\r\n  * \r\n  * \t\t->get_object_value():object - Get component content value object.\r\n  * \t\t->set_object_value(arg_value):nothing - Set component content value object.\r\n  * \r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Immutable.Map} arg_state - component initial state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Component(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Component);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Component.__proto__ || Object.getPrototypeOf(Component)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_component = true;\n\t\t_this.is_menubar = false;\n\t\t_this.is_breadcrumbs = false;\n\n\t\t// CHILDREN COMPONENTS\n\t\t_this._children_components = undefined;\n\n\t\t_this._is_loaded = false;\n\t\t_this._bindings = {};\n\n\t\t_this._ready_promise = Promise.resolve();\n\t\t_this._assets_dependancies = [];\n\t\t_this._assets_promise = undefined;\n\n\t\t// console.info(context + ':constructor:creating component ' + this.get_name())\n\n\t\t// this.enable_trace()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Render component DOM element.\r\n  * \r\n  * @param {boolean} arg_force - should force creation of a new VNode if a previous rendering exists.\r\n  * \r\n  * @returns {Promise} - Promise of this to chain promises.\r\n  */\n\n\n\t_createClass(Component, [{\n\t\tkey: 'render',\n\t\tvalue: function render(arg_force) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.enter_group('render');\n\n\t\t\tthis._ready_promise = this._ready_promise.then(function () {\n\t\t\t\treturn _this2._render(arg_force);\n\t\t\t});\n\n\t\t\tthis.leave_group('render:async');\n\t\t\treturn this._ready_promise;\n\t\t}\n\t}, {\n\t\tkey: '_render',\n\t\tvalue: function _render(arg_force) {\n\t\t\tvar _this3 = this;\n\n\t\t\t// const is_rendered = this.get_state_value('is_rendered', false)\n\t\t\t// if (! arg_force && this._is_rendered)\n\t\t\t// {\n\t\t\t// \tthis.leave_group('render:already rendered')\n\t\t\t// \treturn Promise.resolve()\n\t\t\t// }\n\n\t\t\tvar promise = Promise.resolve();\n\t\t\tif (arg_force) {\n\t\t\t\tthis.debug('render:force rendering');\n\t\t\t\tpromise = this._rendering.render();\n\t\t\t}\n\n\t\t\tpromise = promise.then(function () {\n\t\t\t\t// SHOULD RENDER VNODE\n\t\t\t\tif (!_this3.has_dom_vnode()) {\n\t\t\t\t\t_this3.debug('render:should create vnode');\n\t\t\t\t\tvar p = _this3._rendering.render();\n\t\t\t\t\t_this3.leave_group('render:vnode is created');\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\n\t\t\t\t// DISPLAY VNODE\n\t\t\t\tif (_this3.has_dom_vnode()) {\n\t\t\t\t\tvar vnode = _this3.get_dom_vnode();\n\t\t\t\t\tvar _p = _this3.process_rendering_vnode(vnode);\n\t\t\t\t\t_this3.leave_group('render:vnode is rendered');\n\t\t\t\t\treturn _p;\n\t\t\t\t}\n\n\t\t\t\t// RENDERING FAILED\n\t\t\t\t_this3.error('render:render:no vnode to render');\n\t\t\t\t_this3.leave_group('render:no vnode to render');\n\t\t\t\treturn Promise.reject(context + ':render:no dom vnode to render for ' + _this3.get_name());\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * PROCESS RENDERING VNODE: CREATE OR UPDATE DOM ELEMENT.\r\n   */\n\n\t}, {\n\t\tkey: 'process_rendering_vnode',\n\t\tvalue: function process_rendering_vnode(arg_rendering_result, arg_credentials) {\n\t\t\tthis._rendering.process_rendering_vnode(arg_rendering_result, arg_credentials);\n\n\t\t\tthis._is_visible = true;\n\t\t\t// PROCESS CHILDREN\n\t\t\t// ...\n\t\t}\n\n\t\t/**\r\n   * Save rendering virtul node. Update component VNode with current component HTML.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'save_rendering',\n\t\tvalue: function save_rendering() {\n\t\t\tthis._rendering.save_rendering();\n\t\t}\n\n\t\t/**\r\n   * Update view with current state.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'update',\n\t\tvalue: function update() {\n\t\t\tvar _this4 = this;\n\n\t\t\tthis.enter_group('update');\n\n\t\t\tconsole.info(context + ':update:%s', this.get_name());\n\n\t\t\tthis._ready_promise = this._ready_promise.then(function () {\n\t\t\t\treturn _this4._update();\n\t\t\t});\n\n\t\t\tthis.leave_group('update:async');\n\t\t\treturn this._ready_promise;\n\t\t}\n\t}, {\n\t\tkey: '_update',\n\t\tvalue: function _update() {\n\t\t\tvar _this5 = this;\n\n\t\t\tthis.debug('update:name=' + this.get_name() + ',dom_id=' + this.get_dom_id());\n\n\t\t\tvar new_elm = document.getElementById(this.get_dom_id());\n\t\t\tvar prev_elm = this.get_dom_element();\n\t\t\t// console.log(prev_elm, context + ':update:prev_elm')\n\t\t\t// console.log(new_elm,  context + ':update:new_elm')\n\n\t\t\tif (!new_elm) {\n\t\t\t\t// this.leave_group('update')\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tif (prev_elm != new_elm) {\n\t\t\t\tthis.debug(':update:prev_elm <> new_elm');\n\t\t\t\tif (prev_elm.parentNode) {\n\t\t\t\t\tprev_elm.parentNode.removeChild(prev_elm);\n\t\t\t\t}\n\t\t\t\tthis._dom_element = new_elm;\n\t\t\t}\n\n\t\t\tvar promise = Promise.resolve();\n\t\t\tif (_types2.default.isFunction(this._update_self)) {\n\t\t\t\tthis.debug(':update:call _update_self (async)');\n\n\t\t\t\tpromise = promise.then(function () {\n\t\t\t\t\t_this5._update_self(prev_elm, new_elm);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpromise = promise.then(function () {\n\t\t\t\t_this5.update_children();\n\t\t\t});\n\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Update view with current state.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'update_children',\n\t\tvalue: function update_children() {\n\t\t\tvar _this6 = this;\n\n\t\t\tthis.enter_group('update_children');\n\n\t\t\tthis.get_children_component().forEach(function (component) {\n\t\t\t\t_this6.debug(':update_children:component=' + component.get_name());\n\t\t\t\tcomponent.update();\n\t\t\t});\n\n\t\t\tthis.leave_group('update_children');\n\t\t}\n\n\t\t/**\r\n   * Clear component to initial values.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'clear',\n\t\tvalue: function clear() {}\n\t\t// TO OVERWRITE\n\n\n\t\t/**\r\n   * Destroy component DOM element.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tthis.enter_group('destroy');\n\n\t\t\tif (this._dom_element) {\n\t\t\t\tthis._dom_element.parentNode.removeChild(this._dom_element);\n\t\t\t}\n\n\t\t\tthis.leave_group('destroy');\n\t\t}\n\n\t\t/**\r\n   * Load and apply a component configuration.\r\n   * \r\n   * @param {Immutable.Map|undefined} arg_state - component state to load (optional).\r\n   * \r\n   * @returns {nothing} \r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(arg_state) {\n\t\t\tthis.enter_group('load');\n\n\t\t\tif (this._is_loaded) {\n\t\t\t\t// console.info(context + ':load:already loaded component ' + this.get_name())\n\t\t\t\tthis.leave_group('load:already loaded');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// const self = this\n\t\t\t// console.info(context + ':load:loading component ' + this.get_name())\n\n\t\t\tif (!this.store_unsubscribe) {\n\t\t\t\tthis.store_unsubscribe = this.get_runtime().create_store_observer(this);\n\t\t\t}\n\n\t\t\tvar state = arg_state ? arg_state : this.get_state();\n\t\t\t// console.log(state, 'load bindinds')\n\n\t\t\tif (!state) {\n\t\t\t\tthis.leave_group('load:no state found');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.init_assets();\n\n\t\t\t// this.update()\n\n\t\t\tthis._is_loaded = true;\n\t\t\tthis.leave_group('load');\n\t\t}\n\n\t\t/**\r\n   * Get assets promises.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_promise',\n\t\tvalue: function get_assets_promise() {\n\t\t\treturn this._assets_promise;\n\t\t}\n\n\t\t/**\r\n   * Get assets dependancies.\r\n   * \r\n   * @returns {array}\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_dependancies',\n\t\tvalue: function get_assets_dependancies() {\n\t\t\treturn this._assets_dependancies;\n\t\t}\n\n\t\t/**\r\n   * Get assets promises.\r\n   * \r\n   * @param {string} arg_asset_id - asset element id.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'add_assets_dependancy',\n\t\tvalue: function add_assets_dependancy(arg_asset_id) {\n\t\t\treturn this._assets_dependancies.push(arg_asset_id);\n\t\t}\n\n\t\t/**\r\n   * Init assets promises.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'init_assets',\n\t\tvalue: function init_assets() {\n\t\t\tthis.enter_group('init_assets');\n\n\t\t\tvar assets_promises = [];\n\t\t\tthis._assets_dependancies.forEach(function (asset_id) {\n\t\t\t\tassets_promises.push(window.devapt().asset_promise(asset_id));\n\t\t\t});\n\t\t\t// console.log(context + ':init:%s:assets:', this.get_name(), this._assets_dependancies)\n\n\t\t\tthis._assets_promise = Promise.all(assets_promises);\n\n\t\t\tthis.leave_group('init_assets');\n\t\t}\n\n\t\t/**\r\n   * Init bindings.\r\n   * \r\n   * @returns {nothing} \r\n   */\n\n\t}, {\n\t\tkey: 'init_bindings',\n\t\tvalue: function init_bindings() {\n\t\t\tvar _this7 = this;\n\n\t\t\tthis.enter_group('init_bindings');\n\n\t\t\tvar state = this.get_state();\n\t\t\tvar bindings = state.has('bindings') ? state.get('bindings').toJS() : undefined;\n\t\t\tif (_types2.default.isObject(bindings)) {\n\t\t\t\tif (_types2.default.isArray(bindings.services)) {\n\t\t\t\t\tbindings.services.forEach(function (bind_cfg) {\n\t\t\t\t\t\tbind_cfg.type = bind_cfg.timeline ? 'timeline' : bind_cfg.dom_event ? 'emitter_jquery' : 'service';\n\t\t\t\t\t\tvar id = 'binding_' + (0, _uid2.default)();\n\t\t\t\t\t\t_this7._bindings[id] = _bindings_loader2.default.load(id, _this7._runtime, _this7, bind_cfg);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isArray(bindings.streams)) {\n\t\t\t\t\tbindings.streams.forEach(function (bind_cfg) {\n\t\t\t\t\t\t// console.log(context + ':load:stream binding:', bind_cfg)\n\t\t\t\t\t\tvar stream = bind_cfg.source_stream ? bind_cfg.source_stream : undefined;\n\n\t\t\t\t\t\tif (_types2.default.isString(stream)) {\n\t\t\t\t\t\t\tvar source_component = _this7;\n\t\t\t\t\t\t\tif (bind_cfg.source_type == 'views' && _types2.default.isNotEmptyString(bind_cfg.source_selector)) {\n\t\t\t\t\t\t\t\tsource_component = window.devapt().ui(bind_cfg.source_selector);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstream = source_component.get_named_stream(stream);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (_types2.default.isObject(stream) && stream.is_stream) {\n\t\t\t\t\t\t\tbind_cfg.type = 'stream';\n\t\t\t\t\t\t\tbind_cfg.source_stream = stream;\n\t\t\t\t\t\t\tvar id = 'binding_' + (0, _uid2.default)();\n\t\t\t\t\t\t\t_this7._bindings[id] = _bindings_loader2.default.load(id, _this7._runtime, _this7, bind_cfg);\n\n\t\t\t\t\t\t\t// console.log(context + ':load:stream bound:', id, bind_cfg)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isArray(bindings.emitter_jquery)) {\n\t\t\t\t\tbindings.emitter_jquery.forEach(function (bind_cfg) {\n\t\t\t\t\t\tbind_cfg.type = 'emitter_jquery';\n\t\t\t\t\t\tvar id = 'binding_' + (0, _uid2.default)();\n\t\t\t\t\t\tvar binding_streams = _bindings_loader2.default.load(id, _this7._runtime, _this7, bind_cfg);\n\t\t\t\t\t\tif (_types2.default.isArray(binding_streams)) {\n\t\t\t\t\t\t\t_lodash2.default.forEach(binding_streams, function (binding, index) {\n\t\t\t\t\t\t\t\t_this7._bindings[id + '_' + index] = binding;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this7._bindings[id] = binding_streams;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isArray(bindings.emitter_dom)) {\n\t\t\t\t\tbindings.emitter_dom.forEach(function (bind_cfg) {\n\t\t\t\t\t\tbind_cfg.type = 'emitter_dom';\n\t\t\t\t\t\tvar id = 'binding_' + (0, _uid2.default)();\n\t\t\t\t\t\tvar binding_streams = _bindings_loader2.default.load(id, _this7._runtime, _this7, bind_cfg);\n\t\t\t\t\t\tif (_types2.default.isArray(binding_streams)) {\n\t\t\t\t\t\t\t_lodash2.default.forEach(binding_streams, function (binding, index) {\n\t\t\t\t\t\t\t\t_this7._bindings[id + '_' + index] = binding;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this7._bindings[id] = binding_streams;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.leave_group('init_bindings');\n\t\t}\n\n\t\t/**\r\n   * Unload a component configuration.\r\n   * \r\n   * @returns {nothing} \r\n   */\n\n\t}, {\n\t\tkey: 'unload',\n\t\tvalue: function unload() {\n\t\t\tthis.enter_group('unload');\n\n\t\t\t(0, _assert2.default)(_types2.default.isFunction(this.store_unsubscribe), context + ':unload:bad store_unsubscribe function');\n\n\t\t\t// UNBIND ALL BINDINGS\n\t\t\t_lodash2.default.forEach(this._bindings, function (binding /*, id*/) {\n\t\t\t\tbinding._unsubscribe();\n\t\t\t\tif (binding._unsubscribe_state_update) {\n\t\t\t\t\tbinding._unsubscribe_state_update();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// DETACH STORE CHANGE LISTENER\n\t\t\tthis.store_unsubscribe();\n\n\t\t\tthis.leave_group('unload');\n\t\t}\n\n\t\t/**\r\n   * Get a named stream.\r\n   * \r\n   * @param {string} arg_stream_name - stream name.\r\n   * \r\n   * @returns {Stream|undefined} - found stream.\r\n   */\n\n\t}, {\n\t\tkey: 'get_named_stream',\n\t\tvalue: function get_named_stream(arg_stream_name) {\n\t\t\tswitch (arg_stream_name.toLocaleLowerCase()) {\n\t\t\t\tcase 'runtime_logs':\n\t\t\t\t\treturn this._runtime.logs_stream;\n\t\t\t}\n\n\t\t\tconsole.warn(context + ':get_named_stream:%s:unknow named stream', this.get_name(), arg_stream_name.toLocaleLowerCase());\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Dispatch update state action.\r\n   * \r\n   * @param {Immutable.Map} arg_new_state - new state Immutable Map.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch_update_state_action',\n\t\tvalue: function dispatch_update_state_action(arg_new_state) {\n\t\t\tif (!_types2.default.isObject(arg_new_state)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar new_state = arg_new_state.toJS ? arg_new_state.toJS() : arg_new_state;\n\t\t\t// console.log(context + ':dispatch_update_state_action:new state:', new_state)\n\n\t\t\tvar action = { type: 'ADD_JSON_RESOURCE', resource: this.get_name(), path: this.get_state_path(), json: new_state };\n\t\t\twindow.devapt().ui().store.dispatch(action);\n\t\t}\n\n\t\t/**\r\n   * Dispatch update state action.\r\n   * \r\n   * @param {array|string} arg_path - component state path.\r\n   * @param {any} arg_value - component state value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch_update_state_value_action',\n\t\tvalue: function dispatch_update_state_value_action(arg_path, arg_value) {\n\t\t\tif (!_types2.default.isArray(arg_path)) {\n\t\t\t\tconsole.error(context + ':dispatch_update_state_value_action:bad path array:path,value:', arg_path, arg_value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log(context + ':dispatch_update_state_value_action:path,value:', arg_path, arg_value)\n\n\t\t\tvar new_state = this.get_state().setIn(arg_path, arg_value);\n\t\t\tthis.dispatch_update_state_action(new_state);\n\t\t}\n\n\t\t/**\r\n   * Get view children components.\r\n   * \r\n   * @returns {array} - list of Component.\r\n   */\n\n\t}, {\n\t\tkey: 'get_children_component',\n\t\tvalue: function get_children_component() {\n\t\t\tvar _this8 = this;\n\n\t\t\tif (!this._children_components) {\n\t\t\t\t(function () {\n\t\t\t\t\t_this8._children_components = [];\n\n\t\t\t\t\t// GET APPLICATION STATE AND INIT APPLICATION STATE PATH\n\t\t\t\t\tvar ui = window.devapt().ui();\n\t\t\t\t\tvar current_app_state = ui.store.get_state();\n\t\t\t\t\tvar state_path = ['views'];\n\t\t\t\t\tvar component_desc = ui._ui_factory.find_component_desc(current_app_state, _this8.get_name(), state_path);\n\t\t\t\t\tvar children = component_desc ? component_desc.get('children', undefined) : undefined;\n\t\t\t\t\tvar children_names = children ? Object.keys(children.toJS()) : [];\n\t\t\t\t\t_this8.debug(':get_children_component:init with children_names:', children_names);\n\n\t\t\t\t\tvar items = _this8.get_state_value('items', []);\n\t\t\t\t\t_this8.debug(':get_children_component:init with items:', items);\n\n\t\t\t\t\tvar all_children = _lodash2.default.concat(children_names, items);\n\t\t\t\t\t// console.info(context + ':get_children_component:all_children:%s:', this.get_name(), all_children)\n\n\t\t\t\t\tvar unique_children = {};\n\t\t\t\t\tall_children.forEach(function (item) {\n\t\t\t\t\t\tif (_types2.default.isObject(item)) {\n\t\t\t\t\t\t\t_this8.debug(':get_children_component:loop on item object');\n\n\t\t\t\t\t\t\tif (_types2.default.isString(item.view)) {\n\t\t\t\t\t\t\t\tif (item.viewitem in unique_children) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_this8.debug(':get_children_component:loop on item string:', item.view);\n\n\t\t\t\t\t\t\t\tvar component = window.devapt().ui(item.view);\n\t\t\t\t\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t\t\t\t\t_this8._children_components.push(component);\n\t\t\t\t\t\t\t\t\tunique_children[component.get_name()] = true;\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_this8.warn(':get_children_component:bad item component for:', item.view);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_this8.warn(':get_children_component:bad item object for:', item.toString());\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (_types2.default.isString(item)) {\n\t\t\t\t\t\t\tif (item in unique_children) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_this8.debug(':get_children_component:loop on item string:', item);\n\t\t\t\t\t\t\tvar _component = window.devapt().ui(item);\n\t\t\t\t\t\t\tif (_component && _component.is_component) {\n\t\t\t\t\t\t\t\t_this8._children_components.push(_component);\n\t\t\t\t\t\t\t\tunique_children[_component.get_name()] = true;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_this8.warn(':get_children_component:bad item component for:', item);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_this8.warn(':get_children_component:bad item type for:', item.toString());\n\t\t\t\t\t});\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\tthis.debug(':get_children_component:', this._children_components);\n\t\t\treturn this._children_components;\n\t\t}\n\n\t\t/**\r\n   * Get component content value string.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_text_value',\n\t\tvalue: function get_text_value() {\n\t\t\treturn this.get_dom_text();\n\t\t}\n\n\t\t/**\r\n   * Set component content value string.\r\n   * \r\n   * @param {string} arg_value - component values string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_text_value',\n\t\tvalue: function set_text_value(arg_value) {\n\t\t\tthis.set_dom_text('' + arg_value);\n\t\t}\n\n\t\t/**\r\n   * Get component content value object.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'get_object_value',\n\t\tvalue: function get_object_value() {\n\t\t\tvar json = undefined;\n\n\t\t\tvar str = this.get_dom_text();\n\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(str);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(context + ':get_object_value:error %s:bad json string=%s:', e, str);\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\n\t\t/**\r\n   * Set component content value object\r\n   * \r\n   * @param {object} arg_value - component values object.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_object_value',\n\t\tvalue: function set_object_value(arg_value) {\n\t\t\ttry {\n\t\t\t\tvar str = JSON.stringify(arg_value);\n\t\t\t\tthis.set_dom_text(str);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(context + ':set_object_value:error %s:bad object=:', e, arg_value);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Render a component inside this element from a json description.\r\n   * \r\n   * @param {object} arg_options - json source configuration.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_and_render_inside_from_json',\n\t\tvalue: function register_and_render_inside_from_json(arg_options) {\n\t\t\tthis.enter_group('register_and_render_inside_from_json');\n\n\t\t\tvar json = this.register_from_json(arg_options);\n\n\t\t\tif (!_types2.default.isObject(json)) {\n\t\t\t\tthis.leave_group('register_and_render_inside_from_json:error:bad json object');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.render_inside_from_json(json.name, json);\n\n\t\t\tthis.leave_group('register_and_render_inside_from_json');\n\t\t}\n\n\t\t/**\r\n   * Register a component description from a json content.\r\n   * \r\n   * @param {object} arg_options - json source configuration.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_from_json',\n\t\tvalue: function register_from_json(arg_options) {\n\t\t\tthis.enter_group('register_from_json');\n\n\t\t\tconsole.log(context + ':register_from_json:options=', arg_options);\n\n\t\t\tif (arg_options.is_event_handler) {\n\t\t\t\targ_options = arg_options.data;\n\t\t\t}\n\n\t\t\t// CHECK CONFIGURATION\n\t\t\tif (!_types2.default.isObject(arg_options)) {\n\t\t\t\tconsole.warn(context + ':register_from_json:bad options object');\n\t\t\t\tthis.leave_group('register_from_json:error:bad options object');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!_types2.default.isString(arg_options.json_source_view)) {\n\t\t\t\tconsole.warn(context + ':register_from_json:bad options.json_source_view string');\n\t\t\t\tthis.leave_group('register_from_json:error:bad options.json_source_view string');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!_types2.default.isString(arg_options.json_source_getter)) {\n\t\t\t\tconsole.warn(context + ':register_from_json:bad options.json_source_getter string');\n\t\t\t\tthis.leave_group('register_from_json:error:bad options.json_source_getter string');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar source_object = this.get_runtime().ui().get(arg_options.json_source_view);\n\t\t\tif (!_types2.default.isObject(source_object) || !source_object.is_component) {\n\t\t\t\tconsole.warn(context + ':register_from_json:%s:view=%s:bad json source component', this.get_name(), arg_options.json_source_view, source_object);\n\t\t\t\tthis.leave_group('register_from_json:error:bad json source component');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!(arg_options.json_source_getter in source_object)) {\n\t\t\t\tconsole.warn(context + ':register_from_json:bad json source method for component');\n\t\t\t\tthis.leave_group('register_from_json:error:bad json source method for component');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!_types2.default.isFunction(source_object[arg_options.json_source_getter])) {\n\t\t\t\tconsole.warn(context + ':register_from_json:bad json source method for component');\n\t\t\t\tthis.leave_group('register_from_json:error:bad json source method for component');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// GET JSON FROM SOURCE\n\t\t\ttry {\n\t\t\t\tvar json = source_object[arg_options.json_source_getter]();\n\n\t\t\t\t// DEBUG\n\t\t\t\tconsole.log(context + ':register_from_json:json=', json);\n\n\t\t\t\t// CHECK COMPONENT NAME\n\t\t\t\tif (!_types2.default.isString(json.name)) {\n\t\t\t\t\tconsole.warn(context + ':register_from_json:bad json.name string');\n\t\t\t\t\tthis.leave_group('register_from_json:error:bad json.name string');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// STORE COMPONENT DESCRIPTION\n\t\t\t\tvar action = { type: 'ADD_JSON_RESOURCE', resource: json.name, collection: 'views', json: json };\n\t\t\t\tthis.get_runtime().get_state_store().dispatch(action);\n\n\t\t\t\tthis.leave_group('register_from_json');\n\t\t\t\treturn json;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(context + ':register_from_json:error %s', e);\n\n\t\t\t\tthis.leave_group('register_from_json:error:' + e);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Render a component inside this element from a json description.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * @param {object} arg_json_desc - component description.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'render_inside_from_json',\n\t\tvalue: function render_inside_from_json(arg_name, arg_json_desc) {\n\t\t\tthis.enter_group('render_inside_from_json');\n\n\t\t\tconsole.log(context + ':render_inside_from_json:name and description:', arg_name, arg_json_desc);\n\n\t\t\ttry {\n\t\t\t\t// CREATE COMPONENT ELEMENT\n\t\t\t\tvar this_element = this.get_dom_element();\n\t\t\t\tif (!this_element) {\n\t\t\t\t\tconsole.warn(context + ':render_inside_from_json:bad dom element');\n\t\t\t\t\tthis.leave_group('render_inside_from_json:error:bad dom element');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar this_document = this_element.ownerDocument;\n\t\t\t\tvar existing_element = this_document.getElementById(arg_name);\n\t\t\t\tvar sub_element = undefined;\n\t\t\t\tif (existing_element) {\n\t\t\t\t\tif (existing_element.parentElement == this_element) {\n\t\t\t\t\t\tsub_element = existing_element;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(context + ':render_inside_from_json:a previous element exist with given name=%s', arg_name);\n\t\t\t\t\t\tthis.leave_group('render_inside_from_json:error:bad dom element');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsub_element = this_element.ownerDocument.createElement('div');\n\t\t\t\t\tsub_element.setAttribute('id', arg_name);\n\t\t\t\t\tthis_element.appendChild(sub_element);\n\t\t\t\t}\n\n\t\t\t\tvar component = this.get_runtime().ui().create_local(arg_name, arg_json_desc);\n\t\t\t\tcomponent.render(true).then(function () {\n\t\t\t\t\twindow.devapt().content_rendered();\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(context + ':render_inside_from_json:error %s', e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Expand component to fullscreen (inside browser window).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'expand_to_fullscreen',\n\t\tvalue: function expand_to_fullscreen() {\n\t\t\tconsole.log(context + ':expand_to_fullscreen');\n\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tvar bcolor = 'background-color';\n\t\t\tvar lmargin = 'margin-left';\n\n\t\t\tif (dom_elem.parentNode && dom_elem.parentNode.className.indexOf('devapt-dock-item') > -1) {\n\t\t\t\tdom_elem = dom_elem.parentNode;\n\t\t\t}\n\n\t\t\tdom_elem.className = dom_elem.className ? dom_elem.className : '';\n\n\t\t\tif (dom_elem.className.indexOf('devapt-fullscreen') < 0) {\n\t\t\t\tthis.saved_dom = {\n\t\t\t\t\tbody_overflow: document.body.style.overflow,\n\t\t\t\t\tclassName: dom_elem.className,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tposition: dom_elem.style.position,\n\t\t\t\t\t\tleft: dom_elem.style.left,\n\t\t\t\t\t\ttop: dom_elem.style.top,\n\t\t\t\t\t\theight: dom_elem.style.height,\n\t\t\t\t\t\twidth: dom_elem.style.width,\n\t\t\t\t\t\tbcolor: dom_elem.style[bcolor],\n\t\t\t\t\t\tlmargin: dom_elem.style[lmargin],\n\t\t\t\t\t\tzindex: dom_elem.style['z-index']\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tdocument.body.style.overflow = 'hidden';\n\n\t\t\t\tdom_elem.style.position = 'fixed';\n\t\t\t\tdom_elem.style.left = '20px';\n\t\t\t\tdom_elem.style.top = '20px';\n\t\t\t\tdom_elem.style.height = '100%';\n\t\t\t\tdom_elem.style.width = '100%';\n\t\t\t\tdom_elem.style[bcolor] = 'white';\n\t\t\t\tdom_elem.style[lmargin] = '0px';\n\t\t\t\tdom_elem.style['z-index'] = 999;\n\t\t\t\tdom_elem.className += ' devapt-fullscreen';\n\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Collapse component from fullscreen to original size.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'collapse_from_fullscreen',\n\t\tvalue: function collapse_from_fullscreen() {\n\t\t\t// console.log(context + ':collapse_from_fullscreen')\n\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tvar bcolor = 'background-color';\n\t\t\tvar lmargin = 'margin-left';\n\n\t\t\tif (dom_elem.parentNode && dom_elem.parentNode.className.indexOf('devapt-dock-item') > -1) {\n\t\t\t\tdom_elem = dom_elem.parentNode;\n\t\t\t}\n\n\t\t\tdom_elem.className = dom_elem.className ? dom_elem.className : '';\n\n\t\t\tif (dom_elem.className.indexOf('devapt-fullscreen') > -1 && _types2.default.isObject(this.saved_dom) && _types2.default.isObject(this.saved_dom.style)) {\n\t\t\t\tdocument.body.style.overflow = this.saved_dom.body_overflow;\n\n\t\t\t\tdom_elem.style.position = this.saved_dom.style.position;\n\t\t\t\tdom_elem.style.left = this.saved_dom.style.left;\n\t\t\t\tdom_elem.style.top = this.saved_dom.style.top;\n\t\t\t\tdom_elem.style.height = this.saved_dom.style.height;\n\t\t\t\tdom_elem.style.width = this.saved_dom.style.width;\n\t\t\t\tdom_elem.style[bcolor] = this.saved_dom.style.bcolor;\n\t\t\t\tdom_elem.style[lmargin] = this.saved_dom.style.lmargin;\n\t\t\t\tdom_elem.style['z-index'] = this.saved_dom.style.zindex;\n\n\t\t\t\tdom_elem.className = this.saved_dom.className;\n\n\t\t\t\tthis.saved_dom = {};\n\n\t\t\t\tthis.resize();\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Toggle component fullscreen mode.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'toggle_from_fullscreen',\n\t\tvalue: function toggle_from_fullscreen() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\n\t\t\tif (dom_elem.parentNode && dom_elem.parentNode.className.indexOf('devapt-dock-item') > -1) {\n\t\t\t\tdom_elem = dom_elem.parentNode;\n\t\t\t}\n\n\t\t\tdom_elem.className = dom_elem.className ? dom_elem.className : '';\n\n\t\t\tif (dom_elem.className.indexOf('devapt-fullscreen') > -1) {\n\t\t\t\tthis.collapse_from_fullscreen();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.expand_to_fullscreen();\n\t\t}\n\n\t\t/**\r\n   * Resize component.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'resize',\n\t\tvalue: function resize() {\n\t\t\tvar _this9 = this;\n\n\t\t\tthis.get_children_component().forEach(function (component) {\n\t\t\t\t_this9.debug(':resize:component=' + component.get_name());\n\t\t\t\tcomponent.resize();\n\t\t\t});\n\t\t}\n\n\t\t/*\r\n  function resize() {\r\n     // position the full screen button in the top right\r\n     var top = 8;\r\n     var right = (dom.topPanel.clientWidth - dom.results.clientWidth) + 6;\r\n     dom.fullscreen.style.top = top + 'px';\r\n     dom.fullscreen.style.right = right + 'px';\r\n   }\r\n  \n   function toggleFullscreen() {\r\n     if (fullscreen) {\r\n       exitFullscreen();\r\n     }\r\n     else {\r\n       showFullscreen()\r\n     }\r\n   }\r\n  \n   function showFullscreen() {\r\n     dom.frame.className = 'cle fullscreen';\r\n     document.body.style.overflow = 'hidden'; // (works only if body.style.height is defined)\r\n     fullscreen = true;\r\n     resize();\r\n     scrollDown();\r\n     dom.input.focus();\r\n   }\r\n  \n   function exitFullscreen() {\r\n     dom.frame.className = 'cle';\r\n     document.body.style.overflow = '';\r\n     fullscreen = false;\r\n     resize();\r\n     scrollDown();\r\n   }\r\n   if (keynum == 27) { // ESC\r\n       if (fullscreen) {\r\n         exitFullscreen();\r\n         util.preventDefault(event);\r\n         util.stopPropagation(event);\r\n       }\r\n     }\r\n     else if (event.ctrlKey && keynum == 122) { // Ctrl+F11\r\n       toggleFullscreen();\r\n       if (fullscreen) {\r\n         dom.input.focus();\r\n       }\r\n       util.preventDefault(event);\r\n       util.stopPropagation(event);\r\n     }\r\n  /**\r\n    * Resize event handler\r\n    *\r\n   function onWindowResize () {\r\n     if (dom.frame.parentNode != container) {\r\n       destroy();\r\n     }\r\n  \n     resize();\r\n   }\r\n  \n  */\n\n\t}]);\n\n\treturn Component;\n}(_dom2.default);\n\nexports.default = Component;\n\n\n},{\"../../common/utils/types\":105,\"../../common/utils/uid.js\":106,\"./bindings_loader\":4,\"./dom\":7,\"assert\":107,\"lodash\":187}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _immutable = require('immutable');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _component = require('./component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/container';\n\n/**\r\n * @file UI component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Container = function (_Component) {\n\t_inherits(Container, _Component);\n\n\t/**\r\n  * Creates an instance of Container. A Container contains other Components through the 'children' property.\r\n  * @extends Component\r\n  * \r\n  * Container state attributes:\r\n  * \t- strategy: Immutable.Map (how to manage UI updates with items changes)\r\n  * \t\t- update_mode: 'append' | 'prepend' | 'replace' | 'insert at'\r\n  * \t\t- update_index: integer (position for 'insert at' mode)\r\n  * \t\t- resize_mode: 'remove_last' | 'remove_first'\r\n  * \t\t- resize_max: integer (max items count)\r\n  * \r\n  * \tAPI\r\n  * \t\t->load(arg_state):nothing - load configuration\r\n  * \r\n  * \tAPI: DEFINE ACTION WRAPPERS (only dispatch an action to update the state)\r\n  * \t\t->do_action_set_resize_max(arg_value):nothing - Set max items value for the container.\r\n  * \t\t->do_action_clear_items():nothing - Clear container items.\r\n  * \r\n  * \t\t->do_action_append(arg_items_array, arg_items_count):nothing  - Append items to the container (an item can be a string or an array or an object or ...).\r\n  * \t\t->do_action_prepend(arg_items_array, arg_items_count):nothing - Prepend an item (an item can be a string or an array or an object or ...).\r\n  * \t\t->do_action_replace(arg_items_array, arg_items_count):nothing - Replace items to the container (an item can be a string or an array or an object or ...).\r\n  * \t\t->do_action_insert_at(arg_index, arg_items_array, arg_items_count):nothing - Insert items at container position index (an item can be a string or an array or an object or ...).\r\n  * \r\n  * \t\t->do_action_remove_at_index(arg_index):nothing - Remove an item at given position.\r\n  * \t\t->do_action_remove_first():nothing             - Remove an item at first position.\r\n  * \t\t->do_action_remove_last(arg_count):nothing     - Remove an item at last position.\r\n  * \r\n  * \t\t->reduce_action(arg_previous_state, arg_action):Immutable.Map    - Store actions reducer pure function.\r\n  * \t\t->handle_state_change(arg_previous_state, arg_new_state):nothing - Handle component state changes.\r\n  * \r\n  * \r\n  * API: DEFINE UI HANDLERS FOR STATE UPDATE (only update UI)\r\n  * \t\t->ui_items_get_count():nothing - Get container items count.\r\n  * \t\t->ui_items_clear():nothing     - Erase container items.\r\n  * \r\n  * \t\t->ui_items_append(arg_items_array):nothing  - Append tems to the container.\r\n  * \t\t->ui_items_prepend(arg_items_array):nothing - Prepend tems to the container.\r\n  * \t\t->ui_items_replace(arg_items_array, arg_items_count):nothing - Replace container items.\r\n  * \t\t->ui_items_insert_at(arg_index, arg_items_array, arg_items_count):nothing - Insert items at container position index.\r\n  * \r\n  * \t\t->ui_items_remove_at_index(arg_index):nothing - Remove an item at given position.\r\n  * \t\t->ui_items_remove_first():nothing             - Remove a item at first position.\r\n  * \t\t->ui_items_remove_last():nothing              - Remove an item at last position.\r\n  * \r\n  * API: state store actions\r\n  * \t\t* 'set_resize_max'\r\n  * \t\t* 'clear_items'\r\n  * \r\n  * \t\t* 'append'\r\n  * \t\t* 'prepend'\r\n  * \t\t* 'replace'\r\n  * \t\t* 'insert_at'\r\n  * \r\n  * \t\t* 'remove_at_index'\r\n  * \t\t* 'remove_first'\r\n  * \t\t* 'remove_last'\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Container(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Container);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Container.__proto__ || Object.getPrototypeOf(Container)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_container = true;\n\n\t\t_this.strategy = undefined;\n\n\t\t_this.strategy_update = undefined;\n\t\t_this.strategy_resize_ui = undefined;\n\t\t_this.strategy_resize_state = undefined;\n\t\t_this.max_size = undefined;\n\n\t\t_this._state_action_index = 0;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Load and apply a container component configuration.\r\n  * \r\n  * @param {Immutable.Map|undefined} arg_state - component state to load (optional).\r\n  * \r\n  * @returns {nothing} \r\n  */\n\n\n\t_createClass(Container, [{\n\t\tkey: 'load',\n\t\tvalue: function load(arg_state) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.enter_group('load');\n\n\t\t\tvar state = arg_state ? arg_state : this.get_state();\n\n\t\t\t// console.info(context + ':load:loading ' + this.get_name())\n\n\t\t\tif (!state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.is_loaded) {\n\t\t\t\t// console.info(context + ':load:already loaded component ' + this.get_name())\n\t\t\t\tthis.leave_group('load:already loaded');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.store_unsubscribe) {\n\t\t\t\tthis.store_unsubscribe = this.get_runtime().create_store_observer(this);\n\t\t\t}\n\n\t\t\t// GET CONTAINER STRATEGY: HOW TO UPDATE UI\n\t\t\tif (state.has('strategy')) {\n\t\t\t\tthis.strategy = state.get('strategy');\n\n\t\t\t\t// DEFINE UPDATE FUNCTION\n\n\t\t\t\tthis.strategy_update = undefined;\n\n\t\t\t\tif (this.strategy.has('update_mode')) {\n\t\t\t\t\tvar mode = this.strategy.get('update_mode');\n\t\t\t\t\tif (mode == 'append') {\n\t\t\t\t\t\tthis.strategy_update = this.ui_items_append;\n\t\t\t\t\t} else if (mode == 'prepend') {\n\t\t\t\t\t\tthis.strategy_update = this.ui_items_prepend;\n\t\t\t\t\t} else if (mode == 'replace') {\n\t\t\t\t\t\tthis.strategy_update = this.ui_items_replace;\n\t\t\t\t\t} else if (mode == 'insert at') {\n\t\t\t\t\t\tif (this.strategy.has('update_index')) {\n\t\t\t\t\t\t\t(function () {\n\t\t\t\t\t\t\t\tvar index = _this2.strategy.get('update_index');\n\t\t\t\t\t\t\t\t_this2.strategy_update = function () {\n\t\t\t\t\t\t\t\t\t_this2.ui_items_insert_at_index(index);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!_types2.default.isFunction(this.strategy_update)) {\n\t\t\t\t\tthis.strategy_update = this.ui_items_replace;\n\t\t\t\t}\n\n\t\t\t\t// DEFINE RESIZE FUNCTION\n\n\t\t\t\tthis.strategy_resize_ui = undefined;\n\t\t\t\tthis.strategy_resize_state = undefined;\n\t\t\t\tthis.max_size = undefined;\n\n\t\t\t\tif (this.strategy.has('resize_mode')) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar mode = _this2.strategy.get('resize_mode');\n\n\t\t\t\t\t\t_this2.max_size = 100;\n\t\t\t\t\t\tif (_this2.strategy.has('resize_max')) {\n\t\t\t\t\t\t\t_this2.max_size = _this2.strategy.get('resize_max');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (mode == 'remove_last') {\n\t\t\t\t\t\t\t_this2.strategy_resize_ui = function () {\n\t\t\t\t\t\t\t\tvar count = _this2.ui_items_get_count() - _this2.max_size;\n\t\t\t\t\t\t\t\tif (count > 0) {\n\t\t\t\t\t\t\t\t\t_this2.ui_items_remove_last(count);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else /*if (mode == 'remove_first')*/\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_this2.strategy_resize_ui = function () {\n\t\t\t\t\t\t\t\t\tvar count = _this2.ui_items_get_count() - _this2.max_size;\n\t\t\t\t\t\t\t\t\t_this2.ui_items_remove_first(count);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_this2.strategy_resize_state = function (arg_items, arg_next_state) {\n\t\t\t\t\t\t\tif (arg_items && arg_items.count && _this2.max_size) {\n\t\t\t\t\t\t\t\tvar count = arg_items.count() - _this2.max_size;\n\t\t\t\t\t\t\t\tif (count > 0) {\n\t\t\t\t\t\t\t\t\tvar action = { type: mode, count: count };\n\t\t\t\t\t\t\t\t\treturn _this2.reduce_action(arg_next_state, action);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn arg_next_state;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// console.log(context + ':load:resize_mode', mode)\n\t\t\t\t\t\t// console.log(context + ':load:resize_max', max_size)\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// SET DEFAULT METHOD\n\t\t\tif (!this.strategy_resize_state) {\n\t\t\t\tthis.strategy_resize_state = function (items, next_state) {\n\t\t\t\t\treturn next_state;\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (!this.strategy_resize_ui) {\n\t\t\t\tthis.strategy_resize_ui = function () {};\n\t\t\t}\n\n\t\t\t// this.init_bindings()\n\n\t\t\t// this.update()\n\n\t\t\tthis.is_loaded = true;\n\t\t\tthis.leave_group('load');\n\t\t}\n\n\t\t// -----------------------------------------------------------------------------------------------------\n\t\t// DEFINE ACTION WRAPPERS (only dispatch an action to update the state)\n\t\t// -----------------------------------------------------------------------------------------------------\n\n\t\t/**\r\n   * Set max items value for the container.\r\n   * \r\n   * @param {integer} arg_value - max items value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_set_resize_max',\n\t\tvalue: function do_action_set_resize_max(arg_value) {\n\t\t\tvar value = _types2.default.isNumber(arg_value) ? arg_value : undefined;\n\t\t\tif (!value) {\n\t\t\t\tif (_types2.default.isObject(arg_value)) {\n\t\t\t\t\tif (_types2.default.isNumber(arg_value.resize_max)) {\n\t\t\t\t\t\tvalue = arg_value.resize_max;\n\t\t\t\t\t} else if (_types2.default.isString(arg_value.resize_max)) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvalue = parseInt(arg_value.resize_max);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(context + ':do_action_set_resize_max:bad integer value from string', arg_value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(value), context + ':do_action_set_resize_max:bad value number');\n\n\t\t\tthis.dispatch_action('set_resize_max', { resize_max: value });\n\t\t}\n\n\t\t/**\r\n   * Clear container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_clear_items',\n\t\tvalue: function do_action_clear_items() {\n\t\t\tthis.dispatch_action('clear_items');\n\t\t}\n\n\t\t/**\r\n   * Append items to the container (an item can be a string or an array or an object or ...).\r\n   * \r\n   * @param {array}  arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_append',\n\t\tvalue: function do_action_append(arg_items_array, arg_items_count) {\n\t\t\tif (!arg_items_array) {\n\t\t\t\tconsole.warn(context + ':do_action_append:%s:bad arguments', this.get_name());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arguments.length == 2 && _types2.default.isNumber(arg_items_array)) {\n\t\t\t\tvar tmp = arg_items_array;\n\t\t\t\targ_items_array = arg_items_count;\n\t\t\t\targ_items_count = tmp;\n\t\t\t}\n\t\t\tif (!arg_items_count && _types2.default.isArray(arg_items_array)) {\n\t\t\t\targ_items_count = arg_items_array.length;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':do_action_append:%s:items,count:', this.get_name(), arg_items_array, arg_items_count)\n\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':do_action_append:bad items count');\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':do_action_append:bad items array');\n\n\t\t\tthis.dispatch_action('append', { values: arg_items_array, count: arg_items_count });\n\t\t}\n\n\t\t/**\r\n   * Prepend items to the container (an item can be a string or an array or an object or ...).\r\n   * \r\n   * @param {array}  arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_prepend',\n\t\tvalue: function do_action_prepend(arg_items_array, arg_items_count) {\n\t\t\tif (!arg_items_array) {\n\t\t\t\tconsole.warn(context + ':do_action_prepend:%s:bad arguments', this.get_name());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arguments.length == 2 && _types2.default.isNumber(arg_items_array)) {\n\t\t\t\tvar tmp = arg_items_array;\n\t\t\t\targ_items_array = arg_items_count;\n\t\t\t\targ_items_count = tmp;\n\t\t\t}\n\t\t\tif (!arg_items_count && _types2.default.isArray(arg_items_array)) {\n\t\t\t\targ_items_count = arg_items_array.length;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':do_action_prepend:%s:items,count:', this.get_name(), arg_items_array, arg_items_count)\n\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':do_action_prepend:bad items count');\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':do_action_prepend:bad items array');\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':do_action_prepend:arg_items_array', arg_items_array)\n\n\t\t\tthis.dispatch_action('prepend', { values: arg_items_array, count: arg_items_count });\n\t\t}\n\n\t\t/**\r\n   * Replace items to the container (an item can be a string or an array or an object or ...).\r\n   * \r\n   * @param {array}  arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_replace',\n\t\tvalue: function do_action_replace(arg_items_array, arg_items_count) {\n\t\t\tif (!arg_items_array) {\n\t\t\t\tconsole.warn(context + ':do_action_replace:%s:bad arguments', this.get_name());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arguments.length == 2 && _types2.default.isNumber(arg_items_array)) {\n\t\t\t\tvar tmp = arg_items_array;\n\t\t\t\targ_items_array = arg_items_count;\n\t\t\t\targ_items_count = tmp;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':do_action_replace:%s:items,count:', this.get_name(), arg_items_array, arg_items_count)\n\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':do_action_replace:bad items count');\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':do_action_replace:bad items array');\n\n\t\t\tthis.dispatch_action('replace', { values: arg_items_array, count: arg_items_count });\n\t\t}\n\n\t\t/**\r\n   * Insert items at container position index (an item can be a string or an array or an object or ...).\r\n   * \r\n   * @param {intege} arg_index       - position index.\r\n   * @param {array}  arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_insert_at',\n\t\tvalue: function do_action_insert_at(arg_index, arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_index), context + ':do_action_insert_at:bad index number');\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':do_action_insert_at:bad items count');\n\n\t\t\tif (arg_items_count == 1) {\n\t\t\t\targ_items_array = [arg_items_array];\n\t\t\t}\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':do_action_insert_at:bad items array');\n\n\t\t\tthis.dispatch_action('insert_at', { index: arg_index, values: arg_items_array, count: arg_items_count });\n\t\t}\n\n\t\t/**\r\n   * Remove an item at given position.\r\n   * \r\n   * @param {number} arg_index - item index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_remove_at_index',\n\t\tvalue: function do_action_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_index), context + ':remove_at_index:bad index number');\n\n\t\t\tthis.dispatch_action({ type: 'remove_at_index', index: arg_index });\n\t\t}\n\n\t\t/**\r\n   * Remove an item at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_remove_first',\n\t\tvalue: function do_action_remove_first() {\n\t\t\tthis.dispatch_action('remove_first');\n\t\t}\n\n\t\t/**\r\n   * Remove an item at last position.\r\n   *\r\n   * @param {number} arg_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_remove_last',\n\t\tvalue: function do_action_remove_last(arg_count) {\n\t\t\tthis.dispatch_action('remove_last', { count: arg_count });\n\t\t}\n\n\t\t/**\r\n   * Store actions reducer pure function.\r\n   * \r\n   * @param {Immutable.Map} arg_previous_state - previous state.\r\n   * @param {object} arg_action - store action: { type:'', component:'', ...}\r\n   * \r\n   * @returns {Immutable.Map} - new state\r\n   */\n\n\t}, {\n\t\tkey: 'reduce_action',\n\t\tvalue: function reduce_action(arg_previous_state, arg_action) {\n\t\t\tvar _this3 = this;\n\n\t\t\t// console.log(context + ':reduce_action:prev state', arg_previous_state.toJS())\n\n\t\t\tif (!arg_previous_state) {\n\t\t\t\tconsole.error(context + ':reduce_action:%s:bad previous state for action=', this.get_name(), arg_action);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// PUSH ACTION ON UI ACTIONS STACK\n\t\t\tvar stack = arg_previous_state.get('ui_actions_stack');\n\t\t\tstack = stack ? stack.push(arg_action) : (0, _immutable.fromJS)([arg_action]);\n\n\t\t\tif (this._state_action_index >= stack.size - 1) {\n\t\t\t\tthis._state_action_index = 0;\n\t\t\t\tstack = (0, _immutable.fromJS)([arg_action]);\n\t\t\t\t// console.log(context + ':reduce_action:this._state_action_index(%s) >= stack.size(%s)', this._state_action_index, stack.size - 1)\n\t\t\t}\n\n\t\t\tvar next_state = arg_previous_state.set('ui_actions_stack', stack);\n\t\t\t// console.log(context + ':reduce_action:stack', stack)\n\n\t\t\tswitch (arg_action.type) {\n\t\t\t\tcase 'set_resize_max':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!_types2.default.isNumber(arg_action.resize_max) && arg_action.resize_max > 0) {\n\t\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.max_size = arg_action.resize_max;\n\t\t\t\t\t\tvar items = arg_previous_state.get('items');\n\t\t\t\t\t\tnext_state = next_state.setIn(['strategy', 'resize_max'], arg_action.resize_max);\n\t\t\t\t\t\treturn this.strategy_resize_state(items, next_state);\n\t\t\t\t\t}\n\n\t\t\t\tcase 'clear_items':\n\t\t\t\t\t{\n\t\t\t\t\t\tnext_state = next_state.set('items', (0, _immutable.fromJS)([]));\n\t\t\t\t\t\treturn next_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'append':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar values = arg_action.values;\n\n\t\t\t\t\t\t// DEBUG\n\t\t\t\t\t\t// console.log('container:reduce_action:append:values', values)\n\t\t\t\t\t\t// console.log('container:reduce_action:append:prev items', arg_previous_state.get('items').toJS())\n\n\t\t\t\t\t\t// NOTHING TO APPEND\n\t\t\t\t\t\tif (values.length == 0) {\n\t\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar _items = arg_previous_state.get('items').concat(values);\n\t\t\t\t\t\tnext_state = next_state.set('items', _items);\n\n\t\t\t\t\t\treturn this.strategy_resize_state(_items, next_state);\n\t\t\t\t\t}\n\n\t\t\t\tcase 'prepend':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret3 = function () {\n\t\t\t\t\t\t\tvar values = arg_action.values;\n\t\t\t\t\t\t\t// console.log(context + ':reduce_action:prepend:values', values)\n\n\t\t\t\t\t\t\tvar items = arg_previous_state.get('items');\n\t\t\t\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\t\t\t\treturn items = items.splice(0, 0, value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnext_state = next_state.set('items', items);\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tv: _this3.strategy_resize_state(items, next_state)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tif ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'replace':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _values = arg_action.values;\n\t\t\t\t\t\tconsole.log(context + ':reduce_action:replace:values', _values);\n\n\t\t\t\t\t\tnext_state = next_state.set('items', (0, _immutable.fromJS)(_values));\n\n\t\t\t\t\t\treturn this.strategy_resize_state((0, _immutable.fromJS)(_values), next_state);\n\t\t\t\t\t}\n\n\t\t\t\tcase 'insert_at':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar index = arg_action.index;\n\t\t\t\t\t\tvar value = arg_action.value;\n\n\t\t\t\t\t\tvar _items2 = arg_previous_state.get('items').insert(index, value);\n\t\t\t\t\t\tnext_state = next_state.set('items', _items2);\n\n\t\t\t\t\t\treturn this.strategy_resize_state(_items2, next_state);\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_at_index':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _index = arg_action.index;\n\t\t\t\t\t\tvar _items3 = arg_previous_state.get('items').delete(_index);\n\t\t\t\t\t\tnext_state = next_state.set('items', _items3);\n\t\t\t\t\t\treturn next_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_first':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _items4 = arg_previous_state.get('items').delete(0);\n\t\t\t\t\t\tnext_state = next_state.set('items', _items4);\n\t\t\t\t\t\treturn next_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_last':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (_types2.default.isNumber(arg_action.count)) {\n\t\t\t\t\t\t\tvar count = arg_action.count;\n\n\t\t\t\t\t\t\tif (count <= 0) {\n\t\t\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!arg_previous_state.has('items')) {\n\t\t\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar _items6 = arg_previous_state.get('items');\n\t\t\t\t\t\t\tvar last = _items6.size;\n\t\t\t\t\t\t\tif (last - count < 0) {\n\t\t\t\t\t\t\t\treturn arg_previous_state.clear();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_items6 = _items6.splice(last - count, count);\n\t\t\t\t\t\t\treturn next_state.set('items', _items6);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar _items5 = arg_previous_state.get('items');\n\t\t\t\t\t\tvar _index2 = _items5.size;\n\t\t\t\t\t\t_items5 = _items5.delete(_index2);\n\n\t\t\t\t\t\tnext_state = next_state.set('items', _items5);\n\t\t\t\t\t\treturn next_state;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn arg_previous_state;\n\t\t}\n\n\t\t/**\r\n   * Handle component state changes.\r\n   * \r\n   * @param {Immutable.Map} arg_previous_state - previous state map.\r\n   * @param {Immutable.Map} arg_new_state - new state map.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_state_change',\n\t\tvalue: function handle_state_change(arg_previous_state, arg_new_state) {\n\t\t\t// console.log(context + ':handle_state_change')\n\n\t\t\t// GET WAITING UI STATE CHANGE ACTIONS\n\t\t\tvar ui_actions_stack = arg_new_state.get('ui_actions_stack', []);\n\t\t\tui_actions_stack = ui_actions_stack.toJS ? ui_actions_stack.toJS() : ui_actions_stack;\n\n\t\t\t// LOOP ON WAITING ACTIONS\n\t\t\tvar action = undefined;\n\t\t\twhile (this._state_action_index < ui_actions_stack.length) {\n\t\t\t\taction = ui_actions_stack[this._state_action_index];\n\t\t\t\t// console.log(context + ':handle_state_change:action', action, ui_actions_stack)\n\t\t\t\tthis._state_action_index++;\n\n\t\t\t\tthis.handle_state_change_action(action, arg_previous_state, arg_new_state);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Handle component state changes action.\r\n   * \r\n   * @param {object}        arg_action         - state change action\r\n   * @param {Immutable.Map} arg_previous_state - previous state map.\r\n   * @param {Immutable.Map} arg_new_state      - new state map.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_state_change_action',\n\t\tvalue: function handle_state_change_action(arg_action, arg_previous_state, arg_new_state) {\n\t\t\t// console.log(context + ':handle_state_change_action:action', arg_action)\n\n\t\t\tswitch (arg_action.type) {\n\t\t\t\tcase 'clear_items':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_clear();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'append':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_append(arg_action.values, arg_action.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'prepend':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_prepend(arg_action.values, arg_action.count);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'replace':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_replace(arg_action.values, arg_action.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'insert_at':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_insert_at(arg_action.index, arg_action.values, arg_action.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_at_index':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_remove_at(arg_action.index);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_first':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_remove_first();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'remove_last':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.ui_items_remove_last(arg_action.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_types2.default.isFunction(this.strategy_resize_ui)) {\n\t\t\t\tthis.strategy_resize_ui();\n\t\t\t}\n\t\t}\n\n\t\t// -----------------------------------------------------------------------------------------------------\n\t\t// DEFINE UI HANDLERS FOR STATE UPDATE\n\t\t// -----------------------------------------------------------------------------------------------------\n\n\n\t\t/**\r\n   * Get container items count.\r\n   * \r\n   * @returns {integer}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_get_count',\n\t\tvalue: function ui_items_get_count() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\treturn dom_elem.children.length;\n\t\t}\n\n\t\t/**\r\n   * Erase container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_clear',\n\t\tvalue: function ui_items_clear() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\n\t\t\twhile (dom_elem.hasChildNodes()) {\n\t\t\t\tvar child_elem = dom_elem.lastChild;\n\t\t\t\tdom_elem.removeChild(child_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Append items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append(arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':ui_items_append:bad items array');\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':ui_items_append:bad items count');\n\n\t\t\t// NOT YET IMPLEMENTED\n\n\t\t\tvar force_rendering = true;\n\t\t\tthis.render(force_rendering);\n\t\t}\n\n\t\t/**\r\n   * Prepend items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_prepend',\n\t\tvalue: function ui_items_prepend(arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':ui_items_prepend:bad items array');\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':ui_items_prepend:bad items count');\n\n\t\t\t// NOT YET IMPLEMENTED\n\n\t\t\tvar force_rendering = true;\n\t\t\tthis.render(force_rendering);\n\t\t}\n\n\t\t/**\r\n   * Replace container items.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_replace',\n\t\tvalue: function ui_items_replace(arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':ui_items_replace:bad items array');\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':ui_items_replace:bad items count');\n\n\t\t\t// NOT YET IMPLEMENTED\n\n\t\t\tvar force_rendering = true;\n\t\t\tthis.render(force_rendering);\n\t\t}\n\n\t\t/**\r\n   * Insert items at container position index.\r\n   * \r\n   * @param {intege} arg_index - position index.\r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_insert_at',\n\t\tvalue: function ui_items_insert_at(arg_index, arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_types2.default.isArray(arg_items_array), context + ':ui_items_replace:bad items array');\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_items_count), context + ':ui_items_replace:bad items count');\n\n\t\t\t// NOT YET IMPLEMENTED\n\t\t}\n\n\t\t/**\r\n   * Remove an item at given position.\r\n   * \r\n   * @param {number} arg_index - item index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_types2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\n\t\t\t// NOT YET IMPLEMENTED\n\t\t}\n\n\t\t/**\r\n   * Remove a item at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {}\n\t\t// NOT YET IMPLEMENTED\n\n\n\t\t/**\r\n   * Remove an item at last position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() {}\n\t\t// NOT YET IMPLEMENTED\n\n\n\t\t/**\r\n   * Hide an element.\r\n   * \r\n   * @param {Element} arg_element - DOM element to hide.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_hide_item',\n\t\tvalue: function ui_items_hide_item(arg_element) {\n\t\t\targ_element.style.display = 'none';\n\t\t}\n\n\t\t/**\r\n   * Show an element.\r\n   * \r\n   * @param {Element} arg_element - DOM element to hide.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_show_item',\n\t\tvalue: function ui_items_show_item(arg_element) {\n\t\t\targ_element.style.display = 'block';\n\t\t}\n\n\t\t/**\r\n   * Toggle items visibility belonging a given filter.\r\n   * \r\n   * @param {string} arg_selector - items selector.\r\n   * @param {string} arg_filter_text - filter string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_filter',\n\t\tvalue: function ui_items_filter(arg_selector, arg_filter_text) {\n\t\t\tvar _this4 = this;\n\n\t\t\tconsole.log(context + ':ui_items_filter:selector=%s:filter=%s', arg_selector, arg_filter_text);\n\n\t\t\tvar dom_element = this.get_dom_element();\n\t\t\tvar selected_elements = dom_element.querySelectorAll(arg_selector);\n\t\t\tif (!_types2.default.isNodeList(selected_elements) || selected_elements.length == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_lodash2.default.forEach(selected_elements, function (element) {\n\t\t\t\tvar text = '' + _this4._get_dom_text(element);\n\t\t\t\tif (text.search(arg_filter_text) >= 0) {\n\t\t\t\t\t_this4.ui_items_show_item(element);\n\t\t\t\t} else {\n\t\t\t\t\t_this4.ui_items_hide_item(element);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Container;\n}(_component2.default);\n\nexports.default = Container;\n\n\n},{\"../../common/utils/types\":105,\"./component\":5,\"assert\":107,\"immutable\":170,\"lodash\":187}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _uid = require('../../common/utils/uid.js');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _stateable = require('../../common/base/stateable');\n\nvar _stateable2 = _interopRequireDefault(_stateable);\n\nvar _rendering = require('./rendering');\n\nvar _rendering2 = _interopRequireDefault(_rendering);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n// import assert from 'assert'\n// import _ from 'lodash'\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/dom';\n\n/**\r\n * @file UI component class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Dom = function (_Stateable) {\n\t_inherits(Dom, _Stateable);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * @extends Stateable\r\n  * \r\n  * \tAPI\r\n  * \t\t->get_name():string - Get name.\r\n  * \t\t->get_dom_id():string - Get DOM id.\r\n  * \t\t\r\n  * \t\t->has_dom_element():boolean - Test DOM Element instance.\r\n  * \t\t->get_dom_element():Element - Get DOM element.\r\n  * \t\t->set_dom_element(arg_element):nothing -Set DOM element.\r\n  * \r\n  * \t\t->has_dom_parent(arg_element):boolean - Test if component element has given parent element.\r\n  * \t\t->get_dom_parent():Element - Get parent element.\r\n  * \t\t->set_dom_parent(arg_parent_element):nothing - Set given parent element.\r\n  * \t\t->set_dom_parent_of(arg_component):nothing - Set given parent element.\r\n  * \r\n  * \t\t->get_dom_attr(arg_attr_name):string - DOM element manipulation:get dom element attribute.\r\n  * \t\t->set_dom_attr(arg_attr_name, arg_attr_value):nothing - DOM element manipulation:set dom element attribute value.\r\n  * \r\n  * \t\t->get_dom_text():string - DOM element manipulation:get dom element text.\r\n  * \t\t->set_dom_text(arg_text_value):nothing - DOM element manipulation:set dom element text value.\r\n  * \t\t->clear_dom_text():nothing - DOM element manipulation:clear dom element text value.\r\n  * \r\n  * \t\t->get_dom_value():string - DOM element manipulation:get dom element value.\r\n  * \t\t->set_dom_value(arg_value):nothing - DOM element manipulation:set dom element value.\r\n  * \t\t->clear_dom_value():nothing - DOM element manipulation:clear dom element value.\r\n  * \r\n  * \t\t->on_dom_event(arg_dom_event, arg_dom_selector, arg_handler, arg_data=undefined, arg_debug=true):nothing - Mount dom event handler with delegator.\r\n  * \t\t\r\n  * \t\t->has_dom_vnode():boolean - Test DOM Virtual Node.\r\n  * \t\t->get_dom_vnode():VNode - Get DOM Virtual Node.\r\n  * \t\t->set_dom_vnode(arg_vnode):nothing - Set DOM Virtual Node.\r\n  * \r\n  * \t\t->is_visible(arg_check=false):boolean - Get visibility.\r\n  * \t\t->show():nothing - Show component.\r\n  * \t\t->hide():nothing - Hide component.\r\n  * \r\n  * @param {RuntimeBase} arg_runtime - client runtime.\r\n  * @param {Immutable.Map} arg_state - component initial state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Dom(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Dom);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\t\tvar default_settings = {};\n\n\t\tvar _this = _possibleConstructorReturn(this, (Dom.__proto__ || Object.getPrototypeOf(Dom)).call(this, default_settings, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_dom = true;\n\n\t\t// SET NAME\n\t\t_this._name = arg_state.get('name', undefined);\n\t\tif (!_this._name) {\n\t\t\t_this._name = 'component_' + (0, _uid2.default)();\n\t\t}\n\n\t\t_this._is_visible = true;\n\t\t_this._visiblility = undefined;\n\n\t\t_this._rendering = new _rendering2.default(_this, arg_state.get('dom_id', _this._name));\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get name.\r\n  * \r\n  * @returns {string} - component name.\r\n  */\n\n\n\t_createClass(Dom, [{\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this._name;\n\t\t}\n\n\t\t/**\r\n   * Get DOM id.\r\n   * \r\n   * @returns {string} - component DOM id.\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_id',\n\t\tvalue: function get_dom_id() {\n\t\t\treturn this._rendering.get_dom_id();\n\t\t}\n\n\t\t/**\r\n   * Test DOM Element instance.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_dom_element',\n\t\tvalue: function has_dom_element() {\n\t\t\treturn this._rendering.has_dom_element();\n\t\t}\n\n\t\t/**\r\n   * Get DOM element.\r\n   * \r\n   * @returns {Element}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_element',\n\t\tvalue: function get_dom_element() {\n\t\t\treturn this._rendering.get_dom_element();\n\t\t}\n\n\t\t/**\r\n   * Set DOM element.\r\n   * \r\n   * @param {Element} arg_element - element instance.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_element',\n\t\tvalue: function set_dom_element(arg_element) {\n\t\t\tthis._rendering.set_dom_element(arg_element);\n\t\t}\n\n\t\t/**\r\n   * Test if component element has given parent element.\r\n   * \r\n   * @param {Element} arg_element - parent element to test.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_dom_parent',\n\t\tvalue: function has_dom_parent(arg_element) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!arg_element) {\n\t\t\t\treturn !!dom_elem.parentElement;\n\t\t\t}\n\t\t\treturn dom_elem && dom_elem.parentElement == arg_element;\n\t\t}\n\n\t\t/**\r\n   * Get parent element.\r\n   * \r\n   * @returns {Element} - parent element.\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_parent',\n\t\tvalue: function get_dom_parent() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\treturn dom_elem ? dom_elem.parentElement : undefined;\n\t\t}\n\n\t\t/**\r\n   * Set given parent element.\r\n   * \r\n   * @param {Element} arg_parent_element - parent element.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_parent',\n\t\tvalue: function set_dom_parent(arg_parent_element) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (dom_elem && arg_parent_element) {\n\t\t\t\targ_parent_element.appendChild(dom_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Set given parent element.\r\n   * \r\n   * @param {Component} arg_component - parent element component.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_parent_of',\n\t\tvalue: function set_dom_parent_of(arg_component) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (dom_elem && arg_component && arg_component.has_dom_parent()) {\n\t\t\t\targ_component.get_dom_parent().appendChild(dom_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:get dom element attribute.\r\n   * \r\n   * @param {string} arg_attr_name - dom attribute name.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_attr',\n\t\tvalue: function get_dom_attr(arg_attr_name) {\n\t\t\tvar dom_elem = this.get_dom_vnode();\n\t\t\tif (!dom_elem) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn dom_elem.getAttribute ? dom_elem.getAttribute(arg_attr_name) : undefined;\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:set dom element attribute value.\r\n   * \r\n   * @param {string} arg_attr_name - dom attribute name.\r\n   * @param {string} arg_attr_value - dom attribute value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_attr',\n\t\tvalue: function set_dom_attr(arg_attr_name, arg_attr_value) {\n\t\t\tvar dom_elem = this.get_dom_vnode();\n\t\t\tif (!dom_elem) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (dom_elem.setAttribute) {\n\t\t\t\tdom_elem.setAttribute(arg_attr_name, arg_attr_value);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:get dom element text.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_text',\n\t\tvalue: function get_dom_text() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn this._get_dom_text(dom_elem);\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:set dom element text value.\r\n   * \r\n   * @param {string} arg_text_value - dom text value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_text',\n\t\tvalue: function set_dom_text(arg_text_value) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar node_type = dom_elem.nodeType;\n\n\t\t\tif (node_type === 1 || node_type === 9 || node_type === 11) {\n\t\t\t\tdom_elem.textContent = '' + arg_text_value;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:clear dom element text value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'clear_dom_text',\n\t\tvalue: function clear_dom_text() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar node_type = dom_elem.nodeType;\n\n\t\t\tif (node_type === 1 || node_type === 9 || node_type === 11) {\n\t\t\t\tdom_elem.textContent = '';\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: '_get_dom_text',\n\t\tvalue: function _get_dom_text(arg_element) {\n\t\t\tvar node_type = arg_element.nodeType;\n\n\t\t\tif (node_type === 1 || node_type === 9 || node_type === 11) {\n\t\t\t\tif (_types2.default.isString(arg_element.type) && arg_element.type == 'textarea' && _types2.default.isString(arg_element.value)) {\n\t\t\t\t\treturn arg_element.value;\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isString(arg_element.textContent)) {\n\t\t\t\t\treturn arg_element.textContent;\n\t\t\t\t}\n\n\t\t\t\t// LOOP ON CHILDREN\n\t\t\t\tvar child = arg_element.firstChild;\n\t\t\t\tvar str = '';\n\t\t\t\twhile (child) {\n\t\t\t\t\tstr += this._get_dom_text(child);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tif (node_type === 3 || node_type === 4) {\n\t\t\t\treturn arg_element.node_value;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:get dom element value.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_value',\n\t\tvalue: function get_dom_value() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem || !('value' in dom_elem)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn dom_elem.value;\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:set dom element value.\r\n   * \r\n   * @param {string} arg_value - dom value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_value',\n\t\tvalue: function set_dom_value(arg_value) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem || !('value' in dom_elem)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom_elem.value = arg_value;\n\t\t}\n\n\t\t/**\r\n   * DOM element manipulation:clear dom element value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'clear_dom_value',\n\t\tvalue: function clear_dom_value() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem || !('value' in dom_elem)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom_elem.value = '';\n\t\t}\n\n\t\t/**\r\n   * Mount dom event handler.\r\n   * \r\n   * @{string}   arg_dom_event - dom event name.\r\n   * @{string}   arg_dom_selector - dom selector string ('tag_name.class1.class2').\r\n   * @{function} arg_handler - handler function f(component, event name, selection, event, target).\r\n   * @{any}      arg_data - handler datas, default undefined (optional).\r\n   * @{boolean}  arg_debug - trace flag, default true (optional).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'on_dom_event',\n\t\tvalue: function on_dom_event(arg_dom_event, arg_dom_selector, arg_handler) {\n\t\t\tvar arg_data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;\n\t\t\tvar arg_debug = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\n\t\t\tthis._rendering.on_dom_event(arg_dom_event, arg_dom_selector, arg_handler, arg_data, arg_debug);\n\t\t}\n\n\t\t/**\r\n   * Test DOM Virtual Node.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_dom_vnode',\n\t\tvalue: function has_dom_vnode() {\n\t\t\treturn this._rendering.has_dom_vnode();\n\t\t}\n\n\t\t/**\r\n   * Get DOM Virtual Node.\r\n   * \r\n   * @returns {VNode}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_vnode',\n\t\tvalue: function get_dom_vnode() {\n\t\t\treturn this._rendering.get_dom_vnode();\n\t\t}\n\n\t\t/**\r\n   * Set DOM Virtual Node.\r\n   * \r\n   * @param {VNode} arg_vnode - VNode instance.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_vnode',\n\t\tvalue: function set_dom_vnode(arg_vnode) {\n\t\t\tthis._rendering.set_dom_vnode(arg_vnode);\n\t\t}\n\n\t\t/**\r\n   * Get visibility.\r\n   * \r\n   * @param {boolean} arg_check - if true, check style display value.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'is_visible',\n\t\tvalue: function is_visible() {\n\t\t\tvar arg_check = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n\t\t\tif (arg_check) {\n\t\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\t\tthis._is_visible = dom_elem && dom_elem.style.display != 'none';\n\t\t\t}\n\t\t\treturn this._is_visible;\n\t\t}\n\n\t\t/**\r\n   * Show component.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'show',\n\t\tvalue: function show() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (dom_elem) {\n\t\t\t\tdom_elem.style.display = this._visiblility ? this._visiblility : 'block';\n\n\t\t\t\t// console.log(context + ':show:this._visiblility=%s, dom_elem.style.display=%s', this._visiblility, dom_elem.style.display)\n\n\t\t\t\tthis._is_visible = true;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Hide component.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'hide',\n\t\tvalue: function hide() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (dom_elem) {\n\t\t\t\tthis._visiblility = dom_elem.style.display == 'none' ? undefined : dom_elem.style.display;\n\t\t\t\tdom_elem.style.display = 'none';\n\t\t\t\tthis._is_visible = false;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Toggle component visbility.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'toggle',\n\t\tvalue: function toggle() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (dom_elem) {\n\t\t\t\tif (this._is_visible) {\n\t\t\t\t\tthis.hide();\n\t\t\t\t} else {\n\t\t\t\t\tthis.show();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Dom;\n}(_stateable2.default);\n\nexports.default = Dom;\n\n\n},{\"../../common/base/stateable\":41,\"../../common/utils/types\":105,\"../../common/utils/uid.js\":106,\"./rendering\":11}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _name_type_settings_loggable = require('./name_type_settings_loggable');\n\nvar _name_type_settings_loggable2 = _interopRequireDefault(_name_type_settings_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n// import T from 'typr/lib/typr'\n// import assert from 'assert'\n\n// COMMON IMPORTS\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/layout';\n\n/**\r\n * @file Base stateless Layout class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Layout = function (_NameTypeSettingsLogg) {\n\t_inherits(Layout, _NameTypeSettingsLogg);\n\n\t/**\r\n  * Creates an instance of Layout, do not use directly but in a sub class.\r\n  * @extends Loggable\r\n  * @abstract\r\n  * \r\n  * A Layout configuration is a simple object with this common attributes:\r\n  * \t\t- name:string - command unique name.\r\n  * \t\t- type:string - type of commnand from command factory known types list (example: display).\r\n  * \r\n  * \tAPI\r\n  * \t\t->get_name():string - get command name (INHERITED).\r\n  * \t\t->get_type():string - get command type (INHERITED).\r\n  * \t\t->get_settings():object - get instance type (INHERITED).\r\n  * \t\t->is_valid():boolean - check if instance is valid (settings...) (INHERITED).\r\n  * \r\n  * \t\t->render_page_content():Promise - render page content components.\r\n  * \t\t->clear_page_content():Promise - clear page content components.\r\n  * \r\n  * @param {object}           arg_runtime     - runtime.\r\n  * @param {object}           arg_settings    - instance settings.\r\n  * @param {string|undefined} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Layout(arg_runtime, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, Layout);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Layout.__proto__ || Object.getPrototypeOf(Layout)).call(this, arg_runtime, arg_settings, log_context));\n\n\t\t_this.is_layout = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Render page content components.\r\n  * \r\n  * @returns {Promise}\r\n  */\n\n\n\t_createClass(Layout, [{\n\t\tkey: 'render_page_content',\n\t\tvalue: function render_page_content() {\n\t\t\tthrow context + ':render_page_content:not yet implemented';\n\t\t}\n\n\t\t/**\r\n   * Clear page content components.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'clear_page_content',\n\t\tvalue: function clear_page_content() {\n\t\t\tthrow context + ':clear_page_content:not yet implemented';\n\t\t}\n\t}]);\n\n\treturn Layout;\n}(_name_type_settings_loggable2.default);\n\nexports.default = Layout;\n\n\n},{\"./name_type_settings_loggable\":10}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _vdomAsJson = require('vdom-as-json');\n\nvar _vdomAsJson2 = _interopRequireDefault(_vdomAsJson);\n\nvar _vnode = require('virtual-dom/vnode/vnode');\n\nvar _vnode2 = _interopRequireDefault(_vnode);\n\nvar _layout = require('./layout');\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n\nvar vdom_from_json = _vdomAsJson2.default.fromJson;\n\n// COMMON IMPORTS\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/layout_simple';\n\n/**\r\n * @file LayoutSimple class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar LayoutSimple = function (_Layout) {\n\t_inherits(LayoutSimple, _Layout);\n\n\t/**\r\n  * Creates an instance of LayoutSimple:a simple layout with a content element which contains a menubar, a breadcrumbs, a separator and a main view.\r\n  * @extends Layout\r\n  * \r\n  * A Layout configuration is a simple object with this common attributes:\r\n  * \t\t- name:string - command unique name.\r\n  * \t\t- type:string - type of commnand from command factory known types list (example: display).\r\n  * \r\n  * \tAPI\r\n  * \t\t->get_name():string - get command name (INHERITED).\r\n  * \t\t->get_type():string - get command type (INHERITED).\r\n  * \t\t->get_settings():object - get instance type (INHERITED).\r\n  * \t\t->is_valid():boolean - check if instance is valid (settings...) (INHERITED).\r\n  * \r\n  * \t\t->switch(arg_previous_component, arg_target_component_name, arg_is_menubar, arg_is_breadcrumbs):Promise({...}) - Switch previously displayed component with target component.\r\n  * \t\t->render_page_content():Promise - render page content components.\r\n  * \t\t->process_rendering_result(arg_rendering_result):array - Process a RenderingResult instance.\r\n  * \r\n  * \t\t->get_content_element():Element - Get page content element.\r\n  * \t\t->init_content_element():Element - Init page content element.\r\n  * \t\t->clear_page_content(do_not_hide_components):Promise - clear page content components.\r\n  * \r\n  * \t\t->render_page_content_vnode(arg_vnode, arg_rendering_result, arg_credentials):array - Render page content with a global VNode.\r\n  * \r\n  * @param {object}           arg_runtime     - runtime.\r\n  * @param {object}           arg_settings    - instance settings.\r\n  * @param {string|undefined} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction LayoutSimple(arg_runtime, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, LayoutSimple);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (LayoutSimple.__proto__ || Object.getPrototypeOf(LayoutSimple)).call(this, arg_runtime, arg_settings, log_context));\n\n\t\t_this.is_simple_layout = true;\n\n\t\t_this._content_element = undefined;\n\t\t_this._content_id = 'content';\n\n\t\t// this.enable_trace()\n\t\t_this.disable_trace();\n\t\t_this.update_trace_enabled();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Switch previously displayed component with target component.\r\n  * \r\n  * @param {Component} arg_previous_component    - previous component instance.\r\n  * @param {string}    arg_target_component_name - target component name.\r\n  * @param {boolean}   arg_is_menubar            - target component is a menubar?\r\n  * @param {boolean}   arg_is_breadcrumbs        - target component is a breadcrumbs?\r\n  * \r\n  * @returns {Promise} - Promise of { switch:false, component:arg_previous_component }\r\n  */\n\n\n\t_createClass(LayoutSimple, [{\n\t\tkey: 'switch',\n\t\tvalue: function _switch(arg_previous_component, arg_target_component_name, arg_is_menubar, arg_is_breadcrumbs) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.enter_group('switch: for ' + (arg_target_component_name ? arg_target_component_name : 'bad target name'));\n\n\t\t\tif (!_typr2.default.isString(arg_target_component_name)) {\n\t\t\t\tthis.leave_group('switch:error bad target name for ' + (arg_target_component_name ? arg_target_component_name.toString().splice(0, 20) : ''));\n\t\t\t\treturn Promise.reject(context + ':switch:bad target name string');\n\t\t\t}\n\n\t\t\tif (arg_previous_component && arg_previous_component.get_name() == arg_target_component_name) {\n\t\t\t\tthis.debug('switch:previous component exists and has same name as target component name=' + arg_target_component_name);\n\n\t\t\t\targ_previous_component.show();\n\t\t\t\targ_previous_component.update();\n\t\t\t\targ_previous_component.is_menubar = arg_is_menubar;\n\t\t\t\targ_previous_component.is_breadcrumbs = arg_is_breadcrumbs;\n\n\t\t\t\tthis.leave_group('switch:async for ' + (arg_target_component_name ? arg_target_component_name : 'bad target name'));\n\t\t\t\treturn Promise.resolve({ switch: false, component: arg_previous_component });\n\t\t\t}\n\n\t\t\tif (arg_previous_component && arg_previous_component.get_name() != arg_target_component_name) {\n\t\t\t\tthis.debug('switch:previous component [' + arg_previous_component.get_name() + '] exists and has a different name as target component name=' + arg_target_component_name);\n\t\t\t\targ_previous_component.hide();\n\t\t\t}\n\n\t\t\tif (!this._ui.has(arg_target_component_name)) {\n\t\t\t\tthis.debug('switch:target component doesn t exists for name=' + arg_target_component_name);\n\n\t\t\t\tvar target_component_promise = this._ui.create(arg_target_component_name).then(function (component) {\n\t\t\t\t\t_this2.debug('switch:target component is created for ' + arg_target_component_name);\n\n\t\t\t\t\t// console.log(context + ':render_page_content:%s:with view=', component.get_name(), component)\n\n\t\t\t\t\t_this2._ui.page.content = component;\n\t\t\t\t\t_this2.is_menubar = false;\n\t\t\t\t\t_this2.is_breadcrumbs = false;\n\n\t\t\t\t\treturn component.render().then(function () {\n\t\t\t\t\t\treturn component;\n\t\t\t\t\t});\n\t\t\t\t}).then(function (component) {\n\t\t\t\t\t_this2.debug('switch:target component is rendered for ' + arg_target_component_name);\n\n\t\t\t\t\tcomponent.set_dom_parent_of(arg_previous_component);\n\t\t\t\t\tcomponent.show();\n\t\t\t\t\tcomponent.update();\n\t\t\t\t\tcomponent.is_menubar = arg_is_menubar;\n\t\t\t\t\tcomponent.is_breadcrumbs = arg_is_breadcrumbs;\n\n\t\t\t\t\treturn component;\n\t\t\t\t}).then(function (component) {\n\t\t\t\t\t_this2.debug('switch:target component is shown and updated for ' + arg_target_component_name);\n\n\t\t\t\t\treturn { switch: true, component: component };\n\t\t\t\t}).catch(function (reason) {\n\t\t\t\t\t_this2.error('switch:an error occures:' + reason);\n\t\t\t\t});\n\n\t\t\t\tthis.leave_group('switch:async for ' + (arg_target_component_name ? arg_target_component_name : 'bad target name'));\n\t\t\t\treturn target_component_promise;\n\t\t\t}\n\n\t\t\tthis.debug('switch:target component exists for ' + arg_target_component_name);\n\t\t\tvar component = this._ui.get(arg_target_component_name);\n\t\t\tcomponent.show();\n\t\t\tcomponent.update();\n\t\t\tcomponent.is_menubar = arg_is_menubar;\n\t\t\tcomponent.is_breadcrumbs = arg_is_breadcrumbs;\n\n\t\t\treturn Promise.resolve({ switch: true, component: component });\n\t\t}\n\n\t\t/**\r\n   * Render page content with components names.\r\n   * \r\n   * @param {object} arg_components - components to display: { view:'', menubar:'', breadcrumbs:'' }\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'render_page_content',\n\t\tvalue: function render_page_content(arg_components) {\n\t\t\tvar _this3 = this;\n\n\t\t\tthis.enter_group('render_page_content');\n\n\t\t\tif (!_typr2.default.isObject(arg_components)) {\n\t\t\t\treturn Promise.reject(context + ':render_page_content:bad components object');\n\t\t\t}\n\n\t\t\tvar separator_name = 'separator';\n\t\t\tvar middleware = _typr2.default.isString(arg_components.middleware) ? arg_components.middleware : undefined;\n\t\t\tvar route = _typr2.default.isString(arg_components.route) ? arg_components.route : undefined;\n\t\t\tvar view_name = _typr2.default.isString(arg_components.view) ? arg_components.view : undefined;\n\t\t\tvar menubar_name = _typr2.default.isString(arg_components.menubar) ? arg_components.menubar : undefined;\n\t\t\tvar breadcrumbs_name = _typr2.default.isString(arg_components.breadcrumbs) ? arg_components.breadcrumbs : undefined;\n\t\t\tvar rendering_result = _typr2.default.isObject(arg_components.rendering_result) ? arg_components.rendering_result : undefined;\n\n\t\t\tthis.debug('render_page_content:middleware:', middleware);\n\t\t\tthis.debug('render_page_content:route:', route);\n\t\t\tthis.debug('render_page_content:view_name:', view_name);\n\t\t\tthis.debug('render_page_content:menubar_name:', menubar_name);\n\t\t\tthis.debug('render_page_content:breadcrumbs_name:', breadcrumbs_name);\n\t\t\tthis.debug('render_page_content:rendering_result:', rendering_result && rendering_result.settings ? rendering_result.settings.name : '');\n\n\t\t\tvar promise = Promise.resolve();\n\n\t\t\t// GET CONTENT STATE ITEMS\n\t\t\tvar body_contents_path = ['views', 'content', 'state', 'body_contents'];\n\t\t\tvar content_state_items = this.get_state_store().get_state().getIn(body_contents_path);\n\n\t\t\tcontent_state_items = content_state_items ? content_state_items.toJS() : [];\n\t\t\tthis.debug('render_page_content:content_state_items', content_state_items);\n\n\t\t\tif (content_state_items.length > 0) {\n\t\t\t\tif (_typr2.default.isString(menubar_name) && content_state_items[0] != menubar_name) {\n\t\t\t\t\tcontent_state_items[0] = menubar_name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (content_state_items.length > 1) {\n\t\t\t\tif (_typr2.default.isString(separator_name) && content_state_items[1] != separator_name) {\n\t\t\t\t\tcontent_state_items[1] = separator_name;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (content_state_items.length > 2) {\n\t\t\t\tif (_typr2.default.isString(view_name) && content_state_items[2] != view_name) {\n\t\t\t\t\tcontent_state_items[2] = view_name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// GET CONTENT ELEMENT\n\t\t\tvar content_element = this.get_content_element();\n\t\t\tif (!content_element) {\n\t\t\t\tthis.error('render_page_content:no content element');\n\t\t\t\tthis.leave_group('render_page_content:error:no content element');\n\t\t\t\treturn Promise.reject('render_page_content:no content element');\n\t\t\t}\n\n\t\t\t// INIT CONTENT ELEMENTS\n\t\t\tif (!content_state_items) {\n\t\t\t\tthis.error('render_page_content:error:no content state item');\n\t\t\t\tthis.leave_group('render_page_content:error:no content state item');\n\t\t\t\treturn Promise.reject('render_page_content:no content state items');\n\t\t\t}\n\t\t\t_lodash2.default.forEach(content_state_items, function (item) {\n\t\t\t\tvar element = document.getElementById(item);\n\t\t\t\tif (element) {\n\t\t\t\t\t_this3.debug('render_page_content:content item exists:' + item);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_this3.debug('render_page_content:content item is created as a div:' + item);\n\t\t\t\telement = document.createElement('div');\n\t\t\t\telement.setAttribute('id', item);\n\t\t\t\tcontent_element.appendChild(element);\n\t\t\t});\n\n\t\t\t// REQUEST MIDDLEWARE\n\t\t\tif (middleware) {\n\t\t\t\tthis.debug('render_page_content:request middleware:async');\n\n\t\t\t\tpromise = promise.then(function () {\n\t\t\t\t\treturn _this3._ui.request_middleware(middleware, route);\n\t\t\t\t}).then(function (rendering_result) {\n\t\t\t\t\t_this3.debug('render_page_content:request middleware:rendering result');\n\n\t\t\t\t\tvar components = _this3.process_rendering_result(rendering_result);\n\t\t\t\t\treturn components;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// PROCESS RENDERING RESULT\n\t\t\tif (rendering_result) {\n\t\t\t\tthis.debug('render_page_content:process rendering result:async');\n\n\t\t\t\tpromise = promise.then(function () {\n\t\t\t\t\tvar components = _this3.process_rendering_result(rendering_result);\n\t\t\t\t\treturn components;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// PROCESS COMPONENTS\n\t\t\tpromise = promise.then(function (components) {\n\t\t\t\t_this3.debug('render_page_content:process components:async');\n\n\t\t\t\t// SEARCH VIEW NAME, MENUBAR NAME AND BREADCRUMBS NAME INSIDE COMPONENTS LIST\n\t\t\t\t// console.log(context + 'render_page_content:process components:components=', components)\n\t\t\t\tcomponents = _typr2.default.isArray(components) ? components : [];\n\t\t\t\t_lodash2.default.forEach(components, function (component) {\n\t\t\t\t\tvar classes = component.get_dom_element().className;\n\n\t\t\t\t\t_this3.debug('render_page_content:search components:component=' + component.get_name());\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.is_menubar=' + component.is_menubar);\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.is_breadcrumbs=' + component.is_breadcrumbs);\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.is_view=' + component.is_view);\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.classes=' + classes);\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.has menubar class=' + (classes.search('devapt-kindof-menubar') > -1));\n\t\t\t\t\t_this3.debug('render_page_content:search components:component.has breadcrumbs class=' + (classes.search('devapt-kindof-breadcrumbs') > -1));\n\n\t\t\t\t\tif (!_typr2.default.isString(menubar_name) && (component.is_menubar || classes.search('devapt-kindof-menubar') > -1)) {\n\t\t\t\t\t\tmenubar_name = component.get_name();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!_typr2.default.isString(breadcrumbs_name) && (component.is_breadcrumbs || classes.search('devapt-kindof-breadcrumbs') > -1)) {\n\t\t\t\t\t\tbreadcrumbs_name = component.get_name();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!_typr2.default.isString(view_name) && component.get_name() != separator_name) {\n\t\t\t\t\t\tview_name = component.get_name();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t_this3.debug('render_page_content:view_name:', view_name);\n\t\t\t\t_this3.debug('render_page_content:menubar_name:', menubar_name);\n\t\t\t\t_this3.debug('render_page_content:breadcrumbs_name:', breadcrumbs_name);\n\n\t\t\t\tvar promises = [];\n\n\t\t\t\tif (_typr2.default.isString(view_name)) {\n\t\t\t\t\tvar content_promise = _this3.switch(_this3._ui.page.content, view_name, false, false).then(function (component_switch) {\n\t\t\t\t\t\t_this3._ui.page.content = component_switch.component;\n\t\t\t\t\t\treturn component_switch;\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(content_promise);\n\t\t\t\t}\n\n\t\t\t\tif (_typr2.default.isString(menubar_name)) {\n\t\t\t\t\tvar menubar_promise = _this3.switch(_this3._ui.page.menubar, menubar_name, true, false).then(function (component_switch) {\n\t\t\t\t\t\t_this3._ui.page.menubar = component_switch.component;\n\t\t\t\t\t\treturn component_switch;\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(menubar_promise);\n\t\t\t\t}\n\n\t\t\t\tif (_typr2.default.isString(breadcrumbs_name)) {\n\t\t\t\t\tvar breadcrumbs_promise = _this3.switch(_this3._ui.page.breadcrumbs, breadcrumbs_name, false, true).then(function (component_switch) {\n\t\t\t\t\t\t_this3._ui.page.breadcrumbs = component_switch.component;\n\t\t\t\t\t\treturn component_switch;\n\t\t\t\t\t});\n\t\t\t\t\tpromises.push(breadcrumbs_promise);\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all(promises);\n\t\t\t}).then(function (components_switchs) {\n\n\t\t\t\t// UPDATE PAGE CONTENT BODY STATE\n\t\t\t\tvar components_names = [];\n\t\t\t\t_lodash2.default.forEach(components_switchs, function (component_switch) {\n\t\t\t\t\tvar component = component_switch.component;\n\t\t\t\t\t// const should_switch = component_switch.switch\n\t\t\t\t\tvar name = component.get_name();\n\n\t\t\t\t\tcomponents_names.push(name);\n\t\t\t\t});\n\n\t\t\t\tvar action = { type: 'SET_PAGE_CONTENT', resource: 'content', content_body: components_names };\n\t\t\t\t_this3.get_state_store().dispatch(action);\n\n\t\t\t\t// EXECUTE BOOTSTRAP HANDLERS\n\t\t\t\twindow.devapt().content_rendered();\n\t\t\t}).catch(function (reason) {\n\t\t\t\treturn Promise.reject(context + ':render_page_content:' + reason);\n\t\t\t});\n\n\t\t\tthis.leave_group('render_page_content:async');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Process a RenderingResult instance.\r\n   * \r\n   * @param {RenderingResult} arg_rendering_result - rendering result.\r\n   * \r\n   * @param {array} - rendered components.\r\n   */\n\n\t}, {\n\t\tkey: 'process_rendering_result',\n\t\tvalue: function process_rendering_result(arg_rendering_result) {\n\t\t\tvar _this4 = this;\n\n\t\t\tthis.enter_group('process_rendering_result');\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':process_rendering_result:arg_rendering_result', arg_rendering_result)\n\t\t\t// console.log(context + ':process_rendering_result:arg_rendering_result.vtrees', arg_rendering_result.vtrees)\n\n\t\t\tvar vnodes = arg_rendering_result.vtrees;\n\t\t\tthis.debug('process_rendering_result:rendering_result has vnodes count=' + _lodash2.default.size(vnodes));\n\n\t\t\tvar components = [];\n\n\t\t\t_lodash2.default.forEach(vnodes, function (vnode_json, id) {\n\t\t\t\t_this4.debug('process_rendering_result:id:', id);\n\n\t\t\t\tvar credentials = undefined;\n\n\t\t\t\t// DESERIALIZE VNODE JSON\n\t\t\t\tvar vnode = vdom_from_json(vnode_json);\n\t\t\t\tvnode.prototype = _vnode2.default.prototype;\n\t\t\t\t_this4.debug('process_rendering_result:vnode:', vnode);\n\n\t\t\t\t// PROCESS CONTENT VNODE\n\t\t\t\tif (id == _this4._content_id) {\n\t\t\t\t\tvar content_components = _this4.render_page_content_vnode(vnode, arg_rendering_result, credentials);\n\t\t\t\t\tcomponents = components.concat(content_components);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// PROCESS OTHER COMPONENT VNODE\n\t\t\t\tvar component = _this4._ui.get(id);\n\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t_this4.debug('process_rendering_result:component found for id ' + id);\n\n\t\t\t\t\tcomponent.process_rendering_vnode(vnode);\n\t\t\t\t} else {\n\t\t\t\t\t_this4.warn('process_rendering_result:component not found for id ' + id);\n\t\t\t\t\tcomponents.push(component);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.leave_group('process_rendering_result:components.length=' + components.length);\n\t\t\treturn components;\n\t\t}\n\n\t\t/**\r\n   * Get page content element.\r\n   * \r\n   * @returns {Element}\r\n   */\n\n\t}, {\n\t\tkey: 'get_content_element',\n\t\tvalue: function get_content_element() {\n\t\t\tif (!this._content_element) {\n\t\t\t\tthis.init_content_element();\n\t\t\t\tif (!this._content_element) {\n\t\t\t\t\tthis.error('get_content_element:content:no content element');\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this._content_element;\n\t\t}\n\n\t\t/**\r\n   * Init page content element.\r\n   * \r\n   * @returns {Element}\r\n   */\n\n\t}, {\n\t\tkey: 'init_content_element',\n\t\tvalue: function init_content_element() {\n\t\t\tthis._content_element = document.getElementById(this._content_id);\n\t\t\tif (!this._content_element) {\n\t\t\t\tthis._content_element = document.createElement('div');\n\t\t\t\tthis._content_element.setAttribute('id', this._content_id);\n\t\t\t\tdocument.body.appendChild(this._content_element);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Clear page content components.\r\n   * \r\n   * @param {array} arg_do_not_hide_components - components names array to leave unchanged.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\t\t/*\tclear_page_content(arg_do_not_hide_components=[])\r\n  \t{\r\n  \t\tthis.enter_group('clear_content')\r\n  \r\n  \t\t// GET CONTENT ELEMENT\r\n  \t\tconst content_element = this.get_content_element()\r\n  \t\tif (! content_element)\r\n  \t\t{\r\n  \t\t\tthis.error('clear_content:content:no content element')\r\n  \t\t\tthis.leave_group('clear_content:error')\r\n  \t\t\treturn\r\n  \t\t}\r\n  \r\n  \t\tconst hidden_children = {}\r\n  \t\tlet child_index = 0\r\n  \t\tlet children_count = content_element.children.length\r\n  \t\twhile(child_index < children_count)\r\n  \t\t{\r\n  \t\t\tconst child_element = content_element.children[child_index]\r\n  \t\t\tthis.debug('clear_content:remove: child_element', child_element)\r\n  \r\n  \r\n  \t\t\tconst child_id = child_element.getAttribute('id')\r\n  \t\t\tif (! child_id)\r\n  \t\t\t{\r\n  \t\t\t\tthis.debug('clear_content:child without id at position ' + child_index - 1)\r\n  \t\t\t\tcontent_element.removeChild(child_element)\r\n  \t\t\t\tchildren_count = content_element.children.length\r\n  \t\t\t\tcontinue\r\n  \t\t\t}\r\n  \r\n  \t\t\tif ( arg_do_not_hide_components.indexOf(child_id) > -1 )\r\n  \t\t\t{\r\n  \t\t\t\tthis.debug('clear_content:do not hide ' + child_id)\r\n  \t\t\t\t++child_index\r\n  \t\t\t\tcontinue\r\n  \t\t\t}\r\n  \t\t\t\r\n  \t\t\tconst child_component = this._ui.get(child_id)\r\n  \t\t\tif (! child_component)\r\n  \t\t\t{\r\n  \t\t\t\tthis.debug('clear_content:child component not found for id  ' + child_id)\r\n  \t\t\t\tcontent_element.removeChild(child_element)\r\n  \t\t\t\tchildren_count = content_element.children.length\r\n  \t\t\t\tcontinue\r\n  \t\t\t}\r\n  \t\t\t\r\n  \t\t\tconst classes = child_component.get_dom_element().className\r\n  \t\t\tif (classes.search('devapt-layout-persistent') > -1)\r\n  \t\t\t{\r\n  \t\t\t\tthis.debug('clear_content:peristent child component found for id  ' + child_id)\r\n  \t\t\t\t++child_index\r\n  \t\t\t\tcontinue\r\n  \t\t\t}\r\n  \r\n  \t\t\tthis.debug('clear_content:child component is hidden for id  ' + child_id)\r\n  \t\t\thidden_children[child_id] = child_component\r\n  \t\t\tchild_component.hide()\r\n  \t\t\t++child_index\r\n  \t\t}\r\n  \r\n  \t\tthis.leave_group('clear_content:children count=' + children_count + ' hidden count=' + Object.keys(hidden_children).length)\r\n  \t}*/\n\n\t\t/**\r\n   * Render page content with a global VNode.\r\n   * \r\n   * @param {VNode}           arg_vnode            - rendered virtual dom node.\r\n   * @param {RenderingResult} arg_rendering_result - rendering result associated with given vnode.\r\n   * @param {Credentials}     arg_credentials      - user session credentials.\r\n   * \r\n   * @returns {array} - array of rendered Component instances.\r\n   */\n\n\t}, {\n\t\tkey: 'render_page_content_vnode',\n\t\tvalue: function render_page_content_vnode(arg_vnode, arg_rendering_result, arg_credentials) {\n\t\t\tvar _this5 = this;\n\n\t\t\tthis.enter_group('render_page_content_vnode');\n\n\t\t\t// GET CONTENT ELEMENT\n\t\t\tvar content_element = this.get_content_element();\n\t\t\tif (!content_element) {\n\t\t\t\tthis.error('render_page_content_vnode:content:no content element');\n\t\t\t\tthis.leave_group('render_page_content_vnode:error');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':render_page_content_vnode:arg_vnode', arg_vnode)\n\t\t\t// console.log(context + ':render_page_content_vnode:arg_rendering_result', arg_rendering_result)\n\n\t\t\t// GET CONTENT STATE ITEMS\n\t\t\tvar body_contents_path = ['views', 'content', 'state', 'body_contents'];\n\t\t\tvar content_state_items = this.get_state_store().get_state().getIn(body_contents_path);\n\n\t\t\tcontent_state_items = content_state_items ? content_state_items.toJS() : undefined;\n\t\t\tthis.debug('render_page_content_vnode:content_state_items', content_state_items);\n\n\t\t\t// GET VNODE CHILDREN NAMES\n\t\t\tvar vnode_children = arg_vnode.children;\n\t\t\tvar vnode_children_names = vnode_children.map(function (vnode) {\n\t\t\t\treturn vnode.properties.id;\n\t\t\t}).filter(function (v) {\n\t\t\t\treturn !_typr2.default.isUndefined(v);\n\t\t\t});\n\t\t\tthis.debug('process_content_vnode:vnode_children_names', vnode_children_names);\n\n\t\t\t// GET ORDERED CHILDREN LIST\n\t\t\tvar ordered_children_names = vnode_children_names && vnode_children_names.length > 0 ? vnode_children_names : content_state_items;\n\t\t\tthis.debug('render_page_content_vnode:ordered_children_names', ordered_children_names);\n\n\t\t\t// LOOP ON VNODE CHILDREN\n\t\t\tvar children_components = [];\n\t\t\tvar components_names = [];\n\t\t\t_lodash2.default.forEach(ordered_children_names, function (child_name) {\n\t\t\t\t_this5.debug('render_page_content_vnode:loop on child node:' + child_name);\n\n\t\t\t\tvar child_vnode = vnode_children.find(function (vnode) {\n\t\t\t\t\treturn vnode.properties.id == child_name;\n\t\t\t\t});\n\t\t\t\t// console.log(context + ':process_content_vnode:child name=%s child_vnode=', child_name, child_vnode)\n\n\t\t\t\tif (!child_vnode) {\n\t\t\t\t\tconsole.warn(context + ':render_page_content_vnode:child name=%s bad child_vnode', child_name);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar child_id = child_name;\n\t\t\t\t_this5.debug('render_page_content_vnode:content child found for id ' + child_id);\n\n\t\t\t\t// GET CONTENT CHILD COMPONENT\n\t\t\t\tvar child_component = _this5._ui.get(child_name);\n\t\t\t\tif (!child_component || !child_component.is_component) {\n\t\t\t\t\t_this5.warn('render_page_content_vnode:bad child component for name [' + child_name + ']', child_component);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// RENDER CONTENT CHILD COMPONENT\n\t\t\t\t_this5.debug('render_page_content_vnode:process rendering vnode for ' + child_id);\n\t\t\t\tchild_component.process_rendering_vnode(child_vnode, arg_rendering_result, arg_credentials);\n\n\t\t\t\t// APPEND CHILD DOM ELEMENT TO CONTENT DOM ELEMENT\n\t\t\t\tif (!child_component.has_dom_parent(content_element)) {\n\t\t\t\t\tvar child_element = child_component.get_dom_element();\n\t\t\t\t\tif (!child_element) {\n\t\t\t\t\t\t_this5.error('render_page_content_vnode:no dom element for child ' + child_id);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcontent_element.appendChild(child_element);\n\t\t\t\t}\n\n\t\t\t\tchildren_components.push(child_component);\n\t\t\t\tcomponents_names.push(child_component.get_name());\n\t\t\t});\n\n\t\t\t// UPDATE ASSETS URL\n\t\t\tthis._ui._ui_rendering.process_assets_urls_templates(arg_rendering_result.assets_urls_templates);\n\n\t\t\t// UPDATE HEADERS AND ASSETS\n\t\t\tthis._ui._ui_rendering.process_rendering_result_headers(arg_rendering_result.headers, arg_credentials);\n\n\t\t\t// PROCESS HEAD STYLES AND SCRIPTS\n\t\t\tthis._ui._ui_rendering.process_rendering_result_styles_urls(document.head, arg_rendering_result.head_styles_urls, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_styles_tags(document.head, arg_rendering_result.head_styles_tags, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_scripts_urls(document.head, arg_rendering_result.head_scripts_urls, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_scripts_tags(document.head, arg_rendering_result.head_scripts_tags, arg_credentials);\n\n\t\t\t// PROCESS BODY STYLES AND SCRIPTS\n\t\t\tthis._ui._ui_rendering.process_rendering_result_styles_urls(document.body, arg_rendering_result.body_styles_urls, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_styles_tags(document.body, arg_rendering_result.body_styles_tags, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_scripts_urls(document.body, arg_rendering_result.body_scripts_urls, arg_credentials);\n\t\t\tthis._ui._ui_rendering.process_rendering_result_scripts_tags(document.body, arg_rendering_result.body_scripts_tags, arg_credentials);\n\n\t\t\tthis.leave_group('render_page_content_vnode:content');\n\t\t\treturn children_components;\n\t\t}\n\t}]);\n\n\treturn LayoutSimple;\n}(_layout2.default);\n\nexports.default = LayoutSimple;\n\n\n},{\"./layout\":8,\"lodash\":187,\"typr/lib/typr\":218,\"vdom-as-json\":224,\"virtual-dom/vnode/vnode\":251}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _loggable = require('../../common/base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/name_type_settings_loggable';\n\n/**\r\n * @file Base stateless class with name, type and settings.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar NameTypeSettingsLoggable = function (_Loggable) {\n\t_inherits(NameTypeSettingsLoggable, _Loggable);\n\n\t/**\r\n  * Creates an instance of NameTypeSettingsLoggable, do not use directly but in a sub class.\r\n  * @extends Loggable\r\n  * @abstract\r\n  * \r\n  * A configuration is a simple object with this common attributes:\r\n  * \t\t- name:string - command unique name.\r\n  * \t\t- type:string - type of commnand from command factory known types list (example: display).\r\n  * \r\n  * \tAPI\r\n  * \t\t->get_name():string - get instance name.\r\n  * \t\t->get_type():string - get instance type.\r\n  * \t\t->get_settings():object - get instance type.\r\n  * \t\t->is_valid():boolean - check if instance is valid (settings...).\r\n  * \r\n  * @param {object}           arg_runtime     - runtime.\r\n  * @param {object}           arg_settings    - instance settings.\r\n  * @param {string|undefined} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction NameTypeSettingsLoggable(arg_runtime, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, NameTypeSettingsLoggable);\n\n\t\t// const runtime = window.devapt().runtime()// TODO\n\t\targ_settings = arg_settings.toJS ? arg_settings.toJS() : arg_settings;\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_runtime) && arg_runtime.is_browser_runtime, context + ':constructor:bad runtime object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_settings) && _typr2.default.isString(arg_settings.type) && _typr2.default.isString(arg_settings.name), context + ':constructor:bad settings object');\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (NameTypeSettingsLoggable.__proto__ || Object.getPrototypeOf(NameTypeSettingsLoggable)).call(this, log_context));\n\n\t\t_this.is_name_type_settings_loggable = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this._ui = arg_runtime.ui();\n\t\t// this._store = arg_runtime.get_state_store()\n\t\t// this._router = arg_runtime.router()\n\t\t_this._settings = arg_settings;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get runtime.\r\n  * \r\n  * @returns {ClientRuntime}\r\n  */\n\n\n\t_createClass(NameTypeSettingsLoggable, [{\n\t\tkey: 'get_runtime',\n\t\tvalue: function get_runtime() {\n\t\t\treturn this._runtime;\n\t\t}\n\n\t\t/**\r\n   * Get runtime state store.\r\n   * \r\n   * @returns {Store}\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_store',\n\t\tvalue: function get_state_store() {\n\t\t\treturn this._runtime.get_state_store();\n\t\t}\n\n\t\t/**\r\n   * Get UI.\r\n   * \r\n   * @returns {UI}\r\n   */\n\n\t}, {\n\t\tkey: 'get_ui',\n\t\tvalue: function get_ui() {\n\t\t\treturn this._ui;\n\t\t}\n\n\t\t/**\r\n   * Get router.\r\n   * \r\n   * @returns {Router}\r\n   */\n\n\t}, {\n\t\tkey: 'get_router',\n\t\tvalue: function get_router() {\n\t\t\treturn this._runtime.router();\n\t\t}\n\n\t\t/**\r\n   * Get instance name.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this._settings.name;\n\t\t}\n\n\t\t/**\r\n   * Get instance type.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_type',\n\t\tvalue: function get_type() {\n\t\t\treturn this._settings.type;\n\t\t}\n\n\t\t/**\r\n   * Get instance settings.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_settings',\n\t\tvalue: function get_settings() {\n\t\t\treturn this._settings;\n\t\t}\n\n\t\t/**\r\n   * Check if instance settings is valid.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'is_valid',\n\t\tvalue: function is_valid() {\n\t\t\treturn true;\n\t\t}\n\t}]);\n\n\treturn NameTypeSettingsLoggable;\n}(_loggable2.default);\n\nexports.default = NameTypeSettingsLoggable;\n\n\n},{\"../../common/base/loggable\":38,\"assert\":107,\"typr/lib/typr\":218}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _vdomParser = require('vdom-parser');\n\nvar _vdomParser2 = _interopRequireDefault(_vdomParser);\n\nvar _diff = require('virtual-dom/diff');\n\nvar _diff2 = _interopRequireDefault(_diff);\n\nvar _patch = require('virtual-dom/patch');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nvar _createElement = require('virtual-dom/create-element');\n\nvar _createElement2 = _interopRequireDefault(_createElement);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _rendering_factory = require('../../common/rendering/rendering_factory');\n\nvar _rendering_factory2 = _interopRequireDefault(_rendering_factory);\n\nvar _rendering_resolver = require('../../common/rendering/rendering_resolver');\n\nvar _rendering_resolver2 = _interopRequireDefault(_rendering_resolver);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/base/rendering';\n\n/**\r\n * @file UI component rendering class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Rendering = function () {\n\t/**\r\n  * Creates an instance of Rendering.\r\n  * \r\n  * @param {Component} arg_component - component instance.\r\n  * @param {string} arg_dom_id - component dom element id\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Rendering(arg_component, arg_dom_id) {\n\t\t_classCallCheck(this, Rendering);\n\n\t\tthis.is_rendering = true;\n\n\t\tthis._component = arg_component;\n\n\t\tthis._dom_id = arg_dom_id;\n\t\tthis._event_delegator = undefined;\n\t\tthis.set_dom_element(document.getElementById(arg_dom_id));\n\t\tthis._dom_vnode = undefined;\n\t}\n\n\t/**\r\n  * Get DOM id.\r\n  * \r\n  * @returns {string} - component DOM id.\r\n  */\n\n\n\t_createClass(Rendering, [{\n\t\tkey: 'get_dom_id',\n\t\tvalue: function get_dom_id() {\n\t\t\treturn this._dom_id;\n\t\t}\n\n\t\t/**\r\n   * Test DOM Element instance.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_dom_element',\n\t\tvalue: function has_dom_element() {\n\t\t\treturn _types2.default.isObject(this._dom_element); // TODO ENHANCE ELEMENT TYPE CHECK\n\t\t}\n\n\t\t/**\r\n   * Get DOM element.\r\n   * \r\n   * @returns {Element} - DOM Element instance.\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_element',\n\t\tvalue: function get_dom_element() {\n\t\t\treturn this._dom_element;\n\t\t}\n\t}, {\n\t\tkey: 'has_child_element',\n\t\tvalue: function has_child_element(arg_parent_element, arg_child_element) {\n\t\t\tthis._component.enter_group('has_child_element');\n\n\t\t\tvar elements = arg_parent_element ? arg_parent_element.children : undefined;\n\n\t\t\tif (elements && elements.length > 0) {\n\t\t\t\tvar child = undefined;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (i < elements.length) {\n\t\t\t\t\tchild = elements[i];\n\t\t\t\t\tif (child == arg_child_element) {\n\t\t\t\t\t\tthis._component.leave_group('has_child_element:found');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._component.leave_group('has_child_element:not found');\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\r\n   * Set DOM element.\r\n   * \r\n   * @param {Element} arg_element - element instance.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_element',\n\t\tvalue: function set_dom_element(arg_element) {\n\t\t\tthis._component.enter_group('set_dom_element');\n\n\t\t\t(0, _assert2.default)((typeof arg_element === 'undefined' ? 'undefined' : _typeof(arg_element)) == 'object', context + ':set_dom_element:bad element object');\n\n\t\t\tvar new_elm = arg_element;\n\t\t\tvar prev_elm = this.get_dom_element();\n\t\t\tvar parent_elm = prev_elm ? prev_elm.parentNode : undefined;\n\n\t\t\t// DEBUG\n\t\t\t// console.log(prev_elm, context + ':set_dom_element:prev_elm')\n\t\t\t// console.log(new_elm,  context + ':set_dom_element:new_elm')\n\t\t\t// console.log(parent_elm,  context + ':set_dom_element:parent_elm')\n\n\t\t\tif (!arg_element) {\n\t\t\t\tthis._component.leave_group('set_dom_element:no given dom element');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// REMOVE PREVIOUS NODE FROM ITS PARENT\n\t\t\tif (prev_elm != new_elm) {\n\t\t\t\tthis._component.debug('set_dom_element:prev_elm <> new_elm');\n\n\t\t\t\t// DISABLE EVENT DELEGATION\n\t\t\t\tif (this._event_delegator) {\n\t\t\t\t\tthis._component.debug('set_dom_element:destroy existing event delegator');\n\t\t\t\t\tthis._event_delegator.destroy();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// APPEND DOM ELEMENT TO ITS PARENT\n\t\t\tif (parent_elm) {\n\t\t\t\tthis._component.debug('set_dom_element:has parent_elm');\n\n\t\t\t\tif (!this.has_child_element(parent_elm, new_elm)) {\n\t\t\t\t\tthis._component.debug('set_dom_element:has parent_elm:append child');\n\t\t\t\t\tparent_elm.appendChild(new_elm);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// SET DOM ELEMENT\n\t\t\tthis._dom_element = new_elm;\n\n\t\t\t// ENABLE EVENT DELEGATION FOR ALL DOM SUB ELEMENTS\n\t\t\tif (!this._event_delegator) {\n\t\t\t\tthis._component.debug('set_dom_element:create event delegator');\n\t\t\t\tvar EventDelegate = require('dom-delegate').Delegate;\n\t\t\t\tthis._event_delegator = new EventDelegate(this._dom_element);\n\t\t\t} else {\n\t\t\t\tthis._event_delegator.root(this._dom_element);\n\t\t\t}\n\n\t\t\tthis._component.leave_group('set_dom_element');\n\t\t}\n\n\t\t/**\r\n   * Mount dom event handler.\r\n   * \r\n   * @{string}   arg_dom_event - dom event name.\r\n   * @{string}   arg_dom_selector - dom selector string ('tag_name.class1.class2').\r\n   * @{function} arg_handler - handler function f(component, event name, selection, event, target).\r\n   * @{any}      arg_data - handler datas, default undefined (optional).\r\n   * @{boolean}  arg_debug - trace flag, default true (optional).\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'on_dom_event',\n\t\tvalue: function on_dom_event(arg_dom_event, arg_dom_selector, arg_handler) {\n\t\t\tvar _this = this;\n\n\t\t\tvar arg_data = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : undefined;\n\t\t\tvar arg_debug = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\n\t\t\t(0, _assert2.default)(_types2.default.isObject(this._event_delegator), context + ':on_dom_event:bad event delegator object');\n\n\t\t\tvar name = this._component.get_name();\n\t\t\tvar selector = undefined;\n\t\t\tif (_types2.default.isObject(arg_dom_selector) && arg_dom_selector.is_component) {\n\t\t\t\tselector = arg_dom_selector.get_dom_id();\n\t\t\t} else if (_types2.default.isString(arg_dom_selector)) {\n\t\t\t\tselector = arg_dom_selector;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._event_delegator.on(arg_dom_event, selector, function (event, target) {\n\t\t\t\tif (arg_debug) {\n\t\t\t\t\tconsole.log(context + ':on_dom_event:handler:component=%s event=%s selector=%s target=', name, arg_dom_event, arg_dom_selector, target, event, arg_data);\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isFunction(arg_handler)) {\n\t\t\t\t\targ_handler(_this._component, arg_dom_event, arg_dom_selector, event, target, arg_data);\n\t\t\t\t}\n\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\r\n   * Test DOM Virtual Node.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_dom_vnode',\n\t\tvalue: function has_dom_vnode() {\n\t\t\treturn _types2.default.isObject(this._dom_vnode); // TODO ENHANCE VNODE TYPE CHECK\n\t\t}\n\n\t\t/**\r\n   * Get DOM Virtual Node.\r\n   * \r\n   * @returns {VNode}\r\n   */\n\n\t}, {\n\t\tkey: 'get_dom_vnode',\n\t\tvalue: function get_dom_vnode() {\n\t\t\treturn this._dom_vnode;\n\t\t}\n\n\t\t/**\r\n   * Set DOM Virtual Node.\r\n   * \r\n   * @param {VNode} arg_vnode - VNode instance.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_dom_vnode',\n\t\tvalue: function set_dom_vnode(arg_vnode) {\n\t\t\tif (_types2.default.isObject(arg_vnode)) // TODO ENHANCE VNODE TYPE CHECK\n\t\t\t\t{\n\t\t\t\t\tthis._dom_vnode = arg_vnode;\n\t\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Render component VNode.\r\n   * \r\n   * @returns {Promise} - Promise of this component to chain promises.\r\n   */\n\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tthis._component.enter_group('render');\n\n\t\t\tvar credentials = this._component._runtime.session_credentials;\n\t\t\tvar res_resolver = this._component._runtime.ui().get_resource_description_resolver();\n\t\t\tvar rf_resolver = this._component._runtime.ui().get_rendering_function_resolver();\n\t\t\tvar rendering_resolver = _rendering_resolver2.default.from_resolvers('browser resolver from ui', res_resolver, rf_resolver);\n\n\t\t\tvar rendering_context = {\n\t\t\t\ttrace_fn: undefined, //console.log,//\n\t\t\t\tresolver: rendering_resolver,\n\t\t\t\tcredentials: credentials,\n\t\t\t\trendering_factory: _rendering_factory2.default\n\t\t\t};\n\n\t\t\t// debugger\n\n\t\t\tvar description = res_resolver(this._component.get_name());\n\t\t\tdescription.settings = description.settings ? description.settings : {};\n\t\t\tdescription.settings.id = this.get_dom_id();\n\n\t\t\tvar rendering_result = (0, _rendering_factory2.default)(description, rendering_context, undefined);\n\n\t\t\tvar vnode = rendering_result.get_vtree(this.get_dom_id());\n\n\t\t\tif (!vnode) {\n\t\t\t\tvar msg = context + ':render:%s:bad vnode for rendering result';\n\n\t\t\t\tconsole.error(msg + ' for ' + this._component.get_name());\n\t\t\t\tconsole.log(msg + ':rendering_result=', this._component.get_name(), rendering_result);\n\t\t\t\tconsole.log(msg + ':description=', this._component.get_name(), description);\n\n\t\t\t\tthis._component.leave_group('render:error');\n\t\t\t\treturn Promise.reject(msg);\n\t\t\t}\n\n\t\t\tvar ui = window.devapt().ui();\n\t\t\tvar p = this.process_rendering_vnode(vnode);\n\n\t\t\t// PROCESS HEADERS\n\t\t\tui._ui_rendering.process_rendering_result_headers(rendering_result.headers, credentials);\n\n\t\t\t// PROCESS HEAD STYLES AND SCRIPTS\n\t\t\tui._ui_rendering.process_rendering_result_styles_urls(document.head, rendering_result.head_styles_urls, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_styles_tags(document.head, rendering_result.head_styles_tags, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_scripts_urls(document.head, rendering_result.head_scripts_urls, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_scripts_tags(document.head, rendering_result.head_scripts_tags, credentials);\n\n\t\t\t// PROCESS BODY STYLES AND SCRIPTS\n\t\t\tui._ui_rendering.process_rendering_result_styles_urls(document.body, rendering_result.body_styles_urls, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_styles_tags(document.body, rendering_result.body_styles_tags, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_scripts_urls(document.body, rendering_result.body_scripts_urls, credentials);\n\t\t\tui._ui_rendering.process_rendering_result_scripts_tags(document.body, rendering_result.body_scripts_tags, credentials);\n\n\t\t\tthis._component.leave_group('render:async');\n\t\t\treturn p;\n\t\t}\n\n\t\t/**\r\n   * Process rendered VNode: Create or update DOM element.\r\n   * \r\n   * @param {VNode} arg_vnode - rendered virtual node.\r\n   * \r\n   * @returns {Promise} - Promise of this component to chain promises.\r\n   */\n\n\t}, {\n\t\tkey: 'process_rendering_vnode',\n\t\tvalue: function process_rendering_vnode(arg_vnode) {\n\t\t\tthis._component.enter_group('process_rendering_vnode');\n\n\t\t\t// DEBUG\n\t\t\t// debugger\n\t\t\t// console.log(context + ':process_rendering_vnode:%s:vnode', this._component.get_name(), arg_vnode)\n\n\t\t\t// GET COMPONENT ATTRIBUTES\n\t\t\tvar dom_id = this.get_dom_id();\n\t\t\tthis._component.debug('process_rendering_vnode:dom_id=' + dom_id);\n\n\t\t\t// GET PREVIOUS VNODE OR BUILD IT FROM EXISTING HTML DOM\n\t\t\tvar prev_element = this.get_dom_element();\n\t\t\tvar prev_vnode = this.get_dom_vnode();\n\t\t\tif (!prev_vnode && prev_element) {\n\t\t\t\tthis._component.debug('process_rendering_vnode:no previous node, one previous element: create a previous vnode (parse previous element)');\n\t\t\t\t// console.log(context + ':process_rendering_vnode:no previous vnode and dom element')\n\n\t\t\t\tprev_vnode = (0, _vdomParser2.default)(prev_element);\n\t\t\t}\n\t\t\tif (!prev_element) {\n\t\t\t\tthis._component.debug('process_rendering_vnode:no previous element: create previous element with a DIV');\n\t\t\t\t// console.log(context + ':process_rendering_vnode:create dom element')\n\n\t\t\t\tprev_element = document.createElement('DIV');\n\t\t\t\tprev_element.setAttribute('id', dom_id);\n\t\t\t\tthis.set_dom_element(prev_element);\n\n\t\t\t\tprev_vnode = undefined;\n\t\t\t}\n\n\t\t\t// SET NEW VNODE FROM JSON RESULT\n\t\t\tvar new_element = undefined;\n\t\t\tvar new_vnode = arg_vnode;\n\t\t\tif (!new_vnode) {\n\t\t\t\tthis._component.leave_group('process_rendering_vnode:new vnode not found');\n\t\t\t\treturn Promise.reject(context + ':process_rendering_vnode:new vnode not found for ' + this._component.get_name());\n\t\t\t}\n\t\t\tthis.set_dom_vnode(new_vnode);\n\n\t\t\t// PATCH EXISTING HTML DOM\n\t\t\tif (prev_vnode && new_vnode && prev_element) {\n\t\t\t\tthis._component.debug('process_rendering_vnode:previous node, new vnode, previous element:patch existing DOM for ' + this._component.get_name());\n\t\t\t\t// console.log(context + ':process_rendering_vnode:previous vnode and new vnode and dom element exist')\n\n\t\t\t\t// console.log(context + ':process_rendering_vnode:prev_element', prev_element )\n\t\t\t\t// console.log(context + ':process_rendering_vnode:prev_vnode', prev_vnode )\n\t\t\t\t// console.log(context + ':process_rendering_vnode:new_vnode', new_vnode )\n\n\t\t\t\tvar patches = (0, _diff2.default)(prev_vnode, new_vnode);\n\t\t\t\tthis._component.debug('patches', patches);\n\t\t\t\t// console.log(context + ':process_rendering_vnode:patches', patches)\n\n\t\t\t\tnew_element = (0, _patch2.default)(prev_element, patches);\n\t\t\t\tthis.set_dom_element(new_element);\n\n\t\t\t\tthis._component.debug('process_rendering_vnode:new_element', new_element);\n\t\t\t\t// console.log(context + ':process_rendering_vnode:new_element', new_element)\n\t\t\t}\n\n\t\t\t// BUILD HTML DOM\n\t\t\tif (!prev_vnode && new_vnode) {\n\t\t\t\tthis._component.debug('process_rendering_vnode:no previous node, new vnode:create element with new vnode');\n\t\t\t\t// console.log(context + ':process_rendering_vnode:no previous vnode and new vnode', new_vnode)\n\n\t\t\t\tvar dom_element = (0, _createElement2.default)(new_vnode);\n\t\t\t\tthis.set_dom_element(dom_element);\n\n\t\t\t\t// console.log(context + ':process_rendering_vnode:dom_elm', dom_element, this.get_dom_element())\n\t\t\t}\n\n\t\t\tthis._component.leave_group('process_rendering_vnode');\n\t\t\treturn Promise.resolve(this._component);\n\t\t}\n\n\t\t/**\r\n   * Save rendering virtul node. Update component VNode with current component HTML.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'save_rendering',\n\t\tvalue: function save_rendering() {\n\t\t\tthis._component.info('save_rendering');\n\n\t\t\tvar dom_element = this.get_dom_element();\n\t\t\tvar vnode = (0, _vdomParser2.default)(dom_element);\n\n\t\t\t// console.info(context + ':save_rendering:vnode', vnode)\n\n\t\t\tthis.set_dom_vnode(vnode);\n\t\t}\n\t}]);\n\n\treturn Rendering;\n}();\n\nexports.default = Rendering;\n\n\n},{\"../../common/rendering/rendering_factory\":69,\"../../common/rendering/rendering_resolver\":72,\"../../common/utils/types\":105,\"assert\":107,\"dom-delegate\":120,\"vdom-parser\":227,\"virtual-dom/create-element\":230,\"virtual-dom/diff\":231,\"virtual-dom/patch\":233}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _name_type_settings_loggable = require('../base/name_type_settings_loggable');\n\nvar _name_type_settings_loggable2 = _interopRequireDefault(_name_type_settings_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n// import T from 'typr/lib/typr'\n// import assert from 'assert'\n\n// COMMON IMPORTS\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/commands/command';\n\n/**\r\n * @file Base stateless Command class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Command = function (_NameTypeSettingsLogg) {\n\t_inherits(Command, _NameTypeSettingsLogg);\n\n\t/**\r\n  * Creates an instance of Command, do not use directly but in a sub class.\r\n  * @extends Loggable\r\n  * @abstract\r\n  * \r\n  * A Command configuration is a simple object with this common attributes:\r\n  * \t\t- name:string - command unique name.\r\n  * \t\t- type:string - type of commnand from command factory known types list (example: display).\r\n  * \t\t- label:string - displayable short descriptive string.\r\n  * \r\n  * \tAPI\r\n  * \t\t->get_name():string - get command name (INHERITED).\r\n  * \t\t->get_type():string - get command type (INHERITED).\r\n  * \t\t->get_settings():object - get instance type (INHERITED).\r\n  * \t\t->is_valid():boolean - check if instance is valid (settings...) (INHERITED).\r\n  * \r\n  * \t\t->do():Promise - do command.\r\n  * \t\t->undo():Promise - undo command.\r\n  * \r\n  * @param {object}           arg_runtime     - runtime.\r\n  * @param {object}           arg_settings    - instance settings.\r\n  * @param {string|undefined} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Command(arg_runtime, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, Command);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Command.__proto__ || Object.getPrototypeOf(Command)).call(this, arg_runtime, arg_settings, log_context));\n\n\t\t_this.is_command = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Do command.\r\n  * \r\n  * @returns {Promise}\r\n  */\n\n\n\t_createClass(Command, [{\n\t\tkey: 'do',\n\t\tvalue: function _do() {\n\t\t\tthis.enter_group('do');\n\n\t\t\tvar promise = undefined;\n\t\t\ttry {\n\t\t\t\tpromise = this._do();\n\t\t\t} catch (e) {\n\t\t\t\tpromise = Promise.reject(context + ':do:an exception occures:' + e.toString());\n\t\t\t}\n\n\t\t\tthis.leave_group('do:async');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Do command.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: '_do',\n\t\tvalue: function _do() {\n\t\t\treturn Promise.reject(context + ':do:not yet implemented');\n\t\t}\n\n\t\t/**\r\n   * Undo command.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'undo',\n\t\tvalue: function undo() {\n\t\t\tthis.enter_group('undo');\n\n\t\t\tvar promise = undefined;\n\t\t\ttry {\n\t\t\t\tpromise = this._undo();\n\t\t\t} catch (e) {\n\t\t\t\tpromise = Promise.reject(context + ':undo:an exception occures:' + e.toString());\n\t\t\t}\n\n\t\t\tthis.leave_group('undo:async');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Undo command.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: '_undo',\n\t\tvalue: function _undo() {\n\t\t\treturn Promise.reject(context + ':undo:not yet implemented');\n\t\t}\n\t}]);\n\n\treturn Command;\n}(_name_type_settings_loggable2.default);\n\nexports.default = Command;\n\n\n},{\"../base/name_type_settings_loggable\":10}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _command = require('./command');\n\nvar _command2 = _interopRequireDefault(_command);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/commands/display_command';\n\n/**\r\n * @file Base Command class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar DisplayCommand = function (_Command) {\n\t_inherits(DisplayCommand, _Command);\n\n\t/**\r\n  * Creates an instance of DisplayCommand.\r\n  * @extends Command\r\n  * \r\n  * A DisplayCommand configuration is a simple object with:\r\n  * \r\n  * Common attributes:\r\n  * \t\t- name:string - command unique name.\r\n  * \t\t- type:string - type of commnand from command factory known types list (example: display).\r\n  * \t\t- label:string - displayable short descriptive string.\r\n  * \t\t- url or route:string : route to display content.\r\n  * \t\r\n  * Middleware route attributes:\r\n  * \t\t- middleware:string - middleware name to call on server side.\r\n  * \t\r\n  * Browser route attributes:\r\n  * \t\t- view:string - view name to render on browser side.\r\n  * \t\t- menubar:string - menubar name to render on browser side (optional).\r\n  * \r\n  * \tAPI\r\n  * \t\t->do():Promise - do display.\r\n  * \t\t->undo():Promise - undo display and display history previous content.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_settings - command settings.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction DisplayCommand(arg_runtime, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, DisplayCommand);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (DisplayCommand.__proto__ || Object.getPrototypeOf(DisplayCommand)).call(this, arg_runtime, arg_settings, log_context));\n\n\t\t_this.is_display_command = true;\n\n\t\t// this.enable_trace()\n\t\t// this.update_trace_enabled()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Check if command settings is valid.\r\n  * \r\n  * @returns {boolean}\r\n  */\n\n\n\t_createClass(DisplayCommand, [{\n\t\tkey: 'is_valid',\n\t\tvalue: function is_valid() {\n\t\t\tvar has_route = _typr2.default.isString(this._settings.url) || _typr2.default.isString(this._settings.route);\n\t\t\tvar has_action = _typr2.default.isString(this._settings.middleware) || _typr2.default.isString(this._settings.view);\n\n\t\t\treturn has_route && has_action;\n\t\t}\n\n\t\t/**\r\n   * Get route.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_route',\n\t\tvalue: function get_route() {\n\t\t\treturn this._settings.route ? this._settings.route : this._settings.url;\n\t\t}\n\n\t\t/**\r\n   * Get target route.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_target_route',\n\t\tvalue: function get_target_route() {\n\t\t\t// MIDDLEWARE RENDERING\n\t\t\tvar middleware = this._settings.middleware;\n\t\t\tif (_typr2.default.isString(middleware)) {\n\t\t\t\tvar app_url = this._runtime.get_state_store().get_state().get('app_url', undefined);\n\t\t\t\tvar mw_route = _typr2.default.isString(app_url) ? '/' + app_url + this._settings.url : this._settings.url;\n\t\t\t\treturn mw_route;\n\t\t\t}\n\n\t\t\t// VIEW RENDERING\n\t\t\tif (_typr2.default.isString(this._settings.view)) {\n\t\t\t\treturn this._settings.url;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Do command.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: '_do',\n\t\tvalue: function _do() {\n\t\t\t// VIEW RENDERING\n\t\t\tif (_typr2.default.isString(this._settings.view)) {\n\t\t\t\t// console.log(context + ':do:%s:with view=%s', this.get_name(), this._settings.view)\n\n\t\t\t\tvar view_name = _typr2.default.isString(this._settings.view) ? this._settings.view : undefined;\n\t\t\t\tvar menubar_name = _typr2.default.isString(this._settings.menubar) ? this._settings.menubar : undefined;\n\t\t\t\tvar breadcrumbs_name = _typr2.default.isString(this._settings.breadcrumbs) ? this._settings.breadcrumbs : undefined;\n\n\t\t\t\tvar promise = null;\n\t\t\t\ttry {\n\t\t\t\t\tvar components = {\n\t\t\t\t\t\tview: view_name,\n\t\t\t\t\t\tmenubar: menubar_name,\n\t\t\t\t\t\tbreadcrumbs: breadcrumbs_name,\n\t\t\t\t\t\tmiddleware: undefined,\n\t\t\t\t\t\troute: undefined\n\t\t\t\t\t};\n\n\t\t\t\t\t// MIDDLEWARE RENDERING\n\t\t\t\t\tvar middleware = this._settings.middleware;\n\t\t\t\t\tif (_typr2.default.isString(middleware)) {\n\t\t\t\t\t\tconsole.log(context + ':do:%s:with middleware=%s', this.get_name(), middleware);\n\n\t\t\t\t\t\t// GET ROUTE\n\t\t\t\t\t\tvar route = this.get_route();\n\t\t\t\t\t\tif (!route) {\n\t\t\t\t\t\t\treturn Promise.reject(context + ':do:bad route');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcomponents.route = route;\n\t\t\t\t\t\tcomponents.middleware = middleware;\n\t\t\t\t\t}\n\n\t\t\t\t\tpromise = this.get_runtime().ui().get_current_layout().render_page_content(components);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e, context);\n\t\t\t\t\tpromise = Promise.reject(context + ':do:view:error=' + e.toString());\n\t\t\t\t}\n\n\t\t\t\treturn promise;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isObject(this._settings.vnode) && _typr2.default.isObject(this._settings.rendering_result)) {\n\t\t\t\t// console.log(context + ':do:%s:with vnode=', this.get_name(), this._settings.vnode)\n\n\t\t\t\tvar _promise = null;\n\t\t\t\ttry {\n\t\t\t\t\tvar _components = this.get_runtime().ui().get_current_layout().render_page_content_vnode(this._settings.vnode, this._settings.rendering_result, undefined);\n\t\t\t\t\t_promise = Promise.resolve(_components);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e, context);\n\t\t\t\t\t_promise = Promise.reject(context + ':do:vnode:error=' + e.toString());\n\t\t\t\t}\n\n\t\t\t\treturn _promise;\n\t\t\t}\n\n\t\t\t// RENDERING RESULT PROCESSING\n\t\t\tvar rendering_result = this._settings.rendering_result;\n\t\t\tif (_typr2.default.isObject(rendering_result) && rendering_result.is_rendering_result) {\n\t\t\t\t// console.log(context + ':do:%s:with rendering_result=', rendering_result)\n\n\t\t\t\tvar _promise2 = null;\n\t\t\t\ttry {\n\t\t\t\t\tvar _components2 = {\n\t\t\t\t\t\tview: undefined,\n\t\t\t\t\t\tmenubar: undefined,\n\t\t\t\t\t\tbreadcrumbs: undefined,\n\t\t\t\t\t\tmiddleware: undefined,\n\t\t\t\t\t\troute: undefined,\n\t\t\t\t\t\trendering_result: rendering_result\n\t\t\t\t\t};\n\t\t\t\t\t_promise2 = this.get_runtime().ui().get_current_layout().render_page_content(_components2);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e, context);\n\t\t\t\t\t_promise2 = Promise.reject(context + ':do:rendering_result:error=' + e.toString());\n\t\t\t\t}\n\n\t\t\t\treturn _promise2;\n\t\t\t}\n\n\t\t\treturn Promise.reject(context + ':do:bad settings');\n\t\t}\n\n\t\t/**\r\n   * Undo command.\r\n   * \r\n   * @returns {Promise}\r\n   */\n\n\t}, {\n\t\tkey: '_undo',\n\t\tvalue: function _undo() {\n\t\t\treturn Promise.reject(context + ':undo:not yet implemented');\n\t\t}\n\t}]);\n\n\treturn DisplayCommand;\n}(_command2.default);\n\nexports.default = DisplayCommand;\n\n\n},{\"./command\":12,\"assert\":107,\"typr/lib/typr\":218}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/attributes_table';\n\n/**\r\n * @file UI Attributes table component class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar AttributesTable = function (_Table) {\n\t_inherits(AttributesTable, _Table);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction AttributesTable(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, AttributesTable);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (AttributesTable.__proto__ || Object.getPrototypeOf(AttributesTable)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_attributes_table_component = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Set all object attributes.\r\n  * \r\n  * @param {object}  arg_object - attributes object.\r\n  * @param {integer} arg_max_depth - nested attributes max deep (TODO).\r\n  * \r\n  * @returns {noting}\r\n  */\n\n\n\t_createClass(AttributesTable, [{\n\t\tkey: 'set_view_attributes_by_name',\n\t\tvalue: function set_view_attributes_by_name(arg_view_name, arg_max_depth) {\n\t\t\tconsole.log(context + ':set_view_attributes_by_name:%s:view name=%s,max depth=%i', this.get_name(), arg_view_name, arg_max_depth);\n\n\t\t\tif (!_typr2.default.isString(arg_view_name)) {\n\t\t\t\tconsole.warn(context + ':set_view_attributes_by_name:%s:bad view name string=%s', this.get_name(), arg_view_name);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar view_desc = this.get_runtime().ui().get_resource_description_resolver()(arg_view_name);\n\t\t\tif (!view_desc) {\n\t\t\t\tconsole.warn(context + ':set_view_attributes_by_name:%s:view not found=%s', this.get_name(), arg_view_name);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.set_object_attributes(view_desc, arg_max_depth);\n\t\t}\n\t}, {\n\t\tkey: 'parse_integer',\n\t\tvalue: function parse_integer(arg_string) {\n\t\t\tvar integer = 0;\n\t\t\ttry {\n\t\t\t\tinteger = parseInt(arg_string);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(context + ':build_row:click handler:bad integer for string', arg_string);\n\t\t\t\tinteger = 0;\n\t\t\t}\n\t\t\treturn integer;\n\t\t}\n\n\t\t/**\r\n   * Set all object attributes.\r\n   * \r\n   * @param {object}  arg_object - attributes object.\r\n   * @param {integer} arg_max_depth - nested attributes max deep (TODO).\r\n   * \r\n   * @returns {noting}\r\n   */\n\n\t}, {\n\t\tkey: 'set_object_attributes',\n\t\tvalue: function set_object_attributes(arg_object /*, arg_max_depth*/) {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!_typr2.default.isObject(arg_object)) {\n\t\t\t\tconsole.warn(context + ':set_object_attributes:%s:bad object instance=', this.get_name(), arg_object);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar attributes = [];\n\t\t\tvar attributes_exclude = this.get_state_value('attributes_exclude', undefined);\n\t\t\tvar attributes_path = this.get_state_value('attributes_path', undefined);\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':set_object_attributes:%s:attributes_exclude=', this.get_name(), attributes_exclude)\n\t\t\t// console.log(context + ':set_object_attributes:%s:attributes_path=', this.get_name(), attributes_path)\n\n\t\t\tif (attributes_path) {\n\t\t\t\tif (attributes_path.toJS) {\n\t\t\t\t\tattributes_path = attributes_path.toJS();\n\t\t\t\t}\n\t\t\t\tif (_typr2.default.isArray(attributes_path) && attributes_path.length > 0) {\n\t\t\t\t\t// console.log(context + ':set_object_attributes:%s:attributes_path is a non empty array=', this.get_name(), attributes_path)\n\n\t\t\t\t\tvar key = attributes_path.shift();\n\t\t\t\t\twhile (key) {\n\t\t\t\t\t\tif (key in arg_object) {\n\t\t\t\t\t\t\t// console.log(context + ':set_object_attributes:%s:attributes_path:loop on key=%s (found, go inside)', this.get_name(), key)\n\t\t\t\t\t\t\targ_object = arg_object[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// console.warn(context + ':set_object_attributes:%s:attributes_path:loop on key=%s (not found in current object)', this.get_name(), key)\n\t\t\t\t\t\t\tthis.do_action_clear_items();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey = attributes_path.shift();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar keys = Object.keys(arg_object);\n\t\t\t// console.log(context + ':set_object_attributes:%s:keys=', this.get_name(), keys)\n\t\t\tkeys.forEach(function (key /*, index*/) {\n\t\t\t\tif (attributes_exclude) {\n\t\t\t\t\tif (attributes_exclude.indexOf(key) > -1) {\n\t\t\t\t\t\t// console.log(context + ':set_object_attributes:%s:skip key=%s', this.get_name(), key)\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar value = arg_object[key] ? arg_object[key] : 'undefined';\n\t\t\t\t// console.log(context + ':set_object_attributes:%s:key=%s,value=%s', this.get_name(), key, value)\n\n\t\t\t\t// const formated_value = (T.isString(value) || T.isNumber(value) || T.isBoolean(value)) ? value : ( T.isFunction(value) ? 'Function' : value.toString())\n\t\t\t\tvar formated_value = value;\n\t\t\t\tattributes.push([key, formated_value]);\n\t\t\t});\n\n\t\t\t// console.log(context + ':set_object_attributes:%s:object&attributes=', this.get_name(), arg_object, attributes)\n\n\t\t\tthis.do_action_replace(attributes, attributes.length);\n\n\t\t\t// COLLAPSE / EXPAND CLICK HANDLER\n\t\t\t// handler signature: f(component, event name, selection, event, target)\n\t\t\tvar handler = function handler(component, event_name, selection, event, target) {\n\t\t\t\tif (!target || !component) {\n\t\t\t\t\tconsole.warn(context + ':build_row:click handler:bad target or component');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar parent_tr_elem = target.parentNode;\n\t\t\t\tvar collapsed = target.getAttribute('devapt-collapsed') == 'true' ? true : false;\n\t\t\t\tvar css_display = collapsed ? 'table-row' : 'none';\n\t\t\t\tvar parent_depth = parent_tr_elem ? _this2.parse_integer(parent_tr_elem.getAttribute('devapt-depth')) : 0;\n\n\t\t\t\t// DEBUG\n\t\t\t\t// console.log(context + ':build_row:click handler:parent_tr_elem=', parent_tr_elem)\n\t\t\t\t// console.log(context + ':build_row:click handler:collapsed=%b', collapsed)\n\t\t\t\t// console.log(context + ':build_row:click handler:css_display=%s', css_display)\n\t\t\t\t// console.log(context + ':build_row:click handler:parent_depth=%i', parent_depth)\n\n\t\t\t\tvar tr_elem = parent_tr_elem ? parent_tr_elem.nextSibling : undefined;\n\t\t\t\tvar elem_depth = tr_elem ? _this2.parse_integer(tr_elem.getAttribute('devapt-depth')) : 0;\n\t\t\t\twhile (tr_elem && elem_depth > parent_depth) {\n\t\t\t\t\t// console.log(context + ':build_row:click handler:loop on elem', tr_elem)\n\n\t\t\t\t\ttr_elem.style.display = css_display;\n\t\t\t\t\ttr_elem = tr_elem.nextSibling;\n\t\t\t\t}\n\t\t\t\ttarget.setAttribute('devapt-collapsed', !collapsed);\n\t\t\t\ttarget.firstChild.textContent = !collapsed ? '\\u25B9' : '\\u25BF';\n\t\t\t};\n\t\t\tthis.on_dom_event('click', 'td.devapt-collapsable-row', handler, undefined, false);\n\t\t}\n\n\t\t/**\r\n   * Get object from attributes.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'get_object_attributes',\n\t\tvalue: function get_object_attributes() // TODO\n\t\t{\n\t\t\tvar result_object = {};\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\t\t\tvar tr_elems = table_body_elem.children;\n\n\t\t\tvar row_index = 0;\n\t\t\t// let previous_index = undefined\n\t\t\tfor (; row_index < tr_elems.length; row_index++) {\n\t\t\t\tvar tr_elem = tr_elems[row_index];\n\t\t\t\tvar tr_index = tr_elem.getAttribute('devapt-row-index');\n\t\t\t\tvar td_key_elem = tr_elem.firstChild;\n\t\t\t\tvar td_value_elem = td_key_elem.nextSibling;\n\t\t\t\tvar value_type = td_value_elem.getAttribute('devapt-data-type');\n\t\t\t\tvar key = td_key_elem.textContent;\n\t\t\t\tvar value = td_value_elem.textContent;\n\n\t\t\t\tswitch (value_type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tresult_object[key] = value;break;\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tresult_object[key] = new Number(value);break;\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tresult_object[key] = value == 'true' ? true : false;break;\n\t\t\t\t\t// case 'array': \n\t\t\t\t\t// case 'object':\n\t\t\t\t}\n\n\t\t\t\t// previous_index = tr_index\n\t\t\t}\n\n\t\t\treturn result_object;\n\t\t}\n\n\t\t/**\r\n   * Build a row cell DOM element.\r\n   *\r\n   * @param {any}      arg_cell_value   - cell value.\r\n   * @param {integer}  arg_row_index    - row index.\r\n   * @param {integer}  arg_column_index - column index.\r\n   * @param {Document} arg_document     - DOM document.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'build_cell',\n\t\tvalue: function build_cell(arg_cell_value, arg_row_index, arg_column_index, arg_document) {\n\t\t\tvar td_elem = arg_document.createElement('td');\n\t\t\ttd_elem.setAttribute('devapt-column-index', arg_column_index);\n\n\t\t\tif (_typr2.default.isString(arg_cell_value)) {\n\t\t\t\t// console.log(context + ':build_cell:%s:string:at row %i:value=%s', this.get_name(), arg_row_index, arg_cell_value)\n\n\t\t\t\ttd_elem.innerText = arg_cell_value;\n\t\t\t\ttd_elem.setAttribute('devapt-data-type', 'string');\n\t\t\t\treturn td_elem;\n\t\t\t} else if (_typr2.default.isNumber(arg_cell_value)) {\n\t\t\t\t// console.log(context + ':build_cell:%s:number:at row %i:value=%s', this.get_name(), arg_row_index, arg_cell_value)\n\n\t\t\t\ttd_elem.innerText = arg_cell_value;\n\t\t\t\ttd_elem.setAttribute('devapt-data-type', 'number');\n\t\t\t} else if (_typr2.default.isBoolean(arg_cell_value)) {\n\t\t\t\t// console.log(context + ':build_cell:%s:boolean:at row %i:value=%s', this.get_name(), arg_row_index, arg_cell_value)\n\n\t\t\t\ttd_elem.innerText = arg_cell_value ? 'true' : 'false';\n\t\t\t\ttd_elem.setAttribute('devapt-data-type', 'boolean');\n\t\t\t} else if (_typr2.default.isFunction(arg_cell_value)) {\n\t\t\t\t// console.log(context + ':build_cell:%s:function:at row %i:value=%s', this.get_name(), arg_row_index, 'Function')\n\n\t\t\t\ttd_elem.innerText = 'Function';\n\t\t\t\ttd_elem.setAttribute('devapt-data-type', 'function');\n\t\t\t} else {\n\t\t\t\t// console.log(context + ':build_cell:%s:array:at row %i:unknow=%s', this.get_name(), arg_row_index, arg_cell_value)\n\n\t\t\t\ttd_elem.innerText = 'unknow';\n\t\t\t\ttd_elem.setAttribute('devapt-data-type', 'unknow');\n\t\t\t}\n\n\t\t\treturn td_elem;\n\t\t}\n\n\t\t/**\r\n   * Build a table row DOM element.\r\n   *\r\n   * @param {array} arg_row_array   - row values array.\r\n   * @param {integer} arg_row_index - row index.\r\n   * @param {integer} arg_max_cols  - max columns number.\r\n   * @param {integer} arg_depth     - path depth.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'build_row',\n\t\tvalue: function build_row(arg_row_array, arg_row_index, arg_max_cols) {\n\t\t\tvar arg_depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n\t\t\tvar this_document = this.get_dom_element().ownerDocument;\n\t\t\tvar row_elem = this_document.createElement('tr');\n\t\t\trow_elem.setAttribute('devapt-row-index', arg_row_index);\n\t\t\trow_elem.setAttribute('devapt-depth', arg_depth);\n\n\t\t\t// console.log(context + ':build_row:rows_index=%i row_array max_cols', arg_row_index, arg_row_array, arg_max_cols)\n\n\t\t\tif (!_typr2.default.isArray(arg_row_array) || arg_row_array.length != 2) {\n\t\t\t\tconsole.warn(context + ':build_row:row_array is not an array of size 2 at rows_index=%i', arg_row_index, arg_row_array);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tvar attribute_name = arg_row_array[0];\n\t\t\tvar attribute_value = arg_row_array[1];\n\t\t\tvar pad_left = 10;\n\n\t\t\tvar td_name_elem = this_document.createElement('td');\n\t\t\ttd_name_elem.setAttribute('devapt-column-index', 0);\n\t\t\ttd_name_elem.style.paddingLeft = td_name_elem.style.paddingLeft ? td_name_elem.style.paddingLeft + arg_depth * pad_left : arg_depth * pad_left;\n\t\t\ttd_name_elem.innerText = attribute_name;\n\t\t\trow_elem.appendChild(td_name_elem);\n\n\t\t\tvar td_value_elem = this.build_cell(attribute_value, arg_row_index, 1, this_document, arg_depth);\n\t\t\trow_elem.appendChild(td_value_elem);\n\n\t\t\treturn row_elem;\n\t\t}\n\n\t\t/**\r\n   * Build a table row DOM element.\r\n   *\r\n   * @param {array} arg_row_array   - row values array.\r\n   * @param {integer} arg_row_index - row index.\r\n   * @param {integer} arg_max_cols  - max columns number.\r\n   * @param {integer} arg_depth     - path depth.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'build_row_collapsed',\n\t\tvalue: function build_row_collapsed(arg_row_array, arg_row_index, arg_max_cols) {\n\t\t\tvar arg_depth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n\t\t\tvar this_document = this.get_dom_element().ownerDocument;\n\t\t\tvar row_elem = this_document.createElement('tr');\n\t\t\trow_elem.setAttribute('devapt-row-index', arg_row_index);\n\t\t\trow_elem.setAttribute('devapt-depth', arg_depth);\n\n\t\t\t// console.log(context + ':build_row:rows_index=%i row_array max_cols', arg_row_index, arg_row_array, arg_max_cols)\n\n\t\t\tif (!_typr2.default.isArray(arg_row_array) || arg_row_array.length != 2) {\n\t\t\t\tconsole.warn(context + ':build_row:row_array is not an array of size 2 at rows_index=%i', arg_row_index, arg_row_array);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tvar attribute_name = arg_row_array[0];\n\t\t\tvar attribute_value = arg_row_array[1];\n\t\t\tvar pad_left = 10;\n\n\t\t\tvar td_name_elem = this_document.createElement('td');\n\t\t\ttd_name_elem.setAttribute('devapt-column-index', 0);\n\t\t\ttd_name_elem.setAttribute('devapt-collapsed', false);\n\t\t\ttd_name_elem.className = 'devapt-collapsable-row';\n\t\t\ttd_name_elem.style.paddingLeft = td_name_elem.style.paddingLeft ? td_name_elem.style.paddingLeft + arg_depth * pad_left : arg_depth * pad_left;\n\t\t\t// td_name_elem.innerText = attribute_name\n\t\t\trow_elem.appendChild(td_name_elem);\n\n\t\t\tvar span_elem = this_document.createElement('span');\n\t\t\tspan_elem.textContent = '\\u25BF';\n\t\t\ttd_name_elem.appendChild(span_elem);\n\n\t\t\tvar text_elem = this_document.createElement('span');\n\t\t\ttext_elem.textContent = attribute_name;\n\t\t\ttd_name_elem.appendChild(text_elem);\n\n\t\t\tvar td_value_elem = this.build_cell(attribute_value, arg_row_index, 1, this_document, arg_depth);\n\t\t\trow_elem.appendChild(td_value_elem);\n\n\t\t\treturn row_elem;\n\t\t}\n\n\t\t/**\r\n   * Build a table row DOM element.\r\n   *\r\n   * @param {Element} arg_body_element - table body element.\r\n   * @param {array}   arg_row_array    - row values array.\r\n   * @param {integer} arg_row_index    - row index.\r\n   * @param {integer} arg_max_rows     - max rows number.\r\n   * @param {integer} arg_max_cols     - max columns number.\r\n   * @param {string}  arg_mode         - fill mode:append/prepend\r\n   * @param {string}  arg_max_rows_action - action on max rows.\r\n   * @param {integer} arg_depth        - path depth.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'process_row_array',\n\t\tvalue: function process_row_array(arg_body_element, arg_row_array, arg_row_index, arg_max_rows, arg_max_cols, arg_mode, arg_max_rows_action) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar arg_depth = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n\n\t\t\t// console.log(context + ':process_row_array:%s:at %i:max cols=%i:depth=%i:row array=', this.get_name(), arg_row_index, 2, arg_depth, arg_row_array)\n\n\t\t\tvar attribute_name = arg_row_array[0];\n\t\t\tvar attribute_value = arg_row_array[1];\n\t\t\tvar pad_left = 10;\n\n\t\t\tif (_typr2.default.isArray(attribute_value)) {\n\t\t\t\t// console.log(context + ':process_row_array:%s:array:at row %i:depth=%i', this.get_name(), arg_row_index, arg_depth )\n\n\t\t\t\t/*\r\n    TODO EXPANDABLE ICONS:\r\n    \t'<span class=\"node_closed\">\\u25B9</span>'\r\n    \t'<span class=\"node_opened\">\\u25BF</span>'\r\n    */\n\t\t\t\tvar first_row_elem = this.build_row_collapsed([attribute_name, ''], arg_row_index, 2, arg_depth);\n\t\t\t\tif (!first_row_elem) {\n\t\t\t\t\tconsole.warn(context + ':process_row_array:%s:at %i:max cols=%i:array:bad row element for ', this.get_name(), arg_row_index, 2, arg_row_array);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfirst_row_elem.setAttribute('devapt-data-type', 'array');\n\t\t\t\targ_body_element.appendChild(first_row_elem);\n\n\t\t\t\t_lodash2.default.forEach(attribute_value, function (item, index) {\n\t\t\t\t\t_this3.process_row_array(arg_body_element, [index, item], arg_row_index, arg_max_rows, arg_max_cols, arg_mode, arg_max_rows_action, arg_depth + 1);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t} else if (_typr2.default.isObject(attribute_value)) {\n\t\t\t\t// console.log(context + ':process_row_array:%s:object:at row %i:depth=%i', this.get_name(), arg_row_index, arg_depth )\n\n\t\t\t\t// OPEN=\\u25BF CLOSE=\\u25B9\n\t\t\t\tvar _first_row_elem = this.build_row_collapsed([attribute_name, ''], arg_row_index, 2, arg_depth);\n\t\t\t\tif (!_first_row_elem) {\n\t\t\t\t\tconsole.warn(context + ':process_row_array:%s:at %i:max cols=%i:object:bad row element for ', this.get_name(), arg_row_index, 2, arg_row_array);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_first_row_elem.setAttribute('devapt-data-type', 'object');\n\t\t\t\targ_body_element.appendChild(_first_row_elem);\n\n\t\t\t\t_lodash2.default.forEach(attribute_value, function (item, key) {\n\t\t\t\t\t_this3.process_row_array(arg_body_element, [key, item], arg_row_index, arg_max_rows, arg_max_cols, arg_mode, arg_max_rows_action, arg_depth + 1);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// DEFAULT CASE\n\t\t\t// console.log(context + ':process_row_array:%s:default:at row %i:depth=%i', this.get_name(), arg_row_index, arg_depth )\n\n\t\t\tvar row_elem = this.build_row(arg_row_array, arg_row_index, 2, arg_depth);\n\t\t\tif (!row_elem) {\n\t\t\t\tconsole.warn(context + ':process_row_array:%s:at %i:max cols=%i:default:bad row element for ', this.get_name(), arg_row_index, 2, arg_row_array);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\trow_elem.style.paddingLeft = row_elem.style.paddingLeft ? row_elem.style.paddingLeft + (arg_depth + 1) * pad_left : (arg_depth + 1) * pad_left;\n\t\t\targ_body_element.appendChild(row_elem);\n\t\t}\n\t}]);\n\n\treturn AttributesTable;\n}(_table2.default);\n\nexports.default = AttributesTable;\n\n\n},{\"./table\":20,\"lodash\":187,\"typr/lib/typr\":218}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _container = require('../base/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/dock';\n\nvar Dock = function (_Container) {\n\t_inherits(Dock, _Container);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * @extends Component\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Dock(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Dock);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Dock.__proto__ || Object.getPrototypeOf(Dock)).call(this, arg_runtime, arg_state, arg_log_context ? arg_log_context : context));\n\n\t\t_this.is_dock_component = true;\n\t\treturn _this;\n\t}\n\n\t_createClass(Dock, [{\n\t\tkey: '_update_self',\n\t\tvalue: function _update_self(arg_prev_element, arg_new_element) {}\n\t\t// console.log(context + ':_update_self', arg_prev_element, arg_new_element)\n\n\n\t\t/**\r\n   * Get a component instance from a name, a description...\r\n   * \r\n   * @param {any} arg_value - string or object value.\r\n   * \r\n   * @returns {undefined|Component}\r\n   */\n\n\t}, {\n\t\tkey: 'get_component',\n\t\tvalue: function get_component(arg_value) {\n\t\t\tif (_types2.default.isString(arg_value)) {\n\t\t\t\treturn window.devapt().ui(arg_value);\n\t\t\t}\n\n\t\t\tif (_types2.default.isObject(arg_value)) {\n\t\t\t\tif (arg_value.is_component) {\n\t\t\t\t\treturn arg_value;\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isNotEmptyString(arg_value.type) && _types2.default.isNotEmptyString(arg_value.name)) {\n\t\t\t\t\treturn window.devapt().ui().create_local(arg_value.name, arg_value);\n\t\t\t\t}\n\n\t\t\t\tif (_types2.default.isNotEmptyString(arg_value.view)) {\n\t\t\t\t\treturn window.devapt().ui(arg_value.view);\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Append items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append(arg_items_array, arg_items_count) {\n\t\t\tvar _this2 = this;\n\n\t\t\t// console.log(context + ':ui_items_append:arg_items_array', arg_items_array, arg_items_count)\n\n\t\t\tvar dom_elem = this.get_dom_element();\n\n\t\t\tif (arg_items_count > arg_items_array.length) {\n\t\t\t\targ_items_array.splice(arg_items_count);\n\t\t\t}\n\n\t\t\t_lodash2.default.forEach(arg_items_array, function (item, index) {\n\t\t\t\tvar component = _this2.get_component(item);\n\n\t\t\t\tif (!component) {\n\t\t\t\t\tconsole.warn(context + ':ui_items_append:bad item component at %i for ', index, item);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcomponent.set_dom_parent(dom_elem);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Prepend items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\t// ui_items_prepend(arg_items_array, arg_items_count)\n\t\t// {\n\t\t// \t// console.log(context + ':ui_items_prepend:%s:count=%s:arg_items_array', this.get_name(), arg_items_count, arg_items_array)\n\n\t\t// }\n\n\n\t\t/**\r\n   * Replace container items.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\t// ui_items_replace(arg_items_array/*, arg_items_count*/)\n\t\t// {\n\t\t// \t// console.log(context + ':ui_items_replace:arg_items_array', arg_items_array.length)\n\n\t\t// \t// REMOVE ALL EXISTING ROWS\n\t\t// \tthis.ui_items_clear()\n\n\t\t// }\n\n\n\t\t/**\r\n   * Insert items at container position index.\r\n   * \r\n   * @param {intege} arg_index - position index.\r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\t// ui_items_insert_at(arg_index, arg_items_array, arg_items_count)\n\t\t// {\n\t\t// \tassert( T.isArray(arg_items_array), context + ':ui_items_replace:bad items array')\n\t\t// \tassert( T.isNumber(arg_items_count), context + ':ui_items_replace:bad items count')\n\n\t\t// \t// NOT YET IMPLEMENTED\n\t\t// }\n\n\n\t\t/**\r\n   * Remove a row at given position.\r\n   * \r\n   * @param {number} arg_index - row index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\tassert(_types2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (arg_index < 0 || arg_index >= dom_elem.children.length) {\n\t\t\t\tconsole.warn(context + ':ui_items_remove_at_index:%s:bad item index=%s', this.get_name(), arg_index);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar child_elem = dom_elem.children[arg_index];\n\t\t\tdom_elem.removeChild(child_elem);\n\t\t}\n\n\t\t/**\r\n   * Remove a row at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tvar first_elem = dom_elem.firstElementChild();\n\t\t\ttable_body_elem.removeChild(first_elem);\n\t\t}\n\n\t\t/**\r\n   * Remove a row at last position.\r\n   * \r\n   * @param {integer} arg_count - items count to remove.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() {\n\t\t\tvar arg_count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n\t\t\t// console.log(context + ':ui_items_remove_last:arg_count', arg_count)\n\n\t\t\tif (arg_count <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tvar children_elems = dom_elem.children;\n\t\t\tvar last_index = children_elems.length - arg_count - 1;\n\t\t\tvar row_index = last_index - 1 >= 0 ? last_index - 1 : 0;\n\t\t\tfor (; row_index < children_elems.length; row_index++) {\n\t\t\t\tvar child_elem = children_elems[row_index];\n\t\t\t\tdom_elem.removeChild(child_elem);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Dock;\n}(_container2.default);\n\nexports.default = Dock;\n\n\n},{\"../../common/utils/types\":105,\"../base/container\":6,\"lodash\":187}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stream2 = require('../../common/messaging/stream');\n\nvar _stream3 = _interopRequireDefault(_stream2);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n// import T from 'typr/lib/typr'\n// import assert from 'assert'\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/input-field';\n\nvar InputField = function (_Component) {\n\t_inherits(InputField, _Component);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * @extends Component\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction InputField(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, InputField);\n\n\t\tvar _this = _possibleConstructorReturn(this, (InputField.__proto__ || Object.getPrototypeOf(InputField)).call(this, arg_runtime, arg_state, arg_log_context ? arg_log_context : context));\n\n\t\t_this.is_input_field = true;\n\n\t\t_this.init();\n\t\treturn _this;\n\t}\n\n\t// _update_self(arg_prev_element, arg_new_element)\n\t// {\n\t// \t// console.log(context + ':_update_self', arg_prev_element, arg_new_element)\n\n\t// \tif (arg_prev_element != arg_new_element)\n\t// \t{\n\t// \t\t// console.log(context + ':_update_self:different elements')\n\t// \t\tif (this.sparkline)\n\t// \t\t{\n\t// \t\t\t// console.log(context + ':_update_self:sparkline exists')\n\t// \t\t\targ_new_element.innerHTML = arg_prev_element.innerHTML\n\t// \t\t\tdelete this.sparkline\n\t// \t\t}\n\t// \t}\n\t// }\n\n\n\t// handle_items_change(arg_path, arg_previous_value, arg_new_value)\n\t// {\n\t// \t// console.log(context + ':handle_items_change', arg_path, arg_previous_value, arg_new_value)\n\t// }\n\n\n\t_createClass(InputField, [{\n\t\tkey: 'init',\n\t\tvalue: function init() {}\n\t\t// console.log(context + ':init')\n\n\t\t// var self = this\n\t\t// var elm = this.get_dom_element()\n\t\t// console.log(this.get_name(), context + ':this.get_name()')\n\t\t// console.log(this.get_dom_id(), context + ':this.get_dom_id()')\n\t\t// console.log(elm, context + ':elm')\n\n\t\t// var view_state = this.get_state().toJS()\n\t\t// var value = view_state.value ? view_state.value : ''\n\n\n\t\t/**\r\n   * Get a named stream.\r\n   * \r\n   * @param {string} arg_stream_name - stream name.\r\n   * \r\n   * @returns {Stream|undefined} - found stream.\r\n   */\n\n\t}, {\n\t\tkey: 'get_named_stream',\n\t\tvalue: function get_named_stream(arg_stream_name) {\n\t\t\tvar dom_elem = this.get_dom_element();\n\t\t\tif (!dom_elem) {\n\t\t\t\tconsole.warn(context + ':get_named_stream:%s:undefined dom element', this.get_name());\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tswitch (arg_stream_name.toLocaleLowerCase()) {\n\t\t\t\tcase 'enter':\n\t\t\t\t\t{\n\t\t\t\t\t\t// console.log(context + ':get_named_stream:%s:stream found=%s', this.get_name(), arg_stream_name.toLocaleLowerCase())\n\n\t\t\t\t\t\tvar stream = new _stream3.default.from_dom_event(dom_elem, 'keydown');\n\n\t\t\t\t\t\tvar xform_stream = stream.get_source_stream().debounce(300) // limit the rate of queries\n\t\t\t\t\t\t.filter( // get text value\n\t\t\t\t\t\tfunction (event) {\n\t\t\t\t\t\t\tconsole.log(context + ':keydown(enter) stream:value', event.target.value);\n\t\t\t\t\t\t\treturn event.keyCode == 13;\n\t\t\t\t\t\t}).skipDuplicates(); // Ignore duplicate events with same text\n\n\t\t\t\t\t\tstream.set_transformed_stream(xform_stream);\n\t\t\t\t\t\treturn stream;\n\t\t\t\t\t}\n\t\t\t\tcase 'keydown':\n\t\t\t\t\t{\n\t\t\t\t\t\t// console.log(context + ':get_named_stream:%s:stream found=%s', this.get_name(), arg_stream_name.toLocaleLowerCase())\n\n\t\t\t\t\t\tvar _stream = new _stream3.default.from_dom_event(dom_elem, 'keydown');\n\n\t\t\t\t\t\tvar _xform_stream = _stream.get_source_stream().debounce(300) // limit the rate of queries\n\t\t\t\t\t\t.map( // get text value\n\t\t\t\t\t\tfunction (event) {\n\t\t\t\t\t\t\t// console.log(context + ':keydown stream:value', event.target.value)\n\t\t\t\t\t\t\treturn event.target.value;\n\t\t\t\t\t\t}).skipDuplicates(); // Ignore duplicate events with same text\n\n\t\t\t\t\t\t_stream.set_transformed_stream(_xform_stream);\n\t\t\t\t\t\treturn _stream;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.warn(context + ':get_named_stream:%s:unknow named stream=%s', this.get_name(), arg_stream_name.toLocaleLowerCase());\n\t\t\treturn undefined;\n\t\t}\n\t}]);\n\n\treturn InputField;\n}(_component2.default);\n\nexports.default = InputField;\n\n\n},{\"../../common/messaging/stream\":49,\"../base/component\":5}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _uid = require('../../common/utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/logs_table';\n\n/**\r\n * @file UI component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar LogsTable = function (_Table) {\n\t_inherits(LogsTable, _Table);\n\n\t/**\r\n  * Creates an instance of LogsTable.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction LogsTable(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, LogsTable);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (LogsTable.__proto__ || Object.getPrototypeOf(LogsTable)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_logs_table_component = true;\n\n\t\t_this.register_state_value_change_handle(['selected_column'], 'handle_selected_column_change');\n\n\t\t_this._elements_cache = {};\n\t\t_this._filters = {};\n\n\t\t// DEBUG\n\t\t// this.enable_trace()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Build a table row DOM element.\r\n  *\r\n  * @param {array} arg_row_array - row values array.\r\n  * @param {integer} arg_row_index - row index.\r\n  * @param {integer} arg_max_cols - max columns number.\r\n  * \r\n  * @returns {Element} - TD DOM Element.\r\n  */\n\n\n\t_createClass(LogsTable, [{\n\t\tkey: 'build_row',\n\t\tvalue: function build_row(arg_row_array, arg_row_index, arg_max_cols) {\n\t\t\tvar td_elem = _get(LogsTable.prototype.__proto__ || Object.getPrototypeOf(LogsTable.prototype), 'build_row', this).call(this, arg_row_array, arg_row_index, arg_max_cols);\n\n\t\t\tvar log_uid = 'log_' + (0, _uid2.default)();\n\t\t\targ_row_array.push(log_uid);\n\t\t\ttd_elem.setAttribute('data-devapt-log_uid', log_uid);\n\n\t\t\tvar row_record = {\n\t\t\t\telem: td_elem,\n\t\t\t\tlog: arg_row_array,\n\t\t\t\tlog_uid: log_uid,\n\t\t\t\trow_index: arg_row_index\n\t\t\t};\n\t\t\tthis._elements_cache[log_uid] = row_record;\n\n\t\t\tthis.apply_filter_on_row_record(row_record);\n\n\t\t\treturn td_elem;\n\t\t}\n\n\t\t/**\r\n   * Get column index from its name.\r\n   *\r\n   * @param {string} arg_column_name - column name.\r\n   * \r\n   * @returns {integer} - column index\r\n   */\n\n\t}, {\n\t\tkey: 'get_column_index',\n\t\tvalue: function get_column_index(arg_column_name) {\n\t\t\tswitch (arg_column_name) {\n\t\t\t\tcase 'ts':\n\t\t\t\t\treturn 0;\n\t\t\t\tcase 'level':\n\t\t\t\t\treturn 1;\n\t\t\t\tcase 'source':\n\t\t\t\t\treturn 2;\n\t\t\t\tcase 'context':\n\t\t\t\t\treturn 3;\n\t\t\t\tcase 'instance':\n\t\t\t\t\treturn 4;\n\t\t\t\tcase 'group':\n\t\t\t\t\treturn 5;\n\t\t\t\tcase 'action':\n\t\t\t\t\treturn 6;\n\t\t\t\tcase 'text':\n\t\t\t\t\treturn 7;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\t/**\r\n   * Delete table row DOM element.\r\n   *\r\n   * @param {Element} arg_row_elem - row TR Element.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'delete_row_elem',\n\t\tvalue: function delete_row_elem(arg_row_elem) {\n\t\t\tvar log_uid = arg_row_elem.getAttribute('data-devapt-log_uid');\n\t\t\tdelete this._elements_cache[log_uid];\n\t\t}\n\t}, {\n\t\tkey: 'apply_filter',\n\t\tvalue: function apply_filter(arg_filter_value, arg_cell_value) {\n\t\t\tvar filter_mode_not = ('' + arg_filter_value).startsWith('NOT ') ? true : false;\n\t\t\tif (filter_mode_not) {\n\t\t\t\treturn ('' + arg_cell_value).search(arg_filter_value.substr(4)) < 0;\n\t\t\t}\n\t\t\treturn ('' + arg_cell_value).search(arg_filter_value) >= 0;\n\t\t}\n\t}, {\n\t\tkey: 'apply_filter_on_row_record',\n\t\tvalue: function apply_filter_on_row_record(arg_row_record) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar match = true;\n\t\t\t_lodash2.default.forEach(this._filters, function (filter) {\n\t\t\t\tif (match && arg_row_record.log.length > filter.index) {\n\t\t\t\t\tvar column_value = arg_row_record.log[filter.index];\n\t\t\t\t\tvar cell_match = _this2.apply_filter(filter.value, column_value);\n\n\t\t\t\t\tmatch = filter.value == '' || cell_match;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// console.log('apply_filter_on_row_record:match %b', match, this._filters, row_record.elem.style.display)\n\n\t\t\tif (match) {\n\t\t\t\targ_row_record.elem.style.display = 'table-row';\n\t\t\t} else {\n\t\t\t\targ_row_record.elem.style.display = 'none';\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Filter a column.\r\n   *\r\n   * @param {array} arg_row_array - row values array.\r\n   * @param {integer} arg_row_index - row index.\r\n   * @param {integer} arg_max_cols - max columns number.\r\n   * \r\n   * @returns {string} - HTML TR string\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_filter_column',\n\t\tvalue: function do_action_filter_column(arg_column_name, arg_filter_value) {\n\t\t\tvar _this3 = this;\n\n\t\t\t// console.log(context + ':do_action_filter_column:column=%s, filter=%s',arg_column_name, arg_filter_value, this._elements_cache)\n\n\t\t\tvar column_index = this.get_column_index(arg_column_name);\n\t\t\tthis._filters[arg_column_name] = { value: arg_filter_value, index: column_index };\n\n\t\t\t_lodash2.default.forEach(this._elements_cache, function (row_record) {\n\t\t\t\t_this3.apply_filter_on_row_record(row_record);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Handle click on TH tags.\r\n   * \r\n   * @param {any} arg_stream_data - object record: { component_name:string,  event_name:string, dom_selector:string, target:object, data:any }.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_click_th',\n\t\tvalue: function do_click_th(arg_stream_data) {\n\t\t\tthis.dispatch_update_state_value_action(['selected_column'], arg_stream_data.target.id);\n\t\t}\n\n\t\t/**\r\n   * Handle selected_column state change.\r\n   * \r\n   * @param {array}       arg_path           - value state path.\r\n   * @param {Immutable.*} arg_previous_value - previous state value.\r\n   * @param {Immutable.*} arg_new_value      - new state value.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_selected_column_change',\n\t\tvalue: function handle_selected_column_change(arg_path, arg_previous_value, arg_new_value) {\n\t\t\tconsole.log(context + ':handle_selected_column_change', arg_path, arg_previous_value, arg_new_value);\n\n\t\t\tif (!arg_previous_value && !arg_new_value) {\n\t\t\t\tconsole.log(context + ':handle_selected_column_change:no previous and no new values', arg_path, arg_previous_value, arg_new_value);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_immutable2.default.is(arg_previous_value, arg_new_value)) {\n\t\t\t\tconsole.log(context + ':handle_selected_column_change:previous value = new value', arg_path, arg_previous_value, arg_new_value);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar new_value = arg_new_value && arg_new_value.toJS() ? arg_new_value.toJS() : undefined;\n\t\t\tif (!_typr2.default.isString(new_value)) {\n\t\t\t\tconsole.warn(context + ':handle_selected_column_change:bad new value string', arg_path, arg_previous_value, arg_new_value);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// TODO\n\t\t}\n\t}]);\n\n\treturn LogsTable;\n}(_table2.default);\n\nexports.default = LogsTable;\n\n\n},{\"../../common/utils/uid\":106,\"./table\":20,\"immutable\":170,\"lodash\":187,\"typr/lib/typr\":218}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n// import T from 'typr/lib/typr'\n// import assert from 'assert'\n\n\nvar _vdomParser = require('vdom-parser');\n\nvar _vdomParser2 = _interopRequireDefault(_vdomParser);\n\nvar _diff = require('virtual-dom/diff');\n\nvar _diff2 = _interopRequireDefault(_diff);\n\nvar _patch = require('virtual-dom/patch');\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nvar _createElement = require('virtual-dom/create-element');\n\nvar _createElement2 = _interopRequireDefault(_createElement);\n\nvar _vnode = require('virtual-dom/vnode/vnode');\n\nvar _vnode2 = _interopRequireDefault(_vnode);\n\nvar _vtext = require('virtual-dom/vnode/vtext');\n\nvar _vtext2 = _interopRequireDefault(_vtext);\n\nvar _htmlToVdom = require('html-to-vdom');\n\nvar _htmlToVdom2 = _interopRequireDefault(_htmlToVdom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// COMMON IMPORTS\n// import Credentials from '../../common/base/credentials'\n\nvar convertHTML = (0, _htmlToVdom2.default)({\n\tVNode: _vnode2.default,\n\tVText: _vtext2.default\n});\n\n// let context = 'browser/components/page'\n\n\n/**\r\n * @file client page class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Page = function () {\n\t/**\r\n  * Create a Page instance.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Page() {\n\t\t_classCallCheck(this, Page);\n\n\t\tthis.target_elem_head = window.document.head;\n\t\tthis.target_elem_body = window.document.body;\n\t\tthis.target_tree_head = undefined;\n\t\tthis.target_tree_body = undefined;\n\t\tthis.target_node_head = undefined;\n\t\tthis.target_node_body = undefined;\n\t}\n\n\t/**\r\n  * Render a page.\r\n  */\n\n\n\t_createClass(Page, [{\n\t\tkey: 'render_html',\n\t\tvalue: function render_html(arg_html) {\n\t\t\tconsole.log('Page.render_html');\n\t\t\t$(document.body).html(arg_html);\n\t\t\t// this.render_html_with_vdom(arg_html)\n\t\t}\n\n\t\t/**\r\n   * Render a page.\r\n   */\n\n\t}, {\n\t\tkey: 'render_html_with_vdom',\n\t\tvalue: function render_html_with_vdom(arg_html) {\n\t\t\tconsole.log('Page.render_html_with_vdom');\n\n\t\t\tif (!this.target_tree) {\n\t\t\t\tconsole.log('Page.render_html_with_vdom:init');\n\n\t\t\t\tthis.target_tree_head = (0, _vdomParser2.default)(this.target_elem_head);\n\t\t\t\tthis.target_tree_body = (0, _vdomParser2.default)(this.target_elem_body);\n\n\t\t\t\tthis.target_node_head = (0, _createElement2.default)(this.target_tree_head);\n\t\t\t\tthis.target_node_body = (0, _createElement2.default)(this.target_tree_body);\n\n\t\t\t\t// console.log('Page.render_html:init:target_node', this.target_node)\n\t\t\t\t// console.log('Page.render_html:init:target_node', this.target_node)\n\t\t\t}\n\n\t\t\tvar new_tree = convertHTML(arg_html);\n\n\t\t\tvar new_tree_head = new_tree.children[0];\n\t\t\tvar new_tree_body = new_tree.children[2];\n\n\t\t\tvar patches_head = (0, _diff2.default)(this.target_tree_head, new_tree_head);\n\t\t\tvar patches_body = (0, _diff2.default)(this.target_tree_body, new_tree_body);\n\n\t\t\tconsole.log('Page.render_html:new_tree_body', new_tree_body);\n\t\t\tconsole.log('Page.render_html:patches_body', patches_body);\n\n\t\t\tthis.target_node_head = (0, _patch2.default)(this.target_node_head, patches_head);\n\t\t\tthis.target_node_body = (0, _patch2.default)(this.target_node_body, patches_body);\n\n\t\t\tthis.target_tree_head = new_tree_head;\n\t\t\tthis.target_tree_body = new_tree_body;\n\n\t\t\tconsole.log('Page.render_html:target_node_body', this.target_node_body);\n\t\t\t// console.log('Page.render_html:target_tree_body', this.target_tree_body)\n\n\t\t\t// $(document.body).html(arg_html)\n\t\t}\n\t}]);\n\n\treturn Page;\n}();\n\nexports.default = Page;\n\n\n},{\"html-to-vdom\":156,\"vdom-parser\":227,\"virtual-dom/create-element\":230,\"virtual-dom/diff\":231,\"virtual-dom/patch\":233,\"virtual-dom/vnode/vnode\":251,\"virtual-dom/vnode/vtext\":253}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/records_table';\n\n/**\r\n * @file UI component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar RecordsTable = function (_Table) {\n\t_inherits(RecordsTable, _Table);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * @extends Table\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction RecordsTable(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, RecordsTable);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (RecordsTable.__proto__ || Object.getPrototypeOf(RecordsTable)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_one_record_table_component = true;\n\n\t\t// this.table_jqo = $(\"#\" + this.get_dom_id())\n\t\t_this.records = {};\n\n\t\tvar state = _this.get_state_js();\n\t\t_this.fields = 'fields' in state ? state.fields : [];\n\t\t_this.labels = 'labels' in state ? state.labels : [];\n\t\t_this.records_key = 'records_key' in state ? state.records_key : 'records';\n\t\t_this.record_key = 'record_key' in state ? state.record_key : 'record_key';\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Update the table with records.\r\n  * \r\n  * @param {objetc} arg_records - datas records, plain object.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(RecordsTable, [{\n\t\tkey: 'update_records',\n\t\tvalue: function update_records(arg_records) {\n\t\t\t// console.log(arg_records, 'table.update_records:arg_records')\n\n\t\t\tvar self = this;\n\n\t\t\tif ((typeof arg_records === 'undefined' ? 'undefined' : _typeof(arg_records)) != \"object\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!(this.records_key in arg_records)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar records_of_key = arg_records[this.records_key];\n\t\t\tif (_typr2.default.isArray(records_of_key)) {\n\t\t\t\trecords_of_key.forEach(function (record) {\n\t\t\t\t\tif (_typr2.default.isString(record) || _typr2.default.isNumber(record)) {\n\t\t\t\t\t\tself.add_record_string(record);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Add one record to the table.\r\n   * \r\n   * @param {string} arg_record_str - datas with one record string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'add_record_string',\n\t\tvalue: function add_record_string(arg_record_str) {\n\t\t\t// console.log(arg_record, 'table.add_record:arg_record')\n\n\t\t\tvar self = this;\n\n\t\t\tif (arg_record_str in this.records) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar row_id = this.get_dom_id() + '_' + arg_record_str;\n\t\t\t// var html = '<tr colspan=\"3\" id=\"' + row_id + '\"><td>' + arg_record_str + '</td></tr>'\n\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\n\t\t\t// APPEND FIRST ROW\n\t\t\tvar tr_element = document.createElement('tr');\n\t\t\ttr_element.setAttribute('colspan', '3');\n\t\t\ttr_element.setAttribute('id', row_id);\n\t\t\ttable_body_elem.appendChild(tr_element);\n\n\t\t\tvar td_element = document.createElement('td');\n\t\t\ttd_element.innerHTML = arg_record_str;\n\t\t\ttr_element.appendChild(td_element);\n\n\t\t\t// APPEND FIELDS ROWS\n\t\t\tthis.fields.forEach(function (field, index) {\n\t\t\t\ttr_element = document.createElement('tr');\n\t\t\t\ttable_body_elem.appendChild(tr_element);\n\n\t\t\t\ttd_element = document.createElement('td');\n\t\t\t\ttd_element.innerHTML = '';\n\t\t\t\ttr_element.appendChild(td_element);\n\n\t\t\t\ttd_element = document.createElement('td');\n\t\t\t\ttd_element.innerHTML = index < self.labels.length ? self.labels[index] : '';\n\t\t\t\ttr_element.appendChild(td_element);\n\n\t\t\t\ttd_element = document.createElement('td');\n\t\t\t\ttd_element.innerHTML = '0';\n\t\t\t\ttd_element.setAttribute('id', row_id + '_' + field);\n\t\t\t\ttr_element.appendChild(td_element);\n\n\t\t\t\t// html += '<tr> <td></td> <td>' + self.labels[index] + '</td> <td id=\"' + row_id + '_' + field + '\">0</td> </tr>'\n\t\t\t});\n\n\t\t\t// $('tbody', this.table_jqo).append(html)\n\n\t\t\tthis.records[arg_record_str] = row_id;\n\t\t}\n\n\t\t/**\r\n   * Update table with records values.\r\n   * \r\n   * @param {array} arg_values - datas values, plain objects array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_values',\n\t\tvalue: function update_values(arg_values) {\n\t\t\t// console.log(arg_values, 'table.update_values')\n\n\t\t\tvar self = this;\n\n\t\t\tif (!arg_values) {\n\t\t\t\tconsole.log(table_id, 'no values', 'table.update_values');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar table_id = this.get_dom_id();\n\n\t\t\t// console.log(arg_values, 'table.update_values')\n\n\t\t\targ_values = Array.isArray(arg_values) ? arg_values : [arg_values];\n\n\t\t\targ_values.forEach(function (values) {\n\t\t\t\tif (values) {\n\t\t\t\t\tself.update_record_values(values);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Update table with one record values.\r\n   * \r\n   * @param {object} arg_record_values - datas values, plain objects.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_record_values',\n\t\tvalue: function update_record_values(arg_record_values) {\n\t\t\t// console.log(context + ':update_record_values:values', arg_record_values)\n\n\t\t\tvar self = this;\n\n\t\t\tif (!arg_record_values || !arg_record_values[this.record_key]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar values_key = arg_record_values[this.record_key];\n\t\t\tif (!(values_key in self.records)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar row_id = self.records[values_key];\n\t\t\t// console.log(row_id, 'table.update_record_values:row_id')\n\n\t\t\tthis.fields.forEach(function (field) {\n\t\t\t\tif (field in arg_record_values) {\n\t\t\t\t\tvar value = arg_record_values[field];\n\t\t\t\t\tif (typeof value == 'number') {\n\t\t\t\t\t\tvalue = value.toFixed();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar field_id = row_id + '_' + field;\n\t\t\t\t\t// $(\"#\" + field_id).text(value)\n\t\t\t\t\tvar element = document.getElementById(field_id);\n\t\t\t\t\telement.textContent = value;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('field not found in record', field, arg_record_values);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn RecordsTable;\n}(_table2.default);\n\nexports.default = RecordsTable;\n\n\n},{\"./table\":20,\"typr/lib/typr\":218}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _html_entities = require('../../common/utils/html_entities');\n\nvar _html_entities2 = _interopRequireDefault(_html_entities);\n\nvar _container = require('../base/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/table';\n\n/**\r\n * @file UI component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Table = function (_Container) {\n\t_inherits(Table, _Container);\n\n\t/**\r\n  * Creates an instance of Table.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * API:\r\n  * \t\t->get_children_component():array - Get view children components.\r\n  * \r\n  * \t\t->ui_items_get_count():integer - Get container items count.\r\n  * \r\n  * \t\t->ui_items_append(arg_items_array, arg_items_count):nothing  - Append tems to the container.\r\n  * \t\t->ui_items_prepend(arg_items_array, arg_items_count):nothing - Prepend tems to the container.\r\n  * \t\t->ui_items_insert_at(arg_index, arg_items_array, arg_items_count):nothing - Insert items at container position index.\r\n  * \t\t->ui_items_replace(arg_items_array, arg_items_count):nothing - Replace container items.\r\n  * \r\n  * \t\t->ui_items_remove_at_index(arg_index):nothing - Remove a row at given position.\r\n  * \t\t->ui_items_remove_first():nothing - Remove a row at first position.\r\n  * \t\t->ui_items_remove_last(arg_count):nothing - Remove a row at last position.\r\n  * \r\n  * \t\t->build_row(arg_row_array, arg_row_index, arg_max_cols):string - Build a table row html tag.\r\n  * \t\t->update_rows(arg_rows_array, arg_options):nothing - Append or prepend a row.\r\n  * \t\t->update_section_collection(arg_collection_def, arg_collection_values):nothing - Update values on a table part.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Table(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Table);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_table_component = true;\n\n\t\t// DEBUG\n\t\t// this.enable_trace()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get view children components.\r\n  * \r\n  * @returns {array} - list of Component.\r\n  */\n\n\n\t_createClass(Table, [{\n\t\tkey: 'get_children_component',\n\t\tvalue: function get_children_component() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!this._children_component) {\n\t\t\t\tthis._children_component = [];\n\n\t\t\t\tvar items = this.get_state_value('items', []);\n\t\t\t\tvar headers = this.get_state_value('headers', []);\n\t\t\t\tvar footers = this.get_state_value('headers', []);\n\t\t\t\t// console.log(context + ':get_children_component:init with items:', items)\n\n\t\t\t\theaders.forEach(function (row) {\n\t\t\t\t\tif (_typr2.default.isArray(row)) {\n\t\t\t\t\t\trow.forEach(function (cell) {\n\t\t\t\t\t\t\tif (_typr2.default.isObject(cell)) {\n\t\t\t\t\t\t\t\tif (cell.is_component) {\n\t\t\t\t\t\t\t\t\t_this2._children_component.push(cell);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (_typr2.default.isString(cell.view)) {\n\t\t\t\t\t\t\t\t\tvar component = window.devapt().ui(cell.view);\n\t\t\t\t\t\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t\t\t\t\t\t_this2._children_component.push(component);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfooters.forEach(function (row) {\n\t\t\t\t\tif (_typr2.default.isArray(row)) {\n\t\t\t\t\t\trow.forEach(function (cell) {\n\t\t\t\t\t\t\tif (_typr2.default.isObject(cell)) {\n\t\t\t\t\t\t\t\tif (cell.is_component) {\n\t\t\t\t\t\t\t\t\t_this2._children_component.push(cell);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (_typr2.default.isString(cell.view)) {\n\t\t\t\t\t\t\t\t\tvar component = window.devapt().ui(cell.view);\n\t\t\t\t\t\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t\t\t\t\t\t_this2._children_component.push(component);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\titems.forEach(function (row) {\n\t\t\t\t\tif (_typr2.default.isArray(row)) {\n\t\t\t\t\t\trow.forEach(function (cell) {\n\t\t\t\t\t\t\tif (_typr2.default.isObject(cell)) {\n\t\t\t\t\t\t\t\tif (cell.is_component) {\n\t\t\t\t\t\t\t\t\t_this2._children_component.push(cell);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (_typr2.default.isString(cell.key)) {\n\t\t\t\t\t\t\t\t\tif (_typr2.default.isString(cell.view)) {\n\t\t\t\t\t\t\t\t\t\tvar component = window.devapt().ui(cell.view);\n\t\t\t\t\t\t\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t\t\t\t\t\t\t_this2._children_component.push(component);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this._children_component;\n\t\t}\n\n\t\t/**\r\n   * Get container items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_get_count',\n\t\tvalue: function ui_items_get_count() {\n\t\t\tvar table_body_elem = document.getElementById(this.get_dom_id());\n\t\t\tvar tr_elems = table_body_elem.children;\n\t\t\treturn tr_elems.length;\n\t\t}\n\n\t\t/**\r\n   * Erase container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_clear',\n\t\tvalue: function ui_items_clear() {\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\n\t\t\twhile (table_body_elem.hasChildNodes()) {\n\t\t\t\tvar tr_elem = table_body_elem.lastChild;\n\t\t\t\tthis.delete_row_elem(tr_elem);\n\t\t\t\ttable_body_elem.removeChild(tr_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Append items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append(arg_items_array, arg_items_count) {\n\t\t\t// console.log(context + ':ui_items_append:arg_items_array', arg_items_array, arg_items_count)\n\n\t\t\tvar arg_options = arg_options ? arg_options : {};\n\t\t\targ_options.mode = 'append';\n\t\t\tthis.update_rows(arg_items_array, arg_options);\n\t\t}\n\n\t\t/**\r\n   * Prepend items to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_prepend',\n\t\tvalue: function ui_items_prepend(arg_items_array, arg_items_count) {\n\t\t\t// console.log(context + ':ui_items_prepend:%s:count=%s:arg_items_array', this.get_name(), arg_items_count, arg_items_array)\n\n\t\t\tvar arg_options = arg_options ? arg_options : {};\n\t\t\targ_options.mode = 'prepend';\n\t\t\tthis.update_rows(arg_items_array, arg_options);\n\t\t}\n\n\t\t/**\r\n   * Replace container items.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_replace',\n\t\tvalue: function ui_items_replace(arg_items_array /*, arg_items_count*/) {\n\t\t\t// console.log(context + ':ui_items_replace:arg_items_array', arg_items_array.length)\n\n\t\t\t// REMOVE ALL EXISTING ROWS\n\t\t\tthis.ui_items_clear();\n\n\t\t\tvar arg_options = arg_options ? arg_options : {};\n\t\t\targ_options.mode = 'replace';\n\t\t\tthis.update_rows(arg_items_array, arg_options);\n\t\t}\n\n\t\t/**\r\n   * Insert items at container position index.\r\n   * \r\n   * @param {intege} arg_index - position index.\r\n   * @param {array} arg_items_array - items array.\r\n   * @param {intege} arg_items_count - items count.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_insert_at',\n\t\tvalue: function ui_items_insert_at(arg_index, arg_items_array, arg_items_count) {\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_items_array), context + ':ui_items_replace:bad items array');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_items_count), context + ':ui_items_replace:bad items count');\n\n\t\t\t// NOT YET IMPLEMENTED\n\t\t}\n\n\t\t/**\r\n   * Remove a row at given position.\r\n   * \r\n   * @param {number} arg_index - row index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\t\t\tif (arg_index < 0 || arg_index >= table_body_elem.children.length) {\n\t\t\t\tconsole.warn(context + ':ui_items_remove_at_index:%s:bad item index=%s', this.get_name(), arg_index);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tr_elem = table_body_elem.children[arg_index];\n\t\t\tthis.delete_row_elem(tr_elem);\n\t\t\ttable_body_elem.removeChild(tr_elem);\n\t\t}\n\n\t\t/**\r\n   * Remove a row at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\t\t\tvar tr_elem = table_body_elem.firstElementChild();\n\t\t\tthis.delete_row_elem(tr_elem);\n\t\t\ttable_body_elem.removeChild(tr_elem);\n\t\t}\n\n\t\t/**\r\n   * Remove a row at last position.\r\n   * \r\n   * @param {integer} arg_count - items count to remove.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() {\n\t\t\tvar arg_count = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n\t\t\t// console.log(context + ':ui_items_remove_last:arg_count', arg_count)\n\n\t\t\tif (arg_count <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\t\t\tvar tr_elems = table_body_elem.children;\n\t\t\tvar last_index = tr_elems.length - arg_count - 1;\n\t\t\tvar row_index = last_index - 1 >= 0 ? last_index - 1 : 0;\n\t\t\tfor (; row_index < tr_elems.length; row_index++) {\n\t\t\t\tvar tr_elem = tr_elems[row_index];\n\t\t\t\tthis.delete_row_elem(tr_elem);\n\t\t\t\ttable_body_elem.removeChild(tr_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Delete table rows DOM elements.\r\n   *\r\n   * @param {array} arg_rows_array - rows Element array.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'delete_row_elem',\n\t\tvalue: function delete_row_elem(arg_row_elem) {}\n\n\t\t/**\r\n   * Build a row cell DOM element.\r\n   *\r\n   * @param {any}      arg_cell_value   - cell value.\r\n   * @param {integer}  arg_row_index    - row index.\r\n   * @param {integer}  arg_column_index - column index.\r\n   * @param {Document} arg_document     - DOM document.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'build_cell',\n\t\tvalue: function build_cell(arg_cell_value, arg_row_index, arg_column_index, arg_document) {\n\t\t\tvar td_elem = arg_document.createElement('td');\n\n\t\t\ttd_elem.setAttribute('data-column-index', arg_column_index);\n\t\t\ttd_elem.innerText = arg_cell_value;\n\n\t\t\treturn td_elem;\n\t\t}\n\n\t\t/**\r\n   * Build a table row DOM element.\r\n   *\r\n   * @param {array} arg_row_array - row values array.\r\n   * @param {integer} arg_row_index - row index.\r\n   * @param {integer} arg_max_cols - max columns number.\r\n   * @param {integer} arg_depth        - path depth.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'build_row',\n\t\tvalue: function build_row(arg_row_array, arg_row_index, arg_max_cols /*, arg_depth*/) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar this_document = this.get_dom_element().ownerDocument;\n\t\t\tvar row_elem = this_document.createElement('tr');\n\t\t\trow_elem.setAttribute('data-row-index', arg_row_index);\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':build_row:rows_index=%i row_array max_cols', arg_row_index, arg_row_array, arg_max_cols)\n\n\t\t\tif (!_typr2.default.isArray(arg_row_array)) {\n\t\t\t\tconsole.warn(context + ':build_row:row_array is not an array at rows_index=%i', arg_row_index, arg_row_array);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\targ_row_array.forEach(function (cell, index) {\n\t\t\t\tif (arg_max_cols && index > arg_max_cols) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar td_elem = _this3.build_cell(cell, arg_row_index, index, this_document);\n\t\t\t\tif (!td_elem) {\n\t\t\t\t\tconsole.warn(context + ':build_row:bad cell element at rows_index=%i at column_index=%i', arg_row_index, index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\trow_elem.appendChild(td_elem);\n\t\t\t});\n\n\t\t\treturn row_elem;\n\t\t}\n\n\t\t/**\r\n   * Build a table row DOM element.\r\n   *\r\n   * @param {Element} arg_body_element - table body element.\r\n   * @param {array}   arg_row_array    - row values array.\r\n   * @param {integer} arg_row_index    - row index.\r\n   * @param {integer} arg_max_rows     - max rows number.\r\n   * @param {integer} arg_max_cols     - max columns number.\r\n   * @param {string}  arg_mode         - fill mode:append/prepend\r\n   * @param {string}  arg_max_rows_action - action on max rows.\r\n   * @param {integer} arg_depth        - path depth.\r\n   * \r\n   * @returns {Element} - TD DOM Element.\r\n   */\n\n\t}, {\n\t\tkey: 'process_row_array',\n\t\tvalue: function process_row_array(arg_body_element, arg_row_array, arg_row_index, arg_max_rows, arg_max_cols, arg_mode, arg_max_rows_action) {\n\t\t\tvar arg_depth = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n\n\t\t\tvar rows_count = arg_body_element.children.length;\n\t\t\tvar row_elem = this.build_row(arg_row_array, arg_row_index, arg_max_cols, arg_depth);\n\t\t\tif (!row_elem) {\n\t\t\t\tconsole.warn(context + ':update_rows:%s:at %i:max cols=%i:bad row element for ', this.get_name(), arg_row_index, arg_max_cols, arg_row_array);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arg_max_rows && rows_count + arg_row_index > arg_max_rows) {\n\t\t\t\tif (arg_max_rows_action == 'remove_bottom') {\n\t\t\t\t\t// TODO\n\t\t\t\t\tconsole.warn('TODO remove_bottom');\n\t\t\t\t} else if (arg_max_rows_action == 'remove_top') {\n\t\t\t\t\t// TODO\n\t\t\t\t\tconsole.warn('TODO remove_top');\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log(context + ':update_rows:rows_index=%i mode=%s', row_index, arg_options.mode)\n\t\t\tif (arg_mode == 'prepend') {\n\t\t\t\targ_body_element.insertBefore(row_elem, arg_body_element.firstChild);\n\t\t\t} else {\n\t\t\t\targ_body_element.appendChild(row_elem);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Append or prepend a row.\r\n   *\r\n   * @param {array} arg_rows_array - rows array.\r\n   * @param {object} arg_options - operation settigs (optional).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_rows',\n\t\tvalue: function update_rows(arg_rows_array, arg_options) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar arg_table_id = this.get_dom_id();\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_table_id), context + ':update_rows:bad table id string:' + arg_table_id);\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_rows_array), context + ':update_rows:bad rows array');\n\n\t\t\tvar state = this.get_state();\n\n\t\t\targ_options = arg_options ? arg_options : {};\n\t\t\targ_options.mode = arg_options.mode ? arg_options.mode : 'append';\n\n\t\t\tvar table_elem = this.get_dom_element();\n\t\t\tvar table_body_elem = table_elem.getElementsByTagName(\"tbody\")[0];\n\n\t\t\tvar max_cols = _typr2.default.isNumber(state.max_columns) ? state.max_columns : undefined;\n\t\t\tvar max_rows = _typr2.default.isNumber(state.max_rows) ? state.max_rows : undefined;\n\t\t\tvar max_rows_action = _typr2.default.isString(state.max_rows_action) ? state.max_rows_action : undefined;\n\n\t\t\tvar fields_count = this.get_state_value('fields_count', 0);\n\t\t\tif (fields_count == 0) {\n\t\t\t\tvar headers = this.get_state_value('headers', []);\n\t\t\t\tif (_typr2.default.isArray(headers) && headers.length > 0) {\n\t\t\t\t\tvar last_headers = headers[headers.length - 1];\n\t\t\t\t\tif (_typr2.default.isArray(last_headers)) {\n\t\t\t\t\t\tfields_count = last_headers.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log( context + ':update_rows:arg_rows_array=', arg_rows_array)\n\t\t\t// console.log( context + ':update_rows:rows_count=%i', rows_count)\n\n\t\t\targ_rows_array.forEach(function (arg_row_array, row_index) {\n\n\t\t\t\tvar row_array = _typr2.default.isArray(arg_row_array) ? arg_row_array : fields_count == 1 ? [arg_row_array] : undefined;\n\t\t\t\tif (!row_array) {\n\t\t\t\t\tconsole.warn(context + ':update_rows:%s:at %i:fields_count=%i:bad row array for ', _this4.get_name(), row_index, fields_count, arg_row_array);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_this4.process_row_array(table_body_elem, row_array, row_index, max_rows, max_cols, arg_options.mode, max_rows_action);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Update values on a table part.\r\n   * \r\n   * @param {object} arg_collection_def - plain object map of collection definition ({collection_name:\"\", collection_dom_id:\"\"}.\r\n   * @param {object} arg_collection_values - plain object map of collection key/value pairs.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_section_collection',\n\t\tvalue: function update_section_collection(arg_collection_def, arg_collection_values) {\n\t\t\tvar table_id = this.get_dom_id();\n\n\t\t\t// console.log(context + ':update_section_collection:%s:def= values=', this.get_name(), arg_collection_def, arg_collection_values)\n\n\t\t\tif (arg_collection_def && arg_collection_def.collection_name && arg_collection_def.collection_dom_id && arg_collection_values) {\n\t\t\t\tvar collection_dom_template_default;\n\t\t\t\tvar collection_dom_template;\n\t\t\t\tvar collection_key_safe;\n\t\t\t\tvar collection_value;\n\t\t\t\tvar collection_id;\n\t\t\t\tvar collection_value_elem;\n\t\t\t\tvar collection_value_html;\n\t\t\t\tvar collection_keys;\n\t\t\t\tvar re;\n\n\t\t\t\tvar _ret = function () {\n\t\t\t\t\tvar arg_collection_name = arg_collection_def.collection_name;\n\n\t\t\t\t\tvar collection_elem = document.getElementById(arg_collection_def.collection_dom_id);\n\t\t\t\t\tif (!collection_elem) {\n\t\t\t\t\t\t// CALLED BY BINDING ON A VIEW WHICH IS NOT VISIBLE\n\t\t\t\t\t\t// console.log(context + ':update_section_collection:' + this.get_name() + ':collection element not found for id [' + arg_collection_def.collection_dom_id + ']')\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: void 0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tcollection_dom_template_default = \"<tr> <td></td> <td> {collection_key} </td> <td id='{collection_id}'>{collection_value}</td> </tr>\";\n\t\t\t\t\tcollection_dom_template = arg_collection_def.collection_dom_template ? _html_entities2.default.decode(arg_collection_def.collection_dom_template) : collection_dom_template_default;\n\n\t\t\t\t\t// DEBUG\n\t\t\t\t\t// console.log(context + ':update_section_collection:arg_collection_def.collection_dom_template=%s', arg_collection_def.collection_dom_template)\n\t\t\t\t\t// console.log(context + ':update_section_collection:collection_dom_template=%s', collection_dom_template)\n\n\t\t\t\t\tcollection_key_safe = undefined;\n\t\t\t\t\tcollection_value = undefined;\n\t\t\t\t\tcollection_id = undefined;\n\t\t\t\t\tcollection_value_elem = undefined;\n\t\t\t\t\tcollection_value_html = undefined;\n\t\t\t\t\tcollection_keys = Object.keys(arg_collection_values);\n\t\t\t\t\tre = /[^a-zA-Z0-9]/gi;\n\n\t\t\t\t\t// console.log('update_metric_collection2:collection=%s keys= jqo=', arg_collection_name, collection_keys, arg_collection_jqo)\n\n\t\t\t\t\tcollection_keys.forEach(function (collection_key) {\n\t\t\t\t\t\tcollection_key_safe = collection_key.replace(re, '_');\n\t\t\t\t\t\t// console.log('update_metric_collection2:collection=%s loop on key=', arg_collection_name, collection_key)\n\n\t\t\t\t\t\tcollection_value = arg_collection_values[collection_key];\n\t\t\t\t\t\tcollection_id = table_id + \"_\" + arg_collection_name + \"_\" + collection_key_safe;\n\t\t\t\t\t\tcollection_value_elem = document.getElementById(collection_id);\n\n\t\t\t\t\t\tif (!collection_value_elem) {\n\t\t\t\t\t\t\t// console.log('update_metric_collection2:collection=%s loop on key=', collection_key)\n\n\t\t\t\t\t\t\tcollection_value_html = collection_dom_template.replace('{collection_key}', collection_key).replace('{collection_id}', collection_id).replace('{collection_value}', collection_value);\n\n\t\t\t\t\t\t\t// console.log(context + ':update_section_collection:html', collection_value_html)\n\n\t\t\t\t\t\t\tvar tr_elem = document.createElement('tr');\n\t\t\t\t\t\t\ttr_elem.innerHTML = collection_value_html;\n\t\t\t\t\t\t\tcollection_elem.parentNode.insertBefore(tr_elem, collection_elem.nextSibling);\n\t\t\t\t\t\t\tcollection_value_elem = document.getElementById(collection_id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcollection_value_elem.textContent = collection_value;\n\t\t\t\t\t});\n\t\t\t\t}();\n\n\t\t\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Table;\n}(_container2.default);\n\nexports.default = Table;\n\n\n},{\"../../common/utils/html_entities\":101,\"../base/container\":6,\"assert\":107,\"typr/lib/typr\":218}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _uid = require('../../common/utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/table_tree';\n\n/**\r\n * @file UI Tree component class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar TableTree = function (_Component) {\n\t_inherits(TableTree, _Component);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction TableTree(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, TableTree);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (TableTree.__proto__ || Object.getPrototypeOf(TableTree)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_table_tree_component = true;\n\n\t\t_this.init();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get container items count.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(TableTree, [{\n\t\tkey: 'ui_items_get_count',\n\t\tvalue: function ui_items_get_count() {}\n\n\t\t/**\r\n   * Erase container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_clear',\n\t\tvalue: function ui_items_clear() {}\n\n\t\t/**\r\n   * Append rows to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Prepend a row.\r\n   * \r\n   * @param {array} arg_items_array - rows array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_prepend',\n\t\tvalue: function ui_items_prepend() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Remove a row at given position.\r\n   * \r\n   * @param {number} arg_index - row index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\t\t}\n\n\t\t/**\r\n   * Remove a row at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {}\n\n\t\t/**\r\n   * Remove a row at last position.\r\n   * \r\n   * @param {integer} arg_count - items count to remove.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() /*arg_count*/{}\n\t\t// console.log(context + ':ui_items_remove_last:arg_count', arg_count)\n\n\t\t/**\r\n   * Init view.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'init',\n\t\tvalue: function init() {\n\t\t\tvar styles = '<style type=\"text/css\">\\n';\n\t\t\tstyles += '#content      { margin-left: 50px; }\\n';\n\t\t\tstyles += '.node_branch  { cursor: default; font-size: 0.8em; line-height:1em; }\\n';\n\t\t\tstyles += '.node_a       { position: relative; cursor: pointer; }\\n';\n\t\t\tstyles += '.node_content { cursor: default; margin-left: 10px; font-site:0,1em; font-size: 0.8em; line-height:1em; }\\n';\n\t\t\tstyles += '</style>\\n';\n\t\t\t$('head').append(styles);\n\t\t}\n\n\t\t/**\r\n   * Update tree.\r\n   * \r\n   * @param {object} arg_tree - tree nodes.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_tree',\n\t\tvalue: function update_tree(arg_tree) {\n\t\t\tvar self = this;\n\n\t\t\tif (!arg_tree) {\n\t\t\t\targ_tree = this.get_state_value('tree', {});\n\t\t\t}\n\t\t\tif (arg_tree.datas) {\n\t\t\t\targ_tree = arg_tree.datas;\n\t\t\t}\n\n\t\t\tconsole.log('tree.update_tree', arg_tree);\n\n\t\t\tvar pollers = this.get_state_value(['bindings', 'services', 0, 'options', 'method', 'pollers'], undefined);\n\t\t\tvar svc_name = this.get_state_value(['bindings', 'services', 0, 'service'], undefined);\n\t\t\tvar method_name = this.get_state_value(['bindings', 'services', 0, 'method'], undefined);\n\t\t\tif (!pollers && svc_name && method_name && this.unbind && this.unbind[svc_name] && this.unbind[svc_name][method_name]) {\n\t\t\t\tthis.unbind[svc_name][method_name]();\n\t\t\t}\n\n\t\t\tvar tree_id = this.get_dom_id();\n\n\t\t\tif (!this.tree_jqo) {\n\t\t\t\tthis.tree_jqo = $('#' + tree_id);\n\t\t\t\tthis.tbody_jqo = $('tbody', this.tree_jqo);\n\t\t\t} else {\n\t\t\t\t$('tr', this.tbody_jqo).remove();\n\t\t\t}\n\n\t\t\tthis.max_depth = this.get_state_value('max_depth', 20);\n\t\t\tthis.max_depth = _typr2.default.isNumber(this.max_depth) ? this.max_depth : 20;\n\n\t\t\tvar collapsed = this.get_state_value('collapsed', false);\n\n\t\t\tvar key = this.get_state_value(['bindings', 'services', 0, 'transform', 'fields', 0, 'name'], undefined);\n\t\t\tvar sub_tree = key ? arg_tree[key] : arg_tree;\n\t\t\tif (!sub_tree) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.render_node(sub_tree, 1, this.get_state_value(label), !collapsed);\n\n\t\t\tif (collapsed) {\n\t\t\t\t$('.node_branch', this.tree_jqo).hide();\n\t\t\t\t$('.node_content', this.tree_jqo).hide();\n\t\t\t\t$('span.node_opened', this.tree_jqo).hide();\n\t\t\t\t$('span.node_closed', this.tree_jqo).show();\n\n\t\t\t\t$('tr').removeClass('expanded').addClass('collapsed').hide();\n\n\t\t\t\t$('tr').filter(function () {\n\t\t\t\t\treturn $(this).data('depth') == 1;\n\t\t\t\t}).show();\n\t\t\t} else {\n\t\t\t\t$('.node_branch', this.tree_jqo).show();\n\t\t\t\t$('.node_content', this.tree_jqo).show();\n\t\t\t\t$('span.node_opened', this.tree_jqo).show();\n\t\t\t\t$('span.node_closed', this.tree_jqo).hide();\n\n\t\t\t\t$('tr').removeClass('collapsed').addClass('expanded').show();\n\t\t\t}\n\n\t\t\t$('a.node_a', this.tbody_jqo).click(function (ev) {\n\t\t\t\t// var el = $(ev.currentTarget)\n\t\t\t\t// var tr = el.closest('tr')\n\t\t\t\tvar tr = $(ev.currentTarget).parent().parent();\n\n\t\t\t\tvar children = self.find_children(tr);\n\t\t\t\t// console.log('a.click:children=', children)\n\n\n\t\t\t\tif (tr.hasClass('collapsed')) {\n\t\t\t\t\t// BECOME EXPANDED\n\t\t\t\t\t$('span.node_closed', tr).hide();\n\t\t\t\t\t$('span.node_opened', tr).show();\n\t\t\t\t\ttr.removeClass('collapsed').addClass('expanded');\n\t\t\t\t\tchildren.removeClass('collapsed').addClass('expanded').show();\n\t\t\t\t\t$('span.node_closed', children).hide();\n\t\t\t\t\t$('span.node_opened', children).show();\n\t\t\t\t} else {\n\t\t\t\t\t// BECOME COLLAPSED\n\t\t\t\t\t$('span.node_closed', tr).show();\n\t\t\t\t\t$('span.node_opened', tr).hide();\n\t\t\t\t\ttr.removeClass('expanded').addClass('collapsed');\n\t\t\t\t\tchildren.removeClass('expanded').addClass('collapsed').hide();\n\t\t\t\t\t$('span.node_closed', children).show();\n\t\t\t\t\t$('span.node_opened', children).hide();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'find_children',\n\t\tvalue: function find_children(arg_tr) {\n\t\t\tvar depth = arg_tr.data('depth');\n\n\t\t\treturn arg_tr.nextUntil($('tr').filter(function () {\n\t\t\t\treturn $(this).data('depth') <= depth;\n\t\t\t}));\n\t\t}\n\n\t\t/**\r\n   * Append a table row\r\n   */\n\n\t}, {\n\t\tkey: 'append_row',\n\t\tvalue: function append_row(arg_key, arg_content, arg_depth, arg_expanded) {\n\t\t\tvar id = 'tr_' + (0, _uid2.default)();\n\t\t\tvar style = 'padding-left:' + arg_depth * 20 + 'px';\n\t\t\t// var style = ''\n\t\t\tvar class_expanded = arg_expanded ? 'expanded' : 'collapsed';\n\n\t\t\tvar html_row = '<tr id=\"' + id + '\" class=\"node_content ' + class_expanded + '\" data-depth=\"' + arg_depth + '\">';\n\t\t\thtml_row += '<td style=\"' + style + '\">' + arg_key + '</td>';\n\t\t\thtml_row += '<td>' + arg_content + '</td>';\n\t\t\thtml_row += '</tr>';\n\n\t\t\tthis.tbody_jqo.append(html_row);\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_expandable_node',\n\t\tvalue: function render_expandable_node(arg_label, arg_depth, arg_expanded) {\n\t\t\tvar id = 'tr_' + (0, _uid2.default)();\n\t\t\tvar style = 'padding-left:' + arg_depth * 20 + 'px';\n\t\t\tvar class_expanded = arg_expanded ? 'expanded' : 'collapsed';\n\n\t\t\tvar str = '';\n\t\t\tstr += '<tr id=\"' + id + '\" class=\"node_branch ' + class_expanded + '\" data-depth=\"' + arg_depth + '\"><td style=\"' + style + '\">';\n\t\t\tstr += '<a class=\"node_a\">';\n\t\t\tstr += '<span class=\"node_closed\">\\u25B9</span>';\n\t\t\tstr += '<span class=\"node_opened\">\\u25BF</span>';\n\t\t\tstr += '<b>' + arg_label + '</b>';\n\t\t\tstr += '</a>';\n\t\t\tstr += '</td><td></td></tr>';\n\n\t\t\tthis.tbody_jqo.append(str);\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_safe_string',\n\t\tvalue: function render_safe_string(arg_value) {\n\t\t\t// console.log('tree.render_safe_string', arg_value)\n\n\t\t\t// arg_value = arg_value.replace('<script>', 'AscriptB').replace('A/scriptB', '\\A/script\\B')\n\t\t\tif (_typr2.default.isString(arg_value) && arg_value.indexOf('<') > -1) {\n\t\t\t\t// console.log('Tree:render_safe_string: value=%s', arg_value)\n\t\t\t\treturn '<code>' + arg_value.replace('<', '&lt;').replace('>', '&gt;') + '</code>';\n\t\t\t}\n\n\t\t\tvar translations = {\n\t\t\t\t'<script>': '!scripta!',\n\t\t\t\t'</script>': '!scriptb!',\n\t\t\t\t'<div>': '!diva!',\n\t\t\t\t'</div>': '!divb!',\n\t\t\t\t'<li>': '!lia!',\n\t\t\t\t'</li>': '!lib!',\n\t\t\t\t'<ul>': '!ula!',\n\t\t\t\t'</ul>': '!ulb!',\n\t\t\t\t'<': '!aaa!',\n\t\t\t\t'>': '!bbb!'\n\t\t\t};\n\t\t\t// arg_value = arg_value ? arg_value.toString().replace('<div>', '!diva!').replace('</div>', '!divb!') : arg_value\n\t\t\t// return arg_value ? arg_value.toString().replace('<li>', '!lia!').replace('</li>', '!lib!').replace('<ul>', '!ula!').replace('</ul>', '!ulb!').replace('<', '!aaa!').replace('>', '!bbb!') : arg_value\n\n\t\t\tif (_typr2.default.isString(arg_value)) {\n\t\t\t\tvar tr = '';\n\t\t\t\tObject.keys(translations).forEach(function (key) {\n\t\t\t\t\ttr = translations[key];\n\t\t\t\t\targ_value = arg_value.replace(key, tr);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error('tree.render_safe_string: value is not a string', arg_value);\n\t\t\t}\n\n\t\t\treturn arg_value;\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_node',\n\t\tvalue: function render_node(arg_value, arg_depth, arg_label, arg_expanded) {\n\t\t\t// console.log('tree.render_node', arg_label)\n\n\t\t\tvar self = this;\n\n\t\t\targ_depth = arg_depth ? arg_depth : 1;\n\t\t\targ_label = arg_label == 0 ? '0' : arg_label;\n\t\t\targ_label = arg_label ? arg_label : 'no name';\n\t\t\targ_label = '' + arg_label;\n\n\t\t\tif (arg_depth > this.max_depth) {\n\t\t\t\tconsole.log('MAX DEPTH ' + this.max_depth + ' is reached');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isString(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with string content', arg_label)\n\t\t\t\tthis.append_row(this.render_safe_string(arg_label), this.render_safe_string(arg_value), arg_depth, arg_expanded);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isNumber(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with number content', arg_label)\n\t\t\t\tthis.append_row(this.render_safe_string(arg_label), arg_value, arg_depth, arg_expanded);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isBoolean(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with boolean content', arg_label)\n\t\t\t\tthis.append_row(this.render_safe_string(arg_label), arg_value ? 'true' : 'false', arg_depth, arg_expanded);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isArray(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with array content', arg_label)\n\n\t\t\t\tif (arg_value.length == 0) {\n\t\t\t\t\tthis.append_row(this.render_safe_string(arg_label), '[]', arg_depth, arg_expanded);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.render_expandable_node(arg_label, arg_depth, arg_expanded);\n\n\t\t\t\ttry {\n\t\t\t\t\targ_value.forEach(function (value, index) {\n\t\t\t\t\t\tself.render_node(value, arg_depth + 1, index, arg_expanded);\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// NOTHING TO DO\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isObject(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with object content', arg_label)\n\n\t\t\t\tthis.render_expandable_node(arg_label, arg_depth, arg_expanded);\n\n\t\t\t\ttry {\n\t\t\t\t\tObject.keys(arg_value).forEach(function (key) {\n\t\t\t\t\t\tself.render_node(arg_value[key], arg_depth + 1, key, arg_expanded);\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// NOTHING TO DO\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isNull(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with null content', arg_label)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.error(arg_value, 'value is unknow, unknow node of type [' + (typeof arg_value === 'undefined' ? 'undefined' : _typeof(arg_value)) + ']');\n\t\t\treturn;\n\t\t}\n\n\t\t/**\r\n   * On bindings refresh.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_refresh',\n\t\tvalue: function do_refresh() {\n\t\t\t// console.log('new state', arg_operands)\n\t\t\t// this.update_tree(arg_operands.datas)\n\t\t\tthis.load();\n\t\t}\n\t}]);\n\n\treturn TableTree;\n}(_component2.default);\n\nexports.default = TableTree;\n\n\n},{\"../../common/utils/uid\":106,\"../base/component\":5,\"assert\":107,\"typr/lib/typr\":218}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _container = require('../base/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/tabs';\n\n/**\r\n * @file UI component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Tabs = function (_Container) {\n\t_inherits(Tabs, _Container);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Tabs(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Tabs);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_tabs_component = true;\n\n\t\t$(_this._dom_element).on('change.zf.tabs', function () {\n\t\t\tvar tab_id = $(_this._dom_element).find('.is-active a').attr('id');\n\t\t\t_this.on_tabs_change(tab_id);\n\t\t});\n\n\t\t// DEBUG\n\t\t// this.enable_trace()\n\t\treturn _this;\n\t}\n\n\t_createClass(Tabs, [{\n\t\tkey: '_update_self',\n\t\tvalue: function _update_self(arg_prev_element, arg_new_element) {}\n\t\t// console.log(context + ':_update_self', arg_prev_element, arg_new_element)\n\n\n\t\t/**\r\n   * Get view children components.\r\n   * \r\n   * @returns {array} - list of Component.\r\n   */\n\n\t}, {\n\t\tkey: 'get_children_component',\n\t\tvalue: function get_children_component() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!this._children_component) {\n\t\t\t\tthis._children_component = [];\n\n\t\t\t\tvar items = this.get_state_value('items', []);\n\t\t\t\t// console.log(context + ':get_children_component:init with items:', items)\n\n\t\t\t\titems.forEach(function (tab) {\n\t\t\t\t\tif (_typr2.default.isObject(tab)) {\n\t\t\t\t\t\tif (_typr2.default.isString(tab.content)) {\n\t\t\t\t\t\t\tvar component = window.devapt().ui(tab.content);\n\t\t\t\t\t\t\tif (component && component.is_component) {\n\t\t\t\t\t\t\t\t_this2._children_component.push(component);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this._children_component;\n\t\t}\n\n\t\t/**\r\n   * Update state with selected tab.\r\n   * \r\n   * @param {string} arg_selected_tab_id - selected tab id.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'on_tabs_change',\n\t\tvalue: function on_tabs_change(arg_selected_tab_id) {\n\t\t\t// console.log(context + ':on_tabs_change:selected=' + arg_selected_tab_id)\n\n\t\t\tvar prev_state = this.get_state();\n\t\t\tvar new_state = prev_state.set('selected_id', arg_selected_tab_id);\n\t\t\t// console.log(context + ':on_tabs_change:selected=' + arg_selected_tab_id, prev_state)\n\t\t\t// console.log(context + ':on_tabs_change:selected=' + arg_selected_tab_id, new_state)\n\n\t\t\t// const action = { type:'ADD_JSON_RESOURCE', resource:this.get_name(), path:this.get_state_path(), json:new_state.toJS() }\n\t\t\t// window.devapt().ui().store.dispatch(action)\n\n\t\t\tthis.dispatch_update_state_action(new_state);\n\t\t}\n\t}]);\n\n\treturn Tabs;\n}(_container2.default);\n\nexports.default = Tabs;\n\n\n},{\"../base/container\":6,\"typr/lib/typr\":218}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/topology';\n\n/**\r\n * @file UI Topology component class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Topology = function (_Component) {\n\t_inherits(Topology, _Component);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Topology(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Topology);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Topology.__proto__ || Object.getPrototypeOf(Topology)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_topology_component = true;\n\n\t\t_this.init();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get container items count.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(Topology, [{\n\t\tkey: 'ui_items_get_count',\n\t\tvalue: function ui_items_get_count() {}\n\n\t\t/**\r\n   * Erase container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_clear',\n\t\tvalue: function ui_items_clear() {}\n\n\t\t/**\r\n   * Append rows to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Prepend a row.\r\n   * \r\n   * @param {array} arg_items_array - rows array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_prepend',\n\t\tvalue: function ui_items_prepend() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Remove a row at given position.\r\n   * \r\n   * @param {number} arg_index - row index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\t\t}\n\n\t\t/**\r\n   * Remove a row at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {}\n\n\t\t/**\r\n   * Remove a row at last position.\r\n   * \r\n   * @param {integer} arg_count - items count to remove.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() /*arg_count*/{}\n\t\t// console.log(context + ':ui_items_remove_last:arg_count', arg_count)\n\n\t\t/**\r\n   * Init view.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'init',\n\t\tvalue: function init() {\n\t\t\tthis.mode = this.get_state_value('mode');\n\t\t\tthis.svc = this.get_state_value('service');\n\t\t}\n\n\t\t/**\r\n   * Update topology graph with physical or logical elements.\r\n   * \r\n   * @param {object} arg_values - service response values.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_topology',\n\t\tvalue: function update_topology(arg_values) {\n\t\t\tvar topology_id = this.get_dom_id();\n\t\t\t// console.log(arg_values, 'topo.update_topology for %s', topology_id)\n\n\t\t\tthis.cy.destroy();\n\t\t\tthis.init_cy();\n\n\t\t\tvar cy = this.cy;\n\t\t\t// if (this.els && this.els.length > 0)\n\t\t\t// {\n\t\t\t// \tconst els_collection = cy.collection(this.els)\n\t\t\t// \tthis.cy.remove(els_collection)\n\t\t\t// }\n\t\t\tcy.reset(); // RESET ZOOM...\n\t\t\t// var h = $('#' + topology_id).css('height')\n\t\t\t$('#' + topology_id).css('margin-top', '100px');\n\t\t\t$('#' + topology_id).css('height', '300px');\n\t\t\t// console.log($('#' + topology_id).css('top'), 'top')\n\n\t\t\tthis.els = [];\n\t\t\tif (this.mode == 'physical') {\n\t\t\t\tthis.els = this.get_physical_els(arg_values);\n\t\t\t} else if (this.mode == 'logical') {\n\t\t\t\tthis.els = this.get_logical_els(arg_values);\n\t\t\t}\n\n\t\t\tcy.add(this.els);\n\t\t\tcy.layout({ name: 'dagre' });\n\t\t\tcy.resize();\n\t\t}\n\n\t\t/**\r\n   * Get physical topology elements.\r\n   * \r\n   * @param {object} arg_values - service response values.\r\n   * \r\n   * @returns {array} - cytoscape graph elements array.\r\n   */\n\n\t}, {\n\t\tkey: 'get_physical_els',\n\t\tvalue: function get_physical_els(arg_values) {\n\t\t\tvar topology_id = this.get_dom_id();\n\t\t\tvar els = [{\n\t\t\t\tdata: { id: 'world', label: 'World' }\n\t\t\t}];\n\t\t\tvar nodes = arg_values.datas.nodes;\n\t\t\tvar nodes_names = Object.keys(nodes);\n\t\t\tnodes_names.forEach(function (node_name) {\n\t\t\t\tvar node = nodes[node_name];\n\t\t\t\tvar node_id = topology_id + '_node_' + node_name;\n\t\t\t\tels.push({\n\t\t\t\t\tdata: { id: node_id, label: node_name }\n\t\t\t\t}, {\n\t\t\t\t\tdata: { source: 'world', target: node_id }\n\t\t\t\t});\n\n\t\t\t\tvar servers = node.servers;\n\t\t\t\tvar servers_names = Object.keys(servers);\n\t\t\t\tservers_names.forEach(function (server_name) {\n\t\t\t\t\t// const server = servers[server_name]\n\t\t\t\t\tvar server_id = topology_id + '_server_' + server_name;\n\t\t\t\t\tels.push({\n\t\t\t\t\t\tdata: { id: server_id, label: server_name }\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdata: { source: node_id, target: server_id }\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn els;\n\t\t}\n\n\t\t/**\r\n   * Get logical topology elements.\r\n   * \r\n   * @param {object} arg_values - service response values.\r\n   * \r\n   * @returns {array} - cytoscape graph elements array.\r\n   */\n\n\t}, {\n\t\tkey: 'get_logical_els',\n\t\tvalue: function get_logical_els(arg_values) {\n\t\t\tif (!arg_values || !arg_values.datas) {\n\t\t\t\tconsole.error(context + ':get_logical_els:bad response:arg_values=', arg_values);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar topology_id = this.get_dom_id();\n\t\t\tvar els = [{\n\t\t\t\tdata: { id: 'world', label: 'World' }\n\t\t\t}];\n\t\t\tvar apps = arg_values.datas.applications;\n\t\t\tvar apps_names = Object.keys(apps);\n\t\t\tapps_names.forEach(function (app_name) {\n\t\t\t\tvar app = apps[app_name];\n\t\t\t\tvar app_id = topology_id + '_app_' + app_name;\n\t\t\t\tels.push({\n\t\t\t\t\tdata: { id: app_id, label: app_name }\n\t\t\t\t}, {\n\t\t\t\t\tdata: { source: 'world', target: app_id }\n\t\t\t\t});\n\n\t\t\t\t// ADD PROVIDED SERVICES\n\t\t\t\tvar provided_services = app.provided_services;\n\t\t\t\tvar provided_services_names = Object.keys(provided_services);\n\t\t\t\tprovided_services_names.forEach(function (provided_service_name) {\n\t\t\t\t\t// const svc = provided_services[provided_service_name]\n\t\t\t\t\tvar svc_id = topology_id + '_provided_svc_' + provided_service_name;\n\t\t\t\t\tels.push({\n\t\t\t\t\t\tdata: { id: svc_id, label: provided_service_name }\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdata: { source: app_id, target: svc_id }\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn els;\n\t\t}\n\t}]);\n\n\treturn Topology;\n}(_component2.default);\n\nexports.default = Topology;\n\n\n},{\"../base/component\":5,\"assert\":107,\"typr/lib/typr\":218}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/components/tree';\n\n/**\r\n * @file UI Tree component class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Tree = function (_Component) {\n\t_inherits(Tree, _Component);\n\n\t/**\r\n  * Creates an instance of Component.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Tree(arg_runtime, arg_state, arg_log_context) {\n\t\t_classCallCheck(this, Tree);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Tree.__proto__ || Object.getPrototypeOf(Tree)).call(this, arg_runtime, arg_state, log_context));\n\n\t\t_this.is_tree_component = true;\n\n\t\t_this.init();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get container items count.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(Tree, [{\n\t\tkey: 'ui_items_get_count',\n\t\tvalue: function ui_items_get_count() {}\n\n\t\t/**\r\n   * Erase container items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_clear',\n\t\tvalue: function ui_items_clear() {}\n\n\t\t/**\r\n   * Append rows to the container.\r\n   * \r\n   * @param {array} arg_items_array - items array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_append',\n\t\tvalue: function ui_items_append() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Prepend a row.\r\n   * \r\n   * @param {array} arg_items_array - rows array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_prepend',\n\t\tvalue: function ui_items_prepend() /*arg_items_array*/{}\n\n\t\t/**\r\n   * Remove a row at given position.\r\n   * \r\n   * @param {number} arg_index - row index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_at_index',\n\t\tvalue: function ui_items_remove_at_index(arg_index) {\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_index), context + ':ui_items_remove_at_index:bad index number');\n\t\t}\n\n\t\t/**\r\n   * Remove a row at first position.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_first',\n\t\tvalue: function ui_items_remove_first() {}\n\n\t\t/**\r\n   * Remove a row at last position.\r\n   * \r\n   * @param {integer} arg_count - items count to remove.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ui_items_remove_last',\n\t\tvalue: function ui_items_remove_last() /*arg_count*/{}\n\t\t// console.log(context + ':ui_items_remove_last:arg_count', arg_count)\n\n\t\t/**\r\n   * Init view.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'init',\n\t\tvalue: function init() {}\n\n\t\t/**\r\n   * Update tree.\r\n   * \r\n   * @param {object} arg_tree - tree nodes.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_tree',\n\t\tvalue: function update_tree(arg_tree) {\n\t\t\tif (arg_tree.datas) {\n\t\t\t\targ_tree = arg_tree.datas;\n\t\t\t}\n\n\t\t\tconsole.log('tree.update_tree', arg_tree);\n\n\t\t\tvar tree_id = this.get_dom_id();\n\t\t\tthis.max_depth = this.get_state_value('max_depth', 20);\n\t\t\tthis.max_depth = _typr2.default.isNumber(this.max_depth) ? this.max_depth : 20;\n\n\t\t\tvar collapsed = this.get_state_value('collapsed', false);\n\n\t\t\tvar html = '';\n\t\t\t// html = '<table><tbody>'\n\t\t\thtml += this.render_node(arg_tree, 1, this.get_state_value('label'));\n\t\t\t// html += '</tbody></table>'\n\t\t\t// console.log('update_tree', html)\n\n\t\t\tvar tree_jqo = $('#' + tree_id);\n\t\t\ttree_jqo.html(html);\n\t\t\tif (collapsed) {\n\t\t\t\t$('div.node_content', tree_jqo).hide();\n\t\t\t\t$('span.node_opened', tree_jqo).hide();\n\t\t\t\t$('span.node_closed', tree_jqo).show();\n\t\t\t} else {\n\t\t\t\t$('div.node_content', tree_jqo).show();\n\t\t\t\t$('span.node_opened', tree_jqo).show();\n\t\t\t\t$('.node_closed', tree_jqo).hide();\n\t\t\t}\n\n\t\t\t$('a.node_a', tree_jqo).click(function (ev) {\n\t\t\t\tvar node = $(ev.currentTarget).parent();\n\n\t\t\t\t$('div.node_content', node).toggle();\n\t\t\t\t$('span.node_opened', node).toggle();\n\t\t\t\t$('span.node_closed', node).toggle();\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_safe_string',\n\t\tvalue: function render_safe_string(arg_value) {\n\t\t\t// console.log('tree.render_safe_string', arg_value)\n\n\t\t\t// arg_value = arg_value.replace('<script>', 'AscriptB').replace('A/scriptB', '\\A/script\\B')\n\t\t\t// if (arg_value.indexOf('<') > -1)\n\t\t\t// {\n\t\t\t// \t// console.log('Tree:render_safe_string: value=%s', arg_value)\n\t\t\t// \treturn '<code>' + arg_value + '</code>'\n\t\t\t// }\n\n\t\t\tvar translations = {\n\t\t\t\t'<script>': '!scripta!',\n\t\t\t\t'</script>': '!scriptb!',\n\t\t\t\t'<div>': '!diva!',\n\t\t\t\t'</div>': '!divb!',\n\t\t\t\t'<li>': '!lia!',\n\t\t\t\t'</li>': '!lib!',\n\t\t\t\t'<ul>': '!ula!',\n\t\t\t\t'</ul>': '!ulb!',\n\t\t\t\t'<': '!aaa!',\n\t\t\t\t'>': '!bbb!'\n\t\t\t};\n\t\t\t// arg_value = arg_value ? arg_value.toString().replace('<div>', '!diva!').replace('</div>', '!divb!') : arg_value\n\t\t\t// return arg_value ? arg_value.toString().replace('<li>', '!lia!').replace('</li>', '!lib!').replace('<ul>', '!ula!').replace('</ul>', '!ulb!').replace('<', '!aaa!').replace('>', '!bbb!') : arg_value\n\n\t\t\tif (_typr2.default.isString(arg_value)) {\n\t\t\t\tvar tr = '';\n\t\t\t\tObject.keys(translations).forEach(function (key) {\n\t\t\t\t\ttr = translations[key];\n\t\t\t\t\targ_value = arg_value.replace(key, tr);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error('tree.render_safe_string: value is not a string', arg_value);\n\t\t\t}\n\n\t\t\treturn arg_value;\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_expandable_node',\n\t\tvalue: function render_expandable_node(arg_label, arg_content, arg_content_is_safe) {\n\t\t\targ_content_is_safe = _typr2.default.isBoolean(arg_content_is_safe) ? arg_content_is_safe : false;\n\t\t\t// console.log('tree.render_expandable_node', arg_label, arg_content_is_safe)\n\n\t\t\tvar str = '';\n\t\t\tstr += '<div class=\"node\">';\n\t\t\tstr += '<a class=\"node_a\">';\n\t\t\tstr += '<span class=\"node_closed\">\\u25B9</span>';\n\t\t\tstr += '<span class=\"node_opened\">\\u25BF</span>';\n\t\t\tstr += '<b>' + arg_label + '</b>';\n\t\t\tstr += '</a>';\n\t\t\tstr += '<div class=\"node_content\">';\n\t\t\tstr += arg_content_is_safe ? arg_content : this.render_safe_string(arg_content);\n\t\t\tstr += '</div>';\n\t\t\tstr += '</div>';\n\n\t\t\treturn str;\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'render_node',\n\t\tvalue: function render_node(arg_value, arg_depth, arg_label) {\n\t\t\t// console.log('tree.render_node', arg_label)\n\n\t\t\tvar self = this;\n\t\t\tvar str = '';\n\n\t\t\targ_depth = arg_depth ? arg_depth : 1;\n\t\t\targ_label = arg_label == 0 ? '0' : arg_label;\n\t\t\targ_label = arg_label ? arg_label : 'no name';\n\n\t\t\tif (arg_depth > this.max_depth) {\n\t\t\t\tconsole.log('MAX DEPTH ' + this.max_depth + ' is reached');\n\t\t\t\treturn '<p>MAX DEPTH ' + this.max_depth + ' is reached</p>';\n\t\t\t}\n\n\t\t\tif (_typr2.default.isString(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with string content', arg_label)\n\t\t\t\targ_value = this.render_safe_string(arg_label) + '=' + this.render_safe_string(arg_value);\n\t\t\t\treturn '<span>' + arg_value + '</span>';\n\t\t\t}\n\n\t\t\tif (_typr2.default.isNumber(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with number content', arg_label)\n\t\t\t\treturn '<span>' + this.render_safe_string(arg_label) + '=' + arg_value + '</span>';\n\t\t\t}\n\n\t\t\tif (_typr2.default.isBoolean(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with boolean content', arg_label)\n\t\t\t\tvar value = arg_value ? 'true' : 'false';\n\t\t\t\treturn '<span>' + this.render_safe_string(arg_label) + '=' + value + '</span>';\n\t\t\t}\n\n\t\t\tif (_typr2.default.isArray(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with array content', arg_label)\n\n\t\t\t\tif (arg_value.length == 0) {\n\t\t\t\t\treturn '<span>' + this.render_safe_string(arg_label) + '=' + '[]' + '</span>';\n\t\t\t\t}\n\n\t\t\t\tif (arg_value.length == 1) {\n\t\t\t\t\treturn '<span>' + this.render_safe_string(arg_label) + '=' + '[' + '</span>' + this.render_node(arg_value[0], arg_depth + 1, '0') + ']';\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\targ_value.forEach(function (value, index) {\n\t\t\t\t\t\tstr += self.render_node(value, arg_depth + 1, index);\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// NOTHING TO DO\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\treturn this.render_expandable_node(arg_label, str, true);\n\t\t\t}\n\n\t\t\tif (_typr2.default.isObject(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with object content', arg_label)\n\n\t\t\t\ttry {\n\t\t\t\t\tObject.keys(arg_value).forEach(function (key) {\n\t\t\t\t\t\tstr += self.render_node(arg_value[key], arg_depth + 1, key);\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// NOTHING TO DO\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\treturn this.render_expandable_node(arg_label, str, true);\n\t\t\t}\n\n\t\t\tif (_typr2.default.isNull(arg_value)) {\n\t\t\t\t// console.log('tree.render_node with null content', arg_label)\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconsole.error(arg_value, 'value is unknow');\n\t\t\treturn '<p>unknow node of type [' + (typeof arg_value === 'undefined' ? 'undefined' : _typeof(arg_value)) + ']</p>';\n\t\t}\n\n\t\t/**\r\n   * On bindings refresh.\r\n   * \r\n   * @param {object} arg_operands - operands plain object.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'on_refresh',\n\t\tvalue: function on_refresh(arg_operands) {\n\t\t\t// console.log('new state', arg_operands)\n\t\t\tthis.update_tree(arg_operands.datas);\n\t\t}\n\t}]);\n\n\treturn Tree;\n}(_component2.default);\n\nexports.default = Tree;\n\n\n},{\"../base/component\":5,\"assert\":107,\"typr/lib/typr\":218}],25:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _logger = require('../../common/loggers/logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @file Console logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar ConsoleLogger = function (_Logger) {\n\t_inherits(ConsoleLogger, _Logger);\n\n\t/**\r\n  * Create a Console Logger instance.\r\n  * \r\n  * @param {boolean} arg_enabled - trace is enabled ?\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction ConsoleLogger(arg_enabled) {\n\t\t_classCallCheck(this, ConsoleLogger);\n\n\t\tvar _this = _possibleConstructorReturn(this, (ConsoleLogger.__proto__ || Object.getPrototypeOf(ConsoleLogger)).call(this, arg_enabled));\n\n\t\t_this.is_logger_console = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Logger DEBUG implementation.\r\n  * \r\n  * @param {array} arg_opds - log record array.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(ConsoleLogger, [{\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self() {\n\t\t\tfor (var _len = arguments.length, arg_opds = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targ_opds[_key] = arguments[_key];\n\t\t\t}\n\n\t\t\tconsole.debug(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self() {\n\t\t\tfor (var _len2 = arguments.length, arg_opds = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\targ_opds[_key2] = arguments[_key2];\n\t\t\t}\n\n\t\t\tconsole.info(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self() {\n\t\t\tfor (var _len3 = arguments.length, arg_opds = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t\t\t\targ_opds[_key3] = arguments[_key3];\n\t\t\t}\n\n\t\t\tconsole.warn(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self() {\n\t\t\tfor (var _len4 = arguments.length, arg_opds = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t\t\t\targ_opds[_key4] = arguments[_key4];\n\t\t\t}\n\n\t\t\tconsole.error(_logger2.default.format(arg_opds));\n\t\t}\n\t}]);\n\n\treturn ConsoleLogger;\n}(_logger2.default);\n\nexports.default = ConsoleLogger;\n\n\n},{\"../../common/loggers/logger\":43}],26:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _logger = require('../../common/loggers/logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _stream = require('../../common/messaging/stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'browser/loggers/stream_logger';\n\n/**\r\n * @file Stream logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar StreamLogger = function (_Logger) {\n\t_inherits(StreamLogger, _Logger);\n\n\t/**\r\n  * Create a Stream Logger instance.\r\n  * \r\n  * @param {Bacon.Bus} arg_stream - stream to send trace.\r\n  * @param {boolean} arg_enabled - trace is enabled ?\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction StreamLogger(arg_stream, arg_enabled) {\n\t\t_classCallCheck(this, StreamLogger);\n\n\t\tvar _this = _possibleConstructorReturn(this, (StreamLogger.__proto__ || Object.getPrototypeOf(StreamLogger)).call(this, arg_enabled));\n\n\t\t_this.is_stream_console = true;\n\n\t\t_this.stream = arg_stream ? arg_stream : new _stream2.default();\n\n\t\tvar max_logs_per_msg = 10;\n\t\tvar delay_per_logs_msg = 100;\n\n\t\tvar limit_cb = function limit_cb(grouped_stream) {\n\t\t\tvar map_cb = function map_cb(values) {\n\t\t\t\t// console.log(values, 'limit.map.values')\n\n\t\t\t\tvar logs_record = {\n\t\t\t\t\tsource: undefined,\n\t\t\t\t\tlogs: []\n\t\t\t\t};\n\n\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\tlogs_record.source = value.source, logs_record.logs.push(value);\n\t\t\t\t});\n\n\t\t\t\t// console.log(logs_record, 'limit.map.logs_record')\n\t\t\t\treturn logs_record;\n\t\t\t};\n\n\t\t\treturn grouped_stream.bufferWithTimeOrCount(delay_per_logs_msg, max_logs_per_msg).map(map_cb);\n\t\t};\n\n\t\tvar key_cb = function key_cb(value) {\n\t\t\t// console.log(value.level, 'value.level')\n\t\t\treturn value.source;\n\t\t};\n\n\t\tvar flatmap_cb = function flatmap_cb(grouped_stream) {\n\t\t\treturn grouped_stream;\n\t\t};\n\n\t\tvar transform = function transform(stream) {\n\t\t\treturn stream.groupBy(key_cb, limit_cb).flatMap(flatmap_cb);\n\t\t};\n\n\t\t_this.stream.set_transformation(transform);\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get logs stream.\r\n  * \r\n  * @return {Stream} - logs stream.\r\n  */\n\n\n\t_createClass(StreamLogger, [{\n\t\tkey: 'get_stream',\n\t\tvalue: function get_stream() {\n\t\t\treturn this.stream;\n\t\t}\n\n\t\t/**\r\n   * Convert log array to log object.\r\n   * \r\n   * @param {array} arg_log_array - log record array (length= )\r\n   * \r\n   * @returns {object} - log record object { ts, level, source, context, instance, group, action, text }\r\n   */\n\n\t}, {\n\t\tkey: 'convert_array_to_object',\n\t\tvalue: function convert_array_to_object(arg_log_array, arg_level, arg_source) {\n\t\t\tif (!_typr2.default.isArray(arg_log_array) || arg_log_array.length < 6) {\n\t\t\t\tconsole.error(context + ':convert_array_to_object:not a valid log array:' + (typeof arg_log_array === 'undefined' ? 'undefined' : _typeof(arg_log_array)), arg_log_array);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// console.log(context + ':convert_array_to_object:', arg_log_array, arg_log_array[3].length)\n\t\t\tif (arg_log_array[3].length == 0) {\n\t\t\t\tvar parts = _typr2.default.isString(arg_log_array[5]) ? arg_log_array[5].split(':') : [];\n\t\t\t\t// console.log(context + ':convert_array_to_object:part 3 = \"\":', arg_log_array[3], arg_log_array[5], parts)\n\n\t\t\t\tif (parts.length > 1) {\n\t\t\t\t\targ_log_array[3] = parts[1];\n\t\t\t\t\targ_log_array[5] = parts.splice(2).join(':');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tts: arg_log_array[0],\n\t\t\t\tlevel: arg_level,\n\t\t\t\tsource: arg_source,\n\t\t\t\tcontext: arg_log_array[1],\n\t\t\t\tinstance: arg_log_array[2],\n\t\t\t\tgroup: arg_log_array[3],\n\t\t\t\taction: arg_log_array[4],\n\t\t\t\ttext: arg_log_array[5] + arg_log_array.splice(6).join(',')\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Logger DEBUG implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self(arg_opds) {\n\t\t\tthis.stream.push(this.convert_array_to_object(arg_opds, 'DEBUG', 'BROWSER'));\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self(arg_opds) {\n\t\t\tthis.stream.push(this.convert_array_to_object(arg_opds, 'INFO', 'BROWSER'));\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self(arg_opds) {\n\t\t\tthis.stream.push(this.convert_array_to_object(arg_opds, 'WARN', 'BROWSER'));\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self(arg_opds) {\n\t\t\tthis.stream.push(this.convert_array_to_object(arg_opds, 'ERROR', 'BROWSER'));\n\t\t}\n\t}]);\n\n\treturn StreamLogger;\n}(_logger2.default);\n\nexports.default = StreamLogger;\n\n\n},{\"../../common/loggers/logger\":43,\"../../common/messaging/stream\":49,\"typr/lib/typr\":218}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _crossroads = require('crossroads');\n\nvar _crossroads2 = _interopRequireDefault(_crossroads);\n\nvar _hasher = require('hasher');\n\nvar _hasher2 = _interopRequireDefault(_hasher);\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _router_state = require('./router_state');\n\nvar _router_state2 = _interopRequireDefault(_router_state);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/router';\n\n/**\r\n * @file Browser navigation router class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Router = function (_RouterState) {\n\t_inherits(Router, _RouterState);\n\n\t/**\r\n  * Create a Router instance.\r\n  * @extends RouterState\r\n  * \r\n  * A Router instance manages a navigation history and update the page on navigation change.\r\n  * Navigation history is an array stored into the Redux store.\r\n  * Actions are:\r\n  * \t\t* display_content(view name, menubar name): update page content with given view and menubar.\r\n  * \t\t* go_backward(): update page with history previous content if available.\r\n  * \t\t* go_forward(): update page with history next content if available.\r\n  * \t\t* clear_history(): reset history array.\r\n  * \r\n  * \tAPI:\r\n  * \t\t->init(arg_home_view_name, arg_home_menubar_name)\r\n  * \t\t->add_handler(arg_route, arg_handler)\r\n  * \t\t->update_hash_self(arg_view_name, arg_menubar_name)\r\n  * \t\t->display_content_self(arg_view_name, arg_menubar_name)\r\n  * \r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Router(arg_log_context) {\n\t\t_classCallCheck(this, Router);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Router.__proto__ || Object.getPrototypeOf(Router)).call(this, log_context));\n\n\t\t_this.is_router = true;\n\n\t\t_this._router_engine = _crossroads2.default;\n\t\t_this._hasher = _hasher2.default;\n\n\t\t// DEBUG\n\t\t// log all routes\n\t\t// this._router_engine.routed.add( (request, data)=>{ console.log('route found', request, data) } ) \n\n\t\t// log all requests that were bypassed / not matched\n\t\t_this._router_engine.bypassed.add(function (request) {\n\t\t\tconsole.warn('route not found', request);\n\t\t});\n\n\t\t(0, _assert2.default)(_types2.default.isObject(_this._state_store), context + ':constructor:bad state_store object');\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Init router.\r\n  * \r\n  * @param {string} arg_home_view_name - Home view name.\r\n  * @param {string} arg_home_menubar_name - Home menubar name.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(Router, [{\n\t\tkey: 'init',\n\t\tvalue: function init(arg_home_view_name, arg_home_menubar_name) {\n\t\t\tvar _this2 = this;\n\n\t\t\t// REGISTER HOME PAGE ROUTE\n\t\t\t// this.add_handler('',\n\t\t\t// \t() => {\n\t\t\t// \t\treturn this.do_action_display_content(arg_home_view_name, arg_home_menubar_name)\n\t\t\t// \t}\n\t\t\t// )\n\n\n\t\t\t// REGISTER IGNORE ROUTE\n\t\t\tthis.add_handler('ignore:{path}', function () {\n\t\t\t\t// NOTHING TODO\n\t\t\t});\n\t\t\tthis.add_handler('ignore_{path}', function () {\n\t\t\t\t// NOTHING TODO\n\t\t\t});\n\n\t\t\t// REGISTER A PAGE ROUTE (view, menubar)\n\t\t\tvar route = 'view\\={view}\\,menubar\\={menubar}';\n\t\t\tthis.add_handler(route, function (arg_view, arg_menubar) {\n\t\t\t\treturn _this2.do_action_display_content(arg_view, arg_menubar);\n\t\t\t});\n\n\t\t\t// SETUP HASHER\n\t\t\tvar parseHash = function parseHash(arg_newHash, arg_oldHash) {\n\t\t\t\t// console.log('Hasher parse cb for new [%s] and old [%s]', arg_newHash, arg_oldHash)\n\n\t\t\t\t// debugger\n\n\t\t\t\t_this2._router_engine.parse(arg_newHash);\n\t\t\t};\n\t\t\t_hasher2.default.prependHash = '';\n\t\t\t_hasher2.default.setHash('/');\n\t\t\t_hasher2.default.initialized.add(parseHash); //parse initial hash\n\t\t\t_hasher2.default.changed.add(parseHash); //parse hash changes\n\t\t\t_hasher2.default.init(); //start listening for history change\n\t\t}\n\n\t\t/**\r\n   * Add a route handler.\r\n   * \r\n   * @param {string|RegExp} arg_route - route.\r\n   * @param {Function} arg_handler - f(args)\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'add_handler',\n\t\tvalue: function add_handler(arg_route, arg_handler) {\n\t\t\t// console.log('Crossroads add route handler for route:', arg_route)\n\n\t\t\tthis._router_engine.addRoute(arg_route, function () {\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\t\targs[_key] = arguments[_key];\n\t\t\t\t}\n\n\t\t\t\t// var hash = Hasher.getHash()\n\n\t\t\t\t// console.log('Crossroads route cb with hash [%s] and args:', hash, args)\n\n\t\t\t\treturn arg_handler(args);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Parse an url and route it.\r\n   * \r\n   * @param {string} arg_url - url to route.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'parse',\n\t\tvalue: function parse(arg_url) {\n\t\t\tvar app_url = this._state_store.get_state().get('app_url', undefined);\n\t\t\targ_url = (app_url.length > 0 && app_url[0] == '/' ? '' : '/') + app_url + arg_url;\n\n\t\t\tif (arg_url.endsWith('/')) {\n\t\t\t\targ_url = arg_url.substr(0, arg_url.length - 1);\n\t\t\t}\n\n\t\t\tthis._router_engine.parse(arg_url);\n\t\t}\n\n\t\t/**\r\n   * Update page url with given view and menubar (update only the hash).\r\n   * \r\n   * @param {string} arg_view_name - view name.\r\n   * @param {string} arg_menubar_name - menubar name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\t// update_hash_self(arg_view_name, arg_menubar_name)\n\t\t// {\n\t\t// \tHasher.changed.active = false\n\t\t// \tHasher.setHash('view=' + arg_view_name + ',menubar=' + arg_menubar_name)\n\t\t// \tHasher.changed.active = true\n\t\t// }\n\n\n\t}, {\n\t\tkey: 'set_hash_if_empty',\n\t\tvalue: function set_hash_if_empty(arg_hash) {\n\t\t\tif (_hasher2.default.getHash() == '') {\n\t\t\t\t_hasher2.default.changed.active = false;\n\t\t\t\t_hasher2.default.setHash(arg_hash);\n\t\t\t\t_hasher2.default.changed.active = true;\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Router;\n}(_router_state2.default);\n\nexports.default = Router;\n\n\n},{\"../../common/utils/types\":105,\"./router_state\":28,\"assert\":107,\"crossroads\":117,\"hasher\":150}],28:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _immutable = require('immutable');\n\nvar _stateable = require('../../common/base/stateable');\n\nvar _stateable2 = _interopRequireDefault(_stateable);\n\nvar _display_command = require('../commands/display_command');\n\nvar _display_command2 = _interopRequireDefault(_display_command);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/router_state';\n\n/**\r\n * Initial route state\r\n */\nvar initial_state_js = {\n\thistory: {\n\t\titems: [],\n\t\tindex: -1\n\t}\n};\n\n/**\r\n * @file Browser navigation router class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar RouterState = function (_Stateable) {\n\t_inherits(RouterState, _Stateable);\n\n\t/**\r\n  * Create a RouterState instance.\r\n  * @extends Stateable\r\n  * @abstract\r\n  * \r\n  * A RouterState instance manages a navigation history state and update the page on navigation change.\r\n  * \r\n  * Navigation history is an array stored into the Redux store.\r\n  * \r\n  * Actions are:\r\n  * \t\t* display_content(view name, menubar name): update page content with given view and menubar.\r\n  * \t\t* go_backward(): update page with history previous content if available.\r\n  * \t\t* go_forward(): update page with history next content if available.\r\n  * \t\t* update_history(arg_history_values): replace history array.\r\n  * \t\t* clear_history(): reset history array.\r\n  * \r\n  * Corresponding method to subclass are:\r\n  * \t\t* display_content_self(view name, menubar name):Promise\r\n  * \t\t* go_backward_self():Promise\r\n  * \t\t* go_forward_self():Promise\r\n  * \r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction RouterState(arg_log_context) {\n\t\t_classCallCheck(this, RouterState);\n\n\t\tvar runtime = window.devapt().runtime();\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\t\tvar default_settings = {};\n\n\t\tvar _this = _possibleConstructorReturn(this, (RouterState.__proto__ || Object.getPrototypeOf(RouterState)).call(this, default_settings, runtime, initial_state_js, log_context));\n\n\t\t_this.is_router_state = true;\n\t\t_this.state_path = ['router'];\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get name.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(RouterState, [{\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn 'router';\n\t\t}\n\n\t\t/**\r\n   * Load and apply a container component configuration.\r\n   * \r\n   * @param {Immutable.Map|undefined} arg_state - component state to load (optional).\r\n   * \r\n   * @returns {nothing} \r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(arg_state) {\n\t\t\tvar state = arg_state ? arg_state : this.get_state();\n\t\t\t_get(RouterState.prototype.__proto__ || Object.getPrototypeOf(RouterState.prototype), 'load', this).call(this, state);\n\n\t\t\t// console.info(context + ':load:loading ' + this.get_name())\n\n\t\t\tif (!state) {\n\t\t\t\tthis.error('load:no available state');\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Handle state changes.\r\n   * \r\n   * @param {Immutable.Map} arg_previous_state - previous state map.\r\n   * @param {Immutable.Map} arg_new_state - new state map.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_state_change',\n\t\tvalue: function handle_state_change(arg_previous_state, arg_new_state) {\n\t\t\tif (!arg_previous_state) {\n\t\t\t\t// console.info(context + ':handle_state_change:update initial items')\n\t\t\t\tthis.do_action_clear_history();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arg_previous_state && arg_new_state && arg_previous_state.has('history') && arg_new_state.has('history')) {\n\t\t\t\tif (arg_previous_state.hasIn(['history', 'items']) && arg_new_state.hasIn(['history', 'items'])) {\n\t\t\t\t\tvar previous_history_items = arg_previous_state.getIn(['history', 'items']);\n\t\t\t\t\tvar new_history_items = arg_new_state.getIn(['history', 'items']);\n\t\t\t\t\tif (!previous_history_items.equals(new_history_items)) {\n\t\t\t\t\t\tvar new_items = new_history_items.toArray().toJS();\n\n\t\t\t\t\t\tif (new_items.length == 0) {\n\t\t\t\t\t\t\tthis.do_action_clear_history();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.do_action_update_history(new_items);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (arg_previous_state.hasIn(['history', 'index']) && arg_new_state.hasIn(['history', 'index'])) {\n\t\t\t\t\tvar previous_history_index = arg_previous_state.getIn(['history', 'index']);\n\t\t\t\t\tvar new_history_index = arg_new_state.getIn(['history', 'index']);\n\t\t\t\t\t// TODO CHECK IMMUTABLE RETURNS A NUMBER\n\t\t\t\t\tif (previous_history_index != new_history_index) {\n\t\t\t\t\t\tthis.do_action_move_history(new_history_index);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Goto the page content with given view (update only the hash).\r\n   * \t\r\n   * @param {string} arg_view_name - view name.\r\n   * @param {string} arg_menubar_name - menubar name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_display_content',\n\t\tvalue: function do_action_display_content(arg_view_name, arg_menubar_name) {\n\t\t\tthis.enter_group('do_action_display_content');\n\n\t\t\tthis.debug('arg_view_name:', arg_view_name);\n\t\t\tthis.debug('arg_menubar_name:', arg_menubar_name);\n\n\t\t\tif (_typr2.default.isString(arg_view_name) || _typr2.default.isString(arg_menubar_name)) {\n\t\t\t\tthis.dispatch_action('display_content', { view: arg_view_name, menubar: arg_menubar_name });\n\t\t\t}\n\n\t\t\tthis.leave_group('do_action_display_content');\n\t\t}\n\n\t\t/**\r\n   * Display history previous content if available.\r\n   *\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_go_backward',\n\t\tvalue: function do_action_go_backward() {\n\t\t\tthis.enter_group('do_action_go_backward');\n\n\t\t\tthis.dispatch_action('go_backward', {});\n\n\t\t\tthis.leave_group('do_action_go_backward');\n\t\t}\n\n\t\t/**\r\n   * Display history next content if available.\r\n   *\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_go_forward',\n\t\tvalue: function do_action_go_forward() {\n\t\t\tthis.enter_group('do_action_go_forward');\n\n\t\t\tthis.dispatch_action('go_forward', {});\n\n\t\t\tthis.leave_group('do_action_go_forward');\n\t\t}\n\n\t\t/**\r\n   * Clear history.\r\n   *\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_clear_history',\n\t\tvalue: function do_action_clear_history() {\n\t\t\tthis.enter_group('do_action_go_forward');\n\n\t\t\tthis.dispatch_action('clear_history', {});\n\n\t\t\tthis.leave_group('do_action_go_forward');\n\t\t}\n\n\t\t/**\r\n   * Update history.\r\n   *\r\n   * @param {array} arg_new_items - history array items.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_update_history',\n\t\tvalue: function do_action_update_history(arg_new_items) {\n\t\t\tthis.enter_group('do_action_go_forward');\n\n\t\t\tthis.debug('arg_new_items', arg_new_items);\n\n\t\t\tthis.dispatch_action('update_history', { values: arg_new_items });\n\n\t\t\tthis.leave_group('do_action_go_forward');\n\t\t}\n\n\t\t/**\r\n   * Move history current position.\r\n   *\r\n   * @param{Number} arg_new_index - history position index.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'do_action_move_history',\n\t\tvalue: function do_action_move_history(arg_new_index) {\n\t\t\tthis.enter_group('do_action_move_history');\n\n\t\t\tthis.debug('arg_new_index', arg_new_index);\n\n\t\t\tthis.dispatch_action('update_history', { index: arg_new_index });\n\n\t\t\tthis.leave_group('do_action_move_history');\n\t\t}\n\n\t\t/**\r\n   * Store actions reducer pure function.\r\n   * \r\n   * @param {object} arg_previous_state - previous state.\r\n   * @param {object} arg_action - store action: { type:'', component:'', ...}\r\n   * \r\n   * @returns {object} - new state\r\n   */\n\n\t}, {\n\t\tkey: 'reduce_action',\n\t\tvalue: function reduce_action(arg_previous_state, arg_action) {\n\t\t\tvar initial_state_js = {};\n\n\t\t\tif (!arg_previous_state) {\n\t\t\t\targ_previous_state = (0, _immutable.fromJS)(initial_state_js);\n\t\t\t}\n\n\t\t\t// console.log(context + ':reduce_action:prev state', arg_previous_state.toJS())\n\n\t\t\tswitch (arg_action.type) {\n\t\t\t\tcase 'display_content':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!_typr2.default.isString(arg_action.view) || !_typr2.default.isString(arg_action.menubar)) {\n\t\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// UPDATE PAGE URL\n\t\t\t\t\t\tthis.update_hash(arg_action.view, arg_action.menubar);\n\n\t\t\t\t\t\t// UPDATE ROUTER STORED STATE\n\t\t\t\t\t\tvar history = arg_previous_state.get('history');\n\t\t\t\t\t\tvar next_state = history.get('items').push({ view: arg_action.view_name, menubar: arg_action.menubar_name });\n\t\t\t\t\t\tnext_state = history.set('index', history.get('index'));\n\n\t\t\t\t\t\t// UPDATE PAGE CONTENT\n\t\t\t\t\t\tthis.display_content(arg_action.view, arg_action.menubar);\n\n\t\t\t\t\t\treturn next_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'go_backward':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _history = arg_previous_state.get('history');\n\t\t\t\t\t\tvar previous_index = _history.get('index');\n\t\t\t\t\t\tif (previous_index > 0) {\n\t\t\t\t\t\t\tvar new_index = previous_index - 1;\n\t\t\t\t\t\t\tvar item = _history.get('items').get(new_index, undefined);\n\t\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\t\tthis.display_content(item.view, item.menubar);\n\n\t\t\t\t\t\t\t\tvar _next_state = _history.set('index', new_index);\n\t\t\t\t\t\t\t\treturn _next_state;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'go_forward':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _history2 = arg_previous_state.get('history');\n\t\t\t\t\t\tvar _previous_index = _history2.get('index');\n\t\t\t\t\t\tif (_previous_index + 1 < _history2.get('items').count()) {\n\t\t\t\t\t\t\tvar _new_index = _previous_index + 1;\n\t\t\t\t\t\t\tvar _item = _history2.get('items').get(_new_index, undefined);\n\t\t\t\t\t\t\tif (_item) {\n\t\t\t\t\t\t\t\tthis.display_content(_item.view, _item.menubar);\n\n\t\t\t\t\t\t\t\tvar _next_state2 = _history2.set('index', _new_index);\n\t\t\t\t\t\t\t\treturn _next_state2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'clear_history':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _next_state3 = arg_previous_state.set('history', (0, _immutable.fromJS)([]));\n\t\t\t\t\t\treturn _next_state3;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'update_history':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar items = arg_previous_state.get('history').concat(arg_action.values);\n\t\t\t\t\t\tvar _next_state4 = arg_previous_state.set('history', items);\n\t\t\t\t\t\treturn _next_state4;\n\t\t\t\t\t}\n\n\t\t\t\tcase 'move_history':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _history3 = arg_previous_state.get('history');\n\t\t\t\t\t\tvar _new_index2 = arg_action.index;\n\t\t\t\t\t\tif (_new_index2 > 0 && _new_index2 < _history3.get('items').count()) {\n\t\t\t\t\t\t\tvar _item2 = _history3.get('items').get(_new_index2, undefined);\n\t\t\t\t\t\t\tif (_item2) {\n\t\t\t\t\t\t\t\tthis.display_content(_item2.view, _item2.menubar);\n\n\t\t\t\t\t\t\t\tvar _next_state5 = _history3.set('index', _new_index2);\n\t\t\t\t\t\t\t\treturn _next_state5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn arg_previous_state;\n\t\t}\n\n\t\t/**\r\n   * Display the page content with given view and menubar.\r\n   * \r\n   * @param {string} arg_view_name - view name\r\n   * @param {string} arg_menubar_name - menubar name\r\n   * \r\n   * @returns {Promise} - Resolved result is a boolean: success or failure\r\n   */\n\n\t}, {\n\t\tkey: 'display_content',\n\t\tvalue: function display_content(arg_view_name, arg_menubar_name) {\n\t\t\tvar arg_breadcrumbs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n\t\t\tthis.enter_group('display_content');\n\n\t\t\tthis.debug('arg_view_name=' + arg_view_name);\n\t\t\tthis.debug('arg_menubar_name=' + arg_menubar_name);\n\t\t\tthis.debug('arg_breadcrumbs=' + arg_breadcrumbs);\n\n\t\t\tvar promise = null;\n\t\t\ttry {\n\t\t\t\tvar cmd_settings = {\n\t\t\t\t\tname: 'router.display_content',\n\t\t\t\t\ttype: 'display',\n\t\t\t\t\tview: arg_view_name,\n\t\t\t\t\tmenubar: arg_menubar_name,\n\t\t\t\t\tbreadcrumbs: arg_breadcrumbs\n\t\t\t\t};\n\t\t\t\tvar cmd = new _display_command2.default(this._runtime, cmd_settings);\n\n\t\t\t\tthis.get_runtime().ui().pipe_display_command(cmd);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e, context);\n\t\t\t\tpromise = Promise.resolve(false);\n\t\t\t}\n\n\t\t\tthis.leave_group('display_content');\n\t\t\treturn promise;\n\t\t}\n\n\t\t/**\r\n   * Update page url with given view and menubar (update only the hash).\r\n   * \r\n   * @param {string} arg_view_name - view name.\r\n   * @param {string} arg_menubar_name - menubar name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_hash',\n\t\tvalue: function update_hash(arg_view_name, arg_menubar_name) {\n\t\t\tthis.enter_group('update_hash');\n\n\t\t\tthis.debug('arg_view_name', arg_view_name);\n\t\t\tthis.debug('arg_menubar_name', arg_menubar_name);\n\n\t\t\ttry {\n\t\t\t\tif (_typr2.default.isFunction(this.update_hash_self)) {\n\t\t\t\t\tthis.update_hash_self(arg_view_name, arg_menubar_name);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e, context);\n\t\t\t\tthis.error(e);\n\t\t\t}\n\n\t\t\tthis.leave_group('update_hash');\n\t\t}\n\t}]);\n\n\treturn RouterState;\n}(_stateable2.default);\n\nexports.default = RouterState;\n\n\n},{\"../../common/base/stateable\":41,\"../commands/display_command\":13,\"immutable\":170,\"typr/lib/typr\":218}],29:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _baconjs = require('baconjs');\n\nvar _baconjs2 = _interopRequireDefault(_baconjs);\n\nvar _transform = require('../../common/utils/transform');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'browser/runtime/service';\n\n/**\r\n * Service operations.\r\n */\nvar DEFAULT_OPS = [{\n\tname: 'ping',\n\toperands: []\n}, {\n\tname: 'get',\n\toperands: []\n}, {\n\tname: 'render',\n\toperands: []\n}, {\n\tname: 'post',\n\toperands: []\n}, {\n\tname: 'subscribe',\n\toperands: []\n},\n\n// REMOTE LOGGERS\n{\n\tname: 'debug',\n\toperands: []\n}, {\n\tname: 'info',\n\toperands: []\n}, {\n\tname: 'warn',\n\toperands: []\n}, {\n\tname: 'error',\n\toperands: []\n},\n\n// CRUD\n{\n\tname: 'read',\n\toperands: []\n}, {\n\tname: 'update',\n\toperands: []\n}, {\n\tname: 'delete',\n\toperands: []\n}, {\n\tname: 'create',\n\toperands: []\n}, {\n\tname: 'patch',\n\toperands: []\n}, {\n\tname: 'list',\n\toperands: []\n}];\n\n/**\r\n * @file client Service class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Service = function () {\n\t/**\r\n  * Create a client Runtime instance.\r\n  * \r\n  * @param {string} arg_svc_name - service name.\r\n  * @param {object} arg_svc_settings - service settiings.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Service(arg_svc_name, arg_svc_settings) {\n\t\t_classCallCheck(this, Service);\n\n\t\tthis.$name = arg_svc_name;\n\t\tthis.is_service = true;\n\n\t\t// MAP OF POLLING TIMERS: name => timer id\n\t\tthis.timers = {};\n\n\t\tthis.load(arg_svc_settings);\n\t}\n\n\t/**\r\n  * Get service name.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(Service, [{\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this.$name;\n\t\t}\n\n\t\t/**\r\n   * Create a timer.\r\n   * \r\n   * @param {string}\targ_timer_name - timer unique name.\r\n   * @param {function} arg_timer_cb - timer callback function.\r\n   * @param {integer} arg_delay - timer interval integer in milliseconds.\r\n   * @param {boolean} arg_force_create - if true delete existing timer and recreate it (default=false).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'create_timer',\n\t\tvalue: function create_timer(arg_timer_name, arg_timer_cb, arg_delay) {\n\t\t\tvar arg_force_create = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_timer_name), context + ':create_timer:bad timer name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(arg_timer_cb), context + ':create_timer:bad timer callback function');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_delay), context + ':create_timer:bad timer delay integer');\n\t\t\t(0, _assert2.default)(_typr2.default.isBoolean(arg_force_create), context + ':create_timer:bad force create boolean');\n\n\t\t\t// console.log('create_timer', arg_timer_name, this.timers)\n\n\t\t\tif (arg_timer_name in this.timers) {\n\t\t\t\t// console.log(context + ':create_timer:timer exists name=' + arg_timer_name)\n\t\t\t\tif (!arg_force_create) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// DELETE EXISTING TIMER\n\t\t\t\t// console.log(context + ':create_timer:delete existing timer name=' + arg_timer_name)\n\t\t\t\tthis.delete_timer(this.timers[arg_timer_name]);\n\t\t\t\tdelete this.timers[arg_timer_name];\n\t\t\t}\n\n\t\t\t// CREATE TIMER\n\t\t\t// console.log(context + ':create_timer:create timer name=' + arg_timer_name)\n\t\t\tthis.timers[arg_timer_name] = setInterval(arg_timer_cb, arg_delay);\n\t\t}\n\n\t\t/**\r\n   * Create a poller for the given socket operation.\r\n   * \r\n   * @param {object} arg_poller_settings - poller settings { name:'...', interval_seconds|interval_milliseconds:number }.\r\n   * @param {object} arg_op_name - service operation name.\r\n   * @param {object} arg_credentials - session credentials.\r\n   * @param {object} arg_socket - service socket.\r\n   * @param {array} arg_op_opds - operation operands (optional)(default=[]).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'create_poller',\n\t\tvalue: function create_poller(arg_poller_settings, arg_op_name, arg_credentials, arg_socket) {\n\t\t\tvar arg_op_opds = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n\n\t\t\tvar self = this;\n\n\t\t\tif (_typr2.default.isObject(arg_poller_settings)) {\n\t\t\t\tvar interval_ms = _typr2.default.isNumber(arg_poller_settings.interval_seconds) ? arg_poller_settings.interval_seconds * 1000 : arg_poller_settings.interval_milliseconds;\n\t\t\t\tif (_typr2.default.isNumber(interval_ms) && _typr2.default.isString(arg_poller_settings.name)) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tconsole.log('create poller for operation:' + arg_op_name, arg_poller_settings.name, interval_ms);\n\n\t\t\t\t\t\tvar payload = {\n\t\t\t\t\t\t\trequest: {\n\t\t\t\t\t\t\t\toperation: arg_op_name,\n\t\t\t\t\t\t\t\toperands: arg_op_opds\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcredentials: arg_credentials\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tself.create_timer(arg_poller_settings.name, function () {\n\t\t\t\t\t\t\t// console.log('GLOBAL SETTINGS:create_timer svc_socket.emit', svc_path, op_name)\n\t\t\t\t\t\t\targ_socket.emit(arg_op_name, payload);\n\t\t\t\t\t\t}, interval_ms, false);\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Delete a timer.\r\n   * \r\n   * @param {any}\targ_timer_id.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'delete_timer',\n\t\tvalue: function delete_timer(arg_timer_id) {\n\t\t\tclearInterval(arg_timer_id);\n\t\t}\n\n\t\t/**\r\n   * Load runtime settings.\r\n   * \r\n   * @param {object} arg_settings - runtime settings.\r\n   * \r\n   * @returns {object} promise\r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(arg_settings) {\n\t\t\tvar _this = this;\n\n\t\t\tvar self = this;\n\n\t\t\t// this.separate_level_1()\n\t\t\t// this.enter_group('load')\n\n\t\t\tconsole.log(context + ':load: name=' + this.$name + ' settings=', arg_settings);\n\n\t\t\tvar ops = DEFAULT_OPS;\n\n\t\t\tif ('operations' in arg_settings) {\n\t\t\t\tops = arg_settings['operations'];\n\t\t\t}\n\n\t\t\tvar pollers_settings = 'pollers' in arg_settings ? arg_settings.pollers : undefined;\n\t\t\tvar timeline_settings = 'timeline' in arg_settings ? arg_settings.timeline : undefined;\n\t\t\t// console.log(context + ':load:settings.pollers=', pollers_settings)\n\n\t\t\tthis.$ops = ops;\n\t\t\tvar svc_path = '/' + this.$name;\n\t\t\tvar svc_socket = io(svc_path);\n\t\t\tself.socket = svc_socket;\n\n\t\t\tthis.$ops.forEach(function (operation) {\n\t\t\t\tvar op_name = operation.name;\n\n\t\t\t\t// REPEAT EVERY xxx MILLISECONDS FOR GLOBAL SETTINGS\n\t\t\t\tif (pollers_settings && op_name in pollers_settings) {\n\t\t\t\t\tvar pollers_op_settings = pollers_settings[op_name];\n\t\t\t\t\t// console.log('service has poller for operation:' + op_name, pollers_op_settings)\n\n\t\t\t\t\t_this.create_poller(pollers_op_settings, op_name, arg_settings.credentials, svc_socket, []);\n\t\t\t\t}\n\n\t\t\t\tself[op_name] = function (method_cfg) {\n\t\t\t\t\t// console.log(context + ':op:%s:%s:cfg=', this.get_name(), op_name, method_cfg)\n\n\t\t\t\t\t// DEFINE REQUEST PAYLOAD\n\t\t\t\t\tvar payload = {\n\t\t\t\t\t\trequest: {\n\t\t\t\t\t\t\toperation: op_name,\n\t\t\t\t\t\t\toperands: [method_cfg]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcredentials: arg_settings.credentials\n\t\t\t\t\t};\n\n\t\t\t\t\t// REPEAT EVERY xxx MILLISECONDS FOR LOCAL SETTINGS\n\t\t\t\t\tif (_typr2.default.isObject(method_cfg) && _typr2.default.isObject(method_cfg.poller)) {\n\t\t\t\t\t\tvar poller_settings = method_cfg.poller;\n\t\t\t\t\t\t_this.create_poller(poller_settings, op_name, arg_settings.credentials, svc_socket, [method_cfg]);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar stream = _baconjs2.default.fromEvent(svc_socket, op_name);\n\n\t\t\t\t\t// DEBOUNCE STREAM\n\t\t\t\t\tif (_typr2.default.isObject(method_cfg) && _typr2.default.isNumber(method_cfg.debounce_milliseconds)) {\n\t\t\t\t\t\tstream = stream.debounceImmediate(method_cfg.debounce_milliseconds);\n\t\t\t\t\t}\n\t\t\t\t\t// self[op_name].in = stream\n\n\t\t\t\t\tstream.onError(function (error) {\n\t\t\t\t\t\tconsole.error(context + 'svc=' + svc_path + ':op_name=' + op_name + ':error=', error);\n\t\t\t\t\t});\n\n\t\t\t\t\t// SEND REQUEST\n\t\t\t\t\tsvc_socket.emit(op_name, payload);\n\n\t\t\t\t\t// RETURN RESPONSE STREAM\n\t\t\t\t\treturn stream;\n\t\t\t\t};\n\n\t\t\t\tself[op_name].timelines = {};\n\t\t\t\t// self[op_name].in = undefined\n\n\n\t\t\t\t// HAS HISTORY\n\t\t\t\tif (timeline_settings && op_name in timeline_settings) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tconsole.log('service has timeline for operation:' + op_name, timeline_settings);\n\n\t\t\t\t\t\tvar timeline_op_settings_array = timeline_settings[op_name];\n\t\t\t\t\t\tif (_typr2.default.isObject(timeline_op_settings_array)) {\n\t\t\t\t\t\t\ttimeline_op_settings_array = [timeline_op_settings_array];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar stream = _baconjs2.default.fromEvent(svc_socket, op_name);\n\n\t\t\t\t\t\ttimeline_op_settings_array.forEach(function (timeline_op_settings) {\n\t\t\t\t\t\t\tif (_typr2.default.isObject(timeline_op_settings) && timeline_op_settings.transform && _typr2.default.isNumber(timeline_op_settings.max) && _typr2.default.isString(timeline_op_settings.name) && _typr2.default.isNumber(timeline_op_settings.interval_seconds)) {\n\t\t\t\t\t\t\t\tself[op_name].timelines[timeline_op_settings.name] = {\n\t\t\t\t\t\t\t\t\tvalues: [],\n\t\t\t\t\t\t\t\t\tprevious_ts: undefined,\n\t\t\t\t\t\t\t\t\tstream: new _baconjs2.default.Bus()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tstream.onValue(function (value) {\n\t\t\t\t\t\t\t\t\tvalue = value.datas ? value.datas : value;\n\n\t\t\t\t\t\t\t\t\tif (_typr2.default.isString(timeline_op_settings.transform) || _typr2.default.isNumber(timeline_op_settings.transform)) {\n\t\t\t\t\t\t\t\t\t\tvar field_name = timeline_op_settings.transform;\n\t\t\t\t\t\t\t\t\t\ttimeline_op_settings.transform = {\n\t\t\t\t\t\t\t\t\t\t\t\"result_type\": \"single\",\n\t\t\t\t\t\t\t\t\t\t\t\"fields\": [{\n\t\t\t\t\t\t\t\t\t\t\t\t\"name\": field_name,\n\t\t\t\t\t\t\t\t\t\t\t\t\"path\": field_name\n\t\t\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar extracted_value = (0, _transform.transform)(timeline_op_settings.transform)(value);\n\t\t\t\t\t\t\t\t\t// console.log(context + ':load:timeline extracted_value=', extracted_value)\n\n\t\t\t\t\t\t\t\t\tvar timeline = self[op_name].timelines[timeline_op_settings.name];\n\t\t\t\t\t\t\t\t\tvar ts = Date.now();\n\t\t\t\t\t\t\t\t\tvar prev_ts = timeline.previous_ts;\n\n\t\t\t\t\t\t\t\t\tif (!prev_ts) {\n\t\t\t\t\t\t\t\t\t\ttimeline.previous_ts = ts;\n\t\t\t\t\t\t\t\t\t\ttimeline.values = [{ ts: ts, value: extracted_value }];\n\t\t\t\t\t\t\t\t\t\ttimeline.stream.push(timeline.values);\n\t\t\t\t\t\t\t\t\t} else if (ts - prev_ts > timeline_op_settings.interval_seconds * 1000) {\n\t\t\t\t\t\t\t\t\t\ttimeline.values.push({ ts: ts, value: extracted_value });\n\t\t\t\t\t\t\t\t\t\ttimeline.previous_ts = ts;\n\n\t\t\t\t\t\t\t\t\t\tif (timeline.values.length > timeline_op_settings.max) {\n\t\t\t\t\t\t\t\t\t\t\tvar too_many = timeline.values.length - timeline_op_settings.max;\n\t\t\t\t\t\t\t\t\t\t\ttimeline.values = timeline.values.slice(too_many);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ttimeline.stream.push(timeline.values);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// this.leave_group('load')\n\t\t\t// this.separate_level_1()\n\t\t}\n\t}]);\n\n\treturn Service;\n}();\n\nexports.default = Service;\n\n\n},{\"../../common/utils/transform\":104,\"assert\":107,\"baconjs\":108,\"typr/lib/typr\":218}],30:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _immutable = require('immutable');\n\nvar _loggable = require('../../common/base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nvar _rendering_default_plugin = require('../../common/default_plugins/rendering_default_plugin');\n\nvar _rendering_default_plugin2 = _interopRequireDefault(_rendering_default_plugin);\n\nvar _rendering_builder = require('../../common/rendering/rendering_builder');\n\nvar _rendering_builder2 = _interopRequireDefault(_rendering_builder);\n\nvar _rendering_plugin = require('../../common/plugins/rendering_plugin');\n\nvar _rendering_plugin2 = _interopRequireDefault(_rendering_plugin);\n\nvar _stream = require('../../common/messaging/stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _ui_factory = require('./ui_factory');\n\nvar _ui_factory2 = _interopRequireDefault(_ui_factory);\n\nvar _ui_rendering = require('./ui_rendering');\n\nvar _ui_rendering2 = _interopRequireDefault(_ui_rendering);\n\nvar _page = require('../components/page');\n\nvar _page2 = _interopRequireDefault(_page);\n\nvar _layout_simple = require('../base/layout_simple');\n\nvar _layout_simple2 = _interopRequireDefault(_layout_simple);\n\nvar _display_command = require('../commands/display_command');\n\nvar _display_command2 = _interopRequireDefault(_display_command);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/ui';\n\n/**\r\n * @file UI interaction class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar UI = function (_Loggable) {\n\t_inherits(UI, _Loggable);\n\n\t/**\r\n  * Create a UI instance.\r\n  * \r\n  * \tAPI:\r\n  * \t\t->constructor(arg_runtime, arg_store)\r\n  * \r\n  * \t\t->is_loaded():boolean - Test if UI is loaded and is ready to process display commands.\r\n  * \t\t\r\n  * \t\t->create_display_command(arg_cmd_settings):DisplayCommand - Create a DisplayCommand instance.\r\n  * \t\t->pipe_display_command(arg_display_command):nothing - Append a display command to the UI commands pipe.\r\n  * \r\n  * \t\t->get_current_layout():Layout - Get current application layout.\r\n  * \t\t->get_resource_description_resolver():function - Get a resolver function to find UI component description.\r\n  * \t\t->get_rendering_function_resolver():function - Get a resolver function to find UI rendering function.\r\n  * \t\t->get_rendering_class_resolver():Class - Get a resolver function to find UI component class.\r\n  * \t\t\r\n  * \t\t->load():nothing - Load plugins.\r\n  * \r\n  * \t\t->get(arg_name):Component - Get a UI component by its name.\r\n  * \t\t->create(arg_name):Promise - Create a UI component.\r\n  * \t\t->create_local(arg_name, arg_component_desc):Component - Create a UI component.\r\n  * \t\t\r\n  * \t\t->register_rendering_plugin(arg_plugin_class):nothing - Register a browser rendering plugin.\r\n  * \t\t->request_middleware(arg_middleware, arg_svc_route):Promise - Request server about middleware rendering.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_store - UI components state store.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction UI(arg_runtime, arg_store) {\n\t\t_classCallCheck(this, UI);\n\n\t\tvar _this = _possibleConstructorReturn(this, (UI.__proto__ || Object.getPrototypeOf(UI)).call(this, context));\n\n\t\t_this.is_ui = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this.store = arg_store;\n\n\t\t_this.classes = {};\n\t\t_this.classes.RenderingPlugin = _rendering_plugin2.default;\n\t\t_this.classes.DefaultRenderingPlugin = _rendering_default_plugin2.default;\n\n\t\t_this._ui_factory = new _ui_factory2.default(arg_runtime, arg_store);\n\t\t_this._ui_rendering = new _ui_rendering2.default(arg_runtime, _this);\n\t\t_this._ui_builder = new _rendering_builder2.default(arg_runtime, _this._ui_rendering._assets_urls_templates, undefined);\n\t\t// this._ui_layout = undefined\n\t\t_this._ui_layout = new _layout_simple2.default(_this._runtime, { name: 'main layout', type: 'simple' });\n\t\t_this._ui_layout._ui = _this;\n\n\t\t_this._rendering_plugins = [];\n\t\t_this._rendering_plugins_counter = 0;\n\t\t_this._rendering_plugins_map = {};\n\t\t_this._ordered_used_plugins_name = [];\n\n\t\t_this.page = {\n\t\t\tmenubar: undefined,\n\t\t\theader: undefined,\n\t\t\tbreadcrumbs: undefined,\n\t\t\tcontent: undefined,\n\t\t\tfooter: undefined\n\t\t};\n\n\t\t_this.body_page = new _page2.default();\n\n\t\t_this._display_command_waiting = [];\n\t\t_this._display_command_timer = undefined;\n\t\t_this._display_commands_pipe = new _stream2.default();\n\t\t_this._display_commands_pipe.subscribe(function (cmd) {\n\t\t\tconsole.log(context + ':pipe_display_command.subscribe:do', cmd.get_name(), cmd);\n\t\t\tcmd.do();\n\t\t});\n\n\t\t// this.enable_trace()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Test if UI is loaded and is ready to process display commands.\r\n  * \r\n  * @returns {boolean} - true:UI is ready to process display commands,false:UI isn't ready.\r\n  */\n\n\n\t_createClass(UI, [{\n\t\tkey: 'is_loaded',\n\t\tvalue: function is_loaded() {\n\t\t\treturn this._rendering_plugins_counter > 0 && this._rendering_plugins_counter == this._rendering_plugins.length;\n\t\t}\n\n\t\t/**\r\n   * Create a DisplayCommand instance.\r\n   * \r\n   * @param {object} arg_cmd_settings - command settings.\r\n   * \r\n   * @returns {DisplayCommand}\r\n   */\n\n\t}, {\n\t\tkey: 'create_display_command',\n\t\tvalue: function create_display_command(arg_cmd_settings) {\n\t\t\treturn new _display_command2.default(this._runtime, arg_cmd_settings);\n\t\t}\n\n\t\t/**\r\n   * Append a display command to the UI commands pipe.\r\n   * If UI isn't ready to process display command, delay append.\r\n   * Commands are pushed into a stream.\r\n   * \r\n   * @param {DisplayCommand} arg_display_command - display command to pipe.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'pipe_display_command',\n\t\tvalue: function pipe_display_command(arg_display_command) {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!(_typr2.default.isObject(arg_display_command) && arg_display_command.is_display_command)) {\n\t\t\t\tconsole.warn(context + ':pipe_display_command:bad display command', arg_display_command);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.is_loaded()) {\n\t\t\t\tconsole.log(context + ':pipe_display_command:UI is not loaded');\n\n\t\t\t\tthis._display_command_waiting.push(arg_display_command);\n\n\t\t\t\tif (!this._display_command_timer) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tconsole.log(context + ':pipe_display_command:create a timer');\n\n\t\t\t\t\t\tvar max_loops = 100;\n\t\t\t\t\t\tvar loop_counter = 0;\n\t\t\t\t\t\tvar finished_cb = function finished_cb() {\n\t\t\t\t\t\t\t++loop_counter;\n\t\t\t\t\t\t\tif (loop_counter > max_loops) {\n\t\t\t\t\t\t\t\tconsole.log(context + ':pipe_display_command:UI is not loaded, delay of 50ms, max loops is reached=', max_loops);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!_this2.is_loaded()) {\n\t\t\t\t\t\t\t\tconsole.log(context + ':pipe_display_command:UI is not loaded, delay of 50ms');\n\n\t\t\t\t\t\t\t\t_this2._display_command_timer = setTimeout(finished_cb, 50);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconsole.log(context + ':pipe_display_command:UI is loaded');\n\t\t\t\t\t\t\t_this2._display_command_timer = undefined;\n\t\t\t\t\t\t\tvar cmd = _this2._display_command_waiting.shift();\n\t\t\t\t\t\t\twhile (cmd) {\n\t\t\t\t\t\t\t\tconsole.log(context + ':pipe_display_command:shift cmd=', cmd.get_name(), cmd);\n\t\t\t\t\t\t\t\t_this2._display_commands_pipe.push(cmd);\n\t\t\t\t\t\t\t\tcmd = _this2._display_command_waiting.shift();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t_this2._display_command_timer = setTimeout(finished_cb, 50);\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log(context + ':pipe_display_command:UI is already loaded', arg_display_command.get_name(), arg_display_command);\n\t\t\tthis._display_commands_pipe.push(arg_display_command);\n\t\t}\n\n\t\t/**\r\n   * Get current application layout.\r\n   * \r\n   * @returns {Layout}\r\n   */\n\n\t}, {\n\t\tkey: 'get_current_layout',\n\t\tvalue: function get_current_layout() {\n\t\t\treturn this._ui_layout;\n\t\t}\n\n\t\t/**\r\n   * Get a resolver function to find UI component description.\r\n   * \r\n   * @returns {function} - (string)=>Immutable.Map|undefined.\r\n   */\n\n\t}, {\n\t\tkey: 'get_resource_description_resolver',\n\t\tvalue: function get_resource_description_resolver() {\n\t\t\tvar _this3 = this;\n\n\t\t\treturn function (arg_name) {\n\t\t\t\tvar arg_collection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\t\t\tif (_typr2.default.isString(arg_collection)) {\n\t\t\t\t\tvar result = _this3._ui_factory.find_component_desc(_this3.store.get_state(), arg_name, [arg_collection]);\n\t\t\t\t\t// console.log('get_resource_description_resolver:name=%s,collection=%s', arg_name, arg_collection, result)\n\t\t\t\t\treturn result.toJS();\n\t\t\t\t}\n\n\t\t\t\tvar collections = ['views', 'menubars'];\n\t\t\t\tvar index = 0;\n\t\t\t\twhile (collections.length > index) {\n\t\t\t\t\tvar _result = _this3._ui_factory.find_component_desc(_this3.store.get_state(), arg_name, [collections[index]]);\n\t\t\t\t\tif (_result) {\n\t\t\t\t\t\t// console.log('get_resource_description_resolver:name=%s,collection=%s', arg_name, collections[index], result)\n\t\t\t\t\t\treturn _result.toJS();\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Get a resolver function to find UI rendering function.\r\n   * \r\n   * @returns {function} - (string)=>function.\r\n   */\n\n\t}, {\n\t\tkey: 'get_rendering_function_resolver',\n\t\tvalue: function get_rendering_function_resolver() {\n\t\t\tvar _this4 = this;\n\n\t\t\treturn function (arg_type) {\n\t\t\t\t// console.log(context + ':get_rendering_function_resolver():type=' + arg_type, this._ordered_used_plugins_name, this._rendering_plugins_map)\n\n\t\t\t\tvar not_found = true;\n\t\t\t\tvar index = 0;\n\t\t\t\tvar plugin = undefined;\n\t\t\t\tvar f = undefined;\n\t\t\t\twhile (_this4._ordered_used_plugins_name.length > index && not_found) {\n\t\t\t\t\tvar plugin_name = _this4._ordered_used_plugins_name[index];\n\t\t\t\t\tif (plugin_name in _this4._rendering_plugins_map) {\n\t\t\t\t\t\tplugin = _this4._rendering_plugins_map[plugin_name];\n\n\t\t\t\t\t\tf = plugin.find_rendering_function(arg_type);\n\t\t\t\t\t\tif (_typr2.default.isFunction(f)) {\n\t\t\t\t\t\t\tnot_found = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// console.log(context + ':get_rendering_function_resolver():type=' + arg_type + ' iterate on plugin=%s, found=%b, function=', plugin.get_name(), not_found, f)\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\n\t\t\t\tif (!f) {\n\t\t\t\t\tconsole.warn(context + ':get_rendering_function_resolver:resolver:type not found for [%s] in plugins [%s]', arg_type, _this4._ordered_used_plugins_name.toString());\n\t\t\t\t}\n\n\t\t\t\treturn f;\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Get a resolver function to find UI component class.\r\n   * \r\n   * @returns {Class} - (string)=>Class.\r\n   */\n\n\t}, {\n\t\tkey: 'get_rendering_class_resolver',\n\t\tvalue: function get_rendering_class_resolver() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn function (arg_type) {\n\t\t\t\t// console.log(context + ':get_rendering_class_resolver():type=' + arg_type, this._ordered_used_plugins_name, this._rendering_plugins_map)\n\n\t\t\t\tvar not_found = true;\n\t\t\t\tvar index = 0;\n\t\t\t\tvar plugin = undefined;\n\t\t\t\tvar c = undefined;\n\t\t\t\twhile (_this5._ordered_used_plugins_name.length > index && not_found) {\n\t\t\t\t\tvar plugin_name = _this5._ordered_used_plugins_name[index];\n\t\t\t\t\tif (plugin_name in _this5._rendering_plugins_map) {\n\t\t\t\t\t\tplugin = _this5._rendering_plugins_map[plugin_name];\n\n\t\t\t\t\t\tc = plugin.get_feature_class(arg_type);\n\t\t\t\t\t\tif (_typr2.default.isFunction(c)) {\n\t\t\t\t\t\t\tnot_found = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// console.log(context + ':get_rendering_class_resolver():type=' + arg_type + ' iterate on plugin=%s, found=%b, class=', plugin.get_name(), not_found, c)\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t\treturn c;\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Load plugins.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load() {\n\t\t\tvar _this6 = this;\n\n\t\t\t// this._ui_layout = new LayoutSimple(this._runtime, {name:'main layout', type:'simple'})\n\n\t\t\t// LOAD PLUGINS CLASSES\n\t\t\t// console.log('LOAD PLUGINS CLASSES:name=DefaultRenderingPlugin')\n\t\t\tthis.register_rendering_plugin(_rendering_default_plugin2.default);\n\t\t\tthis._rendering_plugins_counter += 1;\n\n\t\t\tvar plugins_urls = this.store.get_state().get('plugins_urls', (0, _immutable.fromJS)({})).toJS();\n\t\t\tvar ordered_plugins = this.store.get_state().get('used_plugins', (0, _immutable.fromJS)([])).toJS();\n\t\t\tthis._ordered_used_plugins_name = ordered_plugins;\n\n\t\t\t_lodash2.default.forEach(ordered_plugins, function (plugin_name) {\n\t\t\t\tif (plugin_name in plugins_urls) {\n\t\t\t\t\t_this6._rendering_plugins_counter += 1;\n\n\t\t\t\t\tvar url = plugins_urls[plugin_name];\n\t\t\t\t\tvar url_src = _this6._ui_rendering.get_asset_url('plugins/' + url, 'script', _this6._runtime.session_credentials);\n\n\t\t\t\t\t// console.log('LOAD PLUGINS CLASSES:name=%s,url=%s', plugin_name, url_src)\n\n\t\t\t\t\t_this6._ui_rendering.create_dom_url_element(document.body, 'script', 'js-' + plugin_name, url_src, 'text/javascript');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Get a UI component by its name.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * \r\n   * @returns {Component}\r\n   */\n\n\t}, {\n\t\tkey: 'get',\n\t\tvalue: function get(arg_name) {\n\t\t\treturn this._ui_factory.get(arg_name);\n\t\t}\n\n\t\t/**\r\n   * Test a UI component by its name.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has',\n\t\tvalue: function has(arg_name) {\n\t\t\treturn this._ui_factory.has(arg_name);\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * \r\n   * @returns {Promise} - Promise of a Component instance.\r\n   */\n\n\t}, {\n\t\tkey: 'create',\n\t\tvalue: function create(arg_name) {\n\t\t\tvar component_promise = this._ui_factory.create(arg_name);\n\t\t\treturn component_promise;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * @param {object} arg_component_desc - component description.\r\n   * \r\n   * @returns {Component} - Component instance.\r\n   */\n\n\t}, {\n\t\tkey: 'create_local',\n\t\tvalue: function create_local(arg_name, arg_component_desc) {\n\t\t\tvar component = this._ui_factory.create_local(arg_name, arg_component_desc);\n\t\t\treturn component;\n\t\t}\n\n\t\t/**\r\n   * Register a browser rendering plugin.\r\n   * \r\n   * @param{RenderingPlugin} arg_plugin - rendering plugin.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_rendering_plugin',\n\t\tvalue: function register_rendering_plugin(arg_plugin_class) {\n\t\t\tif (!arg_plugin_class) {\n\t\t\t\tconsole.warn(context + ':register_rendering_browser:bad plugin class', arg_plugin_class);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar manager = {\n\t\t\t\tis_plugins_manager: true\n\t\t\t};\n\t\t\tvar plugin = new arg_plugin_class(this._runtime, manager);\n\t\t\tplugin.find_rendering_function = function (type) {\n\t\t\t\tvar f = arg_plugin_class.find_rendering_function(type);\n\t\t\t\treturn f;\n\t\t\t};\n\n\t\t\tconsole.log(context + ':register_rendering_browser:plugin=' + plugin.get_name());\n\n\t\t\tthis._rendering_plugins.push(plugin);\n\t\t\tthis._rendering_plugins_map[plugin.get_name()] = plugin;\n\t\t}\n\n\t\t/**\r\n   * Request server about middleware rendering.\r\n   * \r\n   * @param {string} arg_middleware - middleware name.\r\n   * @param {string} arg_svc_route  - requested route.\r\n   * \r\n   * @returns {Promise} - Promise of a RenderingResult instance.\r\n   */\n\n\t}, {\n\t\tkey: 'request_middleware',\n\t\tvalue: function request_middleware(arg_middleware, arg_svc_route) {\n\t\t\tthis.enter_group('request_middleware:middleware=' + arg_middleware + ' route=' + arg_svc_route);\n\n\t\t\tvar promise = this._runtime.register_service(arg_middleware).then(function (service) {\n\t\t\t\t// console.log(context + ':render_with_middleware:get rendering for ' + arg_cmd.url)\n\t\t\t\treturn service.get({ route: arg_svc_route });\n\t\t\t}, function (reason) {\n\t\t\t\tconsole.error(context + ':render_with_middleware:error 0', reason);\n\t\t\t}).then(function (stream) {\n\t\t\t\t// console.log(context + ':render_with_middleware:get listen stream for ' + arg_cmd.url)\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tstream.onValue(function (response) {\n\t\t\t\t\t\tresolve(response.datas);\n\t\t\t\t\t});\n\t\t\t\t\tstream.onError(function (reason) {\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, function (reason) {\n\t\t\t\tconsole.error(context + ':render_with_middleware:error 1 for ' + arg_svc_route, reason);\n\t\t\t}).catch(function (reason) {\n\t\t\t\tconsole.error(context + ':render_with_middleware:error for ' + arg_svc_route, reason);\n\t\t\t});\n\n\t\t\tthis.leave_group('request_middleware:async');\n\t\t\treturn promise;\n\t\t}\n\t}]);\n\n\treturn UI;\n}(_loggable2.default);\n\nexports.default = UI;\n\n\n},{\"../../common/base/loggable\":38,\"../../common/default_plugins/rendering_default_plugin\":42,\"../../common/messaging/stream\":49,\"../../common/plugins/rendering_plugin\":52,\"../../common/rendering/rendering_builder\":67,\"../base/layout_simple\":9,\"../commands/display_command\":13,\"../components/page\":18,\"./ui_factory\":31,\"./ui_rendering\":32,\"immutable\":170,\"lodash\":187,\"typr/lib/typr\":218}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _immutable = require('immutable');\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _loggable = require('../../common/base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _container = require('../base/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _table = require('../components/table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nvar _logs_table = require('../components/logs_table');\n\nvar _logs_table2 = _interopRequireDefault(_logs_table);\n\nvar _attributes_table = require('../components/attributes_table');\n\nvar _attributes_table2 = _interopRequireDefault(_attributes_table);\n\nvar _dock = require('../components/dock');\n\nvar _dock2 = _interopRequireDefault(_dock);\n\nvar _tabs = require('../components/tabs');\n\nvar _tabs2 = _interopRequireDefault(_tabs);\n\nvar _tree = require('../components/tree');\n\nvar _tree2 = _interopRequireDefault(_tree);\n\nvar _table_tree = require('../components/table_tree');\n\nvar _table_tree2 = _interopRequireDefault(_table_tree);\n\nvar _topology = require('../components/topology');\n\nvar _topology2 = _interopRequireDefault(_topology);\n\nvar _records_table = require('../components/records_table');\n\nvar _records_table2 = _interopRequireDefault(_records_table);\n\nvar _inputField = require('../components/input-field');\n\nvar _inputField2 = _interopRequireDefault(_inputField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import _ from 'lodash'\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/ui_factory';\nvar DEBUG_TRACE_FIND_STATE = false;\n\n/**\r\n * @file UI factory class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar UIFactory = function (_Loggable) {\n\t_inherits(UIFactory, _Loggable);\n\n\t/**\r\n  * Create a UI factory instance.\r\n  * \r\n  * \tAPI:\r\n  * \t\t->constructor(arg_runtime, arg_store)\r\n  * \t\t->get(arg_name):Component - Get a UI component by its name.\r\n  * \t\t->create(arg_name):Component - Create a UI component.\r\n  * \t\t->find_component_desc(arg_state, arg_name, arg_state_path = []):Immutable.Map|undefined - Find a UI component state.\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_store - UI components state store.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction UIFactory(arg_runtime, arg_store) {\n\t\t_classCallCheck(this, UIFactory);\n\n\t\tvar _this = _possibleConstructorReturn(this, (UIFactory.__proto__ || Object.getPrototypeOf(UIFactory)).call(this, context));\n\n\t\t_this.is_ui_factory = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this._store = arg_store;\n\t\t_this._cache = {};\n\t\t_this._state_by_path = {};\n\n\t\t// this.update_trace_enabled()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get a UI component by its name.\r\n  * \r\n  * @param {string} arg_name - component name.\r\n  * \r\n  * @returns {Component}\r\n  */\n\n\n\t_createClass(UIFactory, [{\n\t\tkey: 'get',\n\t\tvalue: function get(arg_name) {\n\t\t\tif (arg_name in this._cache) {\n\t\t\t\treturn this._cache[arg_name];\n\t\t\t}\n\n\t\t\treturn this.create_local(arg_name);\n\t\t}\n\n\t\t/**\r\n   * Test a UI component by its name.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has',\n\t\tvalue: function has(arg_name) {\n\t\t\treturn arg_name in this._cache;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component with local cache and state.\r\n   * \r\n   * @param {string} arg_component_name - component name.\r\n   * @param {object} arg_component_desc - component description (optional, default:undefined).\r\n   * \r\n   * @returns {Component} - Component instance\r\n   */\n\n\t}, {\n\t\tkey: 'create_local',\n\t\tvalue: function create_local(arg_component_name) {\n\t\t\tvar arg_component_desc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\t\tthis.enter_group('create_local:component name=' + arg_component_name);\n\n\t\t\tvar state_path = undefined;\n\t\t\tvar component_desc = arg_component_desc ? arg_component_desc.toJS ? arg_component_desc : (0, _immutable.fromJS)(arg_component_desc) : undefined;\n\n\t\t\t// SEARCH DESCRIPTION INTO CACHE\n\t\t\tif (!component_desc) {\n\t\t\t\t// GET APPLICATION STATE AND INIT APPLICATION STATE PATH\n\t\t\t\tvar current_app_state = this._store.get_state();\n\t\t\t\tstate_path = ['views'];\n\t\t\t\tthis.debug('create_local:search in views for ' + arg_component_name);\n\n\t\t\t\tcomponent_desc = this.find_component_desc(current_app_state, arg_component_name, state_path);\n\t\t\t\tif (!component_desc) {\n\t\t\t\t\tthis.debug('create_local:search in menubars for ' + arg_component_name);\n\t\t\t\t\tstate_path = ['menubars'];\n\t\t\t\t\tcomponent_desc = this.find_component_desc(current_app_state, arg_component_name, state_path);\n\n\t\t\t\t\tif (!component_desc) {\n\t\t\t\t\t\tthis.debug('create_local:state not found in views/menubars for ' + arg_component_name);\n\t\t\t\t\t\tthis.debug('create_local:state_path', state_path);\n\n\t\t\t\t\t\tthis.leave_group('create_local:component description not found name=' + arg_component_name);\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar component = this.create_instance(arg_component_name, component_desc, state_path);\n\n\t\t\tthis.leave_group('create_local:component created for name=' + arg_component_name);\n\t\t\treturn component;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_component_name - component name.\r\n   * @param {object} arg_component_desc - component description.\r\n   * @param {array}  arg_state_path     - component state path.\r\n   * \r\n   * @returns {Component|undefined} - Component instance\r\n   */\n\n\t}, {\n\t\tkey: 'create_instance',\n\t\tvalue: function create_instance(arg_component_name, arg_component_desc, arg_state_path) {\n\t\t\tthis.enter_group('create_instance:component name=' + arg_component_name);\n\n\t\t\tvar mix = this.create_instance_mix(arg_component_name, arg_component_desc, arg_state_path);\n\n\t\t\tthis.leave_group('create_instance:component created for name=' + arg_component_name);\n\t\t\treturn mix.component;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_component_name - component name.\r\n   * @param {object} arg_component_desc - component description.\r\n   * @param {array}  arg_state_path     - component state path.\r\n   * \r\n   * @returns {Promise} - Component instance\r\n   */\n\n\t}, {\n\t\tkey: 'create_instance_promise',\n\t\tvalue: function create_instance_promise(arg_component_name, arg_component_desc, arg_state_path) {\n\t\t\tthis.enter_group('create_instance_promise:component name=' + arg_component_name);\n\n\t\t\tvar mix = this.create_instance_mix(arg_component_name, arg_component_desc, arg_state_path);\n\n\t\t\tthis.leave_group('create_instance_promise:component created for name=' + arg_component_name);\n\t\t\treturn mix.promise;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_component_name - component name.\r\n   * @param {object} arg_component_desc - component description.\r\n   * @param {array}  arg_state_path     - component state path.\r\n   * \r\n   * @returns {object} - { component:Component, promise:Promise}\r\n   */\n\n\t}, {\n\t\tkey: 'create_instance_mix',\n\t\tvalue: function create_instance_mix(arg_component_name, arg_component_desc, arg_state_path) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.enter_group('create_instance_mix:component name=' + arg_component_name);\n\n\t\t\t// REGISTER COMPONENT APPLICATION STATE PATH\n\t\t\tvar state_path = arg_state_path ? arg_state_path : arg_component_desc.get('type') == 'menubar' ? ['menubars', arg_component_name] : ['views', arg_component_name];\n\t\t\tthis._state_by_path[arg_component_name] = state_path;\n\t\t\tthis._state_by_path[arg_component_name].push('state');\n\n\t\t\t// GET COMPONENT TYPE\n\t\t\tvar type = arg_component_desc.has('browser_type') ? arg_component_desc.get('browser_type') : arg_component_desc.get('type');\n\t\t\t(0, _assert2.default)(_types2.default.isString(type), context + ':create:bad component desctription type string for ' + arg_component_name);\n\n\t\t\t// GET COMPONENT STATE\n\t\t\tvar comp_state = arg_component_desc.get('state');\n\t\t\tcomp_state = comp_state.set('name', arg_component_name);\n\t\t\tcomp_state = comp_state.set('type', type);\n\t\t\tcomp_state = comp_state.set('state_path', (0, _immutable.fromJS)(state_path));\n\t\t\t// console.log('ui:create:path,state:', state_path, comp_state)\n\n\t\t\t// CREATE COMPONENT INSTANCE\n\t\t\tvar component_class = this._runtime.ui().get_rendering_class_resolver()(type);\n\t\t\tif (!component_class) {\n\t\t\t\tcomponent_class = this.get_component_class(type);\n\t\t\t}\n\t\t\tif (!component_class) {\n\t\t\t\tvar msg = 'create:error:bad found component class for ' + arg_component_name + ' type=' + type;\n\t\t\t\tthis.error(msg);\n\t\t\t\tthis.leave_group(msg);\n\t\t\t\treturn { component: undefined, promise: Promise.reject(context + msg) };\n\t\t\t}\n\n\t\t\tvar component = new component_class(this._runtime, comp_state);\n\t\t\tthis._cache[arg_component_name] = component;\n\t\t\tvar promise = component.render().then(function () {\n\t\t\t\treturn component.load();\n\t\t\t}, function (reason) {\n\t\t\t\t_this2.error(reason);\n\t\t\t}).then(function () {\n\t\t\t\tcomponent.init_bindings();\n\t\t\t}, function (reason) {\n\t\t\t\t_this2.error(reason);\n\t\t\t});\n\n\t\t\tthis.leave_group('create_instance_mix:component created for name=' + arg_component_name);\n\t\t\treturn { component: component, promise: promise };\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_component_name - component name.\r\n   * \r\n   * @returns {Promise} - promise of Component instance\r\n   */\n\n\t}, {\n\t\tkey: 'create',\n\t\tvalue: function create(arg_component_name) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar arg_component_desc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\t\tthis.enter_group('create:component name=' + arg_component_name);\n\n\t\t\t// SEARCH DESCRIPTION INTO CACHE\n\t\t\tvar component = this.create_local(arg_component_name, arg_component_desc);\n\t\t\tif (component) {\n\t\t\t\tthis.leave_group('create:async:found:component name=' + arg_component_name);\n\t\t\t\treturn Promise.resolve(component);\n\t\t\t}\n\n\t\t\tvar component_desc_promise = arg_component_desc ? Promise.resolve(arg_component_desc) : undefined;\n\n\t\t\t// REQUEST DESCRIPTION FROM SERVER\n\t\t\tif (!component_desc_promise) {\n\t\t\t\tcomponent_desc_promise = this.request_component_desc(arg_component_name);\n\t\t\t}\n\n\t\t\t// DESCRIPTION PROMISE NOT FOUND\n\t\t\tif (!component_desc_promise) {\n\t\t\t\tthis.leave_group('create:error:bad promise for component name=' + arg_component_name);\n\t\t\t\treturn Promise.reject(context + ':create:bad promise');\n\t\t\t}\n\n\t\t\tvar component_promise = component_desc_promise.then(function (component_desc) {\n\t\t\t\t_this3.debug('create:found:component description for ' + arg_component_name);\n\n\t\t\t\t// CHECK COMPONENT DESCRIPTION\n\t\t\t\tif (!(_types2.default.isObject(component_desc) && component_desc.has && component_desc.get)) {\n\t\t\t\t\t_this3.error('create:found:bad Immutable component description for ' + arg_component_name);\n\t\t\t\t\t_this3.leave_group('create:error bad description for ' + arg_component_name);\n\t\t\t\t\treturn Promise.reject(context + 'create:found:bad Immutable component description for ' + arg_component_name);\n\t\t\t\t}\n\n\t\t\t\tvar promise = _this3.create_instance_promise(arg_component_name, component_desc);\n\t\t\t\treturn promise;\n\t\t\t}, function (reason) {\n\t\t\t\t_this3.error('create:error:promise exception for ' + arg_component_name + ' reason=' + reason);\n\t\t\t\t_this3.leave_group('create:error promise exception for ' + arg_component_name + ' reason=' + reason);\n\t\t\t\treturn Promise.reject(context + 'create:error promise exception for ' + arg_component_name + ' reason=' + reason);\n\t\t\t});\n\n\t\t\tthis.leave_group('create:async:component name=' + arg_component_name);\n\t\t\treturn component_promise;\n\t\t}\n\n\t\t/**\r\n   * Create a UI component.\r\n   * \r\n   * @param {string} arg_name - component name.\r\n   * \r\n   * @returns {Component}\r\n   */\n\n\t}, {\n\t\tkey: 'get_component_class',\n\t\tvalue: function get_component_class(arg_type) {\n\t\t\tswitch (arg_type.toLocaleLowerCase()) {\n\t\t\t\tcase 'component':\n\t\t\t\t\treturn _component2.default;\n\n\t\t\t\tcase 'container':\n\t\t\t\t\treturn _container2.default;\n\t\t\t\tcase 'dock':\n\t\t\t\t\treturn _dock2.default;\n\n\t\t\t\tcase 'input-field':\n\t\t\t\tcase 'inputfield':\n\t\t\t\t\treturn _inputField2.default;\n\n\t\t\t\tcase 'logstable':\n\t\t\t\t\treturn _logs_table2.default;\n\t\t\t\tcase 'attributestable':\n\t\t\t\t\treturn _attributes_table2.default;\n\t\t\t\tcase 'table':\n\t\t\t\t\treturn _table2.default;\n\t\t\t\tcase 'tabs':\n\t\t\t\t\treturn _tabs2.default;\n\n\t\t\t\tcase 'tabletree':\n\t\t\t\t\treturn _table_tree2.default;\n\t\t\t\tcase 'topology':\n\t\t\t\t\treturn _topology2.default;\n\t\t\t\tcase 'recordstable':\n\t\t\t\t\treturn _records_table2.default;\n\t\t\t\tcase 'tree':\n\t\t\t\t\treturn _tree2.default;\n\n\t\t\t\tcase 'button':\n\t\t\t\tcase 'script':\n\t\t\t\tcase 'menubar':\n\t\t\t\tcase 'hbox':\n\t\t\t\tcase 'vbox':\n\t\t\t\tcase 'list':\n\t\t\t\tcase 'page':\n\t\t\t\tdefault:\n\t\t\t\t\treturn _component2.default;\n\t\t\t}\n\n\t\t\t// return undefined\n\t\t}\n\n\t\t/**\r\n   * Find UI component description.\r\n   * \r\n   * @param {Immutable.Map} arg_state - registry global state object.\r\n   * @param {string} arg_name - component name.\r\n   * @param {array} arg_state_path - state path (optional, default=[])\r\n   * \r\n   * @returns {Immutable.Map|undefined} - component state object.\r\n   */\n\n\t}, {\n\t\tkey: 'find_component_desc',\n\t\tvalue: function find_component_desc(arg_state, arg_name) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar arg_state_path = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n\t\t\tvar js_state = arg_state && arg_state.toJS ? arg_state.toJS() : arg_state;\n\t\t\tDEBUG_TRACE_FIND_STATE && this.debug('ui.find_component_desc for ' + arg_name, arg_state_path, js_state);\n\n\t\t\tif (!arg_state) {\n\t\t\t\tconsole.error('state is undefined for ' + arg_name);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (!_types2.default.isFunction(arg_state.get)) {\n\t\t\t\t// GLOBAL STATE IS NOT AN IMMUTABLE.MAP\n\t\t\t\tconsole.error(context + ':find_component_desc:state is not an Immutable for ' + arg_name, arg_state);\n\t\t\t\tthis.error(context + ':find_component_desc:state is not an Immutable for ' + arg_name, arg_state);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// FOUND ON ROOT\n\t\t\tif (arg_state.has('name')) {\n\t\t\t\tvar name = arg_state.get('name').toString();\n\t\t\t\targ_state_path.push(name);\n\t\t\t\tif (name == arg_name) {\n\t\t\t\t\tDEBUG_TRACE_FIND_STATE && this.debug('ui.find_component_desc FOUND 1 for ' + arg_name, arg_state_path);\n\t\t\t\t\treturn arg_state;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// LOOKUP ON VIEWS CHILDREN\n\t\t\tvar children_key = 'children';\n\t\t\tif (arg_state_path.length == 1 && arg_state_path[0] == 'views') {\n\t\t\t\tchildren_key = 'views';\n\t\t\t\targ_state_path.pop();\n\t\t\t}\n\t\t\tif (arg_state_path.length == 1 && arg_state_path[0] == 'menubars') {\n\t\t\t\tchildren_key = 'menubars';\n\t\t\t\targ_state_path.pop();\n\t\t\t}\n\t\t\tif (arg_state_path.length == 1 && arg_state_path[0] == 'menus') {\n\t\t\t\tchildren_key = 'menus';\n\t\t\t\targ_state_path.pop();\n\t\t\t}\n\t\t\tif (arg_state_path.length == 1 && arg_state_path[0] == 'models') {\n\t\t\t\tchildren_key = 'models';\n\t\t\t\targ_state_path.pop();\n\t\t\t}\n\t\t\tif (arg_state.has(children_key)) {\n\t\t\t\tvar _ret = function () {\n\t\t\t\t\targ_state_path.push(children_key);\n\n\t\t\t\t\tif (arg_state.hasIn([children_key, arg_name])) {\n\t\t\t\t\t\targ_state_path.push(arg_name);\n\t\t\t\t\t\tDEBUG_TRACE_FIND_STATE && _this4.debug('ui.find_component_desc FOUND 2 for ' + arg_name, arg_state_path);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: arg_state.getIn([children_key, arg_name])\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = undefined;\n\t\t\t\t\targ_state.get(children_key).forEach(function (child_state, key) {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\tDEBUG_TRACE_FIND_STATE && _this4.debug('ui.find_component_desc loop on child ' + key + ' for ' + arg_name, arg_state_path);\n\t\t\t\t\t\t\tresult = _this4.find_component_desc(child_state, arg_name, arg_state_path);\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tDEBUG_TRACE_FIND_STATE && _this4.debug('ui.find_component_desc FOUND 3 for ' + arg_name, arg_state_path);\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tDEBUG_TRACE_FIND_STATE && _this4.debug('ui.find_component_desc FOUND 4 for ' + arg_name, arg_state_path, result && result.toJS ? result.toJS() : result);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tv: result\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\targ_state_path.pop(); // CHILDREN\n\t\t\t\t}();\n\n\t\t\t\tif ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t\t\t}\n\n\t\t\tif (arg_state.has('name')) {\n\t\t\t\targ_state_path.pop(); // NAME\n\t\t\t}\n\n\t\t\t// console.error('state not found for ' + arg_name)\n\t\t\treturn undefined;\n\t\t}\n\t}, {\n\t\tkey: 'request_component_desc',\n\t\tvalue: function request_component_desc(arg_component_name) {\n\t\t\tvar _this5 = this;\n\n\t\t\tthis.enter_group('request_component_desc');\n\n\t\t\tthis.leave_group('request_component_desc:async');\n\n\t\t\treturn this._runtime.register_service('rest_api_resources_query_1').then(function (service) {\n\t\t\t\t// console.log(context + ':request_component_desc:get service for ' + arg_view_name)\n\t\t\t\treturn service.get({ collection: '*', 'resource': arg_component_name });\n\t\t\t}, function (reason) {\n\t\t\t\tconsole.error(context + ':request_component_desc:error 1 for ' + arg_component_name, reason);\n\t\t\t}).then(function (stream) {\n\t\t\t\t// console.log(context + ':request_component_desc:get listen stream for ' + arg_view_name)\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tstream.onValue(function (response) {\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t});\n\t\t\t\t\tstream.onError(function (reason) {\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, function (reason) {\n\t\t\t\tconsole.error(context + ':request_component_desc:error 2 for ' + arg_component_name, reason);\n\t\t\t}).then(function (response) {\n\t\t\t\t// console.log(context + ':request_component_desc:get response for ' + arg_view_name, response)\n\n\t\t\t\tif (response.result == 'done') {\n\t\t\t\t\t// console.log(context + ':request_component_desc:dispatch ADD_JSON_RESOURCE action for ' + arg_view_name)\n\t\t\t\t\tvar action = { type: 'ADD_JSON_RESOURCE', resource: arg_component_name, collection: 'views', json: response.datas };\n\t\t\t\t\t_this5._store.dispatch(action);\n\t\t\t\t\treturn response.datas;\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}, function (reason) {\n\t\t\t\tconsole.error(context + ':request_component_desc:error 3 for ' + arg_component_name, reason);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn UIFactory;\n}(_loggable2.default);\n\nexports.default = UIFactory;\n\n\n},{\"../../common/base/loggable\":38,\"../../common/utils/types\":105,\"../base/component\":5,\"../base/container\":6,\"../components/attributes_table\":14,\"../components/dock\":15,\"../components/input-field\":16,\"../components/logs_table\":17,\"../components/records_table\":19,\"../components/table\":20,\"../components/table_tree\":21,\"../components/tabs\":22,\"../components/topology\":23,\"../components/tree\":24,\"assert\":107,\"immutable\":170}],32:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _html_entities = require('../../common/utils/html_entities');\n\nvar _html_entities2 = _interopRequireDefault(_html_entities);\n\nvar _loggable = require('../../common/base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import assert from 'assert'\n// import _ from 'lodash'\n// import vdom_as_json from 'vdom-as-json'\n// const vdom_from_json = vdom_as_json.fromJson\n// import VNode from 'virtual-dom/vnode/vnode'\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/ui_rendering';\n\n/**\r\n * @file UI rendering class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar UIRendering = function (_Loggable) {\n\t_inherits(UIRendering, _Loggable);\n\n\t/**\r\n  * Create a UI rendering instance.\r\n  * \r\n  * \tAPI:\r\n  * \t\t->constructor(arg_runtime, arg_ui)\r\n  * \r\n  * \t\t->get_content_element():Element - Get page content element.\r\n  * \t\t->clear_content(arg_do_not_hide_components={}) - Hide content components.\r\n  * \r\n  * \t\t->process_content(arg_id, arg_vnode, arg_rendering_result, arg_credentials): - .\r\n  * \r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_store - UI components state store.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction UIRendering(arg_runtime, arg_ui) {\n\t\t_classCallCheck(this, UIRendering);\n\n\t\tvar _this = _possibleConstructorReturn(this, (UIRendering.__proto__ || Object.getPrototypeOf(UIRendering)).call(this, context));\n\n\t\t_this.is_ui_rendering = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this._ui = arg_ui;\n\n\t\t_this._content_id = 'content';\n\t\t_this._content_element = undefined;\n\n\t\tvar assets_urls_templates = _this._ui.store.get_state().get('assets_urls_templates', undefined);\n\t\tassets_urls_templates = assets_urls_templates ? assets_urls_templates.toJS() : undefined;\n\n\t\t_this.process_assets_urls_templates(assets_urls_templates);\n\n\t\t// this.enable_trace()\n\t\t// this.update_trace_enabled()\n\t\treturn _this;\n\t}\n\n\t_createClass(UIRendering, [{\n\t\tkey: 'process_assets_urls_templates',\n\t\tvalue: function process_assets_urls_templates(arg_assets_urls_templates) {\n\t\t\tif (arg_assets_urls_templates) {\n\t\t\t\tthis._assets_urls_templates = {\n\t\t\t\t\tscript: _html_entities2.default.decode(arg_assets_urls_templates.script),\n\t\t\t\t\tstyle: _html_entities2.default.decode(arg_assets_urls_templates.style),\n\t\t\t\t\timage: _html_entities2.default.decode(arg_assets_urls_templates.image),\n\t\t\t\t\thtml: _html_entities2.default.decode(arg_assets_urls_templates.html)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'process_rendering_result_headers',\n\t\tvalue: function process_rendering_result_headers() /*, arg_credentials*/{\n\t\t\tvar arg_rendering_result_headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\tthis.debug('process_rendering_result_headers:rendering headers', arg_rendering_result_headers);\n\n\t\t\t// TODO\n\n\t\t\t// arg_rendering_result_headers.forEach(\n\t\t\t// \t(header)=>{\n\t\t\t// \t\tconst has_header = false // TODO\n\t\t\t// \t\t// const e = document.createElement(header)\n\t\t\t// \t\t// document.head.appendChild(e)// TODO\n\t\t\t// \t}\n\t\t\t// )\n\t\t}\n\t}, {\n\t\tkey: 'get_asset_url',\n\t\tvalue: function get_asset_url(arg_url, arg_type) {\n\t\t\tvar arg_credentials = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n\t\t\tvar template = this._assets_urls_templates[arg_type];\n\t\t\tvar url = _typr2.default.isString(template) ? template.replace('{{url}}', arg_url) : arg_url;\n\t\t\tvar credentials_tag = '{{credentials_url}}';\n\n\t\t\tthis.debug('get_asset_url:url', arg_url);\n\t\t\tthis.debug('get_asset_url:type', arg_type);\n\t\t\tthis.debug('get_asset_url:template', template);\n\t\t\tthis.debug('get_asset_url:url', url);\n\n\t\t\tif (url.indexOf('&token') > -1 && url.indexOf(credentials_tag) == -1) {\n\t\t\t\treturn url;\n\t\t\t}\n\n\t\t\tif (!arg_credentials) {\n\t\t\t\tthis.debug('get_asset_url:no credentials');\n\t\t\t\t// console.log('get_asset_url:arg_url=%s', arg_url)\n\t\t\t\t// console.log('get_asset_url:template=%s', template)\n\t\t\t\t// console.log('get_asset_url:url=%s', url)\n\t\t\t\treturn url;\n\t\t\t}\n\n\t\t\tif (url.indexOf(credentials_tag) >= 0) {\n\t\t\t\tvar url2 = url.replace(credentials_tag, arg_credentials.get_url_part());\n\t\t\t\tthis.debug('get_asset_url:url2', url2);\n\t\t\t\treturn url2;\n\t\t\t}\n\n\t\t\tvar url3 = url + '?' + arg_credentials.get_url_part();\n\t\t\tthis.debug('get_asset_url:url3', url3);\n\t\t\treturn url3;\n\t\t}\n\t}, {\n\t\tkey: 'create_dom_url_element',\n\t\tvalue: function create_dom_url_element(arg_dom_element, arg_tag, arg_id, arg_url, arg_type) {\n\t\t\t// SEARCH DEVAPT BOOTSTRAP SCRIPT TAG\n\t\t\tvar devapt_bootstrap_element = document.getElementById('js-devapt-bootstrap');\n\t\t\tvar has_bootstrap_element = devapt_bootstrap_element ? arg_dom_element == devapt_bootstrap_element.parentNode : false;\n\n\t\t\tvar e = document.getElementById(arg_id);\n\t\t\tif (e) {\n\t\t\t\tif (e.getAttribute('src') == arg_url) {\n\t\t\t\t\twindow.devapt().monitor_asset_loading(arg_tag, arg_id, arg_url, e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\te.parentNode.removeChild(e);\n\t\t\t}\n\n\t\t\te = document.createElement(arg_tag);\n\t\t\te.setAttribute('id', arg_id);\n\t\t\te.setAttribute('src', arg_url);\n\t\t\te.setAttribute('type', arg_type);\n\t\t\t// e.setAttribute('async', 'false')\n\n\t\t\twindow.devapt().monitor_asset_loading(arg_tag, arg_id, arg_url, e);\n\n\t\t\tif (has_bootstrap_element) {\n\t\t\t\targ_dom_element.insertBefore(e, devapt_bootstrap_element);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\targ_dom_element.appendChild(e);\n\t\t}\n\t}, {\n\t\tkey: 'process_rendering_result_scripts_urls',\n\t\tvalue: function process_rendering_result_scripts_urls(arg_dom_element) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar arg_rendering_result_scripts_urls = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\t\t\tvar arg_credentials = arguments[2];\n\n\t\t\tthis.debug('process_rendering_result_scripts_urls:rendering body_scripts_urls', arg_rendering_result_scripts_urls);\n\n\t\t\t// SEARCH DEVAPT BOOTSTRAP SCRIPT TAG\n\t\t\t// const devapt_bootstrap_element = document.getElementById('js-devapt-bootstrap')\n\t\t\t// const has_bootstrap_element = devapt_bootstrap_element ? arg_dom_element == devapt_bootstrap_element.parentNode : false\n\n\t\t\targ_rendering_result_scripts_urls.forEach(function (url) {\n\t\t\t\t_this2.debug('process_rendering_result_scripts_urls:loop on url', url.id, url.src);\n\n\t\t\t\tvar url_src = _this2.get_asset_url(url.src, 'script', arg_credentials ? arg_credentials : _this2._runtime.session_credentials);\n\n\t\t\t\t_this2.create_dom_url_element(arg_dom_element, 'script', url.id, url_src, 'text/javascript');\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'process_rendering_result_scripts_tags',\n\t\tvalue: function process_rendering_result_scripts_tags(arg_dom_element) /*, arg_credentials*/{\n\t\t\tvar _this3 = this;\n\n\t\t\tvar arg_rendering_result_scripts_tags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\t\t\tthis.debug('process_rendering_result_scripts_tags:rendering body_scripts_tags', arg_rendering_result_scripts_tags);\n\n\t\t\targ_rendering_result_scripts_tags.forEach(function (tag) {\n\t\t\t\t_this3.debug('process_rendering_result_scripts_tags:loop on tag');\n\n\t\t\t\tvar e = document.getElementById(tag.id);\n\t\t\t\tif (e) {\n\t\t\t\t\tif (e.text == tag.content) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.parentNode.removeChild(e);\n\t\t\t\t}\n\n\t\t\t\te = document.createElement('script');\n\t\t\t\te.text = tag.content;\n\t\t\t\te.setAttribute('id', tag.id);\n\t\t\t\te.setAttribute('type', 'text/javascript');\n\t\t\t\targ_dom_element.appendChild(e);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'process_rendering_result_styles_urls',\n\t\tvalue: function process_rendering_result_styles_urls(arg_dom_element) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar arg_rendering_result_styles_urls = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\t\t\tvar arg_credentials = arguments[2];\n\n\t\t\tthis.debug('process_rendering_result_styles_urls:rendering body_styles_urls', arg_rendering_result_styles_urls);\n\n\t\t\targ_rendering_result_styles_urls.forEach(function (url) {\n\t\t\t\t_this4.debug('process_rendering_result_styles_urls:loop on url', url.id, url.href);\n\n\t\t\t\tvar url_href = _this4.get_asset_url(url.href, 'style', arg_credentials ? arg_credentials : _this4._runtime.session_credentials);\n\n\t\t\t\tvar e = document.getElementById(url.id);\n\t\t\t\tif (e) {\n\t\t\t\t\t// console.log('e exists', e)\n\t\t\t\t\tif (e.getAttribute('href') == url_href) {\n\t\t\t\t\t\twindow.devapt().monitor_asset_loading('link', url.id, url_href, e);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// console.log('existing e is different', e, url_href)\n\t\t\t\t\te.parentNode.removeChild(e);\n\t\t\t\t}\n\n\t\t\t\te = document.createElement('link');\n\t\t\t\te.setAttribute('id', url.id);\n\t\t\t\te.setAttribute('href', url_href);\n\t\t\t\te.setAttribute('media', url.media ? url.media : 'all');\n\t\t\t\te.setAttribute('rel', 'stylesheet');\n\t\t\t\targ_dom_element.appendChild(e);\n\n\t\t\t\twindow.devapt().monitor_asset_loading('link', url.id, url_href, e);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'process_rendering_result_styles_tags',\n\t\tvalue: function process_rendering_result_styles_tags(arg_dom_element) /*, arg_credentials*/{\n\t\t\tvar _this5 = this;\n\n\t\t\tvar arg_rendering_result_styles_tags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n\t\t\tthis.debug('process_rendering_result_styles_tags:rendering body_styles_tags', arg_rendering_result_styles_tags);\n\n\t\t\targ_rendering_result_styles_tags.forEach(function (tag) {\n\t\t\t\t_this5.debug('process_rendering_result_styles_tags:loop on tag');\n\n\t\t\t\tvar e = document.getElementById(tag.id);\n\t\t\t\tif (e) {\n\t\t\t\t\tif (e.text == tag.content) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\te.parentNode.removeChild(e);\n\t\t\t\t}\n\n\t\t\t\te = document.createElement('style');\n\t\t\t\te.setAttribute('id', tag.id);\n\t\t\t\te.setAttribute('type', 'text/css');\n\t\t\t\te.setAttribute('media', tag.media);\n\t\t\t\te.textContent = tag.content;\n\n\t\t\t\targ_dom_element.appendChild(e);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn UIRendering;\n}(_loggable2.default);\n\nexports.default = UIRendering;\n\n\n},{\"../../common/base/loggable\":38,\"../../common/utils/html_entities\":101,\"typr/lib/typr\":218}],33:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _immutable = require('immutable');\n\nvar _digest = require('../utils/digest');\n\nvar _digest2 = _interopRequireDefault(_digest);\n\nvar _encode_decode = require('../utils/encode_decode');\n\nvar _encode_decode2 = _interopRequireDefault(_encode_decode);\n\nvar _encrypt_decrypt = require('../utils/encrypt_decrypt');\n\nvar _encrypt_decrypt2 = _interopRequireDefault(_encrypt_decrypt);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'common/base/credentials';\n\nvar default_credentials = {\n\ttenant: undefined, // Tenant name (mandatory)\n\tenv: undefined, // Environment code: dev, test, int, rec, pro (mandatory)\n\tapplication: undefined, // Application name (mandatory)\n\n\ttoken: undefined,\n\tuser_name: undefined,\n\tuser_pass_digest: undefined,\n\n\tts_login: undefined,\n\tts_expiration: undefined,\n\n\terrors_count: 0,\n\trenew_count: 0,\n\n\thash: undefined\n};\n\n/**\r\n * @file Credentials class: contains authentication informations.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Credentials = function () {\n\t/**\r\n  * Create a Credentials instance. Store credentials values into an immutable Map.\r\n * \r\n * \tAPI:\r\n * \t\t->set_credentials(arg_datas):nothing - check and set crendtials datas.\r\n * \t\t\r\n * \t\t->dump():string - dump credentials to a readable string without sensitive datas.\r\n * \t\t->digest_password(arg_string):string - hash credentials password (static).\r\n * \t\t\r\n * \t\t->serialize(arg_app_secret):string - transform credentials to a string.\r\n * \t\t->deserialize(string, arg_app_secret):boolean - load credentials from a string.string\r\n * \r\n * \t\t->encrypt(arg_app_key):string - encrypted string.\r\n * \t\t->decrypt(arg_string, arg_app_key):boolean - success or failure.\r\n * \r\n * \t\t->extract(arg_string):object - extract a record with credentials values from a formatted string.\r\n * \r\n  * @param {object} arg_datas - credentials datas object.\r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction Credentials() {\n\t\tvar arg_datas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : default_credentials;\n\t\tvar update_handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\t_classCallCheck(this, Credentials);\n\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_datas), context + ':bad runtime object');\n\t\tthis.is_credentials = true;\n\n\t\tthis._credentials = (0, _immutable.fromJS)(default_credentials);\n\t\t// this._crypt_mode = 'AES-CBC' // (other modes include: CFB, OFB, CTR, and GCM)\n\t\t// this._crypt_key_length = 32\n\t\t// this._crypt_iv_length = 8\n\t\t// this._crypt_num_iterations = 10\n\n\t\tthis.update_handler = update_handler;\n\n\t\tthis.set_credentials(arg_datas);\n\t}\n\n\t/**\r\n  * Get credentials datas.\r\n  * \r\n  * @returns {object}\r\n  */\n\n\n\t_createClass(Credentials, [{\n\t\tkey: 'get_credentials',\n\t\tvalue: function get_credentials() {\n\t\t\tvar datas = this._credentials.toJS();\n\t\t\treturn datas;\n\t\t}\n\n\t\t/**\r\n   * Get credentials tenant.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_tenant',\n\t\tvalue: function get_tenant() {\n\t\t\treturn this._credentials.get('tenant', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials environment.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_env',\n\t\tvalue: function get_env() {\n\t\t\treturn this._credentials.get('env', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials application.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_application',\n\t\tvalue: function get_application() {\n\t\t\treturn this._credentials.get('application', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials token.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_token',\n\t\tvalue: function get_token() {\n\t\t\treturn this._credentials.get('token', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials user.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_user',\n\t\tvalue: function get_user() {\n\t\t\treturn this._credentials.get('user_name', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials user.\r\n   * \r\n   * @returns {string|undefined}\r\n   */\n\n\t}, {\n\t\tkey: 'get_pass_digest',\n\t\tvalue: function get_pass_digest() {\n\t\t\treturn this._credentials.get('user_pass_digest', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get credentials url part.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_url_part',\n\t\tvalue: function get_url_part() {\n\t\t\treturn 'username=' + this.get_user() + '&password=' + this.get_pass_digest() + '&token=' + this.get_token();\n\t\t}\n\n\t\t/**\r\n   * Get credentials datas.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'get_credentials_for_template',\n\t\tvalue: function get_credentials_for_template() {\n\t\t\tvar credentials_obj = this._credentials.toJS();\n\t\t\tvar template_datas = {\n\t\t\t\tcredentials_tenant: credentials_obj.tenant,\n\t\t\t\tcredentials_env: credentials_obj.env,\n\t\t\t\tcredentials_application: credentials_obj.application,\n\n\t\t\t\tcredentials_token: credentials_obj.token,\n\t\t\t\tcredentials_user_name: credentials_obj.user_name,\n\t\t\t\tcredentials_pass_digest: credentials_obj.user_pass_digest,\n\n\t\t\t\tcredentials_login: credentials_obj.ts_login,\n\t\t\t\tcredentials_expire: credentials_obj.ts_expiration,\n\n\t\t\t\tcredentials_errors_count: credentials_obj.errors_count,\n\t\t\t\tcredentials_renew_count: credentials_obj.renew_count,\n\n\t\t\t\tcredentials_hash: credentials_obj.hash\n\t\t\t};\n\t\t\treturn template_datas;\n\t\t}\n\n\t\t/**\r\n   * Get empty credentials record.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'is_valid',\n\n\n\t\t/**\r\n   * Credentials are valid for access.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\t\tvalue: function is_valid() // TODO\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\r\n   * Check and set credentials datas.\r\n   * \r\n      * @param {object} arg_datas - credentials datas object.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'set_credentials',\n\t\tvalue: function set_credentials(arg_datas) {\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_datas), context + ':set_credentials:bad arg_datas object');\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.tenant) && arg_datas.tenant.length > 0, context + ':set_credentials:bad tenant string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.env) && arg_datas.env.length > 0, context + ':set_credentials:bad env string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.application) && arg_datas.application.length > 0, context + ':set_credentials:bad application string');\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.token), context + ':set_credentials:bad token string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.user_name), context + ':set_credentials:bad user_name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_datas.user_pass_digest), context + ':set_credentials:bad user_pass_digest string');\n\n\t\t\tif (_typr2.default.isString(arg_datas.ts_login)) {\n\t\t\t\ttry {\n\t\t\t\t\targ_datas.ts_login = parseInt(arg_datas.ts_login);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\tif (_typr2.default.isString(arg_datas.ts_expiration)) {\n\t\t\t\ttry {\n\t\t\t\t\targ_datas.ts_expiration = parseInt(arg_datas.ts_expiration);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_datas.ts_login), context + ':set_credentials:bad ts_login number');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_datas.ts_expiration), context + ':set_credentials:bad ts_expiration number');\n\n\t\t\tif (_typr2.default.isString(arg_datas.errors_count)) {\n\t\t\t\ttry {\n\t\t\t\t\targ_datas.errors_count = parseInt(arg_datas.errors_count);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\tif (_typr2.default.isString(arg_datas.renew_count)) {\n\t\t\t\ttry {\n\t\t\t\t\targ_datas.renew_count = parseInt(arg_datas.renew_count);\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_datas.errors_count), context + ':set_credentials:bad errors_count number');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_datas.renew_count), context + ':set_credentials:bad renew_count number');\n\n\t\t\tvar datas = {};\n\t\t\tdatas.tenant = arg_datas.tenant;\n\t\t\tdatas.env = arg_datas.env;\n\t\t\tdatas.application = arg_datas.application;\n\n\t\t\tdatas.token = arg_datas.token;\n\t\t\tdatas.user_name = arg_datas.user_name;\n\t\t\tdatas.user_pass_digest = arg_datas.user_pass_digest;\n\n\t\t\tdatas.ts_login = arg_datas.ts_login;\n\t\t\tdatas.ts_expiration = arg_datas.ts_expiration;\n\n\t\t\tdatas.errors_count = arg_datas.errors_count;\n\t\t\tdatas.renew_count = arg_datas.renew_count;\n\n\t\t\tvar head = _util2.default.format('tenant:%s,env:%s,app:%s', datas.tenant, datas.env, datas.application);\n\t\t\tvar auth = _util2.default.format('token:%s,user:%s,pass:%s', datas.token ? datas.token : 'none', datas.user_name ? datas.user_name : 'none', datas.user_pass_digest ? datas.user_pass_digest : 'none');\n\t\t\tvar str = _util2.default.format('CREDENTIALS:{%s,%s}', head, auth);\n\t\t\tdatas.hash = _digest2.default.hash(str, 'sha256', 'hex');\n\n\t\t\tthis._credentials = (0, _immutable.fromJS)(datas);\n\n\t\t\tif (_typr2.default.isFunction(this.update_handler)) {\n\t\t\t\tthis.update_handler(this._credentials);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\r\n   * Dump credentials datas to a readable string without sensitive datas.\r\n   * \r\n   * @returns {string} - readable string without sensitive datas.\r\n   */\n\n\t}, {\n\t\tkey: 'dump',\n\t\tvalue: function dump() {\n\t\t\tvar datas = this._credentials.toJS();\n\t\t\tvar head = _util2.default.format('tenant:%s,env:%s,app:%s', datas.tenant, datas.env, datas.application);\n\t\t\tvar auth = _util2.default.format('token:%s,user:%s,pass:%s', datas.token ? datas.token : 'none', datas.user_name ? datas.user_name : 'none', datas.user_pass_digest ? '***' : 'none');\n\t\t\tvar foot = _util2.default.format('start:%n,expire:%n,errors:%n,renews:%n', datas.ts_login, datas.ts_expiration, datas.errors_count, datas.renew_count);\n\n\t\t\treturn _util2.default.format('CREDENTIALS:{%s,%s,%s}', head, auth, foot);\n\t\t}\n\n\t\t/**\r\n   * Transform credentials password with a hash method.\r\n   * \r\n   * @param {string} arg_password - password string.\r\n   * \r\n   * @returns {string} - hashed string.\r\n   */\n\n\t}, {\n\t\tkey: 'serialize',\n\n\n\t\t/**\r\n   * Transform credentials to a string without encryption which could be sent over a network.\r\n   * \r\n   * @returns {string} - serialized string.\r\n   */\n\t\tvalue: function serialize() {\n\t\t\tvar datas = this._credentials.toJS();\n\t\t\tvar head = _util2.default.format('tenant:%s,env:%s,app:%s', datas.tenant, datas.env, datas.application);\n\t\t\tvar auth = _util2.default.format('token:%s,user:%s,pass:%s', datas.token ? datas.token : 'none', datas.user_name ? datas.user_name : 'none', datas.user_pass_digest ? datas.user_pass_digest : 'none');\n\t\t\tvar str = _util2.default.format('CREDENTIALS:{%s,%s}', head, auth);\n\n\t\t\treturn _encode_decode2.default.encode(str, 'base64');\n\t\t}\n\n\t\t/**\r\n   * Deserialize credentials from a string without encryption.\r\n   * @TODO: use RegExp to split the string into credentials attributes.\r\n   * \r\n   * @param {string} arg_string - serialized string.\r\n   * \r\n   * @returns {boolean} - deserialized string success or failure.\r\n   */\n\n\t}, {\n\t\tkey: 'deserialize',\n\t\tvalue: function deserialize(arg_string) {\n\t\t\tvar str = _encode_decode2.default.decode(arg_string, 'base64');\n\t\t\tvar record = this.extract(str);\n\n\t\t\treturn this.set_credentials(record);\n\t\t}\n\n\t\t/**\r\n   * Transform credentials to a string with encryption.\r\n   * \r\n   * @param {string} arg_app_key - encryption key.\r\n   * \r\n   * @returns {string} - encrypted string.\r\n   */\n\n\t}, {\n\t\tkey: 'encrypt',\n\t\tvalue: function encrypt(arg_app_key) {\n\t\t\tvar datas = this._credentials.toJS();\n\t\t\tvar head = _util2.default.format('tenant:%s,env:%s,app:%s', datas.tenant, datas.env, datas.application);\n\t\t\tvar auth = _util2.default.format('token:%s,user:%s,pass:%s', datas.token ? datas.token : 'none', datas.user_name ? datas.user_name : 'none', datas.user_pass_digest ? datas.user_pass_digest : 'none');\n\t\t\tvar str = _util2.default.format('CREDENTIALS:{%s,%s}', head, auth);\n\n\t\t\treturn _encrypt_decrypt2.default.encrypt(str, arg_app_key);\n\t\t}\n\n\t\t/**\r\n   * Decrypt credentials encrypted string.\r\n   * \r\n   * @param {string} arg_string - string.\r\n   * @param {string} arg_app_key - encryption key.\r\n   * \r\n   * @returns {string} - encrypted string.\r\n   */\n\n\t}, {\n\t\tkey: 'decrypt',\n\t\tvalue: function decrypt(arg_string, arg_app_key) {\n\t\t\tvar str = _encrypt_decrypt2.default.decrypt(arg_string, arg_app_key);\n\t\t\tvar record = this.extract(str);\n\n\t\t\treturn this.set_credentials(record);\n\t\t}\n\n\t\t/**\r\n   * Extract credentials fields from a string (password should be hashed and encoded, only [a-zA-Z0-9_] chars).\r\n   * \r\n   * @param {string} arg_string - string as \"CREDENTIALS:{tenant:%s,env:%s,app:%s,token:%s,user:%s,pass:%s}\".\r\n   * \r\n   * @returns {object} - credentials values record.\r\n   */\n\n\t}, {\n\t\tkey: 'extract',\n\t\tvalue: function extract(arg_string) {\n\t\t\tvar regexp = /CREDENTIALS:{([a-zA-Z0-9_:]+),([a-zA-Z0-9_:]+),([a-zA-Z0-9_:]+),([a-zA-Z0-9_:]+),([a-zA-Z0-9_:]+),([a-zA-Z0-9_:]+)}/;\n\t\t\tvar results = regexp.exec(arg_string);\n\n\t\t\tif (results.length != 6) {\n\t\t\t\tconsole.log(context + ':extract:bad format [%s]', arg_string);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar values = [];\n\t\t\tresults.forEach(function (str) {\n\t\t\t\tvar parts = str.split(':');\n\t\t\t\tvar value = parts.length == 2 ? parts[1] : undefined;\n\t\t\t\tvalues.push(value);\n\t\t\t});\n\n\t\t\tvar record = {\n\t\t\t\ttenant: results[0],\n\t\t\t\tenv: results[1],\n\t\t\t\tapplication: results[2],\n\n\t\t\t\ttoken: results[3],\n\t\t\t\tuser_name: results[4],\n\t\t\t\tuser_pass_digest: results[5]\n\t\t\t};\n\n\t\t\treturn record;\n\t\t}\n\t}], [{\n\t\tkey: 'get_empty_credentials',\n\t\tvalue: function get_empty_credentials() {\n\t\t\tvar template_datas = {\n\t\t\t\ttenant: undefined,\n\t\t\t\tenv: undefined,\n\t\t\t\tapplication: undefined,\n\n\t\t\t\ttoken: undefined,\n\t\t\t\tuser_name: undefined,\n\t\t\t\tuser_pass_digest: undefined,\n\n\t\t\t\tts_login: undefined,\n\t\t\t\tts_expiration: undefined,\n\n\t\t\t\terrors_count: 0,\n\t\t\t\trenew_count: 0,\n\n\t\t\t\thash: undefined\n\t\t\t};\n\t\t\treturn default_credentials;\n\t\t}\n\t}, {\n\t\tkey: 'digest_password',\n\t\tvalue: function digest_password(arg_password) {\n\t\t\treturn _digest2.default.hash(arg_password, 'sha256', 'hex');\n\t\t}\n\t}]);\n\n\treturn Credentials;\n}();\n\nexports.default = Credentials;\n\n\n},{\"../utils/digest\":98,\"../utils/encode_decode\":99,\"../utils/encrypt_decrypt\":100,\"assert\":107,\"immutable\":170,\"typr\":217,\"util\":222}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _distributed_message = require('./distributed_message');\n\nvar _distributed_message2 = _interopRequireDefault(_distributed_message);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/base/distributed_logs';\n\n/**\r\n * @file DistributedLogs class for distributed communication.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar DistributedLogs = function (_DistributedMessage) {\n\t_inherits(DistributedLogs, _DistributedMessage);\n\n\t/**\r\n  * Create a DistributedLogs instance.\r\n * \r\n * @param {string} arg_sender_name - sender name.\r\n * @param {string} arg_target_name - recipient name.\r\n * @param {string} arg_timestamp - logs timestamp string.\r\n * @param {string} arg_level - logs level string.\r\n * @param {array} arg_values - logs values array.\r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction DistributedLogs(arg_sender_name, arg_target_name, arg_timestamp, arg_level, arg_values) {\n\t\t_classCallCheck(this, DistributedLogs);\n\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_timestamp), context + ':bad log timestamp string');\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_level), context + ':bad log level string');\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_values), context + ':bad logs values array');\n\n\t\tvar _this = _possibleConstructorReturn(this, (DistributedLogs.__proto__ || Object.getPrototypeOf(DistributedLogs)).call(this, arg_sender_name, arg_target_name, { ts: arg_timestamp, level: arg_level, source: 'SERVER', logs: arg_values }));\n\n\t\t_this.is_distributed_logs = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get logs timestamp.\r\n  * \r\n  * @returns {string} - logs timestamp.\r\n  */\n\n\n\t_createClass(DistributedLogs, [{\n\t\tkey: 'get_logs_ts',\n\t\tvalue: function get_logs_ts() {\n\t\t\treturn this.payload.ts;\n\t\t}\n\n\t\t/**\r\n   * Get logs level.\r\n   * \r\n   * @returns {string} - logs level.\r\n   */\n\n\t}, {\n\t\tkey: 'get_logs_level',\n\t\tvalue: function get_logs_level() {\n\t\t\treturn this.payload.level;\n\t\t}\n\n\t\t/**\r\n   * Get logs source.\r\n   * \r\n   * @returns {string} - logs source.\r\n   */\n\n\t}, {\n\t\tkey: 'get_logs_source',\n\t\tvalue: function get_logs_source() {\n\t\t\treturn this.payload.source;\n\t\t}\n\n\t\t/**\r\n   * Get logs values.\r\n   * \r\n   * @returns {array} - logs values array.\r\n   */\n\n\t}, {\n\t\tkey: 'get_logs_values',\n\t\tvalue: function get_logs_values() {\n\t\t\treturn this.payload.logs;\n\t\t}\n\n\t\t/**\r\n   * Check message format.\r\n   * \r\n   * @returns {boolean} - true:good format, false:bad format.\r\n   */\n\n\t}, {\n\t\tkey: 'check_msg_format',\n\t\tvalue: function check_msg_format() {\n\t\t\tif (!_get(DistributedLogs.prototype.__proto__ || Object.getPrototypeOf(DistributedLogs.prototype), 'check_msg_format', this).call(this)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isString(this.this.payload.ts) && this.this.payload.ts.length > 0 && _typr2.default.isString(this.this.payload.level) && this.this.payload.level.length > 0 && _typr2.default.isArray(this.payload.logs)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}]);\n\n\treturn DistributedLogs;\n}(_distributed_message2.default);\n\nexports.default = DistributedLogs;\n\n\n},{\"./distributed_message\":35,\"assert\":107,\"typr\":217}],35:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'common/base/distributed_message';\n\n/**\r\n * @file DistributedMessage class for distributed communication.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar DistributedMessage = function () {\n\t/**\r\n  * Create a DistributedMessage instance.\r\n * \r\n * @param {string} arg_sender_name - sender name.\r\n * @param {string} arg_target_name - recipient name.\r\n * @param {object} arg_payload - message payload plain object.\r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction DistributedMessage(arg_sender_name, arg_target_name, arg_payload) {\n\t\t_classCallCheck(this, DistributedMessage);\n\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_sender_name), context + ':bad sender string');\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_target_name), context + ':bad target string');\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_payload), context + ':bad payload object');\n\n\t\tthis.is_distributed_message = true;\n\n\t\tthis.sender = arg_sender_name;\n\t\tthis.target = arg_target_name;\n\t\tthis.payload = arg_payload;\n\t}\n\n\t/**\r\n  * Get message sender.\r\n  * \r\n  * @returns {string} - sender name.\r\n  */\n\n\n\t_createClass(DistributedMessage, [{\n\t\tkey: 'get_sender',\n\t\tvalue: function get_sender() {\n\t\t\treturn this.sender;\n\t\t}\n\n\t\t/**\r\n   * Get message sender.\r\n   * \r\n   * @returns {string} - target name.\r\n   */\n\n\t}, {\n\t\tkey: 'get_target',\n\t\tvalue: function get_target() {\n\t\t\treturn this.target;\n\t\t}\n\n\t\t/**\r\n   * Get message sender.\r\n   * \r\n   * @returns {object} - payload object\r\n   */\n\n\t}, {\n\t\tkey: 'get_payload',\n\t\tvalue: function get_payload() {\n\t\t\treturn this.payload;\n\t\t}\n\n\t\t/**\r\n   * Check message format.\r\n   * \r\n   * @returns {boolean} - true:good format, false:bad format.\r\n   */\n\n\t}, {\n\t\tkey: 'check_msg_format',\n\t\tvalue: function check_msg_format() {\n\t\t\t// console.log(context + ':check_msg_format:this', this)\n\n\t\t\tif (_typr2.default.isString(this.sender) && this.sender.length > 0 && _typr2.default.isString(this.target) && this.target.length > 0 && _typr2.default.isObject(this.payload)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}]);\n\n\treturn DistributedMessage;\n}();\n\nexports.default = DistributedMessage;\n\n\n},{\"assert\":107,\"typr\":217}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _loggable = require('./loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // COMMON IMPORTS\n\n\nvar context = 'common/base/errorable';\n\n/**\r\n * @file Base class to deal with errors.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Errorable = function (_Loggable) {\n\t_inherits(Errorable, _Loggable);\n\n\t/**\r\n  * Create an Errorable instance.\r\n  * @extends Loggable\r\n  * \r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Errorable(arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, Errorable);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Errorable.__proto__ || Object.getPrototypeOf(Errorable)).call(this, my_context, arg_logger_manager));\n\n\t\t_this.$has_error = false;\n\t\t_this.$error_msg = null;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Set an error.\r\n  * @param {string} arg_msg - error message\r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(Errorable, [{\n\t\tkey: 'error',\n\t\tvalue: function error(arg_msg) {\n\t\t\tthis.$has_error = true;\n\t\t\tthis.$error_msg = arg_msg;\n\t\t\t_get(Errorable.prototype.__proto__ || Object.getPrototypeOf(Errorable.prototype), 'error', this).call(this, arg_msg);\n\t\t}\n\n\t\t/**\r\n   * Test is an error is set.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_error',\n\t\tvalue: function has_error() {\n\t\t\treturn this.$has_error;\n\t\t}\n\n\t\t/**\r\n   * Get error message.\r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_error_msg',\n\t\tvalue: function get_error_msg() {\n\t\t\treturn this.$error_msg;\n\t\t}\n\n\t\t/**\r\n   * Default helper for \"not implemented\" error.\r\n   */\n\n\t}, {\n\t\tkey: 'error_not_implemented',\n\t\tvalue: function error_not_implemented() {\n\t\t\tthis.error('should be implemented');\n\t\t}\n\t}]);\n\n\treturn Errorable;\n}(_loggable2.default);\n\nexports.default = Errorable;\n\n\n},{\"./loggable\":38}],37:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _is_browser2 = require('../utils/is_browser');\n\nvar _stateable = require('./stateable');\n\nvar _stateable2 = _interopRequireDefault(_stateable);\n\nvar _index = require('../topology/registry/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// SERVER INSTANCE\n\n\nvar context = 'common/base/instance';\n\nvar NOT_STORED_COLLECTIONS = ['defined_topology', 'deployed_topology', 'registered_services', 'components', 'svc_providers', 'svc_consumers', 'buses', 'remote_bus_gateways'];\n\n/**\r\n * @file Devapt base class for resources, servers, Collection items...\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Instance = function (_Stateable) {\n\t_inherits(Instance, _Stateable);\n\n\t/**\r\n  * Create an instance.\r\n  * @extends Stateable\r\n  * @abstract\r\n  * \r\n  * @param {string} arg_collection - collection name.\r\n  * @param {string} arg_class - class name.\r\n  * @param {string} arg_name - instance name.\r\n  * @param {object} arg_settings - settings plain object\r\n  * @param {string} arg_log_context - log context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Instance(arg_collection, arg_class, arg_name, arg_settings, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, Instance);\n\n\t\t// Loggable.static_debug(context, 'Instance.constructor(%s,%s,%s)', arg_collection, arg_class, arg_name)\n\t\t// Loggable.static_info(context, 'Instance.constructor(%s,%s,%s)', arg_collection, arg_class, arg_name)\n\n\t\t// console.log('Instance collection:%s class:%s name:%s context:%s', arg_collection, arg_class, arg_name, arg_log_context)\n\n\t\t// DEBUG\n\t\tif (!(_typr2.default.isString(arg_name) && arg_name.length > 0)) {\n\t\t\tconsole.error(context + ':Instance.constructor(%s,%s,%s)', arg_collection, arg_class, arg_name, arg_settings);\n\t\t}\n\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_collection) && arg_collection.length > 0, context + ':bad collection string');\n\t\t(0, _assert2.default)(NOT_STORED_COLLECTIONS.indexOf(arg_collection) > -1 || _index2.default.has_collection(arg_collection), context + ':bad collection for ' + arg_collection);\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_class) && arg_class.length > 0, context + ':bad class [' + arg_class + ']');\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_name) && arg_name.length > 0, context + ':bad name [' + arg_name + ']');\n\n\t\tvar my_uid = (0, _uid2.default)();\n\t\tvar my_info = '[' + arg_collection + ',' + my_uid + '] ';\n\t\tvar my_context = arg_log_context ? arg_log_context + my_info : context + my_info;\n\n\t\t// GET RUNTIME\n\t\tvar server_runtime_file = '../../server/base/runtime';\n\t\t// const browser_runtime_file = 'see window.devapt().runtime()'\n\n\t\tvar runtime = undefined;\n\t\tif ((0, _is_browser2.is_server)()) {\n\t\t\truntime = require(server_runtime_file).default;\n\t\t} else if ((0, _is_browser2.is_browser)()) {\n\t\t\truntime = window.devapt().runtime();\n\t\t}\n\n\t\tvar default_state = {};\n\n\t\t// CLASS ATTRIBUTES\n\t\tvar _this = _possibleConstructorReturn(this, (Instance.__proto__ || Object.getPrototypeOf(Instance)).call(this, arg_settings, runtime, default_state, my_context, arg_logger_manager));\n\n\t\t_this.is_instance = true;\n\t\t// this.is_weighted = false\n\n\t\t// INSTANCE ATTRIBUTES\n\t\t_this.is_loaded = false;\n\t\t_this.$id = my_uid;\n\t\t_this.$name = arg_name;\n\t\t_this.$type = arg_collection;\n\t\t_this.$class = arg_class;\n\t\t// this.$weight = 1\n\n\t\t// REGISTER INSTANCE IN TOPOLOGY\n\t\tif ((0, _is_browser2.is_server)()) {\n\t\t\tif (_index2.default.has_collection(arg_collection)) {\n\t\t\t\t_index2.default.set_item(['runtime', 'instances', _this.$name], { 'id': _this.$id, 'name': _this.$name, 'class': _this.$class, 'type': _this.$type });\n\t\t\t}\n\t\t}\n\n\t\t// UPDATE TRACE FLAG\n\t\tif (!_this.is_server_runtime) {\n\t\t\t_this.update_trace_enabled();\n\t\t}\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get instance unique id.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(Instance, [{\n\t\tkey: 'get_id',\n\t\tvalue: function get_id() {\n\t\t\treturn this.$id;\n\t\t}\n\n\t\t/**\r\n   * Get instance unique name.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this.$name;\n\t\t}\n\n\t\t/**\r\n   * Get instance weight.\r\n   * \r\n   * @returns {number}\r\n   */\n\t\t// get_weight()\n\t\t// {\n\t\t// \treturn this.$weight\n\t\t// }\n\n\n\t\t/**\r\n   * Set instance weight.\r\n   * \r\n   * @param {number} arg_weight - instance weight.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\t// set_weight(arg_weight)\n\t\t// {\n\t\t// \tassert( T.isNumber(arg_weight), context + ':bad weight value')\n\t\t// \tthis.$weight = arg_weight\n\t\t// }\n\n\n\t\t/**\r\n   * Get instance type.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_type',\n\t\tvalue: function get_type() {\n\t\t\treturn this.$type;\n\t\t}\n\n\t\t/**\r\n   * Get instance class.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_class',\n\t\tvalue: function get_class() {\n\t\t\treturn this.$class;\n\t\t}\n\n\t\t/**\r\n   * Get instance description: {$type:..., $class:..., $id:..., $name:...}.\r\n  * \r\n   * @returns {object} - instance object description\r\n   */\n\n\t}, {\n\t\tkey: 'get_descriptor',\n\t\tvalue: function get_descriptor() {\n\t\t\treturn { $type: this.$type, $class: this.$class, $id: this.$id, $name: this.$name };\n\t\t}\n\n\t\t/**\r\n   * Get instance description string: $type:..., $class:..., $id:..., $name:....\r\n  * \r\n   * @returns {string} - instance object description\r\n   */\n\n\t}, {\n\t\tkey: 'get_descriptor_string',\n\t\tvalue: function get_descriptor_string() {\n\t\t\treturn '{$type:' + this.get_type() + ', $class:' + this.get_class() + ', $id:' + this.get_id() + ', $name:' + this.get_name() + '}';\n\t\t}\n\n\t\t/**\r\n   * Test if this code run inside a browser.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'is_browser',\n\t\tvalue: function is_browser() {\n\t\t\treturn (0, _is_browser2.is_browser)();\n\t\t}\n\n\t\t/**\r\n   * Test if this code run on a browser.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'is_server',\n\t\tvalue: function is_server() {\n\t\t\treturn (0, _is_browser2.is_server)();\n\t\t}\n\n\t\t/**\r\n   * Load instance settings.\r\n   * @abstract\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load() {\n\t\t\tthis.is_loaded = true;\n\t\t\tif (!this.is_server_runtime) {\n\t\t\t\tthis.update_trace_enabled();\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Instance;\n}(_stateable2.default);\n\nexports.default = Instance;\n\n\n},{\"../topology/registry/index\":82,\"../utils/is_browser\":102,\"../utils/uid\":106,\"./stateable\":41,\"assert\":107,\"typr\":217}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _is_browser = require('../utils/is_browser');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'common/base/loggable';\n\nvar server_runtime_file = '../../server/base/runtime';\n// const browser_runtime_file = 'see window.devapt().runtime()'\n\n\n/**\r\n * @file Base class to deal with traces.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Loggable = function () {\n\t/**\r\n  * Create a Loggable instance.\r\n  * \r\n  * API:\r\n  * \t\tget_context():string - get instance context.\r\n  * \t\tget_class):string - get instance class.\r\n  * \t\tget_name():string - get instance name.\r\n  * \r\n  * \t\tshould_trace(arg_traces_cfg:plain object):boolean - test if loggers should trace this instance.\r\n  * \r\n  * \t\tget_logger_manager():LoggerManager\r\n  * \t\tupdate_trace_enabled():nothing\r\n  * \r\n  * \t\tenable_trace():nothing\r\n  * \t\tdisable_trace():nothing\r\n  * \t\tget_trace():boolean\r\n  * \t\tset_trace(arg_value):nothing\r\n  * \t\ttoggle_trace():nothing\r\n  * \r\n  * \t\tdebug(...args):nothing\r\n  * \t\tinfo(...args):nothing\r\n  * \t\twarn(...args):nothing\r\n  * \t\terror(...args):nothing\r\n  * \r\n  * \t\tenter_group(arg_group) leave_group(arg_group):nothing\r\n  * \t\tseparate_level_1():nothing\r\n  * \t\tseparate_level_2():nothing\r\n  * \t\tseparate_level_3():nothing\r\n  * \r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager instance.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Loggable(arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, Loggable);\n\n\t\tthis.is_loggable = true;\n\t\tthis.$context = _typr2.default.isString(arg_log_context) ? arg_log_context : context;\n\n\t\tthis.is_trace_enabled = true;\n\n\t\tif (_typr2.default.isObject(arg_logger_manager) && arg_logger_manager.is_logger_manager) {\n\t\t\tthis.logger_manager = arg_logger_manager;\n\t\t}\n\n\t\t// TO SET IN SUB CLASSES\n\t\t// if ( ! this.is_server_runtime )\n\t\t// {\n\t\t// \tthis.update_trace_enabled()\n\t\t// }\n\t}\n\n\t/**\r\n  * Get instance context.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(Loggable, [{\n\t\tkey: 'get_context',\n\t\tvalue: function get_context() {\n\t\t\treturn this.$context;\n\t\t}\n\n\t\t/**\r\n   * Define get instance name method for non Instance classes.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn 'Loggable instance';\n\t\t}\n\n\t\t/**\r\n   * Define get class name method for non Instance classes.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_class',\n\t\tvalue: function get_class() {\n\t\t\treturn 'Loggable';\n\t\t}\n\n\t\t/**\r\n   * Calculate should trace flag.\r\n   * \r\n   * @param {object} arg_traces_cfg - traces settings object as { modules:{ 'pattern':boolean }, classes:{ 'pattern':boolean }, instances:{ 'pattern':boolean } }.\r\n   * \r\n   * @returns {boolean} - trace flag.\r\n   */\n\n\t}, {\n\t\tkey: 'should_trace',\n\t\tvalue: function should_trace(arg_traces_cfg) {\n\t\t\tif (!_typr2.default.isObject(arg_traces_cfg)) {\n\t\t\t\tconsole.error(context + ':should_trace(instance):no traces cfg');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar should_trace = false;\n\n\t\t\t// CALCULATE TRACE FLAG\n\t\t\tshould_trace = should_trace || this.should_trace_module(arg_traces_cfg);\n\t\t\tshould_trace = should_trace || this.should_trace_class(arg_traces_cfg);\n\t\t\tshould_trace = should_trace || this.should_trace_name(arg_traces_cfg);\n\n\t\t\treturn should_trace;\n\t\t}\n\n\t\t/**\r\n   * Calculate should trace flag for modules.\r\n   * \r\n   * @param {object} arg_traces_cfg - traces settings object as { modules:{}, classes:{}, instances:{} }\r\n   * \r\n   * @returns {boolean} - trace flag.\r\n   */\n\n\t}, {\n\t\tkey: 'should_trace_module',\n\t\tvalue: function should_trace_module(arg_traces_cfg) {\n\t\t\treturn this.should_trace_collection_item(arg_traces_cfg, 'modules', 'get_context');\n\t\t}\n\n\t\t/**\r\n   * Calculate should trace flag for classes.\r\n   * \r\n   * @param {object} arg_traces_cfg - traces settings object as { modules:{}, classes:{}, instances:{} }\r\n   * \r\n   * @returns {boolean} - trace flag.\r\n   */\n\n\t}, {\n\t\tkey: 'should_trace_class',\n\t\tvalue: function should_trace_class(arg_traces_cfg) {\n\t\t\treturn this.should_trace_collection_item(arg_traces_cfg, 'classes', 'get_class');\n\t\t}\n\n\t\t/**\r\n   * Calculate should trace flag for instances names.\r\n   * \r\n   * @param {object} arg_traces_cfg - traces settings object as { modules:{}, classes:{}, instances:{} }\r\n   * \r\n   * @returns {boolean} - trace flag.\r\n   */\n\n\t}, {\n\t\tkey: 'should_trace_name',\n\t\tvalue: function should_trace_name(arg_traces_cfg) {\n\t\t\treturn this.should_trace_collection_item(arg_traces_cfg, 'instances', 'get_name');\n\t\t}\n\n\t\t/**\r\n   * Calculate should trace flag for given collection of names or patterns.\r\n   * \r\n   * @param {object} arg_traces_cfg - traces settings object as { modules:{ 'pattern':boolean }, classes:{}, instances:{} }.\r\n   * @param {string} arg_collection_name - 'modules' or 'classes' or 'instances'\r\n   * @param {string} arg_this_item_accessor - this method name to access attribute value.\r\n   * \r\n   * @returns {boolean} - trace flag.\r\n   */\n\n\t}, {\n\t\tkey: 'should_trace_collection_item',\n\t\tvalue: function should_trace_collection_item(arg_traces_cfg, arg_collection_name, arg_this_item_accessor) {\n\t\t\tvar _this = this;\n\n\t\t\t// console.log(context + ':should_trace_collection_item: collection=%s this.aceessor=%s', arg_collection_name, arg_this_item_accessor, arg_traces_cfg)\n\n\t\t\tif (!_typr2.default.isObject(arg_traces_cfg)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar should_trace = false;\n\n\t\t\t// TRACES MODULE ?\n\t\t\tif (_typr2.default.isObject(arg_traces_cfg) && arg_collection_name in arg_traces_cfg) {\n\t\t\t\t(function () {\n\t\t\t\t\tvar collection = arg_traces_cfg[arg_collection_name];\n\t\t\t\t\tvar attribute = _this[arg_this_item_accessor]();\n\n\t\t\t\t\tif (attribute in collection) {\n\t\t\t\t\t\tshould_trace = collection[attribute];\n\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: collection=%s attribute=%s should_trace=%b', arg_collection_name, attribute, should_trace)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: test patterns')\n\n\t\t\t\t\t\tObject.keys(collection).forEach(function (arg_item_pattern) {\n\t\t\t\t\t\t\tif (should_trace) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: collection=%s attribute=%s loop on pattern=%s should_trace=%n', arg_collection_name, attribute, arg_item_pattern, should_trace)\n\n\t\t\t\t\t\t\t// CHECK PATTERN STRING\n\t\t\t\t\t\t\tif (!_typr2.default.isString(arg_item_pattern) || arg_item_pattern.length < 1) {\n\t\t\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: bad pattern=%s', arg_item_pattern)\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// REGEX\n\t\t\t\t\t\t\tif (arg_item_pattern.indexOf('*') > -1 || arg_item_pattern.indexOf('[') > -1 || arg_item_pattern.indexOf('{') > -1) {\n\t\t\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: good pattern=%s this.attribute=%s', arg_item_pattern, attribute)\n\n\t\t\t\t\t\t\t\t// NPORMALIZE PATTERN\n\t\t\t\t\t\t\t\targ_item_pattern = arg_item_pattern == '*' ? '.*' : arg_item_pattern;\n\t\t\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: noarmalized pattern=%s', arg_item_pattern)\n\n\t\t\t\t\t\t\t\t// CREATE REGEX AND TEST MATCHING\n\t\t\t\t\t\t\t\tvar re = new RegExp(arg_item_pattern, 'gi');\n\t\t\t\t\t\t\t\tvar found = re.test(attribute);\n\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\tvar should_trace_pattern = collection[arg_item_pattern];\n\t\t\t\t\t\t\t\t\tshould_trace = should_trace_pattern ? true : false;\n\t\t\t\t\t\t\t\t\t// console.log(context + ':should_trace_collection_item: collection=%s pattern=%s this.attribute=%s should_trace_pattern=%b should_trace=%b', arg_collection_name, arg_item_pattern, attribute, should_trace_pattern, should_trace)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\treturn should_trace;\n\t\t}\n\n\t\t/**\r\n   * Get logger manager.\r\n   * @returns {LoggerManager}\r\n   */\n\n\t}, {\n\t\tkey: 'get_logger_manager',\n\t\tvalue: function get_logger_manager() {\n\t\t\tif (!this.logger_manager && !this.is_server_runtime && !this.is_client_runtime) {\n\t\t\t\tif ((0, _is_browser.is_server)()) {\n\t\t\t\t\t// console.log(context + ':get_logger_manager:name=%s is server', this.get_name())\n\t\t\t\t\tthis.logger_manager = require(server_runtime_file).default.logger_manager;\n\t\t\t\t} else if ((0, _is_browser.is_browser)()) {\n\t\t\t\t\t// console.log(context + ':get_logger_manager:name=%s is browser', this.get_name())\n\t\t\t\t\tvar runtime = window.devapt().runtime();\n\t\t\t\t\tthis.logger_manager = runtime.get_logger_manager();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else\n\t\t\t// {\n\t\t\t// \tconsole.log(context + ':get_logger_manager:name=%s is runtime', this.get_name())\n\t\t\t// }\n\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(this.logger_manager) && this.logger_manager.is_logger_manager, context + ':get_logger_manager:bad logger manager object');\n\t\t\treturn this.logger_manager;\n\t\t}\n\n\t\t/**\r\n   * Update trace enabled flag.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'update_trace_enabled',\n\t\tvalue: function update_trace_enabled() {\n\t\t\tvar logger_mgr = this.get_logger_manager();\n\t\t\tvar traces_settings = logger_mgr.get_traces_settings();\n\t\t\tif (traces_settings) {\n\t\t\t\tvar traces_enabled = this.should_trace(traces_settings);\n\n\t\t\t\tif (traces_enabled) {\n\t\t\t\t\tthis.enable_trace();\n\t\t\t\t\t// console.log(context + ':update_trace_enabled:name=%s, is_trace_enabled', this.get_name(), this.is_trace_enabled)\n\t\t\t\t} else {\n\t\t\t\t\tthis.disable_trace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Enable traces.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'enable_trace',\n\t\tvalue: function enable_trace() {\n\t\t\tthis.is_trace_enabled = true;\n\t\t\tthis.get_logger_manager().enable_trace();\n\t\t}\n\n\t\t/**\r\n   * Disable traces.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'disable_trace',\n\t\tvalue: function disable_trace() {\n\t\t\tthis.is_trace_enabled = false;\n\t\t\tthis.get_logger_manager().disable_trace();\n\t\t}\n\n\t\t/**\r\n   * Get trace flag.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'get_trace',\n\t\tvalue: function get_trace() {\n\t\t\treturn this.get_logger_manager().get_trace() && this.is_trace_enabled;\n\t\t}\n\n\t\t/**\r\n   * Set trace flag.\r\n   * @param {boolean} arg_value - trace flag.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_trace',\n\t\tvalue: function set_trace(arg_value) {\n\t\t\tthis.is_trace_enabled = arg_value ? true : false;\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().enable_trace();\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Toggle trace flag.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'toggle_trace',\n\t\tvalue: function toggle_trace() {\n\t\t\tthis.is_trace_enabled = !this.is_trace_enabled;\n\t\t\tthis.get_logger_manager().toggle_trace();\n\t\t}\n\n\t\t/**\r\n   * Trace DEBUG formatted message.\r\n   * @param {string|array} args - variadic messages to format.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug',\n\t\tvalue: function debug() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tvar _get_logger_manager;\n\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\t\targs[_key] = arguments[_key];\n\t\t\t\t}\n\n\t\t\t\t(_get_logger_manager = this.get_logger_manager()).debug.apply(_get_logger_manager, [Date.now(), this.$context, this.get_name(), '', 'trace'].concat(args));\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO formatted message.\r\n   * @param {string|array} args - variadic messages to format.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info',\n\t\tvalue: function info() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tvar _get_logger_manager2;\n\n\t\t\t\tfor (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\t\targs[_key2] = arguments[_key2];\n\t\t\t\t}\n\n\t\t\t\t(_get_logger_manager2 = this.get_logger_manager()).info.apply(_get_logger_manager2, [Date.now(), this.$context, this.get_name(), '', 'trace'].concat(args));\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace WARN formatted message.\r\n   * @param {string|array} args - variadic messages to format.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn',\n\t\tvalue: function warn() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tvar _get_logger_manager3;\n\n\t\t\t\tfor (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t\t\t\t\targs[_key3] = arguments[_key3];\n\t\t\t\t}\n\n\t\t\t\t(_get_logger_manager3 = this.get_logger_manager()).warn.apply(_get_logger_manager3, [Date.now(), this.$context, this.get_name(), '', 'trace'].concat(args));\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace ERROR formatted message.\r\n   * @param {string|array} args - variadic messages to format.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error',\n\t\tvalue: function error() {\n\t\t\tvar _get_logger_manager4, _console;\n\n\t\t\tfor (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t\t\t\targs[_key4] = arguments[_key4];\n\t\t\t}\n\n\t\t\t(_get_logger_manager4 = this.get_logger_manager()).error.apply(_get_logger_manager4, [Date.now(), this.$context, this.get_name(), '', 'trace'].concat(args));\n\n\t\t\t(_console = console).error.apply(_console, [Date.now(), this.$context, this.get_name(), '', 'trace'].concat(args));\n\t\t}\n\n\t\t/**\r\n   * Trace INFO message on \"enter trace group\".\r\n   * @param {string} arg_group - trace group name.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'enter_group',\n\t\tvalue: function enter_group(arg_group) {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().debug(Date.now(), this.$context, this.get_name(), arg_group, 'enter', '[' + arg_group + '] ------- ENTER -------');\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO message on \"leave trace group\".\r\n   * @param {string} arg_group - trace group name.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'leave_group',\n\t\tvalue: function leave_group(arg_group) {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().debug(Date.now(), this.$context, this.get_name(), arg_group, 'leave', '[' + arg_group + '] ------- LEAVE -------');\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 1 separator.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_1',\n\t\tvalue: function separate_level_1() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().debug(Date.now(), this.$context, this.get_name(), '', 'trace', '==========================================================================================================================');\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 2 separator.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_2',\n\t\tvalue: function separate_level_2() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().debug(Date.now(), this.$context, this.get_name(), '', 'trace', '--------------------------------------------------------------------------------------------------------------------------');\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 3 separator.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_3',\n\t\tvalue: function separate_level_3() {\n\t\t\tif (this.is_trace_enabled) {\n\t\t\t\tthis.get_logger_manager().debug(Date.now(), this.$context, this.get_name(), '', 'trace', '*************************************************************************************************************************');\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Loggable;\n}();\n\nexports.default = Loggable;\n\n\n},{\"../utils/is_browser\":102,\"assert\":107,\"typr\":217}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _settingsable = require('./settingsable');\n\nvar _settingsable2 = _interopRequireDefault(_settingsable);\n\nvar _logger_manager = require('../loggers/logger_manager');\n\nvar _logger_manager2 = _interopRequireDefault(_logger_manager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import Bacon from 'baconjs'\n\n// COMMON IMPORTS\n\n\n// import RenderingDefaultPlugin from '../default_plugins/rendering_default_plugin'\n// import RenderingPlugin        from '../plugins/rendering_plugin'\n\n\nvar context = 'browser/runtime';\n\n/**\r\n * @file base class for runtime - main library interface.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar RuntimeBase = function (_Settingsable) {\n\t_inherits(RuntimeBase, _Settingsable);\n\n\t/**\r\n  * Create Runtime base instance.\r\n  * @extends Settingsable\r\n  * \r\n  * @param {string} arg_log_context - logging context.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction RuntimeBase(arg_log_context) {\n\t\t_classCallCheck(this, RuntimeBase);\n\n\t\t// INIT LOGGING FEATURE\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\t\tvar loggers_settings = undefined;\n\t\tvar logger_manager = new _logger_manager2.default(loggers_settings);\n\n\t\tvar _this = _possibleConstructorReturn(this, (RuntimeBase.__proto__ || Object.getPrototypeOf(RuntimeBase)).call(this, {}, log_context, logger_manager));\n\n\t\t_this.is_base_runtime = true;\n\n\t\t_this.current_state = undefined;\n\t\t_this._state_store = undefined;\n\n\t\tif (!_this.is_server_runtime) {\n\t\t\t_this.update_trace_enabled();\n\t\t}\n\n\t\t_this.info('Runtime is created');\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get runtime logger manager.\r\n  * \r\n  * @returns {LoggerManager}\r\n  */\n\n\n\t_createClass(RuntimeBase, [{\n\t\tkey: 'get_logger_manager',\n\t\tvalue: function get_logger_manager() {\n\t\t\treturn this.logger_manager;\n\t\t}\n\n\t\t/**\r\n   * Get state store, a Redux data store.\r\n   * \r\n   * @returns {object} - Redux state store.\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_store',\n\t\tvalue: function get_state_store() {\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(this._state_store), context + ':get_state_store:bad state_store object');\n\t\t\treturn this._state_store;\n\t\t}\n\n\t\t/**\r\n   * Get store reducers.\r\n   * \r\n   * @returns {function} - reducer pure function: (previous state, action) => new state\r\n   */\n\n\t}, {\n\t\tkey: 'get_store_reducers',\n\t\tvalue: function get_store_reducers() {\n\t\t\treturn function (arg_previous_state, arg_action) {\n\t\t\t\tconsole.info(context + ':get_store_reducers:type=' + arg_action.type);\n\n\t\t\t\treturn arg_previous_state;\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Handle Redux store changes.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_store_change',\n\t\tvalue: function handle_store_change() {\n\t\t\t// let previous_state = this.current_state\n\t\t\t// this.current_state = this._state_store.get_state()\n\n\t\t\t/// TODO\n\n\t\t\t// console.info(context + ':handle_store_change:global')\n\t\t}\n\t}]);\n\n\treturn RuntimeBase;\n}(_settingsable2.default);\n\nexports.default = RuntimeBase;\n\n\n},{\"../loggers/logger_manager\":46,\"./settingsable\":40,\"assert\":107,\"typr\":217}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _immutable = require('immutable');\n\nvar _errorable = require('./errorable');\n\nvar _errorable2 = _interopRequireDefault(_errorable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/base/settingsable';\n\n/**\r\n * @file Settingsable base class: child classes are able to manage settings.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Settingsable = function (_Errorable) {\n\t_inherits(Settingsable, _Errorable);\n\n\t/**\r\n  * Create a Settingsable instance.\r\n  * @extends Loggable\r\n  * \r\n  * Settings are immutable values which define instance initial configuration.\r\n  * Settings are not intended to act as a mutable state.\r\n  * \r\n  * API:\r\n  * \t\tset_settings(arg_settings:plain object or Immutable object):nothing - replace settings Immutable.Map\r\n  * \t\tget_settings(): Immutable.Map - get settings tree.\r\n  * \t\thas_setting(arg_name:string|array): boolean - test if a value is avalaible for given key or path.\r\n  * \t\tget_setting(arg_name:string|array, arg_default): Immutable or js value - get value from a path or a key.\r\n  * \t\tset_setting(arg_name:string|array, arg_value): nothing - set or replace a value at given key or path.\r\n  * \r\n  * @param {Immutable.Map|object} arg_settings - instance settings map.\r\n  * @param {string} arg_log_context - trace context string.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Settingsable(arg_settings, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, Settingsable);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\t\tvar logger_manager = arg_logger_manager ? arg_logger_manager : undefined;\n\t\tif (!logger_manager) {\n\t\t\tlogger_manager = arg_settings && arg_settings.logger_manager ? arg_settings.logger_manager : undefined;\n\t\t}\n\n\t\tvar _this = _possibleConstructorReturn(this, (Settingsable.__proto__ || Object.getPrototypeOf(Settingsable)).call(this, my_context, logger_manager));\n\n\t\t_this.set_settings(arg_settings);\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Set instance settings.\r\n  * @param {Immutable.Map} arg_settings - instance settings map.\r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(Settingsable, [{\n\t\tkey: 'set_settings',\n\t\tvalue: function set_settings(arg_settings) {\n\t\t\tif (arg_settings.has && arg_settings.set & arg_settings.hasIn && arg_settings.setIn && arg_settings.get && arg_settings.getIn) {\n\t\t\t\tthis.$settings = arg_settings;\n\t\t\t} else {\n\t\t\t\tthis.$settings = (0, _immutable.fromJS)(arg_settings);\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Get instance settings.\r\n   * @returns {Immutable.Map}\r\n   */\n\n\t}, {\n\t\tkey: 'get_settings',\n\t\tvalue: function get_settings() {\n\t\t\treturn this.$settings;\n\t\t}\n\n\t\t/**\r\n   * Get instance settings.\r\n   * @returns {Immutable.Map}\r\n   */\n\n\t}, {\n\t\tkey: 'get_settings_js',\n\t\tvalue: function get_settings_js() {\n\t\t\treturn this.$settings.toJS();\n\t\t}\n\n\t\t/**\r\n   * Test if a key exists in settings.\r\n   * @param {string} arg_name - settings value key.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'has_setting',\n\t\tvalue: function has_setting(arg_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(this.$settings.has), context + ':has:bad settings object');\n\n\t\t\tif (_typr2.default.isArray(arg_name)) {\n\t\t\t\treturn this.$settings.hasIn(arg_name);\n\t\t\t}\n\t\t\treturn this.$settings.has(arg_name);\n\t\t}\n\n\t\t/**\r\n   * Get a value in settings for given key.\r\n   * \r\n   * @param {string|array} arg_name - settings value key.\r\n   * @param {any} arg_default - default value.\r\n   * \r\n   * @returns {any} - found value or given default value\r\n   */\n\n\t}, {\n\t\tkey: 'get_setting',\n\t\tvalue: function get_setting(arg_name, arg_default) {\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(this.$settings.has), context + ':has:bad settings object');\n\n\t\t\tif (_typr2.default.isArray(arg_name)) {\n\t\t\t\treturn this.$settings.hasIn(arg_name) ? this.$settings.getIn(arg_name) : arg_default ? arg_default : null;\n\t\t\t}\n\t\t\treturn this.$settings.has(arg_name) ? this.$settings.get(arg_name) : arg_default ? arg_default : null;\n\t\t}\n\n\t\t/**\r\n   * Get a value in settings for given key.\r\n   * \r\n   * @param {string|array} arg_name - settings value key.\r\n   * @param {any} arg_default - default value.\r\n   * \r\n   * @returns {any} - found value or given default value\r\n   */\n\n\t}, {\n\t\tkey: 'get_setting_js',\n\t\tvalue: function get_setting_js(arg_name, arg_default) {\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(this.$settings.has), context + ':has:bad settings object');\n\n\t\t\tvar result = undefined;\n\t\t\tif (_typr2.default.isArray(arg_name)) {\n\t\t\t\tresult = this.$settings.hasIn(arg_name) ? this.$settings.getIn(arg_name) : arg_default ? arg_default : null;\n\t\t\t} else {\n\t\t\t\tresult = this.$settings.has(arg_name) ? this.$settings.get(arg_name) : arg_default ? arg_default : null;\n\t\t\t}\n\t\t\treturn result && _typr2.default.isFunction(result.toJS) ? result.toJS() : result;\n\t\t}\n\n\t\t/**\r\n   * Set a value in settings for given key.\r\n   * @param {string} arg_name - settings value key.\r\n   * @param {any} arg_value - settings value.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_setting',\n\t\tvalue: function set_setting(arg_name, arg_value) {\n\t\t\tif (_typr2.default.isArray(arg_name)) {\n\t\t\t\tthis.$settings = this.$settings.setIn(arg_name, arg_value);\n\t\t\t}\n\t\t\tthis.$settings = this.$settings.set(arg_name, arg_value);\n\t\t}\n\t}]);\n\n\treturn Settingsable;\n}(_errorable2.default);\n\nexports.default = Settingsable;\n\n\n},{\"./errorable\":36,\"assert\":107,\"immutable\":170,\"typr\":217}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _settingsable = require('./settingsable');\n\nvar _settingsable2 = _interopRequireDefault(_settingsable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/base/stateable';\n\n/**\r\n * @file Stateable base class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Stateable = function (_Settingsable) {\n\t_inherits(Stateable, _Settingsable);\n\n\t/**\r\n  * Creates an instance of Stateable: an object with an observable mutable state.\r\n  * @extends Settingsable\r\n  * \r\n  * API:\r\n  * \t\t->get_initial_state():plain object - get state at creation.\r\n  * \t\t->get_state():plain object - get current state.\r\n  * \t\t->get_state_store():object - get state store.\r\n  * \t\t->get_state_path():array|string - get state path into store.\r\n  * \t\t->get_state_value(arg_key_or_path, arg_default_value=undefined):any - get a state value at path.\r\n  * \r\n  * \t\t->handle_state_change(arg_previous_state, arg_new_state):nothing - handle state changes (to be implemented in sub classes)\r\n  * \t\t->register_state_value_change_handle(arg_path, arg_listener):nothing - Register a state value change listener.\r\n  * \r\n  * \t\t->dispatch_action(arg_action_type, arg_options):nothing - dispatch state changes actions.\r\n  * \r\n  * \t\t->get_name():string - get instance name.\r\n  * \r\n  * @param {object} arg_settings - settings plain object\r\n  * @param {object} arg_runtime - client runtime.\r\n  * @param {object} arg_state - component state.\r\n  * @param {string} arg_log_context - context of traces of this instance (optional).\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Stateable(arg_settings, arg_runtime, arg_state, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, Stateable);\n\n\t\tvar log_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (Stateable.__proto__ || Object.getPrototypeOf(Stateable)).call(this, arg_settings, log_context, arg_logger_manager));\n\n\t\t_this.is_stateable = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this._initial_state = arg_state;\n\t\t_this._state_store = _this._runtime.get_state_store();\n\t\t(0, _assert2.default)(_typr2.default.isObject(_this._state_store), context + ':constructor:bad state_store object');\n\n\t\t// SET STATE PATH\n\t\t_this.state_path = undefined;\n\t\tif (arg_state && _typr2.default.isFunction(arg_state.has) && _typr2.default.isFunction(arg_state.get) && arg_state.has('state_path')) {\n\t\t\t_this.state_path = arg_state.get('state_path').toArray();\n\t\t}\n\n\t\t_this._state_value_listeners = [];\n\n\t\t// console.info(context + ':constructor:creating component ' + this.get_name())\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get runtime instance.\r\n  * \r\n  * @returns {RuntimeBase}\r\n  */\n\n\n\t_createClass(Stateable, [{\n\t\tkey: 'get_runtime',\n\t\tvalue: function get_runtime() {\n\t\t\treturn this._runtime;\n\t\t}\n\n\t\t/**\r\n   * Get initial state, an immutable object from a Redux data store.\r\n   * \r\n   * @returns {Immutable.Map} - component state.\r\n   */\n\n\t}, {\n\t\tkey: 'get_initial_state',\n\t\tvalue: function get_initial_state() {\n\t\t\treturn this._initial_state;\n\t\t}\n\n\t\t/**\r\n   * Get current state, an immutable object from a Redux data store.\r\n   * \r\n   * @returns {Immutable.Map} - component state.\r\n   */\n\n\t}, {\n\t\tkey: 'get_state',\n\t\tvalue: function get_state() {\n\t\t\tvar path = this.state_path;\n\n\t\t\t// console.log(context + ':get_state', this._state_store.get_state().toJS())\n\t\t\t// console.log(context + ':state_path', this.state_path)\n\t\t\t// console.log(context + ':state', this._state_store.get_state().getIn(path))\n\t\t\t// console.log(context + ':state js', this._state_store.get_state().getIn(path).toJS())\n\n\t\t\treturn this._state_store.get_state().getIn(path);\n\t\t}\n\n\t\t/**\r\n   * Get current state, an immutable object from a Redux data store.\r\n   * \r\n   * @returns {object} - component state.\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_js',\n\t\tvalue: function get_state_js() {\n\t\t\tvar state = this.get_state();\n\t\t\treturn state && state.toJS ? state.toJS() : {};\n\t\t}\n\n\t\t/**\r\n   * Get state store.\r\n   * \r\n   * @returns {object} - State store.\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_store',\n\t\tvalue: function get_state_store() {\n\t\t\treturn this._state_store;\n\t\t}\n\n\t\t/**\r\n   * Get state path into a Redux data store.\r\n   * \r\n   * @returns {array} - component state path.\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_path',\n\t\tvalue: function get_state_path() {\n\t\t\treturn this.state_path;\n\t\t}\n\n\t\t/**\r\n   * Get a state entry.\r\n   * \r\n   * @param {string|array} arg_key_or_path - key string or strings path array.\r\n   * @param {any} arg_default_value - returned value on not found value result (optional)(default:undefined). \r\n   * \r\n   * @returns {any} - js value (plain object, number, string, array, boolean)\r\n   */\n\n\t}, {\n\t\tkey: 'get_state_value',\n\t\tvalue: function get_state_value(arg_key_or_path) {\n\t\t\tvar arg_default_value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\t\tvar state = this.get_state();\n\n\t\t\tif (_typr2.default.isString(arg_key_or_path)) {\n\t\t\t\tvar value = state.has(arg_key_or_path) ? state.get(arg_key_or_path) : arg_default_value;\n\t\t\t\treturn value && _typr2.default.isFunction(value.toJS) ? value.toJS() : value;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isArray(arg_key_or_path)) {\n\t\t\t\tvar _value = state.hasIn(arg_key_or_path) ? state.getIn(arg_key_or_path) : arg_default_value;\n\t\t\t\treturn _value && _typr2.default.isFunction(_value.toJS) ? _value.toJS() : _value;\n\t\t\t}\n\n\t\t\treturn arg_default_value;\n\t\t}\n\n\t\t/**\r\n   * Handle component state changes.\r\n   * \r\n   * @param {Immutable.Map} arg_previous_state - previous state map.\r\n   * @param {Immutable.Map} arg_new_state - new state map.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_state_change',\n\t\tvalue: function handle_state_change(arg_previous_state, arg_new_state) {\n\t\t\tif (!arg_previous_state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_typr2.default.isArray(this._state_value_listeners) && this._state_value_listeners.length > 0) {\n\t\t\t\tthis._state_value_listeners.forEach(function (handle) {\n\t\t\t\t\tvar prev_value = arg_previous_state.getIn(handle.path);\n\t\t\t\t\tvar new_value = arg_new_state.getIn(handle.path);\n\n\t\t\t\t\t// console.log(context + ':handle_state_change', prev_value, new_value)\n\n\t\t\t\t\tif (!_immutable2.default.is(prev_value, new_value)) {\n\t\t\t\t\t\thandle.listener(handle.path, prev_value, new_value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Register a state value change listener.\r\n   * \r\n   * @param {string|array} arg_path - component state value path array or string with a dot separator.\r\n   * @param {string|function} arg_listener - state value change listener, function or method name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_state_value_change_handle',\n\t\tvalue: function register_state_value_change_handle(arg_path, arg_listener) {\n\t\t\t// CHECK PATH\n\t\t\tif (_typr2.default.isString(arg_path)) {\n\t\t\t\targ_path = arg_path.split('.');\n\t\t\t}\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_path), context + ':handle_state_path_change:bad path array');\n\n\t\t\t// CHECK LISTENER\n\t\t\tif (_typr2.default.isString(arg_listener)) {\n\t\t\t\t(0, _assert2.default)(arg_listener in this, context + ':handle_state_path_change:listerner method string not found');\n\t\t\t\targ_listener = this[arg_listener].bind(this);\n\t\t\t}\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(arg_listener), context + ':handle_state_path_change:bad listener function');\n\n\t\t\tthis._state_value_listeners.push({ path: arg_path, listener: arg_listener });\n\t\t}\n\n\t\t/**\r\n   * Dispatch a state action.\r\n   * \r\n   * @param {string|object} arg_action_type - action type string or action object.\r\n   * @param {object|undefined} arg_options - action options object (optional).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch_action',\n\t\tvalue: function dispatch_action(arg_action_type, arg_options) {\n\t\t\tvar action = undefined;\n\n\t\t\tif (_typr2.default.isString(arg_action_type)) {\n\t\t\t\taction = { type: arg_action_type };\n\t\t\t} else if (_typr2.default.isString(arg_action_type) && _typr2.default.isString(arg_action_type.type)) {\n\t\t\t\taction = arg_action_type;\n\t\t\t} else {\n\t\t\t\t(0, _assert2.default)(false, context + ':dispatch_action:bad action object');\n\t\t\t}\n\n\t\t\tif (_typr2.default.isObject(arg_options)) {\n\t\t\t\taction = Object.assign(action, arg_options);\n\t\t\t}\n\n\t\t\tif (!('component' in action)) {\n\t\t\t\taction.component = this.get_name();\n\t\t\t}\n\n\t\t\t// console.info(context + ':dispatch_action:type=' + action.type + ' for ' + action.component, action)\n\n\t\t\t// assert( T.isObject(this._state_store), context + ':dispatch_action:bad state_store object')\n\t\t\tthis._state_store.dispatch_action(action);\n\t\t}\n\n\t\t/**\r\n   * Get name.\r\n   * \r\n   * @returns {string} - instance name.\r\n   */\n\n\t}, {\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this.get_state_value('name', undefined);\n\t\t}\n\t}]);\n\n\treturn Stateable;\n}(_settingsable2.default);\n\nexports.default = Stateable;\n\n\n},{\"./settingsable\":40,\"assert\":107,\"immutable\":170,\"typr\":217}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _rendering_plugin = require('../plugins/rendering_plugin');\n\nvar _rendering_plugin2 = _interopRequireDefault(_rendering_plugin);\n\nvar _index = require('../rendering/index');\n\nvar DefaultRendering = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar plugin_name = 'default_plugins';\nvar context = 'common/' + plugin_name + '/rendering_default_plugin';\n\n/**\r\n * Plugin class for default rendering_plugin.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar DefaultPlugin = function (_RenderingPlugin) {\n\t_inherits(DefaultPlugin, _RenderingPlugin);\n\n\tfunction DefaultPlugin(arg_runtime, arg_manager) {\n\t\t_classCallCheck(this, DefaultPlugin);\n\n\t\treturn _possibleConstructorReturn(this, (DefaultPlugin.__proto__ || Object.getPrototypeOf(DefaultPlugin)).call(this, arg_runtime, arg_manager, 'DefaultRendering', '1.0.0'));\n\t}\n\n\t/**\r\n  * Get plugin js asset files for browser loading.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(DefaultPlugin, [{\n\t\tkey: 'get_browser_plugin_file_url',\n\t\tvalue: function get_browser_plugin_file_url() {\n\t\t\t// return plugin_name + '/devapt-default-rendering.js'\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n      * Get a feature class.\r\n   * \r\n      * @param {string} arg_class_name - feature class name.\r\n      * \r\n   * @returns {object|undefined} feature class.\r\n      */\n\n\t}, {\n\t\tkey: 'get_feature_class',\n\t\tvalue: function get_feature_class(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':get_feature_class:bad class string');\n\n\t\t\treturn undefined;\n\t\t}\n\t}, {\n\t\tkey: 'has',\n\t\tvalue: function has(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':has:bad class string');\n\n\t\t\tswitch (arg_class_name.toLocaleLowerCase()) {\n\t\t\t\t// SPECIAL CASE, NOT RENDERING FUNCTIONS\n\t\t\t\tcase 'rendering_normalize':\n\t\t\t\tcase 'renderingresult':\n\t\t\t\tcase 'rendering_factory':\n\t\t\t\t\treturn true;\n\n\t\t\t\t// RENDERING FUNCTIONS\n\t\t\t\tcase 'component':\n\t\t\t\tcase 'container':\n\t\t\t\tcase 'button':\n\t\t\t\tcase 'label':\n\t\t\t\tcase 'anchor':\n\t\t\t\tcase 'image':\n\t\t\t\tcase 'inputfield':\n\t\t\t\tcase 'input':\n\t\t\t\tcase 'input-field':\n\t\t\t\tcase 'list':\n\t\t\t\tcase 'table':\n\t\t\t\tcase 'recordstable':\n\t\t\t\tcase 'script':\n\t\t\t\tcase 'menubar':\n\t\t\t\tcase 'page':\n\t\t\t\tcase 'page_content':\n\t\t\t\tcase 'tabs':\n\t\t\t\tcase 'tree':\n\t\t\t\tcase 'tabletree':\n\t\t\t\tcase 'hbox':\n\t\t\t\tcase 'vbox':\n\t\t\t\tcase 'textarea':\n\t\t\t\tcase 'dock':\n\t\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\r\n   * Find a rendering function.\r\n   * @static\r\n   * \r\n   * @param {string} arg_type - rendering item type.\r\n   * \r\n   * @returns {Function} - rendering function.\r\n   */\n\n\t}], [{\n\t\tkey: 'find_rendering_function',\n\t\tvalue: function find_rendering_function(arg_type) {\n\t\t\tif (!_typr2.default.isString(arg_type)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tswitch (arg_type.toLocaleLowerCase()) {\n\t\t\t\t// SPECIAL CASE, NOT RENDERING FUNCTIONS\n\t\t\t\tcase 'rendering_normalize':\n\t\t\t\t\treturn DefaultRendering.rendering_normalize;\n\n\t\t\t\tcase 'renderingresult':\n\t\t\t\t\treturn DefaultRendering.RenderingResult;\n\n\t\t\t\tcase 'rendering_factory':\n\t\t\t\t\treturn DefaultRendering.rendering_factory;\n\n\t\t\t\t// RENDERING FUNCTIONS\n\t\t\t\tcase 'component':\n\t\t\t\t\treturn DefaultRendering.component;\n\n\t\t\t\tcase 'container':\n\t\t\t\t\treturn DefaultRendering.container;\n\n\t\t\t\tcase 'button':\n\t\t\t\t\treturn DefaultRendering.button;\n\n\t\t\t\tcase 'label':\n\t\t\t\t\treturn DefaultRendering.label;\n\n\t\t\t\tcase 'anchor':\n\t\t\t\t\treturn DefaultRendering.anchor;\n\n\t\t\t\tcase 'image':\n\t\t\t\t\treturn DefaultRendering.image;\n\n\t\t\t\tcase 'inputfield':\n\t\t\t\tcase 'input':\n\t\t\t\tcase 'input-field':\n\t\t\t\t\treturn DefaultRendering.input_field;\n\n\t\t\t\tcase 'list':\n\t\t\t\t\treturn DefaultRendering.list;\n\n\t\t\t\tcase 'table':\n\t\t\t\tcase 'recordstable':\n\t\t\t\t\treturn DefaultRendering.table;\n\n\t\t\t\tcase 'script':\n\t\t\t\t\treturn DefaultRendering.script;\n\n\t\t\t\tcase 'menubar':\n\t\t\t\t\treturn DefaultRendering.menubar;\n\n\t\t\t\tcase 'page':\n\t\t\t\t\treturn DefaultRendering.page;\n\n\t\t\t\tcase 'page_content':\n\t\t\t\t\treturn DefaultRendering.page_content;\n\n\t\t\t\tcase 'tabs':\n\t\t\t\t\treturn DefaultRendering.tabs;\n\n\t\t\t\tcase 'tree':\n\t\t\t\t\treturn DefaultRendering.tree;\n\n\t\t\t\tcase 'tabletree':\n\t\t\t\t\treturn DefaultRendering.tabletree;\n\n\t\t\t\tcase 'hbox':\n\t\t\t\t\treturn DefaultRendering.hbox;\n\n\t\t\t\tcase 'vbox':\n\t\t\t\t\treturn DefaultRendering.vbox;\n\n\t\t\t\tcase 'textarea':\n\t\t\t\t\treturn DefaultRendering.textarea;\n\n\t\t\t\tcase 'dock':\n\t\t\t\t\treturn DefaultRendering.dock;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\t}]);\n\n\treturn DefaultPlugin;\n}(_rendering_plugin2.default);\n\nexports.default = DefaultPlugin;\n\n\n},{\"../plugins/rendering_plugin\":52,\"../rendering/index\":60,\"assert\":107,\"typr\":217}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // COMMON IMPORTS\n\n\nvar _types = require('../utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @file Logger base class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar Logger = function () {\n\t/**\r\n  * Create a Logger instance.\r\n  * \r\n  * @param {string} arg_context - trace context.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Logger(arg_enabled) {\n\t\t_classCallCheck(this, Logger);\n\n\t\tthis.is_logger = true;\n\n\t\tthis.is_trace_enabled = false;\n\t\tthis.is_trace_enabled_debug = true;\n\t\tthis.is_trace_enabled_info = true;\n\t\tthis.is_trace_enabled_warn = true;\n\t\tthis.is_trace_enabled_bt = true;\n\t\tthis.is_trace_enabled_error = true;\n\n\t\tthis.set_trace(arg_enabled);\n\n\t\tthis.uid = (0, _uid2.default)();\n\t}\n\n\t/**\r\n  * Get logger uid.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(Logger, [{\n\t\tkey: 'get_uid',\n\t\tvalue: function get_uid() {\n\t\t\treturn this.uid;\n\t\t}\n\n\t\t/**\r\n   * Enable traces.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'enable_trace',\n\t\tvalue: function enable_trace() {\n\t\t\tthis.is_trace_enabled = true;\n\t\t}\n\n\t\t/**\r\n   * Disable traces.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'disable_trace',\n\t\tvalue: function disable_trace() {\n\t\t\tthis.is_trace_enabled = false;\n\t\t}\n\n\t\t/**\r\n   * Get trace flag.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'get_trace',\n\t\tvalue: function get_trace() {\n\t\t\treturn this.is_trace_enabled;\n\t\t}\n\n\t\t/**\r\n   * Set trace flag.\r\n   * \r\n   * @param {boolean} arg_enabled - trace flag.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_trace',\n\t\tvalue: function set_trace(arg_enabled) {\n\t\t\tthis.is_trace_enabled = _types2.default.isBoolean(arg_enabled) ? arg_enabled : false;\n\t\t}\n\n\t\t/**\r\n   * Toggle trace flag.\r\n   * \r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'toggle_trace',\n\t\tvalue: function toggle_trace() {\n\t\t\tthis.is_trace_enabled = !this.is_trace_enabled;\n\t\t}\n\n\t\t/**\r\n   * Get formatted trace message.\r\n   * @static\r\n   * \r\n   * @param {string|array} args - messages to format.\r\n   * \r\n   * @returns {string} - formatted trace message.\r\n   */\n\n\t}, {\n\t\tkey: 'debug',\n\n\n\t\t/**\r\n   * Trace DEBUG formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\t\tvalue: function debug(arg_opds) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_debug) {\n\t\t\t\tif (_types2.default.isFunction(this.debug_self)) {\n\t\t\t\t\tthis.debug_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info',\n\t\tvalue: function info(arg_opds) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_info) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace WARN formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn',\n\t\tvalue: function warn(arg_opds) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_warn) {\n\t\t\t\tif (_types2.default.isFunction(this.warn_self)) {\n\t\t\t\t\tthis.warn_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace ERROR formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error',\n\t\tvalue: function error(arg_opds) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_error) {\n\t\t\t\tif (_types2.default.isFunction(this.error_self)) {\n\t\t\t\t\tthis.error_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Logger DEBUG implementation.\r\n   * @absract\r\n   * @class Logger\r\n   * @method debug_self\r\n   * \r\n   * @param {string} arg_msg - message string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * @absract\r\n   * @class Logger\r\n   * @method info_self\r\n   * \r\n   * @param {string} arg_msg - message string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * @absract\r\n   * @class Logger\r\n   * @method warn_self\r\n   * \r\n   * @param {string} arg_msg - message string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * @absract\r\n   * @class Logger\r\n   * @method error_self\r\n   * \r\n   * @param {string} arg_msg - message string.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t\t/**\r\n   * Trace INFO message on \"enter trace group\".\r\n   * \r\n   * @param {string} arg_context - trace context.\r\n   * @param {string} arg_group - trace group name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'enter_group',\n\t\tvalue: function enter_group(arg_context, arg_group) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_bt) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_context, '[' + arg_group + '] ------- ENTER -------');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO message on \"leave trace group\".\r\n   * \r\n   * @param {string} arg_context - trace context.\r\n   * @param {string} arg_group - trace group name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'leave_group',\n\t\tvalue: function leave_group(arg_context, arg_group) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_bt) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_context, '[' + arg_group + '] ------- LEAVE -------');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 1 separator.\r\n   * \r\n   * @param {string} arg_context - trace context.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_1',\n\t\tvalue: function separate_level_1(arg_context) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_bt) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_context, '==========================================================================================================================');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 2 separator.\r\n   * \r\n   * @param {string} arg_context - trace context.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_2',\n\t\tvalue: function separate_level_2(arg_context) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_bt) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_context, '--------------------------------------------------------------------------------------------------------------------------');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO trace level 3 separator.\r\n   * \r\n   * @param {string} arg_context - trace context.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'separate_level_3',\n\t\tvalue: function separate_level_3(arg_context) {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_bt) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tthis.info_self(arg_context, '*************************************************************************************************************************');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}], [{\n\t\tkey: 'format',\n\t\tvalue: function format(args) {\n\t\t\tif (args == undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (args == null) {\n\t\t\t\treturn 'null';\n\t\t\t}\n\n\t\t\tif (_types2.default.isString(args)) {\n\t\t\t\treturn args;\n\t\t\t}\n\n\t\t\t// console.log('Logger.format:args', typeof args, args)\n\t\t\tif (args.length && args.length > 0) {\n\t\t\t\tvar str = '';\n\n\t\t\t\tvar arg_0 = args[0] ? args[0].toString() : '';\n\t\t\t\tvar parts = arg_0.split('%s', args.length);\n\t\t\t\tvar arg_index = 0;\n\n\t\t\t\tif (parts.length > 1 && args.length > 1) {\n\t\t\t\t\twhile (arg_index < parts.length && arg_index + 1 < args.length) {\n\t\t\t\t\t\t// console.log(str, 'i:' + i)\n\t\t\t\t\t\tstr += parts[arg_index];\n\t\t\t\t\t\tstr += args[arg_index + 1];\n\t\t\t\t\t\targ_index++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (arg_index < parts.length) {\n\t\t\t\t\t\tstr += parts[arg_index];\n\t\t\t\t\t}\n\n\t\t\t\t\targ_index++;\n\t\t\t\t}\n\n\t\t\t\tvar args_count = Math.min(args.length, 4);\n\t\t\t\tfor (; arg_index < args_count; arg_index++) {\n\t\t\t\t\tif (args[arg_index]) {\n\t\t\t\t\t\tstr += (arg_index > 0 ? ':' : '') + args[arg_index].toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\treturn args;\n\t\t}\n\t}]);\n\n\treturn Logger;\n}();\n\nexports.default = Logger;\n\n\n},{\"../utils/types\":105,\"../utils/uid\":106}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @file Console logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar LoggerConsole = function (_Logger) {\n\t_inherits(LoggerConsole, _Logger);\n\n\t/**\r\n  * Create a Console Logger instance.\r\n  * @param {string} arg_context - trace context.\r\n  * @returns {nothing}\r\n  */\n\tfunction LoggerConsole(arg_enabled) {\n\t\t_classCallCheck(this, LoggerConsole);\n\n\t\tvar _this = _possibleConstructorReturn(this, (LoggerConsole.__proto__ || Object.getPrototypeOf(LoggerConsole)).call(this, arg_enabled));\n\n\t\t_this.is_logger_console = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Logger DEBUG implementation.\r\n  * \r\n  * @param {array} arg_opds - log record array.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(LoggerConsole, [{\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self(arg_opds) {\n\t\t\tconsole.log(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self(arg_opds) {\n\t\t\tconsole.info(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self(arg_opds) {\n\t\t\tconsole.warn(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self(arg_opds) {\n\t\t\tconsole.error(_logger2.default.format(arg_opds));\n\t\t}\n\t}]);\n\n\treturn LoggerConsole;\n}(_logger2.default);\n\nexports.default = LoggerConsole;\n\n\n},{\"./logger\":43}],45:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _types = require('../utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // COMMON IMPORTS\n\n\n/**\r\n * @file Console logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar LoggerConsoleStandalone = function (_Logger) {\n\t_inherits(LoggerConsoleStandalone, _Logger);\n\n\t/**\r\n  * Create a Console Logger instance.\r\n  * @param {string} arg_context - trace context.\r\n  * @returns {nothing}\r\n  */\n\tfunction LoggerConsoleStandalone(arg_enabled) {\n\t\t_classCallCheck(this, LoggerConsoleStandalone);\n\n\t\tvar _this = _possibleConstructorReturn(this, (LoggerConsoleStandalone.__proto__ || Object.getPrototypeOf(LoggerConsoleStandalone)).call(this, arg_enabled));\n\n\t\t_this.is_logger_console = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Trace DEBUG formatted message.\r\n  * \r\n  * @param {string|array} arg_opds - variadic messages to format.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(LoggerConsoleStandalone, [{\n\t\tkey: 'debug',\n\t\tvalue: function debug() {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_debug) {\n\t\t\t\tif (_types2.default.isFunction(this.debug_self)) {\n\t\t\t\t\tfor (var _len = arguments.length, arg_opds = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\t\t\targ_opds[_key] = arguments[_key];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.debug_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace INFO formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info',\n\t\tvalue: function info() {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_info) {\n\t\t\t\tif (_types2.default.isFunction(this.info_self)) {\n\t\t\t\t\tfor (var _len2 = arguments.length, arg_opds = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\t\t\targ_opds[_key2] = arguments[_key2];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.info_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace WARN formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn',\n\t\tvalue: function warn() {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_warn) {\n\t\t\t\tif (_types2.default.isFunction(this.warn_self)) {\n\t\t\t\t\tfor (var _len3 = arguments.length, arg_opds = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t\t\t\t\t\targ_opds[_key3] = arguments[_key3];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.warn_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Trace ERROR formatted message.\r\n   * \r\n   * @param {string|array} arg_opds - variadic messages to format.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error',\n\t\tvalue: function error() {\n\t\t\tif (this.is_trace_enabled && this.is_trace_enabled_error) {\n\t\t\t\tif (_types2.default.isFunction(this.error_self)) {\n\t\t\t\t\tfor (var _len4 = arguments.length, arg_opds = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t\t\t\t\t\targ_opds[_key4] = arguments[_key4];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error_self(arg_opds);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Logger DEBUG implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self() {\n\t\t\tfor (var _len5 = arguments.length, arg_opds = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n\t\t\t\targ_opds[_key5] = arguments[_key5];\n\t\t\t}\n\n\t\t\tconsole.log(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self() {\n\t\t\tfor (var _len6 = arguments.length, arg_opds = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n\t\t\t\targ_opds[_key6] = arguments[_key6];\n\t\t\t}\n\n\t\t\tconsole.info(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self() {\n\t\t\tfor (var _len7 = arguments.length, arg_opds = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n\t\t\t\targ_opds[_key7] = arguments[_key7];\n\t\t\t}\n\n\t\t\tconsole.warn(_logger2.default.format(arg_opds));\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self() {\n\t\t\tfor (var _len8 = arguments.length, arg_opds = Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n\t\t\t\targ_opds[_key8] = arguments[_key8];\n\t\t\t}\n\n\t\t\tconsole.error(_logger2.default.format(arg_opds));\n\t\t}\n\t}]);\n\n\treturn LoggerConsoleStandalone;\n}(_logger2.default);\n\nexports.default = LoggerConsoleStandalone;\n\n\n},{\"../utils/types\":105,\"./logger\":43}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _logger_msg_post = require('./logger_msg_post');\n\nvar _logger_msg_post2 = _interopRequireDefault(_logger_msg_post);\n\nvar _is_browser = require('../utils/is_browser');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// const context = 'common/loggers/logger_manager'\n\n\n// GET RUNTIME\nvar server_runtime_file = '../../server/base/runtime';\nvar browser_runtime_file = 'see window.devapt().runtime()';\n\n/**\r\n * @file Logger manager class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar LoggerManager = function () {\n\t/**\r\n  * Create a Logger manager instance.\r\n  * @param {object} arg_settings - loggers settings\r\n  * @returns {nothing}\r\n  */\n\tfunction LoggerManager(arg_settings) {\n\t\t_classCallCheck(this, LoggerManager);\n\n\t\tthis.is_logger_manager = true;\n\t\tthis.loggers = [];\n\n\t\tif (arg_settings) {\n\t\t\tthis.load(arg_settings);\n\t\t}\n\t}\n\n\t/**\r\n  * Load settings.\r\n  * @param {object} arg_settings - loggers settings\r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(LoggerManager, [{\n\t\tkey: 'load',\n\t\tvalue: function load(arg_settings) {\n\t\t\tvar _this = this;\n\n\t\t\t// console.log(arg_settings, context + ':arg_settings')\n\n\n\t\t\tif (this.loggers.length > 0) {\n\t\t\t\tvar old_loggers = this.loggers;\n\t\t\t\told_loggers.forEach(function (logger, index) {\n\t\t\t\t\tdelete _this.loggers[index];\n\t\t\t\t});\n\t\t\t\tthis.loggers = [];\n\t\t\t}\n\n\t\t\t// GET RUNTIME\n\t\t\tvar runtime = undefined;\n\t\t\tif ((0, _is_browser.is_server)()) {\n\t\t\t\truntime = require(server_runtime_file).default;\n\t\t\t} else if ((0, _is_browser.is_browser)()) {\n\t\t\t\truntime = window.devapt().runtime();\n\t\t\t}\n\n\t\t\t// ADD LOGGER ADAPTERS\n\t\t\tif (runtime.node) {\n\t\t\t\tthis.loggers.push(new _logger_msg_post2.default(true, runtime.node.get_logs_bus().get_input_stream()));\n\t\t\t\t// this.info('msg logger created')\n\t\t\t}\n\n\t\t\tif (_typr2.default.isObject(arg_settings) && 'console' in arg_settings) {\n\t\t\t\tvar LoggerConsole = require('./logger_console').default;\n\t\t\t\t// console.log('add console logger')\n\t\t\t\tthis.loggers.push(new LoggerConsole(true, arg_settings['console']));\n\t\t\t}\n\n\t\t\tif ((0, _is_browser.is_server)() && _typr2.default.isObject(arg_settings) && 'winston' in arg_settings) {\n\t\t\t\tvar LoggerWinston = require('./logger_winston').default;\n\t\t\t\t// console.log('add winston logger')\n\t\t\t\tthis.loggers.push(new LoggerWinston(true, arg_settings['winston']));\n\t\t\t}\n\n\t\t\tthis.$settings = arg_settings;\n\t\t}\n\n\t\t/**\r\n   * Get tracez settings for Loggable.should_trace.\r\n   */\n\n\t}, {\n\t\tkey: 'get_traces_settings',\n\t\tvalue: function get_traces_settings() {\n\t\t\tif (_typr2.default.isObject(this.$settings) && _typr2.default.isObject(this.$settings.traces)) {\n\t\t\t\treturn this.$settings.traces;\n\t\t\t}\n\n\t\t\treturn undefined;\n\n\t\t\t// TODO INHERIT FROM SETTINGSABLE\n\t\t\t// return this.get_setting('traces', undefined)\n\t\t}\n\n\t\t/**\r\n   * Enable traces.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'enable_trace',\n\t\tvalue: function enable_trace() {\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.enable_trace();\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Disable traces.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'disable_trace',\n\t\tvalue: function disable_trace() {\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.disable_trace();\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Get trace flag.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'get_trace',\n\t\tvalue: function get_trace() {\n\t\t\tvar trace = true;\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\ttrace = trace && logger.get_trace();\n\t\t\t});\n\t\t\treturn trace;\n\t\t}\n\n\t\t/**\r\n   * Set trace flag.\r\n   * @param {boolean} arg_value - trace flag.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_trace',\n\t\tvalue: function set_trace(arg_value) {\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.set_trace(arg_value);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Toggle trace flag.\r\n   * @returns {boolean}\r\n   */\n\n\t}, {\n\t\tkey: 'toggle_trace',\n\t\tvalue: function toggle_trace() {\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.toggle_trace();\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Loggers DEBUG implementation.\r\n   * @param {string|array} arg_opds - messages strings.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug',\n\t\tvalue: function debug() {\n\t\t\tfor (var _len = arguments.length, arg_opds = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targ_opds[_key] = arguments[_key];\n\t\t\t}\n\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.debug(arg_opds);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Loggers INFO implementation.\r\n   * @param {string|array} arg_opds - messages strings.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info',\n\t\tvalue: function info() {\n\t\t\tfor (var _len2 = arguments.length, arg_opds = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t\t\t\targ_opds[_key2] = arguments[_key2];\n\t\t\t}\n\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.info(arg_opds);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Loggers WARN implementation.\r\n   * @param {string|array} arg_opds - messages strings.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn',\n\t\tvalue: function warn() {\n\t\t\tfor (var _len3 = arguments.length, arg_opds = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n\t\t\t\targ_opds[_key3] = arguments[_key3];\n\t\t\t}\n\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.warn(arg_opds);\n\t\t\t});\n\t\t}\n\n\t\t/**\r\n   * Loggers ERROR implementation.\r\n   * @param {string|array} arg_opds - messages strings.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error',\n\t\tvalue: function error() {\n\t\t\tfor (var _len4 = arguments.length, arg_opds = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n\t\t\t\targ_opds[_key4] = arguments[_key4];\n\t\t\t}\n\n\t\t\tthis.loggers.forEach(function (logger) {\n\t\t\t\tlogger.error(arg_opds);\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn LoggerManager;\n}();\n\nexports.default = LoggerManager;\n\n\n},{\"../utils/is_browser\":102,\"./logger_console\":44,\"./logger_msg_post\":47,\"./logger_winston\":48,\"typr\":217}],47:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _distributed_logs = require('../base/distributed_logs');\n\nvar _distributed_logs2 = _interopRequireDefault(_distributed_logs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // import T from 'typr'\n// import assert from 'assert'\n\n// const context = 'common/loggers/logger_msg_post'\n\n\n/**\r\n * @file Message post logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar LoggerMessagePost = function (_Logger) {\n\t_inherits(LoggerMessagePost, _Logger);\n\n\t/**\r\n  * Create a Console Logger instance.\r\n  * @param {boolean} arg_enabled - traces are enabled.\r\n  * @param {Stream} arg_logs_stream - output logs stream.\r\n  * @returns {nothing}\r\n  */\n\tfunction LoggerMessagePost(arg_enabled, arg_logs_stream) {\n\t\t_classCallCheck(this, LoggerMessagePost);\n\n\t\tvar _this = _possibleConstructorReturn(this, (LoggerMessagePost.__proto__ || Object.getPrototypeOf(LoggerMessagePost)).call(this, arg_enabled));\n\n\t\t_this.is_logger_message_post = true;\n\n\t\t_this.logs_stream = arg_logs_stream;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Logger implementation.\r\n  * \r\n  * @param {string} arg_level - log level string.\r\n  * @param {string} arg_text - message string.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(LoggerMessagePost, [{\n\t\tkey: 'process',\n\t\tvalue: function process(arg_level, arg_text) {\n\t\t\tif (this.get_trace()) {\n\t\t\t\tvar logs_record = {\n\t\t\t\t\tts: new Date().getTime().toString(),\n\t\t\t\t\tlevel: arg_level,\n\t\t\t\t\tlogs: [arg_text]\n\t\t\t\t};\n\n\t\t\t\t// console.log('LoggerMessagePost.process:level=%s text=%s', arg_level, arg_text)\n\t\t\t\tvar msg = new _distributed_logs2.default('this', 'logs_server', logs_record.ts, logs_record.level, logs_record.logs);\n\n\t\t\t\tthis.logs_stream.push(msg);\n\t\t\t\t// this.logs_stream.subscribe(\n\t\t\t\t// \t(logs_record) => {\n\t\t\t\t// \t\tconsole.log('LoggerMessagePost: new logs record on the bus', logs_record)\n\t\t\t\t// \t}\n\t\t\t\t// )\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * Logger DEBUG implementation.\r\n   * @param {string} arg_msg - message string.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self(arg_msg) {\n\t\t\tthis.process('debug', arg_msg);\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * @param {string} arg_msg - message string.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self(arg_msg) {\n\t\t\tthis.process('info', arg_msg);\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * @param {string} arg_msg - message string.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self(arg_msg) {\n\t\t\tthis.process('warn', arg_msg);\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * @param {string} arg_msg - message string.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self(arg_msg) {\n\t\t\tthis.process('error', arg_msg);\n\t\t}\n\t}]);\n\n\treturn LoggerMessagePost;\n}(_logger2.default);\n\nexports.default = LoggerMessagePost;\n\n\n},{\"../base/distributed_logs\":34,\"./logger\":43}],48:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _winston = require('winston');\n\nvar _winston2 = _interopRequireDefault(_winston);\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// const context = 'common/loggers/logger_winston'\n\n\nvar customLevels = {\n\tlevels: {\n\t\tdebug: 3,\n\t\tinfo: 2,\n\t\twarn: 1,\n\t\terror: 0\n\t},\n\tcolors: {\n\t\tdebug: 'blue',\n\t\tinfo: 'green',\n\t\twarn: 'yellow',\n\t\terror: 'red'\n\t}\n};\n\n/**\r\n * @file Winston logger class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar LoggerWinston = function (_Logger) {\n\t_inherits(LoggerWinston, _Logger);\n\n\t/**\r\n  * Create a Winston Logger instance.\r\n  * @param {string} arg_context - trace context.\r\n  * @returns {nothing}\r\n  */\n\tfunction LoggerWinston(arg_enabled, arg_settings) {\n\t\t_classCallCheck(this, LoggerWinston);\n\n\t\tvar _this = _possibleConstructorReturn(this, (LoggerWinston.__proto__ || Object.getPrototypeOf(LoggerWinston)).call(this, arg_enabled));\n\n\t\t_this.is_logger_winston = true;\n\n\t\tvar transports = [];\n\n\t\t// console.log(arg_settings, context + ':' + arg_settings)\n\t\tif (_typr2.default.isObject(arg_settings)) {\n\t\t\tif (_typr2.default.isObject(arg_settings.transports)) {\n\t\t\t\t// console.log(context + ':transport config found', arg_settings.transports)\n\t\t\t\tvar transports_names = Object.keys(arg_settings.transports);\n\t\t\t\ttransports_names.forEach(function (transport_name) {\n\t\t\t\t\tvar transport_cfg = arg_settings.transports[transport_name];\n\n\t\t\t\t\tif (!_typr2.default.isString(transport_cfg.type)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (transport_cfg.type) {\n\t\t\t\t\t\tcase 'file':\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar transport = _this.create_file_transport(transport_cfg);\n\t\t\t\t\t\t\t\ttransports.push(transport);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'console':\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar _transport = _this.create_console_transport(transport_cfg);\n\t\t\t\t\t\t\t\ttransports.push(_transport);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (transports.length == 0) {\n\t\t\t// console.log(context + ':no transport config found')\n\t\t\tvar console_transport = _this.create_console_transport(undefined);\n\t\t\tvar file_transport = _this.create_file_transport(undefined);\n\t\t\ttransports.push(console_transport);\n\t\t\ttransports.push(file_transport);\n\t\t}\n\n\t\tvar logger_cfg = {\n\t\t\tlevels: customLevels.levels,\n\t\t\tcolors: customLevels.colors,\n\t\t\ttransports: transports\n\t\t};\n\n\t\t_this.logger = new _winston2.default.Logger(logger_cfg);\n\n\t\t_winston2.default.addColors(customLevels.colors);\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Create a console transport for Winston logger.\r\n  * @param {object} arg_transport_cfg - console transport settings.\r\n  * @returns {winston.transports.Console}\r\n  */\n\n\n\t_createClass(LoggerWinston, [{\n\t\tkey: 'create_console_transport',\n\t\tvalue: function create_console_transport(arg_transport_cfg) {\n\t\t\targ_transport_cfg = _typr2.default.isObject(arg_transport_cfg) ? arg_transport_cfg : {};\n\n\t\t\t// DEFAULT CONFIGURATION\n\t\t\tvar default_transport_cfg = {\n\t\t\t\tlevel: 'debug',\n\n\t\t\t\ttimestamp: function timestamp() {\n\t\t\t\t\treturn Date.now();\n\t\t\t\t},\n\n\t\t\t\tformatter: function formatter(options) {\n\t\t\t\t\treturn options.timestamp().toString().substr(-6) + ' ' + process.pid + ' ' + options.level.toUpperCase() + ' ' + (undefined !== options.message ? options.message : '') + (options.meta && Object.keys(options.meta).length ? '\\n\\t' + JSON.stringify(options.meta) : '');\n\t\t\t\t},\n\n\t\t\t\tcolorize: true\n\t\t\t};\n\n\t\t\t// CHECK CONFIGURATION\n\t\t\tif (!_typr2.default.isString(arg_transport_cfg.level) || !(arg_transport_cfg.level in customLevels.levels)) {\n\t\t\t\targ_transport_cfg.level = default_transport_cfg.level;\n\t\t\t}\n\t\t\tif (!_typr2.default.isFunction(arg_transport_cfg.timestamp)) {\n\t\t\t\targ_transport_cfg.timestamp = default_transport_cfg.timestamp;\n\t\t\t}\n\t\t\tif (!_typr2.default.isFunction(arg_transport_cfg.formatter)) {\n\t\t\t\targ_transport_cfg.formatter = default_transport_cfg.formatter;\n\t\t\t}\n\n\t\t\treturn new _winston2.default.transports.Console(arg_transport_cfg);\n\t\t}\n\n\t\t/**\r\n   * Create a file transport for Winston logger.\r\n   * @param {object} arg_transport_cfg - file transport settings.\r\n   * @returns {winston.transports.File}\r\n   */\n\n\t}, {\n\t\tkey: 'create_file_transport',\n\t\tvalue: function create_file_transport(arg_transport_cfg) {\n\t\t\targ_transport_cfg = _typr2.default.isObject(arg_transport_cfg) ? arg_transport_cfg : {};\n\n\t\t\t// DEFAULT CONFIGURATION\n\t\t\tvar default_transport_cfg = {\n\t\t\t\tlevel: 'debug',\n\n\t\t\t\ttimestamp: function timestamp() {\n\t\t\t\t\treturn Date.now();\n\t\t\t\t},\n\n\t\t\t\tformatter: function formatter(options) {\n\t\t\t\t\treturn options.timestamp().toString().substr(-6) + ' ' + process.pid + ' ' + options.level.toUpperCase() + ' ' + (undefined !== options.message ? options.message : '') + (options.meta && Object.keys(options.meta).length ? '\\n\\t' + JSON.stringify(options.meta) : '');\n\t\t\t\t},\n\n\t\t\t\tfilename: './tmp/debug.log',\n\t\t\t\tmaxsize: 100000,\n\t\t\t\tmaxFiles: 2\n\t\t\t};\n\t\t\tvar max_size = 100000000;\n\t\t\tvar max_files = 100;\n\n\t\t\t// CHECK CONFIGURATION\n\t\t\tif (!_typr2.default.isString(arg_transport_cfg.level) || !(arg_transport_cfg.level in customLevels.levels)) {\n\t\t\t\targ_transport_cfg.level = default_transport_cfg.level;\n\t\t\t}\n\t\t\tif (!_typr2.default.isFunction(arg_transport_cfg.timestamp)) {\n\t\t\t\targ_transport_cfg.timestamp = default_transport_cfg.timestamp;\n\t\t\t}\n\t\t\tif (!_typr2.default.isFunction(arg_transport_cfg.formatter)) {\n\t\t\t\targ_transport_cfg.formatter = default_transport_cfg.formatter;\n\t\t\t}\n\t\t\tif (!_typr2.default.isString(arg_transport_cfg.filename)) {\n\t\t\t\targ_transport_cfg.filename = default_transport_cfg.filename;\n\t\t\t}\n\t\t\tif (!_typr2.default.isNumber(arg_transport_cfg.maxsize)) {\n\t\t\t\targ_transport_cfg.maxsize = default_transport_cfg.maxsize;\n\t\t\t}\n\t\t\tif (!_typr2.default.isNumber(arg_transport_cfg.maxFiles)) {\n\t\t\t\targ_transport_cfg.maxFiles = default_transport_cfg.maxFiles;\n\t\t\t}\n\t\t\targ_transport_cfg.maxsize = Math.min(arg_transport_cfg.maxsize, max_size);\n\t\t\targ_transport_cfg.maxFiles = Math.min(arg_transport_cfg.maxFiles, max_files);\n\n\t\t\treturn new _winston2.default.transports.File(arg_transport_cfg);\n\t\t}\n\n\t\t/**\r\n   * Logger DEBUG implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'debug_self',\n\t\tvalue: function debug_self(arg_opds) {\n\t\t\tthis.logger.log('debug', arg_opds);\n\t\t}\n\n\t\t/**\r\n   * Logger INFO implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'info_self',\n\t\tvalue: function info_self(arg_opds) {\n\t\t\tthis.logger.log('info', arg_opds);\n\t\t}\n\n\t\t/**\r\n   * Logger WARN implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'warn_self',\n\t\tvalue: function warn_self(arg_opds) {\n\t\t\tthis.logger.log('warn', arg_opds);\n\t\t}\n\n\t\t/**\r\n   * Logger ERROR implementation.\r\n   * \r\n   * @param {array} arg_opds - log record array.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'error_self',\n\t\tvalue: function error_self(arg_opds) {\n\t\t\tthis.logger.log('error', arg_opds);\n\t\t}\n\t}]);\n\n\treturn LoggerWinston;\n}(_logger2.default);\n\nexports.default = LoggerWinston;\n\n\n}).call(this,require('_process'))\n},{\"./logger\":43,\"_process\":113,\"typr\":217,\"winston\":112}],49:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _baconjs = require('baconjs');\n\nvar _baconjs2 = _interopRequireDefault(_baconjs);\n\nvar _objectSizeof = require('object-sizeof');\n\nvar _objectSizeof2 = _interopRequireDefault(_objectSizeof);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar context = 'common/messaging/stream';\n\n/**\r\n * @file Stream class for BaconJS stream wrapping.\r\n * \r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar Stream = function () {\n\t/**\r\n  * Create a stream.\r\n  * @returns {nothing}\r\n  */\n\tfunction Stream() {\n\t\tvar _this = this;\n\n\t\tvar arg_stream = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\t_classCallCheck(this, Stream);\n\n\t\tthis.is_stream = true;\n\n\t\tthis._source_stream = arg_stream ? arg_stream : new _baconjs2.default.Bus();\n\t\tthis._transformed_stream = this._source_stream;\n\n\t\tthis.counters = {};\n\t\tthis.counters.msg_count = 0;\n\t\tthis.counters.msg_size = 0;\n\t\tthis.counters.errors_count = 0;\n\t\tthis.counters.subscribers_count = 0;\n\n\t\tthis._source_stream.onError(function () {\n\t\t\t_this.counters.errors_count += 1;\n\t\t});\n\t}\n\n\t/**\r\n  * Get input stream.\r\n  * \r\n  * @returns {Baconjs.Bus}\r\n  */\n\n\n\t_createClass(Stream, [{\n\t\tkey: 'get_source_stream',\n\t\tvalue: function get_source_stream() {\n\t\t\treturn this._source_stream;\n\t\t}\n\n\t\t/**\r\n   * Create a Stream instance with a DOM event source stream.\r\n   * \r\n   * @param {string} arg_dom_elem - DOM element.\r\n   * @param {string} arg_event_name - DOM event name.\r\n   * \r\n   * @returns {Stream}\r\n   */\n\n\t}, {\n\t\tkey: 'get_transformed_stream',\n\n\n\t\t/**\r\n   * Get output stream.\r\n   * \r\n   * @returns {Baconjs.Bus}\r\n   */\n\t\tvalue: function get_transformed_stream() {\n\t\t\treturn this._transformed_stream;\n\t\t}\n\n\t\t/**\r\n   * Set output stream.\r\n   * \r\n   * @param {Baconjs.Bus} arg_stream - transformed stream.\r\n   * \r\n   * @returns {Stream} - this\r\n   */\n\n\t}, {\n\t\tkey: 'set_transformed_stream',\n\t\tvalue: function set_transformed_stream(arg_stream) {\n\t\t\tthis._transformed_stream = arg_stream;\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Set output stream transformation.\r\n   * \r\n   * @param {function} arg_stream_transformation - function (source stream)=>{ return transformed stream }.\r\n   * \r\n   * @returns {Stream} - this\r\n   */\n\n\t}, {\n\t\tkey: 'set_transformation',\n\t\tvalue: function set_transformation(arg_stream_transformation) {\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(arg_stream_transformation), context + ':transform:bad function');\n\t\t\tvar src = this._source_stream;\n\t\t\tvar tr = this._transformed_stream;\n\n\t\t\ttry {\n\t\t\t\tthis._transformed_stream = arg_stream_transformation(src);\n\t\t\t} catch (e) {\n\t\t\t\tthis._transformed_stream = tr;\n\t\t\t\tconsole.error(context + ':set_transformation', e);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Get counters snapshot.\r\n   */\n\n\t}, {\n\t\tkey: 'get_counters_snapshot',\n\t\tvalue: function get_counters_snapshot() {\n\t\t\tvar counters = Object.assign({}, this.counters);\n\n\t\t\treturn counters;\n\t\t}\n\n\t\t/**\r\n   * Get counters snapshot and reset values to 0.\r\n   */\n\n\t}, {\n\t\tkey: 'get_and_reset_counters_snapshot',\n\t\tvalue: function get_and_reset_counters_snapshot() {\n\t\t\tvar counters = Object.assign({}, this.counters);\n\n\t\t\tthis.counters.msg_count = 0;\n\t\t\tthis.counters.msg_size = 0;\n\t\t\tthis.counters.errors_count = 0;\n\t\t\tthis.counters.subscribers_count = 0;\n\n\t\t\treturn counters;\n\t\t}\n\n\t\t/**\r\n   * Push a value into the stream.\r\n   * @param {any}\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'push',\n\t\tvalue: function push(arg_value) {\n\t\t\tthis.counters.msg_count += 1;\n\t\t\t// this.counters.msg_size += sizeof(arg_value)// TODO circular error\n\n\t\t\t// console.log(arg_value,  context + ':push:value')\n\t\t\tthis._source_stream.push(arg_value);\n\t\t}\n\n\t\t/**\r\n   * Subscribe to stream values.\r\n   * @param {Function} arg_handler - value handler f(value) => nothing\r\n   * @returns {Function} - unsubscribe function\r\n   */\n\n\t}, {\n\t\tkey: 'subscribe',\n\t\tvalue: function subscribe(arg_handler) {\n\t\t\tvar _this2 = this;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(arg_handler), context + ':subscribe:bad handler function');\n\n\t\t\tthis.counters.subscribers_count += 1;\n\n\t\t\tvar unsubscribe = this._transformed_stream.onValue(arg_handler);\n\t\t\treturn function () {\n\t\t\t\t_this2.counters.subscribers_count -= 1;\n\t\t\t\tunsubscribe();\n\t\t\t};\n\n\t\t\t// return this._transformed_stream.onValue(\n\t\t\t// \t(value) => {\n\t\t\t// \t\tconsole.log(value,  context + ':subscribe:value')\n\t\t\t// \t}\n\t\t\t// )\n\t\t}\n\t}], [{\n\t\tkey: 'from_dom_event',\n\t\tvalue: function from_dom_event(arg_dom_elem, arg_event_name) {\n\t\t\treturn new Stream(_baconjs2.default.fromEvent(arg_dom_elem, arg_event_name));\n\t\t}\n\t}]);\n\n\treturn Stream;\n}();\n\nexports.default = Stream;\n\n\n},{\"assert\":107,\"baconjs\":108,\"object-sizeof\":189,\"typr\":217}],50:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _plugin = require('./plugin');\n\nvar _plugin2 = _interopRequireDefault(_plugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/plugins/features_plugin';\n\n/**\r\n * Plugin class for features managing.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar FeaturesPlugin = function (_Plugin) {\n\t_inherits(FeaturesPlugin, _Plugin);\n\n\t/**\r\n  * Create a Featured Plugin instance.\r\n * @extends Instance\r\n * \r\n * @param {RuntimeBase} arg_runtime - runtime instance.\r\n * @param {PluginsManager} arg_manager - plugins manager.\r\n * @param {string} arg_name - plugin name.\r\n * @param {string} arg_class - plugin class name.\r\n * @param {object} arg_settings - plugin settings map.\r\n * @param {string|undefined} arg_log_context - optional.\r\n * \r\n * @returns {nothing}\r\n  */\n\tfunction FeaturesPlugin(arg_runtime, arg_manager, arg_name, arg_class, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, FeaturesPlugin);\n\n\t\tvar _this = _possibleConstructorReturn(this, (FeaturesPlugin.__proto__ || Object.getPrototypeOf(FeaturesPlugin)).call(this, arg_runtime, arg_manager, arg_name, arg_class, arg_settings, arg_log_context ? arg_log_context : context));\n\n\t\t_this.is_features_plugin = true;\n\t\treturn _this;\n\t}\n\n\t/**\r\n     * Create a component instance.\r\n  * \r\n     * @param {string} arg_class_name - type or class feature name.\r\n     * @param {string} arg_name - feature name.\r\n     * @param {object} arg_settings - feature settings plain object.\r\n     * @param {object} arg_state - feature initial state plain object (optional).\r\n  * \r\n     * @returns {object} feature instance.\r\n     */\n\n\n\t_createClass(FeaturesPlugin, [{\n\t\tkey: 'create',\n\t\tvalue: function create(arg_class_name, arg_name, arg_settings, arg_state) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':bad class string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_name), context + ':bad name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_settings), context + ':bad settings object');\n\t\t\tif (arg_state) {\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_state), context + ':bad state object');\n\t\t\t}\n\n\t\t\tvar feature_class = FeaturesPlugin.get_class(arg_class_name);\n\t\t\tif (feature_class) {\n\t\t\t\treturn new feature_class(arg_name, arg_settings, arg_state);\n\t\t\t}\n\n\t\t\t(0, _assert2.default)(false, context + ':create:not yet implemented');\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n      * Get a feature class.\r\n   * @abstract\r\n   * @static\r\n   * \r\n      * @param {string} arg_class_name - feature class name.\r\n   * \r\n      * @returns {object} feature class.\r\n      */\n\n\t}, {\n\t\tkey: 'get_feature_class',\n\n\n\t\t/**\r\n      * Get a feature class.\r\n   * @abstract\r\n   * \r\n      * @param {string} arg_class_name - feature class name.\r\n   * \r\n      * @returns {object} feature class.\r\n      */\n\t\tvalue: function get_feature_class(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':get_feature_class:bad class string');\n\n\t\t\t(0, _assert2.default)(false, context + ':get_feature_class:not yet implemented');\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\r\n      * Test if a feature class is known into self contained plugins.\r\n   * @abstract\r\n   * \r\n      * @param {string} arg_class_name - feature class name.\r\n   * \r\n      * @returns {boolean} feature class found or not.\r\n      */\n\n\t}, {\n\t\tkey: 'has',\n\t\tvalue: function has(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':bad class string');\n\n\t\t\t(0, _assert2.default)(false, context + ':has:not yet implemented');\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\r\n   * Load a feature class from a script file.\r\n   * \r\n   * @param {string} arg_path - path file name\r\n   * \r\n   * @returns {object|undefined} - class object\r\n   */\n\n\t}, {\n\t\tkey: 'load_feature_class',\n\t\tvalue: function load_feature_class(arg_path) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_path), context + ':bad path string');\n\n\t\t\ttry {\n\t\t\t\tvar file_path_name = this._runtime.context.get_absolute_plugin_path(arg_path);\n\t\t\t\t// console.info('loading plugin at [' + arg_path + '] at [' + file_path_name + ']')\n\n\t\t\t\tvar required = require(file_path_name);\n\t\t\t\tvar FeatureClass = 'default' in required ? required.default : required;\n\t\t\t\t// console.log('loading rendering plugin class', PluginClass)\n\n\t\t\t\treturn FeatureClass;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(context + '.load:' + arg_path + ' failed', e);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\t}], [{\n\t\tkey: 'get_class',\n\t\tvalue: function get_class(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':get_class:bad class string');\n\n\t\t\t(0, _assert2.default)(false, context + ':get_class:not yet implemented');\n\n\t\t\treturn false;\n\t\t}\n\t}]);\n\n\treturn FeaturesPlugin;\n}(_plugin2.default);\n\nexports.default = FeaturesPlugin;\n\n\n},{\"./plugin\":51,\"assert\":107,\"typr\":217}],51:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _instance = require('../base/instance');\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/plugins/plugin';\n\n/**\r\n * @file Plugins base class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Plugin = function (_Instance) {\n\t_inherits(Plugin, _Instance);\n\n\t/**\r\n  * Create a plugin instance.\r\n  * @extends Instance\r\n  * \r\n  * @param {PluginsManager} arg_manager - plugins manager.\r\n  * @param {string} arg_name - plugin name.\r\n  * @param {string} arg_class - plugin class name.\r\n  * @param {object} arg_settings - plugin settings map.\r\n  * @param {string|undefined} arg_log_context - optional.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction Plugin(arg_runtime, arg_manager, arg_name, arg_class, arg_settings, arg_log_context) {\n\t\t_classCallCheck(this, Plugin);\n\n\t\tvar create_context = _typr2.default.isString(arg_log_context) ? arg_log_context : context;\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_manager) && arg_manager.is_plugins_manager, create_context + ':bad manager object for ' + arg_name + ' - ' + arg_log_context);\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_name), create_context + ':bad name string');\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_class.toString()), create_context + ':bad class string for ' + arg_name);\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_settings), create_context + ':bad settings object for ' + arg_name);\n\n\t\targ_settings.version = _typr2.default.isString(arg_settings.version) ? arg_settings.version : '0.0.0';\n\n\t\tvar _this = _possibleConstructorReturn(this, (Plugin.__proto__ || Object.getPrototypeOf(Plugin)).call(this, 'plugins', arg_class ? arg_class.toString() : 'Plugin', arg_name, arg_settings, arg_log_context));\n\n\t\t_this.is_plugin = true;\n\n\t\t_this._runtime = arg_runtime;\n\t\t_this.$version = arg_settings.version;\n\t\t_this.manager = arg_manager;\n\t\t_this.is_enabled = false;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get plugin js asset files for browser loading.\r\n  * \r\n  * @returns {string}\r\n  */\n\n\n\t_createClass(Plugin, [{\n\t\tkey: 'get_browser_plugin_file_url',\n\t\tvalue: function get_browser_plugin_file_url() {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Enable a plugin.\r\n   * @abstract\r\n   * \r\n   * @param {object|undefined} arg_context - optional contextual map.\r\n   * \r\n   * @returns {object} - a promise object of a boolean result (success:true, failure:false).\r\n   */\n\n\t}, {\n\t\tkey: 'enable',\n\t\tvalue: function enable() /*arg_context*/{\n\t\t\tthis.is_enabled = true;\n\t\t\tthis.manager.enabled_plugins.add(this);\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\t/**\r\n   * Disable a plugin.\r\n   * @abstract\r\n   * \r\n   * @param {object|undefined} arg_context - optional contextual map.\r\n   * \r\n   * @returns {object} - a promise object of a boolean result (success:true, failure:false).\r\n   */\n\n\t}, {\n\t\tkey: 'disable',\n\t\tvalue: function disable() /*arg_context*/{\n\t\t\tthis.is_enabled = false;\n\t\t\tthis.manager.enabled_plugins.remove(this);\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\t/**\r\n   * Get the plugin version.\r\n  * \r\n   * @returns {string} plugin version\r\n   */\n\n\t}, {\n\t\tkey: 'get_version',\n\t\tvalue: function get_version() {\n\t\t\treturn this.$version;\n\t\t}\n\t}]);\n\n\treturn Plugin;\n}(_instance2.default);\n\nexports.default = Plugin;\n\n\n},{\"../base/instance\":37,\"assert\":107,\"typr\":217}],52:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _features_plugin = require('./features_plugin');\n\nvar _features_plugin2 = _interopRequireDefault(_features_plugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/plugins/rendering_plugin';\n\n/**\r\n * Plugin class for renderers plugin.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar RenderingPlugin = function (_FeaturesPlugin) {\n\t_inherits(RenderingPlugin, _FeaturesPlugin);\n\n\t/**\r\n  * Create a rendering Plugin instance.\r\n * @extends Instance\r\n * \r\n * @param {RuntimeBase} arg_runtime - runtime instance.\r\n * @param {PluginsManager} arg_manager - plugins manager.\r\n * @param {string} arg_name - plugin name.\r\n * @param {string} arg_version - plugin version.\r\n * @returns {nothing}\r\n  */\n\tfunction RenderingPlugin(arg_runtime, arg_manager, arg_name, arg_version) {\n\t\t_classCallCheck(this, RenderingPlugin);\n\n\t\tvar _this = _possibleConstructorReturn(this, (RenderingPlugin.__proto__ || Object.getPrototypeOf(RenderingPlugin)).call(this, arg_runtime, arg_manager, arg_name, 'RenderingPlugin', { version: arg_version }, context));\n\n\t\t_this.is_rendering_plugin = true;\n\n\t\t/**\r\n   * A map of public assets as name : absolute file path.\r\n   * @protected\r\n   */\n\t\t_this.public_assets = {\n\t\t\tcss: {},\n\t\t\tjs: {},\n\t\t\timg: {},\n\t\t\thtml: {}\n\t\t};\n\t\treturn _this;\n\t}\n\n\t/**\r\n     * Get a feature class.\r\n  * @abstract\r\n     * @param {string} arg_class_name - feature class name.\r\n     * @returns {object} feature class.\r\n     */\n\n\n\t_createClass(RenderingPlugin, [{\n\t\tkey: 'get_feature_class',\n\t\tvalue: function get_feature_class(arg_class_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_class_name), context + ':get_feature_class:bad class string');\n\n\t\t\t(0, _assert2.default)(false, context + ':get_feature_class:not yet implemented');\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public assets (CSS, JS, HTML...).\r\n   * @returns {object} - a map of assets: type => public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_assets',\n\t\tvalue: function get_public_assets() {\n\t\t\treturn this.public_assets;\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public  assets.\r\n   * @param {string} arg_type - asset type: js, css, html...\r\n   * @returns {object} - a map of assets:public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_assets_of_type',\n\t\tvalue: function get_public_assets_of_type(arg_type) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_type), context + ':get_public_assets_of_type:bad asset type string');\n\t\t\targ_type = arg_type.toLocaleLowerCase();\n\t\t\treturn this.public_assets[arg_type] ? this.public_assets[arg_type] : {};\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public JS assets.\r\n   * @returns {object} - a map of assets:public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_js_assets',\n\t\tvalue: function get_public_js_assets() {\n\t\t\treturn this.public_assets['js'] ? this.public_assets['js'] : {};\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public image assets.\r\n   * @returns {object} - a map of assets:public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_img_assets',\n\t\tvalue: function get_public_img_assets() {\n\t\t\treturn this.public_assets['img'] ? this.public_assets['img'] : {};\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public css assets.\r\n   * @returns {object} - a map of assets:public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_css_assets',\n\t\tvalue: function get_public_css_assets() {\n\t\t\treturn this.public_assets['css'] ? this.public_assets['css'] : {};\n\t\t}\n\n\t\t/**\r\n   * Get all plugin public html assets.\r\n   * @returns {object} - a map of assets:public name => absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_html_assets',\n\t\tvalue: function get_public_html_assets() {\n\t\t\treturn this.public_assets['html'] ? this.public_assets['html'] : {};\n\t\t}\n\n\t\t/**\r\n   * Add a public asset.\r\n   * @param {string} arg_type - asset type: js, css, html...\r\n   * @param {string} arg_name - asset public name (for url access).\r\n   * @param {string} arg_absolute_path - asset absolute path.\r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'add_public_asset',\n\t\tvalue: function add_public_asset(arg_type, arg_name, arg_absolute_path) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_type), context + ':add_public_asset:bad asset type string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_name), context + ':add_public_asset:bad asset name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_absolute_path), context + ':add_public_asset:bad asset path string');\n\n\t\t\targ_type = arg_type.toLocaleLowerCase();\n\t\t\tif (!_typr2.default.isObject(this.public_assets[arg_type])) {\n\t\t\t\tthis.public_assets[arg_type] = {};\n\t\t\t}\n\n\t\t\tthis.public_assets[arg_type][arg_name] = arg_absolute_path;\n\t\t}\n\n\t\t/**\r\n   * Get a public asset by its name.\r\n   * @param {string} arg_name - asset public name (for url access).\r\n   * @returns {string|null} - absolute file path\r\n   */\n\n\t}, {\n\t\tkey: 'get_public_asset',\n\t\tvalue: function get_public_asset(arg_name) {\n\t\t\tvar types = Object.keys(this.public_assets);\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = types[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar type = _step.value;\n\n\t\t\t\t\tif (arg_name in this.public_assets[type]) {\n\t\t\t\t\t\treturn this.public_assets[type][arg_name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\t/**\r\n   * Find a rendering function.\r\n   * \r\n   * @param {string} arg_type - rendering item type.\r\n   * \r\n   * @returns {Function} - rendering function.\r\n   */\n\n\t}], [{\n\t\tkey: 'find_rendering_function',\n\t\tvalue: function find_rendering_function(arg_type) {\n\t\t\treturn undefined;\n\t\t}\n\t}]);\n\n\treturn RenderingPlugin;\n}(_features_plugin2.default);\n\nexports.default = RenderingPlugin;\n\n\n},{\"./features_plugin\":50,\"assert\":107,\"typr\":217}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar context = 'common/rendering/anchor';\n\n// DEFAULT STATE\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar default_state = {\n\tlabel: undefined,\n\tcommand: undefined\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined,\n\thref: undefined,\n\tblank: false\n};\n\n/**\r\n * Anchor rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\n\tvar href_value = _typr2.default.isString(settings.href) && settings.href.length > 0 ? settings.href : '#';\n\n\t// GET STATE ATTRIBUTES\n\tvar label_value = state.label ? rendering_context.rendering_factory(state.label, arg_rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : 'no label';\n\tvar cmd_value = _typr2.default.isString(state.command) && state.command.length > 0 ? state.command : undefined;\n\tvar url = _typr2.default.isString(state.url) && state.url.length > 0 ? state.url : '';\n\tif (cmd_value) {\n\t\tsettings.class = settings.class ? settings.class + ' devapt-command' : 'devapt-command';\n\t}\n\n\t// BUILD TAG\n\tvar tag_id = settings.id ? settings.id : 'tag_' + (0, _uid2.default)();\n\tvar tag_children = label_value;\n\tvar tag_props = { id: tag_id, style: settings.style, className: settings.class, href: href_value && href_value != '#' ? href_value : '#' + url, attributes: { 'data-devapt-command': cmd_value } };\n\tif (settings.blank) {\n\t\ttag_props._blank = '';\n\t}\n\tvar tag = (0, _h2.default)('a', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"../utils/uid\":106,\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/button';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\ttype: 'button',\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\nvar types = ['button', 'submit'];\n\n/**\r\n * Button rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\n\tvar type_value = _typr2.default.isString(settings.type) && types.indexOf(settings.type) > -1 ? settings.type : 'text';\n\n\t// GET STATE ATTRIBUTES\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = label_value;\n\tvar tag_props = { id: tag_id, type: type_value, style: settings.style, className: settings.class };\n\tvar tag = (0, _h2.default)('button', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/component';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined,\n\tattributes: undefined\n};\n\n/**\r\n * Component rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\t// GET STATE ATTRIBUTES\n\n\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = label_value;\n\tvar tag_props = { id: tag_id, style: settings.style, className: settings.class, attributes: settings.attributes };\n\tvar tag = (0, _h2.default)('div', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _types = require('../utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/container';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\nvar default_state = {\n\titems: undefined // array (rows)\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * container rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\tvar rendering_factory = rendering_context ? rendering_context.rendering_factory : undefined;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\t// GET STATE ATTRIBUTES\n\tvar items_value = _types2.default.isArray(state.items) ? state.items : undefined;\n\n\t// BUILD CELL\n\tvar cell_fn = function cell_fn(cell) {\n\t\treturn _types2.default.isFunction(rendering_factory) ? rendering_factory(cell, rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : cell.toString();\n\t};\n\tvar cell_content = function cell_content(tag, cell_settings, index) {\n\t\t// CELL CONTENT SETTINGS IS AN OBJECT\n\t\tif (_types2.default.isObject(cell_settings)) {\n\t\t\t// CELL CONTENT IS A VALUE\n\t\t\tif (!_types2.default.isString(cell_settings.type) && _types2.default.isString(cell_settings.value)) {\n\t\t\t\tif (!_types2.default.isString(cell_settings.key)) {\n\t\t\t\t\tcell_settings.key = (0, _uid2.default)();\n\t\t\t\t}\n\n\t\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + cell_settings.key }, [cell_settings.value]);\n\t\t\t}\n\n\t\t\t// CELL CONTENT IS A VIEW\n\t\t\tif (!_types2.default.isString(cell_settings.type) && _types2.default.isString(cell_settings.view)) {\n\t\t\t\t// if ( ! T.isString(cell_settings.key) )\n\t\t\t\t// {\n\t\t\t\t// \tcell_settings.key = cell_settings.view\n\t\t\t\t// }\n\n\t\t\t\t// return h(tag, { id:settings.id + '_' + cell_settings.key }, [ cell_fn(cell_settings.view) ] )\n\t\t\t\treturn cell_fn(cell_settings.view);\n\t\t\t}\n\n\t\t\t// CELL IS A RENDERING SETTINGS\n\t\t\tif (_types2.default.isString(cell_settings.type)) {\n\t\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [cell_fn(cell_settings)]);\n\t\t\t}\n\n\t\t\tvar _str_value = cell_settings.toString();\n\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [_str_value]);\n\t\t}\n\n\t\tvar str_value = _types2.default.isString(cell_settings) ? cell_settings : _types2.default.isFunction(cell_settings.toString) ? cell_settings.toString() : 'ERROR';\n\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [str_value]);\n\t};\n\tvar child_content = function child_content(content, index) {\n\t\treturn cell_content('div', content, index);\n\t};\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = items_value ? items_value.map(child_content) : undefined;\n\tvar tag_props = { id: tag_id, style: settings.style, className: settings.class };\n\tvar tag = (0, _h2.default)('div', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"../utils/types\":105,\"../utils/uid\":106,\"./rendering_normalize\":71,\"virtual-dom/h\":232}],57:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _types = require('../utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _rendering_builder = require('./rendering_builder');\n\nvar _rendering_builder2 = _interopRequireDefault(_rendering_builder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// COMMON IMPORTS\nvar context = 'common/rendering/dock';\n\n// DEFAULT STATE\n// NPM IMPORTS\n// import assert from 'assert'\n// import _ from 'lodash'\nvar default_state = {\n\tlabel: undefined,\n\titems: undefined };\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * Dock rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET BLOCK GRID RENDERING FUNCTION\n\n\n\tvar resolver = _rendering_builder2.default.get_rendering_function_resolver();\n\tvar block_grid = resolver ? resolver.find_rendering_function('block_grid') : undefined;\n\tvar dock_content = block_grid ? block_grid : _container2.default;\n\n\t// GET STATE ATTRIBUTES\n\n\tvar tag_dock_id = settings.id;\n\n\t/*\r\n .float-center {\r\n \tdisplay: block;\r\n \tmargin-right: auto;\r\n \tmargin-left: auto;\r\n }\r\n .float-left {\r\n \tfloat: left !important;\r\n }\r\n .float-right {\r\n \tfloat: right !important;\r\n }\r\n */\n\t// BUILD DOCK HEADER\n\t// const tag_header_resize = h('button', { style:'float:right;color:#8a8a8a;cursor:pointer;' } , [ h('span', undefined, [h('span', undefined, 'R')] ) ])\n\tvar tag_content_close = (0, _h2.default)('button', { style: 'float:right;color:#8a8a8a;cursor:pointer;' }, [(0, _h2.default)('span', undefined, [(0, _h2.default)('span', undefined, 'X')])]);\n\tvar tag_header_id = tag_dock_id + '_header';\n\tvar tag_header_children = [/*tag_header_settings, tag_header_resize, */tag_content_close];\n\tvar tag_header_props = { id: tag_header_id, className: 'devapt-dock-header' };\n\tvar tag_header = (0, _h2.default)('div', tag_header_props, tag_header_children);\n\n\t// BUILD DOCK CONTENT\n\tsettings.id = tag_dock_id + '_content';\n\tsettings.class = _types2.default.isString(settings.class) ? settings.class : '';\n\tsettings.class += ' devapt-dock-content';\n\tdock_content(settings, state, rendering_context, rendering_result);\n\tvar tag_content = rendering_result.get_vtree(settings.id);\n\trendering_result.remove_vtree(settings.id);\n\n\t// BUILD DOCK MAIN\n\tvar tag_dock_children = [tag_header, tag_content];\n\tvar tag_dock_props = { id: tag_dock_id, className: 'devapt-dock' };\n\tvar tag_dock = (0, _h2.default)('div', tag_dock_props, tag_dock_children);\n\n\trendering_result.add_vtree(tag_dock_id, tag_dock);\n\n\treturn rendering_result;\n};\n\n\n},{\"../utils/types\":105,\"./container\":56,\"./rendering_builder\":67,\"./rendering_normalize\":71,\"virtual-dom/h\":232}],58:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\n// import assert from 'assert'\n// import _ from 'lodash'\n// import h from 'virtual-dom/h'\n\n// COMMON IMPORTS\n// import T from '../utils/types'\nvar context = 'common/rendering/hbox';\n\n// DEFAULT STATE\nvar default_state = {\n\tlabel: undefined,\n\titems: undefined };\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * HBox rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET STATE ATTRIBUTES\n\n\n\tstate.columns = undefined;\n\tstate.footers = undefined;\n\n\treturn (0, _table2.default)(settings, state, rendering_context, rendering_result);\n};\n\n\n},{\"./rendering_normalize\":71,\"./table\":75}],59:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/image';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {}\n// label:undefined\n\n\n// DEFAULT SETTINGS\n;var default_settings = {\n\tsrc: undefined,\n\talt: undefined,\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * Image rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\n\tvar src_value = _typr2.default.isString(settings.source) && settings.source.length > 0 ? settings.source : undefined;\n\tvar alt_value = _typr2.default.isString(settings.alt) && settings.alt.length > 0 ? settings.alt : undefined;\n\n\t// GET STATE ATTRIBUTES\n\t// const label_value = T.isString(state.label) ? state.label : undefined\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = undefined;\n\tvar tag_props = { id: tag_id, src: src_value, alt: alt_value, style: settings.style, class: settings.class };\n\tvar tag = (0, _h2.default)('img', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],60:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.dock = exports.textarea = exports.tabs = exports.page_content = exports.page = exports.script = exports.menubar = exports.vbox = exports.hbox = exports.label = exports.image = exports.list = exports.anchor = exports.table = exports.button = exports.input_field = exports.container = exports.component = exports.rendering_normalize = exports.rendering_factory = exports.rendering_function = exports.RenderingResult = undefined;\n\nvar _rendering_normalize = require('./rendering_normalize');\n\nvar _rendering_normalize2 = _interopRequireDefault(_rendering_normalize);\n\nvar _rendering_result = require('./rendering_result');\n\nvar _rendering_result2 = _interopRequireDefault(_rendering_result);\n\nvar _rendering_factory = require('./rendering_factory');\n\nvar _rendering_factory2 = _interopRequireDefault(_rendering_factory);\n\nvar _rendering_function = require('./rendering_function');\n\nvar _rendering_function2 = _interopRequireDefault(_rendering_function);\n\nvar _component = require('./component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _container = require('./container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _input_field = require('./input_field');\n\nvar _input_field2 = _interopRequireDefault(_input_field);\n\nvar _button = require('./button');\n\nvar _button2 = _interopRequireDefault(_button);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nvar _anchor = require('./anchor');\n\nvar _anchor2 = _interopRequireDefault(_anchor);\n\nvar _list = require('./list');\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _image = require('./image');\n\nvar _image2 = _interopRequireDefault(_image);\n\nvar _label = require('./label');\n\nvar _label2 = _interopRequireDefault(_label);\n\nvar _hbox = require('./hbox');\n\nvar _hbox2 = _interopRequireDefault(_hbox);\n\nvar _vbox = require('./vbox');\n\nvar _vbox2 = _interopRequireDefault(_vbox);\n\nvar _menubar = require('./menubar');\n\nvar _menubar2 = _interopRequireDefault(_menubar);\n\nvar _script = require('./script');\n\nvar _script2 = _interopRequireDefault(_script);\n\nvar _page = require('./page');\n\nvar _page2 = _interopRequireDefault(_page);\n\nvar _page_content = require('./page_content');\n\nvar _page_content2 = _interopRequireDefault(_page_content);\n\nvar _tabs = require('./tabs');\n\nvar _tabs2 = _interopRequireDefault(_tabs);\n\nvar _textarea = require('./textarea');\n\nvar _textarea2 = _interopRequireDefault(_textarea);\n\nvar _dock = require('./dock');\n\nvar _dock2 = _interopRequireDefault(_dock);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import treetable       from './treetable'\n\n// COMMON IMPORTS\nexports.RenderingResult = _rendering_result2.default;\nexports.rendering_function = _rendering_function2.default;\nexports.rendering_factory = _rendering_factory2.default;\nexports.rendering_normalize = _rendering_normalize2.default;\nexports.component = _component2.default;\nexports.container = _container2.default;\nexports.input_field = _input_field2.default;\nexports.button = _button2.default;\nexports.table = _table2.default;\nexports.anchor = _anchor2.default;\nexports.list = _list2.default;\nexports.image = _image2.default;\nexports.label = _label2.default;\nexports.hbox = _hbox2.default;\nexports.vbox = _vbox2.default;\nexports.menubar = _menubar2.default;\nexports.script = _script2.default;\nexports.page = _page2.default;\nexports.page_content = _page_content2.default;\nexports.tabs = _tabs2.default;\nexports.textarea = _textarea2.default;\nexports.dock = _dock2.default;\n\n\n},{\"./anchor\":53,\"./button\":54,\"./component\":55,\"./container\":56,\"./dock\":57,\"./hbox\":58,\"./image\":59,\"./input_field\":61,\"./label\":62,\"./list\":63,\"./menubar\":64,\"./page\":65,\"./page_content\":66,\"./rendering_factory\":69,\"./rendering_function\":70,\"./rendering_normalize\":71,\"./rendering_result\":73,\"./script\":74,\"./table\":75,\"./tabs\":76,\"./textarea\":77,\"./vbox\":78}],61:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/input_field';\n\n// INPUT FIELD\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined,\n\tplaceholder: 'enter a string value',\n\tdefault: ''\n};\n\nvar default_settings = {\n\tformat: 'text',\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\nvar formats = ['text', 'number', 'date', 'datetime', 'datetime-local', 'email', 'month', 'password', 'search', 'tel', 'time', 'url', 'week'];\n\n/**\r\n * Input field rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\n\tvar format = _typr2.default.isString(settings.format) && formats.indexOf(settings.format) > -1 ? settings.format : 'text';\n\tvar css_label_class = _typr2.default.isString(settings.css_class_label) ? settings.css_class_label : undefined;\n\n\t// GET STATE ATTRIBUTES\n\tvar placeholder_value = _typr2.default.isString(state.placeholder) ? state.placeholder : undefined;\n\tvar default_value = _typr2.default.isString(state.default) || _typr2.default.isNumber(state.default) ? state.default : undefined;\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\tvar label_position = _typr2.default.isString(state.label_position) ? state.label_position : 'top';\n\tvar label_style = _typr2.default.isObject(state.label_style) ? state.label_style : undefined;\n\tvar label_class = _typr2.default.isString(state.label_class) ? state.label_class : '';\n\tvar label_size = _typr2.default.isNumber(state.label_size) && state.label_size > 0 ? state.label_size < 12 ? state.label_size : 11 : 3;\n\n\t// BUILD INPUT TAG\n\t// const input_id = label_value ? settings.id : settings.id\n\tvar input_id = label_value ? settings.id + '_input' : settings.id;\n\tvar input_children = undefined;\n\tvar input_props = { id: input_id, type: format, value: default_value, placeholder: placeholder_value, style: settings.style, class: settings.class };\n\tvar input = (0, _h2.default)('input', input_props, input_children);\n\n\tif (!label_value) {\n\t\trendering_result.add_vtree(input_id, input);\n\t\treturn rendering_result;\n\t}\n\n\t// BUILD LABEL TAG\n\tvar label_id = input_id + '_label';\n\tvar label_props = { id: label_id, attributes: { for: input_id } };\n\tif (label_style) {\n\t\tlabel_props.style = label_style;\n\t}\n\tif (css_label_class) {\n\t\tlabel_props.class = css_label_class;\n\t}\n\tif (label_class) {\n\t\tlabel_props.class = label_props.class ? label_props.class + label_class : label_class;\n\t}\n\tvar label = undefined;\n\tif (label_position == 'top') {\n\t\tlabel = (0, _h2.default)('label', label_props, [label_value, input]);\n\t} else if (label_position == 'left') {\n\t\tvar left = (0, _h2.default)('div', { style: 'float:left;width:' + label_size * (100 / 12) + '%;' }, [(0, _h2.default)('label', label_props, [label_value])]);\n\t\tvar right = (0, _h2.default)('div', { style: 'float:right;width:' + (12 - label_size) * (100 / 12) + '%;' }, [input]);\n\t\tlabel = (0, _h2.default)('div', { className: '' }, [left, right]);\n\t} else if (label_position == 'right') {\n\t\tvar _left = (0, _h2.default)('div', { style: 'float:right;width:' + (12 - label_size) * (100 / 12) + '%;' }, [input]);\n\t\tvar _right = (0, _h2.default)('div', { style: 'float:left;width:' + label_size * (100 / 12) + '%;' }, [(0, _h2.default)('label', label_props, [label_value])]);\n\t\tlabel = (0, _h2.default)('div', { className: '' }, [_left, _right]);\n\t} else {\n\t\tlabel = (0, _h2.default)('label', label_props, [label_value, input]);\n\t}\n\n\tvar div = (0, _h2.default)('div', { id: settings.id }, [label]);\n\trendering_result.add_vtree(settings.id, div);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],62:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/label';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * Label rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\t// GET STATE ATTRIBUTES\n\n\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = label_value;\n\tvar tag_props = { id: tag_id, style: settings.style, class: settings.class };\n\tvar tag = (0, _h2.default)('span', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],63:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/list';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined,\n\titems: undefined // array (rows)\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\ttype: 'ul',\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\nvar types = ['ul', 'ol'];\n\n/**\r\n * List rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\n\tvar type_value = _typr2.default.isString(settings.type) && types.indexOf(settings.type) > -1 ? settings.type : 'ul';\n\n\t// GET STATE ATTRIBUTES\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\tvar items_value = _typr2.default.isArray(state.items) ? state.items : undefined;\n\n\t// BUILD THEAD\n\tvar cell_fn = function cell_fn(cell) {\n\t\treturn _typr2.default.isFunction(rendering_context.rendering_factory) ? rendering_context.rendering_factory(cell, rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : cell.toString();\n\t};\n\tvar li_fn = function li_fn(content) {\n\t\treturn (0, _h2.default)('li', undefined, cell_fn(content));\n\t};\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = items_value ? items_value.map(li_fn) : undefined;\n\tvar tag_props = { id: tag_id, style: settings.style, class: settings.class };\n\tvar tag = (0, _h2.default)(type_value, tag_props, label_value ? [label_value].concat(tag_children) : tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],64:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\n// import h from 'virtual-dom/h'\n\n// COMMON IMPORTS\nvar context = 'common/rendering/menubar';\n\n// DEFAULT STATE\n// NPM IMPORTS\nvar default_state = {\n\titems: undefined };\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * HBox rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET STATE ATTRIBUTES\n\n\n\tstate.columns = undefined;\n\tstate.footers = undefined;\n\tstate.label = undefined;\n\n\tstate.items = state.items.map(function (item) {\n\t\tif (_typr2.default.isArray(item)) {\n\t\t\tif (item.length > 0) {\n\t\t\t\titem = item[0];\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (_typr2.default.isString(item)) {\n\t\t\treturn {\n\t\t\t\ttype: 'anchor',\n\t\t\t\tsettings: {},\n\t\t\t\tstate: { label: item }\n\t\t\t};\n\t\t}\n\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.label) && item.label.length > 0) {\n\t\t\titem.settings = item.settings ? item.settings : {};\n\t\t\treturn {\n\t\t\t\ttype: 'anchor',\n\t\t\t\tsettings: {\n\t\t\t\t\tclass: item.settings.class,\n\t\t\t\t\tstyle: item.settings.style,\n\t\t\t\t\tid: item.settings.id,\n\t\t\t\t\thref: item.url,\n\t\t\t\t\tcommand: item.command,\n\t\t\t\t\tblank: item.blank\n\t\t\t\t},\n\t\t\t\tstate: {\n\t\t\t\t\tlabel: item.label\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t});\n\n\tsettings.class += ' devapt-kindof-menubar';\n\n\treturn (0, _table2.default)(settings, state, rendering_context, rendering_result);\n};\n\n\n},{\"./rendering_normalize\":71,\"./table\":75,\"typr\":217}],65:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/rendering/page';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n\n// import assert from 'assert'\nvar default_state = {\n\ttitle: undefined,\n\tmetas: undefined, // array of head tags\n\n\tbody_headers: undefined, // array of tags\n\tbody_contents: undefined, // array of tags\n\tbody_footers: undefined, // array of tags\n\n\thead_styles_tags: [],\n\thead_styles_urls: [],\n\n\thead_scripts_tags: [],\n\thead_scripts_urls: [],\n\n\tbody_styles_tags: [],\n\tbody_styles_urls: [],\n\n\tbody_scripts_tags: [],\n\tbody_scripts_urls: []\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\thtml_lang: undefined,\n\thtml_class: undefined,\n\thtml_prefix: undefined,\n\n\thead_charset: 'utf-8',\n\thead_viewport: undefined,\n\thead_description: undefined,\n\thead_robots: undefined,\n\n\tbody_class: undefined,\n\n\tassets_urls_templates: {\n\t\tscript: '{{url}}',\n\t\tstyle: '{{url}}',\n\t\timage: '{{url}}',\n\t\thtml: '{{url}}'\n\t}\n};\n\nvar get_url = function get_url(arg_template, arg_url, arg_absolute) {\n\treturn arg_absolute ? arg_url : arg_template.replace('{{url}}', arg_url);\n};\n\n/**\r\n * Page rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\tvar rendering_factory = rendering_context ? rendering_context.rendering_factory : undefined;\n\n\t// GET SETTINGS ATTRIBUTES\n\tvar html_lang_value = _typr2.default.isString(settings.html_lang) ? settings.html_lang : undefined;\n\tvar html_class_value = _typr2.default.isString(settings.html_class) ? settings.html_class : undefined;\n\tvar html_prefix_value = _typr2.default.isString(settings.html_prefix) ? settings.html_prefix : undefined;\n\tvar head_charset_value = _typr2.default.isString(settings.head_charset) ? settings.head_charset : 'UTF-8';\n\tvar head_viewport_value = _typr2.default.isString(settings.head_viewport) ? settings.head_viewport : 'width=device-width';\n\tvar head_description_value = _typr2.default.isString(settings.head_description) ? settings.head_description : undefined;\n\tvar head_robots_value = _typr2.default.isString(settings.head_robots) ? settings.head_robots : undefined;\n\tvar body_class_value = _typr2.default.isString(settings.body_class) ? settings.body_class : undefined;\n\n\t// GET STATE ATTRIBUTES\n\tvar title_value = _typr2.default.isString(state.title) ? state.title : 'Devapt';\n\tvar metas_value = _typr2.default.isArray(state.metas) ? state.metas : [];\n\tvar body_headers_value = _typr2.default.isArray(state.body_headers) ? state.body_headers : undefined;\n\tvar body_contents_value = _typr2.default.isArray(state.body_contents) ? state.body_contents : undefined;\n\tvar body_footers_value = _typr2.default.isArray(state.body_footers) ? state.body_footers : undefined;\n\n\t// BUILD CONTENT\n\tvar render = function render(item) {\n\t\t// console.log(item, context + ':render:item')\n\t\treturn _typr2.default.isFunction(rendering_factory) ? rendering_factory(item, rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : item.toString();\n\t};\n\n\t// BUILD SCRIPTS TAGS\n\tvar script = function script(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.id) && item.id.length > 0 && _typr2.default.isString(item.content) && item.content.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/javascript';\n\n\t\t\treturn (0, _h2.default)('script', { id: item.id, type: type }, item.content);\n\t\t}\n\t};\n\n\t// BUILD STYLES TAGS\n\tvar style = function style(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.id) && item.id.length > 0 && _typr2.default.isString(item.content) && item.content.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/css';\n\t\t\tvar media = _typr2.default.isString(item.media) && item.media.length > 0 ? item.media : 'all';\n\n\t\t\treturn (0, _h2.default)('style', { id: item.id, type: type, media: media }, item.content);\n\t\t}\n\t};\n\n\t// BUILD HEAD STYLES/LINKS URLS\n\tvar link = function link(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.href) && item.href.length > 0 && _typr2.default.isString(item.id) && item.id.length > 0) {\n\t\t\tvar rel = _typr2.default.isString(item.rel) && item.rel.length > 0 ? item.rel : 'stylesheet';\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/css';\n\t\t\tvar media = _typr2.default.isString(item.media) && item.media.length > 0 ? item.media : 'all';\n\t\t\tvar _title = _typr2.default.isString(item.title) && item.title.length > 0 ? item.title : undefined;\n\t\t\tvar url_template = rel == 'stylesheet' ? settings.assets_urls_templates.style : settings.assets_urls_templates.image;\n\n\t\t\treturn (0, _h2.default)('link', { id: item.id, href: get_url(url_template, item.href, item.absolute), type: type, media: media, rel: rel, title: _title });\n\t\t}\n\t};\n\n\t// BUILD HEAD SCRIPTS URLS\n\tvar script_url = function script_url(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.src) && item.src.length > 0 && _typr2.default.isString(item.id) && item.id.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/javascript';\n\n\t\t\treturn (0, _h2.default)('script', { id: item.id, src: get_url(settings.assets_urls_templates.script, item.src, item.absolute), type: type });\n\t\t}\n\t};\n\n\t// BUILD TITLE TAG\n\tvar title = (0, _h2.default)('title', undefined, title_value);\n\n\t// BUILD METAS TAG\n\tvar meta_charset = _typr2.default.isString(head_charset_value) ? (0, _h2.default)('meta', { charSet: head_charset_value }, undefined) : undefined;\n\tvar meta_viewport = _typr2.default.isString(head_viewport_value) ? (0, _h2.default)('meta', { name: 'viewport', content: head_viewport_value }) : undefined;\n\tvar meta_description = _typr2.default.isString(head_description_value) ? (0, _h2.default)('meta', { name: 'description', content: head_description_value }) : undefined;\n\tvar meta_robots = _typr2.default.isString(head_robots_value) ? (0, _h2.default)('meta', { name: 'robots', content: head_robots_value }) : undefined;\n\tvar meta = function meta(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.name) && item.name.length > 0 && _typr2.default.isString(item.content)) {\n\t\t\treturn (0, _h2.default)('meta', { name: item.name, content: item.content });\n\t\t}\n\t};\n\tvar metas = [meta_charset, meta_viewport, meta_description, meta_robots].concat(metas_value.map(meta));\n\n\t// BUILD BODY TAG\n\tvar headers_children = _typr2.default.isArray(body_headers_value) ? body_headers_value.map(render) : undefined;\n\tvar headers = (0, _h2.default)('header', undefined, headers_children);\n\n\tvar contents_children = _typr2.default.isArray(body_contents_value) ? body_contents_value.map(render) : undefined;\n\tvar contents = (0, _h2.default)('div', { id: 'content' }, contents_children);\n\n\tvar footers_children = _typr2.default.isArray(body_footers_value) ? body_footers_value.map(render) : undefined;\n\tvar footers = (0, _h2.default)('footer', undefined, footers_children);\n\n\tvar body_styles_tags = (_typr2.default.isArray(state.body_styles_tags) ? _lodash2.default.concat(rendering_result.body_styles_tags, state.body_styles_tags) : rendering_result.body_styles_tags).map(style);\n\tvar body_styles_urls = (_typr2.default.isArray(state.body_styles_urls) ? _lodash2.default.concat(rendering_result.body_styles_urls, state.body_styles_urls) : rendering_result.body_styles_urls).map(link);\n\tvar body_scripts_tags = (_typr2.default.isArray(state.body_scripts_tags) ? _lodash2.default.concat(rendering_result.body_scripts_tags, state.body_scripts_tags) : rendering_result.body_scripts_tags).map(script);\n\tvar body_scripts_urls = (_typr2.default.isArray(state.body_scripts_urls) ? _lodash2.default.concat(rendering_result.body_scripts_urls, state.body_scripts_urls) : rendering_result.body_scripts_urls).map(script_url);\n\n\tvar body_children = [headers, contents, footers, body_styles_urls, body_styles_tags, body_scripts_urls, body_scripts_tags];\n\tvar body_props = { class: body_class_value };\n\tvar body = (0, _h2.default)('body', body_props, body_children);\n\n\t// BUILD ASSETS TAGS\n\tvar head_styles_urls = (_typr2.default.isArray(state.head_styles_urls) ? _lodash2.default.concat(rendering_result.head_styles_urls, state.head_styles_urls) : rendering_result.head_styles_urls).map(link);\n\tvar head_links_urls = (_typr2.default.isArray(state.head_links_urls) ? _lodash2.default.concat(rendering_result.head_links_urls, state.head_links_urls) : rendering_result.head_links_urls).map(link);\n\tvar head_scripts_urls = (_typr2.default.isArray(state.head_scripts_urls) ? _lodash2.default.concat(rendering_result.head_scripts_urls, state.head_scripts_urls) : rendering_result.head_scripts_urls).map(script_url);\n\tvar head_scripts_tags = (_typr2.default.isArray(state.head_scripts_tags) ? _lodash2.default.concat(rendering_result.head_scripts_tags, state.head_scripts_tags) : rendering_result.head_scripts_tags).map(script);\n\tvar head_styles_tags = (_typr2.default.isArray(state.head_styles_tags) ? _lodash2.default.concat(rendering_result.head_styles_tags, state.head_styles_tags) : rendering_result.head_styles_tag).map(style);\n\n\t// BUILD HEAD TAG\n\tvar head_children = [title].concat(metas, head_styles_urls, head_links_urls, head_scripts_urls, head_styles_tags, head_scripts_tags);\n\tvar head_props = undefined;\n\tvar head = (0, _h2.default)('head', head_props, head_children);\n\n\t// BUILD HTML TAG\n\tvar page_children = [head, body];\n\tvar page_props = { lang: html_lang_value, class: html_class_value, prefix: html_prefix_value };\n\tvar page = (0, _h2.default)('html', page_props, page_children);\n\n\trendering_result.add_vtree('page', page);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"lodash\":187,\"typr\":217,\"virtual-dom/h\":232}],66:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/rendering/page_content';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// import RenderingResult from './rendering_result'\n\n// import assert from 'assert'\nvar default_state = {\n\tbody_contents: undefined // array of tags\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tassets_urls_templates: {\n\t\tscript: '{{url}}',\n\t\tstyle: '{{url}}',\n\t\timage: '{{url}}',\n\t\thtml: '{{url}}'\n\t}\n};\n\nvar get_url = function get_url(arg_template, arg_url) {\n\treturn arg_template.replace('{{url}}', arg_url);\n};\n\n/**\r\n * Page rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\tvar rendering_factory = rendering_context ? rendering_context.rendering_factory : undefined;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\t// GET STATE ATTRIBUTES\n\tvar body_contents_value = _typr2.default.isArray(state.body_contents) ? state.body_contents : undefined;\n\n\t// BUILD CONTENT\n\tvar render = function render(item) {\n\t\treturn _typr2.default.isFunction(rendering_factory) ? rendering_factory(item, rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : item.toString();\n\t};\n\n\t// BUILD SCRIPTS TAGS\n\tvar script = function script(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.id) && item.id.length > 0 && _typr2.default.isString(item.content) && item.content.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/javascript';\n\n\t\t\treturn (0, _h2.default)('script', { id: item.id, type: type }, item.content);\n\t\t}\n\t};\n\n\t// BUILD STYLES TAGS\n\tvar style = function style(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.id) && item.id.length > 0 && _typr2.default.isString(item.content) && item.content.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/css';\n\t\t\tvar media = _typr2.default.isString(item.media) && item.media.length > 0 ? item.media : 'all';\n\n\t\t\treturn (0, _h2.default)('script', { id: item.id, type: type, media: media }, item.content);\n\t\t}\n\t};\n\n\t// BUILD HEAD STYLES/LINKS URLS\n\tvar link = function link(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.href) && item.href.length > 0 && _typr2.default.isString(item.id) && item.id.length > 0) {\n\t\t\tvar rel = _typr2.default.isString(item.rel) && item.rel.length > 0 ? item.rel : 'stylesheet';\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/css';\n\t\t\tvar media = _typr2.default.isString(item.media) && item.media.length > 0 ? item.media : 'all';\n\t\t\tvar title = _typr2.default.isString(item.title) && item.title.length > 0 ? item.title : undefined;\n\t\t\tvar url_template = rel == 'stylesheet' ? settings.assets_urls_templates.style : settings.assets_urls_templates.image;\n\n\t\t\treturn (0, _h2.default)('link', { id: item.id, href: get_url(url_template, item.href), type: type, media: media, rel: rel, title: title });\n\t\t}\n\t};\n\n\t// BUILD HEAD SCRIPTS URLS\n\tvar script_url = function script_url(item) {\n\t\tif (_typr2.default.isObject(item) && _typr2.default.isString(item.src) && item.src.length > 0 && _typr2.default.isString(item.id) && item.id.length > 0) {\n\t\t\tvar type = _typr2.default.isString(item.type) && item.type.length > 0 ? item.type : 'text/javascript';\n\n\t\t\treturn (0, _h2.default)('script', { id: item.id, src: get_url(settings.assets_urls_templates.script, item.src), type: type });\n\t\t}\n\t};\n\n\t// BUILD CONTENT TAG\n\tvar body_styles_tags = rendering_result.body_styles_tags.map(style);\n\tvar body_styles_urls = rendering_result.body_styles_urls.map(link);\n\tvar body_scripts_tags = rendering_result.body_scripts_tags.map(script);\n\tvar body_scripts_urls = rendering_result.body_scripts_urls.map(script_url);\n\n\tvar contents_children = _typr2.default.isArray(body_contents_value) ? body_contents_value.map(render) : [];\n\tvar content = (0, _h2.default)('div', { id: 'content' }, _lodash2.default.concat(contents_children, [body_styles_urls, body_styles_tags, body_scripts_urls, body_scripts_tags]));\n\n\trendering_result.add_vtree('content', content);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"lodash\":187,\"typr\":217,\"virtual-dom/h\":232}],67:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _is_browser = require('../utils/is_browser');\n\nvar _rendering_factory = require('./rendering_factory');\n\nvar _rendering_factory2 = _interopRequireDefault(_rendering_factory);\n\nvar _rendering_builder_assets = require('./rendering_builder_assets');\n\nvar _rendering_builder_assets2 = _interopRequireDefault(_rendering_builder_assets);\n\nvar _rendering_resolver = require('./rendering_resolver');\n\nvar _rendering_resolver2 = _interopRequireDefault(_rendering_resolver);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/rendering/rendering_builder';\n\n/**\r\n * Rendering wrapper class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar RenderingBuilder = function (_RenderingBuilderAsse) {\n\t_inherits(RenderingBuilder, _RenderingBuilderAsse);\n\n\t/**\r\n  * Create a rendering wrapper class.\r\n * \r\n * API:\r\n * \t\t->constructor(arg_runtime, arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html, arg_application)\r\n * \r\n * \t\t->get_content_description(arg_view_name, arg_menubar_name):object - Get application content description.\r\n * \t\t->get_initial_state(arg_view_name, arg_menubar_name):string - Get application initial state as a JSON string.\r\n * \r\n * \t\t->render_html_page(arg_title, arg_view, arg_menubar, arg_credentials, arg_assets_services=undefined):string -  Render full page into HTML string.\r\n * \t\t->render_page(arg_title, arg_view, arg_menubar, arg_credentials, arg_assets_services=undefined):RenderingResult - Render full page.\r\n * \r\n * \t\t->render_json_content(arg_view, arg_menubar, arg_credentials, arg_assets_services):object - Render page content (inside 'content' DIV element) with a menubar and a view and convert rendering result to JSON.\r\n * \t\t->render_content(arg_view, arg_menubar, arg_credentials, arg_assets_services):RenderingResult - Render page content (inside 'content' DIV element) with a menubar and a view.\r\n * \r\n * @param {RuntimeBase} arg_runtime - runtime instance.\r\n * @param {string} arg_assets_styles - application service name to provide style assets.\r\n * @param {string} arg_assets_scripts - application service name to provide script assets.\r\n * @param {string} arg_assets_img - application service name to provide image assets.\r\n * @param {string} arg_assets_html - application service name to provide html assets.\r\n * @param {TopologyDefineApplication} arg_application - application.\r\n * \r\n * @returns {nothing}\r\n  */\n\tfunction RenderingBuilder(arg_runtime, arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html, arg_application) {\n\t\t_classCallCheck(this, RenderingBuilder);\n\n\t\tif (_typr2.default.isObject(arg_assets_styles) && _typr2.default.isString(arg_assets_styles.style) && _typr2.default.isString(arg_assets_styles.script) && _typr2.default.isString(arg_assets_styles.image) && _typr2.default.isString(arg_assets_styles.html)) {\n\t\t\targ_application = arg_assets_scripts;\n\n\t\t\targ_assets_scripts = arg_assets_styles.script;\n\t\t\targ_assets_img = arg_assets_styles.image;\n\t\t\targ_assets_html = arg_assets_styles.html;\n\t\t\targ_assets_styles = arg_assets_styles.style;\n\t\t}\n\n\t\tvar _this = _possibleConstructorReturn(this, (RenderingBuilder.__proto__ || Object.getPrototypeOf(RenderingBuilder)).call(this, arg_runtime, arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html, arg_application));\n\n\t\t_this.update_trace_enabled();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get application content description.\r\n  * \r\n  * @param {string} arg_view_name - main view name.\r\n  * @param {string} arg_menubar_name - main menubar name.\r\n  * \r\n  * @returns {object} - content description object as { name:..., type:..., state:..., settings:..., children:... }.\r\n  */\n\n\n\t_createClass(RenderingBuilder, [{\n\t\tkey: 'get_content_description',\n\t\tvalue: function get_content_description(arg_view_name, arg_menubar_name) {\n\t\t\t// console.log(context + ':get_content_description:view=%s, menubar=%s', arg_view_name, arg_menubar_name)\n\t\t\treturn {\n\t\t\t\tname: 'content',\n\t\t\t\ttype: 'page_content',\n\t\t\t\tstate: {\n\t\t\t\t\tbody_contents: [arg_menubar_name, 'separator', arg_view_name]\n\t\t\t\t},\n\t\t\t\tsettings: {\n\t\t\t\t\tassets_urls_templates: {\n\t\t\t\t\t\tscript: (0, _is_browser.is_server)() ? this.get_assets_script_url('{{url}}') : this._runtime.ui()._ui_rendering.get_asset_url('{{url}}', 'script', this._runtime.session_credentials),\n\t\t\t\t\t\tstyle: (0, _is_browser.is_server)() ? this.get_assets_style_url('{{url}}') : this._runtime.ui()._ui_rendering.get_asset_url('{{url}}', 'style', this._runtime.session_credentials),\n\t\t\t\t\t\timage: (0, _is_browser.is_server)() ? this.get_assets_image_url('{{url}}') : this._runtime.ui()._ui_rendering.get_asset_url('{{url}}', 'image', this._runtime.session_credentials),\n\t\t\t\t\t\thtml: (0, _is_browser.is_server)() ? this.get_assets_html_url('{{url}}') : this._runtime.ui()._ui_rendering.get_asset_url('{{url}}', 'html', this._runtime.session_credentials)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tchildren: {\n\t\t\t\t\tseparator: {\n\t\t\t\t\t\tname: 'separator',\n\t\t\t\t\t\ttype: 'table',\n\t\t\t\t\t\tstate: {},\n\t\t\t\t\t\tsettings: {\n\t\t\t\t\t\t\tid: 'separator',\n\t\t\t\t\t\t\tclasses: 'devapt-layout-persistent'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Get application initial state as a JSON string.\r\n   * \r\n   * @param {string} arg_view_name - main view name.\r\n   * @param {string} arg_menubar_name - main menubar name.\r\n   * \r\n   * @returns {string} - state JSON string.\r\n   */\n\n\t}, {\n\t\tkey: 'get_initial_state',\n\t\tvalue: function get_initial_state(arg_view_name, arg_menubar_name) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar initial_state = this._application ? this._application.export_settings() : {};\n\n\t\t\tinitial_state.credentials = {\n\t\t\t\t\"tenant\": \"{{{credentials_tenant}}}\",\n\t\t\t\t\"env\": \"{{{credentials_env}}}\",\n\t\t\t\t\"application\": \"{{{credentials_application}}}\",\n\n\t\t\t\t\"token\": \"{{{credentials_token}}}\",\n\t\t\t\t\"user_name\": \"{{{credentials_user_name}}}\",\n\t\t\t\t\"user_pass_digest\": \"{{{credentials_pass_digest}}}\",\n\n\t\t\t\t\"ts_login\": \"{{{credentials_login}}}\",\n\t\t\t\t\"ts_expiration\": \"{{{credentials_expire}}}\",\n\n\t\t\t\t\"errors_count\": \"{{{credentials_errors_count}}}\",\n\t\t\t\t\"renew_count\": \"{{{credentials_renew_count}}}\"\n\t\t\t};\n\n\t\t\tinitial_state.app_url = this._application ? this._application.app_url : null;\n\t\t\tinitial_state.app_assets = this._application ? this._application.app_assets : null;\n\t\t\tinitial_state.commands = this._application ? this._application.get_resources_settings('commands') : {};\n\t\t\tinitial_state.views = this._application ? this._application.get_resources_settings('views') : {};\n\t\t\tinitial_state.menubars = this._application ? this._application.get_resources_settings('menubars') : {};\n\t\t\tinitial_state.menus = this._application ? this._application.get_resources_settings('menus') : {};\n\t\t\tinitial_state.models = this._application ? this._application.get_resources_settings('models') : {};\n\n\t\t\tinitial_state.assets_urls_templates = {\n\t\t\t\tscript: this.get_assets_script_url('{{url}}'),\n\t\t\t\tstyle: this.get_assets_style_url('{{url}}'),\n\t\t\t\timage: this.get_assets_image_url('{{url}}'),\n\t\t\t\thtml: this.get_assets_html_url('{{url}}')\n\t\t\t};\n\n\t\t\tinitial_state.plugins_urls = {};\n\t\t\tif (_typr2.default.isArray(initial_state.used_plugins)) {\n\t\t\t\t(function () {\n\t\t\t\t\tvar tenant = _this2._application.get_topology_owner();\n\t\t\t\t\tif (!tenant) {\n\t\t\t\t\t\t_this2.error('no owner tenant found for this application');\n\t\t\t\t\t\tconsole.error(context + ':get_initial_state:no owner tenant found for this application');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_lodash2.default.forEach(initial_state.used_plugins, function (plugin_name) {\n\t\t\t\t\t\t\t// console.log('plugin_name', plugin_name)\n\n\t\t\t\t\t\t\tvar plugin = tenant.get_topology_owner().plugin(plugin_name);\n\t\t\t\t\t\t\tif (!plugin) {\n\t\t\t\t\t\t\t\tconsole.error(context + ':get_initial_state:plugin not found for [' + plugin_name + ']');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (_typr2.default.isFunction(plugin.topology_plugin_instance.get_browser_plugin_file_url)) {\n\t\t\t\t\t\t\t\tvar url = plugin.topology_plugin_instance.get_browser_plugin_file_url();\n\t\t\t\t\t\t\t\tif (_typr2.default.isString(url)) {\n\t\t\t\t\t\t\t\t\tinitial_state.plugins_urls[plugin_name] = url;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\tif (!initial_state.views.content) {\n\t\t\t\tinitial_state.views.content = this.get_content_description(arg_view_name, arg_menubar_name);\n\t\t\t\t// _.forEach(initial_state.views.content.children,\n\t\t\t\t// \t(view_desc, view_name)=>{\n\t\t\t\t// \t\tinitial_state.views[view_name] = view_desc\n\t\t\t\t// \t}\n\t\t\t\t// )\n\t\t\t}\n\n\t\t\treturn JSON.stringify(initial_state);\n\t\t}\n\n\t\t/**\r\n   * Render full page into HTML string.\r\n   * \r\n   * @param {string|undefined} arg_title - page title, application title (optional).\r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * @param {object} arg_assets_services - assets record (optional).\r\n   * \r\n   * @returns {string} - rendering HTML code.\r\n   */\n\n\t}, {\n\t\tkey: 'render_html_page',\n\t\tvalue: function render_html_page(arg_title, arg_view, arg_menubar, arg_credentials) {\n\t\t\tvar arg_assets_services = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n\n\t\t\tvar rendering_result = this.render_page(arg_title, arg_view, arg_menubar, arg_credentials, arg_assets_services);\n\t\t\tvar html = '<!DOCTYPE html>' + rendering_result.get_final_html('page');\n\t\t\tvar rendered_html = this._runtime.context.render_credentials_template(html, arg_credentials);\n\n\t\t\treturn rendered_html;\n\t\t}\n\n\t\t/**\r\n   * Render full page.\r\n   * \r\n   * @param {string|undefined} arg_title - page title, application title (optional).\r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * @param {object} arg_assets_services - assets record (optional).\r\n   * \r\n   * @returns {RenderingResult} - rendering result instance.\r\n   */\n\n\t}, {\n\t\tkey: 'render_page',\n\t\tvalue: function render_page(arg_title, arg_view, arg_menubar, arg_credentials) {\n\t\t\tvar arg_assets_services = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_credentials) && arg_credentials.is_credentials, context + ':render_page:bad credentials object');\n\n\t\t\t// ONLY FOR SERVER SIDE\n\t\t\t(0, _assert2.default)((0, _is_browser.is_server)(), context + ':render_page:only for server side');\n\n\t\t\t// SET ASSETS SERVICES NAMES\n\t\t\tif (_typr2.default.isObject(arg_assets_services)) {\n\t\t\t\tthis.set_assets_services_names(arg_assets_services.style, arg_assets_services.script, arg_assets_services.image, arg_assets_services.html);\n\t\t\t}\n\n\t\t\t// GET TOPOLOGY DEFINED APPLICATION\n\t\t\tvar topology_define_app = this.get_topology_defined_application(arg_credentials);\n\t\t\t(0, _assert2.default)(topology_define_app, context + ':render_page:bad topology_define_app');\n\n\t\t\t// GET VIEW\n\t\t\tvar default_view_name = topology_define_app.app_default_view;\n\t\t\t// const view = ( T.isString(arg_view) || ( T.isObject(arg_view) && arg_view.is_component ) ) ? arg_view : default_view_name\n\n\t\t\t// GET MENUBAR\n\t\t\tvar default_menubar_name = topology_define_app.app_default_menubar;\n\t\t\t// const menubar = ( T.isString(arg_menubar) || ( T.isObject(arg_menubar) && arg_menubar.is_component ) ) ? arg_menubar : default_menubar_name\n\n\t\t\t// GET DEFAULT TITLE IF NEEDED\n\t\t\tvar default_title = topology_define_app.app_title;\n\t\t\tvar title = arg_title ? arg_title : default_title;\n\n\t\t\t// TODO ADDSECURITY  HEADERS\n\t\t\t// const auth_basic_realm = '<meta http-equiv=\"WWW-Authenticate\" content=\"Basic realm=Devtools\"/>'\n\t\t\t// const auth_basic_credentials = '<meta http-equiv=\"Authorization\" content=\"Basic {{{credentials_basic_base64}}}\"/>'\n\n\t\t\tvar view_name = _typr2.default.isString(arg_view) ? arg_view : _typr2.default.isObject(arg_view) && arg_view.is_component ? arg_view.get_name() : default_view_name;\n\t\t\tvar menubar_name = _typr2.default.isString(arg_menubar) ? arg_menubar : _typr2.default.isObject(arg_menubar) && arg_menubar.is_component ? arg_menubar.get_name() : default_menubar_name;\n\t\t\tvar content_result = this.render_json_content(view_name, menubar_name, arg_credentials, arg_assets_services);\n\t\t\tvar stored_state = this.get_initial_state(view_name, menubar_name);\n\n\t\t\tvar page = {\n\t\t\t\ttype: 'page',\n\t\t\t\tstate: {\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tmetas: undefined,\n\n\t\t\t\t\tbody_headers: undefined,\n\t\t\t\t\tbody_contents: [],\n\t\t\t\t\tbody_footers: undefined,\n\n\t\t\t\t\thead_styles_tags: content_result.head_styles_tags,\n\t\t\t\t\thead_styles_urls: topology_define_app.app_assets_css.concat(content_result.head_styles_urls),\n\n\t\t\t\t\thead_scripts_tags: content_result.head_scripts_tags,\n\t\t\t\t\thead_scripts_urls: content_result.head_scripts_urls,\n\n\t\t\t\t\tbody_styles_tags: content_result.body_styles_tags,\n\t\t\t\t\tbody_styles_urls: content_result.body_styles_urls,\n\n\t\t\t\t\tbody_scripts_tags: content_result.body_scripts_tags, // SEE LATER FOR CONTENT\n\t\t\t\t\tbody_scripts_urls: [{\n\t\t\t\t\t\tid: 'js-socketio',\n\t\t\t\t\t\tsrc: '/socket.io/socket.io.js',\n\t\t\t\t\t\tabsolute: true\n\t\t\t\t\t}].concat(content_result.body_scripts_urls, topology_define_app.app_assets_js)\n\t\t\t\t},\n\t\t\t\tsettings: {\n\t\t\t\t\thtml_lang: undefined,\n\t\t\t\t\thtml_class: undefined,\n\t\t\t\t\thtml_prefix: undefined,\n\n\t\t\t\t\thead_charset: 'utf-8',\n\t\t\t\t\thead_viewport: undefined,\n\t\t\t\t\thead_description: undefined,\n\t\t\t\t\thead_robots: undefined,\n\n\t\t\t\t\tbody_class: undefined,\n\n\t\t\t\t\tassets_urls_templates: {\n\t\t\t\t\t\tscript: this.get_assets_script_url('{{url}}'),\n\t\t\t\t\t\tstyle: this.get_assets_style_url('{{url}}'),\n\t\t\t\t\t\timage: this.get_assets_image_url('{{url}}'),\n\t\t\t\t\t\thtml: this.get_assets_html_url('{{url}}')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tchildren: {}\n\t\t\t};\n\n\t\t\tvar rendering_context = {\n\t\t\t\ttrace_fn: undefined, /*console.log,*/\n\t\t\t\tresolver: _rendering_resolver2.default.from_topology('server resolver from topology for page', topology_define_app),\n\t\t\t\tcredentials: arg_credentials,\n\t\t\t\trendering_factory: _rendering_factory2.default\n\t\t\t};\n\n\t\t\tcontent_result.head_styles_urls = [];\n\t\t\tcontent_result.head_styles_tagss = [];\n\t\t\tcontent_result.head_scripts_urls = [];\n\t\t\tcontent_result.head_scripts_tags = [];\n\t\t\tcontent_result.body_styles_urls = [];\n\t\t\tcontent_result.body_styles_tags = [];\n\t\t\tcontent_result.body_scripts_urls = [];\n\t\t\tcontent_result.body_scripts_tags = [];\n\n\t\t\tcontent_result.assets_urls_templates = page.settings.assets_urls_templates;\n\n\t\t\t// console.log(context + ':render_page:content_result', content_result.vtrees.content.c)\n\n\t\t\tvar content_json_str_result = JSON.stringify(content_result);\n\t\t\tcontent_json_str_result = content_json_str_result.replace(/\"class\"/g, '\"className\"');\n\n\t\t\tpage.state.body_scripts_tags = page.state.body_scripts_tags.concat([{\n\t\t\t\tid: 'js-initial-state',\n\t\t\t\tcontent: 'window.__INITIAL_STATE__ = ' + stored_state + ';'\n\t\t\t}, {\n\t\t\t\tid: 'js-initial-content',\n\t\t\t\tcontent: 'window.__INITIAL_CONTENT__ = ' + content_json_str_result + ';'\n\t\t\t}]);\n\n\t\t\tvar rendering_result = (0, _rendering_factory2.default)(page, rendering_context, page.children);\n\t\t\treturn rendering_result;\n\t\t}\n\n\t\t/**\r\n   * Render page content (inside 'content' DIV element) with a menubar and a view and convert rendering result to JSON.\r\n   * \r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * @param {object} arg_assets_services - assets record (optional).\r\n   * \r\n   * @returns {object} - rendering result converted to JSON object.\r\n   */\n\n\t}, {\n\t\tkey: 'render_json_content',\n\t\tvalue: function render_json_content(arg_view, arg_menubar, arg_credentials, arg_assets_services) {\n\t\t\tvar result = this.render_content(arg_view, arg_menubar, arg_credentials, arg_assets_services);\n\t\t\tvar json = result.convert_to_json();\n\t\t\treturn json;\n\t\t}\n\n\t\t/**\r\n   * Render page content (inside 'content' DIV element) with a menubar and a view.\r\n   * \r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * @param {object} arg_assets_services - assets record (optional).\r\n   * \r\n   * @returns {RenderingResult} - rendering result instance.\r\n   */\n\n\t}, {\n\t\tkey: 'render_content',\n\t\tvalue: function render_content(arg_view, arg_menubar, arg_credentials, arg_assets_services) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_view) || _typr2.default.isObject(arg_view) && arg_view.is_component, context + ':bad view string or object');\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_credentials) && arg_credentials.is_credentials, context + ':bad credentials object');\n\n\t\t\t// SET ASSETS SERVICES NAMES\n\t\t\tif (_typr2.default.isObject(arg_assets_services)) {\n\t\t\t\tthis.set_assets_services_names(arg_assets_services.style, arg_assets_services.script, arg_assets_services.image, arg_assets_services.html);\n\t\t\t}\n\n\t\t\t// RUN ON SERVER SIDE\n\t\t\tif ((0, _is_browser.is_server)()) {\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_view) || _typr2.default.isString(arg_menubar), context + ':bad view or menubar name string');\n\n\t\t\t\t// RUN ON BROWSER SIDE\n\t\t\t\tvar _rendering_result = this._render_content_on_server(arg_view, arg_menubar, arg_credentials);\n\t\t\t\treturn _rendering_result;\n\t\t\t}\n\n\t\t\t// RUN ON BROWSER SIDE\n\t\t\tvar rendering_result = this._render_content_on_browser(arg_view, arg_menubar, arg_credentials);\n\t\t\treturn rendering_result;\n\t\t}\n\n\t\t/**\r\n   * Get rendering function resolver.\r\n   * \r\n   * @returns {Function} - rendering function resolver.\r\n   */\n\n\t}, {\n\t\tkey: '_render_content_on_browser',\n\n\n\t\t/**\r\n   * Render page content on browser side.\r\n   * @private\r\n   * \r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * \r\n   * @returns {RenderingResult} - rendering result instance.\r\n   */\n\t\tvalue: function _render_content_on_browser(arg_view_name, arg_menubar_name, arg_credentials) {\n\t\t\tvar store = this._runtime.get_state_store();\n\t\t\tvar state = store.get_state();\n\n\t\t\tvar res_resolver = this._runtime.ui().get_resource_description_resolver();\n\t\t\tvar rf_resolver = this._runtime.ui().get_rendering_function_resolver();\n\t\t\tvar rendering_resolver = _rendering_resolver2.default.from_resolvers('browser resolver from ui', res_resolver, rf_resolver);\n\n\t\t\t// GET DEFAULT VIEW\n\t\t\tvar default_view_name = state.get('default_view', undefined);\n\n\t\t\t// GET DEFAULT MENUBAR\n\t\t\tvar default_menubar_name = state.get('default_menubar', undefined);\n\n\t\t\treturn this._render_content_common(arg_view_name, arg_menubar_name, arg_credentials, default_view_name, default_menubar_name, rendering_resolver);\n\t\t}\n\n\t\t/**\r\n   * Render page content on server side.\r\n   * @private\r\n   * \r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * \r\n   * @returns {RenderingResult} - rendering result instance.\r\n   */\n\n\t}, {\n\t\tkey: '_render_content_on_server',\n\t\tvalue: function _render_content_on_server(arg_view_name, arg_menubar_name, arg_credentials) {\n\t\t\t// GET TOPOLOGY DEFINED APPLICATION\n\t\t\tvar topology_define_app = this.get_topology_defined_application(arg_credentials);\n\t\t\t(0, _assert2.default)(topology_define_app, context + ':render_content:bad topology_define_app');\n\n\t\t\t// GET DEFAULT VIEW\n\t\t\tvar default_view_name = topology_define_app.app_default_view;\n\n\t\t\t// GET DEFAULT MENUBAR\n\t\t\tvar default_menubar_name = topology_define_app.app_default_menubar;\n\n\t\t\tvar resolver = _rendering_resolver2.default.from_topology('server resolver from topology', topology_define_app);\n\n\t\t\treturn this._render_content_common(arg_view_name, arg_menubar_name, arg_credentials, default_view_name, default_menubar_name, resolver);\n\t\t}\n\n\t\t/**\r\n   * Render page content helper on browser or server side.\r\n   * @private\r\n   * \r\n   * @param {string|Component|undefined} arg_view - main view name or instance (optional) (default application view name).\r\n   * @param {string|Component|undefined} arg_menubar - main menubar name or instance (optional) (default application menubar name).\r\n   * @param {Credentials} arg_credentials - credentials instance.\r\n   * @param {string} arg_default_view_name - default view name.\r\n   * @param {string} arg_default_menubar_name - default menubar name.\r\n   * @param {RenderingResolver} arg_rendering_resolver - object with 'find_rendering_function(type name)' method.\r\n   * \r\n   * @returns {RenderingResult} - rendering result instance.\r\n   */\n\n\t}, {\n\t\tkey: '_render_content_common',\n\t\tvalue: function _render_content_common(arg_view_name, arg_menubar_name, arg_credentials, arg_default_view_name, arg_default_menubar_name, arg_rendering_resolver) {\n\t\t\tvar menubar = arg_menubar_name ? arg_menubar_name : arg_default_menubar_name;\n\t\t\tvar view = arg_view_name ? arg_view_name : arg_default_view_name;\n\t\t\tvar content = this.get_content_description(view, menubar);\n\n\t\t\t// DEBUG\n\t\t\t// console.log(context + ':_render_content_common:arg_view_name=%s,arg_menubar_name=%s,view=%s,menubar=%s', arg_view_name, arg_menubar_name, view, menubar)\n\t\t\t// console.log(context + ':_render_content_common:content', content)\n\n\t\t\tvar rendering_context = {\n\t\t\t\ttrace_fn: undefined, //console.log,//\n\t\t\t\tresolver: arg_rendering_resolver,\n\t\t\t\tcredentials: arg_credentials,\n\t\t\t\trendering_factory: _rendering_factory2.default\n\t\t\t};\n\n\t\t\tvar rendering_result = (0, _rendering_factory2.default)(content, rendering_context, undefined);\n\n\t\t\trendering_result.assets_urls_templates = content.settings.assets_urls_templates;\n\n\t\t\treturn rendering_result;\n\t\t}\n\t}], [{\n\t\tkey: 'get_rendering_function_resolver',\n\t\tvalue: function get_rendering_function_resolver(arg_credentials) {\n\t\t\tif ((0, _is_browser.is_server)()) {\n\t\t\t\t// GET TOPOLOGY DEFINED APPLICATION\n\t\t\t\tvar topology_define_app = this.get_topology_defined_application(arg_credentials);\n\t\t\t\t(0, _assert2.default)(topology_define_app, context + ':render_content:bad topology_define_app');\n\n\t\t\t\t// GET SERVER RESOLVER\n\t\t\t\tvar resolver = _rendering_resolver2.default.from_topology('server resolver from topology', topology_define_app);\n\t\t\t\treturn resolver;\n\t\t\t}\n\n\t\t\t// GET BROWSER RESOLVER\n\t\t\tvar res_resolver = window.devapt().ui().get_resource_description_resolver();\n\t\t\tvar rf_resolver = window.devapt().ui().get_rendering_function_resolver();\n\t\t\tvar rendering_resolver = _rendering_resolver2.default.from_resolvers('browser resolver from ui', res_resolver, rf_resolver);\n\t\t\treturn rendering_resolver;\n\t\t}\n\t}]);\n\n\treturn RenderingBuilder;\n}(_rendering_builder_assets2.default);\n\nexports.default = RenderingBuilder;\n\n\n},{\"../utils/is_browser\":102,\"./rendering_builder_assets\":68,\"./rendering_factory\":69,\"./rendering_resolver\":72,\"assert\":107,\"lodash\":187,\"typr\":217}],68:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _loggable = require('../base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n// import _ from 'lodash'\n\n// COMMON IMPORTS\n\n\nvar context = 'common/rendering/rendering_builder';\n\n/**\r\n * Rendering wrapper class.\r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\n\nvar RenderingBuilderAssets = function (_Loggable) {\n\t_inherits(RenderingBuilderAssets, _Loggable);\n\n\t/**\r\n  * Create a rendering wrapper class.\r\n * \r\n * API:\r\n * \t\t->render_content(arg_title, arg_view, arg_menubar, arg_credentials):string - generate page HTML string.\r\n * \r\n * @param {RuntimeBase} arg_runtime - runtime instance.\r\n * @param {string} arg_assets_styles - application service name to provide style assets.\r\n * @param {string} arg_assets_scripts - application service name to provide script assets.\r\n * @param {string} arg_assets_img - application service name to provide image assets.\r\n * @param {string} arg_assets_html - application service name to provide html assets.\r\n * @param {TopologyDefineApplication} arg_application - application.\r\n * \r\n * @returns {nothing}\r\n  */\n\tfunction RenderingBuilderAssets(arg_runtime, arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html, arg_application) {\n\t\t_classCallCheck(this, RenderingBuilderAssets);\n\n\t\tvar _this = _possibleConstructorReturn(this, (RenderingBuilderAssets.__proto__ || Object.getPrototypeOf(RenderingBuilderAssets)).call(this, context));\n\n\t\t_this.is_render = true;\n\n\t\t_this._application = arg_application;\n\t\t_this._runtime = arg_runtime;\n\n\t\t_this.set_assets_services_names(arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html);\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Set assets services names.\r\n  * \r\n  * @param {string} arg_assets_styles  - styles assets service name.\r\n  * @param {string} arg_assets_scripts - scripts assets service name.\r\n  * @param {string} arg_assets_img     - images assets service name.\r\n  * @param {string} arg_assets_html    - html assets service name.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(RenderingBuilderAssets, [{\n\t\tkey: 'set_assets_services_names',\n\t\tvalue: function set_assets_services_names(arg_assets_styles, arg_assets_scripts, arg_assets_img, arg_assets_html) {\n\t\t\tthis.assets_styles_service_name = arg_assets_styles ? arg_assets_styles : null;\n\t\t\tthis.assets_scripts_service_name = arg_assets_scripts ? arg_assets_scripts : null;\n\t\t\tthis.assets_images_service_name = arg_assets_img ? arg_assets_img : null;\n\t\t\tthis.assets_html_service_name = arg_assets_html ? arg_assets_html : null;\n\n\t\t\tthis.assets_styles_service_consumer = null;\n\t\t\tthis.assets_scripts_service_consumer = null;\n\t\t\tthis.assets_images_service_consumer = null;\n\t\t\tthis.assets_html_service_consumer = null;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given image asset.\r\n  * \r\n   * @param {string} arg_url - image asset relative url.\r\n  * \r\n   * @returns {string} absolute image asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_url_with_credentials',\n\t\tvalue: function get_url_with_credentials(arg_url) {\n\t\t\tthis.enter_group('get_url_with_credentials');\n\n\t\t\tvar url = this._runtime.context.get_url_with_credentials(arg_url);\n\n\t\t\tthis.leave_group('get_url_with_credentials');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given image asset.\r\n   * @param {string} arg_url - image asset relative url.\r\n   * @returns {string} absolute image asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_image_url',\n\t\tvalue: function get_assets_image_url(arg_url) {\n\t\t\tthis.enter_group('get_assets_image_url');\n\n\t\t\tvar name = this.assets_images_service_name;\n\t\t\tvar url = this.get_assets_url(this.assets_images_service_consumer, name, arg_url);\n\n\t\t\tthis.leave_group('get_assets_image_url');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given static html asset.\r\n   * @param {string} arg_url - html asset relative url.\r\n   * @returns {string} absolute html asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_html_url',\n\t\tvalue: function get_assets_html_url(arg_url) {\n\t\t\tthis.enter_group('get_assets_html_url');\n\n\t\t\tvar name = this.assets_html_service_name;\n\t\t\tvar url = this.get_assets_url(this.assets_html_service_consumer, name, arg_url);\n\n\t\t\tthis.leave_group('get_assets_html_url');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given script asset.\r\n   * @param {string} arg_url - script asset relative url.\r\n   * @returns {string} absolute script asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_script_url',\n\t\tvalue: function get_assets_script_url(arg_url) {\n\t\t\tthis.enter_group('get_assets_script_url');\n\n\t\t\tvar name = this.assets_scripts_service_name;\n\t\t\tvar url = this.get_assets_url(this.assets_scripts_service_consumer, name, arg_url);\n\n\t\t\t// console.log(context + ':get_assets_script_url:name=%s, arg_url=%s, url=%s', name, arg_url, url)\n\n\t\t\tthis.leave_group('get_assets_script_url');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given style asset.\r\n   * @param {string} arg_url - script asset relative url.\r\n   * @returns {string} absolute script asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_style_url',\n\t\tvalue: function get_assets_style_url(arg_url) {\n\t\t\tthis.enter_group('get_assets_style_url');\n\n\t\t\tvar name = this.assets_styles_service_name;\n\t\t\tvar url = this.get_assets_url(this.assets_styles_service_consumer, name, arg_url);\n\n\t\t\tthis.leave_group('get_assets_style_url');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get an url to server the given image asset.\r\n  * \r\n   * @param {object} arg_consumer - service consumer.\r\n   * @param {string} arg_svc_name - service name or null.\r\n   * @param {string} arg_url - image asset relative url.\r\n  * \r\n   * @returns {string} absolute image asset url.\r\n   */\n\n\t}, {\n\t\tkey: 'get_assets_url',\n\t\tvalue: function get_assets_url(arg_consumer, arg_svc_name, arg_url) {\n\t\t\tthis.enter_group('get_assets_url');\n\n\t\t\t// console.log(typeof arg_url, 'arg_url', arg_url)\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_url), context + ':get_assets_url:bad url string for svc [' + arg_svc_name + '] for url [' + arg_url + ']');\n\n\t\t\tvar has_consumer = _typr2.default.isObject(arg_consumer) && arg_consumer.is_service_consumer;\n\t\t\tif (!has_consumer) {\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_svc_name), context + ':get_assets_url:bad svc name string');\n\n\t\t\t\tvar deployed_services = this._runtime.deployed_local_topology.deployed_services_map;\n\t\t\t\tvar _service = arg_svc_name in deployed_services ? deployed_services[arg_svc_name] : undefined;\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(_service) && _service.is_service, context + ':get_assets_script_url:bad service object');\n\n\t\t\t\tthis.assets_scripts_service_consumer = _service.create_consumer();\n\t\t\t}\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(this.assets_scripts_service_consumer) && this.assets_scripts_service_consumer.is_service_consumer, context + ':get_assets_script_url:bad consumer object');\n\n\t\t\tvar service = this.assets_scripts_service_consumer.get_service();\n\t\t\tif (!service) {\n\t\t\t\tthis.error('no service found for images assets');\n\t\t\t\tthis.leave_group('get_assets_url');\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar strategy = null;\n\t\t\tvar provider = service.get_a_provider(strategy);\n\t\t\tvar url = this.assets_scripts_service_consumer.get_url_for(provider, { url: arg_url });\n\t\t\turl = this._runtime.context.get_url_with_credentials(url);\n\n\t\t\tthis.leave_group('get_assets_url');\n\t\t\treturn url;\n\t\t}\n\n\t\t/**\r\n   * Get TopologyDefineApplication instance from registered application or from credentials.\r\n   * \r\n   * @param {Credentials} arg_credentials - Credentials instance (optional).\r\n   * \r\n   * @returns {TopologyDefineApplication} - request user credentials application.\r\n   */\n\n\t}, {\n\t\tkey: 'get_topology_defined_application',\n\t\tvalue: function get_topology_defined_application(arg_credentials) {\n\t\t\t// GET TOPOLOGY DEFINED APPLICATION\n\t\t\tif (!this._application) {\n\t\t\t\tif (_typr2.default.isObject(arg_credentials) && arg_credentials.is_credentials) {\n\t\t\t\t\tvar defined_topology = this._runtime.get_defined_topology();\n\t\t\t\t\tthis._application = defined_topology.find_application_with_credentials(arg_credentials);\n\n\t\t\t\t\tif (!this._application) {\n\t\t\t\t\t\tconsole.error(context + ':get_topology_defined_application:application not found');\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._application;\n\t\t\t\t}\n\n\t\t\t\tconsole.error(context + ':get_topology_defined_application:bad credentials object');\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn this._application;\n\t\t}\n\t}]);\n\n\treturn RenderingBuilderAssets;\n}(_loggable2.default);\n\nexports.default = RenderingBuilderAssets;\n\n\n},{\"../base/loggable\":38,\"assert\":107,\"typr\":217}],69:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; // NPM IMPORTS\n\n// import assert from 'assert'\n// import VNode from 'virtual-dom/vnode/vnode'\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _vtext = require('virtual-dom/vnode/vtext');\n\nvar _vtext2 = _interopRequireDefault(_vtext);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _rendering_result = require('./rendering_result');\n\nvar _rendering_result2 = _interopRequireDefault(_rendering_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar context = 'common/rendering/rendering_factory';\n\n/**\r\n * @file Rendering factory.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar from_string = function from_string(arg_item) {\n\tvar arg_rendering_context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\tif (arg_rendering_context && arg_rendering_context.resolver && arg_rendering_context.resolver.find_resource_description) {\n\t\targ_rendering_context.trace_fn(context + ':from_string:search item [' + arg_item + '] in resolver [' + arg_rendering_context.resolver.get_name() + ']');\n\n\t\tvar r = arg_rendering_context.resolver.find_resource_description(arg_item);\n\t\tif (r) {\n\t\t\tvar res_settings = r;\n\t\t\tres_settings.settings = res_settings.settings ? res_settings.settings : {};\n\t\t\tif (!res_settings.settings.id) {\n\t\t\t\tres_settings.settings.id = arg_item;\n\t\t\t}\n\t\t\targ_rendering_context.trace_fn(res_settings, 'res_settings');\n\n\t\t\treturn from_object(res_settings, arg_rendering_context);\n\t\t}\n\n\t\targ_rendering_context.trace_fn(context + ':from_string:item [' + arg_item + '] NOT FOUND in defined application');\n\t}\n\n\tvar result = new _rendering_result2.default();\n\tresult.add_vtree('tag_' + (0, _uid2.default)(), new _vtext2.default(arg_item));\n\treturn result;\n};\n\nvar from_object = function from_object(arg_item) {\n\tvar arg_rendering_context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\n\tvar rendering = _typr2.default.isString(arg_item.rendering) ? arg_item.rendering : undefined;\n\tvar item_type = _typr2.default.isString(arg_item.type) ? arg_item.type.toLocaleLowerCase() : _typr2.default.isString(arg_item.class_name) ? arg_item.class_name.toLocaleLowerCase() : undefined;\n\tvar settings = _typr2.default.isObject(arg_item.settings) ? arg_item.settings : {};\n\tvar state = _typr2.default.isObject(arg_item.state) ? arg_item.state : undefined;\n\tvar children = _typr2.default.isObject(arg_item.children) ? arg_item.children : {};\n\tvar type = rendering ? rendering : item_type;\n\n\t// DEBUG\n\t// debugger\n\targ_rendering_context.trace_fn(arg_item, context + ':from_object:arg_item');\n\targ_rendering_context.trace_fn(type, context + ':from_object:type');\n\t// arg_rendering_context.trace_fn(settings, context + ':from_object:settings')\n\t// arg_rendering_context.trace_fn(state, context    + ':from_object:state')\n\targ_rendering_context.trace_fn(children, context + ':from_object:children');\n\n\tsettings.children = children;\n\n\tif (arg_rendering_context && arg_rendering_context.resolver && arg_rendering_context.resolver.find_rendering_function) {\n\t\targ_rendering_context.trace_fn(context + ':from_object:search rendering function into application plugins for ' + type);\n\n\t\tvar f = arg_rendering_context.resolver.find_rendering_function(type);\n\t\tif (f) {\n\t\t\targ_rendering_context.trace_fn(context + ':from_object:search rendering function into application plugins: FOUND');\n\n\t\t\treturn f(settings, state, arg_rendering_context);\n\t\t}\n\t}\n\n\targ_rendering_context.trace_fn(context + ':from_object:rendering function NOT FOUND');\n\n\tvar result = new _rendering_result2.default();\n\tresult.add_vtree('tag_' + (0, _uid2.default)(), new _vtext2.default(arg_item.toString()));\n\treturn result;\n};\n\n/**\r\n * Create a RenderingResult with an item: string, function, view instance as object...\r\n * \r\n * @param {any} arg_item - item configuration.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {object} arg_children - private view children settings\r\n * \r\n * @returns {RenderingResult}\r\n */\n\nexports.default = function (arg_item) {\n\tvar arg_rendering_context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\tvar arg_children = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\targ_rendering_context.trace_fn = _typr2.default.isFunction(arg_rendering_context.trace_fn) ? arg_rendering_context.trace_fn : function () {};\n\n\t// FORCE DEBUG\n\t// arg_rendering_context.trace_fn = console.log\n\n\targ_rendering_context.trace_fn('-------- rendering_factory:ENTER --------');\n\targ_rendering_context.trace_fn(arg_children, 'children');\n\targ_rendering_context.trace_fn(_typr2.default.isString(arg_item) ? arg_item : 'not a string', 'item');\n\targ_rendering_context.trace_fn(arg_rendering_context.resolver, 'arg_rendering_context.resolver');\n\n\t// ITEM IS A NUMBER: a simple value to display\n\tif (_typr2.default.isNumber(arg_item)) {\n\t\tvar _result = new _rendering_result2.default();\n\t\t_result.add_vtree('tag_' + (0, _uid2.default)(), new _vtext2.default('' + arg_item));\n\t\treturn _result;\n\t}\n\n\t// ITEM IS A STRING: a text or a view name\n\tif (_typr2.default.isObject(arg_item) && _typr2.default.isString(arg_item.view)) {\n\t\targ_item = arg_item.view;\n\t}\n\tif (_typr2.default.isString(arg_item)) {\n\t\tif (arg_item in arg_children) {\n\t\t\t// console.log('rendering_factory:item [' + arg_item + '] found into children')\n\t\t\tvar res_settings = arg_children[arg_item];\n\t\t\tres_settings.settings = res_settings.settings ? res_settings.settings : {};\n\t\t\tif (!res_settings.settings.id) {\n\t\t\t\tres_settings.settings.id = arg_item;\n\t\t\t}\n\n\t\t\treturn from_object(res_settings, arg_rendering_context);\n\t\t}\n\t\treturn from_string(arg_item, arg_rendering_context);\n\t}\n\n\t// ITEM IS AN OBJECT: a view config\n\tif (_typr2.default.isObject(arg_item)) {\n\t\treturn from_object(arg_item, arg_rendering_context);\n\t}\n\n\t// console.log(arg_item, context + ':create:unknow item')\n\tconsole.error(context + ':unknow item with typeof:' + (typeof arg_item === 'undefined' ? 'undefined' : _typeof(arg_item)));\n\n\tvar result = new _rendering_result2.default();\n\tresult.add_vtree('tag_' + (0, _uid2.default)(), new _vtext2.default(context + ':unknow item with typeof:' + (typeof arg_item === 'undefined' ? 'undefined' : _typeof(arg_item))));\n\treturn result;\n};\n\n\n},{\"../utils/uid\":106,\"./rendering_result\":73,\"typr\":217,\"virtual-dom/vnode/vtext\":253}],70:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _rendering_result = require('./rendering_result');\n\nvar _rendering_result2 = _interopRequireDefault(_rendering_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// let context = 'common/rendering/rendering_function'\n\n\n/**\r\n * Rendering process with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n// NPM IMPORTS\nexports.default = function (arg_settings) {\n  var arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var arg_rendering_context = arguments[2];\n  var arg_rendering_result = arguments[3];\n\n  return _typr2.default.isObject(arg_rendering_result) && arg_rendering_result.is_rendering_result ? arg_rendering_result : new _rendering_result2.default();\n};\n// import assert from 'assert'\n// import _ from 'lodash'\n\n// COMMON IMPORTS\n\n\n},{\"./rendering_result\":73,\"typr\":217}],71:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nvar _rendering_result = require('./rendering_result');\n\nvar _rendering_result2 = _interopRequireDefault(_rendering_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// let context = 'common/rendering/rendering_normalize'\n\n\n/**\r\n * Normalize settings and state, helper function.\r\n * \r\n * @param {object} arg_default_settings - rendering default settings.\r\n * @param {object} arg_default_state - component default state.\r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * @param {string} arg_log_context - trace context.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\n// import h from 'virtual-dom/h'\n\n// COMMON IMPORTS\n// NPM IMPORTS\nexports.default = function (arg_default_settings, arg_default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, arg_log_context) {\n\t// NORMALIZE ARGUMENTS\n\tvar result = _typr2.default.isObject(arg_rendering_result) && arg_rendering_result.is_rendering_result ? arg_rendering_result : new _rendering_result2.default();\n\tvar settings = _lodash2.default.merge({}, arg_default_settings, arg_settings);\n\tvar state = _lodash2.default.merge({}, arg_default_state, arg_state);\n\n\tvar rendering_context = {\n\t\ttrace_fn: _typr2.default.isFunction(arg_rendering_context.trace_fn) ? arg_rendering_context.trace_fn : function () {},\n\t\tcredentials: arg_rendering_context.credentials,\n\t\trendering_factory: _typr2.default.isFunction(arg_rendering_context.rendering_factory) ? arg_rendering_context.rendering_factory : function (v) {\n\t\t\treturn v;\n\t\t},\n\t\tresolver: arg_rendering_context.resolver\n\t};\n\n\t// SET ID\n\tif (!_typr2.default.isString(settings.id)) {\n\t\tsettings.id = 'tag_' + (0, _uid2.default)();\n\t}\n\n\t// SET CHILDREN\n\tif (!_typr2.default.isObject(settings.children)) {\n\t\tsettings.children = {};\n\t}\n\n\t// DEBUG\n\tif (arg_rendering_context && arg_rendering_context.trace_fn) {\n\t\targ_rendering_context.trace_fn(settings, arg_log_context + ':settings');\n\t\targ_rendering_context.trace_fn(state, arg_log_context + ':state');\n\t}\n\n\treturn {\n\t\tsettings: settings,\n\t\tstate: state,\n\t\trendering_context: rendering_context,\n\t\trendering_result: result\n\t};\n};\n// import assert from 'assert'\n\n\n},{\"../utils/uid\":106,\"./rendering_result\":73,\"lodash\":187,\"typr\":217}],72:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\nvar _typr = require('typr/lib/typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// import assert from 'assert'\n\n\n// const context = 'common/rendering/rendering_resolver'\n\n\n/**\r\n * Rendering resource and function resolver class.\r\n * \r\n * @author Luc BORIES\r\n * @license Apache-2.0\r\n */\nvar RenderingResolver = function () {\n\t/**\r\n  * RenderingResolver constructor.\r\n  * \r\n  * @param {string} arg_name - trace name.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction RenderingResolver() {\n\t\tvar arg_name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'no name';\n\n\t\t_classCallCheck(this, RenderingResolver);\n\n\t\tthis._name = arg_name;\n\t\tthis._find_resource = undefined;\n\t\tthis._find_function = undefined;\n\t}\n\n\t/**\r\n  * Get name (only for tracing).\r\n  * \r\n  * returns {string}\r\n  */\n\n\n\t_createClass(RenderingResolver, [{\n\t\tkey: 'get_name',\n\t\tvalue: function get_name() {\n\t\t\treturn this._name;\n\t\t}\n\n\t\t/**\r\n   * Find a resource description.\r\n   * \r\n   * @param {string} arg_name - resource name.\r\n   * \r\n   * @returns {object|undefined} - resource description or undefined if not found.\r\n   */\n\n\t}, {\n\t\tkey: 'find_resource_description',\n\t\tvalue: function find_resource_description(arg_name) {\n\t\t\treturn _typr2.default.isFunction(this._find_resource) ? this._find_resource(arg_name) : undefined;\n\t\t}\n\n\t\t/**\r\n   * Find a rendering function.\r\n   * \r\n   * @param {string} arg_type - resource type.\r\n   * \r\n   * @returns {function|undefined} - resource rendering function or undefined if not found.\r\n   */\n\n\t}, {\n\t\tkey: 'find_rendering_function',\n\t\tvalue: function find_rendering_function(arg_name) {\n\t\t\treturn _typr2.default.isFunction(this._find_function) ? this._find_function(arg_name) : undefined;\n\t\t}\n\t}]);\n\n\treturn RenderingResolver;\n}();\n\nvar RenderingResolverBuilder = function () {\n\tfunction RenderingResolverBuilder() {\n\t\t_classCallCheck(this, RenderingResolverBuilder);\n\t}\n\n\t_createClass(RenderingResolverBuilder, null, [{\n\t\tkey: 'from_topology',\n\n\t\t/**\r\n   * Instance building static method from Topology define application instance.\r\n   * @static\r\n   * \r\n   * @param {string} arg_name - trace name.\r\n   * @param {TopologyDefinedApplication} arg_app - Topology define application instance.\r\n   * \r\n   * @returns {RenderingResolver} - new RenderingResolver instance\r\n   */\n\t\tvalue: function from_topology(arg_name, arg_app) {\n\t\t\tvar resolver = new RenderingResolver(arg_name);\n\n\t\t\tif (_typr2.default.isObject(arg_app) && arg_app.is_topology_define_application) {\n\t\t\t\tresolver._find_resource = function (name) {\n\t\t\t\t\t// console.log('RenderingResolver:find_rendering_function:name=' + name)\n\n\t\t\t\t\tvar r = arg_app.find_resource(name);\n\t\t\t\t\treturn r ? r.get_settings_js() : undefined;\n\t\t\t\t};\n\t\t\t\tresolver._find_function = function (type) {\n\t\t\t\t\t// console.log('RenderingResolver:find_rendering_function:type=' + type)\n\n\t\t\t\t\treturn arg_app.find_rendering_function(type);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn resolver;\n\t\t}\n\n\t\t/**\r\n   * Instance building static method from renring resolver functions.\r\n   * @static\r\n   * \r\n   * @param {string} arg_name - trace name.\r\n   * @param {Function} arg_resource_resolver - resource description resolver function.\r\n   * @param {Function} arg_function_resolver - rendering function resolver function.\r\n   * \r\n   * @returns {RenderingResolver} - new RenderingResolver instance\r\n   */\n\n\t}, {\n\t\tkey: 'from_resolvers',\n\t\tvalue: function from_resolvers(arg_name, arg_resource_resolver, arg_function_resolver) {\n\t\t\tvar resolver = new RenderingResolver(arg_name);\n\n\t\t\tif (_typr2.default.isFunction(arg_resource_resolver)) {\n\t\t\t\tresolver._find_resource = function (name) {\n\t\t\t\t\treturn arg_resource_resolver(name);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (_typr2.default.isFunction(arg_function_resolver)) {\n\t\t\t\tresolver._find_function = function (type) {\n\t\t\t\t\treturn arg_function_resolver(type);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn resolver;\n\t\t}\n\t}]);\n\n\treturn RenderingResolverBuilder;\n}();\n\nexports.default = RenderingResolverBuilder;\n\n\n},{\"typr/lib/typr\":218}],73:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _vnode = require('virtual-dom/vnode/vnode');\n\nvar _vnode2 = _interopRequireDefault(_vnode);\n\nvar _vtext = require('virtual-dom/vnode/vtext');\n\nvar _vtext2 = _interopRequireDefault(_vtext);\n\nvar _htmlToVdom = require('html-to-vdom');\n\nvar _htmlToVdom2 = _interopRequireDefault(_htmlToVdom);\n\nvar _vdomAsJson = require('vdom-as-json');\n\nvar _vdomAsJson2 = _interopRequireDefault(_vdomAsJson);\n\nvar _createElement = require('virtual-dom/create-element');\n\nvar _createElement2 = _interopRequireDefault(_createElement);\n\nvar _is_browser = require('../utils/is_browser');\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar vdom_to_json = _vdomAsJson2.default.toJson;\nvar vdom_from_json = _vdomAsJson2.default.fromJson;\n\n// COMMON IMPORTS\n\n\nvar context = 'common/rendering/rendering_result';\n\nvar convertHTML = (0, _htmlToVdom2.default)({\n\tVNode: _vnode2.default,\n\tVText: _vtext2.default\n});\n\n/**\r\n * @file RenderingResult class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar RenderingResult = function () {\n\t/**\r\n  * Create RenderingResult instance.\r\n  * \r\n  * API:\r\n  * \t\t->constructor():nothing - create an empty rendering result instance.\r\n  * \t\t\r\n  * \t\t->add_result(arg_result, arg_merge_vnodes=true):nothing - merge RenderingResult instances.\r\n  * \r\n  * \t\t->add_html(arg_tag_id, arg_html):nothing - take Html text and convert it to a virtual tree.\r\n  * \t\t->add_vtree(arg_tag_id, arg_vtree):nothing - add a virtual tree.\r\n  * \t\t->remove_vtree(arg_tag_id):nothing - remove a virtual tree.\r\n  * \r\n  * \t\t->get_vtree_json(arg_tag_id):VTree - get an existing VTree as Json.\r\n  * \t\t->get_vtree(arg_id):VTree - get an existing VTree instance.\r\n  * \t\t->get_html(arg_id)\r\n  * \t\t\r\n  * \t\t->get_final_vtree(arg_final_id, arg_parent_result):VNode - get final VTree.\r\n  * \t\t->get_final_html(arg_final_id, arg_parent_result):string - get Html code for an existing vtree.\r\n  * \r\n  * \t\t->set_headers(arg_headers)\r\n  * \r\n  * \t\t->add_head_scripts_urls(arg_urls)\r\n  * \t\t->add_head_scripts_tags(arg_tags)\r\n  * \r\n  * \t\t->add_body_scripts_urls(arg_urls)\r\n  * \t\t->add_body_scripts_tags(arg_tags)\r\n  * \r\n  * \t\t->add_head_styles_urls(arg_tags)\r\n  * \t\t->add_head_styles_tags(arg_tags)\r\n  * \r\n     * @returns {nothing}\r\n  */\n\tfunction RenderingResult() {\n\t\t_classCallCheck(this, RenderingResult);\n\n\t\tthis.is_rendering_result = true;\n\n\t\tthis.uid = 'RR_' + (0, _uid2.default)();\n\t\tthis.vtrees = {};\n\n\t\tthis.headers = [];\n\n\t\tthis.head_scripts_urls = [];\n\t\tthis.head_scripts_tags = [];\n\t\tthis.body_scripts_urls = [];\n\t\tthis.body_scripts_tags = [];\n\n\t\tthis.head_styles_urls = [];\n\t\tthis.head_styles_tags = [];\n\t\tthis.body_styles_urls = [];\n\t\tthis.body_styles_tags = [];\n\n\t\tthis.head_links_urls = [];\n\t}\n\n\t/**\r\n  * Merge RenderingResult instances.\r\n  * \r\n  * @param {RenderingResult} arg_result - rendering result to add to this result.\r\n  * @param {boolean} arg_merge_vnodes - flag to merge or not vnodes (default:true) (optional)\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(RenderingResult, [{\n\t\tkey: 'add_result',\n\t\tvalue: function add_result(arg_result) {\n\t\t\tvar arg_merge_vnodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n\t\t\t// console.log(context + ':add_result [' + this.uid + ']:merge=' + (arg_merge_vnodes ? 'y' : 'n'), this.body_scripts_urls.length, arg_result.body_scripts_urls.length)\n\n\t\t\tif (arg_merge_vnodes) {\n\t\t\t\tthis.vtrees = Object.assign(this.vtrees, arg_result.vtrees);\n\t\t\t}\n\n\t\t\tvar asset_compare = _lodash2.default.isEqual;\n\n\t\t\tthis.head_scripts_urls = _lodash2.default.uniqWith(_lodash2.default.concat(this.head_scripts_urls, arg_result.head_scripts_urls), asset_compare);\n\t\t\tthis.head_scripts_tags = _lodash2.default.uniqWith(_lodash2.default.concat(this.head_scripts_tags, arg_result.head_scripts_tags), asset_compare);\n\t\t\tthis.body_scripts_urls = _lodash2.default.uniqWith(_lodash2.default.concat(this.body_scripts_urls, arg_result.body_scripts_urls), asset_compare);\n\t\t\tthis.body_scripts_tags = _lodash2.default.uniqWith(_lodash2.default.concat(this.body_scripts_tags, arg_result.body_scripts_tags), asset_compare);\n\n\t\t\tthis.head_styles_urls = _lodash2.default.uniqWith(_lodash2.default.concat(this.head_styles_urls, arg_result.head_styles_urls), asset_compare);\n\t\t\tthis.head_styles_tags = _lodash2.default.uniqWith(_lodash2.default.concat(this.head_styles_tags, arg_result.head_styles_tags), asset_compare);\n\t\t\tthis.body_styles_urls = _lodash2.default.uniqWith(_lodash2.default.concat(this.body_styles_urls, arg_result.body_styles_urls), asset_compare);\n\t\t\tthis.body_styles_tags = _lodash2.default.uniqWith(_lodash2.default.concat(this.body_styles_tags, arg_result.body_styles_tags), asset_compare);\n\n\t\t\tthis.head_links_urls = _lodash2.default.uniqWith(_lodash2.default.concat(this.head_links_urls, arg_result.head_links_urls), asset_compare);\n\t\t}\n\n\t\t/**\r\n   * Add Html tag.\r\n   * \r\n   * @param {string} arg_tag_id - tag id string.\r\n   * @param {string} arg_html - Html string.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_html',\n\t\tvalue: function add_html(arg_tag_id, arg_html) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_tag_id) && arg_tag_id.length > 0, context + ':add_html:bad tag id string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_html), context + ':set_html:bad html string');\n\t\t\tthis.vtrees[arg_tag_id] = vdom_to_json(convertHTML(arg_html));\n\t\t}\n\n\t\t/**\r\n   * Add a VTree instance.\r\n   * \r\n   * @param {string} arg_tag_id - tag id string.\r\n   * @param {VNode} arg_vtree - virtual-dom virtual tree.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_vtree',\n\t\tvalue: function add_vtree(arg_tag_id, arg_vtree) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_tag_id) && arg_tag_id.length > 0, context + ':add_vtree:bad tag id string');\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_vtree), context + ':add_vtree:bad vtree object');\n\t\t\tthis.vtrees[arg_tag_id] = arg_vtree;\n\t\t}\n\n\t\t/**\r\n   * Remove a VTree instance.\r\n   * \r\n   * @param {string} arg_tag_id - tag id string.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'remove_vtree',\n\t\tvalue: function remove_vtree(arg_tag_id) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_tag_id) && arg_tag_id.length > 0, context + ':add_vtree:bad tag id string');\n\t\t\tdelete this.vtrees[arg_tag_id];\n\t\t}\n\n\t\t/**\r\n   * Convert all VNode to json objects.\r\n   * \r\n   * @returns {RenderingResult}\r\n   */\n\n\t}, {\n\t\tkey: 'convert_to_json',\n\t\tvalue: function convert_to_json() {\n\t\t\tvar i = 0;\n\t\t\tvar keys = Object.keys(this.vtrees);\n\t\t\tvar l = keys.length;\n\t\t\tfor (; i < l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tthis.vtrees[key] = vdom_to_json(this.vtrees[key]);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Convert all VNode to json objects.\r\n   * \r\n   * @returns {RenderingResult}\r\n   */\n\n\t}, {\n\t\tkey: 'convert_from_json',\n\t\tvalue: function convert_from_json() {\n\t\t\tvar i = 0;\n\t\t\tvar keys = Object.keys(this.vtrees);\n\t\t\tvar l = keys.length;\n\t\t\tfor (; i < l; i++) {\n\t\t\t\tvar key = keys[i];\n\t\t\t\tthis.vtrees[key] = vdom_from_json(this.vtrees[key]);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\r\n   * Get an existing VTree as Json.\r\n   * \r\n   * @param {string} arg_tag_id - tag id string.\r\n   * @param {VNode} arg_vtree - virtual-dom virtual tree.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'get_vtree_json',\n\t\tvalue: function get_vtree_json(arg_tag_id) {\n\t\t\tvar vtree = this.get_vtree(arg_tag_id);\n\t\t\tif (vtree) {\n\t\t\t\treturn vdom_to_json(arg_vtree);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Get existing VTree instance.\r\n   * \r\n   * @param {string} arg_id - element id.\r\n   * \r\n   * @returns {VTree}\r\n   */\n\n\t}, {\n\t\tkey: 'get_vtree',\n\t\tvalue: function get_vtree(arg_id) {\n\t\t\treturn this.vtrees[arg_id];\n\t\t}\n\n\t\t/**\r\n   * Get Html code for an existing vtree.\r\n   * \r\n   * @param {string} arg_id - element id.\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_html',\n\t\tvalue: function get_html(arg_id) {\n\t\t\tvar vtree = this.get_vtree(arg_id);\n\t\t\tif (!vtree) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar e = (0, _createElement2.default)(vtree);\n\t\t\t\tif (e) {\n\t\t\t\t\treturn (0, _is_browser.is_browser)() ? e.innerHTML : e.toString();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(context + ':', e);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Get final VTree.\r\n   * \r\n   * @param {string|undefined} arg_final_id - final tree id (optional).\r\n   * @param {RenderingResult} arg_parent_result - parent result to merge assets into (optional).\r\n   * \r\n   * @returns {VNode}\r\n   */\n\n\t}, {\n\t\tkey: 'get_final_vtree',\n\t\tvalue: function get_final_vtree(arg_final_id, arg_parent_result) {\n\t\t\t// MERGE THIS ASSETS INTO PARENT RESULT ASSETS\n\t\t\tif (_typr2.default.isObject(arg_parent_result) && arg_parent_result.is_rendering_result) {\n\t\t\t\targ_parent_result.add_result(this, false);\n\t\t\t}\n\n\t\t\t// NO VNODE\n\t\t\tvar size = _lodash2.default.size(this.vtrees);\n\t\t\tif (size == 0) {\n\t\t\t\treturn new _vtext2.default('');\n\t\t\t}\n\n\t\t\t// ONLY ONE VNODE\n\t\t\tif (size == 1) {\n\t\t\t\tvar trees = _lodash2.default.toArray(this.vtrees);\n\t\t\t\treturn trees[0];\n\t\t\t}\n\n\t\t\t// MANY VNODES\n\t\t\tvar settings = _typr2.default.isString(arg_final_id) ? { id: arg_final_id } : undefined;\n\t\t\treturn new _vnode2.default('DIV', settings, _lodash2.default.toArray(this.vtrees), 'id', undefined);\n\t\t}\n\n\t\t/**\r\n   * Get Html code for an existing vtree.\r\n   * \r\n   * @param {string|undefined} arg_final_id - final tree id (optional).\r\n   * @param {RenderingResult} arg_parent_result - parent result to merge assets into (optional).\r\n   * \r\n   * @returns {string}\r\n   */\n\n\t}, {\n\t\tkey: 'get_final_html',\n\t\tvalue: function get_final_html(arg_final_id, arg_parent_result) {\n\t\t\tvar vtree = this.get_final_vtree(arg_final_id, arg_parent_result);\n\t\t\tif (!vtree) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar e = (0, _createElement2.default)(vtree);\n\t\t\t\tif (e) {\n\t\t\t\t\treturn (0, _is_browser.is_browser)() ? e.innerHTML : e.toString();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(context + ':', e);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\t/**\r\n   * Set headers.\r\n   * \r\n   * @param {array} set_headers - headers strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'set_headers',\n\t\tvalue: function set_headers(arg_headers) {\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_headers), context + ':set_headers:bad headers array');\n\t\t\tthis.headers = arg_headers;\n\t\t}\n\n\t\t/**\r\n   * Add header scripts urls.\r\n   * \r\n   * @param {array} arg_urls - scripts urls strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_head_scripts_urls',\n\t\tvalue: function add_head_scripts_urls() {\n\t\t\tvar arg_urls = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_urls), context + ':add_head_scripts_urls:bad head scripts urls array');\n\t\t\tthis.head_scripts_urls = _lodash2.default.concat(this.head_scripts_urls, arg_urls);\n\t\t}\n\n\t\t/**\r\n   * Add header scripts tags.\r\n   * \r\n   * @param {array} arg_tags - scripts tags strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_head_scripts_tags',\n\t\tvalue: function add_head_scripts_tags() {\n\t\t\tvar arg_tag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_tags), context + ':add_head_scripts_tags:bad head scripts tags array');\n\t\t\tthis.head_scripts_tags = _lodash2.default.concat(this.head_scripts_tag, arg_tags);\n\t\t}\n\n\t\t/**\r\n   * Add body scripts urls.\r\n   * \r\n   * @param {array} arg_urls - scripts urls strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_body_scripts_urls',\n\t\tvalue: function add_body_scripts_urls() {\n\t\t\tvar arg_urls = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_urls), context + ':add_body_scripts_urls:bad body scripts urls array');\n\t\t\tthis.body_scripts_urls = _lodash2.default.concat(this.body_scripts_urls, arg_urls);\n\t\t}\n\n\t\t/**\r\n   * Add body scripts tags.\r\n   * \r\n   * @param {array} arg_tags - scripts tags strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_body_scripts_tags',\n\t\tvalue: function add_body_scripts_tags() {\n\t\t\tvar arg_tags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_tags), context + ':add_body_scripts_tags:bad body scripts tags array');\n\t\t\tthis.body_scripts_tags = _lodash2.default.concat(this.body_scripts_tags, arg_tags);\n\t\t}\n\n\t\t/**\r\n   * Add header styles urls.\r\n   * \r\n   * @param {array} arg_urls - styles urls strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_head_styles_urls',\n\t\tvalue: function add_head_styles_urls() {\n\t\t\tvar arg_urls = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_urls), context + ':add_head_styles_urls:bad head styles urls array');\n\t\t\tthis.head_styles_urls = _lodash2.default.concat(this.head_styles_urls, arg_urls);\n\t\t}\n\n\t\t/**\r\n   * Add header styles tags.\r\n   * \r\n   * @param {array} arg_tags - styles tags strings array.\r\n   * \r\n   * @returns {nothing}.\r\n   */\n\n\t}, {\n\t\tkey: 'add_head_styles_tags',\n\t\tvalue: function add_head_styles_tags() {\n\t\t\tvar arg_tags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\t\t\t(0, _assert2.default)(_typr2.default.isArray(arg_tags), context + ':add_head_styles_tags:bad head styles tags array');\n\t\t\tthis.head_styles_tags = _lodash2.default.concat(this.head_styles_tags, arg_tags);\n\t\t}\n\t}]);\n\n\treturn RenderingResult;\n}();\n\nexports.default = RenderingResult;\n\n\n},{\"../utils/is_browser\":102,\"../utils/uid\":106,\"assert\":107,\"html-to-vdom\":156,\"lodash\":187,\"typr\":217,\"vdom-as-json\":224,\"virtual-dom/create-element\":230,\"virtual-dom/vnode/vnode\":251,\"virtual-dom/vnode/vtext\":253}],74:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/script';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tcode: undefined\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tlanguage: 'javascript',\n\tid: undefined\n};\n\n/**\r\n * Script rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\n\t// GET STATE ATTRIBUTES\n\n\n\tvar code_value = _typr2.default.isString(state.code) ? state.code : undefined;\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = code_value;\n\tvar tag_props = { id: tag_id, type: settings.language };\n\tvar tag = (0, _h2.default)('script', tag_props, tag_children);\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],75:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _uid = require('../utils/uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar context = 'common/rendering/table';\n\n// DEFAULT STATE\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar default_state = {\n\tlabel: undefined,\n\theaders: undefined, // array (rows) of array (th values)\n\titems: undefined, // array (rows) of array (cells)\n\tfooters: undefined // array (rows) of array (th values)\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * Table rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// DEBUG\n\t// console.log(context + ':rendering_function:arg_settings=', arg_settings)\n\t// console.log(context + ':rendering_function:arg_state=', arg_state)\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\tvar rendering_factory = rendering_context ? rendering_context.rendering_factory : undefined;\n\n\t// GET STATE ATTRIBUTES\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\tvar headers_value = _typr2.default.isArray(state.headers) ? label_value ? [[label_value]].concat(state.headers) : state.headers : label_value ? [[label_value]] : undefined;\n\tvar items_value = _typr2.default.isArray(state.items) ? state.items : undefined;\n\tvar footers_value = _typr2.default.isArray(state.footers) ? state.footers : undefined;\n\n\t// GET SETTINGS ATTRIBUTES\n\tvar has_body_cursor = _typr2.default.isBoolean(settings.has_body_cursor) ? settings.has_body_cursor : undefined;\n\n\t// DEBUG\n\trendering_context.trace_fn(state.headers, context + ':state.headers');\n\trendering_context.trace_fn(state.items, context + ':state.items');\n\trendering_context.trace_fn(headers_value, context + ':headers_value');\n\trendering_context.trace_fn(items_value, context + ':items_value');\n\n\t// BUILD THEAD, TBODY, TFOOT\n\tvar cell_fn = function cell_fn(cell) {\n\t\treturn _typr2.default.isFunction(rendering_factory) ? rendering_factory(cell, rendering_context, settings.children).get_final_vtree(undefined, rendering_result) : cell.toString();\n\t};\n\tvar cell_content = function cell_content(tag, cell_settings, index) {\n\t\t// CELL CONTENT SETTINGS IS AN OBJECT\n\t\tif (_typr2.default.isObject(cell_settings)) {\n\t\t\t// CELL CONTENT IS A VALUE\n\t\t\tif (!_typr2.default.isString(cell_settings.type) && _typr2.default.isString(cell_settings.value)) {\n\t\t\t\tif (!_typr2.default.isString(cell_settings.key)) {\n\t\t\t\t\tcell_settings.key = (0, _uid2.default)();\n\t\t\t\t}\n\n\t\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + cell_settings.key }, [cell_settings.value]);\n\t\t\t}\n\n\t\t\t// CELL CONTENT IS A VIEW\n\t\t\tif (!_typr2.default.isString(cell_settings.type) && _typr2.default.isString(cell_settings.view)) {\n\t\t\t\tif (!_typr2.default.isString(cell_settings.key)) {\n\t\t\t\t\tcell_settings.key = cell_settings.view;\n\t\t\t\t}\n\n\t\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + cell_settings.key }, [cell_fn(cell_settings.view)]);\n\t\t\t}\n\n\t\t\t// CELL IS A RENDERING SETTINGS\n\t\t\tif (_typr2.default.isString(cell_settings.type)) {\n\t\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [cell_fn(cell_settings)]);\n\t\t\t}\n\n\t\t\tvar _str_value = cell_settings.toString();\n\t\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [_str_value]);\n\t\t}\n\n\t\tvar str_value = _typr2.default.isString(cell_settings) ? cell_settings : _typr2.default.isFunction(cell_settings.toString) ? cell_settings.toString() : 'ERROR';\n\t\treturn (0, _h2.default)(tag, { id: settings.id + '_' + tag + '_' + index }, [str_value]);\n\t};\n\tvar th_fn = function th_fn(content, index) {\n\t\treturn cell_content('th', content, index);\n\t};\n\tvar td_fn = function td_fn(content, index) {\n\t\treturn cell_content('td', content, index);\n\t};\n\n\tvar tr_th_fn = function tr_th_fn(cells, index) {\n\t\treturn (0, _h2.default)('tr', { id: settings.id + '_head_row_' + index }, (_typr2.default.isArray(cells) ? cells : [cells]).map(th_fn));\n\t};\n\tvar tr_td_fn = function tr_td_fn(cells, index) {\n\t\treturn (0, _h2.default)('tr', { id: settings.id + '_body_row_' + index }, (_typr2.default.isArray(cells) ? cells : [cells]).map(td_fn));\n\t};\n\tvar tr_tf_fn = function tr_tf_fn(cells, index) {\n\t\treturn (0, _h2.default)('tr', { id: settings.id + '_foot_row_' + index }, (_typr2.default.isArray(cells) ? cells : [cells]).map(th_fn));\n\t};\n\n\tvar thead_children = headers_value ? (_typr2.default.isArray(headers_value) ? headers_value : [headers_value]).map(tr_th_fn) : undefined;\n\tvar tbody_children = items_value ? (_typr2.default.isArray(items_value) ? items_value : [items_value]).map(tr_td_fn) : undefined;\n\tvar tfoot_children = footers_value ? (_typr2.default.isArray(footers_value) ? footers_value : [footers_value]).map(tr_tf_fn) : undefined;\n\n\tvar thead_props = undefined;\n\tvar tbody_props = has_body_cursor ? { style: \"cursor:pointer;\" } : undefined;\n\tvar tfoot_props = undefined;\n\n\tvar thead = (0, _h2.default)('thead', thead_props, thead_children);\n\tvar tbody = (0, _h2.default)('tbody', tbody_props, tbody_children);\n\tvar tfoot = (0, _h2.default)('tfoot', tfoot_props, tfoot_children);\n\n\t// BUILD TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = [thead, tbody, tfoot];\n\tvar tag_props = { id: tag_id, style: settings.style, className: settings.class };\n\tvar tag = (0, _h2.default)('table', tag_props, tag_children);\n\n\t// DEBUG\n\t// console.log(context + ':rendering_function:settings=', settings)\n\t// console.log(context + ':rendering_function:tag_props=', tag_props)\n\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"../utils/uid\":106,\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],76:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/tabs';\n\n// DEFAULT STATE\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined,\n\titems: undefined,\n\thas_vertical: false\n};\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * Tabs rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// console.log(arg_settings, context)\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\tvar rendering_factory = rendering_context ? rendering_context.rendering_factory : undefined;\n\n\t// GET STATE ATTRIBUTES\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\tvar items_value = _typr2.default.isArray(state.items) ? state.items : [];\n\tvar titles_value = items_value.map(function (item) {\n\t\treturn item.title;\n\t});\n\tvar contents_value = items_value.map(function (item) {\n\t\treturn item.content;\n\t});\n\tif (state.has_vertical) {}\n\t// return `\\n<div ${html_id}>\\n<div class=\"row collapse\">\\n<div class=\"medium-2 columns\">\\n${html_titles}\\n</div>\\n<div class=\"medium-10 columns\">\\n${html_contents}\\n</div>\\n</div>\\n</div>\\n`\n\n\n\t// DEBUG\n\trendering_context.trace_fn(label_value, 'label_value');\n\trendering_context.trace_fn(items_value, 'items_value');\n\n\t// BUILD TABS TITLES\n\tvar items_tab_is_active = function items_tab_is_active(index) {\n\t\treturn index == 0 ? ' is-active' : '';\n\t};\n\tvar items_tab_is_aria_selected = function items_tab_is_aria_selected(index) {\n\t\treturn index == 0 ? true : false;\n\t}; // TODO\n\tvar titles_create = function titles_create(title, index) {\n\t\tvar r = rendering_factory(title, rendering_context, settings.children).get_final_vtree(undefined, rendering_result);\n\t\treturn r ? r : 'Tab ' + index;\n\t};\n\tvar titles_a = function titles_a(title, index) {\n\t\treturn (0, _h2.default)('a', { href: '#' + settings.id + '_content_' + index, 'aria-selected': items_tab_is_aria_selected(index) ? 'true' : 'false' }, titles_create(title, index));\n\t};\n\tvar titles_li = function titles_li(title, index) {\n\t\treturn (0, _h2.default)('li', { class: 'tabs-title' + items_tab_is_active(index) }, titles_a(title, index));\n\t};\n\tvar titles_id = settings.id + '_titles';\n\tvar titles_children = titles_value.map(titles_li);\n\tvar titles_props = { id: titles_id, style: undefined, class: 'tabs' + (state.has_vertical ? ' vertical' : ''), 'data-tabs': '' };\n\tvar titles = (0, _h2.default)('ul', titles_props, titles_children);\n\n\t// BUILD TABS CONTENTS\n\tvar contents_item = function contents_item(content) {\n\t\treturn rendering_factory(content, rendering_context, settings.children).get_final_vtree(undefined, rendering_result);\n\t};\n\tvar contents_div = function contents_div(content, index) {\n\t\treturn (0, _h2.default)('div', { id: settings.id + '_content_' + index, class: 'tabs-panel' + items_tab_is_active(index) }, contents_item(content));\n\t};\n\tvar contents_children = contents_value.map(contents_div);\n\tvar contents_props = { style: undefined, class: 'tabs-content' + (state.has_vertical ? ' vertical' : ''), 'data-tabs-content': titles_id };\n\tvar contents = (0, _h2.default)('div', contents_props, contents_children);\n\n\t// BUILD DIV TAG\n\tvar tag_id = settings.id;\n\tvar tag_children = [titles, contents];\n\tvar tag_props = { id: tag_id, style: settings.style, class: settings.class };\n\tvar tag = (0, _h2.default)('div', tag_props, tag_children);\n\n\t// UPDATE RENDERING RESULT\n\trendering_result.add_vtree(tag_id, tag);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],77:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _h = require('virtual-dom/h');\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import assert from 'assert'\n// import _ from 'lodash'\nvar context = 'common/rendering/textarea';\n\n// INPUT FIELD\n\n\n// COMMON IMPORTS\n// NPM IMPORTS\nvar default_state = {\n\tlabel: undefined,\n\tplaceholder: 'enter a string value',\n\tdefault: ''\n};\n\nvar default_settings = {\n\tformat: 'text',\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n// const formats = ['text', 'number', 'date', 'datetime', 'datetime-local', 'email', 'month', 'password', 'search', 'tel', 'time', 'url', 'week']\n\n\n/**\r\n * Textarea rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET SETTINGS ATTRIBUTES\n\t// const format = (T.isString(settings.format) && formats.indexOf(settings.format) > -1) ? settings.format : 'text'\n\n\n\tvar css_label_class = _typr2.default.isString(settings.css_class_label) ? settings.css_class_label : undefined;\n\n\t// GET STATE ATTRIBUTES\n\tvar placeholder_value = _typr2.default.isString(state.placeholder) ? state.placeholder : undefined;\n\tvar default_value = _typr2.default.isString(state.default) || _typr2.default.isNumber(state.default) ? state.default : undefined;\n\tvar label_value = _typr2.default.isString(state.label) ? state.label : undefined;\n\n\t// BUILD INPUT TAG\n\tvar input_id = label_value ? settings.id + '_textarea' : settings.id;\n\tvar input_children = undefined;\n\tvar input_props = { id: input_id, /*type:format,*/value: default_value, placeholder: placeholder_value, style: settings.style, class: settings.class };\n\tvar input = (0, _h2.default)('textarea', input_props, input_children);\n\n\tif (!label_value) {\n\t\trendering_result.add_vtree(input_id, input);\n\t\treturn rendering_result;\n\t}\n\n\t// BUILD LABEL TAG\n\tvar label_id = input_id + '_label';\n\tvar label_props = { id: label_id, for: input_id, class: css_label_class };\n\tvar label = (0, _h2.default)('label', label_props, [label_value]);\n\n\tvar div = (0, _h2.default)('div', { id: settings.id }, [label, input]);\n\trendering_result.add_vtree(settings.id, div);\n\n\treturn rendering_result;\n};\n\n\n},{\"./rendering_normalize\":71,\"typr\":217,\"virtual-dom/h\":232}],78:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _rendering_normalize2 = require('./rendering_normalize');\n\nvar _rendering_normalize3 = _interopRequireDefault(_rendering_normalize2);\n\nvar _table = require('./table');\n\nvar _table2 = _interopRequireDefault(_table);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\n// import T from 'typr'\n// import assert from 'assert'\n// import _ from 'lodash'\n// import h from 'virtual-dom/h'\n\n// COMMON IMPORTS\nvar context = 'common/rendering/vbox';\n\n// DEFAULT STATE\nvar default_state = {\n\tlabel: undefined,\n\titems: undefined };\n\n// DEFAULT SETTINGS\nvar default_settings = {\n\tclass: undefined,\n\tstyle: undefined,\n\tid: undefined\n};\n\n/**\r\n * VBox rendering with given state, produce a rendering result.\r\n * \r\n * @param {object} arg_settings - rendering item settings.\r\n * @param {object} arg_state - component state.\r\n * @param {object} arg_rendering_context - rendering context: { trace_fn:..., resolver:..., credentials:..., rendering_factory:... }.\r\n * @param {RenderingResult} arg_rendering_result - rendering result to update.\r\n * \r\n * @returns {RenderingResult} - updated Rendering result: VNode or Html text, headers.\r\n */\n\nexports.default = function (arg_settings) {\n\tvar arg_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\tvar arg_rendering_context = arguments[2];\n\tvar arg_rendering_result = arguments[3];\n\n\t// NORMALIZE ARGS\n\tvar _rendering_normalize = (0, _rendering_normalize3.default)(default_settings, default_state, arg_settings, arg_state, arg_rendering_context, arg_rendering_result, context),\n\t    settings = _rendering_normalize.settings,\n\t    state = _rendering_normalize.state,\n\t    rendering_context = _rendering_normalize.rendering_context,\n\t    rendering_result = _rendering_normalize.rendering_result;\n\n\t// GET STATE ATTRIBUTES\n\n\n\tstate.columns = undefined;\n\tstate.footers = undefined;\n\n\treturn (0, _table2.default)(settings, state, rendering_context, rendering_result);\n};\n\n\n},{\"./rendering_normalize\":71,\"./table\":75}],79:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _immutable = require('immutable');\n\nvar _state_store = require('./state_store');\n\nvar _state_store2 = _interopRequireDefault(_state_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/state_store/redux_store';\n\n/**\r\n * @file Immutable.Map class to deal with state storing and mutations.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar MapStore = function (_StateStore) {\n\t_inherits(MapStore, _StateStore);\n\n\t/**\r\n  * Create a Immutable.Map state Store instance.\r\n  * @extends StateStore\r\n  * \r\n  * @param {object} arg_initial_state - initial state.\r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction MapStore(arg_initial_state, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, MapStore);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (MapStore.__proto__ || Object.getPrototypeOf(MapStore)).call(this, my_context, arg_logger_manager));\n\n\t\t_this.is_mutable = true;\n\t\t_this.use_immutable = true;\n\n\t\t_this.root = arg_initial_state ? (0, _immutable.fromJS)(arg_initial_state).toMap() : new _immutable.Map();\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get current state.\r\n  * \r\n  * @returns {Immutable}\r\n  */\n\n\n\t_createClass(MapStore, [{\n\t\tkey: 'get_state',\n\t\tvalue: function get_state() {\n\t\t\treturn this.root;\n\t\t}\n\n\t\t/**\r\n   * Set/Replace current state.\r\n   * \r\n   * @param {object} arg_state - new state.\r\n   * \r\n   * @returns {Immutable}\r\n   */\n\n\t}, {\n\t\tkey: 'set_state',\n\t\tvalue: function set_state(arg_state) {\n\t\t\tthis.root = arg_state ? (0, _immutable.fromJS)(arg_state).toMap() : new _immutable.Map();\n\t\t}\n\n\t\t/**\r\n   * Dispatch a requested action to mutate current state.\r\n   * \r\n   * @param {object} arg_action - action record: { type:'...', ... }.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch',\n\t\tvalue: function dispatch() /*arg_action*/{\n\t\t\tthrow Error('Map store does not implement dispatch method');\n\t\t}\n\n\t\t/**\r\n   * Register a handle on state mutations.\r\n   * \r\n   * @param {function} arg_handle - state changes handle as f(old_state, new_state).\r\n   * \r\n   * @returns {function} - unsubscribe function\r\n   */\n\n\t}, {\n\t\tkey: 'subscribe',\n\t\tvalue: function subscribe() /*arg_handle*/{\n\t\t\tthrow Error('Map store does not implement subscribe method');\n\t\t}\n\t}]);\n\n\treturn MapStore;\n}(_state_store2.default);\n\nexports.default = MapStore;\n\n\n},{\"./state_store\":81,\"immutable\":170}],80:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _redux = require('redux');\n\nvar _immutable = require('immutable');\n\nvar _state_store = require('./state_store');\n\nvar _state_store2 = _interopRequireDefault(_state_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/state_store/redux_store';\n\n/**\r\n * @file Redux class to deal with state storing and mutations.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar ReduxStore = function (_StateStore) {\n\t_inherits(ReduxStore, _StateStore);\n\n\t/**\r\n  * Create a Redux state Store instance.\r\n  * @extends StateStore\r\n  * \r\n  * @param {function} arg_reducer - state reducer.\r\n  * @param {object} arg_initial_state - initial state.\r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction ReduxStore(arg_reducer, arg_initial_state, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, ReduxStore);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (ReduxStore.__proto__ || Object.getPrototypeOf(ReduxStore)).call(this, my_context, arg_logger_manager));\n\n\t\t_this.is_mutable = true;\n\t\t_this.use_immutable = true;\n\n\t\t_this.store = (0, _redux.createStore)(arg_reducer, (0, _immutable.fromJS)(arg_initial_state));\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get current state.\r\n  * \r\n  * @returns {Immutable}\r\n  */\n\n\n\t_createClass(ReduxStore, [{\n\t\tkey: 'get_state',\n\t\tvalue: function get_state() {\n\t\t\treturn this.store.getState();\n\t\t}\n\n\t\t/**\r\n   * Set/Replace current state.\r\n   * \r\n   * @param {object} arg_state - new state.\r\n   * \r\n   * @returns {Immutable}\r\n   */\n\n\t}, {\n\t\tkey: 'set_state',\n\t\tvalue: function set_state() /*arg_state*/{\n\t\t\tthrow Error('Redux store does not permit to set a state directly');\n\t\t}\n\n\t\t/**\r\n   * Dispatch a requested action to mutate current state.\r\n   * \r\n   * @param {object} arg_action - action record: { type:'...', ... }.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch',\n\t\tvalue: function dispatch(arg_action) {\n\t\t\t// console.log(context + ':dispatch:action', arg_action)\n\t\t\tthis.store.dispatch(arg_action);\n\t\t}\n\n\t\t/**\r\n   * Register a handle on state mutations.\r\n   * \r\n   * @param {function} arg_handle - state changes handle as f(old_state, new_state).\r\n   * \r\n   * @returns {function} - unsubscribe function\r\n   */\n\n\t}, {\n\t\tkey: 'subscribe',\n\t\tvalue: function subscribe(arg_handle) {\n\t\t\treturn this.store.subscribe(arg_handle);\n\t\t}\n\t}]);\n\n\treturn ReduxStore;\n}(_state_store2.default);\n\nexports.default = ReduxStore;\n\n\n},{\"./state_store\":81,\"immutable\":170,\"redux\":210}],81:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _loggable = require('../base/loggable');\n\nvar _loggable2 = _interopRequireDefault(_loggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/state_store/store';\n\n/**\r\n * @file Base class to deal with state storing and mutations.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar StateStore = function (_Loggable) {\n\t_inherits(StateStore, _Loggable);\n\n\t/**\r\n  * Create a state Store instance.\r\n  * @extends Loggable\r\n  * \r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction StateStore(arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, StateStore);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (StateStore.__proto__ || Object.getPrototypeOf(StateStore)).call(this, my_context, arg_logger_manager));\n\n\t\t_this.is_mutable = true;\n\t\t_this.use_immutable = false;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get current state.\r\n  * @abstract\r\n  * \r\n  * @returns {object}\r\n  */\n\n\n\t_createClass(StateStore, [{\n\t\tkey: 'get_state',\n\t\tvalue: function get_state() {\n\t\t\treturn {};\n\t\t}\n\n\t\t/**\r\n   * Set/Replace current state.\r\n   * @abstract\r\n   * \r\n   * @param {object} arg_state - new state.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'set_state',\n\t\tvalue: function set_state() /*arg_state*/{}\n\n\t\t/**\r\n   * Dispatch a requested action to mutate current state.\r\n   * @abstract\r\n   * \r\n   * @param {object} arg_action - action record: { type:'...', ... }.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch',\n\t\tvalue: function dispatch() /*arg_action*/{}\n\n\t\t/**\r\n   * Dispatch a state action.\r\n   * \r\n   * @param {object} arg_action - action object with a 'type' attribute.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'dispatch_action',\n\t\tvalue: function dispatch_action(arg_action) {\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_action) && _typr2.default.isString(arg_action.type), context + ':dispatch_action:bad action object');\n\t\t\tthis.dispatch(arg_action);\n\t\t}\n\n\t\t/**\r\n   * Register a handle on state mutations.\r\n   * @abstract\r\n   * \r\n   * @param {function} arg_handle - state changes handle as f(old_state, new_state).\r\n   * \r\n   * @returns {function} - unsubscribe function\r\n   */\n\n\t}, {\n\t\tkey: 'subscribe',\n\t\tvalue: function subscribe() /*arg_handle*/{}\n\t}]);\n\n\treturn StateStore;\n}(_loggable2.default);\n\nexports.default = StateStore;\n\n\n},{\"../base/loggable\":38,\"assert\":107,\"typr\":217}],82:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.store = undefined;\n\nvar _topology_registry = require('./topology_registry');\n\nvar _topology_registry2 = _interopRequireDefault(_topology_registry);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// CREATE DEFAULT RUNTIME STORE\nvar store = exports.store = new _topology_registry2.default(); // COMMON IMPORTS\nexports.default = store;\n\n\n},{\"./topology_registry\":96}],83:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar default_config = exports.default_config = {\n\t'nodes': {},\n\n\t'tenants': {\n\t\t'default': {\n\t\t\t'applications': {},\n\t\t\t'packages': {}\n\t\t}\n\t},\n\n\t'deployments': {},\n\n\t'security': {\n\t\t'is_readonly': false,\n\n\t\t'authentication': {\n\t\t\t'enabled': false,\n\t\t\t'plugins': [],\n\t\t\t'default_plugins': []\n\t\t},\n\n\t\t'authorization': {\n\t\t\t'enabled': false,\n\t\t\t'plugins': [],\n\t\t\t'default_plugins': []\n\t\t},\n\n\t\t'datasources': []\n\t},\n\n\t'plugins': {},\n\n\t'loggers': {},\n\t'traces': {}\n};\n\n\n},{}],84:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _parser = require('../../../utils/parser/parser');\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_application';\n\n// COMMON IMPORTS\n\n\nvar error_msg_bad_config = context + ':bad config - world.tenants.*.applications.* should be a plain object';\nvar error_msg_bad_from_file = context + ':bad config - world.tenants.*.applications.*.from_file should be a string';\nvar error_msg_bad_license = context + ':bad config - world.tenants.*.applications.*.license should be a string';\nvar error_msg_bad_url = context + ':bad config - world.tenants.*.applications.*.url should be a string';\nvar error_msg_bad_file_config = context + ':bad config - world.tenants.*.applications.*.from_file content should be an object';\n\nvar error_msg_bad_packages = context + ':bad config - world.tenants.*.applications.*: packages should be an object';\nvar error_msg_bad_plugins = context + ':bad config - world.tenants.*.applications.*: plugins should be an object';\nvar error_msg_bad_services = context + ':bad config - world.tenants.*.applications.*: services should be an object';\n\nvar error_msg_bad_used_packages = context + ':bad config - world.tenants.*.applications.*.used_packages should be an array';\nvar error_msg_bad_used_plugins = context + ':bad config - world.tenants.*.applications.*.used_plugins should be an array';\nvar error_msg_bad_used_services = context + ':bad config - world.tenants.*.applications.*.used_services should be an array';\nvar error_msg_bad_provided_services = context + ':bad config - world.tenants.*.applications.*.provided_services should be an array';\n\nvar error_msg_bad_service_name = context + ':bad config - world.tenants.*.applications.*.used_services|provided_services.* should be a string';\nvar error_msg_bad_package_name = context + ':bad config - world.tenants.*.applications.*.used_packages.* should be a string';\nvar error_msg_bad_plugin_name = context + ':bad config - world.tenants.*.applications.*.used_plugins.* should be a string';\n\nvar error_msg_used_plugin_not_found = context + ':bad config - world.tenants.*.applications.*.used_plugins.* not found in world.plugins';\nvar error_msg_used_package_not_found = context + ':bad config - world.tenants.*.applications.*.used_packages.* not found in world.tenants.*.packages';\nvar error_msg_used_service_not_found = context + ':bad config - world.tenants.*.applications.*.used_service.* not found in world.tenants.*.packages.*.resources';\nvar error_msg_provided_service_not_found = context + ':bad config - world.tenants...provided_service.* not found in world...packages.*.resources';\n\n/**\r\n * Load the 'config.applications.*' keys of the final state\r\n * Pure function: (Plain Object) => (mutated Plain Object)\r\n */\nfunction load_application(logs, arg_app_name, arg_app_config, arg_config_packages, arg_config_plugins, arg_config_services, arg_base_dir) {\n\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name);\n\n\t(0, _assert2.default)(arg_config_packages, error_msg_bad_packages);\n\t(0, _assert2.default)(arg_config_plugins, error_msg_bad_plugins);\n\t(0, _assert2.default)(arg_config_services, error_msg_bad_services);\n\n\ttry {\n\t\t// LOAD FROM FILE\n\t\tif (_typr2.default.isString(arg_app_config.from_file)) {\n\t\t\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name + '.from_file');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_app_config.from_file), error_msg_bad_from_file);\n\n\t\t\tvar file_path_name = _path2.default.join(arg_base_dir, arg_app_config.from_file);\n\n\t\t\tvar app_file_config = _parser2.default.read(file_path_name, 'utf8');\n\t\t\t// console.log(config, 'config')\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(app_file_config), error_msg_bad_file_config);\n\n\t\t\targ_app_config = Object.assign(arg_app_config, app_file_config);\n\t\t}\n\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_app_config), error_msg_bad_config);\n\n\t\t// CHECK APPLICATION\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_app_config.url), error_msg_bad_url);\n\t\t(0, _assert2.default)(_typr2.default.isString(arg_app_config.license), error_msg_bad_license);\n\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_app_config.provided_services), error_msg_bad_provided_services);\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_app_config.used_services), error_msg_bad_used_services);\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_app_config.used_packages), error_msg_bad_used_packages);\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_app_config.used_plugins), error_msg_bad_used_plugins);\n\n\t\t// assert(T.isObject(arg_app_config.assets), error_msg_bad_assets)\n\t\t// assert(T.isArray(arg_app_config.assets.css), error_msg_bad_assets_css)\n\t\t// assert(T.isArray(arg_app_config.assets.js), error_msg_bad_assets_js)\n\t\t// assert(T.isArray(arg_app_config.assets.img), error_msg_bad_assets_img)\n\t\t// assert(T.isString(arg_app_config.assets.index), error_msg_bad_assets_index)\n\n\n\t\t// LOOP ON PROVIDED SERVICES\n\t\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name + '.provided_services');\n\t\targ_app_config.provided_services.forEach(function (service_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(service_name), error_msg_bad_service_name);\n\t\t\t(0, _assert2.default)(service_name in arg_config_services, error_msg_provided_service_not_found + ' for ' + service_name);\n\t\t});\n\n\t\t// LOOP ON USED SERVICES\n\t\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name + '.used_services');\n\t\targ_app_config.used_services.forEach(function (service_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(service_name), error_msg_bad_service_name);\n\t\t\t(0, _assert2.default)(service_name in arg_config_services, error_msg_used_service_not_found + ' for ' + service_name);\n\t\t});\n\n\t\t// LOOP ON USED PACKAGES\n\t\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name + '.used_packages');\n\t\targ_app_config.used_packages.forEach(function (package_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(package_name), error_msg_bad_package_name);\n\t\t\t(0, _assert2.default)(package_name in arg_config_packages, error_msg_used_package_not_found + ' for ' + package_name);\n\t\t});\n\n\t\t// LOOP ON USED PLUGINS\n\t\tlogs.info(context, 'loading world.tenants.*.applications.' + arg_app_name + '.used_plugins');\n\t\targ_app_config.used_plugins.forEach(function (plugin_name) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(plugin_name), error_msg_bad_plugin_name);\n\t\t\t(0, _assert2.default)(plugin_name in arg_config_plugins, error_msg_used_plugin_not_found + ' for ' + plugin_name);\n\t\t});\n\n\t\t// // LOOP ON ASSETS CSS\n\t\t// arg_app_config.assets.css.forEach(\n\t\t// \tfunction(asset)\n\t\t// \t{\n\t\t// \t\tassert(T.isString(asset), error_msg_bad_asset)\n\t\t// \t}\n\t\t// )\n\n\t\t// // LOOP ON ASSETS JS\n\t\t// arg_app_config.assets.js.forEach(\n\t\t// \tfunction(asset)\n\t\t// \t{\n\t\t// \t\tassert(T.isString(asset), error_msg_bad_asset)\n\t\t// \t}\n\t\t// )\n\n\t\t// // LOOP ON ASSETS IMG\n\t\t// arg_app_config.assets.img.forEach(\n\t\t// \tfunction(asset)\n\t\t// \t{\n\t\t// \t\tassert(T.isString(asset), error_msg_bad_asset)\n\t\t// \t}\n\t\t// )\n\t} catch (e) {\n\t\t// console.error(context + ' has error:' + e)\n\t\targ_app_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_app_config;\n}\n\nexports.default = load_application;\n\n\n},{\"../../../utils/parser/parser\":103,\"assert\":107,\"path\":190,\"typr\":217}],85:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _load_application = require('./load_application');\n\nvar _load_application2 = _interopRequireDefault(_load_application);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar context = 'common/topology/registry/loaders/load_applications';\n\n/**\r\n * Load the 'config.applications' key of the final state\r\n * Pure function: (Plain Object) => (mutated Plain Object)\r\n */\n// SERVER IMPORTS\nfunction load_applications(logs, arg_config, arg_config_packages, arg_config_plugins, arg_config_services, arg_base_dir) {\n\tlogs.info(context, 'loading world.tenants.*.applications');\n\n\ttry {\n\t\t(function () {\n\t\t\t// LOOP ON APPLICATIONS\n\t\t\tvar error = undefined;\n\t\t\tObject.keys(arg_config).forEach(function (app_name) {\n\t\t\t\tif (arg_config.error) {\n\t\t\t\t\terror = arg_config.error;\n\t\t\t\t}\n\t\t\t\tif (error) {\n\t\t\t\t\tlogs.info(context, 'skip applications.' + app_name + ' because an error occured.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlogs.info(context, 'loading world.tenants.*.applications.' + app_name);\n\n\t\t\t\tvar app_cfg = arg_config[app_name];\n\t\t\t\tapp_cfg = (0, _load_application2.default)(logs, app_name, app_cfg, arg_config_packages, arg_config_plugins, arg_config_services, arg_base_dir);\n\t\t\t\t// console.error(context, app_cfg)\n\n\t\t\t\t// PROCESS ERRORS\n\t\t\t\tif (app_cfg.error) {\n\t\t\t\t\terror = app_cfg.error;\n\t\t\t\t\terror.context = error.context + ' for ' + app_name;\n\t\t\t\t\t// console.log(context + ' has error for ' + app_name, app_cfg.error)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (error) {\n\t\t\t\targ_config = { error: error };\n\t\t\t\t// console.error(context, error)\n\t\t\t}\n\t\t})();\n\t} catch (e) {\n\t\targ_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_config;\n}\n\nexports.default = load_applications;\n\n\n},{\"./load_application\":84}],86:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _logger_console_standalone = require('../../../loggers/logger_console_standalone');\n\nvar _logger_console_standalone2 = _interopRequireDefault(_logger_console_standalone);\n\nvar _load_nodes = require('./load_nodes');\n\nvar _load_nodes2 = _interopRequireDefault(_load_nodes);\n\nvar _load_tenants = require('./load_tenants');\n\nvar _load_tenants2 = _interopRequireDefault(_load_tenants);\n\nvar _load_plugins = require('./load_plugins');\n\nvar _load_plugins2 = _interopRequireDefault(_load_plugins);\n\nvar _load_security = require('./load_security');\n\nvar _load_security2 = _interopRequireDefault(_load_security);\n\nvar _load_deployments = require('./load_deployments');\n\nvar _load_deployments2 = _interopRequireDefault(_load_deployments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// COMMON IMPORTS\nvar context = 'common/topology/registry/loaders/load_config';\n\n/**\r\n * Load the 'config' key of the final state\r\n * Pure function: (Plain Object) => (new Plain Object)\r\n */\n\n\n// SERVER IMPORTS\n// NPM IMPORTS\nfunction load_config(arg_state, arg_initial_config, arg_base_dir, arg_world_dir, arg_trace) {\n\tvar logs = new _logger_console_standalone2.default(arg_trace ? arg_trace : false);\n\n\tlogs.info(context, 'loading config');\n\n\targ_world_dir = arg_world_dir ? arg_world_dir : arg_base_dir ? _path2.default.join(arg_base_dir, 'resources') : undefined;\n\n\t// LOAD JSON\n\ttry {\n\t\t// GET CONFIG JSON\n\t\tif (!arg_initial_config) {\n\t\t\targ_initial_config = require('./default_config_app').default_config;\n\t\t}\n\n\t\tvar config = arg_initial_config;\n\t\tconfig.resources = config.resources || {};\n\n\t\t// LOAD OTHERS FILES\n\t\tif (_typr2.default.isString(config.nodes)) {\n\t\t\tvar file_path_name = _path2.default.join(arg_world_dir, config.nodes);\n\t\t\tconfig.nodes = require(file_path_name).nodes;\n\t\t}\n\t\tif (_typr2.default.isString(config.tenants)) {\n\t\t\tvar _file_path_name = _path2.default.join(arg_world_dir, config.tenants);\n\t\t\tconfig.tenants = require(_file_path_name).tenants;\n\t\t}\n\t\tif (_typr2.default.isString(config.plugins)) {\n\t\t\tvar _file_path_name2 = _path2.default.join(arg_world_dir, config.plugins);\n\t\t\tconfig.plugins = require(_file_path_name2).plugins;\n\t\t}\n\t\tif (_typr2.default.isString(config.deployments)) {\n\t\t\tvar _file_path_name3 = _path2.default.join(arg_world_dir, config.deployments);\n\t\t\tconfig.deployments = require(_file_path_name3).deployments;\n\t\t}\n\t\tif (_typr2.default.isString(config.security)) {\n\t\t\tvar _file_path_name4 = _path2.default.join(arg_world_dir, config.security);\n\t\t\tconfig.security = require(_file_path_name4).security;\n\t\t}\n\t\tif (_typr2.default.isString(config.loggers)) {\n\t\t\tvar _file_path_name5 = _path2.default.join(arg_world_dir, config.loggers);\n\t\t\tconfig.loggers = require(_file_path_name5).loggers;\n\t\t}\n\t\tif (_typr2.default.isString(config.traces)) {\n\t\t\tvar _file_path_name6 = _path2.default.join(arg_world_dir, config.traces);\n\t\t\tconfig.traces = require(_file_path_name6).traces;\n\t\t}\n\n\t\t// CHECK CONFIG PARTS\n\t\t(0, _assert2.default)(_typr2.default.isObject(config), 'load_config should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.nodes), 'load_config:nodes should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.tenants), 'load_config:tenants should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.plugins), 'load_config:plugins should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.deployments), 'load_config:deployments should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.security), 'load_config:security should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.loggers), 'load_config:loggers should be a plain object');\n\t\t(0, _assert2.default)(_typr2.default.isObject(config.traces), 'load_config:traces should be a plain object');\n\n\t\t// LOAD CONFIG PARTS\n\t\tlogs.info(context, 'loading config parts');\n\t\targ_state.config = {};\n\n\t\targ_state.config.resources = {};\n\t\targ_state.config.resources.by_name = {}; // Resource plain object definitions\n\t\targ_state.config.resources.by_file = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_package = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type = {};\n\t\targ_state.config.resources.by_type.commands = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.services = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.views = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.models = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.menubars = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.menus = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.datasources = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.loggers = {}; // Resource names (map name:name)\n\t\targ_state.config.resources.by_type.templates = {}; // Resource names (map name:name)\n\n\t\targ_state.config.nodes = (0, _load_nodes2.default)(logs, config.nodes, arg_world_dir);\n\t\tif (arg_state.config.nodes && !arg_state.config.nodes.error) {\n\t\t\targ_state.config.tenants = (0, _load_tenants2.default)(logs, config.tenants, config.plugins, arg_world_dir);\n\n\t\t\tif (arg_state.config.tenants && !arg_state.config.tenants.error) {\n\t\t\t\targ_state.config.plugins = (0, _load_plugins2.default)(logs, config.plugins, arg_world_dir);\n\n\t\t\t\tif (arg_state.config.plugins && !arg_state.config.plugins.error) {\n\t\t\t\t\targ_state.config.deployments = (0, _load_deployments2.default)(logs, config.deployments, arg_world_dir);\n\t\t\t\t\targ_state.config.security = (0, _load_security2.default)(logs, config.security, arg_world_dir);\n\t\t\t\t\targ_state.config.loggers = config.loggers;\n\t\t\t\t\targ_state.config.traces = config.traces;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\targ_state.config.nodes = arg_state.config.nodes ? arg_state.config.nodes : {};\n\t\targ_state.config.tenants = arg_state.config.tenants ? arg_state.config.tenants : {};\n\t\targ_state.config.plugins = arg_state.config.plugins ? arg_state.config.plugins : {};\n\t\targ_state.config.deployments = arg_state.config.deployments ? arg_state.config.deployments : {};\n\t\targ_state.config.security = arg_state.config.security ? arg_state.config.security : {};\n\t\targ_state.config.loggers = arg_state.config.loggers ? arg_state.config.loggers : {};\n\t\targ_state.config.traces = arg_state.config.traces ? arg_state.config.traces : {};\n\n\t\t// POPULATE STORE RESOURCES\n\t\tvar has_error = arg_state.config.nodes.error || arg_state.config.tenants.error || arg_state.config.plugins.error || arg_state.config.security.error;\n\t\tif (!has_error) {\n\t\t\tlogs.info(context, 'populate store resources, loop on tenants packages');\n\t\t\tObject.keys(arg_state.config.tenants).forEach(function (tenant_name) {\n\t\t\t\tvar tenant_cfg = arg_state.config.tenants[tenant_name];\n\t\t\t\tObject.keys(tenant_cfg.packages).forEach(function (package_name) {\n\t\t\t\t\tif (package_name === 'error' || package_name === 'error_msg' || package_name === 'files') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlogs.info(context, 'loading config for package ' + package_name);\n\n\t\t\t\t\tvar package_obj = tenant_cfg.packages[package_name];\n\t\t\t\t\targ_state.config.resources.by_package[package_name] = {};\n\n\t\t\t\t\t// REGISTER RESOURCE BY NAME\n\t\t\t\t\tlogs.info(context, 'storing resources by name for package ' + package_name);\n\t\t\t\t\tObject.keys(package_obj.resources_by_name).forEach(function (resource_name) {\n\t\t\t\t\t\t// logs.debug(context, 'loading config for package ' + package_name + ' for register resource by name for ' + resource_name)\n\n\t\t\t\t\t\tvar resource_obj = package_obj.resources_by_name[resource_name];\n\t\t\t\t\t\targ_state.config.resources.by_name[resource_name] = resource_obj;\n\t\t\t\t\t\targ_state.config.resources.by_package[package_name][resource_name] = resource_name;\n\t\t\t\t\t});\n\n\t\t\t\t\t// REGISTER RESOURCE BY FILE\n\t\t\t\t\tlogs.info(context, 'storing resources by file for package ' + package_name);\n\t\t\t\t\tObject.keys(package_obj.resources_by_file).forEach(function (file_name) {\n\t\t\t\t\t\t// logs.info(context, 'loading config for package ' + package_name + ' for register resource by file:' + file_name)\n\t\t\t\t\t\targ_state.config.resources.by_file[file_name] = {};\n\t\t\t\t\t\tObject.keys(package_obj.resources_by_file[file_name]).forEach(function (resource_name) {\n\t\t\t\t\t\t\t// logs.info(context, 'loading config for package ' + package_name + ' for register resource by file:' + file_name + ' for ' + resource_name)\n\t\t\t\t\t\t\targ_state.config.resources.by_file[file_name][resource_name] = resource_name;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// REGISTER RESOURCE BY TYPE\n\t\t\t\t\tlogs.info(context, 'storing resources by type for package ' + package_name);\n\t\t\t\t\tObject.keys(package_obj.resources_by_type).forEach(function (type_name) {\n\t\t\t\t\t\t// logs.info(context, 'loading config for package ' + package_name + ' for register resource by type:' + type_name)\n\t\t\t\t\t\tObject.keys(package_obj.resources_by_type[type_name]).forEach(function (resource_name) {\n\t\t\t\t\t\t\t// logs.debug(context, 'loading config for package ' + package_name + ' for register resource by type for ' + resource_name)\n\t\t\t\t\t\t\targ_state.config.resources.by_type[type_name][resource_name] = resource_name;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tlogs.info(context, 'storing resources end for package ' + package_name);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// PROCESS ERROR\n\t\tlogs.info(context, 'processing errors');\n\t\tvar add_sub_error = function add_sub_error(arg_type, arg_error) {\n\t\t\tif (!arg_state.config.error) {\n\t\t\t\targ_state.config.error = { context: context, exception: 'has sub errors', error_msg: 'see sub errors' };\n\t\t\t}\n\t\t\tif (!arg_state.config.suberrors) {\n\t\t\t\targ_state.config.error.suberrors = [];\n\t\t\t}\n\t\t\tvar msg = arg_error.error_msg ? arg_error.error_msg : arg_error.exception;\n\t\t\targ_state.config.error.suberrors.push({ type: arg_type, context: arg_error.context, error_msg: msg });\n\t\t};\n\n\t\tif (arg_state.config.nodes.error) {\n\t\t\tadd_sub_error('nodes', arg_state.config.nodes.error);\n\t\t}\n\t\tif (arg_state.config.tenants.error) {\n\t\t\tadd_sub_error('tenants', arg_state.config.tenants.error);\n\t\t}\n\t\tif (arg_state.config.plugins.error) {\n\t\t\tadd_sub_error('plugins', arg_state.config.plugins.error);\n\t\t}\n\t\tif (arg_state.config.deployments.error) {\n\t\t\tadd_sub_error('deployments', arg_state.config.deployments.error);\n\t\t}\n\t\tif (arg_state.config.security.error) {\n\t\t\tadd_sub_error('security', arg_state.config.security.error);\n\t\t}\n\t} catch (e) {\n\t\targ_state.config = { error: { context: context, exception: e, error_msg: e.toString() } };\n\t\t// console.error(e, context)\n\t}\n\n\t// console.log( Object.keys(arg_state.config.resources.by_name), 'resources' )\n\n\tlogs.info(context, 'loading config is finished, returns state');\n\treturn arg_state;\n}\n\nexports.default = load_config;\n\n\n},{\"../../../loggers/logger_console_standalone\":45,\"./default_config_app\":83,\"./load_deployments\":87,\"./load_nodes\":88,\"./load_plugins\":90,\"./load_security\":91,\"./load_tenants\":94,\"assert\":107,\"path\":190,\"typr\":217}],87:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_deployments';\n\nvar error_msg_bad_config = context + ':deployments should be an object';\nvar error_msg_bad_deployed_tenant = context + ':deployments.tenantA should be an object';\nvar error_msg_bad_deployed_app = context + ':deployments.tenantA.appA should be an object';\nvar error_msg_bad_deployed_app_services = context + ':deployments.tenantA.appA.services should be an object';\nvar error_msg_bad_deployed_app_assets = context + ':deployments.tenantA.appA.assets should be an object';\nvar error_msg_bad_deployed_svc = context + ':deployments.tenantA.appA.services.svc1 should be an object';\nvar error_msg_bad_deployed_svc_servers = context + ':deployments.tenantA.appA.services.svc1.servers should be an array';\nvar error_msg_bad_deployed_svc_servers_item = context + ':deployments.tenantA.appA.services.svc1.servers.* should be a string';\n\n/*\r\nExample:\r\n{\r\n\t\"deployments\":{\r\n\t\t\"tenantA\":{\r\n\t\t\t\"assets\":{\r\n\t\t\t\t\"services\":{\r\n\t\t\t\t\t\"html_assets_1\": { \"filters\":[\"*:8080\"] }\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\"devtools\":{\r\n\t\t\t\t\"services\":{\r\n\t\t\t\t\t\"devtools_store\": { \"servers\":[\"NodeALocal8080\", \"NodeB\"] },\r\n\t\t\t\t\t\"devtools_panel\": { \"servers\":[\"ClusterC\"] },\r\n\t\t\t\t\t\"topology\": { \"servers\":[\"GroupAA\"] },\r\n\t\t\t\t\t\"logs\": { \"servers\":[\"NodeALocal8080\"] },\r\n\t\t\t\t\t\"messages\": { \"servers\":[\"NodeALocal8080\"] }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n*/\nfunction load_deployments(logs, arg_deploy_config, arg_base_dir) {\n\tlogs.info(context, 'loading world.deployments from ' + arg_base_dir);\n\n\ttry {\n\t\t// CHECK MODULES\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_deploy_config), error_msg_bad_config);\n\n\t\t// LOOP ON TENANTS\n\t\tObject.keys(arg_deploy_config).forEach(function (tenant_name) {\n\t\t\t// LOOP ON TENANT APPLICATIONS\n\t\t\tvar deployed_tenant_apps = arg_deploy_config[tenant_name];\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(deployed_tenant_apps), error_msg_bad_deployed_tenant);\n\n\t\t\tObject.keys(deployed_tenant_apps).forEach(function (app_name) {\n\t\t\t\tvar deployed_app_obj = deployed_tenant_apps[app_name];\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(deployed_app_obj), error_msg_bad_deployed_app);\n\n\t\t\t\tvar services = deployed_app_obj.services;\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(services), error_msg_bad_deployed_app_services);\n\n\t\t\t\tvar assets = deployed_app_obj.assets;\n\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(assets), error_msg_bad_deployed_app_assets);\n\n\t\t\t\tObject.keys(services).forEach(function (svc_name) {\n\t\t\t\t\tvar deployed_svc_obj = services[svc_name];\n\t\t\t\t\t(0, _assert2.default)(_typr2.default.isObject(deployed_svc_obj), error_msg_bad_deployed_svc);\n\n\t\t\t\t\tload_service(logs, app_name, svc_name, deployed_svc_obj, arg_base_dir);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t} catch (e) {\n\t\targ_deploy_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_deploy_config;\n}\n\nfunction load_service(logs, arg_app_name, arg_svc_name, arg_deployed_svc_obj, arg_base_dir) {\n\tlogs.info(context, 'loading world.deployment.' + arg_app_name + '.' + arg_svc_name);\n\n\t// CHECK MODULES\n\t(0, _assert2.default)(_typr2.default.isObject(arg_deployed_svc_obj), error_msg_bad_deployed_svc);\n\n\t// LOOP ON SERVERS\n\tvar servers = arg_deployed_svc_obj.servers;\n\t(0, _assert2.default)(_typr2.default.isArray(servers), error_msg_bad_deployed_svc_servers);\n\n\tservers.forEach(function (server_item, server_index) {\n\t\t(0, _assert2.default)(_typr2.default.isString(server_item), error_msg_bad_deployed_svc_servers_item);\n\n\t\tlogs.info(context, 'loading world.deployment.' + arg_app_name + '.' + arg_svc_name + ':' + server_index + ':' + server_item);\n\t});\n}\n\nexports.default = load_deployments;\n\n\n},{\"assert\":107,\"typr\":217}],88:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_nodes';\n\nvar error_msg_bad_config = context + ':bad config';\n// let error_msg_bad_node = context + ':nodes.* should be an object'\nvar error_msg_bad_node_host = context + ':nodes.*.host should be a string';\n// let error_msg_bad_node_port = context + ':nodes.*.port should be an integer'\nvar error_msg_bad_node_is_master = context + ':nodes.*.is_master should be a boolean';\nvar error_msg_bad_node_servers = context + ':nodes.*.servers should be an object';\nvar error_msg_bad_node_servers_server = context + ':nodes.*.servers.* should be an object';\nvar error_msg_bad_node_servers_server_port = context + ':nodes.*.servers.*.port should be an integer';\nvar error_msg_bad_node_servers_server_type = context + ':nodes.*.servers.*.type should be a string';\nvar error_msg_bad_node_servers_server_protocole = context + ':nodes.*.servers.*.protocole should be a string';\n\nfunction load_nodes(logs, arg_nodes_config, arg_base_dir) {\n\tlogs.info(context, 'loading world.nodes from ' + arg_base_dir);\n\n\ttry {\n\t\t// CHECK MODULES\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_nodes_config), error_msg_bad_config);\n\n\t\t// LOOP ON PLUGINS\n\t\tObject.keys(arg_nodes_config).forEach(function (node_name) {\n\t\t\tvar node_obj = arg_nodes_config[node_name];\n\n\t\t\t// CHECK ATTRIBUTES\n\t\t\t(0, _assert2.default)(_typr2.default.isString(node_obj.host), error_msg_bad_node_host);\n\t\t\t// assert(T.isNumber(node_obj.port), error_msg_bad_node_port)\n\t\t\t(0, _assert2.default)(_typr2.default.isBoolean(node_obj.is_master), error_msg_bad_node_is_master);\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(node_obj.servers), error_msg_bad_node_servers);\n\n\t\t\tload_node_servers(logs, node_obj.servers, node_name, node_obj.host, arg_base_dir);\n\t\t});\n\t} catch (e) {\n\t\targ_nodes_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_nodes_config;\n}\n\nfunction load_node_servers(logs, arg_servers_config, arg_node_name, arg_host /*, arg_base_dir*/) {\n\tlogs.info(context, 'loading config.nodes.' + arg_node_name + '.servers');\n\n\ttry {\n\t\t// CHECK MODULES\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_servers_config), error_msg_bad_config);\n\n\t\t// LOOP ON PLUGINS\n\t\tObject.keys(arg_servers_config).forEach(function (node_name) {\n\t\t\tlogs.info(context, 'loading config.nodes.' + arg_node_name + '.servers.' + node_name);\n\t\t\tvar server_obj = arg_servers_config[node_name];\n\n\t\t\t// CHECK ATTRIBUTES\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(server_obj), error_msg_bad_node_servers_server);\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(server_obj.port), error_msg_bad_node_servers_server_port);\n\t\t\t(0, _assert2.default)(_typr2.default.isString(server_obj.type), error_msg_bad_node_servers_server_type);\n\t\t\t(0, _assert2.default)(_typr2.default.isString(server_obj.protocole), error_msg_bad_node_servers_server_protocole);\n\n\t\t\t// TODO: CHECK OTHER SERVER ATTRIBUTES\n\n\t\t\tserver_obj.node = arg_node_name;\n\t\t\tserver_obj.host = arg_host;\n\t\t});\n\t} catch (e) {\n\t\targ_servers_config = { error: { context: context + ':load servers for node [' + arg_node_name + ']', exception: e } };\n\t}\n\n\treturn arg_servers_config;\n}\n\nexports.default = load_nodes;\n\n\n},{\"assert\":107,\"typr\":217}],89:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('../../../utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _attributes_iterator = require('../../../utils/attributes_iterator');\n\nvar _attributes_iterator2 = _interopRequireDefault(_attributes_iterator);\n\nvar _parser = require('../../../utils/parser/parser');\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_packages';\n\n// COMMON IMPORTS\n\n\nvar error_msg_bad_config = context + ':bad config';\n\nvar error_msg_bad_base_dir = context + ':package.base_dir should be a string';\nvar error_msg_bad_resources = context + ':package.resources should be an array';\nvar error_msg_bad_templates = context + ':package.templates should be an array';\nvar error_msg_bad_includes = context + ':package.includes should be an array';\n\nvar error_msg_bad_service = context + ':package.services.* should be an object';\nvar error_msg_bad_resource = context + ':package.resources.* should be a string';\nvar error_msg_bad_template = context + ':package.templates.* should be a string';\nvar error_msg_bad_include = context + ':package.includes.* should be a string';\n\nvar error_msg_bad_package_config = context + ':bad package config';\nvar error_msg_bad_resource_config = context + ':bad resource config';\n\nfunction load_packages(logs, arg_packages_config, arg_base_dir) {\n\tlogs.info(context, 'loading world...packages');\n\n\ttry {\n\t\t(function () {\n\t\t\t// CHECK PACKAGES\n\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_packages_config), error_msg_bad_config);\n\n\t\t\t// LOOP ON PACKAGES\n\t\t\tvar files = {};\n\t\t\tObject.keys(arg_packages_config).forEach(function (arg_package_name) {\n\t\t\t\tif (arg_package_name == 'files') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlogs.info(context, 'loading world...packages.' + arg_package_name);\n\n\t\t\t\tvar package_obj = arg_packages_config[arg_package_name];\n\t\t\t\targ_packages_config[arg_package_name] = load_package(logs, arg_package_name, package_obj, arg_base_dir, files);\n\t\t\t\t// console.log(package_obj, 'package_obj')\n\n\t\t\t\t// PROCESS ERRORS\n\t\t\t\tif (package_obj.commands && package_obj.commands.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.commands:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.services && package_obj.services.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.services:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.datasources && package_obj.datasources.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.datasources:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.models && package_obj.models.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.models:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.views && package_obj.views.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.views:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.menus && package_obj.menus.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.menus:' + e;\n\t\t\t\t}\n\t\t\t\tif (package_obj.menubars && package_obj.menubars.error) {\n\t\t\t\t\tthrow 'error in packages.' + arg_package_name + '.menubars:' + e;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// CACHE FILES CONTENT\n\t\t\t// arg_packages_config.files = files\n\t\t})();\n\t} catch (e) {\n\t\targ_packages_config = { error: { context: context, exception: e, error_msg: e.toString() } };\n\t\t// console.error(context, arg_packages_config)\n\t}\n\n\treturn arg_packages_config;\n}\n\nfunction load_package(logs, arg_package_name, arg_package_config, arg_base_dir, files) {\n\tlogs.info(context, 'loading world...packages.' + arg_package_name + ':BEGIN');\n\n\t// CHECK PACKAGES\n\t(0, _assert2.default)(_types2.default.isObject(arg_package_config), error_msg_bad_config);\n\targ_package_config.base_dir = arg_package_config.base_dir ? arg_package_config.base_dir : '';\n\targ_package_config.commands = arg_package_config.commands ? arg_package_config.commands : {};\n\targ_package_config.services = arg_package_config.services ? arg_package_config.services : {};\n\targ_package_config.resources = arg_package_config.resources ? arg_package_config.resources : {};\n\targ_package_config.templates = arg_package_config.templates ? arg_package_config.templates : {};\n\targ_package_config.includes = arg_package_config.includes ? arg_package_config.includes : {};\n\n\t// LOAD COMMANDS\n\tif (_types2.default.isString(arg_package_config.commands)) {\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + '.commands is a string');\n\n\t\tvar absolute_path_name = _path2.default.join(arg_base_dir, arg_package_config.base_dir, arg_package_config.commands);\n\t\targ_package_config.commands = _parser2.default.read(absolute_path_name, 'utf8').commands;\n\n\t\t// const file_path_name = path.join(arg_base_dir, arg_package_config.commands)\n\t\t// arg_package_config.commands = require(file_path_name).commands\n\t}\n\t// console.log( Object.keys(arg_package_config.commands), 'arg_package_config.commands for ' + arg_package_name)\n\n\t// LOAD SERVICES\n\tif (_types2.default.isString(arg_package_config.services)) {\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + '.services is a string');\n\n\t\tvar _absolute_path_name = _path2.default.join(arg_base_dir, arg_package_config.base_dir, arg_package_config.services);\n\t\targ_package_config.services = _parser2.default.read(_absolute_path_name, 'utf8').services;\n\n\t\t// const file_path_name = path.join(arg_base_dir, arg_package_config.services)\n\t\t// arg_package_config.services = require(file_path_name).services\n\t}\n\tif (_types2.default.isObject(arg_package_config.services)) {\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + '.services is now an object');\n\t\t// load_services(arg_package_config.services)\n\t}\n\t// console.log( Object.keys(arg_package_config.services), 'arg_package_config.services for ' + arg_package_name)\n\n\t// CHECK ATTRIBUTES\n\t(0, _assert2.default)(_types2.default.isString(arg_package_config.base_dir), error_msg_bad_base_dir + ' for package ' + arg_package_name);\n\t(0, _assert2.default)(_types2.default.isArray(arg_package_config.resources), error_msg_bad_resources + ' for package ' + arg_package_name);\n\t(0, _assert2.default)(_types2.default.isArray(arg_package_config.templates), error_msg_bad_templates + ' for package ' + arg_package_name);\n\t(0, _assert2.default)(_types2.default.isArray(arg_package_config.includes), error_msg_bad_includes + ' for package ' + arg_package_name);\n\n\t// CHECK ATTRIBUTES ITEMS\n\targ_package_config.resources.forEach(function (resource) {\n\t\t(0, _assert2.default)(_types2.default.isString(resource), error_msg_bad_resource);\n\t});\n\targ_package_config.templates.forEach(function (template) {\n\t\t(0, _assert2.default)(_types2.default.isString(template), error_msg_bad_template);\n\t});\n\targ_package_config.includes.forEach(function (include) {\n\t\t(0, _assert2.default)(_types2.default.isString(include), error_msg_bad_include);\n\t});\n\n\t// INIT RESOURCES REPOSITORY\n\targ_package_config.resources_by_name = {};\n\targ_package_config.resources_by_type = {};\n\targ_package_config.resources_by_file = {};\n\targ_package_config.resources_by_type.templates = {};\n\targ_package_config.resources_by_type.views = {};\n\targ_package_config.resources_by_type.models = {};\n\targ_package_config.resources_by_type.menubars = {};\n\targ_package_config.resources_by_type.menus = {};\n\targ_package_config.resources_by_type.datasources = {};\n\targ_package_config.resources_by_type.services = {};\n\targ_package_config.resources_by_type.commands = {};\n\targ_package_config.views = {};\n\targ_package_config.models = {};\n\targ_package_config.menubars = {};\n\targ_package_config.menus = {};\n\targ_package_config.datasources = {};\n\n\t// REGISTER SERVICES AS RESOURCES\n\tObject.keys(arg_package_config.services).forEach(function (svc_name) {\n\t\tvar svc = arg_package_config.services[svc_name];\n\t\t(0, _assert2.default)(_types2.default.isObject(svc), error_msg_bad_service);\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + '.services.' + svc_name + ' is registered');\n\n\t\targ_package_config.resources_by_name[svc_name] = svc;\n\t\targ_package_config.resources_by_type['services'][svc_name] = svc;\n\t});\n\n\t// REGISTER COMMANDS AS RESOURCES\n\tObject.keys(arg_package_config.commands).forEach(function (cmd_name) {\n\t\tvar cmd = arg_package_config.commands[cmd_name];\n\t\t(0, _assert2.default)(_types2.default.isObject(cmd), error_msg_bad_service);\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + '.commands.' + cmd_name + ' is registered');\n\n\t\targ_package_config.resources_by_name[cmd_name] = cmd;\n\t\targ_package_config.resources_by_type['commands'][cmd_name] = cmd;\n\t});\n\n\t// LOAD TEMPLATES\n\tvar templates = arg_package_config.templates;\n\ttemplates.forEach(function (template_file) {\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + ' templates file:' + template_file);\n\n\t\tvar relative_path_name = _path2.default.join(arg_package_config.base_dir, template_file);\n\t\tvar absolute_path_name = _path2.default.join(arg_base_dir, relative_path_name);\n\n\t\tvar config = _parser2.default.read(absolute_path_name, 'utf8');\n\t\t// console.log(config, 'config')\n\n\t\t// GET TEMPLATES\n\t\tif (!config.templates) {\n\t\t\treturn;\n\t\t}\n\t\tconfig = config.templates;\n\n\t\tfiles[relative_path_name] = config;\n\t\targ_package_config.resources_by_file[relative_path_name] = {};\n\n\t\t// CHECK package\n\t\t(0, _assert2.default)(_types2.default.isObject(config), error_msg_bad_package_config + ' for file ' + template_file);\n\n\t\tvar types = ['views', 'models', 'menubars', 'menus', 'datasources'];\n\t\ttypes.forEach(function (type_name) {\n\t\t\tlogs.info(context, 'loading begin world...packages.' + arg_package_name + ' templates file:' + template_file + ' of type:' + type_name);\n\n\t\t\tif (config[type_name] && _types2.default.isObject(config[type_name])) {\n\t\t\t\tload_package_template(logs, arg_package_name, arg_package_config, config[type_name], type_name, relative_path_name);\n\t\t\t}\n\n\t\t\tlogs.info(context, 'loading end world...packages.' + arg_package_name + ' templates file:' + template_file + ' of type:' + type_name);\n\t\t});\n\t});\n\n\t// LOAD RESOURCES\n\tvar resources = arg_package_config.resources;\n\tresources.forEach(function (resource_file) {\n\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + ' resources file:' + resource_file);\n\n\t\tvar relative_path_name = _path2.default.join(arg_package_config.base_dir, resource_file);\n\t\tvar absolute_path_name = _path2.default.join(arg_base_dir, relative_path_name);\n\n\t\tvar config = _parser2.default.read(absolute_path_name, 'utf8');\n\t\t// console.log(config, 'config')\n\n\t\tfiles[relative_path_name] = config;\n\t\targ_package_config.resources_by_file[relative_path_name] = {};\n\n\t\t// CHECK package\n\t\t(0, _assert2.default)(_types2.default.isObject(config), error_msg_bad_package_config + ' for file ' + resource_file);\n\n\t\tvar types = ['views', 'models', 'menubars', 'menus', 'datasources'];\n\t\ttypes.forEach(function (type_name) {\n\t\t\tlogs.info(context, 'loading world...packages.' + arg_package_name + ' resources file:' + resource_file + ' of type:' + type_name);\n\n\t\t\tif (config[type_name] && _types2.default.isObject(config[type_name])) {\n\t\t\t\tload_package_children(logs, arg_package_name, arg_package_config, config[type_name], type_name, relative_path_name);\n\t\t\t}\n\t\t});\n\t});\n\n\tlogs.info(context, 'loading world...packages.' + arg_package_name + ':END');\n\treturn arg_package_config;\n}\n\nfunction load_package_children(logs, arg_package_name, arg_package_config, arg_children, type_name, relative_path_name) {\n\tObject.keys(arg_children).forEach(function (res_name) {\n\t\tlogs.debug(context, 'loading world...packages.' + arg_package_name + ' resource children for ' + res_name);\n\n\t\tvar res_obj = arg_children[res_name];\n\n\t\t// TEMPLATE\n\t\tif (_types2.default.isNotEmptyString(res_obj.template)) {\n\t\t\tvar template_name = res_obj.template;\n\t\t\tvar template_resource = arg_package_config.templates[template_name];\n\t\t\t(0, _assert2.default)(_types2.default.isObject(template_resource), error_msg_bad_resource_config + ' for ' + res_name + ' with template ' + template_name);\n\t\t\tvar clone = _lodash2.default.clone(template_resource);\n\t\t\tres_obj = _lodash2.default.merge(res_obj, clone);\n\t\t\tvar xform_fn = function xform_fn(v) {\n\t\t\t\tif (_types2.default.isNotEmptyString(v)) {\n\t\t\t\t\treturn v.replace('{{devapt-template-id}}', res_name);\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t};\n\t\t\tres_obj = (0, _attributes_iterator2.default)(res_obj, xform_fn);\n\t\t\targ_children[res_name] = res_obj;\n\n\t\t\t// console.log(context + ':loading world...packages.' + arg_package_name + ' resource [%s] of collection [%s] from template [%s]:', res_name, type_name, template_name, res_obj)\n\t\t}\n\n\t\t// GET RESOURCE TYPE\n\t\tif (type_name !== 'menus' && type_name !== 'models') {\n\t\t\tres_obj.class_name = res_obj.class_name ? res_obj.class_name : res_obj.type;\n\t\t\t(0, _assert2.default)(_types2.default.isString(res_obj.class_name), error_msg_bad_resource_config + ' for resource ' + res_name);\n\t\t}\n\n\t\tres_obj.collection = type_name;\n\t\tres_obj.name = res_name;\n\n\t\targ_package_config.resources_by_name[res_name] = res_obj;\n\t\targ_package_config.resources_by_type[type_name][res_name] = res_obj;\n\t\targ_package_config.resources_by_file[relative_path_name][res_name] = res_obj;\n\t\targ_package_config[type_name][res_name] = res_obj;\n\n\t\tif (_types2.default.isObject(res_obj.children)) {\n\t\t\tload_package_children(logs, arg_package_name, arg_package_config, res_obj.children, type_name, relative_path_name);\n\t\t}\n\t});\n}\n\nfunction load_package_template(logs, arg_package_name, arg_package_config, arg_children, type_name, relative_path_name) {\n\tObject.keys(arg_children).forEach(function (res_name) {\n\t\tlogs.debug(context, 'loading begin world...packages.' + arg_package_name + ' resource template for ' + res_name);\n\n\t\tvar res_obj = arg_children[res_name];\n\n\t\tif (type_name !== 'menus' && type_name !== 'models') {\n\t\t\tres_obj.class_name = res_obj.class_name ? res_obj.class_name : res_obj.type;\n\t\t\t(0, _assert2.default)(_types2.default.isString(res_obj.class_name), error_msg_bad_resource_config + ' for resource ' + res_name);\n\t\t}\n\n\t\tres_obj.collection = type_name;\n\t\tres_obj.name = res_name;\n\n\t\t// console.log('arg_package_config.templates', arg_package_config.templates)\n\t\t// console.log('arg_package_config.resources_by_type.templates', arg_package_config.resources_by_type.templates)\n\t\t// console.log('arg_package_config.resources_by_file[relative_path_name]', arg_package_config.resources_by_file[relative_path_name])\n\n\t\targ_package_config.resources_by_type.templates[res_name] = res_obj;\n\t\targ_package_config.resources_by_file[relative_path_name][res_name] = res_obj;\n\t\targ_package_config.templates[res_name] = res_obj;\n\n\t\t// if ( T.isObject(res_obj.children) )\n\t\t// {\n\t\t// \tload_package_template(logs, arg_package_name, arg_package_config, res_obj.children, type_name, relative_path_name)\n\t\t// }\n\t\tlogs.debug(context, 'loading end world...packages.' + arg_package_name + ' resource template for ' + res_name);\n\t});\n}\n\nexports.default = load_packages;\n\n\n},{\"../../../utils/attributes_iterator\":97,\"../../../utils/parser/parser\":103,\"../../../utils/types\":105,\"assert\":107,\"lodash\":187,\"path\":190}],90:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_plugins';\n\nvar error_msg_bad_config = context + ':bad config';\n// let error_msg_bad_plugin = context + ':plugins.* should be an object'\n// let error_msg_bad_js = context + ':plugins.*.js should be a string'\n// let error_msg_bad_css = context + ':plugins.*.css should be an array'\n// let error_msg_bad_autoload = context + ':plugins.*.autoload should be a boolean'\n\n\nfunction load_plugins(logs, arg_plugins_config /*, arg_base_dir*/) {\n\tlogs.info(context, 'loading world.plugins');\n\n\ttry {\n\t\t(function () {\n\t\t\t// CHECK MODULES\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_plugins_config), error_msg_bad_config);\n\n\t\t\t// LOOP ON PLUGINS\n\t\t\tvar plugins_types = ['rendering'];\n\t\t\tObject.keys(arg_plugins_config).forEach(function (plugin_name) {\n\t\t\t\tvar plugin_cfg = arg_plugins_config[plugin_name];\n\n\t\t\t\t// CHECK TYPE\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(plugin_cfg.type), 'bad plugin type string');\n\t\t\t\t(0, _assert2.default)(plugins_types.indexOf(plugin_cfg.type) > -1, context + ':bad plugin.type [' + plugin_cfg.type + '] not in [' + plugins_types.toString() + ']');\n\n\t\t\t\t// CHECK SOURCE: FILE OR PACKAGE\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(plugin_cfg.file) || _typr2.default.isString(plugin_cfg.package), 'bad plugin source (plugin.file or plugin.package) string');\n\t\t\t});\n\t\t})();\n\t} catch (e) {\n\t\targ_plugins_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_plugins_config;\n}\n\nexports.default = load_plugins;\n\n\n},{\"assert\":107,\"typr\":217}],91:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _parser = require('../../../utils/parser/parser');\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nvar _load_security_authorization = require('./load_security_authorization');\n\nvar _load_security_authorization2 = _interopRequireDefault(_load_security_authorization);\n\nvar _load_security_authentication = require('./load_security_authentication');\n\nvar _load_security_authentication2 = _interopRequireDefault(_load_security_authentication);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// SERVER IMPORTS\n// NPM IMPORTS\nvar context = 'common/topology/registry/loaders/load_security';\n\n// COMMON IMPORTS\n\n\nvar error_msg_bad_config = context + ':bad config';\nvar error_msg_bad_is_readonly = context + ':security.is_readonly should be a boolean';\nvar error_msg_bad_datasources = context + ':security.datasources should be an array';\nvar error_msg_bad_authentication = context + ':security.authentication should be an object';\nvar error_msg_bad_authorization = context + ':security.authorization should be an object';\nvar error_msg_bad_datasource = context + ':security.datasources.* should be a string';\nvar error_msg_bad_cx_config = context + ':security.datasources.*.* should be a valid datasource';\n\n// const apps_dir = '../../../../apps/'\n\n\nfunction load_security(logs, arg_security_config, arg_base_dir) {\n\t// console.log('LOADING CONFIG SECURITY', arg_security_config)\n\tlogs.info(context, 'loading config.security');\n\n\ttry {\n\t\t// CHECK SECURITY\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_security_config), error_msg_bad_config);\n\t\t(0, _assert2.default)(_typr2.default.isBoolean(arg_security_config.is_readonly), error_msg_bad_is_readonly);\n\t\t(0, _assert2.default)(_typr2.default.isArray(arg_security_config.datasources), error_msg_bad_datasources);\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_security_config.authentication), error_msg_bad_authentication);\n\t\t(0, _assert2.default)(_typr2.default.isObject(arg_security_config.authorization), error_msg_bad_authorization);\n\n\t\t// LOAD DATASOURCES\n\t\targ_security_config.files = {};\n\t\targ_security_config.resources_by_name = {};\n\t\targ_security_config.resources_by_file = {};\n\t\targ_security_config.datasources.forEach(function (file_name) {\n\t\t\t// CHECK DATASOURCES\n\t\t\t(0, _assert2.default)(_typr2.default.isString(file_name), error_msg_bad_datasource);\n\n\t\t\tvar file_path_name = _path2.default.join(arg_base_dir, 'resources', file_name);\n\t\t\t// console.log(file_path_name, 'datasources file_path_name')\n\n\t\t\tvar config = _parser2.default.read(file_path_name, 'utf8');\n\t\t\t// console.log(config, 'config')\n\n\t\t\targ_security_config.files[file_name] = config;\n\t\t\targ_security_config.resources_by_file[file_name] = {};\n\n\t\t\t// LOOP ON CONNEXIONS\n\t\t\tObject.keys(config).forEach(function (res_name) {\n\t\t\t\tvar res_obj = config[res_name];\n\t\t\t\tres_obj.name = res_name;\n\t\t\t\tres_obj.type = 'datasources';\n\n\t\t\t\t// CHECK CONNEXION\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.engine), error_msg_bad_cx_config + '(engine) for file ' + file_name);\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.host), error_msg_bad_cx_config + '(host) for file ' + file_name);\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.port), error_msg_bad_cx_config + '(port) for file ' + file_name);\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.database_name), error_msg_bad_cx_config + '(database_name) for file ' + file_name);\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.user_name), error_msg_bad_cx_config + '(user_name) for file ' + file_name);\n\t\t\t\t(0, _assert2.default)(_typr2.default.isString(res_obj.user_pwd), error_msg_bad_cx_config + '(user_pwd) for file ' + file_name);\n\t\t\t\t// OPTS: options, charset\n\n\t\t\t\targ_security_config.resources_by_name[res_name] = res_obj;\n\t\t\t\targ_security_config.resources_by_file[file_name][res_name] = res_obj;\n\t\t\t});\n\t\t});\n\n\t\t// CHECK AUTHENTICATION\n\t\targ_security_config.authentication = (0, _load_security_authentication2.default)(logs, arg_security_config.authentication, arg_base_dir);\n\n\t\t// CHECK AUTHORIZATION\n\t\targ_security_config.authorization = (0, _load_security_authorization2.default)(logs, arg_security_config.authorization, arg_base_dir);\n\t} catch (e) {\n\t\targ_security_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_security_config;\n}\n\nexports.default = load_security;\n\n\n},{\"../../../utils/parser/parser\":103,\"./load_security_authentication\":92,\"./load_security_authorization\":93,\"assert\":107,\"path\":190,\"typr\":217}],92:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n\nvar context = 'common/topology/registry/loaders/load_security_authentication';\n\nfunction load_security_authentication(logs, arg_auth_config /*, arg_base_dir*/) {\n\tlogs.info(context, 'loading config.security.load_security_authentication');\n\n\ttry {\n\t\t// CHECK SECURITY\n\t\t/*assert(T.isObject(arg_auth_config), error_msg_bad_config)\r\n  assert(T.isBoolean(arg_auth_config.enabled), error_msg_bad_enabled)\r\n  assert(T.isString(arg_auth_config.mode), error_msg_bad_mode)\r\n  assert(T.isObject(arg_auth_config.alt), error_msg_bad_alt)\r\n  \r\n  // CHECK SECURITY\r\n  if (arg_auth_config.mode === 'database')\r\n  {\r\n  \tassert(T.isString(arg_auth_config.model), error_msg_bad_model)\r\n  \tassert(T.isString(arg_auth_config.role), error_msg_bad_role)\r\n  \tassert(T.isString(arg_auth_config.username), error_msg_bad_username)\r\n  \t\r\n  \t// CHECK CONNEXIONS\r\n  \t// arg_security_config.datasources.forEach( (datasource)=> { assert(T.isString(datasource), error_msg_bad_datasource) } )\r\n  }\r\n  else\r\n  {\r\n  \tassert(false, error_msg_bad_mode)\r\n  }*/\n\t} catch (e) {\n\t\targ_auth_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_auth_config;\n}\n\nexports.default = load_security_authentication;\n\n\n},{}],93:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\n\nvar context = 'common/topology/registry/loaders/load_security_authorization';\n\nfunction load_security_authorization(logs, arg_auth_config /*, arg_base_dir*/) {\n\tlogs.info(context, 'loading config.security.load_security_authorization');\n\n\ttry {\n\t\t// CHECK SECURITY\n\t\t/*\tassert(T.isObject(arg_auth_config), error_msg_bad_config)\r\n  \tassert(T.isBoolean(arg_auth_config.enabled), error_msg_bad_enabled)\r\n  \tassert(T.isString(arg_auth_config.mode), error_msg_bad_mode)\r\n  \tassert(T.isObject(arg_auth_config.alt), error_msg_bad_alt)\r\n  \t\r\n  \t// CHECK SECURITY\r\n  \tif (arg_auth_config.mode === 'database')\r\n  \t{\r\n  \t\tassert(T.isString(arg_auth_config.model), error_msg_bad_model)\r\n  \t\tassert(T.isString(arg_auth_config.role), error_msg_bad_role)\r\n  \t\tassert(T.isString(arg_auth_config.username), error_msg_bad_username)\r\n  \t\t\r\n  \t\t// CHECK CONNEXIONS\r\n  \t\t// arg_security_config.datasources.forEach( (datasource)=> { assert(T.isString(datasource), error_msg_bad_datasource) } )\r\n  \t}\r\n  \telse\r\n  \t{\r\n  \t\tassert(false, error_msg_bad_mode)\r\n  \t}*/\n\t} catch (e) {\n\t\targ_auth_config = { error: { context: context, exception: e } };\n\t}\n\n\treturn arg_auth_config;\n}\n\nexports.default = load_security_authorization;\n\n\n},{}],94:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _load_applications = require('./load_applications');\n\nvar _load_applications2 = _interopRequireDefault(_load_applications);\n\nvar _load_packages = require('./load_packages');\n\nvar _load_packages2 = _interopRequireDefault(_load_packages);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// COMMON IMPORTS\nvar context = 'common/topology/registry/loaders/load_tenants'; // NPM IMPORTS\n\n\nvar error_msg_bad_config = context + ':bad config';\n\nfunction load_tenants(logs, arg_tenants_config, arg_plugins, arg_base_dir) {\n\tlogs.info(context, 'loading world.tenants from ' + arg_base_dir);\n\n\ttry {\n\t\t(function () {\n\t\t\t// CHECK ARGS\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(arg_tenants_config), error_msg_bad_config);\n\n\t\t\t// LOOP ON TENANTS\n\t\t\tvar error = undefined;\n\t\t\tObject.keys(arg_tenants_config).forEach(function (tenant_name) {\n\t\t\t\tif (arg_tenants_config.error) {\n\t\t\t\t\terror = arg_tenants_config.error;\n\t\t\t\t}\n\t\t\t\tif (error) {\n\t\t\t\t\tlogs.info(context, 'skip tenants.' + tenant_name + ' because an error occured.');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// logs.info(context, 'loading config.tenants.' + tenant_name)\n\n\t\t\t\tvar tenant_obj = arg_tenants_config[tenant_name];\n\t\t\t\ttenant_obj = load_tenant(logs, tenant_name, tenant_obj, arg_plugins, arg_base_dir);\n\t\t\t\t// console.log(tenant_obj, 'tenant_obj')\n\n\t\t\t\t// PROCESS ERRORS\n\t\t\t\tif (tenant_obj.error) {\n\t\t\t\t\terror = tenant_obj.error;\n\t\t\t\t\terror.context = error.context + ' for ' + tenant_name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (error) {\n\t\t\t\targ_tenants_config = { error: error };\n\t\t\t\t// console.error(context, error)\n\t\t\t}\n\t\t})();\n\t} catch (e) {\n\t\targ_tenants_config = { error: { context: context, exception: e } };\n\t\t// console.error(arg_tenants_config)\n\t}\n\n\treturn arg_tenants_config;\n}\n\nfunction load_tenant(logs, arg_tenant_name, arg_tenant_config, arg_plugins, arg_base_dir) {\n\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + ' from ' + arg_base_dir);\n\t// console.log(arg_tenant_config, 'arg_tenant_config')\n\n\t// CHECK ARGS\n\t(0, _assert2.default)(_typr2.default.isObject(arg_tenant_config), error_msg_bad_config);\n\n\t// LOAD PACKAGES\n\tif (_typr2.default.isString(arg_tenant_config.packages)) {\n\t\tvar file_path_name = _path2.default.join(arg_base_dir, arg_tenant_config.packages);\n\t\targ_tenant_config.packages = require(file_path_name).packages;\n\t}\n\tif (_typr2.default.isObject(arg_tenant_config.packages)) {\n\t\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + '.packages');\n\t\targ_tenant_config.packages = (0, _load_packages2.default)(logs, arg_tenant_config.packages, arg_base_dir);\n\n\t\t// PROCESS ERROR\n\t\tif (arg_tenant_config.packages.error) {\n\t\t\targ_tenant_config = {\n\t\t\t\terror: arg_tenant_config.packages.error\n\t\t\t};\n\t\t\treturn arg_tenant_config;\n\t\t}\n\t}\n\n\t// CONSOLID SERVICES\n\tvar services = {};\n\tObject.keys(arg_tenant_config.packages).forEach(function (pkg_name) {\n\t\tif (pkg_name != 'files') {\n\t\t\t(function () {\n\t\t\t\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + ' consolidated services for pkg ' + pkg_name);\n\t\t\t\tvar pkg = arg_tenant_config.packages[pkg_name];\n\n\t\t\t\tObject.keys(pkg.services).forEach(function (svc_name) {\n\t\t\t\t\tservices[svc_name] = pkg.services[svc_name];\n\t\t\t\t\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + ' consolid service for ' + svc_name);\n\t\t\t\t});\n\t\t\t})();\n\t\t}\n\t});\n\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + ' consolidated services:' + Object.keys(services).toString());\n\n\t// LOAD APPLICATIONS\n\tif (_typr2.default.isString(arg_tenant_config.applications)) {\n\t\tvar _file_path_name = _path2.default.join(arg_base_dir, arg_tenant_config.applications);\n\t\targ_tenant_config.applications = require(_file_path_name).applications;\n\t}\n\tif (_typr2.default.isObject(arg_tenant_config.applications)) {\n\t\tlogs.info(context, 'loading world.tenants.' + arg_tenant_name + '.applications');\n\t\targ_tenant_config.applications = (0, _load_applications2.default)(logs, arg_tenant_config.applications, arg_tenant_config.packages, arg_plugins, services, arg_base_dir);\n\n\t\t// PROCESS ERROR\n\t\tif (arg_tenant_config.applications.error) {\n\t\t\targ_tenant_config = {\n\t\t\t\terror: arg_tenant_config.applications.error\n\t\t\t};\n\t\t\treturn arg_tenant_config;\n\t\t}\n\t}\n\n\treturn arg_tenant_config;\n}\n\nexports.default = load_tenants;\n\n\n},{\"./load_applications\":85,\"./load_packages\":89,\"assert\":107,\"path\":190,\"typr\":217}],95:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _map_store = require('../../state_store/map_store');\n\nvar _map_store2 = _interopRequireDefault(_map_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/topology/resgistry/registry_store';\n\n/**\r\n * @file Registry class to deal with state storing and mutations.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar RegistryStore = function (_MapStore) {\n\t_inherits(RegistryStore, _MapStore);\n\n\t/**\r\n  * Create RegistryStore instance.\r\n  * \r\n  * @param {object} arg_initial_state - initial state to populate registry.\r\n  * @param {string} arg_log_context - trace context.\r\n  * @param {LoggerManager} arg_logger_manager - logger manager object (optional).\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction RegistryStore(arg_initial_state, arg_log_context, arg_logger_manager) {\n\t\t_classCallCheck(this, RegistryStore);\n\n\t\tvar my_context = arg_log_context ? arg_log_context : context;\n\n\t\tvar _this = _possibleConstructorReturn(this, (RegistryStore.__proto__ || Object.getPrototypeOf(RegistryStore)).call(this, arg_initial_state, my_context, arg_logger_manager));\n\n\t\t_this.collections = ['nodes', 'servers', 'applications', 'modules', 'plugins', 'resources', 'security', 'views', 'models', 'menubars', 'menus', 'loggers', 'services', 'transactions', 'datasources'];\n\n\t\t_this.register_collection('nodes', 'node');\n\t\t_this.register_collection('servers', 'server');\n\t\t_this.register_collection('applications', 'application');\n\t\t_this.register_collection('modules', 'module');\n\t\t_this.register_collection('plugins', 'plugin');\n\n\t\t// this.register_collection('resources', 'resource')\n\n\t\t_this.register_resources_collection('views', 'view');\n\t\t_this.register_resources_collection('models', 'model');\n\t\t_this.register_resources_collection('menubars', 'menubar');\n\t\t_this.register_resources_collection('menus', 'menu');\n\t\t_this.register_resources_collection('loggers', 'logger');\n\t\t_this.register_resources_collection('services', 'service');\n\t\t_this.register_resources_collection('transactions', 'transaction');\n\t\t_this.register_resources_collection('datasources', 'datasource');\n\t\treturn _this;\n\t}\n\n\t_createClass(RegistryStore, [{\n\t\tkey: 'get_path_array',\n\t\tvalue: function get_path_array(arg_path) {\n\t\t\tif (_typr2.default.isString(arg_path)) {\n\t\t\t\targ_path = arg_path.split('.');\n\t\t\t}\n\n\t\t\tif (_typr2.default.isArray(arg_path)) {\n\t\t\t\treturn arg_path.length > 0 ? arg_path : null;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}, {\n\t\tkey: 'set_item',\n\t\tvalue: function set_item(arg_path, arg_item) {\n\t\t\tvar path = this.get_path_array(arg_path);\n\t\t\tif (path) {\n\t\t\t\tthis.root = this.root.setIn(path, arg_item);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'has_collection',\n\t\tvalue: function has_collection(arg_name) {\n\t\t\treturn this.collections.indexOf(arg_name) > -1;\n\t\t}\n\n\t\t// DEFINE CONFIG COLLECTIONS ACCESSORS\n\n\t}, {\n\t\tkey: 'get_collection',\n\t\tvalue: function get_collection(arg_name) {\n\t\t\treturn this.root.has(arg_name) ? this.root.get(arg_name).toMap() : new Map();\n\t\t}\n\t}, {\n\t\tkey: 'get_collection_names',\n\t\tvalue: function get_collection_names(arg_name) {\n\t\t\treturn this.root.has(arg_name) ? this.root.get(arg_name).toMap().keySeq().toArray() : [];\n\t\t}\n\t}, {\n\t\tkey: 'get_collection_item',\n\t\tvalue: function get_collection_item(arg_name, arg_item_name) {\n\t\t\tif (!this.root.hasIn([arg_name, arg_item_name])) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar r = this.root.getIn([arg_name, arg_item_name]);\n\n\t\t\treturn r ? r.toMap() : null;\n\t\t}\n\t}, {\n\t\tkey: 'has_collection_item',\n\t\tvalue: function has_collection_item(arg_name, arg_item_name) {\n\t\t\treturn this.root.hasIn([arg_name, arg_item_name]);\n\t\t}\n\n\t\t/**\r\n   * Register collection methods.\r\n   * \r\n   * @param {string} arg_collection_name - valid collection name.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_collection',\n\t\tvalue: function register_collection(arg_collection_name, arg_item_name) {\n\t\t\tvar _this2 = this;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_collection_name) && arg_collection_name.length > 0, context + ':register_collection:bad collection name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_item_name) && arg_item_name.length > 0, context + ':register_collection:bad item name string');\n\t\t\t(0, _assert2.default)(this.collections.indexOf(arg_collection_name) > -1, context + ':register_collection:collection name not found in collections list:' + arg_collection_name);\n\n\t\t\tthis['get_' + arg_collection_name] = function () {\n\t\t\t\treturn _this2.root.getIn([arg_collection_name]).toMap().keySeq().toArray();\n\t\t\t};\n\n\t\t\tthis['has_' + arg_item_name] = function (arg_name) {\n\t\t\t\treturn _this2.root.hasIn([arg_collection_name, arg_name]);\n\t\t\t};\n\n\t\t\tthis['get_' + arg_item_name] = function (arg_name) {\n\t\t\t\tvar result = _this2.root.getIn([arg_collection_name, arg_name]).toMap();\n\t\t\t\treturn result && _typr2.default.isFunction(result.toJS) ? result.toJS() : result;\n\t\t\t};\n\n\t\t\tthis['get_' + arg_item_name + '_js'] = function (arg_name) {\n\t\t\t\tvar result = _this2.root.getIn([arg_collection_name, arg_name]);\n\t\t\t\treturn result && _typr2.default.isFunction(result.toJS) ? result.toJS() : result;\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Register resources collection methods.\r\n   * \r\n   * @param {string} arg_collection_name - valid collection name (plural form).\r\n   * @param {string} arg_item_name - valid collection name (single form).\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_resources_collection',\n\t\tvalue: function register_resources_collection(arg_collection_name, arg_item_name) {\n\t\t\tvar _this3 = this;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_collection_name) && arg_collection_name.length > 0, context + ':register_collection:bad collection name');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_item_name) && arg_item_name.length > 0, context + ':register_collection:bad item name');\n\t\t\t(0, _assert2.default)(this.collections.indexOf(arg_collection_name) > -1, context + ':register_collection:collection name not found in collections list');\n\n\t\t\tthis['get_' + arg_collection_name] = function () {\n\t\t\t\treturn _this3.root.getIn(['resources', 'by_type', arg_collection_name]).toMap().keySeq().toArray();\n\t\t\t};\n\n\t\t\tthis['has_' + arg_item_name] = function (arg_name) {\n\t\t\t\treturn _this3.has_resource_by_type(arg_collection_name, arg_name);\n\t\t\t};\n\n\t\t\tthis['get_' + arg_item_name] = function (arg_name) {\n\t\t\t\treturn _this3.get_resource_of_type(arg_collection_name, arg_name);\n\t\t\t};\n\t\t}\n\n\t\t// CONFIG: GET RESOURCES LIST\n\n\t}, {\n\t\tkey: 'get_resources',\n\t\tvalue: function get_resources(arg_set_name) {\n\t\t\tvar path = ['resources', 'by_name'];\n\t\t\tif (arg_set_name) {\n\t\t\t\tpath = ['resources', 'by_type', arg_set_name];\n\t\t\t}\n\t\t\treturn this.root.getIn(path).toMap().keySeq().toArray();\n\t\t}\n\n\t\t// CONFIG: HAS A RESOURCE\n\n\t}, {\n\t\tkey: 'has_resource',\n\t\tvalue: function has_resource(arg_name) {\n\t\t\treturn this.root.hasIn(['resources', 'by_name', arg_name]);\n\t\t}\n\t}, {\n\t\tkey: 'has_resource_by_type',\n\t\tvalue: function has_resource_by_type(arg_type, arg_name) {\n\t\t\tvar name = this.root.getIn(['resources', 'by_type', arg_type, arg_name]);\n\t\t\treturn name ? this.has_resource(name) : null;\n\t\t}\n\n\t\t// CONFIG: GET A RESOURCE\n\n\t}, {\n\t\tkey: 'get_resource',\n\t\tvalue: function get_resource(arg_name) {\n\t\t\tif (this.root.hasIn(['resources', 'by_name', arg_name])) {\n\t\t\t\treturn this.root.getIn(['resources', 'by_name', arg_name]).toMap().toJS();\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t}, {\n\t\tkey: 'get_resource_of_type',\n\t\tvalue: function get_resource_of_type(arg_type, arg_name) {\n\t\t\tif (this.has_resource_by_type(arg_type, arg_name)) {\n\t\t\t\treturn this.get_resource(arg_name);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t}, {\n\t\tkey: 'get_resource_by_type',\n\t\tvalue: function get_resource_by_type(arg_type, arg_name) {\n\t\t\tvar name = this.root.getIn(['resources', 'by_type', arg_type, arg_name]);\n\t\t\treturn name ? this.get_resource(name) : undefined;\n\t\t}\n\t}]);\n\n\treturn RegistryStore;\n}(_map_store2.default);\n\nexports.default = RegistryStore;\n\n\n},{\"../../state_store/map_store\":79,\"assert\":107,\"typr\":217}],96:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _immutable = require('immutable');\n\nvar _registry_store = require('./registry_store');\n\nvar _registry_store2 = _interopRequireDefault(_registry_store);\n\nvar _load_config = require('./loaders/load_config');\n\nvar _load_config2 = _interopRequireDefault(_load_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar context = 'common/topology/registry/topology_registry';\n\nvar TRACE = false; // TODO configure from runtime settings\n\n/**\r\n * @file TopologyRegistryStore class, a RegistryStore loading topology.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar TopologyRegistry = function (_RegistryStore) {\n\t_inherits(TopologyRegistry, _RegistryStore);\n\n\t/**\r\n  * Create a TopologyStore instance.\r\n  * @extends RegistryStore\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction TopologyRegistry() {\n\t\t_classCallCheck(this, TopologyRegistry);\n\n\t\tvar default_config = (0, _load_config2.default)({}, undefined, undefined, TRACE);\n\n\t\tvar _this = _possibleConstructorReturn(this, (TopologyRegistry.__proto__ || Object.getPrototypeOf(TopologyRegistry)).call(this, default_config.config, context, undefined));\n\n\t\t_this.error = undefined;\n\t\t_this.initial_config = undefined;\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Load a topology configuration.\r\n  * \r\n  * @param {object} arg_config - object configuration.\r\n  * @param {string} arg_base_dir - project base directory.\r\n  * @param {string} arg_topology_dir - topology settings base directory.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\n\n\t_createClass(TopologyRegistry, [{\n\t\tkey: 'load',\n\t\tvalue: function load(arg_config, arg_base_dir, arg_topology_dir) {\n\t\t\tthis.initial_config = arg_config;\n\n\t\t\t// LOAD AND CHECK CONFIG\n\t\t\tvar checked_config = (0, _load_config2.default)({}, arg_config, arg_base_dir, arg_topology_dir, TRACE);\n\t\t\tif (checked_config.config.error) {\n\t\t\t\tthis.error = checked_config.config.error;\n\t\t\t\t// console.error(context + ':load:error', this.format_error(checked_config.config.error))\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// DEBUG\n\t\t\t// console.log(checked_config.config.resources.by_name['default_menubar'], 'store.checked_config.config default_menubar')\n\n\t\t\tvar immutable_config = (0, _immutable.fromJS)(checked_config.config);\n\t\t\tthis.root = immutable_config;\n\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\r\n   * Get potential error.\r\n   * \r\n   * @returns {object} - error record.\r\n   */\n\n\t}, {\n\t\tkey: 'get_error',\n\t\tvalue: function get_error() {\n\t\t\treturn this.error;\n\t\t}\n\n\t\t/**\r\n   * Format an error record.\r\n   * \r\n   * @param {object} arg_error - error record.\r\n   * \r\n   * @returns {string} - human readable error.\r\n   */\n\n\t}, {\n\t\tkey: 'format_error',\n\t\tvalue: function format_error(arg_error) {\n\t\t\tvar str = '\\n';\n\t\t\tstr += '*****************************************************************************************\\n';\n\n\t\t\t// FORMAT MAIN ERROR\n\t\t\tstr += '\\n\\nError:\\n';\n\t\t\tstr += '* context:   ' + arg_error.context + '\\n';\n\t\t\tstr += '* exception: ' + arg_error.exception + '\\n';\n\t\t\tstr += '* message:   ' + arg_error.error_msg + '\\n';\n\n\t\t\t// FORMAT SUB ERRORS\n\t\t\tif ('suberrors' in arg_error) {\n\t\t\t\tstr += '\\nsub errors:\\n';\n\t\t\t\targ_error.suberrors.map(function (suberror) {\n\t\t\t\t\tstr += '------------------------------------------------------------------------\\n';\n\t\t\t\t\tstr += '* context: ' + suberror.context + '\\n';\n\t\t\t\t\tstr += '* message: ' + suberror.error_msg + '\\n';\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tstr += '\\n*****************************************************************************************\\n';\n\n\t\t\treturn str;\n\t\t}\n\t}]);\n\n\treturn TopologyRegistry;\n}(_registry_store2.default);\n\nexports.default = TopologyRegistry;\n\n\n},{\"./loaders/load_config\":86,\"./registry_store\":95,\"immutable\":170}],97:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _types = require('./types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// NPM IMPORTS\nvar iterator_fn = function iterator_fn(arg_value, arg_fn) {\n\tif (_types2.default.isArray(arg_value) || _types2.default.isObject(arg_value)) {\n\t\t_lodash2.default.forEach(arg_value, function (item, key) {\n\t\t\tvar new_key = arg_fn(key);\n\t\t\tif (key != new_key) {\n\t\t\t\tdelete arg_value[key];\n\t\t\t\tkey = new_key;\n\t\t\t}\n\t\t\targ_value[key] = iterator_fn(item, arg_fn);\n\t\t});\n\n\t\treturn arg_value;\n\t}\n\n\treturn arg_fn(arg_value);\n};\n\n// COMMON IMPORTS\nexports.default = iterator_fn;\n\n\n},{\"./types\":105,\"lodash\":187}],98:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _is_browser = require('./is_browser');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar forge = undefined;\nif ((0, _is_browser.is_browser)()) {\n\tforge = require('forge-browser').forge;\n} else {\n\tforge = require('node-forge');\n}\n\nvar context = 'common/utils/digest';\n\n/**\r\n * @file Digest class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar Digest = function () {\n\t/**\r\n  * Create a Digest instance.\r\n * \r\n * \tAPI:\r\n * \t\t->hash():string - \r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction Digest() {\n\t\t_classCallCheck(this, Digest);\n\t}\n\n\t/**\r\n  * Hash a string.\r\n  * \r\n  * @param {string} arg_string - string to hash.\r\n  * @param {string|undefined} arg_digest_method - digest method name (sha1,sha256,sha384,sha512,md5)\r\n  * @param {string|undefined} arg_encoding_method - encoding method name (hex,utf8,utf16,binary,base64,hexstr)\r\n  * \r\n  * @returns {string} - hashed string\r\n  */\n\n\n\t_createClass(Digest, null, [{\n\t\tkey: 'hash',\n\t\tvalue: function hash(arg_string, arg_digest_method, arg_encoding_method) {\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_string), context + ':bad input string');\n\t\t\targ_digest_method = _typr2.default.isString(arg_digest_method) ? arg_digest_method : 'sha1';\n\t\t\targ_encoding_method = _typr2.default.isString(arg_encoding_method) ? arg_encoding_method : 'hex';\n\n\t\t\t// const buffer = forge.util.createBuffer(arg_string, 'utf8')\n\t\t\t// return buffer.toString('base64')\n\n\t\t\t// GET MESSAGE DIGEST FUNCTION\n\t\t\tvar md = null;\n\t\t\tswitch (arg_digest_method.toLocaleLowerCase()) {\n\t\t\t\tcase 'sha1':\n\t\t\t\t\tmd = forge.md.sha1.create();break;\n\t\t\t\tcase 'sha256':\n\t\t\t\t\tmd = forge.md.sha256.create();break;\n\t\t\t\tcase 'sha384':\n\t\t\t\t\tmd = forge.md.sha384.create();break;\n\t\t\t\tcase 'sha512':\n\t\t\t\t\tmd = forge.md.sha512.create();break;\n\t\t\t\tcase 'md5':\n\t\t\t\t\tmd = forge.md.md5.create();break;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.error_bad_digest_method(arg_digest_method);return null;\n\t\t\t}\n\t\t\t(0, _assert2.default)(md, context + ':bad message digest object');\n\t\t\tmd.update(arg_string);\n\n\t\t\t// GET ENCODED MESSAGE\n\t\t\tvar encoded = null;\n\t\t\tswitch (arg_encoding_method.toLocaleLowerCase()) {\n\t\t\t\tcase 'hex':\n\t\t\t\t\tencoded = md.digest().toHex();break;\n\t\t\t\tcase 'utf8':\n\t\t\t\tcase 'utf-8':\n\t\t\t\t\t// encoded = md.digest().toString('utf8'); break\n\t\t\t\t\tencoded = forge.util.createBuffer(md.digest().toHex(), 'hex');\n\t\t\t\t\tencoded = encoded.toString('utf8');break;\n\t\t\t\tcase 'utf16':\n\t\t\t\tcase 'utf-16':\n\t\t\t\t\t// encoded = md.digest().toString('utf16'); break\n\t\t\t\t\tencoded = forge.util.createBuffer(md.digest().toHex(), 'hex');\n\t\t\t\t\tencoded = encoded.toString('utf16');break;\n\t\t\t\tcase 'binary':\n\t\t\t\t\t// encoded = md.digest().toString('binary'); break\n\t\t\t\t\tencoded = forge.util.createBuffer(md.digest().toHex(), 'hex');\n\t\t\t\t\tencoded = encoded.toString('binary');break;\n\t\t\t\tcase 'base64':\n\t\t\t\t\t// encoded = md.digest().toString('base64'); break\n\t\t\t\t\tencoded = forge.util.createBuffer(md.digest().toHex(), 'hex');\n\t\t\t\t\tencoded = encoded.toString('base64');break;\n\t\t\t\tcase 'hexstr':\n\t\t\t\t\tencoded = md.digest().toString('hex');break;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.error_bad_encoding_method(arg_encoding_method);return null;\n\t\t\t}\n\t\t\t(0, _assert2.default)(encoded, context + ':bad message encoding result');\n\n\t\t\treturn encoded;\n\t\t}\n\n\t\t/**\r\n   * Hash a string with SHA1.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding (default:hex or utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - hashed string\r\n   */\n\n\t}, {\n\t\tkey: 'sha1',\n\t\tvalue: function sha1(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\treturn Digest.hash(arg_string, 'sha1', arg_encoding_method);\n\t\t}\n\n\t\t/**\r\n   * Hash a string with SHA256.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding (default:hex or utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - hashed string\r\n   */\n\n\t}, {\n\t\tkey: 'sha256',\n\t\tvalue: function sha256(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\treturn Digest.hash(arg_string, 'sha256', arg_encoding_method);\n\t\t}\n\n\t\t/**\r\n   * Hash a string with SHA384.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding (default:hex or utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - hashed string\r\n   */\n\n\t}, {\n\t\tkey: 'sha384',\n\t\tvalue: function sha384(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\treturn Digest.hash(arg_string, 'sha384', arg_encoding_method);\n\t\t}\n\n\t\t/**\r\n   * Hash a string with SHA512.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding (default:hex or utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - hashed string\r\n   */\n\n\t}, {\n\t\tkey: 'sha512',\n\t\tvalue: function sha512(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\treturn Digest.hash(arg_string, 'sha512', arg_encoding_method);\n\t\t}\n\n\t\t/**\r\n   * Hash a string with MD5.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding (default:hex or utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - hashed string\r\n   */\n\n\t}, {\n\t\tkey: 'md5',\n\t\tvalue: function md5(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\treturn Digest.hash(arg_string, 'md5', arg_encoding_method);\n\t\t}\n\t}]);\n\n\treturn Digest;\n}();\n\nexports.default = Digest;\n\n\n},{\"./is_browser\":102,\"assert\":107,\"forge-browser\":\"forge-browser\",\"node-forge\":112,\"typr\":217}],99:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _is_browser = require('./is_browser');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar forge = undefined;\nif ((0, _is_browser.is_browser)()) {\n\tforge = require('forge-browser').forge;\n} else {\n\tforge = require('node-forge');\n}\n\nvar context = 'common/utils/encode_decode';\n\n/**\r\n * @file EncodeDecode class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar EncodeDecode = function () {\n\t/**\r\n  * Create a EncodeDecode instance.\r\n * \r\n * \tAPI:\r\n * \t\t->hash():string - \r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction EncodeDecode() {\n\t\t_classCallCheck(this, EncodeDecode);\n\t}\n\n\t/**\r\n  * Encode a string.\r\n  * \r\n  * @param {string} arg_string - utf8 string to hash.\r\n  * @param {string|undefined} arg_encoding_method - encoding method (default:hex or utf8,utf16,binary,base64,hexstr)\r\n  * \r\n  * @returns {string} - encoded string\r\n  */\n\n\n\t_createClass(EncodeDecode, null, [{\n\t\tkey: 'encode',\n\t\tvalue: function encode(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_string), context + ':bad input string');\n\t\t\targ_encoding_method = _typr2.default.isString(arg_encoding_method) ? arg_encoding_method : 'hex';\n\n\t\t\tvar buffer = forge.util.createBuffer(arg_string, 'utf8');\n\n\t\t\t// GET ENCODED MESSAGE\n\t\t\tvar encoded = null;\n\t\t\tswitch (arg_encoding_method.toLocaleLowerCase()) {\n\t\t\t\tcase 'hex':\n\t\t\t\t\tencoded = buffer.toHex();break;\n\t\t\t\tcase 'utf8':\n\t\t\t\tcase 'utf-8':\n\t\t\t\t\tencoded = buffer.toString('utf8');break;\n\t\t\t\tcase 'utf16':\n\t\t\t\tcase 'utf-16':\n\t\t\t\t\tencoded = buffer.toString('utf16');break;\n\t\t\t\tcase 'binary':\n\t\t\t\t\tencoded = buffer.toString('binary');break;\n\t\t\t\tcase 'base64':\n\t\t\t\t\tencoded = buffer.toString('base64');break;\n\t\t\t\tcase 'hexstr':\n\t\t\t\t\tencoded = buffer.toString('hex');break;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.error_bad_encoding_method(arg_encoding_method);return null;\n\t\t\t}\n\t\t\t(0, _assert2.default)(encoded, context + ':bad message encoding result');\n\n\t\t\treturn encoded;\n\t\t}\n\n\t\t/**\r\n   * Decode a string.\r\n   * \r\n   * @param {string} arg_string - string to hash.\r\n   * @param {string|undefined} arg_encoding_method - encoding method (default:hex,utf8,utf16,binary,base64,hexstr)\r\n   * \r\n   * @returns {string} - decoded string in utf8\r\n   */\n\n\t}, {\n\t\tkey: 'decode',\n\t\tvalue: function decode(arg_string) {\n\t\t\tvar arg_encoding_method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hex';\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_string), context + ':bad input string');\n\t\t\targ_encoding_method = _typr2.default.isString(arg_encoding_method) ? arg_encoding_method : 'hex';\n\n\t\t\tvar buffer = null;\n\t\t\tswitch (arg_encoding_method.toLocaleLowerCase()) {\n\t\t\t\tcase 'hex':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'hex');break;\n\t\t\t\tcase 'utf8':\n\t\t\t\tcase 'utf-8':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'utf8');break;\n\t\t\t\tcase 'utf16':\n\t\t\t\tcase 'utf-16':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'utf16');break;\n\t\t\t\tcase 'binary':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'binary');break;\n\t\t\t\tcase 'base64':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'base64');break;\n\t\t\t\tcase 'hexstr':\n\t\t\t\t\tbuffer = forge.util.createBuffer(arg_string, 'hex');break;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.error_bad_encoding_method(arg_encoding_method);return null;\n\t\t\t}\n\t\t\t(0, _assert2.default)(buffer, context + ':bad message decoding result');\n\n\t\t\treturn buffer.toString('utf8');\n\t\t}\n\t}]);\n\n\treturn EncodeDecode;\n}();\n\nexports.default = EncodeDecode;\n\n\n},{\"./is_browser\":102,\"assert\":107,\"forge-browser\":\"forge-browser\",\"node-forge\":112,\"typr\":217}],100:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _is_browser = require('./is_browser');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar forge = undefined;\nif ((0, _is_browser.is_browser)()) {\n\tforge = require('forge-browser').forge;\n} else {\n\tforge = require('node-forge');\n}\n\nvar context = 'common/utils/encrypt_decrypt';\n\n/**\r\n * @file EncryptDecrypt class.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar EncryptDecrypt = function () {\n\t/**\r\n  * Create a EncryptDecrypt instance.\r\n * \r\n * \tAPI:\r\n * \t\t->hash():string - \r\n * \r\n  * @returns {nothing}\r\n  */\n\tfunction EncryptDecrypt() {\n\t\t_classCallCheck(this, EncryptDecrypt);\n\t}\n\n\t/**\r\n  * Generate an encryption key from a secret.\r\n  * \r\n  * @param {string} arg_app_secret - application cryptographic secret.\r\n  * @param {number} arg_num_iterations - iterations count.\r\n  * @param {number} arg_key_length - key length.\r\n  * @param {number} arg_iv_length - iv length.\r\n  * \r\n  * @returns {string} - encrypted string.\r\n  */\n\n\n\t_createClass(EncryptDecrypt, null, [{\n\t\tkey: 'key',\n\t\tvalue: function key(arg_app_secret) {\n\t\t\tvar arg_num_iterations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\t\tvar arg_key_length = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 32;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_app_secret) && arg_app_secret.length > 0, context + ':encrypt:bad secret string');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_num_iterations) && arg_num_iterations > 3, context + ':encrypt:bad key length');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_key_length) && arg_key_length > 15, context + ':encrypt:bad key length');\n\n\t\t\tvar salt = forge.random.getBytesSync(128);\n\n\t\t\treturn forge.pkcs5.pbkdf2(arg_app_secret, salt, arg_num_iterations, arg_key_length);\n\t\t}\n\n\t\t/**\r\n   * Transform to a string with encryption.\r\n   * \r\n   * @param {string} arg_string - string to encrypt.\r\n   * @param {string} arg_key - encryotion key.\r\n   * @param {string} arg_mode - cryptographic mode AES-ECB,AES-CBC,AES-CFB,AES-OFB,AES-CTR,AES-GCM,3DES-ECB,3DES-CBC,DES-ECB,DES-CBC.\r\n   * @param {number} arg_iv_length - iv length.\r\n   * \r\n   * @returns {string} - encrypted string.\r\n   */\n\n\t}, {\n\t\tkey: 'encrypt',\n\t\tvalue: function encrypt(arg_string, arg_key) {\n\t\t\tvar arg_mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'AES-ECB';\n\t\t\tvar arg_iv_length = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 8;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_string) && arg_string.length > 0, context + ':encrypt:bad input string');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_iv_length) && arg_iv_length > 7, context + ':encrypt:bad iv length');\n\n\t\t\tvar iv = forge.random.getBytesSync(arg_iv_length);\n\n\t\t\tvar buffer = forge.util.createBuffer(arg_string);\n\t\t\tvar cipher = forge.cipher.createCipher(arg_mode, arg_key);\n\t\t\tcipher.start({ iv: iv });\n\t\t\tcipher.update(buffer);\n\t\t\tcipher.finish();\n\t\t\tvar encrypted = cipher.output;\n\n\t\t\treturn encrypted.toHex();\n\t\t}\n\n\t\t/**\r\n   * Transform to a string without encryption.\r\n   * \r\n   * @param {string} arg_string - encrypted string.\r\n   * @param {string} arg_key - encryption key.\r\n   * @param {string} arg_mode - cryptographic mode AES-ECB,AES-CBC,AES-CFB,AES-OFB,AES-CTR,AES-GCM,3DES-ECB,3DES-CBC,DES-ECB,DES-CBC.\r\n   * @param {number} arg_iv_length - iv length.\r\n   * \r\n   * @returns {string} - decrypted string.\r\n   */\n\n\t}, {\n\t\tkey: 'decrypt',\n\t\tvalue: function decrypt(arg_string, arg_key) {\n\t\t\tvar arg_mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'AES-ECB';\n\t\t\tvar arg_iv_length = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 8;\n\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_string) && arg_string.length > 0, context + ':encrypt:bad encrypted string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_mode) && arg_mode.length > 0, context + ':encrypt:bad mode string');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(arg_key) && arg_mode.length > 0, context + ':encrypt:bad key string');\n\t\t\t(0, _assert2.default)(_typr2.default.isNumber(arg_iv_length) && arg_iv_length > 7, context + ':encrypt:bad iv length');\n\n\t\t\tvar iv = forge.random.getBytesSync(arg_iv_length);\n\n\t\t\tvar buffer = forge.util.createBuffer(arg_string);\n\t\t\tvar decipher = forge.cipher.createDecipher(arg_mode, arg_key);\n\t\t\tdecipher.start({ iv: iv });\n\t\t\tdecipher.update(buffer);\n\t\t\tdecipher.finish();\n\t\t\tvar decrypted = decipher.output;\n\n\t\t\treturn decrypted.toHex();\n\t\t}\n\t}]);\n\n\treturn EncryptDecrypt;\n}();\n\nexports.default = EncryptDecrypt;\n\n\n},{\"./is_browser\":102,\"assert\":107,\"forge-browser\":\"forge-browser\",\"node-forge\":112,\"typr\":217}],101:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _htmlEntities = require('html-entities');\n\nvar html_entities = new _htmlEntities.AllHtmlEntities(); // NPM IMPORTS\nexports.default = {\n\tencode: function encode(x) {\n\t\treturn html_entities.encode(x);\n\t},\n\tencode_non_utf: function encode_non_utf(x) {\n\t\treturn html_entities.encodeNonUTF(x);\n\t},\n\tencode_non_ascii: function encode_non_ascii(x) {\n\t\treturn html_entities.encodeNonASCII(x);\n\t},\n\tdecode: function decode(x) {\n\t\treturn html_entities.decode(x);\n\t}\n};\n\n\n},{\"html-entities\":152}],102:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.is_server = is_server;\nexports.is_browser = is_browser;\n\nvar has_window = new Function('try {return this===window;}catch(e){ return false;}');\n\nvar is_node = new Function('try {return this===global;}catch(e){return false;}');\n\nfunction is_server() {\n  return is_node();\n}\n\nfunction is_browser() {\n  return has_window();\n}\n\nexports.default = { is_server: is_server, is_browser: is_browser };\n\n\n},{}],103:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _fs = require('fs');\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import ini_parser from 'ini'\n\n\nvar parser = {\n\tsplit_all_keys: function split_all_keys(arg_cfg) {\n\t\tvar self = this;\n\t\tvar out_config = {};\n\t\tvar value = null;\n\t\tvar key = null;\n\t\tObject.keys(arg_cfg).forEach(function (cfg_key, cfg_index, cfg_items) {\n\t\t\t// if (cfg_index > 10) return;\n\n\t\t\tkey = cfg_items[cfg_index];\n\t\t\tif (typeof key === 'string' && key.length > 0) {\n\t\t\t\tvalue = arg_cfg[key];\n\n\t\t\t\t// console.log('-----------------------------------------');\n\t\t\t\t// console.log(value, key);\n\n\t\t\t\tself.split_key(key, value, out_config);\n\t\t\t}\n\t\t});\n\n\t\t// console.log('out_config',out_config);\n\n\t\treturn out_config;\n\t},\n\n\tsplit_key: function split_key(arg_key, arg_value, arg_cfg) {\n\t\tif (typeof arg_key !== 'string' || arg_key.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar parts = arg_key.split('.');\n\t\tif (parts.length === 1) {\n\t\t\targ_cfg[arg_key] = arg_value;\n\t\t\treturn;\n\t\t}\n\n\t\tvar part_obj = arg_cfg;\n\t\t// console.log(parts, 'parts');\n\t\tparts.forEach(function (part_key, part_index /*, part_items*/) {\n\t\t\t// console.log(part_key, 'part_key');\n\n\t\t\tif (part_key in part_obj) {\n\t\t\t\tpart_obj = part_obj[part_key];\n\t\t\t\t// console.log('get existing value', part_key);\n\t\t\t} else {\n\n\t\t\t\tif (part_index === parts.length - 1) {\n\t\t\t\t\tpart_obj[part_key] = arg_value;\n\t\t\t\t\t// console.log('set new value', part_key);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tpart_obj = part_obj[part_key] = {};\n\t\t\t\t\t// console.log('set {}', part_key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// console.log(part_obj, 'part_obj');\n\t\t});\n\t},\n\n\tread: function read(arg_file_path_name, arg_charset) {\n\t\tvar self = this;\n\t\t// logs.info('parser', 'read [%s]', arg_file_path_name, arg_charset);\n\n\t\tif (arg_file_path_name.substr(-4).toLocaleLowerCase() === '.ini') {\n\t\t\treturn self.read_ini(arg_file_path_name, arg_charset);\n\t\t}\n\n\t\tif (arg_file_path_name.substr(-5).toLocaleLowerCase() === '.json') {\n\t\t\treturn self.read_json(arg_file_path_name, arg_charset);\n\t\t}\n\t},\n\n\tread_json: function read_json(arg_file_path_name /*, arg_charset*/) {\n\t\tvar self = this;\n\t\t// logs.info('parser', 'read_json [%s] [%s]', arg_file_path_name, arg_charset);\n\n\t\tvar config_content = require(arg_file_path_name);\n\n\t\tvar out_cfg = self.split_all_keys(config_content);\n\n\t\treturn out_cfg;\n\t},\n\n\tread_ini: function read_ini(arg_file_path_name /*, arg_charset*/) {\n\t\t// var self = this\n\t\t// logs.info('parser', 'read_ini [%s] [%s]', arg_file_path_name, arg_charset);\n\n\t\t// var config_file = fs.readFileSync(arg_file_path_name, arg_charset ? arg_charset : 'utf-8');\n\t\t// var config_content = ini_parser.parse(config_file);\n\t\t// console.log(config_content, 'config_content');\n\t\t// var out_cfg = self.split_all_keys(config_content);\n\t\tvar out_cfg = null;\n\t\t// self.write_json(arg_file_path_name + '.json', out_cfg)\n\n\t\t// var watch_listener = function(arg_prev_stats, arg_cur_stats)\n\t\t// {\n\t\t// \tlogs.info('parser', 'read_ini fs.watchFile: config file on [%s] with mtime [%s] -> [%s]', arg_file_path_name, arg_prev_stats.mtime.getTime(), arg_cur_stats.mtime.getTime());\n\n\t\t// \tvar watch_config_file = fs.readFileSync(arg_file_path_name, arg_charset ? arg_charset : 'utf-8');\n\t\t// \tvar watch_config_content = ini_parser.parse(watch_config_file);\n\t\t// \tvar watch_out_cfg = self.split_all_keys(watch_config_content);\n\n\t\t// \t// console.info('config file has changed [%s]', arg_file_path_name);\n\n\t\t// \t// LOOP ON APP OR RESOURCES CHANGES AND UPDATE RUNTIME\n\t\t// \t// ...\n\t\t// \treturn;\n\t\t// }\n\n\t\t// fs.watchFile(arg_file_path_name, { persistent: true, recursive: false }, watch_listener);\n\n\n\t\treturn out_cfg;\n\t},\n\n\twrite: function write(arg_file_path_name, arg_config) {\n\t\tvar self = this;\n\t\t// logs.info('parser', 'write [%s]', arg_file_path_name);\n\n\t\t// if (arg_file_path_name.substr(-4).toLocaleLowerCase() === '.ini')\n\t\t// {\n\t\t// \treturn self.write_ini(arg_file_path_name, arg_config)\n\t\t// }\n\n\t\tif (arg_file_path_name.substr(-5).toLocaleLowerCase() === '.json') {\n\t\t\treturn self.write_json(arg_file_path_name, arg_config);\n\t\t}\n\t},\n\n\t// write_ini: function(arg_file_path_name, arg_config)\n\t// {\n\t// \t// logs.info('parser', 'write_ini [%s]', arg_file_path_name);\n\t// \treturn fs.writeFileSync(arg_file_path_name, ini_parser.stringify(arg_config, {}))\n\t// },\n\n\n\twrite_json: function write_json(arg_file_path_name, arg_config) {\n\t\t// logs.info('parser', 'write_json [%s]', arg_file_path_name);\n\t\treturn _fs2.default.writeFileSync(arg_file_path_name, JSON.stringify(arg_config));\n\t}\n};\n\n// exports = module.exports = parser\n\n// NPM IMPORTS\nexports.default = parser;\n\n\n},{\"fs\":112}],104:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.transform = exports.out = exports.flat = exports.extract = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _typr = require('typr');\n\nvar _typr2 = _interopRequireDefault(_typr);\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _ramda = require('ramda');\n\nvar _ramda2 = _interopRequireDefault(_ramda);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar context = 'common/utils/transform';\n\nvar cursor_at_index = _ramda2.default.lensIndex;\n// const cursor_at_key = Ramda.lensProp\nvar get = _ramda2.default.view;\nvar prop = _ramda2.default.prop; // f(field_name, value_to_query)\nvar prop_default = _ramda2.default.propOr; // f(default_value, field_name, value_to_query)\nvar deep_prop = _ramda2.default.path; // f(field_path, value_to_query)\n// const clone = Ramda.clone\n// const map = Ramda.map\nvar merge = _ramda2.default.merge;\nvar flatten = _ramda2.default.flatten;\n\n/*\r\n\tFLAT\r\n\t\r\n\tExample:\r\n\t\tstream values: {\r\n\t\t\ttarget:'...',\r\n\t\t\tts:'...',\r\n\t\t\tdatas:[\r\n\t\t\t\t{level:'...', text:'...'},\r\n\t\t\t\t{level:'...', text:'...'},\r\n\t\t\t\t{level:'...', text:'...'}\r\n\t\t\t]\r\n\t\t}\r\n\tAttempded result: an array of {\r\n\t\t\ttarget:'...',\r\n\t\t\ttimestamp:'...',\r\n\t\t\tlevel:'...',\r\n\t\t\ttext:'...'\r\n\t\t}\r\n\tTransform object: {\r\n\t\tresult_type:'array',\r\n\t\tflat_field_name:'datas'\r\n\t\tflat_fields:[\r\n\t\t\t{\r\n\t\t\t\tname:'level,\r\n\t\t\t\tflat_path:['datas'],\r\n\t\t\t\tpath:['level']\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname:'text,\r\n\t\t\t\tflat_path:['datas'],\r\n\t\t\t\tpath:['text']\r\n\t\t\t}\r\n\t\t],\r\n\t\tfields:[\r\n\t\t\t{\r\n\t\t\t\tname:'target,\r\n\t\t\t\tpath:'target'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname:'timestamp,\r\n\t\t\t\tpath:'ts'\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n*/\n\n/**\r\n * Function to extract avalue from an object. \r\n * @public\r\n * @param {object} arg_field_config - field configuration.\r\n * @returns {function} - transformation function : data_in (object) => datas_out (any)\r\n */\nvar extract = exports.extract = function extract(arg_field_config) {\n\t// console.log(arg_field_config, context + ':extract:arg_field_config')\n\n\t(0, _assert2.default)(_typr2.default.isObject(arg_field_config), context + ':flat:bad field object');\n\n\tvar field_name = prop_default('unnamed field', 'name', arg_field_config);\n\tvar field_path = prop_default(undefined, 'path', arg_field_config);\n\tvar field_value = prop_default(undefined, 'value', arg_field_config);\n\tvar flat_all = prop_default(undefined, 'flat_all', arg_field_config);\n\n\t// console.log(field_name, context + ':extract:field_name')\n\t// console.log(field_path, context + ':extract:field_path')\n\t// console.log(field_value, context + ':extract:field_value')\n\n\tvar field_validate = prop_default(undefined, 'validate', arg_field_config);\n\tvar default_value = undefined;\n\tvar validate_method = function validate_method(f) {\n\t\treturn f;\n\t};\n\n\t// DEFINE VALIDATION\n\tif (_typr2.default.isObject(field_validate)) {\n\t\t// DEFAULT VALUE\n\t\tif (!_typr2.default.isUndefined(field_validate.default)) {\n\t\t\tdefault_value = field_validate.default;\n\t\t}\n\n\t\t// CHECK TYPE\n\t\tif (_typr2.default.isString(field_validate.type) && field_validate.type.length > 3) {\n\t\t\tvar check_method_name = 'is' + field_validate.type[0].toUpperLocaleString() + field_validate.type.slice(1).toLowerLocaleString();\n\t\t\tif (_typr2.default.isFunction(_typr2.default[check_method_name])) {\n\t\t\t\t(function () {\n\t\t\t\t\tvar check_method = _typr2.default.isFunction(_typr2.default[check_method_name]);\n\t\t\t\t\tvalidate_method = function validate_method(f) {\n\t\t\t\t\t\treturn function (x) {\n\t\t\t\t\t\t\tvar v = f(x);\n\t\t\t\t\t\t\tif (check_method(v)) {\n\t\t\t\t\t\t\t\treturn flat_all ? flatten(v) : v;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn default_value;\n\t\t\t\t\t\t};\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t}\n\n\t// XFORM = VALUE FROM NUMBER PATH\n\tif (_typr2.default.isNumber(field_path)) {\n\t\tvar _value_extractor = {\n\t\t\tname: field_name,\n\t\t\textract: validate_method(get(cursor_at_index(field_path)))\n\t\t};\n\t\treturn _value_extractor;\n\t}\n\n\t// XFORM = VALUE FROM STRING PATH\n\tif (_typr2.default.isString(field_path)) {\n\t\t// console.log('transform:value_extractor:value for field=%s path=%s', field_name, field_path)\n\t\tvar _value_extractor2 = {\n\t\t\tname: field_name,\n\t\t\textract: validate_method(prop(field_path))\n\t\t};\n\t\treturn _value_extractor2;\n\t}\n\n\t// XFORM = VALUE FROM ARRAY PATH\n\tif (_typr2.default.isArray(field_path)) {\n\t\tvar _value_extractor3 = {\n\t\t\tname: field_name,\n\t\t\textract: validate_method(deep_prop(field_path))\n\t\t};\n\t\treturn _value_extractor3;\n\t}\n\n\t// XFORM = CONSTANT\n\tif (field_value) {\n\t\tvar _value_extractor4 = {\n\t\t\tname: field_name,\n\t\t\textract: function extract() {\n\t\t\t\treturn validate_method(field_value);\n\t\t\t}\n\t\t};\n\t\treturn _value_extractor4;\n\t}\n\n\t// RETURN PROPERTY WITH KEY = NAME\n\tvar value_extractor = {\n\t\tname: field_name,\n\t\textract: validate_method(function (value) {\n\t\t\t// console.log('transform:value_extractor:value for field=%s:', field_name, value)\n\t\t\tif (_typr2.default.isObject(value)) {\n\t\t\t\treturn prop_default(default_value, field_name)(value);\n\t\t\t}\n\t\t\treturn _typr2.default.isUndefined(value) ? default_value : value;\n\t\t})\n\t};\n\n\treturn value_extractor;\n};\n\n/**\r\n * Function to transform an object with an array attribute to a flat array. \r\n * @public\r\n * @param {string} arg_array_name - array attribute name.\r\n * @param {array} arg_fields - unique fields to include into each output record.\r\n * @param {array} arg_flat_fields - fields of included array to pick into each output record.\r\n * @param {string} arg_results_type - output record type ('array' or 'object').\r\n * @returns {function} - transformation function : data_in (object) => datas_out (array of object|array)\r\n */\nvar flat = exports.flat = function flat(arg_array_name, arg_fields, arg_flat_fields, arg_results_type) {\n\t(0, _assert2.default)(_typr2.default.isString(arg_array_name), context + ':flat:bad array name');\n\t(0, _assert2.default)(_typr2.default.isArray(arg_fields), context + ':flat:bad fields array');\n\n\treturn function (arg_value) {\n\t\tif (!(arg_array_name in arg_value)) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// INIT OUTPUT RESULTS\n\t\tvar results = [];\n\n\t\t// EXTRACT REPEATED VALUES\n\t\tvar values_to_repeat_extractors = [];\n\t\targ_fields.forEach(function (field) {\n\t\t\tvar field_extractor = extract(field);\n\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(field_extractor), context + ':flat:bad field extractor object');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(field_extractor.name), context + ':flat:bad field extractor name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(field_extractor.extract), context + ':flat:bad field extractor extract funcytion');\n\n\t\t\tvalues_to_repeat_extractors.push(field_extractor);\n\t\t});\n\t\tvar values_to_repeat = out(values_to_repeat_extractors, arg_results_type)(arg_value);\n\n\t\t// GET VALUES OF COLLECTION TO FLAT EXTRACTORS\n\t\tvar flat_extractors = [];\n\t\targ_flat_fields.forEach(function (field) {\n\t\t\tvar field_extractor = extract(field);\n\n\t\t\t(0, _assert2.default)(_typr2.default.isObject(field_extractor), context + ':flat:bad flat field extractor object');\n\t\t\t(0, _assert2.default)(_typr2.default.isString(field_extractor.name), context + ':flat:bad flat field extractor name string');\n\t\t\t(0, _assert2.default)(_typr2.default.isFunction(field_extractor.extract), context + ':flat:bad flat field extractor extract funcytion');\n\n\t\t\tflat_extractors.push(field_extractor);\n\t\t});\n\t\tvar flat_extractors_out = out(flat_extractors, arg_results_type);\n\n\t\t// LOOP ON VALUES TO FLAT\n\t\tvar array_to_flat = prop_default([], arg_array_name, arg_value);\n\t\tarray_to_flat.forEach(function (array_to_flat_item) {\n\t\t\tvar values_to_flat = flat_extractors_out(array_to_flat_item);\n\n\t\t\tvar values = arg_results_type == 'object' ? merge(values_to_repeat, values_to_flat) : [].concat(values_to_repeat, values_to_flat);\n\t\t\tresults.push(values);\n\t\t});\n\n\t\treturn results;\n\t};\n};\n\n/**\r\n * Output\r\n * @public\r\n * @param {array} arg_extractors - fields extractors objects array with extractor:{ name:'...', extract:(any)=>(any) }).\r\n * @param {string} arg_results_type - output record type ('array' or 'object').\r\n * @returns {function} - transformation function : data_in (object|array) => datas_out (array or object)\r\n */\nvar out = exports.out = function out(arg_extractors, arg_results_type) {\n\tvar xform_array = function xform_array(arg_stream_value) {\n\t\tvar result = [];\n\t\targ_extractors.forEach(function (field_xform) {\n\t\t\tresult.push(field_xform.extract(arg_stream_value));\n\t\t});\n\t\treturn result;\n\t};\n\n\tvar xform_object = function xform_object(arg_stream_value) {\n\t\tvar result = {};\n\t\targ_extractors.forEach(function (field_xform) {\n\t\t\tvar field_name = field_xform.name;\n\t\t\tresult[field_name] = field_xform.extract(arg_stream_value);\n\t\t});\n\t\treturn result;\n\t};\n\n\tvar output_xformer = function output_xformer(arg_stream_value) {\n\t\treturn arg_stream_value;\n\t};\n\tif (arg_results_type == 'object') {\n\t\toutput_xformer = xform_object;\n\t} else if (arg_results_type == 'array') {\n\t\toutput_xformer = xform_array;\n\t} else if (arg_results_type == 'single' && arg_extractors.length == 1) {\n\t\t(function () {\n\t\t\tvar field_xform = arg_extractors[0];\n\t\t\toutput_xformer = function output_xformer(arg_stream_value) {\n\t\t\t\treturn field_xform.extract(arg_stream_value);\n\t\t\t};\n\t\t})();\n\t}\n\n\treturn output_xformer;\n};\n\n/**\r\n * Function to transform a structured data to an other data regarding a transformation configuration. \r\n * @public\r\n * @param {object} arg_xform - transformation definition.\r\n * @returns {function} - transformation function : data_in (object|array) => datas_out (array or object)\r\n */\nvar transform = exports.transform = function transform(arg_xform) {\n\t(0, _assert2.default)(_typr2.default.isObject(arg_xform), context + ':transform:bad xform object');\n\n\tvar result_type = prop_default('array', 'result_type', arg_xform);\n\tvar loop_on_keys = prop_default(undefined, 'loop_on_keys', arg_xform);\n\tvar fields = prop_default([], 'fields', arg_xform);\n\tvar flat_field_name = prop_default(undefined, 'flat_field_name', arg_xform);\n\tvar flat_fields = prop_default(undefined, 'flat_fields', arg_xform);\n\n\tvar extractors = [];\n\n\t// WITH ARRAY TO FLAT\n\tif (_typr2.default.isString(flat_field_name) && _typr2.default.isArray(flat_fields)) {\n\t\treturn flat(flat_field_name, fields, flat_fields, result_type);\n\t}\n\n\t// WITHOUT ARRAY TO FLAT\n\telse {\n\t\t\tfields.forEach(function (field) {\n\t\t\t\t// console.log('tranform:WITHOUT ARRAY TO FLAT:fields.forEach', field)\n\t\t\t\tvar value_extractor = extract(field);\n\t\t\t\textractors.push(value_extractor);\n\t\t\t});\n\t\t}\n\n\t// FORMAT OUTPUT\n\tvar output_xformer = out(extractors, result_type);\n\n\tvar output_extractor = function output_extractor(arg_value) {\n\n\t\tif (_typr2.default.isArray(arg_value)) {\n\t\t\tvar _ret3 = function () {\n\t\t\t\tvar results = [];\n\t\t\t\targ_value.forEach(function (value) {\n\t\t\t\t\tvar output_value = output_xformer(value);\n\t\t\t\t\tresults.push(output_value);\n\t\t\t\t});\n\t\t\t\t// console.log(context + ':output_extractor:isArray:results', results)\n\t\t\t\treturn {\n\t\t\t\t\tv: results\n\t\t\t\t};\n\t\t\t}();\n\n\t\t\tif ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n\t\t}\n\n\t\tif (_typr2.default.isObject(arg_value)) {\n\t\t\tvar output_value = output_xformer(arg_value);\n\t\t\t// console.log(context + ':output_extractor:isObject:output_value', output_value)\n\t\t\treturn output_value;\n\t\t}\n\n\t\tif (!loop_on_keys) {\n\t\t\tconsole.warn(context + ':output_extractor:not object/array:results', arg_value);\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\tif (loop_on_keys) {\n\t\t// console.log(context + ':loop_on_keys enabled')\n\n\t\tvar loop_extractor = function loop_extractor(arg_values) {\n\t\t\tvar results = [];\n\t\t\tvar keys = Object.keys(arg_values);\n\n\t\t\t// PROBLEM WITH NODEJS 0.10\n\t\t\t// for(let loop_key of keys)\n\t\t\t// {\n\t\t\tfor (var loop_index = 0; loop_index < keys.length; loop_index++) {\n\t\t\t\tvar loop_key = keys[loop_index];\n\t\t\t\t// console.log(context + ':loop_on_keys:key', loop_key)\n\t\t\t\tvar loop_value = arg_values[loop_key];\n\t\t\t\tvar loop_extracted = output_extractor(loop_value);\n\t\t\t\tif (loop_extracted) {\n\t\t\t\t\tresults.push(loop_extracted);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn results;\n\t\t};\n\n\t\treturn loop_extractor;\n\t}\n\n\treturn output_extractor;\n};\n\n\n},{\"assert\":107,\"ramda\":193,\"typr\":217}],105:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// Similar to typr module which has a problem with recent nodejs: lib-cov not found error.\n\nvar toStr = Object.prototype.toString;\nvar types_fn = {};\n\nvar types = ['Function', 'Object', 'Date', 'Number', 'String', 'Boolean', 'RegExp', 'Arguments'];\ntypes.forEach(function (type) {\n\tvar expected = '[object ' + type + ']';\n\ttypes_fn['is' + type] = function (o) {\n\t\treturn toStr.call(o) === expected;\n\t};\n});\n\ntypes_fn.isNotEmptyString = function (o) {\n\treturn types_fn.isString(o) && o.length > 0;\n};\n\ntypes_fn.isNotEmptyArray = function (o) {\n\treturn types_fn.isArray(o) && o.length > 0;\n};\n\n// DOM ELEMENT TEST\n// For a tr element: \"[object HTMLTableRowElement]\"\ntypes_fn.isElement = function (o) {\n\tif ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) != 'object') {\n\t\treturn false;\n\t}\n\tvar str = o.toString();\n\treturn str.startsWith('[object HTML') && str.endsWith('Element]');\n};\n\n// DOM NODE LIST TEST\n// For a tr element: \"[object NodeList]\"\ntypes_fn.isNodeList = function (o) {\n\tif ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) != 'object') {\n\t\treturn false;\n\t}\n\tvar str = o.toString();\n\treturn str == '[object NodeList]';\n};\n\ntypes_fn.isArray = Array.isArray;\ntypes_fn.isNaN = Number.isNaN;\ntypes_fn.isNumeric = Number.isFinite;\n\ntypes_fn.isInfinite = function (n) {\n\treturn Math.abs(n) === Infinity;\n};\n\ntypes_fn.isNull = function (o) {\n\treturn o === null;\n};\n\ntypes_fn.isUndefined = function (o) {\n\tvar undef;\n\treturn o === undef;\n};\n\nexports.default = types_fn;\n\n\n},{}],106:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = uid;\nvar uid_counter = 0;\n\nfunction uid() {\n  return ++uid_counter;\n}\n\n\n},{}],107:[function(require,module,exports){\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// when used in node, this will actually load the util module we depend on\n// versus loading the builtin util module as happens otherwise\n// this is a bug in node module loading as far as I am concerned\nvar util = require('util/');\n\nvar pSlice = Array.prototype.slice;\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  }\n  else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = stackStartFunction.name;\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction replacer(key, value) {\n  if (util.isUndefined(value)) {\n    return '' + value;\n  }\n  if (util.isNumber(value) && !isFinite(value)) {\n    return value.toString();\n  }\n  if (util.isFunction(value) || util.isRegExp(value)) {\n    return value.toString();\n  }\n  return value;\n}\n\nfunction truncate(s, n) {\n  if (util.isString(s)) {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\n\nfunction getMessage(self) {\n  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(JSON.stringify(self.expected, replacer), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {\n    if (actual.length != expected.length) return false;\n\n    for (var i = 0; i < actual.length; i++) {\n      if (actual[i] !== expected[i]) return false;\n    }\n\n    return true;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!util.isObject(actual) && !util.isObject(expected)) {\n    return actual == expected;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b) {\n  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b)) {\n    return a === b;\n  }\n  var aIsArgs = isArguments(a),\n      bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b);\n  }\n  var ka = objectKeys(a),\n      kb = objectKeys(b),\n      key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key])) return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  } else if (actual instanceof expected) {\n    return true;\n  } else if (expected.call({}, actual) === true) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (util.isString(expected)) {\n    message = expected;\n    expected = null;\n  }\n\n  try {\n    block();\n  } catch (e) {\n    actual = e;\n  }\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  if (!shouldThrow && expectedException(actual, expected)) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws.apply(this, [true].concat(pSlice.call(arguments)));\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/message) {\n  _throws.apply(this, [false].concat(pSlice.call(arguments)));\n};\n\nassert.ifError = function(err) { if (err) {throw err;}};\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n\n},{\"util/\":222}],108:[function(require,module,exports){\n(function (global){\n(function() {\nvar _slice = Array.prototype.slice;\nvar Bacon = {\n  toString: function () {\n    return \"Bacon\";\n  }\n};\n\nBacon.version = '0.7.89';\n\nvar Exception = (typeof global !== \"undefined\" && global !== null ? global : this).Error;\nvar nop = function () {};\nvar latter = function (_, x) {\n  return x;\n};\nvar former = function (x, _) {\n  return x;\n};\nvar cloneArray = function (xs) {\n  return xs.slice(0);\n};\nvar assert = function (message, condition) {\n  if (!condition) {\n    throw new Exception(message);\n  }\n};\nvar assertObservableIsProperty = function (x) {\n  if ((x != null ? x._isObservable : void 0) && !(x != null ? x._isProperty : void 0)) {\n    throw new Exception(\"Observable is not a Property : \" + x);\n  }\n};\nvar assertEventStream = function (event) {\n  if (!(event != null ? event._isEventStream : void 0)) {\n    throw new Exception(\"not an EventStream : \" + event);\n  }\n};\n\nvar assertObservable = function (event) {\n  if (!(event != null ? event._isObservable : void 0)) {\n    throw new Exception(\"not an Observable : \" + event);\n  }\n};\nvar assertFunction = function (f) {\n  return assert(\"not a function : \" + f, _.isFunction(f));\n};\nvar isArray = Array.isArray || function (xs) {\n  return xs instanceof Array;\n};\nvar isObservable = function (x) {\n  return x && x._isObservable;\n};\nvar assertArray = function (xs) {\n  if (!isArray(xs)) {\n    throw new Exception(\"not an array : \" + xs);\n  }\n};\nvar assertNoArguments = function (args) {\n  return assert(\"no arguments supported\", args.length === 0);\n};\nvar assertString = function (x) {\n  if (typeof x === \"string\") {\n    throw new Exception(\"not a string : \" + x);\n  }\n};\n\nvar extend = function (target) {\n  var length = arguments.length;\n  for (var i = 1; 1 < length ? i < length : i > length; 1 < length ? i++ : i--) {\n    for (var prop in arguments[i]) {\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n\nvar inherit = function (child, parent) {\n  var hasProp = ({}).hasOwnProperty;\n  var ctor = function () {};\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n  for (var key in parent) {\n    if (hasProp.call(parent, key)) {\n      child[key] = parent[key];\n    }\n  }\n  return child;\n};\n\nvar _ = {\n  indexOf: (function () {\n    if (Array.prototype.indexOf) {\n      return function (xs, x) {\n        return xs.indexOf(x);\n      };\n    } else {\n      return function (xs, x) {\n        for (var i = 0, y; i < xs.length; i++) {\n          y = xs[i];\n          if (x === y) {\n            return i;\n          }\n        }\n        return -1;\n      };\n    }\n  })(),\n  indexWhere: function (xs, f) {\n    for (var i = 0, y; i < xs.length; i++) {\n      y = xs[i];\n      if (f(y)) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  head: function (xs) {\n    return xs[0];\n  },\n  always: function (x) {\n    return function () {\n      return x;\n    };\n  },\n  negate: function (f) {\n    return function (x) {\n      return !f(x);\n    };\n  },\n  empty: function (xs) {\n    return xs.length === 0;\n  },\n  tail: function (xs) {\n    return xs.slice(1, xs.length);\n  },\n  filter: function (f, xs) {\n    var filtered = [];\n    for (var i = 0, x; i < xs.length; i++) {\n      x = xs[i];\n      if (f(x)) {\n        filtered.push(x);\n      }\n    }\n    return filtered;\n  },\n  map: function (f, xs) {\n    return (function () {\n      var result = [];\n      for (var i = 0, x; i < xs.length; i++) {\n        x = xs[i];\n        result.push(f(x));\n      }\n      return result;\n    })();\n  },\n  each: function (xs, f) {\n    for (var key in xs) {\n      if (Object.prototype.hasOwnProperty.call(xs, key)) {\n        var value = xs[key];\n        f(key, value);\n      }\n    }\n  },\n  toArray: function (xs) {\n    return isArray(xs) ? xs : [xs];\n  },\n  contains: function (xs, x) {\n    return _.indexOf(xs, x) !== -1;\n  },\n  id: function (x) {\n    return x;\n  },\n  last: function (xs) {\n    return xs[xs.length - 1];\n  },\n  all: function (xs) {\n    var f = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];\n\n    for (var i = 0, x; i < xs.length; i++) {\n      x = xs[i];\n      if (!f(x)) {\n        return false;\n      }\n    }\n    return true;\n  },\n  any: function (xs) {\n    var f = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];\n\n    for (var i = 0, x; i < xs.length; i++) {\n      x = xs[i];\n      if (f(x)) {\n        return true;\n      }\n    }\n    return false;\n  },\n  without: function (x, xs) {\n    return _.filter(function (y) {\n      return y !== x;\n    }, xs);\n  },\n  remove: function (x, xs) {\n    var i = _.indexOf(xs, x);\n    if (i >= 0) {\n      return xs.splice(i, 1);\n    }\n  },\n  fold: function (xs, seed, f) {\n    for (var i = 0, x; i < xs.length; i++) {\n      x = xs[i];\n      seed = f(seed, x);\n    }\n    return seed;\n  },\n  flatMap: function (f, xs) {\n    return _.fold(xs, [], function (ys, x) {\n      return ys.concat(f(x));\n    });\n  },\n  cached: function (f) {\n    var value = None;\n    return function () {\n      if (typeof value !== \"undefined\" && value !== null ? value._isNone : undefined) {\n        value = f();\n        f = undefined;\n      }\n      return value;\n    };\n  },\n  bind: function (fn, me) {\n    return function () {\n      return fn.apply(me, arguments);\n    };\n  },\n  isFunction: function (f) {\n    return typeof f === \"function\";\n  },\n  toString: function (obj) {\n    var internals, key, value;\n    var hasProp = ({}).hasOwnProperty;\n    try {\n      recursionDepth++;\n      if (obj == null) {\n        return \"undefined\";\n      } else if (_.isFunction(obj)) {\n        return \"function\";\n      } else if (isArray(obj)) {\n        if (recursionDepth > 5) {\n          return \"[..]\";\n        }\n        return \"[\" + _.map(_.toString, obj).toString() + \"]\";\n      } else if ((obj != null ? obj.toString : void 0) != null && obj.toString !== Object.prototype.toString) {\n        return obj.toString();\n      } else if (typeof obj === \"object\") {\n        if (recursionDepth > 5) {\n          return \"{..}\";\n        }\n        internals = (function () {\n          var results = [];\n          for (key in obj) {\n            if (!hasProp.call(obj, key)) continue;\n            value = (function () {\n              var error;\n              try {\n                return obj[key];\n              } catch (error) {\n                return error;\n              }\n            })();\n            results.push(_.toString(key) + \":\" + _.toString(value));\n          }\n          return results;\n        })();\n        return \"{\" + internals + \"}\";\n      } else {\n        return obj;\n      }\n    } finally {\n      recursionDepth--;\n    }\n  }\n};\n\nvar recursionDepth = 0;\n\nBacon._ = _;\n\nvar UpdateBarrier = Bacon.UpdateBarrier = (function () {\n  var rootEvent;\n  var waiterObs = [];\n  var waiters = {};\n  var afters = [];\n  var aftersIndex = 0;\n  var flushed = {};\n\n  var afterTransaction = function (f) {\n    if (rootEvent) {\n      return afters.push(f);\n    } else {\n      return f();\n    }\n  };\n\n  var whenDoneWith = function (obs, f) {\n    if (rootEvent) {\n      var obsWaiters = waiters[obs.id];\n      if (!(typeof obsWaiters !== \"undefined\" && obsWaiters !== null)) {\n        obsWaiters = waiters[obs.id] = [f];\n        return waiterObs.push(obs);\n      } else {\n        return obsWaiters.push(f);\n      }\n    } else {\n      return f();\n    }\n  };\n\n  var flush = function () {\n    while (waiterObs.length > 0) {\n      flushWaiters(0, true);\n    }\n    flushed = {};\n  };\n\n  var flushWaiters = function (index, deps) {\n    var obs = waiterObs[index];\n    var obsId = obs.id;\n    var obsWaiters = waiters[obsId];\n    waiterObs.splice(index, 1);\n    delete waiters[obsId];\n    if (deps && waiterObs.length > 0) {\n      flushDepsOf(obs);\n    }\n    for (var i = 0, f; i < obsWaiters.length; i++) {\n      f = obsWaiters[i];\n      f();\n    }\n  };\n\n  var flushDepsOf = function (obs) {\n    if (flushed[obs.id]) return;\n    var deps = obs.internalDeps();\n    for (var i = 0, dep; i < deps.length; i++) {\n      dep = deps[i];\n      flushDepsOf(dep);\n      if (waiters[dep.id]) {\n        var index = _.indexOf(waiterObs, dep);\n        flushWaiters(index, false);\n      }\n    }\n    flushed[obs.id] = true;\n  };\n\n  var inTransaction = function (event, context, f, args) {\n    if (rootEvent) {\n      return f.apply(context, args);\n    } else {\n      rootEvent = event;\n      try {\n        var result = f.apply(context, args);\n\n        flush();\n      } finally {\n        rootEvent = undefined;\n        while (aftersIndex < afters.length) {\n          var after = afters[aftersIndex];\n          aftersIndex++;\n          after();\n        }\n        aftersIndex = 0;\n        afters = [];\n      }\n      return result;\n    }\n  };\n\n  var currentEventId = function () {\n    return rootEvent ? rootEvent.id : undefined;\n  };\n\n  var wrappedSubscribe = function (obs, sink) {\n    var unsubd = false;\n    var shouldUnsub = false;\n    var doUnsub = function () {\n      shouldUnsub = true;\n      return shouldUnsub;\n    };\n    var unsub = function () {\n      unsubd = true;\n      return doUnsub();\n    };\n    doUnsub = obs.dispatcher.subscribe(function (event) {\n      return afterTransaction(function () {\n        if (!unsubd) {\n          var reply = sink(event);\n          if (reply === Bacon.noMore) {\n            return unsub();\n          }\n        }\n      });\n    });\n    if (shouldUnsub) {\n      doUnsub();\n    }\n    return unsub;\n  };\n\n  var hasWaiters = function () {\n    return waiterObs.length > 0;\n  };\n\n  return { whenDoneWith: whenDoneWith, hasWaiters: hasWaiters, inTransaction: inTransaction, currentEventId: currentEventId, wrappedSubscribe: wrappedSubscribe, afterTransaction: afterTransaction };\n})();\n\nfunction Source(obs, sync) {\n  var lazy = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n  this.obs = obs;\n  this.sync = sync;\n  this.lazy = lazy;\n  this.queue = [];\n}\n\nextend(Source.prototype, {\n  _isSource: true,\n\n  subscribe: function (sink) {\n    return this.obs.dispatcher.subscribe(sink);\n  },\n  toString: function () {\n    return this.obs.toString();\n  },\n  markEnded: function () {\n    this.ended = true;\n    return true;\n  },\n  consume: function () {\n    if (this.lazy) {\n      return { value: _.always(this.queue[0]) };\n    } else {\n      return this.queue[0];\n    }\n  },\n  push: function (x) {\n    this.queue = [x];\n    return [x];\n  },\n  mayHave: function () {\n    return true;\n  },\n  hasAtLeast: function () {\n    return this.queue.length;\n  },\n  flatten: true\n});\n\nfunction ConsumingSource() {\n  Source.apply(this, arguments);\n}\n\ninherit(ConsumingSource, Source);\nextend(ConsumingSource.prototype, {\n  consume: function () {\n    return this.queue.shift();\n  },\n  push: function (x) {\n    return this.queue.push(x);\n  },\n  mayHave: function (c) {\n    return !this.ended || this.queue.length >= c;\n  },\n  hasAtLeast: function (c) {\n    return this.queue.length >= c;\n  },\n  flatten: false\n});\n\nfunction BufferingSource(obs) {\n  Source.call(this, obs, true);\n}\n\ninherit(BufferingSource, Source);\nextend(BufferingSource.prototype, {\n  consume: function () {\n    var values = this.queue;\n    this.queue = [];\n    return {\n      value: function () {\n        return values;\n      }\n    };\n  },\n  push: function (x) {\n    return this.queue.push(x.value());\n  },\n  hasAtLeast: function () {\n    return true;\n  }\n});\n\nSource.isTrigger = function (s) {\n  if (s != null ? s._isSource : void 0) {\n    return s.sync;\n  } else {\n    return s != null ? s._isEventStream : void 0;\n  }\n};\n\nSource.fromObservable = function (s) {\n  if (s != null ? s._isSource : void 0) {\n    return s;\n  } else if (s != null ? s._isProperty : void 0) {\n    return new Source(s, false);\n  } else {\n    return new ConsumingSource(s, true);\n  }\n};\n\nfunction Desc(context, method, args) {\n  this.context = context;\n  this.method = method;\n  this.args = args;\n}\n\nextend(Desc.prototype, {\n  _isDesc: true,\n  deps: function () {\n    if (!this.cached) {\n      this.cached = findDeps([this.context].concat(this.args));\n    }\n    return this.cached;\n  },\n  toString: function () {\n    return _.toString(this.context) + \".\" + _.toString(this.method) + \"(\" + _.map(_.toString, this.args) + \")\";\n  }\n});\n\nvar describe = function (context, method) {\n  var ref = context || method;\n  if (ref && ref._isDesc) {\n    return context || method;\n  } else {\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return new Desc(context, method, args);\n  }\n};\n\nvar withDesc = function (desc, obs) {\n  obs.desc = desc;\n  return obs;\n};\n\nvar findDeps = function (x) {\n  if (isArray(x)) {\n    return _.flatMap(findDeps, x);\n  } else if (isObservable(x)) {\n    return [x];\n  } else if (typeof x !== \"undefined\" && x !== null ? x._isSource : undefined) {\n    return [x.obs];\n  } else {\n    return [];\n  }\n};\n\nBacon.Desc = Desc;\nBacon.Desc.empty = new Bacon.Desc(\"\", \"\", []);\n\nvar withMethodCallSupport = function (wrapped) {\n  return function (f) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (typeof f === \"object\" && args.length) {\n      var context = f;\n      var methodName = args[0];\n      f = function () {\n        return context[methodName].apply(context, arguments);\n      };\n      args = args.slice(1);\n    }\n    return wrapped.apply(undefined, [f].concat(args));\n  };\n};\n\nvar makeFunctionArgs = function (args) {\n  args = Array.prototype.slice.call(args);\n  return makeFunction_.apply(undefined, args);\n};\n\nvar partiallyApplied = function (f, applied) {\n  return function () {\n    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return f.apply(undefined, applied.concat(args));\n  };\n};\n\nvar toSimpleExtractor = function (args) {\n  return function (key) {\n    return function (value) {\n      if (!(typeof value !== \"undefined\" && value !== null)) {\n        return;\n      } else {\n        var fieldValue = value[key];\n        if (_.isFunction(fieldValue)) {\n          return fieldValue.apply(value, args);\n        } else {\n          return fieldValue;\n        }\n      }\n    };\n  };\n};\n\nvar toFieldExtractor = function (f, args) {\n  var parts = f.slice(1).split(\".\");\n  var partFuncs = _.map(toSimpleExtractor(args), parts);\n  return function (value) {\n    for (var i = 0, f; i < partFuncs.length; i++) {\n      f = partFuncs[i];\n      value = f(value);\n    }\n    return value;\n  };\n};\n\nvar isFieldKey = function (f) {\n  return typeof f === \"string\" && f.length > 1 && f.charAt(0) === \".\";\n};\n\nvar makeFunction_ = withMethodCallSupport(function (f) {\n  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  if (_.isFunction(f)) {\n    if (args.length) {\n      return partiallyApplied(f, args);\n    } else {\n      return f;\n    }\n  } else if (isFieldKey(f)) {\n    return toFieldExtractor(f, args);\n  } else {\n    return _.always(f);\n  }\n});\n\nvar makeFunction = function (f, args) {\n  return makeFunction_.apply(undefined, [f].concat(args));\n};\n\nvar convertArgsToFunction = function (obs, f, args, method) {\n  if (typeof f !== \"undefined\" && f !== null ? f._isProperty : undefined) {\n    var sampled = f.sampledBy(obs, function (p, s) {\n      return [p, s];\n    });\n    return method.call(sampled, function (_ref) {\n      var p = _ref[0];\n      var s = _ref[1];\n      return p;\n    }).map(function (_ref2) {\n      var p = _ref2[0];\n      var s = _ref2[1];\n      return s;\n    });\n  } else {\n    f = makeFunction(f, args);\n    return method.call(obs, f);\n  }\n};\n\nvar toCombinator = function (f) {\n  if (_.isFunction(f)) {\n    return f;\n  } else if (isFieldKey(f)) {\n    var key = toFieldKey(f);\n    return function (left, right) {\n      return left[key](right);\n    };\n  } else {\n    throw new Exception(\"not a function or a field key: \" + f);\n  }\n};\n\nvar toFieldKey = function (f) {\n  return f.slice(1);\n};\n\nfunction Some(value) {\n  this.value = value;\n}\n\nextend(Some.prototype, {\n  _isSome: true,\n  getOrElse: function () {\n    return this.value;\n  },\n  get: function () {\n    return this.value;\n  },\n  filter: function (f) {\n    if (f(this.value)) {\n      return new Some(this.value);\n    } else {\n      return None;\n    }\n  },\n  map: function (f) {\n    return new Some(f(this.value));\n  },\n  forEach: function (f) {\n    return f(this.value);\n  },\n  isDefined: true,\n  toArray: function () {\n    return [this.value];\n  },\n  inspect: function () {\n    return \"Some(\" + this.value + \")\";\n  },\n  toString: function () {\n    return this.inspect();\n  }\n});\n\nvar None = {\n  _isNone: true,\n  getOrElse: function (value) {\n    return value;\n  },\n  filter: function () {\n    return None;\n  },\n  map: function () {\n    return None;\n  },\n  forEach: function () {},\n  isDefined: false,\n  toArray: function () {\n    return [];\n  },\n  inspect: function () {\n    return \"None\";\n  },\n  toString: function () {\n    return this.inspect();\n  }\n};\n\nvar toOption = function (v) {\n  if ((typeof v !== \"undefined\" && v !== null ? v._isSome : undefined) || (typeof v !== \"undefined\" && v !== null ? v._isNone : undefined)) {\n    return v;\n  } else {\n    return new Some(v);\n  }\n};\n\nBacon.noMore = \"<no-more>\";\nBacon.more = \"<more>\";\n\nvar eventIdCounter = 0;\n\nfunction Event() {\n  this.id = ++eventIdCounter;\n}\n\nEvent.prototype._isEvent = true;\nEvent.prototype.isEvent = function () {\n  return true;\n};\nEvent.prototype.isEnd = function () {\n  return false;\n};\nEvent.prototype.isInitial = function () {\n  return false;\n};\nEvent.prototype.isNext = function () {\n  return false;\n};\nEvent.prototype.isError = function () {\n  return false;\n};\nEvent.prototype.hasValue = function () {\n  return false;\n};\nEvent.prototype.filter = function () {\n  return true;\n};\nEvent.prototype.inspect = function () {\n  return this.toString();\n};\nEvent.prototype.log = function () {\n  return this.toString();\n};\n\nfunction Next(valueF, eager) {\n  if (!(this instanceof Next)) {\n    return new Next(valueF, eager);\n  }\n\n  Event.call(this);\n\n  if (!eager && _.isFunction(valueF) || (valueF != null ? valueF._isNext : void 0)) {\n    this.valueF = valueF;\n    this.valueInternal = void 0;\n  } else {\n    this.valueF = void 0;\n    this.valueInternal = valueF;\n  }\n}\n\ninherit(Next, Event);\n\nNext.prototype.isNext = function () {\n  return true;\n};\nNext.prototype.hasValue = function () {\n  return true;\n};\nNext.prototype.value = function () {\n  var ref;\n  if ((ref = this.valueF) != null ? ref._isNext : void 0) {\n    this.valueInternal = this.valueF.value();\n    this.valueF = void 0;\n  } else if (this.valueF) {\n    this.valueInternal = this.valueF();\n    this.valueF = void 0;\n  }\n  return this.valueInternal;\n};\n\nNext.prototype.fmap = function (f) {\n  var event, value;\n  if (this.valueInternal) {\n    value = this.valueInternal;\n    return this.apply(function () {\n      return f(value);\n    });\n  } else {\n    event = this;\n    return this.apply(function () {\n      return f(event.value());\n    });\n  }\n};\n\nNext.prototype.apply = function (value) {\n  return new Next(value);\n};\nNext.prototype.filter = function (f) {\n  return f(this.value());\n};\nNext.prototype.toString = function () {\n  return _.toString(this.value());\n};\nNext.prototype.log = function () {\n  return this.value();\n};\nNext.prototype._isNext = true;\n\nfunction Initial(valueF, eager) {\n  if (!(this instanceof Initial)) {\n    return new Initial(valueF, eager);\n  }\n  Next.call(this, valueF, eager);\n}\n\ninherit(Initial, Next);\nInitial.prototype._isInitial = true;\nInitial.prototype.isInitial = function () {\n  return true;\n};\nInitial.prototype.isNext = function () {\n  return false;\n};\nInitial.prototype.apply = function (value) {\n  return new Initial(value);\n};\nInitial.prototype.toNext = function () {\n  return new Next(this);\n};\n\nfunction End() {\n  if (!(this instanceof End)) {\n    return new End();\n  }\n  Event.call(this);\n}\n\ninherit(End, Event);\nEnd.prototype.isEnd = function () {\n  return true;\n};\nEnd.prototype.fmap = function () {\n  return this;\n};\nEnd.prototype.apply = function () {\n  return this;\n};\nEnd.prototype.toString = function () {\n  return \"<end>\";\n};\n\nfunction Error(error) {\n  if (!(this instanceof Error)) {\n    return new Error(error);\n  }\n  this.error = error;\n  Event.call(this);\n}\n\ninherit(Error, Event);\nError.prototype.isError = function () {\n  return true;\n};\nError.prototype.fmap = function () {\n  return this;\n};\nError.prototype.apply = function () {\n  return this;\n};\nError.prototype.toString = function () {\n  return \"<error> \" + _.toString(this.error);\n};\n\nBacon.Event = Event;\nBacon.Initial = Initial;\nBacon.Next = Next;\nBacon.End = End;\nBacon.Error = Error;\n\nvar initialEvent = function (value) {\n  return new Initial(value, true);\n};\nvar nextEvent = function (value) {\n  return new Next(value, true);\n};\nvar endEvent = function () {\n  return new End();\n};\nvar toEvent = function (x) {\n  if (x && x._isEvent) {\n    return x;\n  } else {\n    return nextEvent(x);\n  }\n};\n\nvar idCounter = 0;\nvar registerObs = function () {};\n\nfunction Observable(desc) {\n  this.desc = desc;\n  this.id = ++idCounter;\n  this.initialDesc = this.desc;\n}\n\nextend(Observable.prototype, {\n  _isObservable: true,\n\n  subscribe: function (sink) {\n    return UpdateBarrier.wrappedSubscribe(this, sink);\n  },\n\n  subscribeInternal: function (sink) {\n    return this.dispatcher.subscribe(sink);\n  },\n\n  onValue: function () {\n    var f = makeFunctionArgs(arguments);\n    return this.subscribe(function (event) {\n      if (event.hasValue()) {\n        return f(event.value());\n      }\n    });\n  },\n\n  onValues: function (f) {\n    return this.onValue(function (args) {\n      return f.apply(undefined, args);\n    });\n  },\n\n  onError: function () {\n    var f = makeFunctionArgs(arguments);\n    return this.subscribe(function (event) {\n      if (event.isError()) {\n        return f(event.error);\n      }\n    });\n  },\n\n  onEnd: function () {\n    var f = makeFunctionArgs(arguments);\n    return this.subscribe(function (event) {\n      if (event.isEnd()) {\n        return f();\n      }\n    });\n  },\n\n  name: function (name) {\n    this._name = name;\n    return this;\n  },\n\n  withDescription: function () {\n    this.desc = describe.apply(undefined, arguments);\n    return this;\n  },\n\n  toString: function () {\n    if (this._name) {\n      return this._name;\n    } else {\n      return this.desc.toString();\n    }\n  },\n\n  deps: function () {\n    return this.desc.deps();\n  },\n\n  internalDeps: function () {\n    return this.initialDesc.deps();\n  }\n});\n\nObservable.prototype.assign = Observable.prototype.onValue;\nObservable.prototype.forEach = Observable.prototype.onValue;\nObservable.prototype.inspect = Observable.prototype.toString;\n\nBacon.Observable = Observable;\n\nfunction CompositeUnsubscribe() {\n  var ss = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n  this.unsubscribe = _.bind(this.unsubscribe, this);\n  this.unsubscribed = false;\n  this.subscriptions = [];\n  this.starting = [];\n  for (var i = 0, s; i < ss.length; i++) {\n    s = ss[i];\n    this.add(s);\n  }\n}\n\nextend(CompositeUnsubscribe.prototype, {\n  add: function (subscription) {\n    var _this2 = this;\n\n    if (this.unsubscribed) {\n      return;\n    }\n    var ended = false;\n    var unsub = nop;\n    this.starting.push(subscription);\n    var unsubMe = function () {\n      if (_this2.unsubscribed) {\n        return;\n      }\n      ended = true;\n      _this2.remove(unsub);\n      return _.remove(subscription, _this2.starting);\n    };\n    unsub = subscription(this.unsubscribe, unsubMe);\n    if (!(this.unsubscribed || ended)) {\n      this.subscriptions.push(unsub);\n    } else {\n      unsub();\n    }\n    _.remove(subscription, this.starting);\n    return unsub;\n  },\n\n  remove: function (unsub) {\n    if (this.unsubscribed) {\n      return;\n    }\n    if (_.remove(unsub, this.subscriptions) !== undefined) {\n      return unsub();\n    }\n  },\n\n  unsubscribe: function () {\n    if (this.unsubscribed) {\n      return;\n    }\n    this.unsubscribed = true;\n    var iterable = this.subscriptions;\n    for (var i = 0; i < iterable.length; i++) {\n      iterable[i]();\n    }\n    this.subscriptions = [];\n    this.starting = [];\n    return [];\n  },\n\n  count: function () {\n    if (this.unsubscribed) {\n      return 0;\n    }\n    return this.subscriptions.length + this.starting.length;\n  },\n\n  empty: function () {\n    return this.count() === 0;\n  }\n});\n\nBacon.CompositeUnsubscribe = CompositeUnsubscribe;\n\nfunction Dispatcher(_subscribe, _handleEvent) {\n  this._subscribe = _subscribe;\n  this._handleEvent = _handleEvent;\n  this.subscribe = _.bind(this.subscribe, this);\n  this.handleEvent = _.bind(this.handleEvent, this);\n  this.pushing = false;\n  this.ended = false;\n  this.prevError = undefined;\n  this.unsubSrc = undefined;\n  this.subscriptions = [];\n  this.queue = [];\n}\n\nDispatcher.prototype.hasSubscribers = function () {\n  return this.subscriptions.length > 0;\n};\n\nDispatcher.prototype.removeSub = function (subscription) {\n  this.subscriptions = _.without(subscription, this.subscriptions);\n  return this.subscriptions;\n};\n\nDispatcher.prototype.push = function (event) {\n  if (event.isEnd()) {\n    this.ended = true;\n  }\n  return UpdateBarrier.inTransaction(event, this, this.pushIt, [event]);\n};\n\nDispatcher.prototype.pushToSubscriptions = function (event) {\n  try {\n    var tmp = this.subscriptions;\n    var len = tmp.length;\n    for (var i = 0; i < len; i++) {\n      var sub = tmp[i];\n      var reply = sub.sink(event);\n      if (reply === Bacon.noMore || event.isEnd()) {\n        this.removeSub(sub);\n      }\n    }\n    return true;\n  } catch (error) {\n    this.pushing = false;\n    this.queue = [];\n    throw error;\n  }\n};\n\nDispatcher.prototype.pushIt = function (event) {\n  if (!this.pushing) {\n    if (event === this.prevError) {\n      return;\n    }\n    if (event.isError()) {\n      this.prevError = event;\n    }\n    this.pushing = true;\n    this.pushToSubscriptions(event);\n    this.pushing = false;\n    while (this.queue.length) {\n      event = this.queue.shift();\n      this.push(event);\n    }\n    if (this.hasSubscribers()) {\n      return Bacon.more;\n    } else {\n      this.unsubscribeFromSource();\n      return Bacon.noMore;\n    }\n  } else {\n    this.queue.push(event);\n    return Bacon.more;\n  }\n};\n\nDispatcher.prototype.handleEvent = function (event) {\n  if (this._handleEvent) {\n    return this._handleEvent(event);\n  } else {\n    return this.push(event);\n  }\n};\n\nDispatcher.prototype.unsubscribeFromSource = function () {\n  if (this.unsubSrc) {\n    this.unsubSrc();\n  }\n  this.unsubSrc = undefined;\n};\n\nDispatcher.prototype.subscribe = function (sink) {\n  var subscription;\n  if (this.ended) {\n    sink(endEvent());\n    return nop;\n  } else {\n    assertFunction(sink);\n    subscription = {\n      sink: sink\n    };\n    this.subscriptions.push(subscription);\n    if (this.subscriptions.length === 1) {\n      this.unsubSrc = this._subscribe(this.handleEvent);\n      assertFunction(this.unsubSrc);\n    }\n    return (function (_this) {\n      return function () {\n        _this.removeSub(subscription);\n        if (!_this.hasSubscribers()) {\n          return _this.unsubscribeFromSource();\n        }\n      };\n    })(this);\n  }\n};\n\nBacon.Dispatcher = Dispatcher;\n\nfunction EventStream(desc, subscribe, handler) {\n  if (!(this instanceof EventStream)) {\n    return new EventStream(desc, subscribe, handler);\n  }\n  if (_.isFunction(desc)) {\n    handler = subscribe;\n    subscribe = desc;\n    desc = Desc.empty;\n  }\n  Observable.call(this, desc);\n  assertFunction(subscribe);\n  this.dispatcher = new Dispatcher(subscribe, handler);\n  registerObs(this);\n}\n\ninherit(EventStream, Observable);\nextend(EventStream.prototype, {\n  _isEventStream: true,\n\n  toProperty: function (initValue_) {\n    var initValue = arguments.length === 0 ? None : toOption(function () {\n      return initValue_;\n    });\n    var disp = this.dispatcher;\n    var desc = new Bacon.Desc(this, \"toProperty\", [initValue_]);\n    return new Property(desc, function (sink) {\n      var initSent = false;\n      var subbed = false;\n      var unsub = nop;\n      var reply = Bacon.more;\n      var sendInit = function () {\n        if (!initSent) {\n          return initValue.forEach(function (value) {\n            initSent = true;\n            reply = sink(new Initial(value));\n            if (reply === Bacon.noMore) {\n              unsub();\n              unsub = nop;\n              return nop;\n            }\n          });\n        }\n      };\n\n      unsub = disp.subscribe(function (event) {\n        if (event.hasValue()) {\n          if (event.isInitial() && !subbed) {\n            initValue = new Some(function () {\n              return event.value();\n            });\n            return Bacon.more;\n          } else {\n            if (!event.isInitial()) {\n              sendInit();\n            }\n            initSent = true;\n            initValue = new Some(event);\n            return sink(event);\n          }\n        } else {\n          if (event.isEnd()) {\n            reply = sendInit();\n          }\n          if (reply !== Bacon.noMore) {\n            return sink(event);\n          }\n        }\n      });\n      subbed = true;\n      sendInit();\n      return unsub;\n    });\n  },\n\n  toEventStream: function () {\n    return this;\n  },\n\n  withHandler: function (handler) {\n    return new EventStream(new Bacon.Desc(this, \"withHandler\", [handler]), this.dispatcher.subscribe, handler);\n  }\n});\n\nBacon.EventStream = EventStream;\n\nBacon.never = function () {\n  return new EventStream(describe(Bacon, \"never\"), function (sink) {\n    sink(endEvent());\n    return nop;\n  });\n};\n\nBacon.when = function () {\n  if (arguments.length === 0) {\n    return Bacon.never();\n  }\n  var len = arguments.length;\n  var usage = \"when: expecting arguments in the form (Observable+,function)+\";\n\n  assert(usage, len % 2 === 0);\n  var sources = [];\n  var pats = [];\n  var i = 0;\n  var patterns = [];\n  while (i < len) {\n    patterns[i] = arguments[i];\n    patterns[i + 1] = arguments[i + 1];\n    var patSources = _.toArray(arguments[i]);\n    var f = constantToFunction(arguments[i + 1]);\n    var pat = { f: f, ixs: [] };\n    var triggerFound = false;\n    for (var j = 0, s; j < patSources.length; j++) {\n      s = patSources[j];\n      var index = _.indexOf(sources, s);\n      if (!triggerFound) {\n        triggerFound = Source.isTrigger(s);\n      }\n      if (index < 0) {\n        sources.push(s);\n        index = sources.length - 1;\n      }\n      for (var k = 0, ix; k < pat.ixs.length; k++) {\n        ix = pat.ixs[k];\n        if (ix.index === index) {\n          ix.count++;\n        }\n      }\n      pat.ixs.push({ index: index, count: 1 });\n    }\n\n    assert(\"At least one EventStream required\", triggerFound || !patSources.length);\n\n    if (patSources.length > 0) {\n      pats.push(pat);\n    }\n    i = i + 2;\n  }\n\n  if (!sources.length) {\n    return Bacon.never();\n  }\n\n  sources = _.map(Source.fromObservable, sources);\n  var needsBarrier = _.any(sources, function (s) {\n    return s.flatten;\n  }) && containsDuplicateDeps(_.map(function (s) {\n    return s.obs;\n  }, sources));\n\n  var desc = new Bacon.Desc(Bacon, \"when\", patterns);\n  var resultStream = new EventStream(desc, function (sink) {\n    var triggers = [];\n    var ends = false;\n    var match = function (p) {\n      for (var i1 = 0, i; i1 < p.ixs.length; i1++) {\n        i = p.ixs[i1];\n        if (!sources[i.index].hasAtLeast(i.count)) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var cannotSync = function (source) {\n      return !source.sync || source.ended;\n    };\n    var cannotMatch = function (p) {\n      for (var i1 = 0, i; i1 < p.ixs.length; i1++) {\n        i = p.ixs[i1];\n        if (!sources[i.index].mayHave(i.count)) {\n          return true;\n        }\n      }\n    };\n    var nonFlattened = function (trigger) {\n      return !trigger.source.flatten;\n    };\n    var part = function (source) {\n      return function (unsubAll) {\n        var flushLater = function () {\n          return UpdateBarrier.whenDoneWith(resultStream, flush);\n        };\n        var flushWhileTriggers = function () {\n          if (triggers.length > 0) {\n            var reply = Bacon.more;\n            var trigger = triggers.pop();\n            for (var i1 = 0, p; i1 < pats.length; i1++) {\n              p = pats[i1];\n              if (match(p)) {\n                var events = (function () {\n                  var result = [];\n                  for (var i2 = 0, i; i2 < p.ixs.length; i2++) {\n                    i = p.ixs[i2];\n                    result.push(sources[i.index].consume());\n                  }\n                  return result;\n                })();\n                reply = sink(trigger.e.apply(function () {\n                  var _p;\n\n                  var values = (function () {\n                    var result = [];\n                    for (var i2 = 0, event; i2 < events.length; i2++) {\n                      event = events[i2];\n                      result.push(event.value());\n                    }\n                    return result;\n                  })();\n\n                  return (_p = p).f.apply(_p, values);\n                }));\n                if (triggers.length) {\n                  triggers = _.filter(nonFlattened, triggers);\n                }\n                if (reply === Bacon.noMore) {\n                  return reply;\n                } else {\n                  return flushWhileTriggers();\n                }\n              }\n            }\n          } else {\n            return Bacon.more;\n          }\n        };\n        var flush = function () {\n          var reply = flushWhileTriggers();\n          if (ends) {\n            if (_.all(sources, cannotSync) || _.all(pats, cannotMatch)) {\n              reply = Bacon.noMore;\n              sink(endEvent());\n            }\n          }\n          if (reply === Bacon.noMore) {\n            unsubAll();\n          }\n\n          return reply;\n        };\n        return source.subscribe(function (e) {\n          if (e.isEnd()) {\n            ends = true;\n            source.markEnded();\n            flushLater();\n          } else if (e.isError()) {\n            var reply = sink(e);\n          } else {\n            source.push(e);\n            if (source.sync) {\n              triggers.push({ source: source, e: e });\n              if (needsBarrier || UpdateBarrier.hasWaiters()) {\n                flushLater();\n              } else {\n                flush();\n              }\n            }\n          }\n          if (reply === Bacon.noMore) {\n            unsubAll();\n          }\n          return reply || Bacon.more;\n        });\n      };\n    };\n\n    return new Bacon.CompositeUnsubscribe((function () {\n      var result = [];\n      for (var i1 = 0, s; i1 < sources.length; i1++) {\n        s = sources[i1];\n        result.push(part(s));\n      }\n      return result;\n    })()).unsubscribe;\n  });\n  return resultStream;\n};\n\nvar containsDuplicateDeps = function (observables) {\n  var state = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n  var checkObservable = function (obs) {\n    if (_.contains(state, obs)) {\n      return true;\n    } else {\n      var deps = obs.internalDeps();\n      if (deps.length) {\n        state.push(obs);\n        return _.any(deps, checkObservable);\n      } else {\n        state.push(obs);\n        return false;\n      }\n    }\n  };\n\n  return _.any(observables, checkObservable);\n};\n\nvar constantToFunction = function (f) {\n  if (_.isFunction(f)) {\n    return f;\n  } else {\n    return _.always(f);\n  }\n};\n\nBacon.groupSimultaneous = function () {\n  for (var _len5 = arguments.length, streams = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    streams[_key5] = arguments[_key5];\n  }\n\n  if (streams.length === 1 && isArray(streams[0])) {\n    streams = streams[0];\n  }\n  var sources = (function () {\n    var result = [];\n    for (var i = 0, s; i < streams.length; i++) {\n      s = streams[i];\n      result.push(new BufferingSource(s));\n    }\n    return result;\n  })();\n  return withDesc(new Bacon.Desc(Bacon, \"groupSimultaneous\", streams), Bacon.when(sources, function () {\n    for (var _len6 = arguments.length, xs = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      xs[_key6] = arguments[_key6];\n    }\n\n    return xs;\n  }));\n};\n\nfunction PropertyDispatcher(property, subscribe, handleEvent) {\n  Dispatcher.call(this, subscribe, handleEvent);\n  this.property = property;\n  this.subscribe = _.bind(this.subscribe, this);\n  this.current = None;\n  this.currentValueRootId = undefined;\n  this.propertyEnded = false;\n}\n\ninherit(PropertyDispatcher, Dispatcher);\nextend(PropertyDispatcher.prototype, {\n  push: function (event) {\n    if (event.isEnd()) {\n      this.propertyEnded = true;\n    }\n    if (event.hasValue()) {\n      this.current = new Some(event);\n      this.currentValueRootId = UpdateBarrier.currentEventId();\n    }\n    return Dispatcher.prototype.push.call(this, event);\n  },\n\n  maybeSubSource: function (sink, reply) {\n    if (reply === Bacon.noMore) {\n      return nop;\n    } else if (this.propertyEnded) {\n      sink(endEvent());\n      return nop;\n    } else {\n      return Dispatcher.prototype.subscribe.call(this, sink);\n    }\n  },\n\n  subscribe: function (sink) {\n    var _this3 = this;\n\n    var initSent = false;\n\n    var reply = Bacon.more;\n\n    if (this.current.isDefined && (this.hasSubscribers() || this.propertyEnded)) {\n      var dispatchingId = UpdateBarrier.currentEventId();\n      var valId = this.currentValueRootId;\n      if (!this.propertyEnded && valId && dispatchingId && dispatchingId !== valId) {\n        UpdateBarrier.whenDoneWith(this.property, function () {\n          if (_this3.currentValueRootId === valId) {\n            return sink(initialEvent(_this3.current.get().value()));\n          }\n        });\n\n        return this.maybeSubSource(sink, reply);\n      } else {\n        UpdateBarrier.inTransaction(undefined, this, function () {\n          reply = sink(initialEvent(this.current.get().value()));\n          return reply;\n        }, []);\n        return this.maybeSubSource(sink, reply);\n      }\n    } else {\n      return this.maybeSubSource(sink, reply);\n    }\n  }\n});\n\nfunction Property(desc, subscribe, handler) {\n  Observable.call(this, desc);\n  assertFunction(subscribe);\n  this.dispatcher = new PropertyDispatcher(this, subscribe, handler);\n  registerObs(this);\n}\n\ninherit(Property, Observable);\nextend(Property.prototype, {\n  _isProperty: true,\n\n  changes: function () {\n    var _this4 = this;\n\n    return new EventStream(new Bacon.Desc(this, \"changes\", []), function (sink) {\n      return _this4.dispatcher.subscribe(function (event) {\n        if (!event.isInitial()) {\n          return sink(event);\n        }\n      });\n    });\n  },\n\n  withHandler: function (handler) {\n    return new Property(new Bacon.Desc(this, \"withHandler\", [handler]), this.dispatcher.subscribe, handler);\n  },\n\n  toProperty: function () {\n    assertNoArguments(arguments);\n    return this;\n  },\n\n  toEventStream: function () {\n    var _this5 = this;\n\n    return new EventStream(new Bacon.Desc(this, \"toEventStream\", []), function (sink) {\n      return _this5.dispatcher.subscribe(function (event) {\n        if (event.isInitial()) {\n          event = event.toNext();\n        }\n        return sink(event);\n      });\n    });\n  }\n});\n\nBacon.Property = Property;\n\nBacon.constant = function (value) {\n  return new Property(new Bacon.Desc(Bacon, \"constant\", [value]), function (sink) {\n    sink(initialEvent(value));\n    sink(endEvent());\n    return nop;\n  });\n};\n\nBacon.fromBinder = function (binder) {\n  var eventTransformer = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];\n\n  var desc = new Bacon.Desc(Bacon, \"fromBinder\", [binder, eventTransformer]);\n  return new EventStream(desc, function (sink) {\n    var unbound = false;\n    var shouldUnbind = false;\n    var unbind = function () {\n      if (!unbound) {\n        if (typeof unbinder !== \"undefined\" && unbinder !== null) {\n          unbinder();\n          return unbound = true;\n        } else {\n          return shouldUnbind = true;\n        }\n      }\n    };\n    var unbinder = binder(function () {\n      var ref;\n\n      for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      var value = eventTransformer.apply(this, args);\n      if (!(isArray(value) && ((ref = _.last(value)) != null ? ref._isEvent : undefined))) {\n        value = [value];\n      }\n      var reply = Bacon.more;\n      for (var i = 0, event; i < value.length; i++) {\n        event = value[i];\n        reply = sink(event = toEvent(event));\n        if (reply === Bacon.noMore || event.isEnd()) {\n          unbind();\n          return reply;\n        }\n      }\n      return reply;\n    });\n    if (shouldUnbind) {\n      unbind();\n    }\n    return unbind;\n  });\n};\n\nBacon.Observable.prototype.map = function (p) {\n  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n    args[_key8 - 1] = arguments[_key8];\n  }\n\n  return convertArgsToFunction(this, p, args, function (f) {\n    return withDesc(new Bacon.Desc(this, \"map\", [f]), this.withHandler(function (event) {\n      return this.push(event.fmap(f));\n    }));\n  });\n};\n\nvar argumentsToObservables = function (args) {\n  if (isArray(args[0])) {\n    return args[0];\n  } else {\n    return Array.prototype.slice.call(args);\n  }\n};\n\nvar argumentsToObservablesAndFunction = function (args) {\n  if (_.isFunction(args[0])) {\n    return [argumentsToObservables(Array.prototype.slice.call(args, 1)), args[0]];\n  } else {\n    return [argumentsToObservables(Array.prototype.slice.call(args, 0, args.length - 1)), _.last(args)];\n  }\n};\n\nBacon.combineAsArray = function () {\n  var streams = argumentsToObservables(arguments);\n  if (streams.length) {\n    var sources = [];\n    for (var i = 0; i < streams.length; i++) {\n      var stream = isObservable(streams[i]) ? streams[i] : Bacon.constant(streams[i]);\n      sources.push(new Source(stream, true));\n    }\n    return withDesc(new Bacon.Desc(Bacon, \"combineAsArray\", streams), Bacon.when(sources, function () {\n      for (var _len9 = arguments.length, xs = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        xs[_key9] = arguments[_key9];\n      }\n\n      return xs;\n    }).toProperty());\n  } else {\n    return Bacon.constant([]);\n  }\n};\n\nBacon.onValues = function () {\n  return Bacon.combineAsArray(Array.prototype.slice.call(arguments, 0, arguments.length - 1)).onValues(arguments[arguments.length - 1]);\n};\n\nBacon.combineWith = function () {\n  var _argumentsToObservablesAndFunction = argumentsToObservablesAndFunction(arguments);\n\n  var streams = _argumentsToObservablesAndFunction[0];\n  var f = _argumentsToObservablesAndFunction[1];\n\n  var desc = new Bacon.Desc(Bacon, \"combineWith\", [f].concat(streams));\n  return withDesc(desc, Bacon.combineAsArray(streams).map(function (values) {\n    return f.apply(undefined, values);\n  }));\n};\n\nBacon.Observable.prototype.combine = function (other, f) {\n  var combinator = toCombinator(f);\n  var desc = new Bacon.Desc(this, \"combine\", [other, f]);\n  return withDesc(desc, Bacon.combineAsArray(this, other).map(function (values) {\n    return combinator(values[0], values[1]);\n  }));\n};\n\nBacon.Observable.prototype.withStateMachine = function (initState, f) {\n  var state = initState;\n  var desc = new Bacon.Desc(this, \"withStateMachine\", [initState, f]);\n  return withDesc(desc, this.withHandler(function (event) {\n    var fromF = f(state, event);\n    var newState = fromF[0];\n    var outputs = fromF[1];\n\n    state = newState;\n    var reply = Bacon.more;\n    for (var i = 0, output; i < outputs.length; i++) {\n      output = outputs[i];\n      reply = this.push(output);\n      if (reply === Bacon.noMore) {\n        return reply;\n      }\n    }\n    return reply;\n  }));\n};\n\nvar equals = function (a, b) {\n  return a === b;\n};\n\nvar isNone = function (object) {\n  return typeof object !== \"undefined\" && object !== null ? object._isNone : false;\n};\n\nBacon.Observable.prototype.skipDuplicates = function () {\n  var isEqual = arguments.length <= 0 || arguments[0] === undefined ? equals : arguments[0];\n\n  var desc = new Bacon.Desc(this, \"skipDuplicates\", []);\n  return withDesc(desc, this.withStateMachine(None, function (prev, event) {\n    if (!event.hasValue()) {\n      return [prev, [event]];\n    } else if (event.isInitial() || isNone(prev) || !isEqual(prev.get(), event.value())) {\n      return [new Some(event.value()), [event]];\n    } else {\n      return [prev, []];\n    }\n  }));\n};\n\nBacon.Observable.prototype.awaiting = function (other) {\n  var desc = new Bacon.Desc(this, \"awaiting\", [other]);\n  return withDesc(desc, Bacon.groupSimultaneous(this, other).map(function (values) {\n    return values[1].length === 0;\n  }).toProperty(false).skipDuplicates());\n};\n\nBacon.Observable.prototype.not = function () {\n  return withDesc(new Bacon.Desc(this, \"not\", []), this.map(function (x) {\n    return !x;\n  }));\n};\n\nBacon.Property.prototype.and = function (other) {\n  return withDesc(new Bacon.Desc(this, \"and\", [other]), this.combine(other, function (x, y) {\n    return x && y;\n  }));\n};\n\nBacon.Property.prototype.or = function (other) {\n  return withDesc(new Bacon.Desc(this, \"or\", [other]), this.combine(other, function (x, y) {\n    return x || y;\n  }));\n};\n\nBacon.scheduler = {\n  setTimeout: function (f, d) {\n    return setTimeout(f, d);\n  },\n  setInterval: function (f, i) {\n    return setInterval(f, i);\n  },\n  clearInterval: function (id) {\n    return clearInterval(id);\n  },\n  clearTimeout: function (id) {\n    return clearTimeout(id);\n  },\n  now: function () {\n    return new Date().getTime();\n  }\n};\n\nBacon.EventStream.prototype.bufferWithTime = function (delay) {\n  return withDesc(new Bacon.Desc(this, \"bufferWithTime\", [delay]), this.bufferWithTimeOrCount(delay, Number.MAX_VALUE));\n};\n\nBacon.EventStream.prototype.bufferWithCount = function (count) {\n  return withDesc(new Bacon.Desc(this, \"bufferWithCount\", [count]), this.bufferWithTimeOrCount(undefined, count));\n};\n\nBacon.EventStream.prototype.bufferWithTimeOrCount = function (delay, count) {\n  var flushOrSchedule = function (buffer) {\n    if (buffer.values.length === count) {\n      return buffer.flush();\n    } else if (delay !== undefined) {\n      return buffer.schedule();\n    }\n  };\n  var desc = new Bacon.Desc(this, \"bufferWithTimeOrCount\", [delay, count]);\n  return withDesc(desc, this.buffer(delay, flushOrSchedule, flushOrSchedule));\n};\n\nBacon.EventStream.prototype.buffer = function (delay) {\n  var onInput = arguments.length <= 1 || arguments[1] === undefined ? nop : arguments[1];\n  var onFlush = arguments.length <= 2 || arguments[2] === undefined ? nop : arguments[2];\n\n  var buffer = {\n    scheduled: null,\n    end: undefined,\n    values: [],\n    flush: function () {\n      if (this.scheduled) {\n        Bacon.scheduler.clearTimeout(this.scheduled);\n        this.scheduled = null;\n      }\n      if (this.values.length > 0) {\n        var valuesToPush = this.values;\n        this.values = [];\n        var reply = this.push(nextEvent(valuesToPush));\n        if (this.end != null) {\n          return this.push(this.end);\n        } else if (reply !== Bacon.noMore) {\n          return onFlush(this);\n        }\n      } else {\n        if (this.end != null) {\n          return this.push(this.end);\n        }\n      }\n    },\n    schedule: function () {\n      var _this6 = this;\n\n      if (!this.scheduled) {\n        return this.scheduled = delay(function () {\n          return _this6.flush();\n        });\n      }\n    }\n  };\n  var reply = Bacon.more;\n  if (!_.isFunction(delay)) {\n    var delayMs = delay;\n    delay = function (f) {\n      return Bacon.scheduler.setTimeout(f, delayMs);\n    };\n  }\n  return withDesc(new Bacon.Desc(this, \"buffer\", []), this.withHandler(function (event) {\n    var _this7 = this;\n\n    buffer.push = function (event) {\n      return _this7.push(event);\n    };\n    if (event.isError()) {\n      reply = this.push(event);\n    } else if (event.isEnd()) {\n      buffer.end = event;\n      if (!buffer.scheduled) {\n        buffer.flush();\n      }\n    } else {\n      buffer.values.push(event.value());\n\n      onInput(buffer);\n    }\n    return reply;\n  }));\n};\n\nBacon.Observable.prototype.filter = function (f) {\n  assertObservableIsProperty(f);\n\n  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {\n    args[_key10 - 1] = arguments[_key10];\n  }\n\n  return convertArgsToFunction(this, f, args, function (f) {\n    return withDesc(new Bacon.Desc(this, \"filter\", [f]), this.withHandler(function (event) {\n      if (event.filter(f)) {\n        return this.push(event);\n      } else {\n        return Bacon.more;\n      }\n    }));\n  });\n};\n\nBacon.once = function (value) {\n  return new EventStream(new Desc(Bacon, \"once\", [value]), function (sink) {\n    sink(toEvent(value));\n    sink(endEvent());\n    return nop;\n  });\n};\n\nBacon.EventStream.prototype.concat = function (right) {\n  var left = this;\n  return new EventStream(new Bacon.Desc(left, \"concat\", [right]), function (sink) {\n    var unsubRight = nop;\n    var unsubLeft = left.dispatcher.subscribe(function (e) {\n      if (e.isEnd()) {\n        unsubRight = right.dispatcher.subscribe(sink);\n        return unsubRight;\n      } else {\n        return sink(e);\n      }\n    });\n    return function () {\n      return unsubLeft(), unsubRight();\n    };\n  });\n};\n\nBacon.Observable.prototype.flatMap = function () {\n  return flatMap_(this, makeSpawner(arguments));\n};\n\nBacon.Observable.prototype.flatMapFirst = function () {\n  return flatMap_(this, makeSpawner(arguments), true);\n};\n\nvar makeSpawner = function (args) {\n  if (args.length === 1 && isObservable(args[0])) {\n    return _.always(args[0]);\n  } else {\n    return makeFunctionArgs(args);\n  }\n};\n\nvar makeObservable = function (x) {\n  if (isObservable(x)) {\n    return x;\n  } else {\n    return Bacon.once(x);\n  }\n};\n\nvar flatMap_ = function (root, f, firstOnly, limit) {\n  var rootDep = [root];\n  var childDeps = [];\n  var desc = new Bacon.Desc(root, \"flatMap\" + (firstOnly ? \"First\" : \"\"), [f]);\n  var result = new EventStream(desc, function (sink) {\n    var composite = new CompositeUnsubscribe();\n    var queue = [];\n    var spawn = function (event) {\n      var child = makeObservable(f(event.value()));\n      childDeps.push(child);\n      return composite.add(function (unsubAll, unsubMe) {\n        return child.dispatcher.subscribe(function (event) {\n          if (event.isEnd()) {\n            _.remove(child, childDeps);\n            checkQueue();\n            checkEnd(unsubMe);\n            return Bacon.noMore;\n          } else {\n            if (typeof event !== \"undefined\" && event !== null ? event._isInitial : undefined) {\n              event = event.toNext();\n            }\n            var reply = sink(event);\n            if (reply === Bacon.noMore) {\n              unsubAll();\n            }\n            return reply;\n          }\n        });\n      });\n    };\n    var checkQueue = function () {\n      var event = queue.shift();\n      if (event) {\n        return spawn(event);\n      }\n    };\n    var checkEnd = function (unsub) {\n      unsub();\n      if (composite.empty()) {\n        return sink(endEvent());\n      }\n    };\n    composite.add(function (__, unsubRoot) {\n      return root.dispatcher.subscribe(function (event) {\n        if (event.isEnd()) {\n          return checkEnd(unsubRoot);\n        } else if (event.isError()) {\n          return sink(event);\n        } else if (firstOnly && composite.count() > 1) {\n          return Bacon.more;\n        } else {\n          if (composite.unsubscribed) {\n            return Bacon.noMore;\n          }\n          if (limit && composite.count() > limit) {\n            return queue.push(event);\n          } else {\n            return spawn(event);\n          }\n        }\n      });\n    });\n    return composite.unsubscribe;\n  });\n  result.internalDeps = function () {\n    if (childDeps.length) {\n      return rootDep.concat(childDeps);\n    } else {\n      return rootDep;\n    }\n  };\n  return result;\n};\n\nBacon.Observable.prototype.flatMapWithConcurrencyLimit = function (limit) {\n  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {\n    args[_key11 - 1] = arguments[_key11];\n  }\n\n  var desc = new Bacon.Desc(this, \"flatMapWithConcurrencyLimit\", [limit].concat(args));\n  return withDesc(desc, flatMap_(this, makeSpawner(args), false, limit));\n};\n\nBacon.Observable.prototype.flatMapConcat = function () {\n  var desc = new Bacon.Desc(this, \"flatMapConcat\", Array.prototype.slice.call(arguments, 0));\n  return withDesc(desc, this.flatMapWithConcurrencyLimit.apply(this, [1].concat(_slice.call(arguments))));\n};\n\nBacon.later = function (delay, value) {\n  return withDesc(new Bacon.Desc(Bacon, \"later\", [delay, value]), Bacon.fromBinder(function (sink) {\n    var sender = function () {\n      return sink([value, endEvent()]);\n    };\n    var id = Bacon.scheduler.setTimeout(sender, delay);\n    return function () {\n      return Bacon.scheduler.clearTimeout(id);\n    };\n  }));\n};\n\nBacon.Observable.prototype.bufferingThrottle = function (minimumInterval) {\n  var desc = new Bacon.Desc(this, \"bufferingThrottle\", [minimumInterval]);\n  return withDesc(desc, this.flatMapConcat(function (x) {\n    return Bacon.once(x).concat(Bacon.later(minimumInterval).filter(false));\n  }));\n};\n\nBacon.Property.prototype.bufferingThrottle = function () {\n  return Bacon.Observable.prototype.bufferingThrottle.apply(this, arguments).toProperty();\n};\n\nfunction Bus() {\n  if (!(this instanceof Bus)) {\n    return new Bus();\n  }\n\n  this.unsubAll = _.bind(this.unsubAll, this);\n  this.subscribeAll = _.bind(this.subscribeAll, this);\n  this.guardedSink = _.bind(this.guardedSink, this);\n\n  this.sink = undefined;\n  this.subscriptions = [];\n  this.ended = false;\n  EventStream.call(this, new Bacon.Desc(Bacon, \"Bus\", []), this.subscribeAll);\n}\n\ninherit(Bus, EventStream);\nextend(Bus.prototype, {\n  unsubAll: function () {\n    var iterable = this.subscriptions;\n    for (var i = 0, sub; i < iterable.length; i++) {\n      sub = iterable[i];\n      if (typeof sub.unsub === \"function\") {\n        sub.unsub();\n      }\n    }\n  },\n\n  subscribeAll: function (newSink) {\n    if (this.ended) {\n      newSink(endEvent());\n    } else {\n      this.sink = newSink;\n      var iterable = cloneArray(this.subscriptions);\n      for (var i = 0, subscription; i < iterable.length; i++) {\n        subscription = iterable[i];\n        this.subscribeInput(subscription);\n      }\n    }\n    return this.unsubAll;\n  },\n\n  guardedSink: function (input) {\n    var _this8 = this;\n\n    return function (event) {\n      if (event.isEnd()) {\n        _this8.unsubscribeInput(input);\n        return Bacon.noMore;\n      } else {\n        return _this8.sink(event);\n      }\n    };\n  },\n\n  subscribeInput: function (subscription) {\n    subscription.unsub = subscription.input.dispatcher.subscribe(this.guardedSink(subscription.input));\n    return subscription.unsub;\n  },\n\n  unsubscribeInput: function (input) {\n    var iterable = this.subscriptions;\n    for (var i = 0, sub; i < iterable.length; i++) {\n      sub = iterable[i];\n      if (sub.input === input) {\n        if (typeof sub.unsub === \"function\") {\n          sub.unsub();\n        }\n        this.subscriptions.splice(i, 1);\n        return;\n      }\n    }\n  },\n\n  plug: function (input) {\n    var _this9 = this;\n\n    assertObservable(input);\n    if (this.ended) {\n      return;\n    }\n    var sub = { input: input };\n    this.subscriptions.push(sub);\n    if (typeof this.sink !== \"undefined\") {\n      this.subscribeInput(sub);\n    }\n    return function () {\n      return _this9.unsubscribeInput(input);\n    };\n  },\n\n  end: function () {\n    this.ended = true;\n    this.unsubAll();\n    if (typeof this.sink === \"function\") {\n      return this.sink(endEvent());\n    }\n  },\n\n  push: function (value) {\n    if (!this.ended && typeof this.sink === \"function\") {\n      return this.sink(nextEvent(value));\n    }\n  },\n\n  error: function (error) {\n    if (typeof this.sink === \"function\") {\n      return this.sink(new Error(error));\n    }\n  }\n});\n\nBacon.Bus = Bus;\n\nvar liftCallback = function (desc, wrapped) {\n  return withMethodCallSupport(function (f) {\n    var stream = partiallyApplied(wrapped, [function (values, callback) {\n      return f.apply(undefined, values.concat([callback]));\n    }]);\n\n    for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {\n      args[_key12 - 1] = arguments[_key12];\n    }\n\n    return withDesc(new Bacon.Desc(Bacon, desc, [f].concat(args)), Bacon.combineAsArray(args).flatMap(stream));\n  });\n};\n\nBacon.fromCallback = liftCallback(\"fromCallback\", function (f) {\n  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {\n    args[_key13 - 1] = arguments[_key13];\n  }\n\n  return Bacon.fromBinder(function (handler) {\n    makeFunction(f, args)(handler);\n    return nop;\n  }, function (value) {\n    return [value, endEvent()];\n  });\n});\n\nBacon.fromNodeCallback = liftCallback(\"fromNodeCallback\", function (f) {\n  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {\n    args[_key14 - 1] = arguments[_key14];\n  }\n\n  return Bacon.fromBinder(function (handler) {\n    makeFunction(f, args)(handler);\n    return nop;\n  }, function (error, value) {\n    if (error) {\n      return [new Error(error), endEvent()];\n    }\n    return [value, endEvent()];\n  });\n});\n\nBacon.combineTemplate = function (template) {\n  function current(ctxStack) {\n    return ctxStack[ctxStack.length - 1];\n  }\n  function setValue(ctxStack, key, value) {\n    current(ctxStack)[key] = value;\n    return value;\n  }\n  function applyStreamValue(key, index) {\n    return function (ctxStack, values) {\n      return setValue(ctxStack, key, values[index]);\n    };\n  }\n  function constantValue(key, value) {\n    return function (ctxStack) {\n      return setValue(ctxStack, key, value);\n    };\n  }\n\n  function mkContext(template) {\n    return isArray(template) ? [] : {};\n  }\n\n  function pushContext(key, value) {\n    return function (ctxStack) {\n      var newContext = mkContext(value);\n      setValue(ctxStack, key, newContext);\n      return ctxStack.push(newContext);\n    };\n  }\n\n  function compile(key, value) {\n    if (isObservable(value)) {\n      streams.push(value);\n      return funcs.push(applyStreamValue(key, streams.length - 1));\n    } else if (value && (value.constructor == Object || value.constructor == Array)) {\n      var popContext = function (ctxStack) {\n        return ctxStack.pop();\n      };\n      funcs.push(pushContext(key, value));\n      compileTemplate(value);\n      return funcs.push(popContext);\n    } else {\n      return funcs.push(constantValue(key, value));\n    }\n  }\n\n  function combinator(values) {\n    var rootContext = mkContext(template);\n    var ctxStack = [rootContext];\n    for (var i = 0, f; i < funcs.length; i++) {\n      f = funcs[i];\n      f(ctxStack, values);\n    }\n    return rootContext;\n  }\n\n  function compileTemplate(template) {\n    return _.each(template, compile);\n  }\n\n  var funcs = [];\n  var streams = [];\n\n  compileTemplate(template);\n\n  return withDesc(new Bacon.Desc(Bacon, \"combineTemplate\", [template]), Bacon.combineAsArray(streams).map(combinator));\n};\n\nvar addPropertyInitValueToStream = function (property, stream) {\n  var justInitValue = new EventStream(describe(property, \"justInitValue\"), function (sink) {\n    var value = undefined;\n    var unsub = property.dispatcher.subscribe(function (event) {\n      if (!event.isEnd()) {\n        value = event;\n      }\n      return Bacon.noMore;\n    });\n    UpdateBarrier.whenDoneWith(justInitValue, function () {\n      if (typeof value !== \"undefined\" && value !== null) {\n        sink(value);\n      }\n      return sink(endEvent());\n    });\n    return unsub;\n  });\n  return justInitValue.concat(stream).toProperty();\n};\n\nBacon.Observable.prototype.mapEnd = function () {\n  var f = makeFunctionArgs(arguments);\n  return withDesc(new Bacon.Desc(this, \"mapEnd\", [f]), this.withHandler(function (event) {\n    if (event.isEnd()) {\n      this.push(nextEvent(f(event)));\n      this.push(endEvent());\n      return Bacon.noMore;\n    } else {\n      return this.push(event);\n    }\n  }));\n};\n\nBacon.Observable.prototype.skipErrors = function () {\n  return withDesc(new Bacon.Desc(this, \"skipErrors\", []), this.withHandler(function (event) {\n    if (event.isError()) {\n      return Bacon.more;\n    } else {\n      return this.push(event);\n    }\n  }));\n};\n\nBacon.EventStream.prototype.takeUntil = function (stopper) {\n  var endMarker = {};\n  return withDesc(new Bacon.Desc(this, \"takeUntil\", [stopper]), Bacon.groupSimultaneous(this.mapEnd(endMarker), stopper.skipErrors()).withHandler(function (event) {\n    if (!event.hasValue()) {\n      return this.push(event);\n    } else {\n      var _event$value = event.value();\n\n      var data = _event$value[0];\n      var stopper = _event$value[1];\n\n      if (stopper.length) {\n        return this.push(endEvent());\n      } else {\n        var reply = Bacon.more;\n        for (var i = 0, value; i < data.length; i++) {\n          value = data[i];\n          if (value === endMarker) {\n            reply = this.push(endEvent());\n          } else {\n            reply = this.push(nextEvent(value));\n          }\n        }\n        return reply;\n      }\n    }\n  }));\n};\n\nBacon.Property.prototype.takeUntil = function (stopper) {\n  var changes = this.changes().takeUntil(stopper);\n  return withDesc(new Bacon.Desc(this, \"takeUntil\", [stopper]), addPropertyInitValueToStream(this, changes));\n};\n\nBacon.Observable.prototype.flatMapLatest = function () {\n  var f = makeSpawner(arguments);\n  var stream = this.toEventStream();\n  return withDesc(new Bacon.Desc(this, \"flatMapLatest\", [f]), stream.flatMap(function (value) {\n    return makeObservable(f(value)).takeUntil(stream);\n  }));\n};\n\nBacon.Property.prototype.delayChanges = function (desc, f) {\n  return withDesc(desc, addPropertyInitValueToStream(this, f(this.changes())));\n};\n\nBacon.EventStream.prototype.delay = function (delay) {\n  return withDesc(new Bacon.Desc(this, \"delay\", [delay]), this.flatMap(function (value) {\n    return Bacon.later(delay, value);\n  }));\n};\n\nBacon.Property.prototype.delay = function (delay) {\n  return this.delayChanges(new Bacon.Desc(this, \"delay\", [delay]), function (changes) {\n    return changes.delay(delay);\n  });\n};\n\nBacon.EventStream.prototype.debounce = function (delay) {\n  return withDesc(new Bacon.Desc(this, \"debounce\", [delay]), this.flatMapLatest(function (value) {\n    return Bacon.later(delay, value);\n  }));\n};\n\nBacon.Property.prototype.debounce = function (delay) {\n  return this.delayChanges(new Bacon.Desc(this, \"debounce\", [delay]), function (changes) {\n    return changes.debounce(delay);\n  });\n};\n\nBacon.EventStream.prototype.debounceImmediate = function (delay) {\n  return withDesc(new Bacon.Desc(this, \"debounceImmediate\", [delay]), this.flatMapFirst(function (value) {\n    return Bacon.once(value).concat(Bacon.later(delay).filter(false));\n  }));\n};\n\nBacon.Property.prototype.debounceImmediate = function (delay) {\n  return this.delayChanges(new Bacon.Desc(this, \"debounceImmediate\", [delay]), function (changes) {\n    return changes.debounceImmediate(delay);\n  });\n};\n\nBacon.Observable.prototype.decode = function (cases) {\n  return withDesc(new Bacon.Desc(this, \"decode\", [cases]), this.combine(Bacon.combineTemplate(cases), function (key, values) {\n    return values[key];\n  }));\n};\n\nBacon.Observable.prototype.scan = function (seed, f) {\n  var _this10 = this;\n\n  var resultProperty;\n  f = toCombinator(f);\n  var acc = toOption(seed);\n  var initHandled = false;\n  var subscribe = function (sink) {\n    var initSent = false;\n    var unsub = nop;\n    var reply = Bacon.more;\n    var sendInit = function () {\n      if (!initSent) {\n        return acc.forEach(function (value) {\n          initSent = initHandled = true;\n          reply = sink(new Initial(function () {\n            return value;\n          }));\n          if (reply === Bacon.noMore) {\n            unsub();\n            unsub = nop;\n            return unsub;\n          }\n        });\n      }\n    };\n    unsub = _this10.dispatcher.subscribe(function (event) {\n      if (event.hasValue()) {\n        if (initHandled && event.isInitial()) {\n          return Bacon.more;\n        } else {\n            if (!event.isInitial()) {\n              sendInit();\n            }\n            initSent = initHandled = true;\n            var prev = acc.getOrElse(undefined);\n            var next = f(prev, event.value());\n\n            acc = new Some(next);\n            return sink(event.apply(function () {\n              return next;\n            }));\n          }\n      } else {\n        if (event.isEnd()) {\n          reply = sendInit();\n        }\n        if (reply !== Bacon.noMore) {\n          return sink(event);\n        }\n      }\n    });\n    UpdateBarrier.whenDoneWith(resultProperty, sendInit);\n    return unsub;\n  };\n  resultProperty = new Property(new Bacon.Desc(this, \"scan\", [seed, f]), subscribe);\n  return resultProperty;\n};\n\nBacon.Observable.prototype.diff = function (start, f) {\n  f = toCombinator(f);\n  return withDesc(new Bacon.Desc(this, \"diff\", [start, f]), this.scan([start], function (prevTuple, next) {\n    return [next, f(prevTuple[0], next)];\n  }).filter(function (tuple) {\n    return tuple.length === 2;\n  }).map(function (tuple) {\n    return tuple[1];\n  }));\n};\n\nBacon.Observable.prototype.doAction = function () {\n  var f = makeFunctionArgs(arguments);\n  return withDesc(new Bacon.Desc(this, \"doAction\", [f]), this.withHandler(function (event) {\n    if (event.hasValue()) {\n      f(event.value());\n    }\n    return this.push(event);\n  }));\n};\n\nBacon.Observable.prototype.doEnd = function () {\n  var f = makeFunctionArgs(arguments);\n  return withDesc(new Bacon.Desc(this, \"doEnd\", [f]), this.withHandler(function (event) {\n    if (event.isEnd()) {\n      f();\n    }\n    return this.push(event);\n  }));\n};\n\nBacon.Observable.prototype.doError = function () {\n  var f = makeFunctionArgs(arguments);\n  return withDesc(new Bacon.Desc(this, \"doError\", [f]), this.withHandler(function (event) {\n    if (event.isError()) {\n      f(event.error);\n    }\n    return this.push(event);\n  }));\n};\n\nBacon.Observable.prototype.doLog = function () {\n  for (var _len15 = arguments.length, args = Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n    args[_key15] = arguments[_key15];\n  }\n\n  return withDesc(new Bacon.Desc(this, \"doLog\", args), this.withHandler(function (event) {\n    if (typeof console !== \"undefined\" && console !== null && typeof console.log === \"function\") {\n      console.log.apply(console, args.concat([event.log()]));\n    }\n    return this.push(event);\n  }));\n};\n\nBacon.Observable.prototype.endOnError = function (f) {\n  if (!(typeof f !== \"undefined\" && f !== null)) {\n    f = true;\n  }\n\n  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n    args[_key16 - 1] = arguments[_key16];\n  }\n\n  return convertArgsToFunction(this, f, args, function (f) {\n    return withDesc(new Bacon.Desc(this, \"endOnError\", []), this.withHandler(function (event) {\n      if (event.isError() && f(event.error)) {\n        this.push(event);\n        return this.push(endEvent());\n      } else {\n        return this.push(event);\n      }\n    }));\n  });\n};\n\nObservable.prototype.errors = function () {\n  return withDesc(new Bacon.Desc(this, \"errors\", []), this.filter(function () {\n    return false;\n  }));\n};\n\nBacon.Observable.prototype.take = function (count) {\n  if (count <= 0) {\n    return Bacon.never();\n  }\n  return withDesc(new Bacon.Desc(this, \"take\", [count]), this.withHandler(function (event) {\n    if (!event.hasValue()) {\n      return this.push(event);\n    } else {\n      count--;\n      if (count > 0) {\n        return this.push(event);\n      } else {\n        if (count === 0) {\n          this.push(event);\n        }\n        this.push(endEvent());\n        return Bacon.noMore;\n      }\n    }\n  }));\n};\n\nBacon.Observable.prototype.first = function () {\n  return withDesc(new Bacon.Desc(this, \"first\", []), this.take(1));\n};\n\nBacon.Observable.prototype.mapError = function () {\n  var f = makeFunctionArgs(arguments);\n  return withDesc(new Bacon.Desc(this, \"mapError\", [f]), this.withHandler(function (event) {\n    if (event.isError()) {\n      return this.push(nextEvent(f(event.error)));\n    } else {\n      return this.push(event);\n    }\n  }));\n};\n\nBacon.Observable.prototype.flatMapError = function (fn) {\n  var desc = new Bacon.Desc(this, \"flatMapError\", [fn]);\n  return withDesc(desc, this.mapError(function (err) {\n    return new Error(err);\n  }).flatMap(function (x) {\n    if (x instanceof Error) {\n      return fn(x.error);\n    } else {\n      return Bacon.once(x);\n    }\n  }));\n};\n\nBacon.EventStream.prototype.sampledBy = function (sampler, combinator) {\n  return withDesc(new Bacon.Desc(this, \"sampledBy\", [sampler, combinator]), this.toProperty().sampledBy(sampler, combinator));\n};\n\nBacon.Property.prototype.sampledBy = function (sampler, combinator) {\n  var lazy = false;\n  if (typeof combinator !== \"undefined\" && combinator !== null) {\n    combinator = toCombinator(combinator);\n  } else {\n    lazy = true;\n    combinator = function (f) {\n      return f.value();\n    };\n  }\n  var thisSource = new Source(this, false, lazy);\n  var samplerSource = new Source(sampler, true, lazy);\n  var stream = Bacon.when([thisSource, samplerSource], combinator);\n  var result = sampler._isProperty ? stream.toProperty() : stream;\n  return withDesc(new Bacon.Desc(this, \"sampledBy\", [sampler, combinator]), result);\n};\n\nBacon.Property.prototype.sample = function (interval) {\n  return withDesc(new Bacon.Desc(this, \"sample\", [interval]), this.sampledBy(Bacon.interval(interval, {})));\n};\n\nBacon.Observable.prototype.map = function (p) {\n  if (p && p._isProperty) {\n    return p.sampledBy(this, former);\n  } else {\n    for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n      args[_key17 - 1] = arguments[_key17];\n    }\n\n    return convertArgsToFunction(this, p, args, function (f) {\n      return withDesc(new Bacon.Desc(this, \"map\", [f]), this.withHandler(function (event) {\n        return this.push(event.fmap(f));\n      }));\n    });\n  }\n};\n\nBacon.Observable.prototype.fold = function (seed, f) {\n  return withDesc(new Bacon.Desc(this, \"fold\", [seed, f]), this.scan(seed, f).sampledBy(this.filter(false).mapEnd().toProperty()));\n};\n\nObservable.prototype.reduce = Observable.prototype.fold;\n\nvar eventMethods = [[\"addEventListener\", \"removeEventListener\"], [\"addListener\", \"removeListener\"], [\"on\", \"off\"], [\"bind\", \"unbind\"]];\n\nvar findHandlerMethods = function (target) {\n  var pair;\n  for (var i = 0; i < eventMethods.length; i++) {\n    pair = eventMethods[i];\n    var methodPair = [target[pair[0]], target[pair[1]]];\n    if (methodPair[0] && methodPair[1]) {\n      return methodPair;\n    }\n  }\n  for (var j = 0; j < eventMethods.length; j++) {\n    pair = eventMethods[j];\n    var addListener = target[pair[0]];\n    if (addListener) {\n      return [addListener, function () {}];\n    }\n  }\n  throw new Error(\"No suitable event methods in \" + target);\n};\n\nBacon.fromEventTarget = function (target, eventName, eventTransformer) {\n  var _findHandlerMethods = findHandlerMethods(target);\n\n  var sub = _findHandlerMethods[0];\n  var unsub = _findHandlerMethods[1];\n\n  var desc = new Bacon.Desc(Bacon, \"fromEvent\", [target, eventName]);\n  return withDesc(desc, Bacon.fromBinder(function (handler) {\n    sub.call(target, eventName, handler);\n    return function () {\n      return unsub.call(target, eventName, handler);\n    };\n  }, eventTransformer));\n};\n\nBacon.fromEvent = Bacon.fromEventTarget;\n\nBacon.fromPoll = function (delay, poll) {\n  var desc = new Bacon.Desc(Bacon, \"fromPoll\", [delay, poll]);\n  return withDesc(desc, Bacon.fromBinder(function (handler) {\n    var id = Bacon.scheduler.setInterval(handler, delay);\n    return function () {\n      return Bacon.scheduler.clearInterval(id);\n    };\n  }, poll));\n};\n\nfunction valueAndEnd(value) {\n  return [value, endEvent()];\n}\n\nBacon.fromPromise = function (promise, abort) {\n  var eventTransformer = arguments.length <= 2 || arguments[2] === undefined ? valueAndEnd : arguments[2];\n\n  return withDesc(new Bacon.Desc(Bacon, \"fromPromise\", [promise]), Bacon.fromBinder(function (handler) {\n    var bound = promise.then(handler, function (e) {\n      return handler(new Error(e));\n    });\n    if (bound && typeof bound.done === \"function\") {\n      bound.done();\n    }\n\n    if (abort) {\n      return function () {\n        if (typeof promise.abort === \"function\") {\n          return promise.abort();\n        }\n      };\n    } else {\n      return function () {};\n    }\n  }, eventTransformer));\n};\n\nBacon.Observable.prototype.groupBy = function (keyF) {\n  var limitF = arguments.length <= 1 || arguments[1] === undefined ? Bacon._.id : arguments[1];\n\n  var streams = {};\n  var src = this;\n  return src.filter(function (x) {\n    return !streams[keyF(x)];\n  }).map(function (x) {\n    var key = keyF(x);\n    var similar = src.filter(function (x) {\n      return keyF(x) === key;\n    });\n    var data = Bacon.once(x).concat(similar);\n    var limited = limitF(data, x).withHandler(function (event) {\n      this.push(event);\n      if (event.isEnd()) {\n        return delete streams[key];\n      }\n    });\n    streams[key] = limited;\n    return limited;\n  });\n};\n\nBacon.fromArray = function (values) {\n  assertArray(values);\n  if (!values.length) {\n    return withDesc(new Bacon.Desc(Bacon, \"fromArray\", values), Bacon.never());\n  } else {\n    var i = 0;\n    return new EventStream(new Bacon.Desc(Bacon, \"fromArray\", [values]), function (sink) {\n      var unsubd = false;\n      var reply = Bacon.more;\n      var pushing = false;\n      var pushNeeded = false;\n      var push = function () {\n        pushNeeded = true;\n        if (pushing) {\n          return;\n        }\n        pushing = true;\n        while (pushNeeded) {\n          pushNeeded = false;\n          if (reply !== Bacon.noMore && !unsubd) {\n            var value = values[i++];\n            reply = sink(toEvent(value));\n            if (reply !== Bacon.noMore) {\n              if (i === values.length) {\n                sink(endEvent());\n              } else {\n                UpdateBarrier.afterTransaction(push);\n              }\n            }\n          }\n        }\n        pushing = false;\n        return pushing;\n      };\n\n      push();\n      return function () {\n        unsubd = true;\n        return unsubd;\n      };\n    });\n  }\n};\n\nBacon.EventStream.prototype.holdWhen = function (valve) {\n  var onHold = false;\n  var bufferedValues = [];\n  var src = this;\n  var srcIsEnded = false;\n  return new EventStream(new Bacon.Desc(this, \"holdWhen\", [valve]), function (sink) {\n    var composite = new CompositeUnsubscribe();\n    var subscribed = false;\n    var endIfBothEnded = function (unsub) {\n      if (typeof unsub === \"function\") {\n        unsub();\n      }\n      if (composite.empty() && subscribed) {\n        return sink(endEvent());\n      }\n    };\n    composite.add(function (unsubAll, unsubMe) {\n      return valve.subscribeInternal(function (event) {\n        if (event.hasValue()) {\n          onHold = event.value();\n          if (!onHold) {\n            var toSend = bufferedValues;\n            bufferedValues = [];\n            return (function () {\n              var result = [];\n              for (var i = 0, value; i < toSend.length; i++) {\n                value = toSend[i];\n                result.push(sink(nextEvent(value)));\n              }\n              if (srcIsEnded) {\n                result.push(sink(endEvent()));\n                unsubMe();\n              }\n              return result;\n            })();\n          }\n        } else if (event.isEnd()) {\n          return endIfBothEnded(unsubMe);\n        } else {\n          return sink(event);\n        }\n      });\n    });\n    composite.add(function (unsubAll, unsubMe) {\n      return src.subscribeInternal(function (event) {\n        if (onHold && event.hasValue()) {\n          return bufferedValues.push(event.value());\n        } else if (event.isEnd() && bufferedValues.length) {\n          srcIsEnded = true;\n          return endIfBothEnded(unsubMe);\n        } else {\n          return sink(event);\n        }\n      });\n    });\n    subscribed = true;\n    endIfBothEnded();\n    return composite.unsubscribe;\n  });\n};\n\nBacon.interval = function (delay) {\n  var value = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  return withDesc(new Bacon.Desc(Bacon, \"interval\", [delay, value]), Bacon.fromPoll(delay, function () {\n    return nextEvent(value);\n  }));\n};\n\nBacon.$ = {};\nBacon.$.asEventStream = function (eventName, selector, eventTransformer) {\n  var _this11 = this;\n\n  if (_.isFunction(selector)) {\n    eventTransformer = selector;\n    selector = undefined;\n  }\n\n  return withDesc(new Bacon.Desc(this.selector || this, \"asEventStream\", [eventName]), Bacon.fromBinder(function (handler) {\n    _this11.on(eventName, selector, handler);\n    return function () {\n      return _this11.off(eventName, selector, handler);\n    };\n  }, eventTransformer));\n};\n\nif (typeof jQuery !== \"undefined\" && jQuery) {\n  jQuery.fn.asEventStream = Bacon.$.asEventStream;\n}\n\nif (typeof Zepto !== \"undefined\" && Zepto) {\n  Zepto.fn.asEventStream = Bacon.$.asEventStream;\n}\n\nBacon.Observable.prototype.last = function () {\n  var lastEvent;\n\n  return withDesc(new Bacon.Desc(this, \"last\", []), this.withHandler(function (event) {\n    if (event.isEnd()) {\n      if (lastEvent) {\n        this.push(lastEvent);\n      }\n      this.push(endEvent());\n      return Bacon.noMore;\n    } else {\n      lastEvent = event;\n    }\n  }));\n};\n\nBacon.Observable.prototype.log = function () {\n  for (var _len18 = arguments.length, args = Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {\n    args[_key18] = arguments[_key18];\n  }\n\n  this.subscribe(function (event) {\n    if (typeof console !== \"undefined\" && typeof console.log === \"function\") {\n      console.log.apply(console, args.concat([event.log()]));\n    }\n  });\n  return this;\n};\n\nBacon.EventStream.prototype.merge = function (right) {\n  assertEventStream(right);\n  var left = this;\n  return withDesc(new Bacon.Desc(left, \"merge\", [right]), Bacon.mergeAll(this, right));\n};\n\nBacon.mergeAll = function () {\n  var streams = argumentsToObservables(arguments);\n  if (streams.length) {\n    return new EventStream(new Bacon.Desc(Bacon, \"mergeAll\", streams), function (sink) {\n      var ends = 0;\n      var smartSink = function (obs) {\n        return function (unsubBoth) {\n          return obs.dispatcher.subscribe(function (event) {\n            if (event.isEnd()) {\n              ends++;\n              if (ends === streams.length) {\n                return sink(endEvent());\n              } else {\n                return Bacon.more;\n              }\n            } else {\n              var reply = sink(event);\n              if (reply === Bacon.noMore) {\n                unsubBoth();\n              }\n              return reply;\n            }\n          });\n        };\n      };\n      var sinks = _.map(smartSink, streams);\n      return new Bacon.CompositeUnsubscribe(sinks).unsubscribe;\n    });\n  } else {\n    return Bacon.never();\n  }\n};\n\nBacon.repeatedly = function (delay, values) {\n  var index = 0;\n  return withDesc(new Bacon.Desc(Bacon, \"repeatedly\", [delay, values]), Bacon.fromPoll(delay, function () {\n    return values[index++ % values.length];\n  }));\n};\n\nBacon.repeat = function (generator) {\n  var index = 0;\n  return Bacon.fromBinder(function (sink) {\n    var flag = false;\n    var reply = Bacon.more;\n    var unsub = function () {};\n    function handleEvent(event) {\n      if (event.isEnd()) {\n        if (!flag) {\n          return flag = true;\n        } else {\n          return subscribeNext();\n        }\n      } else {\n        return reply = sink(event);\n      }\n    };\n    function subscribeNext() {\n      var next;\n      flag = true;\n      while (flag && reply !== Bacon.noMore) {\n        next = generator(index++);\n        flag = false;\n        if (next) {\n          unsub = next.subscribeInternal(handleEvent);\n        } else {\n          sink(endEvent());\n        }\n      }\n      return flag = true;\n    };\n    subscribeNext();\n    return function () {\n      return unsub();\n    };\n  });\n};\n\nBacon.retry = function (options) {\n  if (!_.isFunction(options.source)) {\n    throw new Exception(\"'source' option has to be a function\");\n  }\n  var source = options.source;\n  var retries = options.retries || 0;\n  var retriesDone = 0;\n  var delay = options.delay || function () {\n    return 0;\n  };\n  var isRetryable = options.isRetryable || function () {\n    return true;\n  };\n  var finished = false;\n  var error = null;\n\n  return withDesc(new Bacon.Desc(Bacon, \"retry\", [options]), Bacon.repeat(function () {\n    function valueStream() {\n      return source().endOnError().withHandler(function (event) {\n        if (event.isError()) {\n          error = event;\n          if (!(isRetryable(error.error) && (retries === 0 || retriesDone < retries))) {\n            finished = true;\n            return this.push(event);\n          }\n        } else {\n          if (event.hasValue()) {\n            error = null;\n            finished = true;\n          }\n          return this.push(event);\n        }\n      });\n    }\n\n    if (finished) {\n      return null;\n    } else if (error) {\n      var context = {\n        error: error.error,\n        retriesDone: retriesDone\n      };\n      var pause = Bacon.later(delay(context)).filter(false);\n      retriesDone++;\n      return pause.concat(Bacon.once().flatMap(valueStream));\n    } else {\n      return valueStream();\n    }\n  }));\n};\n\nBacon.sequentially = function (delay, values) {\n  var index = 0;\n  return withDesc(new Bacon.Desc(Bacon, \"sequentially\", [delay, values]), Bacon.fromPoll(delay, function () {\n    var value = values[index++];\n    if (index < values.length) {\n      return value;\n    } else if (index === values.length) {\n      return [value, endEvent()];\n    } else {\n      return endEvent();\n    }\n  }));\n};\n\nBacon.Observable.prototype.skip = function (count) {\n  return withDesc(new Bacon.Desc(this, \"skip\", [count]), this.withHandler(function (event) {\n    if (!event.hasValue()) {\n      return this.push(event);\n    } else if (count > 0) {\n      count--;\n      return Bacon.more;\n    } else {\n      return this.push(event);\n    }\n  }));\n};\n\nBacon.EventStream.prototype.skipUntil = function (starter) {\n  var started = starter.take(1).map(true).toProperty(false);\n  return withDesc(new Bacon.Desc(this, \"skipUntil\", [starter]), this.filter(started));\n};\n\nBacon.EventStream.prototype.skipWhile = function (f) {\n  assertObservableIsProperty(f);\n  var ok = false;\n\n  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {\n    args[_key19 - 1] = arguments[_key19];\n  }\n\n  return convertArgsToFunction(this, f, args, function (f) {\n    return withDesc(new Bacon.Desc(this, \"skipWhile\", [f]), this.withHandler(function (event) {\n      if (ok || !event.hasValue() || !f(event.value())) {\n        if (event.hasValue()) {\n          ok = true;\n        }\n        return this.push(event);\n      } else {\n        return Bacon.more;\n      }\n    }));\n  });\n};\n\nBacon.Observable.prototype.slidingWindow = function (n) {\n  var minValues = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\n  return withDesc(new Bacon.Desc(this, \"slidingWindow\", [n, minValues]), this.scan([], function (window, value) {\n    return window.concat([value]).slice(-n);\n  }).filter(function (values) {\n    return values.length >= minValues;\n  }));\n};\n\nvar spies = [];\nvar registerObs = function (obs) {\n  if (spies.length) {\n    if (!registerObs.running) {\n      try {\n        registerObs.running = true;\n        spies.forEach(function (spy) {\n          spy(obs);\n        });\n      } finally {\n        delete registerObs.running;\n      }\n    }\n  }\n};\n\nBacon.spy = function (spy) {\n  return spies.push(spy);\n};\n\nBacon.Property.prototype.startWith = function (seed) {\n  return withDesc(new Bacon.Desc(this, \"startWith\", [seed]), this.scan(seed, function (prev, next) {\n    return next;\n  }));\n};\n\nBacon.EventStream.prototype.startWith = function (seed) {\n  return withDesc(new Bacon.Desc(this, \"startWith\", [seed]), Bacon.once(seed).concat(this));\n};\n\nBacon.Observable.prototype.takeWhile = function (f) {\n  assertObservableIsProperty(f);\n\n  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {\n    args[_key20 - 1] = arguments[_key20];\n  }\n\n  return convertArgsToFunction(this, f, args, function (f) {\n    return withDesc(new Bacon.Desc(this, \"takeWhile\", [f]), this.withHandler(function (event) {\n      if (event.filter(f)) {\n        return this.push(event);\n      } else {\n        this.push(endEvent());\n        return Bacon.noMore;\n      }\n    }));\n  });\n};\n\nBacon.EventStream.prototype.throttle = function (delay) {\n  return withDesc(new Bacon.Desc(this, \"throttle\", [delay]), this.bufferWithTime(delay).map(function (values) {\n    return values[values.length - 1];\n  }));\n};\n\nBacon.Property.prototype.throttle = function (delay) {\n  return this.delayChanges(new Bacon.Desc(this, \"throttle\", [delay]), function (changes) {\n    return changes.throttle(delay);\n  });\n};\n\nObservable.prototype.firstToPromise = function (PromiseCtr) {\n  var _this12 = this;\n\n  if (typeof PromiseCtr !== \"function\") {\n    if (typeof Promise === \"function\") {\n      PromiseCtr = Promise;\n    } else {\n      throw new Exception(\"There isn't default Promise, use shim or parameter\");\n    }\n  }\n\n  return new PromiseCtr(function (resolve, reject) {\n    return _this12.subscribe(function (event) {\n      if (event.hasValue()) {\n        resolve(event.value());\n      }\n      if (event.isError()) {\n        reject(event.error);\n      }\n\n      return Bacon.noMore;\n    });\n  });\n};\n\nObservable.prototype.toPromise = function (PromiseCtr) {\n  return this.last().firstToPromise(PromiseCtr);\n};\n\nBacon[\"try\"] = function (f) {\n  return function (value) {\n    try {\n      return Bacon.once(f(value));\n    } catch (e) {\n      return new Bacon.Error(e);\n    }\n  };\n};\n\nBacon.update = function (initial) {\n  function lateBindFirst(f) {\n    return function () {\n      for (var _len22 = arguments.length, args = Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n        args[_key22] = arguments[_key22];\n      }\n\n      return function (i) {\n        return f.apply(undefined, [i].concat(args));\n      };\n    };\n  }\n\n  for (var _len21 = arguments.length, patterns = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {\n    patterns[_key21 - 1] = arguments[_key21];\n  }\n\n  var i = patterns.length - 1;\n  while (i > 0) {\n    if (!(patterns[i] instanceof Function)) {\n      patterns[i] = _.always(patterns[i]);\n    }\n    patterns[i] = lateBindFirst(patterns[i]);\n    i = i - 2;\n  }\n  return withDesc(new Bacon.Desc(Bacon, \"update\", [initial].concat(patterns)), Bacon.when.apply(Bacon, patterns).scan(initial, function (x, f) {\n    return f(x);\n  }));\n};\n\nBacon.zipAsArray = function () {\n  for (var _len23 = arguments.length, args = Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {\n    args[_key23] = arguments[_key23];\n  }\n\n  var streams = argumentsToObservables(args);\n  return withDesc(new Bacon.Desc(Bacon, \"zipAsArray\", streams), Bacon.zipWith(streams, function () {\n    for (var _len24 = arguments.length, xs = Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {\n      xs[_key24] = arguments[_key24];\n    }\n\n    return xs;\n  }));\n};\n\nBacon.zipWith = function () {\n  for (var _len25 = arguments.length, args = Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {\n    args[_key25] = arguments[_key25];\n  }\n\n  var observablesAndFunction = argumentsToObservablesAndFunction(args);\n  var streams = observablesAndFunction[0];\n  var f = observablesAndFunction[1];\n\n  streams = _.map(function (s) {\n    return s.toEventStream();\n  }, streams);\n  return withDesc(new Bacon.Desc(Bacon, \"zipWith\", [f].concat(streams)), Bacon.when(streams, f));\n};\n\nBacon.Observable.prototype.zip = function (other, f) {\n  return withDesc(new Bacon.Desc(this, \"zip\", [other]), Bacon.zipWith([this, other], f || Array));\n};\n\nif (typeof define !== \"undefined\" && define !== null && define.amd != null) {\n  define([], function () {\n    return Bacon;\n  });\n  if (typeof this !== \"undefined\" && this !== null) {\n    this.Bacon = Bacon;\n  }\n} else if (typeof module !== \"undefined\" && module !== null && module.exports != null) {\n  module.exports = Bacon;\n  Bacon.Bacon = Bacon;\n} else {\n    this.Bacon = Bacon;\n  }\n}).call(this);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],109:[function(require,module,exports){\n'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return b64.length * 3 / 4 - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n},{}],110:[function(require,module,exports){\n\n},{}],111:[function(require,module,exports){\n/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n\n},{}],112:[function(require,module,exports){\narguments[4][110][0].apply(exports,arguments)\n},{\"dup\":110}],113:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],114:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar buffer = require('buffer');\nvar Buffer = buffer.Buffer;\nvar SlowBuffer = buffer.SlowBuffer;\nvar MAX_LEN = buffer.kMaxLength || 2147483647;\nexports.alloc = function alloc(size, fill, encoding) {\n  if (typeof Buffer.alloc === 'function') {\n    return Buffer.alloc(size, fill, encoding);\n  }\n  if (typeof encoding === 'number') {\n    throw new TypeError('encoding must not be number');\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size > MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  var enc = encoding;\n  var _fill = fill;\n  if (_fill === undefined) {\n    enc = undefined;\n    _fill = 0;\n  }\n  var buf = new Buffer(size);\n  if (typeof _fill === 'string') {\n    var fillBuf = new Buffer(_fill, enc);\n    var flen = fillBuf.length;\n    var i = -1;\n    while (++i < size) {\n      buf[i] = fillBuf[i % flen];\n    }\n  } else {\n    buf.fill(_fill);\n  }\n  return buf;\n}\nexports.allocUnsafe = function allocUnsafe(size) {\n  if (typeof Buffer.allocUnsafe === 'function') {\n    return Buffer.allocUnsafe(size);\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size > MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  return new Buffer(size);\n}\nexports.from = function from(value, encodingOrOffset, length) {\n  if (typeof Buffer.from === 'function' && (!global.Uint8Array || Uint8Array.from !== Buffer.from)) {\n    return Buffer.from(value, encodingOrOffset, length);\n  }\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n  if (typeof value === 'string') {\n    return new Buffer(value, encodingOrOffset);\n  }\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    var offset = encodingOrOffset;\n    if (arguments.length === 1) {\n      return new Buffer(value);\n    }\n    if (typeof offset === 'undefined') {\n      offset = 0;\n    }\n    var len = length;\n    if (typeof len === 'undefined') {\n      len = value.byteLength - offset;\n    }\n    if (offset >= value.byteLength) {\n      throw new RangeError('\\'offset\\' is out of bounds');\n    }\n    if (len > value.byteLength - offset) {\n      throw new RangeError('\\'length\\' is out of bounds');\n    }\n    return new Buffer(value.slice(offset, offset + len));\n  }\n  if (Buffer.isBuffer(value)) {\n    var out = new Buffer(value.length);\n    value.copy(out, 0, 0, value.length);\n    return out;\n  }\n  if (value) {\n    if (Array.isArray(value) || (typeof ArrayBuffer !== 'undefined' && value.buffer instanceof ArrayBuffer) || 'length' in value) {\n      return new Buffer(value);\n    }\n    if (value.type === 'Buffer' && Array.isArray(value.data)) {\n      return new Buffer(value.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ' + 'ArrayBuffer, Array, or array-like object.');\n}\nexports.allocUnsafeSlow = function allocUnsafeSlow(size) {\n  if (typeof Buffer.allocUnsafeSlow === 'function') {\n    return Buffer.allocUnsafeSlow(size);\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size >= MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  return new SlowBuffer(size);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"buffer\":115}],115:[function(require,module,exports){\n(function (global){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"base64-js\":109,\"ieee754\":169,\"isarray\":176}],116:[function(require,module,exports){\n(function (Buffer){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n}).call(this,{\"isBuffer\":require(\"../../is-buffer/index.js\")})\n},{\"../../is-buffer/index.js\":174}],117:[function(require,module,exports){\n/** @license\n * crossroads <http://millermedeiros.github.com/crossroads.js/>\n * Author: Miller Medeiros | MIT License\n * v0.12.2 (2015/07/31 18:37)\n */\n\n(function () {\nvar factory = function (signals) {\n\n    var crossroads,\n        _hasOptionalGroupBug,\n        UNDEF;\n\n    // Helpers -----------\n    //====================\n\n    // IE 7-8 capture optional groups as empty strings while other browsers\n    // capture as `undefined`\n    _hasOptionalGroupBug = (/t(.+)?/).exec('t')[1] === '';\n\n    function arrayIndexOf(arr, val) {\n        if (arr.indexOf) {\n            return arr.indexOf(val);\n        } else {\n            //Array.indexOf doesn't work on IE 6-7\n            var n = arr.length;\n            while (n--) {\n                if (arr[n] === val) {\n                    return n;\n                }\n            }\n            return -1;\n        }\n    }\n\n    function arrayRemove(arr, item) {\n        var i = arrayIndexOf(arr, item);\n        if (i !== -1) {\n            arr.splice(i, 1);\n        }\n    }\n\n    function isKind(val, kind) {\n        return '[object '+ kind +']' === Object.prototype.toString.call(val);\n    }\n\n    function isRegExp(val) {\n        return isKind(val, 'RegExp');\n    }\n\n    function isArray(val) {\n        return isKind(val, 'Array');\n    }\n\n    function isFunction(val) {\n        return typeof val === 'function';\n    }\n\n    //borrowed from AMD-utils\n    function typecastValue(val) {\n        var r;\n        if (val === null || val === 'null') {\n            r = null;\n        } else if (val === 'true') {\n            r = true;\n        } else if (val === 'false') {\n            r = false;\n        } else if (val === UNDEF || val === 'undefined') {\n            r = UNDEF;\n        } else if (val === '' || isNaN(val)) {\n            //isNaN('') returns false\n            r = val;\n        } else {\n            //parseFloat(null || '') returns NaN\n            r = parseFloat(val);\n        }\n        return r;\n    }\n\n    function typecastArrayValues(values) {\n        var n = values.length,\n            result = [];\n        while (n--) {\n            result[n] = typecastValue(values[n]);\n        }\n        return result;\n    }\n\n    // borrowed from MOUT\n    function decodeQueryString(queryStr, shouldTypecast) {\n        var queryArr = (queryStr || '').replace('?', '').split('&'),\n            reg = /([^=]+)=(.+)/,\n            i = -1,\n            obj = {},\n            equalIndex, cur, pValue, pName;\n\n        while ((cur = queryArr[++i])) {\n            equalIndex = cur.indexOf('=');\n            pName = cur.substring(0, equalIndex);\n            pValue = decodeURIComponent(cur.substring(equalIndex + 1));\n            if (shouldTypecast !== false) {\n                pValue = typecastValue(pValue);\n            }\n            if (pName in obj){\n                if(isArray(obj[pName])){\n                    obj[pName].push(pValue);\n                } else {\n                    obj[pName] = [obj[pName], pValue];\n                }\n            } else {\n                obj[pName] = pValue;\n           }\n        }\n        return obj;\n    }\n\n\n    // Crossroads --------\n    //====================\n\n    /**\n     * @constructor\n     */\n    function Crossroads() {\n        this.bypassed = new signals.Signal();\n        this.routed = new signals.Signal();\n        this._routes = [];\n        this._prevRoutes = [];\n        this._piped = [];\n        this.resetState();\n    }\n\n    Crossroads.prototype = {\n\n        greedy : false,\n\n        greedyEnabled : true,\n\n        ignoreCase : true,\n\n        ignoreState : false,\n\n        shouldTypecast : false,\n\n        normalizeFn : null,\n\n        resetState : function(){\n            this._prevRoutes.length = 0;\n            this._prevMatchedRequest = null;\n            this._prevBypassedRequest = null;\n        },\n\n        create : function () {\n            return new Crossroads();\n        },\n\n        addRoute : function (pattern, callback, priority) {\n            var route = new Route(pattern, callback, priority, this);\n            this._sortedInsert(route);\n            return route;\n        },\n\n        removeRoute : function (route) {\n            arrayRemove(this._routes, route);\n            route._destroy();\n        },\n\n        removeAllRoutes : function () {\n            var n = this.getNumRoutes();\n            while (n--) {\n                this._routes[n]._destroy();\n            }\n            this._routes.length = 0;\n        },\n\n        parse : function (request, defaultArgs) {\n            request = request || '';\n            defaultArgs = defaultArgs || [];\n\n            // should only care about different requests if ignoreState isn't true\n            if ( !this.ignoreState &&\n                (request === this._prevMatchedRequest ||\n                 request === this._prevBypassedRequest) ) {\n                return;\n            }\n\n            var routes = this._getMatchedRoutes(request),\n                i = 0,\n                n = routes.length,\n                cur;\n\n            if (n) {\n                this._prevMatchedRequest = request;\n\n                this._notifyPrevRoutes(routes, request);\n                this._prevRoutes = routes;\n                //should be incremental loop, execute routes in order\n                while (i < n) {\n                    cur = routes[i];\n                    cur.route.matched.dispatch.apply(cur.route.matched, defaultArgs.concat(cur.params));\n                    cur.isFirst = !i;\n                    this.routed.dispatch.apply(this.routed, defaultArgs.concat([request, cur]));\n                    i += 1;\n                }\n            } else {\n                this._prevBypassedRequest = request;\n                this.bypassed.dispatch.apply(this.bypassed, defaultArgs.concat([request]));\n            }\n\n            this._pipeParse(request, defaultArgs);\n        },\n\n        _notifyPrevRoutes : function(matchedRoutes, request) {\n            var i = 0, prev;\n            while (prev = this._prevRoutes[i++]) {\n                //check if switched exist since route may be disposed\n                if(prev.route.switched && this._didSwitch(prev.route, matchedRoutes)) {\n                    prev.route.switched.dispatch(request);\n                }\n            }\n        },\n\n        _didSwitch : function (route, matchedRoutes){\n            var matched,\n                i = 0;\n            while (matched = matchedRoutes[i++]) {\n                // only dispatch switched if it is going to a different route\n                if (matched.route === route) {\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        _pipeParse : function(request, defaultArgs) {\n            var i = 0, route;\n            while (route = this._piped[i++]) {\n                route.parse(request, defaultArgs);\n            }\n        },\n\n        getNumRoutes : function () {\n            return this._routes.length;\n        },\n\n        _sortedInsert : function (route) {\n            //simplified insertion sort\n            var routes = this._routes,\n                n = routes.length;\n            do { --n; } while (routes[n] && route._priority <= routes[n]._priority);\n            routes.splice(n+1, 0, route);\n        },\n\n        _getMatchedRoutes : function (request) {\n            var res = [],\n                routes = this._routes,\n                n = routes.length,\n                route;\n            //should be decrement loop since higher priorities are added at the end of array\n            while (route = routes[--n]) {\n                if ((!res.length || this.greedy || route.greedy) && route.match(request)) {\n                    res.push({\n                        route : route,\n                        params : route._getParamsArray(request)\n                    });\n                }\n                if (!this.greedyEnabled && res.length) {\n                    break;\n                }\n            }\n            return res;\n        },\n\n        pipe : function (otherRouter) {\n            this._piped.push(otherRouter);\n        },\n\n        unpipe : function (otherRouter) {\n            arrayRemove(this._piped, otherRouter);\n        },\n\n        toString : function () {\n            return '[crossroads numRoutes:'+ this.getNumRoutes() +']';\n        }\n    };\n\n    //\"static\" instance\n    crossroads = new Crossroads();\n    crossroads.VERSION = '0.12.2';\n\n    crossroads.NORM_AS_ARRAY = function (req, vals) {\n        return [vals.vals_];\n    };\n\n    crossroads.NORM_AS_OBJECT = function (req, vals) {\n        return [vals];\n    };\n\n\n    // Route --------------\n    //=====================\n\n    /**\n     * @constructor\n     */\n    function Route(pattern, callback, priority, router) {\n        var isRegexPattern = isRegExp(pattern),\n            patternLexer = router.patternLexer;\n        this._router = router;\n        this._pattern = pattern;\n        this._paramsIds = isRegexPattern? null : patternLexer.getParamIds(pattern);\n        this._optionalParamsIds = isRegexPattern? null : patternLexer.getOptionalParamsIds(pattern);\n        this._matchRegexp = isRegexPattern? pattern : patternLexer.compilePattern(pattern, router.ignoreCase);\n        this.matched = new signals.Signal();\n        this.switched = new signals.Signal();\n        if (callback) {\n            this.matched.add(callback);\n        }\n        this._priority = priority || 0;\n    }\n\n    Route.prototype = {\n\n        greedy : false,\n\n        rules : void(0),\n\n        match : function (request) {\n            request = request || '';\n            return this._matchRegexp.test(request) && this._validateParams(request); //validate params even if regexp because of `request_` rule.\n        },\n\n        _validateParams : function (request) {\n            var rules = this.rules,\n                values = this._getParamsObject(request),\n                key;\n            for (key in rules) {\n                // normalize_ isn't a validation rule... (#39)\n                if(key !== 'normalize_' && rules.hasOwnProperty(key) && ! this._isValidParam(request, key, values)){\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        _isValidParam : function (request, prop, values) {\n            var validationRule = this.rules[prop],\n                val = values[prop],\n                isValid = false,\n                isQuery = (prop.indexOf('?') === 0);\n\n            if (val == null && this._optionalParamsIds && arrayIndexOf(this._optionalParamsIds, prop) !== -1) {\n                isValid = true;\n            }\n            else if (isRegExp(validationRule)) {\n                if (isQuery) {\n                    val = values[prop +'_']; //use raw string\n                }\n                isValid = validationRule.test(val);\n            }\n            else if (isArray(validationRule)) {\n                if (isQuery) {\n                    val = values[prop +'_']; //use raw string\n                }\n                isValid = this._isValidArrayRule(validationRule, val);\n            }\n            else if (isFunction(validationRule)) {\n                isValid = validationRule(val, request, values);\n            }\n\n            return isValid; //fail silently if validationRule is from an unsupported type\n        },\n\n        _isValidArrayRule : function (arr, val) {\n            if (! this._router.ignoreCase) {\n                return arrayIndexOf(arr, val) !== -1;\n            }\n\n            if (typeof val === 'string') {\n                val = val.toLowerCase();\n            }\n\n            var n = arr.length,\n                item,\n                compareVal;\n\n            while (n--) {\n                item = arr[n];\n                compareVal = (typeof item === 'string')? item.toLowerCase() : item;\n                if (compareVal === val) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _getParamsObject : function (request) {\n            var shouldTypecast = this._router.shouldTypecast,\n                values = this._router.patternLexer.getParamValues(request, this._matchRegexp, shouldTypecast),\n                o = {},\n                n = values.length,\n                param, val;\n            while (n--) {\n                val = values[n];\n                if (this._paramsIds) {\n                    param = this._paramsIds[n];\n                    if (param.indexOf('?') === 0 && val) {\n                        //make a copy of the original string so array and\n                        //RegExp validation can be applied properly\n                        o[param +'_'] = val;\n                        //update vals_ array as well since it will be used\n                        //during dispatch\n                        val = decodeQueryString(val, shouldTypecast);\n                        values[n] = val;\n                    }\n                    // IE will capture optional groups as empty strings while other\n                    // browsers will capture `undefined` so normalize behavior.\n                    // see: #gh-58, #gh-59, #gh-60\n                    if ( _hasOptionalGroupBug && val === '' && arrayIndexOf(this._optionalParamsIds, param) !== -1 ) {\n                        val = void(0);\n                        values[n] = val;\n                    }\n                    o[param] = val;\n                }\n                //alias to paths and for RegExp pattern\n                o[n] = val;\n            }\n            o.request_ = shouldTypecast? typecastValue(request) : request;\n            o.vals_ = values;\n            return o;\n        },\n\n        _getParamsArray : function (request) {\n            var norm = this.rules? this.rules.normalize_ : null,\n                params;\n            norm = norm || this._router.normalizeFn; // default normalize\n            if (norm && isFunction(norm)) {\n                params = norm(request, this._getParamsObject(request));\n            } else {\n                params = this._getParamsObject(request).vals_;\n            }\n            return params;\n        },\n\n        interpolate : function(replacements) {\n            var str = this._router.patternLexer.interpolate(this._pattern, replacements);\n            if (! this._validateParams(str) ) {\n                throw new Error('Generated string doesn\\'t validate against `Route.rules`.');\n            }\n            return str;\n        },\n\n        dispose : function () {\n            this._router.removeRoute(this);\n        },\n\n        _destroy : function () {\n            this.matched.dispose();\n            this.switched.dispose();\n            this.matched = this.switched = this._pattern = this._matchRegexp = null;\n        },\n\n        toString : function () {\n            return '[Route pattern:\"'+ this._pattern +'\", numListeners:'+ this.matched.getNumListeners() +']';\n        }\n\n    };\n\n\n\n    // Pattern Lexer ------\n    //=====================\n\n    Crossroads.prototype.patternLexer = (function () {\n\n        var\n            //match chars that should be escaped on string regexp\n            ESCAPE_CHARS_REGEXP = /[\\\\.+*?\\^$\\[\\](){}\\/'#]/g,\n\n            //trailing slashes (begin/end of string)\n            LOOSE_SLASHES_REGEXP = /^\\/|\\/$/g,\n            LEGACY_SLASHES_REGEXP = /\\/$/g,\n\n            //params - everything between `{ }` or `: :`\n            PARAMS_REGEXP = /(?:\\{|:)([^}:]+)(?:\\}|:)/g,\n\n            //used to save params during compile (avoid escaping things that\n            //shouldn't be escaped).\n            TOKENS = {\n                'OS' : {\n                    //optional slashes\n                    //slash between `::` or `}:` or `\\w:` or `:{?` or `}{?` or `\\w{?`\n                    rgx : /([:}]|\\w(?=\\/))\\/?(:|(?:\\{\\?))/g,\n                    save : '$1{{id}}$2',\n                    res : '\\\\/?'\n                },\n                'RS' : {\n                    //required slashes\n                    //used to insert slash between `:{` and `}{`\n                    rgx : /([:}])\\/?(\\{)/g,\n                    save : '$1{{id}}$2',\n                    res : '\\\\/'\n                },\n                'RQ' : {\n                    //required query string - everything in between `{? }`\n                    rgx : /\\{\\?([^}]+)\\}/g,\n                    //everything from `?` till `#` or end of string\n                    res : '\\\\?([^#]+)'\n                },\n                'OQ' : {\n                    //optional query string - everything in between `:? :`\n                    rgx : /:\\?([^:]+):/g,\n                    //everything from `?` till `#` or end of string\n                    res : '(?:\\\\?([^#]*))?'\n                },\n                'OR' : {\n                    //optional rest - everything in between `: *:`\n                    rgx : /:([^:]+)\\*:/g,\n                    res : '(.*)?' // optional group to avoid passing empty string as captured\n                },\n                'RR' : {\n                    //rest param - everything in between `{ *}`\n                    rgx : /\\{([^}]+)\\*\\}/g,\n                    res : '(.+)'\n                },\n                // required/optional params should come after rest segments\n                'RP' : {\n                    //required params - everything between `{ }`\n                    rgx : /\\{([^}]+)\\}/g,\n                    res : '([^\\\\/?]+)'\n                },\n                'OP' : {\n                    //optional params - everything between `: :`\n                    rgx : /:([^:]+):/g,\n                    res : '([^\\\\/?]+)?\\/?'\n                }\n            },\n\n            LOOSE_SLASH = 1,\n            STRICT_SLASH = 2,\n            LEGACY_SLASH = 3,\n\n            _slashMode = LOOSE_SLASH;\n\n\n        function precompileTokens(){\n            var key, cur;\n            for (key in TOKENS) {\n                if (TOKENS.hasOwnProperty(key)) {\n                    cur = TOKENS[key];\n                    cur.id = '__CR_'+ key +'__';\n                    cur.save = ('save' in cur)? cur.save.replace('{{id}}', cur.id) : cur.id;\n                    cur.rRestore = new RegExp(cur.id, 'g');\n                }\n            }\n        }\n        precompileTokens();\n\n\n        function captureVals(regex, pattern) {\n            var vals = [], match;\n            // very important to reset lastIndex since RegExp can have \"g\" flag\n            // and multiple runs might affect the result, specially if matching\n            // same string multiple times on IE 7-8\n            regex.lastIndex = 0;\n            while (match = regex.exec(pattern)) {\n                vals.push(match[1]);\n            }\n            return vals;\n        }\n\n        function getParamIds(pattern) {\n            return captureVals(PARAMS_REGEXP, pattern);\n        }\n\n        function getOptionalParamsIds(pattern) {\n            return captureVals(TOKENS.OP.rgx, pattern);\n        }\n\n        function compilePattern(pattern, ignoreCase) {\n            pattern = pattern || '';\n\n            if(pattern){\n                if (_slashMode === LOOSE_SLASH) {\n                    pattern = pattern.replace(LOOSE_SLASHES_REGEXP, '');\n                }\n                else if (_slashMode === LEGACY_SLASH) {\n                    pattern = pattern.replace(LEGACY_SLASHES_REGEXP, '');\n                }\n\n                //save tokens\n                pattern = replaceTokens(pattern, 'rgx', 'save');\n                //regexp escape\n                pattern = pattern.replace(ESCAPE_CHARS_REGEXP, '\\\\$&');\n                //restore tokens\n                pattern = replaceTokens(pattern, 'rRestore', 'res');\n\n                if (_slashMode === LOOSE_SLASH) {\n                    pattern = '\\\\/?'+ pattern;\n                }\n            }\n\n            if (_slashMode !== STRICT_SLASH) {\n                //single slash is treated as empty and end slash is optional\n                pattern += '\\\\/?';\n            }\n            return new RegExp('^'+ pattern + '$', ignoreCase? 'i' : '');\n        }\n\n        function replaceTokens(pattern, regexpName, replaceName) {\n            var cur, key;\n            for (key in TOKENS) {\n                if (TOKENS.hasOwnProperty(key)) {\n                    cur = TOKENS[key];\n                    pattern = pattern.replace(cur[regexpName], cur[replaceName]);\n                }\n            }\n            return pattern;\n        }\n\n        function getParamValues(request, regexp, shouldTypecast) {\n            var vals = regexp.exec(request);\n            if (vals) {\n                vals.shift();\n                if (shouldTypecast) {\n                    vals = typecastArrayValues(vals);\n                }\n            }\n            return vals;\n        }\n\n        function interpolate(pattern, replacements) {\n            // default to an empty object because pattern might have just\n            // optional arguments\n            replacements = replacements || {};\n            if (typeof pattern !== 'string') {\n                throw new Error('Route pattern should be a string.');\n            }\n\n            var replaceFn = function(match, prop){\n                    var val;\n                    prop = (prop.substr(0, 1) === '?')? prop.substr(1) : prop;\n                    if (replacements[prop] != null) {\n                        if (typeof replacements[prop] === 'object') {\n                            var queryParts = [], rep;\n                            for(var key in replacements[prop]) {\n                                rep = replacements[prop][key];\n                                if (isArray(rep)) {\n                                    for (var k in rep) {\n                                        if ( key.slice(-2) == '[]' ) {\n                                            queryParts.push(encodeURI(key.slice(0, -2)) + '[]=' + encodeURI(rep[k]));\n                                        } else {\n                                            queryParts.push(encodeURI(key + '=' + rep[k]));\n                                        }\n                                    }\n                                }\n                                else {\n                                    queryParts.push(encodeURI(key + '=' + rep));\n                                }\n                            }\n                            val = '?' + queryParts.join('&');\n                        } else {\n                            // make sure value is a string see #gh-54\n                            val = String(replacements[prop]);\n                        }\n\n                        if (match.indexOf('*') === -1 && val.indexOf('/') !== -1) {\n                            throw new Error('Invalid value \"'+ val +'\" for segment \"'+ match +'\".');\n                        }\n                    }\n                    else if (match.indexOf('{') !== -1) {\n                        throw new Error('The segment '+ match +' is required.');\n                    }\n                    else {\n                        val = '';\n                    }\n                    return val;\n                };\n\n            if (! TOKENS.OS.trail) {\n                TOKENS.OS.trail = new RegExp('(?:'+ TOKENS.OS.id +')+$');\n            }\n\n            return pattern\n                        .replace(TOKENS.OS.rgx, TOKENS.OS.save)\n                        .replace(PARAMS_REGEXP, replaceFn)\n                        .replace(TOKENS.OS.trail, '') // remove trailing\n                        .replace(TOKENS.OS.rRestore, '/'); // add slash between segments\n        }\n\n        //API\n        return {\n            strict : function(){\n                _slashMode = STRICT_SLASH;\n            },\n            loose : function(){\n                _slashMode = LOOSE_SLASH;\n            },\n            legacy : function(){\n                _slashMode = LEGACY_SLASH;\n            },\n            getParamIds : getParamIds,\n            getOptionalParamsIds : getOptionalParamsIds,\n            getParamValues : getParamValues,\n            compilePattern : compilePattern,\n            interpolate : interpolate\n        };\n\n    }());\n\n\n    return crossroads;\n};\n\nif (typeof define === 'function' && define.amd) {\n    define(['signals'], factory);\n} else if (typeof module !== 'undefined' && module.exports) { //Node\n    module.exports = factory(require('signals'));\n} else {\n    /*jshint sub:true */\n    window['crossroads'] = factory(window['signals']);\n}\n\n}());\n\n\n},{\"signals\":118}],118:[function(require,module,exports){\n/*jslint onevar:true, undef:true, newcap:true, regexp:true, bitwise:true, maxerr:50, indent:4, white:false, nomen:false, plusplus:false */\n/*global define:false, require:false, exports:false, module:false, signals:false */\n\n/** @license\n * JS Signals <http://millermedeiros.github.com/js-signals/>\n * Released under the MIT license\n * Author: Miller Medeiros\n * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)\n */\n\n(function(global){\n\n    // SignalBinding -------------------------------------------------\n    //================================================================\n\n    /**\n     * Object that represents a binding between a Signal and a listener function.\n     * <br />- <strong>This is an internal constructor and shouldn't be called by regular users.</strong>\n     * <br />- inspired by Joa Ebert AS3 SignalBinding and Robert Penner's Slot classes.\n     * @author Miller Medeiros\n     * @constructor\n     * @internal\n     * @name SignalBinding\n     * @param {Signal} signal Reference to Signal object that listener is currently bound to.\n     * @param {Function} listener Handler function bound to the signal.\n     * @param {boolean} isOnce If binding should be executed just once.\n     * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n     * @param {Number} [priority] The priority level of the event listener. (default = 0).\n     */\n    function SignalBinding(signal, listener, isOnce, listenerContext, priority) {\n\n        /**\n         * Handler function bound to the signal.\n         * @type Function\n         * @private\n         */\n        this._listener = listener;\n\n        /**\n         * If binding should be executed just once.\n         * @type boolean\n         * @private\n         */\n        this._isOnce = isOnce;\n\n        /**\n         * Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @memberOf SignalBinding.prototype\n         * @name context\n         * @type Object|undefined|null\n         */\n        this.context = listenerContext;\n\n        /**\n         * Reference to Signal object that listener is currently bound to.\n         * @type Signal\n         * @private\n         */\n        this._signal = signal;\n\n        /**\n         * Listener priority\n         * @type Number\n         * @private\n         */\n        this._priority = priority || 0;\n    }\n\n    SignalBinding.prototype = {\n\n        /**\n         * If binding is active and should be executed.\n         * @type boolean\n         */\n        active : true,\n\n        /**\n         * Default parameters passed to listener during `Signal.dispatch` and `SignalBinding.execute`. (curried parameters)\n         * @type Array|null\n         */\n        params : null,\n\n        /**\n         * Call listener passing arbitrary parameters.\n         * <p>If binding was added using `Signal.addOnce()` it will be automatically removed from signal dispatch queue, this method is used internally for the signal dispatch.</p>\n         * @param {Array} [paramsArr] Array of parameters that should be passed to the listener\n         * @return {*} Value returned by the listener.\n         */\n        execute : function (paramsArr) {\n            var handlerReturn, params;\n            if (this.active && !!this._listener) {\n                params = this.params? this.params.concat(paramsArr) : paramsArr;\n                handlerReturn = this._listener.apply(this.context, params);\n                if (this._isOnce) {\n                    this.detach();\n                }\n            }\n            return handlerReturn;\n        },\n\n        /**\n         * Detach binding from signal.\n         * - alias to: mySignal.remove(myBinding.getListener());\n         * @return {Function|null} Handler function bound to the signal or `null` if binding was previously detached.\n         */\n        detach : function () {\n            return this.isBound()? this._signal.remove(this._listener, this.context) : null;\n        },\n\n        /**\n         * @return {Boolean} `true` if binding is still bound to the signal and have a listener.\n         */\n        isBound : function () {\n            return (!!this._signal && !!this._listener);\n        },\n\n        /**\n         * @return {boolean} If SignalBinding will only be executed once.\n         */\n        isOnce : function () {\n            return this._isOnce;\n        },\n\n        /**\n         * @return {Function} Handler function bound to the signal.\n         */\n        getListener : function () {\n            return this._listener;\n        },\n\n        /**\n         * @return {Signal} Signal that listener is currently bound to.\n         */\n        getSignal : function () {\n            return this._signal;\n        },\n\n        /**\n         * Delete instance properties\n         * @private\n         */\n        _destroy : function () {\n            delete this._signal;\n            delete this._listener;\n            delete this.context;\n        },\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        toString : function () {\n            return '[SignalBinding isOnce:' + this._isOnce +', isBound:'+ this.isBound() +', active:' + this.active + ']';\n        }\n\n    };\n\n\n/*global SignalBinding:false*/\n\n    // Signal --------------------------------------------------------\n    //================================================================\n\n    function validateListener(listener, fnName) {\n        if (typeof listener !== 'function') {\n            throw new Error( 'listener is a required param of {fn}() and should be a Function.'.replace('{fn}', fnName) );\n        }\n    }\n\n    /**\n     * Custom event broadcaster\n     * <br />- inspired by Robert Penner's AS3 Signals.\n     * @name Signal\n     * @author Miller Medeiros\n     * @constructor\n     */\n    function Signal() {\n        /**\n         * @type Array.<SignalBinding>\n         * @private\n         */\n        this._bindings = [];\n        this._prevParams = null;\n\n        // enforce dispatch to aways work on same context (#47)\n        var self = this;\n        this.dispatch = function(){\n            Signal.prototype.dispatch.apply(self, arguments);\n        };\n    }\n\n    Signal.prototype = {\n\n        /**\n         * Signals Version Number\n         * @type String\n         * @const\n         */\n        VERSION : '1.0.0',\n\n        /**\n         * If Signal should keep record of previously dispatched parameters and\n         * automatically execute listener during `add()`/`addOnce()` if Signal was\n         * already dispatched before.\n         * @type boolean\n         */\n        memorize : false,\n\n        /**\n         * @type boolean\n         * @private\n         */\n        _shouldPropagate : true,\n\n        /**\n         * If Signal is active and should broadcast events.\n         * <p><strong>IMPORTANT:</strong> Setting this property during a dispatch will only affect the next dispatch, if you want to stop the propagation of a signal use `halt()` instead.</p>\n         * @type boolean\n         */\n        active : true,\n\n        /**\n         * @param {Function} listener\n         * @param {boolean} isOnce\n         * @param {Object} [listenerContext]\n         * @param {Number} [priority]\n         * @return {SignalBinding}\n         * @private\n         */\n        _registerListener : function (listener, isOnce, listenerContext, priority) {\n\n            var prevIndex = this._indexOfListener(listener, listenerContext),\n                binding;\n\n            if (prevIndex !== -1) {\n                binding = this._bindings[prevIndex];\n                if (binding.isOnce() !== isOnce) {\n                    throw new Error('You cannot add'+ (isOnce? '' : 'Once') +'() then add'+ (!isOnce? '' : 'Once') +'() the same listener without removing the relationship first.');\n                }\n            } else {\n                binding = new SignalBinding(this, listener, isOnce, listenerContext, priority);\n                this._addBinding(binding);\n            }\n\n            if(this.memorize && this._prevParams){\n                binding.execute(this._prevParams);\n            }\n\n            return binding;\n        },\n\n        /**\n         * @param {SignalBinding} binding\n         * @private\n         */\n        _addBinding : function (binding) {\n            //simplified insertion sort\n            var n = this._bindings.length;\n            do { --n; } while (this._bindings[n] && binding._priority <= this._bindings[n]._priority);\n            this._bindings.splice(n + 1, 0, binding);\n        },\n\n        /**\n         * @param {Function} listener\n         * @return {number}\n         * @private\n         */\n        _indexOfListener : function (listener, context) {\n            var n = this._bindings.length,\n                cur;\n            while (n--) {\n                cur = this._bindings[n];\n                if (cur._listener === listener && cur.context === context) {\n                    return n;\n                }\n            }\n            return -1;\n        },\n\n        /**\n         * Check if listener was attached to Signal.\n         * @param {Function} listener\n         * @param {Object} [context]\n         * @return {boolean} if Signal has the specified listener.\n         */\n        has : function (listener, context) {\n            return this._indexOfListener(listener, context) !== -1;\n        },\n\n        /**\n         * Add a listener to the signal.\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        add : function (listener, listenerContext, priority) {\n            validateListener(listener, 'add');\n            return this._registerListener(listener, false, listenerContext, priority);\n        },\n\n        /**\n         * Add listener to the signal that should be removed after first execution (will be executed only once).\n         * @param {Function} listener Signal handler function.\n         * @param {Object} [listenerContext] Context on which listener will be executed (object that should represent the `this` variable inside listener function).\n         * @param {Number} [priority] The priority level of the event listener. Listeners with higher priority will be executed before listeners with lower priority. Listeners with same priority level will be executed at the same order as they were added. (default = 0)\n         * @return {SignalBinding} An Object representing the binding between the Signal and listener.\n         */\n        addOnce : function (listener, listenerContext, priority) {\n            validateListener(listener, 'addOnce');\n            return this._registerListener(listener, true, listenerContext, priority);\n        },\n\n        /**\n         * Remove a single listener from the dispatch queue.\n         * @param {Function} listener Handler function that should be removed.\n         * @param {Object} [context] Execution context (since you can add the same handler multiple times if executing in a different context).\n         * @return {Function} Listener handler function.\n         */\n        remove : function (listener, context) {\n            validateListener(listener, 'remove');\n\n            var i = this._indexOfListener(listener, context);\n            if (i !== -1) {\n                this._bindings[i]._destroy(); //no reason to a SignalBinding exist if it isn't attached to a signal\n                this._bindings.splice(i, 1);\n            }\n            return listener;\n        },\n\n        /**\n         * Remove all listeners from the Signal.\n         */\n        removeAll : function () {\n            var n = this._bindings.length;\n            while (n--) {\n                this._bindings[n]._destroy();\n            }\n            this._bindings.length = 0;\n        },\n\n        /**\n         * @return {number} Number of listeners attached to the Signal.\n         */\n        getNumListeners : function () {\n            return this._bindings.length;\n        },\n\n        /**\n         * Stop propagation of the event, blocking the dispatch to next listeners on the queue.\n         * <p><strong>IMPORTANT:</strong> should be called only during signal dispatch, calling it before/after dispatch won't affect signal broadcast.</p>\n         * @see Signal.prototype.disable\n         */\n        halt : function () {\n            this._shouldPropagate = false;\n        },\n\n        /**\n         * Dispatch/Broadcast Signal to all listeners added to the queue.\n         * @param {...*} [params] Parameters that should be passed to each handler.\n         */\n        dispatch : function (params) {\n            if (! this.active) {\n                return;\n            }\n\n            var paramsArr = Array.prototype.slice.call(arguments),\n                n = this._bindings.length,\n                bindings;\n\n            if (this.memorize) {\n                this._prevParams = paramsArr;\n            }\n\n            if (! n) {\n                //should come after memorize\n                return;\n            }\n\n            bindings = this._bindings.slice(); //clone array in case add/remove items during dispatch\n            this._shouldPropagate = true; //in case `halt` was called before dispatch or during the previous dispatch.\n\n            //execute all callbacks until end of the list or until a callback returns `false` or stops propagation\n            //reverse loop since listeners with higher priority will be added at the end of the list\n            do { n--; } while (bindings[n] && this._shouldPropagate && bindings[n].execute(paramsArr) !== false);\n        },\n\n        /**\n         * Forget memorized arguments.\n         * @see Signal.memorize\n         */\n        forget : function(){\n            this._prevParams = null;\n        },\n\n        /**\n         * Remove all bindings from signal and destroy any reference to external objects (destroy Signal object).\n         * <p><strong>IMPORTANT:</strong> calling any method on the signal instance after calling dispose will throw errors.</p>\n         */\n        dispose : function () {\n            this.removeAll();\n            delete this._bindings;\n            delete this._prevParams;\n        },\n\n        /**\n         * @return {string} String representation of the object.\n         */\n        toString : function () {\n            return '[Signal active:'+ this.active +' numListeners:'+ this.getNumListeners() +']';\n        }\n\n    };\n\n\n    // Namespace -----------------------------------------------------\n    //================================================================\n\n    /**\n     * Signals namespace\n     * @namespace\n     * @name signals\n     */\n    var signals = Signal;\n\n    /**\n     * Custom event broadcaster\n     * @see Signal\n     */\n    // alias for backwards compatibility (see #gh-44)\n    signals.Signal = Signal;\n\n\n\n    //exports to multiple environments\n    if(typeof define === 'function' && define.amd){ //AMD\n        define(function () { return signals; });\n    } else if (typeof module !== 'undefined' && module.exports){ //node\n        module.exports = signals;\n    } else { //browser\n        //use string because of Google closure compiler ADVANCED_MODE\n        /*jslint sub:true */\n        global['signals'] = signals;\n    }\n\n}(this));\n\n},{}],119:[function(require,module,exports){\n/*jshint browser:true, node:true*/\n\n'use strict';\n\nmodule.exports = Delegate;\n\n/**\n * DOM event delegator\n *\n * The delegator will listen\n * for events that bubble up\n * to the root node.\n *\n * @constructor\n * @param {Node|string} [root] The root node or a selector string matching the root node\n */\nfunction Delegate(root) {\n\n  /**\n   * Maintain a map of listener\n   * lists, keyed by event name.\n   *\n   * @type Object\n   */\n  this.listenerMap = [{}, {}];\n  if (root) {\n    this.root(root);\n  }\n\n  /** @type function() */\n  this.handle = Delegate.prototype.handle.bind(this);\n}\n\n/**\n * Start listening for events\n * on the provided DOM element\n *\n * @param  {Node|string} [root] The root node or a selector string matching the root node\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.root = function(root) {\n  var listenerMap = this.listenerMap;\n  var eventType;\n\n  // Remove master event listeners\n  if (this.rootElement) {\n    for (eventType in listenerMap[1]) {\n      if (listenerMap[1].hasOwnProperty(eventType)) {\n        this.rootElement.removeEventListener(eventType, this.handle, true);\n      }\n    }\n    for (eventType in listenerMap[0]) {\n      if (listenerMap[0].hasOwnProperty(eventType)) {\n        this.rootElement.removeEventListener(eventType, this.handle, false);\n      }\n    }\n  }\n\n  // If no root or root is not\n  // a dom node, then remove internal\n  // root reference and exit here\n  if (!root || !root.addEventListener) {\n    if (this.rootElement) {\n      delete this.rootElement;\n    }\n    return this;\n  }\n\n  /**\n   * The root node at which\n   * listeners are attached.\n   *\n   * @type Node\n   */\n  this.rootElement = root;\n\n  // Set up master event listeners\n  for (eventType in listenerMap[1]) {\n    if (listenerMap[1].hasOwnProperty(eventType)) {\n      this.rootElement.addEventListener(eventType, this.handle, true);\n    }\n  }\n  for (eventType in listenerMap[0]) {\n    if (listenerMap[0].hasOwnProperty(eventType)) {\n      this.rootElement.addEventListener(eventType, this.handle, false);\n    }\n  }\n\n  return this;\n};\n\n/**\n * @param {string} eventType\n * @returns boolean\n */\nDelegate.prototype.captureForType = function(eventType) {\n  return ['blur', 'error', 'focus', 'load', 'resize', 'scroll'].indexOf(eventType) !== -1;\n};\n\n/**\n * Attach a handler to one\n * event for all elements\n * that match the selector,\n * now or in the future\n *\n * The handler function receives\n * three arguments: the DOM event\n * object, the node that matched\n * the selector while the event\n * was bubbling and a reference\n * to itself. Within the handler,\n * 'this' is equal to the second\n * argument.\n *\n * The node that actually received\n * the event can be accessed via\n * 'event.target'.\n *\n * @param {string} eventType Listen for these events\n * @param {string|undefined} selector Only handle events on elements matching this selector, if undefined match root element\n * @param {function()} handler Handler function - event data passed here will be in event.data\n * @param {Object} [eventData] Data to pass in event.data\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.on = function(eventType, selector, handler, useCapture) {\n  var root, listenerMap, matcher, matcherParam;\n\n  if (!eventType) {\n    throw new TypeError('Invalid event type: ' + eventType);\n  }\n\n  // handler can be passed as\n  // the second or third argument\n  if (typeof selector === 'function') {\n    useCapture = handler;\n    handler = selector;\n    selector = null;\n  }\n\n  // Fallback to sensible defaults\n  // if useCapture not set\n  if (useCapture === undefined) {\n    useCapture = this.captureForType(eventType);\n  }\n\n  if (typeof handler !== 'function') {\n    throw new TypeError('Handler must be a type of Function');\n  }\n\n  root = this.rootElement;\n  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n\n  // Add master handler for type if not created yet\n  if (!listenerMap[eventType]) {\n    if (root) {\n      root.addEventListener(eventType, this.handle, useCapture);\n    }\n    listenerMap[eventType] = [];\n  }\n\n  if (!selector) {\n    matcherParam = null;\n\n    // COMPLEX - matchesRoot needs to have access to\n    // this.rootElement, so bind the function to this.\n    matcher = matchesRoot.bind(this);\n\n  // Compile a matcher for the given selector\n  } else if (/^[a-z]+$/i.test(selector)) {\n    matcherParam = selector;\n    matcher = matchesTag;\n  } else if (/^#[a-z0-9\\-_]+$/i.test(selector)) {\n    matcherParam = selector.slice(1);\n    matcher = matchesId;\n  } else {\n    matcherParam = selector;\n    matcher = matches;\n  }\n\n  // Add to the list of listeners\n  listenerMap[eventType].push({\n    selector: selector,\n    handler: handler,\n    matcher: matcher,\n    matcherParam: matcherParam\n  });\n\n  return this;\n};\n\n/**\n * Remove an event handler\n * for elements that match\n * the selector, forever\n *\n * @param {string} [eventType] Remove handlers for events matching this type, considering the other parameters\n * @param {string} [selector] If this parameter is omitted, only handlers which match the other two will be removed\n * @param {function()} [handler] If this parameter is omitted, only handlers which match the previous two will be removed\n * @returns {Delegate} This method is chainable\n */\nDelegate.prototype.off = function(eventType, selector, handler, useCapture) {\n  var i, listener, listenerMap, listenerList, singleEventType;\n\n  // Handler can be passed as\n  // the second or third argument\n  if (typeof selector === 'function') {\n    useCapture = handler;\n    handler = selector;\n    selector = null;\n  }\n\n  // If useCapture not set, remove\n  // all event listeners\n  if (useCapture === undefined) {\n    this.off(eventType, selector, handler, true);\n    this.off(eventType, selector, handler, false);\n    return this;\n  }\n\n  listenerMap = this.listenerMap[useCapture ? 1 : 0];\n  if (!eventType) {\n    for (singleEventType in listenerMap) {\n      if (listenerMap.hasOwnProperty(singleEventType)) {\n        this.off(singleEventType, selector, handler);\n      }\n    }\n\n    return this;\n  }\n\n  listenerList = listenerMap[eventType];\n  if (!listenerList || !listenerList.length) {\n    return this;\n  }\n\n  // Remove only parameter matches\n  // if specified\n  for (i = listenerList.length - 1; i >= 0; i--) {\n    listener = listenerList[i];\n\n    if ((!selector || selector === listener.selector) && (!handler || handler === listener.handler)) {\n      listenerList.splice(i, 1);\n    }\n  }\n\n  // All listeners removed\n  if (!listenerList.length) {\n    delete listenerMap[eventType];\n\n    // Remove the main handler\n    if (this.rootElement) {\n      this.rootElement.removeEventListener(eventType, this.handle, useCapture);\n    }\n  }\n\n  return this;\n};\n\n\n/**\n * Handle an arbitrary event.\n *\n * @param {Event} event\n */\nDelegate.prototype.handle = function(event) {\n  var i, l, type = event.type, root, phase, listener, returned, listenerList = [], target, /** @const */ EVENTIGNORE = 'ftLabsDelegateIgnore';\n\n  if (event[EVENTIGNORE] === true) {\n    return;\n  }\n\n  target = event.target;\n\n  // Hardcode value of Node.TEXT_NODE\n  // as not defined in IE8\n  if (target.nodeType === 3) {\n    target = target.parentNode;\n  }\n\n  root = this.rootElement;\n\n  phase = event.eventPhase || ( event.target !== event.currentTarget ? 3 : 2 );\n  \n  switch (phase) {\n    case 1: //Event.CAPTURING_PHASE:\n      listenerList = this.listenerMap[1][type];\n    break;\n    case 2: //Event.AT_TARGET:\n      if (this.listenerMap[0] && this.listenerMap[0][type]) listenerList = listenerList.concat(this.listenerMap[0][type]);\n      if (this.listenerMap[1] && this.listenerMap[1][type]) listenerList = listenerList.concat(this.listenerMap[1][type]);\n    break;\n    case 3: //Event.BUBBLING_PHASE:\n      listenerList = this.listenerMap[0][type];\n    break;\n  }\n\n  // Need to continuously check\n  // that the specific list is\n  // still populated in case one\n  // of the callbacks actually\n  // causes the list to be destroyed.\n  l = listenerList.length;\n  while (target && l) {\n    for (i = 0; i < l; i++) {\n      listener = listenerList[i];\n\n      // Bail from this loop if\n      // the length changed and\n      // no more listeners are\n      // defined between i and l.\n      if (!listener) {\n        break;\n      }\n\n      // Check for match and fire\n      // the event if there's one\n      //\n      // TODO:MCG:20120117: Need a way\n      // to check if event#stopImmediatePropagation\n      // was called. If so, break both loops.\n      if (listener.matcher.call(target, listener.matcherParam, target)) {\n        returned = this.fire(event, target, listener);\n      }\n\n      // Stop propagation to subsequent\n      // callbacks if the callback returned\n      // false\n      if (returned === false) {\n        event[EVENTIGNORE] = true;\n        event.preventDefault();\n        return;\n      }\n    }\n\n    // TODO:MCG:20120117: Need a way to\n    // check if event#stopPropagation\n    // was called. If so, break looping\n    // through the DOM. Stop if the\n    // delegation root has been reached\n    if (target === root) {\n      break;\n    }\n\n    l = listenerList.length;\n    target = target.parentElement;\n  }\n};\n\n/**\n * Fire a listener on a target.\n *\n * @param {Event} event\n * @param {Node} target\n * @param {Object} listener\n * @returns {boolean}\n */\nDelegate.prototype.fire = function(event, target, listener) {\n  return listener.handler.call(target, event, target);\n};\n\n/**\n * Check whether an element\n * matches a generic selector.\n *\n * @type function()\n * @param {string} selector A CSS selector\n */\nvar matches = (function(el) {\n  if (!el) return;\n  var p = el.prototype;\n  return (p.matches || p.matchesSelector || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector);\n}(Element));\n\n/**\n * Check whether an element\n * matches a tag selector.\n *\n * Tags are NOT case-sensitive,\n * except in XML (and XML-based\n * languages such as XHTML).\n *\n * @param {string} tagName The tag name to test against\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesTag(tagName, element) {\n  return tagName.toLowerCase() === element.tagName.toLowerCase();\n}\n\n/**\n * Check whether an element\n * matches the root.\n *\n * @param {?String} selector In this case this is always passed through as null and not used\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesRoot(selector, element) {\n  /*jshint validthis:true*/\n  if (this.rootElement === window) return element === document;\n  return this.rootElement === element;\n}\n\n/**\n * Check whether the ID of\n * the element in 'this'\n * matches the given ID.\n *\n * IDs are case-sensitive.\n *\n * @param {string} id The ID to test against\n * @param {Element} element The element to test with\n * @returns boolean\n */\nfunction matchesId(id, element) {\n  return id === element.id;\n}\n\n/**\n * Short hand for off()\n * and root(), ie both\n * with no parameters\n *\n * @return void\n */\nDelegate.prototype.destroy = function() {\n  this.off();\n  this.root();\n};\n\n},{}],120:[function(require,module,exports){\n/*jshint browser:true, node:true*/\n\n'use strict';\n\n/**\n * @preserve Create and manage a DOM event delegator.\n *\n * @version 0.3.0\n * @codingstandard ftlabs-jsv2\n * @copyright The Financial Times Limited [All Rights Reserved]\n * @license MIT License (see LICENSE.txt)\n */\nvar Delegate = require('./delegate');\n\nmodule.exports = function(root) {\n  return new Delegate(root);\n};\n\nmodule.exports.Delegate = Delegate;\n\n},{\"./delegate\":119}],121:[function(require,module,exports){\n/*\n  Module dependencies\n*/\nvar ElementType = require('domelementtype');\nvar entities = require('entities');\n\n/*\n  Boolean Attributes\n*/\nvar booleanAttributes = {\n  __proto__: null,\n  allowfullscreen: true,\n  async: true,\n  autofocus: true,\n  autoplay: true,\n  checked: true,\n  controls: true,\n  default: true,\n  defer: true,\n  disabled: true,\n  hidden: true,\n  ismap: true,\n  loop: true,\n  multiple: true,\n  muted: true,\n  open: true,\n  readonly: true,\n  required: true,\n  reversed: true,\n  scoped: true,\n  seamless: true,\n  selected: true,\n  typemustmatch: true\n};\n\nvar unencodedElements = {\n  __proto__: null,\n  style: true,\n  script: true,\n  xmp: true,\n  iframe: true,\n  noembed: true,\n  noframes: true,\n  plaintext: true,\n  noscript: true\n};\n\n/*\n  Format attributes\n*/\nfunction formatAttrs(attributes, opts) {\n  if (!attributes) return;\n\n  var output = '',\n      value;\n\n  // Loop through the attributes\n  for (var key in attributes) {\n    value = attributes[key];\n    if (output) {\n      output += ' ';\n    }\n\n    if (!value && booleanAttributes[key]) {\n      output += key;\n    } else {\n      output += key + '=\"' + (opts.decodeEntities ? entities.encodeXML(value) : value) + '\"';\n    }\n  }\n\n  return output;\n}\n\n/*\n  Self-enclosing tags (stolen from node-htmlparser)\n*/\nvar singleTag = {\n  __proto__: null,\n  area: true,\n  base: true,\n  basefont: true,\n  br: true,\n  col: true,\n  command: true,\n  embed: true,\n  frame: true,\n  hr: true,\n  img: true,\n  input: true,\n  isindex: true,\n  keygen: true,\n  link: true,\n  meta: true,\n  param: true,\n  source: true,\n  track: true,\n  wbr: true,\n};\n\n\nvar render = module.exports = function(dom, opts) {\n  if (!Array.isArray(dom) && !dom.cheerio) dom = [dom];\n  opts = opts || {};\n\n  var output = '';\n\n  for(var i = 0; i < dom.length; i++){\n    var elem = dom[i];\n\n    if (elem.type === 'root')\n      output += render(elem.children, opts);\n    else if (ElementType.isTag(elem))\n      output += renderTag(elem, opts);\n    else if (elem.type === ElementType.Directive)\n      output += renderDirective(elem);\n    else if (elem.type === ElementType.Comment)\n      output += renderComment(elem);\n    else if (elem.type === ElementType.CDATA)\n      output += renderCdata(elem);\n    else\n      output += renderText(elem, opts);\n  }\n\n  return output;\n};\n\nfunction renderTag(elem, opts) {\n  // Handle SVG\n  if (elem.name === \"svg\") opts = {decodeEntities: opts.decodeEntities, xmlMode: true};\n\n  var tag = '<' + elem.name,\n      attribs = formatAttrs(elem.attribs, opts);\n\n  if (attribs) {\n    tag += ' ' + attribs;\n  }\n\n  if (\n    opts.xmlMode\n    && (!elem.children || elem.children.length === 0)\n  ) {\n    tag += '/>';\n  } else {\n    tag += '>';\n    if (elem.children) {\n      tag += render(elem.children, opts);\n    }\n\n    if (!singleTag[elem.name] || opts.xmlMode) {\n      tag += '</' + elem.name + '>';\n    }\n  }\n\n  return tag;\n}\n\nfunction renderDirective(elem) {\n  return '<' + elem.data + '>';\n}\n\nfunction renderText(elem, opts) {\n  var data = elem.data || '';\n\n  // if entities weren't decoded, no need to encode them back\n  if (opts.decodeEntities && !(elem.parent && elem.parent.name in unencodedElements)) {\n    data = entities.encodeXML(data);\n  }\n\n  return data;\n}\n\nfunction renderCdata(elem) {\n  return '<![CDATA[' + elem.children[0].data + ']]>';\n}\n\nfunction renderComment(elem) {\n  return '<!--' + elem.data + '-->';\n}\n\n},{\"domelementtype\":122,\"entities\":139}],122:[function(require,module,exports){\n//Types of elements found in the DOM\nmodule.exports = {\n\tText: \"text\", //Text\n\tDirective: \"directive\", //<? ... ?>\n\tComment: \"comment\", //<!-- ... -->\n\tScript: \"script\", //<script> tags\n\tStyle: \"style\", //<style> tags\n\tTag: \"tag\", //Any tag\n\tCDATA: \"cdata\", //<![CDATA[ ... ]]>\n\n\tisTag: function(elem){\n\t\treturn elem.type === \"tag\" || elem.type === \"script\" || elem.type === \"style\";\n\t}\n};\n},{}],123:[function(require,module,exports){\n//Types of elements found in the DOM\nmodule.exports = {\n\tText: \"text\", //Text\n\tDirective: \"directive\", //<? ... ?>\n\tComment: \"comment\", //<!-- ... -->\n\tScript: \"script\", //<script> tags\n\tStyle: \"style\", //<style> tags\n\tTag: \"tag\", //Any tag\n\tCDATA: \"cdata\", //<![CDATA[ ... ]]>\n\tDoctype: \"doctype\",\n\n\tisTag: function(elem){\n\t\treturn elem.type === \"tag\" || elem.type === \"script\" || elem.type === \"style\";\n\t}\n};\n\n},{}],124:[function(require,module,exports){\nvar ElementType = require(\"domelementtype\");\n\nvar re_whitespace = /\\s+/g;\nvar NodePrototype = require(\"./lib/node\");\nvar ElementPrototype = require(\"./lib/element\");\n\nfunction DomHandler(callback, options, elementCB){\n\tif(typeof callback === \"object\"){\n\t\telementCB = options;\n\t\toptions = callback;\n\t\tcallback = null;\n\t} else if(typeof options === \"function\"){\n\t\telementCB = options;\n\t\toptions = defaultOpts;\n\t}\n\tthis._callback = callback;\n\tthis._options = options || defaultOpts;\n\tthis._elementCB = elementCB;\n\tthis.dom = [];\n\tthis._done = false;\n\tthis._tagStack = [];\n\tthis._parser = this._parser || null;\n}\n\n//default options\nvar defaultOpts = {\n\tnormalizeWhitespace: false, //Replace all whitespace with single spaces\n\twithStartIndices: false, //Add startIndex properties to nodes\n};\n\nDomHandler.prototype.onparserinit = function(parser){\n\tthis._parser = parser;\n};\n\n//Resets the handler back to starting state\nDomHandler.prototype.onreset = function(){\n\tDomHandler.call(this, this._callback, this._options, this._elementCB);\n};\n\n//Signals the handler that parsing is done\nDomHandler.prototype.onend = function(){\n\tif(this._done) return;\n\tthis._done = true;\n\tthis._parser = null;\n\tthis._handleCallback(null);\n};\n\nDomHandler.prototype._handleCallback =\nDomHandler.prototype.onerror = function(error){\n\tif(typeof this._callback === \"function\"){\n\t\tthis._callback(error, this.dom);\n\t} else {\n\t\tif(error) throw error;\n\t}\n};\n\nDomHandler.prototype.onclosetag = function(){\n\t//if(this._tagStack.pop().name !== name) this._handleCallback(Error(\"Tagname didn't match!\"));\n\tvar elem = this._tagStack.pop();\n\tif(this._elementCB) this._elementCB(elem);\n};\n\nDomHandler.prototype._addDomElement = function(element){\n\tvar parent = this._tagStack[this._tagStack.length - 1];\n\tvar siblings = parent ? parent.children : this.dom;\n\tvar previousSibling = siblings[siblings.length - 1];\n\n\telement.next = null;\n\n\tif(this._options.withStartIndices){\n\t\telement.startIndex = this._parser.startIndex;\n\t}\n\n\tif (this._options.withDomLvl1) {\n\t\telement.__proto__ = element.type === \"tag\" ? ElementPrototype : NodePrototype;\n\t}\n\n\tif(previousSibling){\n\t\telement.prev = previousSibling;\n\t\tpreviousSibling.next = element;\n\t} else {\n\t\telement.prev = null;\n\t}\n\n\tsiblings.push(element);\n\telement.parent = parent || null;\n};\n\nDomHandler.prototype.onopentag = function(name, attribs){\n\tvar element = {\n\t\ttype: name === \"script\" ? ElementType.Script : name === \"style\" ? ElementType.Style : ElementType.Tag,\n\t\tname: name,\n\t\tattribs: attribs,\n\t\tchildren: []\n\t};\n\n\tthis._addDomElement(element);\n\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.ontext = function(data){\n\t//the ignoreWhitespace is officially dropped, but for now,\n\t//it's an alias for normalizeWhitespace\n\tvar normalize = this._options.normalizeWhitespace || this._options.ignoreWhitespace;\n\n\tvar lastTag;\n\n\tif(!this._tagStack.length && this.dom.length && (lastTag = this.dom[this.dom.length-1]).type === ElementType.Text){\n\t\tif(normalize){\n\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t} else {\n\t\t\tlastTag.data += data;\n\t\t}\n\t} else {\n\t\tif(\n\t\t\tthis._tagStack.length &&\n\t\t\t(lastTag = this._tagStack[this._tagStack.length - 1]) &&\n\t\t\t(lastTag = lastTag.children[lastTag.children.length - 1]) &&\n\t\t\tlastTag.type === ElementType.Text\n\t\t){\n\t\t\tif(normalize){\n\t\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t\t} else {\n\t\t\t\tlastTag.data += data;\n\t\t\t}\n\t\t} else {\n\t\t\tif(normalize){\n\t\t\t\tdata = data.replace(re_whitespace, \" \");\n\t\t\t}\n\n\t\t\tthis._addDomElement({\n\t\t\t\tdata: data,\n\t\t\t\ttype: ElementType.Text\n\t\t\t});\n\t\t}\n\t}\n};\n\nDomHandler.prototype.oncomment = function(data){\n\tvar lastTag = this._tagStack[this._tagStack.length - 1];\n\n\tif(lastTag && lastTag.type === ElementType.Comment){\n\t\tlastTag.data += data;\n\t\treturn;\n\t}\n\n\tvar element = {\n\t\tdata: data,\n\t\ttype: ElementType.Comment\n\t};\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncdatastart = function(){\n\tvar element = {\n\t\tchildren: [{\n\t\t\tdata: \"\",\n\t\t\ttype: ElementType.Text\n\t\t}],\n\t\ttype: ElementType.CDATA\n\t};\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncommentend = DomHandler.prototype.oncdataend = function(){\n\tthis._tagStack.pop();\n};\n\nDomHandler.prototype.onprocessinginstruction = function(name, data){\n\tthis._addDomElement({\n\t\tname: name,\n\t\tdata: data,\n\t\ttype: ElementType.Directive\n\t});\n};\n\nmodule.exports = DomHandler;\n\n},{\"./lib/element\":125,\"./lib/node\":126,\"domelementtype\":123}],125:[function(require,module,exports){\n// DOM-Level-1-compliant structure\nvar NodePrototype = require('./node');\nvar ElementPrototype = module.exports = Object.create(NodePrototype);\n\nvar domLvl1 = {\n\ttagName: \"name\"\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(ElementPrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n\n},{\"./node\":126}],126:[function(require,module,exports){\n// This object will be used as the prototype for Nodes when creating a\n// DOM-Level-1-compliant structure.\nvar NodePrototype = module.exports = {\n\tget firstChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[0] || null;\n\t},\n\tget lastChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[children.length - 1] || null;\n\t},\n\tget nodeType() {\n\t\treturn nodeTypes[this.type] || nodeTypes.element;\n\t}\n};\n\nvar domLvl1 = {\n\ttagName: \"name\",\n\tchildNodes: \"children\",\n\tparentNode: \"parent\",\n\tpreviousSibling: \"prev\",\n\tnextSibling: \"next\",\n\tnodeValue: \"data\"\n};\n\nvar nodeTypes = {\n\telement: 1,\n\ttext: 3,\n\tcdata: 4,\n\tcomment: 8\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(NodePrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n\n},{}],127:[function(require,module,exports){\nvar DomUtils = module.exports;\n\n[\n\trequire(\"./lib/stringify\"),\n\trequire(\"./lib/traversal\"),\n\trequire(\"./lib/manipulation\"),\n\trequire(\"./lib/querying\"),\n\trequire(\"./lib/legacy\"),\n\trequire(\"./lib/helpers\")\n].forEach(function(ext){\n\tObject.keys(ext).forEach(function(key){\n\t\tDomUtils[key] = ext[key].bind(DomUtils);\n\t});\n});\n\n},{\"./lib/helpers\":128,\"./lib/legacy\":129,\"./lib/manipulation\":130,\"./lib/querying\":131,\"./lib/stringify\":132,\"./lib/traversal\":133}],128:[function(require,module,exports){\n// removeSubsets\n// Given an array of nodes, remove any member that is contained by another.\nexports.removeSubsets = function(nodes) {\n\tvar idx = nodes.length, node, ancestor, replace;\n\n\t// Check if each node (or one of its ancestors) is already contained in the\n\t// array.\n\twhile (--idx > -1) {\n\t\tnode = ancestor = nodes[idx];\n\n\t\t// Temporarily remove the node under consideration\n\t\tnodes[idx] = null;\n\t\treplace = true;\n\n\t\twhile (ancestor) {\n\t\t\tif (nodes.indexOf(ancestor) > -1) {\n\t\t\t\treplace = false;\n\t\t\t\tnodes.splice(idx, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tancestor = ancestor.parent;\n\t\t}\n\n\t\t// If the node has been found to be unique, re-insert it.\n\t\tif (replace) {\n\t\t\tnodes[idx] = node;\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\n// Source: http://dom.spec.whatwg.org/#dom-node-comparedocumentposition\nvar POSITION = {\n\tDISCONNECTED: 1,\n\tPRECEDING: 2,\n\tFOLLOWING: 4,\n\tCONTAINS: 8,\n\tCONTAINED_BY: 16\n};\n\n// Compare the position of one node against another node in any other document.\n// The return value is a bitmask with the following values:\n//\n// document order:\n// > There is an ordering, document order, defined on all the nodes in the\n// > document corresponding to the order in which the first character of the\n// > XML representation of each node occurs in the XML representation of the\n// > document after expansion of general entities. Thus, the document element\n// > node will be the first node. Element nodes occur before their children.\n// > Thus, document order orders element nodes in order of the occurrence of\n// > their start-tag in the XML (after expansion of entities). The attribute\n// > nodes of an element occur after the element and before its children. The\n// > relative order of attribute nodes is implementation-dependent./\n// Source:\n// http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n//\n// @argument {Node} nodaA The first node to use in the comparison\n// @argument {Node} nodeB The second node to use in the comparison\n//\n// @return {Number} A bitmask describing the input nodes' relative position.\n//         See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n//         a description of these values.\nvar comparePos = exports.compareDocumentPosition = function(nodeA, nodeB) {\n\tvar aParents = [];\n\tvar bParents = [];\n\tvar current, sharedParent, siblings, aSibling, bSibling, idx;\n\n\tif (nodeA === nodeB) {\n\t\treturn 0;\n\t}\n\n\tcurrent = nodeA;\n\twhile (current) {\n\t\taParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\tcurrent = nodeB;\n\twhile (current) {\n\t\tbParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\n\tidx = 0;\n\twhile (aParents[idx] === bParents[idx]) {\n\t\tidx++;\n\t}\n\n\tif (idx === 0) {\n\t\treturn POSITION.DISCONNECTED;\n\t}\n\n\tsharedParent = aParents[idx - 1];\n\tsiblings = sharedParent.children;\n\taSibling = aParents[idx];\n\tbSibling = bParents[idx];\n\n\tif (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n\t\tif (sharedParent === nodeB) {\n\t\t\treturn POSITION.FOLLOWING | POSITION.CONTAINED_BY;\n\t\t}\n\t\treturn POSITION.FOLLOWING;\n\t} else {\n\t\tif (sharedParent === nodeA) {\n\t\t\treturn POSITION.PRECEDING | POSITION.CONTAINS;\n\t\t}\n\t\treturn POSITION.PRECEDING;\n\t}\n};\n\n// Sort an array of nodes based on their relative position in the document and\n// remove any duplicate nodes. If the array contains nodes that do not belong\n// to the same document, sort order is unspecified.\n//\n// @argument {Array} nodes Array of DOM nodes\n//\n// @returns {Array} collection of unique nodes, sorted in document order\nexports.uniqueSort = function(nodes) {\n\tvar idx = nodes.length, node, position;\n\n\tnodes = nodes.slice();\n\n\twhile (--idx > -1) {\n\t\tnode = nodes[idx];\n\t\tposition = nodes.indexOf(node);\n\t\tif (position > -1 && position < idx) {\n\t\t\tnodes.splice(idx, 1);\n\t\t}\n\t}\n\tnodes.sort(function(a, b) {\n\t\tvar relative = comparePos(a, b);\n\t\tif (relative & POSITION.PRECEDING) {\n\t\t\treturn -1;\n\t\t} else if (relative & POSITION.FOLLOWING) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn nodes;\n};\n\n},{}],129:[function(require,module,exports){\nvar ElementType = require(\"domelementtype\");\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){\n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof data === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nfunction combineFuncs(a, b){\n\treturn function(elem){\n\t\treturn a(elem) || b(elem);\n\t};\n}\n\nexports.getElements = function(options, element, recurse, limit){\n\tvar funcs = Object.keys(options).map(function(key){\n\t\tvar value = options[key];\n\t\treturn key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n\t});\n\n\treturn funcs.length === 0 ? [] : this.filter(\n\t\tfuncs.reduce(combineFuncs),\n\t\telement, recurse, limit\n\t);\n};\n\nexports.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function(name, element, recurse, limit){\n\treturn this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function(type, element, recurse, limit){\n\treturn this.filter(Checks.tag_type(type), element, recurse, limit);\n};\n\n},{\"domelementtype\":123}],130:[function(require,module,exports){\nexports.removeElement = function(elem){\n\tif(elem.prev) elem.prev.next = elem.next;\n\tif(elem.next) elem.next.prev = elem.prev;\n\n\tif(elem.parent){\n\t\tvar childs = elem.parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 1);\n\t}\n};\n\nexports.replaceElement = function(elem, replacement){\n\tvar prev = replacement.prev = elem.prev;\n\tif(prev){\n\t\tprev.next = replacement;\n\t}\n\n\tvar next = replacement.next = elem.next;\n\tif(next){\n\t\tnext.prev = replacement;\n\t}\n\n\tvar parent = replacement.parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds[childs.lastIndexOf(elem)] = replacement;\n\t}\n};\n\nexports.appendChild = function(elem, child){\n\tchild.parent = elem;\n\n\tif(elem.children.push(child) !== 1){\n\t\tvar sibling = elem.children[elem.children.length - 2];\n\t\tsibling.next = child;\n\t\tchild.prev = sibling;\n\t\tchild.next = null;\n\t}\n};\n\nexports.append = function(elem, next){\n\tvar parent = elem.parent,\n\t\tcurrNext = elem.next;\n\n\tnext.next = currNext;\n\tnext.prev = elem;\n\telem.next = next;\n\tnext.parent = parent;\n\n\tif(currNext){\n\t\tcurrNext.prev = next;\n\t\tif(parent){\n\t\t\tvar childs = parent.children;\n\t\t\tchilds.splice(childs.lastIndexOf(currNext), 0, next);\n\t\t}\n\t} else if(parent){\n\t\tparent.children.push(next);\n\t}\n};\n\nexports.prepend = function(elem, prev){\n\tvar parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 0, prev);\n\t}\n\n\tif(elem.prev){\n\t\telem.prev.next = prev;\n\t}\n\t\n\tprev.parent = parent;\n\tprev.prev = elem.prev;\n\tprev.next = elem;\n\telem.prev = prev;\n};\n\n\n\n},{}],131:[function(require,module,exports){\nvar isTag = require(\"domelementtype\").isTag;\n\nmodule.exports = {\n\tfilter: filter,\n\tfind: find,\n\tfindOneChild: findOneChild,\n\tfindOne: findOne,\n\texistsOne: existsOne,\n\tfindAll: findAll\n};\n\nfunction filter(test, element, recurse, limit){\n\tif(!Array.isArray(element)) element = [element];\n\n\tif(typeof limit !== \"number\" || !isFinite(limit)){\n\t\tlimit = Infinity;\n\t}\n\treturn find(test, element, recurse !== false, limit);\n}\n\nfunction find(test, elems, recurse, limit){\n\tvar result = [], childs;\n\n\tfor(var i = 0, j = elems.length; i < j; i++){\n\t\tif(test(elems[i])){\n\t\t\tresult.push(elems[i]);\n\t\t\tif(--limit <= 0) break;\n\t\t}\n\n\t\tchilds = elems[i].children;\n\t\tif(recurse && childs && childs.length > 0){\n\t\t\tchilds = find(test, childs, recurse, limit);\n\t\t\tresult = result.concat(childs);\n\t\t\tlimit -= childs.length;\n\t\t\tif(limit <= 0) break;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction findOneChild(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(test(elems[i])) return elems[i];\n\t}\n\n\treturn null;\n}\n\nfunction findOne(test, elems){\n\tvar elem = null;\n\n\tfor(var i = 0, l = elems.length; i < l && !elem; i++){\n\t\tif(!isTag(elems[i])){\n\t\t\tcontinue;\n\t\t} else if(test(elems[i])){\n\t\t\telem = elems[i];\n\t\t} else if(elems[i].children.length > 0){\n\t\t\telem = findOne(test, elems[i].children);\n\t\t}\n\t}\n\n\treturn elem;\n}\n\nfunction existsOne(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(\n\t\t\tisTag(elems[i]) && (\n\t\t\t\ttest(elems[i]) || (\n\t\t\t\t\telems[i].children.length > 0 &&\n\t\t\t\t\texistsOne(test, elems[i].children)\n\t\t\t\t)\n\t\t\t)\n\t\t){\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction findAll(test, elems){\n\tvar result = [];\n\tfor(var i = 0, j = elems.length; i < j; i++){\n\t\tif(!isTag(elems[i])) continue;\n\t\tif(test(elems[i])) result.push(elems[i]);\n\n\t\tif(elems[i].children.length > 0){\n\t\t\tresult = result.concat(findAll(test, elems[i].children));\n\t\t}\n\t}\n\treturn result;\n}\n\n},{\"domelementtype\":123}],132:[function(require,module,exports){\nvar ElementType = require(\"domelementtype\"),\n    getOuterHTML = require(\"dom-serializer\"),\n    isTag = ElementType.isTag;\n\nmodule.exports = {\n\tgetInnerHTML: getInnerHTML,\n\tgetOuterHTML: getOuterHTML,\n\tgetText: getText\n};\n\nfunction getInnerHTML(elem, opts){\n\treturn elem.children ? elem.children.map(function(elem){\n\t\treturn getOuterHTML(elem, opts);\n\t}).join(\"\") : \"\";\n}\n\nfunction getText(elem){\n\tif(Array.isArray(elem)) return elem.map(getText).join(\"\");\n\tif(isTag(elem) || elem.type === ElementType.CDATA) return getText(elem.children);\n\tif(elem.type === ElementType.Text) return elem.data;\n\treturn \"\";\n}\n\n},{\"dom-serializer\":121,\"domelementtype\":123}],133:[function(require,module,exports){\nvar getChildren = exports.getChildren = function(elem){\n\treturn elem.children;\n};\n\nvar getParent = exports.getParent = function(elem){\n\treturn elem.parent;\n};\n\nexports.getSiblings = function(elem){\n\tvar parent = getParent(elem);\n\treturn parent ? getChildren(parent) : [elem];\n};\n\nexports.getAttributeValue = function(elem, name){\n\treturn elem.attribs && elem.attribs[name];\n};\n\nexports.hasAttrib = function(elem, name){\n\treturn !!elem.attribs && hasOwnProperty.call(elem.attribs, name);\n};\n\nexports.getName = function(elem){\n\treturn elem.name;\n};\n\n},{}],134:[function(require,module,exports){\nvar punycode = require('punycode');\nvar entities = require('./entities.json');\n\nmodule.exports = decode;\n\nfunction decode (str) {\n    if (typeof str !== 'string') {\n        throw new TypeError('Expected a String');\n    }\n\n    return str.replace(/&(#?[^;\\W]+;?)/g, function (_, match) {\n        var m;\n        if (m = /^#(\\d+);?$/.exec(match)) {\n            return punycode.ucs2.encode([ parseInt(m[1], 10) ]);\n        } else if (m = /^#[Xx]([A-Fa-f0-9]+);?/.exec(match)) {\n            return punycode.ucs2.encode([ parseInt(m[1], 16) ]);\n        } else {\n            // named entity\n            var hasSemi = /;$/.test(match);\n            var withoutSemi = hasSemi ? match.replace(/;$/, '') : match;\n            var target = entities[withoutSemi] || (hasSemi && entities[match]);\n\n            if (typeof target === 'number') {\n                return punycode.ucs2.encode([ target ]);\n            } else if (typeof target === 'string') {\n                return target;\n            } else {\n                return '&' + match;\n            }\n        }\n    });\n}\n\n},{\"./entities.json\":136,\"punycode\":192}],135:[function(require,module,exports){\nvar punycode = require('punycode');\nvar revEntities = require('./reversed.json');\n\nmodule.exports = encode;\n\nfunction encode (str, opts) {\n    if (typeof str !== 'string') {\n        throw new TypeError('Expected a String');\n    }\n    if (!opts) opts = {};\n\n    var numeric = true;\n    if (opts.named) numeric = false;\n    if (opts.numeric !== undefined) numeric = opts.numeric;\n\n    var special = opts.special || {\n        '\"': true, \"'\": true,\n        '<': true, '>': true,\n        '&': true\n    };\n\n    var codePoints = punycode.ucs2.decode(str);\n    var chars = [];\n    for (var i = 0; i < codePoints.length; i++) {\n        var cc = codePoints[i];\n        var c = punycode.ucs2.encode([ cc ]);\n        var e = revEntities[cc];\n        if (e && (cc >= 127 || special[c]) && !numeric) {\n            chars.push('&' + (/;$/.test(e) ? e : e + ';'));\n        }\n        else if (cc < 32 || cc >= 127 || special[c]) {\n            chars.push('&#' + cc + ';');\n        }\n        else {\n            chars.push(c);\n        }\n    }\n    return chars.join('');\n}\n\n},{\"./reversed.json\":138,\"punycode\":192}],136:[function(require,module,exports){\nmodule.exports={\n    \"Aacute;\": \"\\u00C1\",\n    \"Aacute\": \"\\u00C1\",\n    \"aacute;\": \"\\u00E1\",\n    \"aacute\": \"\\u00E1\",\n    \"Abreve;\": \"\\u0102\",\n    \"abreve;\": \"\\u0103\",\n    \"ac;\": \"\\u223E\",\n    \"acd;\": \"\\u223F\",\n    \"acE;\": \"\\u223E\\u0333\",\n    \"Acirc;\": \"\\u00C2\",\n    \"Acirc\": \"\\u00C2\",\n    \"acirc;\": \"\\u00E2\",\n    \"acirc\": \"\\u00E2\",\n    \"acute;\": \"\\u00B4\",\n    \"acute\": \"\\u00B4\",\n    \"Acy;\": \"\\u0410\",\n    \"acy;\": \"\\u0430\",\n    \"AElig;\": \"\\u00C6\",\n    \"AElig\": \"\\u00C6\",\n    \"aelig;\": \"\\u00E6\",\n    \"aelig\": \"\\u00E6\",\n    \"af;\": \"\\u2061\",\n    \"Afr;\": \"\\uD835\\uDD04\",\n    \"afr;\": \"\\uD835\\uDD1E\",\n    \"Agrave;\": \"\\u00C0\",\n    \"Agrave\": \"\\u00C0\",\n    \"agrave;\": \"\\u00E0\",\n    \"agrave\": \"\\u00E0\",\n    \"alefsym;\": \"\\u2135\",\n    \"aleph;\": \"\\u2135\",\n    \"Alpha;\": \"\\u0391\",\n    \"alpha;\": \"\\u03B1\",\n    \"Amacr;\": \"\\u0100\",\n    \"amacr;\": \"\\u0101\",\n    \"amalg;\": \"\\u2A3F\",\n    \"AMP;\": \"&\",\n    \"AMP\": \"&\",\n    \"amp;\": \"&\",\n    \"amp\": \"&\",\n    \"And;\": \"\\u2A53\",\n    \"and;\": \"\\u2227\",\n    \"andand;\": \"\\u2A55\",\n    \"andd;\": \"\\u2A5C\",\n    \"andslope;\": \"\\u2A58\",\n    \"andv;\": \"\\u2A5A\",\n    \"ang;\": \"\\u2220\",\n    \"ange;\": \"\\u29A4\",\n    \"angle;\": \"\\u2220\",\n    \"angmsd;\": \"\\u2221\",\n    \"angmsdaa;\": \"\\u29A8\",\n    \"angmsdab;\": \"\\u29A9\",\n    \"angmsdac;\": \"\\u29AA\",\n    \"angmsdad;\": \"\\u29AB\",\n    \"angmsdae;\": \"\\u29AC\",\n    \"angmsdaf;\": \"\\u29AD\",\n    \"angmsdag;\": \"\\u29AE\",\n    \"angmsdah;\": \"\\u29AF\",\n    \"angrt;\": \"\\u221F\",\n    \"angrtvb;\": \"\\u22BE\",\n    \"angrtvbd;\": \"\\u299D\",\n    \"angsph;\": \"\\u2222\",\n    \"angst;\": \"\\u00C5\",\n    \"angzarr;\": \"\\u237C\",\n    \"Aogon;\": \"\\u0104\",\n    \"aogon;\": \"\\u0105\",\n    \"Aopf;\": \"\\uD835\\uDD38\",\n    \"aopf;\": \"\\uD835\\uDD52\",\n    \"ap;\": \"\\u2248\",\n    \"apacir;\": \"\\u2A6F\",\n    \"apE;\": \"\\u2A70\",\n    \"ape;\": \"\\u224A\",\n    \"apid;\": \"\\u224B\",\n    \"apos;\": \"'\",\n    \"ApplyFunction;\": \"\\u2061\",\n    \"approx;\": \"\\u2248\",\n    \"approxeq;\": \"\\u224A\",\n    \"Aring;\": \"\\u00C5\",\n    \"Aring\": \"\\u00C5\",\n    \"aring;\": \"\\u00E5\",\n    \"aring\": \"\\u00E5\",\n    \"Ascr;\": \"\\uD835\\uDC9C\",\n    \"ascr;\": \"\\uD835\\uDCB6\",\n    \"Assign;\": \"\\u2254\",\n    \"ast;\": \"*\",\n    \"asymp;\": \"\\u2248\",\n    \"asympeq;\": \"\\u224D\",\n    \"Atilde;\": \"\\u00C3\",\n    \"Atilde\": \"\\u00C3\",\n    \"atilde;\": \"\\u00E3\",\n    \"atilde\": \"\\u00E3\",\n    \"Auml;\": \"\\u00C4\",\n    \"Auml\": \"\\u00C4\",\n    \"auml;\": \"\\u00E4\",\n    \"auml\": \"\\u00E4\",\n    \"awconint;\": \"\\u2233\",\n    \"awint;\": \"\\u2A11\",\n    \"backcong;\": \"\\u224C\",\n    \"backepsilon;\": \"\\u03F6\",\n    \"backprime;\": \"\\u2035\",\n    \"backsim;\": \"\\u223D\",\n    \"backsimeq;\": \"\\u22CD\",\n    \"Backslash;\": \"\\u2216\",\n    \"Barv;\": \"\\u2AE7\",\n    \"barvee;\": \"\\u22BD\",\n    \"Barwed;\": \"\\u2306\",\n    \"barwed;\": \"\\u2305\",\n    \"barwedge;\": \"\\u2305\",\n    \"bbrk;\": \"\\u23B5\",\n    \"bbrktbrk;\": \"\\u23B6\",\n    \"bcong;\": \"\\u224C\",\n    \"Bcy;\": \"\\u0411\",\n    \"bcy;\": \"\\u0431\",\n    \"bdquo;\": \"\\u201E\",\n    \"becaus;\": \"\\u2235\",\n    \"Because;\": \"\\u2235\",\n    \"because;\": \"\\u2235\",\n    \"bemptyv;\": \"\\u29B0\",\n    \"bepsi;\": \"\\u03F6\",\n    \"bernou;\": \"\\u212C\",\n    \"Bernoullis;\": \"\\u212C\",\n    \"Beta;\": \"\\u0392\",\n    \"beta;\": \"\\u03B2\",\n    \"beth;\": \"\\u2136\",\n    \"between;\": \"\\u226C\",\n    \"Bfr;\": \"\\uD835\\uDD05\",\n    \"bfr;\": \"\\uD835\\uDD1F\",\n    \"bigcap;\": \"\\u22C2\",\n    \"bigcirc;\": \"\\u25EF\",\n    \"bigcup;\": \"\\u22C3\",\n    \"bigodot;\": \"\\u2A00\",\n    \"bigoplus;\": \"\\u2A01\",\n    \"bigotimes;\": \"\\u2A02\",\n    \"bigsqcup;\": \"\\u2A06\",\n    \"bigstar;\": \"\\u2605\",\n    \"bigtriangledown;\": \"\\u25BD\",\n    \"bigtriangleup;\": \"\\u25B3\",\n    \"biguplus;\": \"\\u2A04\",\n    \"bigvee;\": \"\\u22C1\",\n    \"bigwedge;\": \"\\u22C0\",\n    \"bkarow;\": \"\\u290D\",\n    \"blacklozenge;\": \"\\u29EB\",\n    \"blacksquare;\": \"\\u25AA\",\n    \"blacktriangle;\": \"\\u25B4\",\n    \"blacktriangledown;\": \"\\u25BE\",\n    \"blacktriangleleft;\": \"\\u25C2\",\n    \"blacktriangleright;\": \"\\u25B8\",\n    \"blank;\": \"\\u2423\",\n    \"blk12;\": \"\\u2592\",\n    \"blk14;\": \"\\u2591\",\n    \"blk34;\": \"\\u2593\",\n    \"block;\": \"\\u2588\",\n    \"bne;\": \"=\\u20E5\",\n    \"bnequiv;\": \"\\u2261\\u20E5\",\n    \"bNot;\": \"\\u2AED\",\n    \"bnot;\": \"\\u2310\",\n    \"Bopf;\": \"\\uD835\\uDD39\",\n    \"bopf;\": \"\\uD835\\uDD53\",\n    \"bot;\": \"\\u22A5\",\n    \"bottom;\": \"\\u22A5\",\n    \"bowtie;\": \"\\u22C8\",\n    \"boxbox;\": \"\\u29C9\",\n    \"boxDL;\": \"\\u2557\",\n    \"boxDl;\": \"\\u2556\",\n    \"boxdL;\": \"\\u2555\",\n    \"boxdl;\": \"\\u2510\",\n    \"boxDR;\": \"\\u2554\",\n    \"boxDr;\": \"\\u2553\",\n    \"boxdR;\": \"\\u2552\",\n    \"boxdr;\": \"\\u250C\",\n    \"boxH;\": \"\\u2550\",\n    \"boxh;\": \"\\u2500\",\n    \"boxHD;\": \"\\u2566\",\n    \"boxHd;\": \"\\u2564\",\n    \"boxhD;\": \"\\u2565\",\n    \"boxhd;\": \"\\u252C\",\n    \"boxHU;\": \"\\u2569\",\n    \"boxHu;\": \"\\u2567\",\n    \"boxhU;\": \"\\u2568\",\n    \"boxhu;\": \"\\u2534\",\n    \"boxminus;\": \"\\u229F\",\n    \"boxplus;\": \"\\u229E\",\n    \"boxtimes;\": \"\\u22A0\",\n    \"boxUL;\": \"\\u255D\",\n    \"boxUl;\": \"\\u255C\",\n    \"boxuL;\": \"\\u255B\",\n    \"boxul;\": \"\\u2518\",\n    \"boxUR;\": \"\\u255A\",\n    \"boxUr;\": \"\\u2559\",\n    \"boxuR;\": \"\\u2558\",\n    \"boxur;\": \"\\u2514\",\n    \"boxV;\": \"\\u2551\",\n    \"boxv;\": \"\\u2502\",\n    \"boxVH;\": \"\\u256C\",\n    \"boxVh;\": \"\\u256B\",\n    \"boxvH;\": \"\\u256A\",\n    \"boxvh;\": \"\\u253C\",\n    \"boxVL;\": \"\\u2563\",\n    \"boxVl;\": \"\\u2562\",\n    \"boxvL;\": \"\\u2561\",\n    \"boxvl;\": \"\\u2524\",\n    \"boxVR;\": \"\\u2560\",\n    \"boxVr;\": \"\\u255F\",\n    \"boxvR;\": \"\\u255E\",\n    \"boxvr;\": \"\\u251C\",\n    \"bprime;\": \"\\u2035\",\n    \"Breve;\": \"\\u02D8\",\n    \"breve;\": \"\\u02D8\",\n    \"brvbar;\": \"\\u00A6\",\n    \"brvbar\": \"\\u00A6\",\n    \"Bscr;\": \"\\u212C\",\n    \"bscr;\": \"\\uD835\\uDCB7\",\n    \"bsemi;\": \"\\u204F\",\n    \"bsim;\": \"\\u223D\",\n    \"bsime;\": \"\\u22CD\",\n    \"bsol;\": \"\\\\\",\n    \"bsolb;\": \"\\u29C5\",\n    \"bsolhsub;\": \"\\u27C8\",\n    \"bull;\": \"\\u2022\",\n    \"bullet;\": \"\\u2022\",\n    \"bump;\": \"\\u224E\",\n    \"bumpE;\": \"\\u2AAE\",\n    \"bumpe;\": \"\\u224F\",\n    \"Bumpeq;\": \"\\u224E\",\n    \"bumpeq;\": \"\\u224F\",\n    \"Cacute;\": \"\\u0106\",\n    \"cacute;\": \"\\u0107\",\n    \"Cap;\": \"\\u22D2\",\n    \"cap;\": \"\\u2229\",\n    \"capand;\": \"\\u2A44\",\n    \"capbrcup;\": \"\\u2A49\",\n    \"capcap;\": \"\\u2A4B\",\n    \"capcup;\": \"\\u2A47\",\n    \"capdot;\": \"\\u2A40\",\n    \"CapitalDifferentialD;\": \"\\u2145\",\n    \"caps;\": \"\\u2229\\uFE00\",\n    \"caret;\": \"\\u2041\",\n    \"caron;\": \"\\u02C7\",\n    \"Cayleys;\": \"\\u212D\",\n    \"ccaps;\": \"\\u2A4D\",\n    \"Ccaron;\": \"\\u010C\",\n    \"ccaron;\": \"\\u010D\",\n    \"Ccedil;\": \"\\u00C7\",\n    \"Ccedil\": \"\\u00C7\",\n    \"ccedil;\": \"\\u00E7\",\n    \"ccedil\": \"\\u00E7\",\n    \"Ccirc;\": \"\\u0108\",\n    \"ccirc;\": \"\\u0109\",\n    \"Cconint;\": \"\\u2230\",\n    \"ccups;\": \"\\u2A4C\",\n    \"ccupssm;\": \"\\u2A50\",\n    \"Cdot;\": \"\\u010A\",\n    \"cdot;\": \"\\u010B\",\n    \"cedil;\": \"\\u00B8\",\n    \"cedil\": \"\\u00B8\",\n    \"Cedilla;\": \"\\u00B8\",\n    \"cemptyv;\": \"\\u29B2\",\n    \"cent;\": \"\\u00A2\",\n    \"cent\": \"\\u00A2\",\n    \"CenterDot;\": \"\\u00B7\",\n    \"centerdot;\": \"\\u00B7\",\n    \"Cfr;\": \"\\u212D\",\n    \"cfr;\": \"\\uD835\\uDD20\",\n    \"CHcy;\": \"\\u0427\",\n    \"chcy;\": \"\\u0447\",\n    \"check;\": \"\\u2713\",\n    \"checkmark;\": \"\\u2713\",\n    \"Chi;\": \"\\u03A7\",\n    \"chi;\": \"\\u03C7\",\n    \"cir;\": \"\\u25CB\",\n    \"circ;\": \"\\u02C6\",\n    \"circeq;\": \"\\u2257\",\n    \"circlearrowleft;\": \"\\u21BA\",\n    \"circlearrowright;\": \"\\u21BB\",\n    \"circledast;\": \"\\u229B\",\n    \"circledcirc;\": \"\\u229A\",\n    \"circleddash;\": \"\\u229D\",\n    \"CircleDot;\": \"\\u2299\",\n    \"circledR;\": \"\\u00AE\",\n    \"circledS;\": \"\\u24C8\",\n    \"CircleMinus;\": \"\\u2296\",\n    \"CirclePlus;\": \"\\u2295\",\n    \"CircleTimes;\": \"\\u2297\",\n    \"cirE;\": \"\\u29C3\",\n    \"cire;\": \"\\u2257\",\n    \"cirfnint;\": \"\\u2A10\",\n    \"cirmid;\": \"\\u2AEF\",\n    \"cirscir;\": \"\\u29C2\",\n    \"ClockwiseContourIntegral;\": \"\\u2232\",\n    \"CloseCurlyDoubleQuote;\": \"\\u201D\",\n    \"CloseCurlyQuote;\": \"\\u2019\",\n    \"clubs;\": \"\\u2663\",\n    \"clubsuit;\": \"\\u2663\",\n    \"Colon;\": \"\\u2237\",\n    \"colon;\": \":\",\n    \"Colone;\": \"\\u2A74\",\n    \"colone;\": \"\\u2254\",\n    \"coloneq;\": \"\\u2254\",\n    \"comma;\": \",\",\n    \"commat;\": \"@\",\n    \"comp;\": \"\\u2201\",\n    \"compfn;\": \"\\u2218\",\n    \"complement;\": \"\\u2201\",\n    \"complexes;\": \"\\u2102\",\n    \"cong;\": \"\\u2245\",\n    \"congdot;\": \"\\u2A6D\",\n    \"Congruent;\": \"\\u2261\",\n    \"Conint;\": \"\\u222F\",\n    \"conint;\": \"\\u222E\",\n    \"ContourIntegral;\": \"\\u222E\",\n    \"Copf;\": \"\\u2102\",\n    \"copf;\": \"\\uD835\\uDD54\",\n    \"coprod;\": \"\\u2210\",\n    \"Coproduct;\": \"\\u2210\",\n    \"COPY;\": \"\\u00A9\",\n    \"COPY\": \"\\u00A9\",\n    \"copy;\": \"\\u00A9\",\n    \"copy\": \"\\u00A9\",\n    \"copysr;\": \"\\u2117\",\n    \"CounterClockwiseContourIntegral;\": \"\\u2233\",\n    \"crarr;\": \"\\u21B5\",\n    \"Cross;\": \"\\u2A2F\",\n    \"cross;\": \"\\u2717\",\n    \"Cscr;\": \"\\uD835\\uDC9E\",\n    \"cscr;\": \"\\uD835\\uDCB8\",\n    \"csub;\": \"\\u2ACF\",\n    \"csube;\": \"\\u2AD1\",\n    \"csup;\": \"\\u2AD0\",\n    \"csupe;\": \"\\u2AD2\",\n    \"ctdot;\": \"\\u22EF\",\n    \"cudarrl;\": \"\\u2938\",\n    \"cudarrr;\": \"\\u2935\",\n    \"cuepr;\": \"\\u22DE\",\n    \"cuesc;\": \"\\u22DF\",\n    \"cularr;\": \"\\u21B6\",\n    \"cularrp;\": \"\\u293D\",\n    \"Cup;\": \"\\u22D3\",\n    \"cup;\": \"\\u222A\",\n    \"cupbrcap;\": \"\\u2A48\",\n    \"CupCap;\": \"\\u224D\",\n    \"cupcap;\": \"\\u2A46\",\n    \"cupcup;\": \"\\u2A4A\",\n    \"cupdot;\": \"\\u228D\",\n    \"cupor;\": \"\\u2A45\",\n    \"cups;\": \"\\u222A\\uFE00\",\n    \"curarr;\": \"\\u21B7\",\n    \"curarrm;\": \"\\u293C\",\n    \"curlyeqprec;\": \"\\u22DE\",\n    \"curlyeqsucc;\": \"\\u22DF\",\n    \"curlyvee;\": \"\\u22CE\",\n    \"curlywedge;\": \"\\u22CF\",\n    \"curren;\": \"\\u00A4\",\n    \"curren\": \"\\u00A4\",\n    \"curvearrowleft;\": \"\\u21B6\",\n    \"curvearrowright;\": \"\\u21B7\",\n    \"cuvee;\": \"\\u22CE\",\n    \"cuwed;\": \"\\u22CF\",\n    \"cwconint;\": \"\\u2232\",\n    \"cwint;\": \"\\u2231\",\n    \"cylcty;\": \"\\u232D\",\n    \"Dagger;\": \"\\u2021\",\n    \"dagger;\": \"\\u2020\",\n    \"daleth;\": \"\\u2138\",\n    \"Darr;\": \"\\u21A1\",\n    \"dArr;\": \"\\u21D3\",\n    \"darr;\": \"\\u2193\",\n    \"dash;\": \"\\u2010\",\n    \"Dashv;\": \"\\u2AE4\",\n    \"dashv;\": \"\\u22A3\",\n    \"dbkarow;\": \"\\u290F\",\n    \"dblac;\": \"\\u02DD\",\n    \"Dcaron;\": \"\\u010E\",\n    \"dcaron;\": \"\\u010F\",\n    \"Dcy;\": \"\\u0414\",\n    \"dcy;\": \"\\u0434\",\n    \"DD;\": \"\\u2145\",\n    \"dd;\": \"\\u2146\",\n    \"ddagger;\": \"\\u2021\",\n    \"ddarr;\": \"\\u21CA\",\n    \"DDotrahd;\": \"\\u2911\",\n    \"ddotseq;\": \"\\u2A77\",\n    \"deg;\": \"\\u00B0\",\n    \"deg\": \"\\u00B0\",\n    \"Del;\": \"\\u2207\",\n    \"Delta;\": \"\\u0394\",\n    \"delta;\": \"\\u03B4\",\n    \"demptyv;\": \"\\u29B1\",\n    \"dfisht;\": \"\\u297F\",\n    \"Dfr;\": \"\\uD835\\uDD07\",\n    \"dfr;\": \"\\uD835\\uDD21\",\n    \"dHar;\": \"\\u2965\",\n    \"dharl;\": \"\\u21C3\",\n    \"dharr;\": \"\\u21C2\",\n    \"DiacriticalAcute;\": \"\\u00B4\",\n    \"DiacriticalDot;\": \"\\u02D9\",\n    \"DiacriticalDoubleAcute;\": \"\\u02DD\",\n    \"DiacriticalGrave;\": \"`\",\n    \"DiacriticalTilde;\": \"\\u02DC\",\n    \"diam;\": \"\\u22C4\",\n    \"Diamond;\": \"\\u22C4\",\n    \"diamond;\": \"\\u22C4\",\n    \"diamondsuit;\": \"\\u2666\",\n    \"diams;\": \"\\u2666\",\n    \"die;\": \"\\u00A8\",\n    \"DifferentialD;\": \"\\u2146\",\n    \"digamma;\": \"\\u03DD\",\n    \"disin;\": \"\\u22F2\",\n    \"div;\": \"\\u00F7\",\n    \"divide;\": \"\\u00F7\",\n    \"divide\": \"\\u00F7\",\n    \"divideontimes;\": \"\\u22C7\",\n    \"divonx;\": \"\\u22C7\",\n    \"DJcy;\": \"\\u0402\",\n    \"djcy;\": \"\\u0452\",\n    \"dlcorn;\": \"\\u231E\",\n    \"dlcrop;\": \"\\u230D\",\n    \"dollar;\": \"$\",\n    \"Dopf;\": \"\\uD835\\uDD3B\",\n    \"dopf;\": \"\\uD835\\uDD55\",\n    \"Dot;\": \"\\u00A8\",\n    \"dot;\": \"\\u02D9\",\n    \"DotDot;\": \"\\u20DC\",\n    \"doteq;\": \"\\u2250\",\n    \"doteqdot;\": \"\\u2251\",\n    \"DotEqual;\": \"\\u2250\",\n    \"dotminus;\": \"\\u2238\",\n    \"dotplus;\": \"\\u2214\",\n    \"dotsquare;\": \"\\u22A1\",\n    \"doublebarwedge;\": \"\\u2306\",\n    \"DoubleContourIntegral;\": \"\\u222F\",\n    \"DoubleDot;\": \"\\u00A8\",\n    \"DoubleDownArrow;\": \"\\u21D3\",\n    \"DoubleLeftArrow;\": \"\\u21D0\",\n    \"DoubleLeftRightArrow;\": \"\\u21D4\",\n    \"DoubleLeftTee;\": \"\\u2AE4\",\n    \"DoubleLongLeftArrow;\": \"\\u27F8\",\n    \"DoubleLongLeftRightArrow;\": \"\\u27FA\",\n    \"DoubleLongRightArrow;\": \"\\u27F9\",\n    \"DoubleRightArrow;\": \"\\u21D2\",\n    \"DoubleRightTee;\": \"\\u22A8\",\n    \"DoubleUpArrow;\": \"\\u21D1\",\n    \"DoubleUpDownArrow;\": \"\\u21D5\",\n    \"DoubleVerticalBar;\": \"\\u2225\",\n    \"DownArrow;\": \"\\u2193\",\n    \"Downarrow;\": \"\\u21D3\",\n    \"downarrow;\": \"\\u2193\",\n    \"DownArrowBar;\": \"\\u2913\",\n    \"DownArrowUpArrow;\": \"\\u21F5\",\n    \"DownBreve;\": \"\\u0311\",\n    \"downdownarrows;\": \"\\u21CA\",\n    \"downharpoonleft;\": \"\\u21C3\",\n    \"downharpoonright;\": \"\\u21C2\",\n    \"DownLeftRightVector;\": \"\\u2950\",\n    \"DownLeftTeeVector;\": \"\\u295E\",\n    \"DownLeftVector;\": \"\\u21BD\",\n    \"DownLeftVectorBar;\": \"\\u2956\",\n    \"DownRightTeeVector;\": \"\\u295F\",\n    \"DownRightVector;\": \"\\u21C1\",\n    \"DownRightVectorBar;\": \"\\u2957\",\n    \"DownTee;\": \"\\u22A4\",\n    \"DownTeeArrow;\": \"\\u21A7\",\n    \"drbkarow;\": \"\\u2910\",\n    \"drcorn;\": \"\\u231F\",\n    \"drcrop;\": \"\\u230C\",\n    \"Dscr;\": \"\\uD835\\uDC9F\",\n    \"dscr;\": \"\\uD835\\uDCB9\",\n    \"DScy;\": \"\\u0405\",\n    \"dscy;\": \"\\u0455\",\n    \"dsol;\": \"\\u29F6\",\n    \"Dstrok;\": \"\\u0110\",\n    \"dstrok;\": \"\\u0111\",\n    \"dtdot;\": \"\\u22F1\",\n    \"dtri;\": \"\\u25BF\",\n    \"dtrif;\": \"\\u25BE\",\n    \"duarr;\": \"\\u21F5\",\n    \"duhar;\": \"\\u296F\",\n    \"dwangle;\": \"\\u29A6\",\n    \"DZcy;\": \"\\u040F\",\n    \"dzcy;\": \"\\u045F\",\n    \"dzigrarr;\": \"\\u27FF\",\n    \"Eacute;\": \"\\u00C9\",\n    \"Eacute\": \"\\u00C9\",\n    \"eacute;\": \"\\u00E9\",\n    \"eacute\": \"\\u00E9\",\n    \"easter;\": \"\\u2A6E\",\n    \"Ecaron;\": \"\\u011A\",\n    \"ecaron;\": \"\\u011B\",\n    \"ecir;\": \"\\u2256\",\n    \"Ecirc;\": \"\\u00CA\",\n    \"Ecirc\": \"\\u00CA\",\n    \"ecirc;\": \"\\u00EA\",\n    \"ecirc\": \"\\u00EA\",\n    \"ecolon;\": \"\\u2255\",\n    \"Ecy;\": \"\\u042D\",\n    \"ecy;\": \"\\u044D\",\n    \"eDDot;\": \"\\u2A77\",\n    \"Edot;\": \"\\u0116\",\n    \"eDot;\": \"\\u2251\",\n    \"edot;\": \"\\u0117\",\n    \"ee;\": \"\\u2147\",\n    \"efDot;\": \"\\u2252\",\n    \"Efr;\": \"\\uD835\\uDD08\",\n    \"efr;\": \"\\uD835\\uDD22\",\n    \"eg;\": \"\\u2A9A\",\n    \"Egrave;\": \"\\u00C8\",\n    \"Egrave\": \"\\u00C8\",\n    \"egrave;\": \"\\u00E8\",\n    \"egrave\": \"\\u00E8\",\n    \"egs;\": \"\\u2A96\",\n    \"egsdot;\": \"\\u2A98\",\n    \"el;\": \"\\u2A99\",\n    \"Element;\": \"\\u2208\",\n    \"elinters;\": \"\\u23E7\",\n    \"ell;\": \"\\u2113\",\n    \"els;\": \"\\u2A95\",\n    \"elsdot;\": \"\\u2A97\",\n    \"Emacr;\": \"\\u0112\",\n    \"emacr;\": \"\\u0113\",\n    \"empty;\": \"\\u2205\",\n    \"emptyset;\": \"\\u2205\",\n    \"EmptySmallSquare;\": \"\\u25FB\",\n    \"emptyv;\": \"\\u2205\",\n    \"EmptyVerySmallSquare;\": \"\\u25AB\",\n    \"emsp;\": \"\\u2003\",\n    \"emsp13;\": \"\\u2004\",\n    \"emsp14;\": \"\\u2005\",\n    \"ENG;\": \"\\u014A\",\n    \"eng;\": \"\\u014B\",\n    \"ensp;\": \"\\u2002\",\n    \"Eogon;\": \"\\u0118\",\n    \"eogon;\": \"\\u0119\",\n    \"Eopf;\": \"\\uD835\\uDD3C\",\n    \"eopf;\": \"\\uD835\\uDD56\",\n    \"epar;\": \"\\u22D5\",\n    \"eparsl;\": \"\\u29E3\",\n    \"eplus;\": \"\\u2A71\",\n    \"epsi;\": \"\\u03B5\",\n    \"Epsilon;\": \"\\u0395\",\n    \"epsilon;\": \"\\u03B5\",\n    \"epsiv;\": \"\\u03F5\",\n    \"eqcirc;\": \"\\u2256\",\n    \"eqcolon;\": \"\\u2255\",\n    \"eqsim;\": \"\\u2242\",\n    \"eqslantgtr;\": \"\\u2A96\",\n    \"eqslantless;\": \"\\u2A95\",\n    \"Equal;\": \"\\u2A75\",\n    \"equals;\": \"=\",\n    \"EqualTilde;\": \"\\u2242\",\n    \"equest;\": \"\\u225F\",\n    \"Equilibrium;\": \"\\u21CC\",\n    \"equiv;\": \"\\u2261\",\n    \"equivDD;\": \"\\u2A78\",\n    \"eqvparsl;\": \"\\u29E5\",\n    \"erarr;\": \"\\u2971\",\n    \"erDot;\": \"\\u2253\",\n    \"Escr;\": \"\\u2130\",\n    \"escr;\": \"\\u212F\",\n    \"esdot;\": \"\\u2250\",\n    \"Esim;\": \"\\u2A73\",\n    \"esim;\": \"\\u2242\",\n    \"Eta;\": \"\\u0397\",\n    \"eta;\": \"\\u03B7\",\n    \"ETH;\": \"\\u00D0\",\n    \"ETH\": \"\\u00D0\",\n    \"eth;\": \"\\u00F0\",\n    \"eth\": \"\\u00F0\",\n    \"Euml;\": \"\\u00CB\",\n    \"Euml\": \"\\u00CB\",\n    \"euml;\": \"\\u00EB\",\n    \"euml\": \"\\u00EB\",\n    \"euro;\": \"\\u20AC\",\n    \"excl;\": \"!\",\n    \"exist;\": \"\\u2203\",\n    \"Exists;\": \"\\u2203\",\n    \"expectation;\": \"\\u2130\",\n    \"ExponentialE;\": \"\\u2147\",\n    \"exponentiale;\": \"\\u2147\",\n    \"fallingdotseq;\": \"\\u2252\",\n    \"Fcy;\": \"\\u0424\",\n    \"fcy;\": \"\\u0444\",\n    \"female;\": \"\\u2640\",\n    \"ffilig;\": \"\\uFB03\",\n    \"fflig;\": \"\\uFB00\",\n    \"ffllig;\": \"\\uFB04\",\n    \"Ffr;\": \"\\uD835\\uDD09\",\n    \"ffr;\": \"\\uD835\\uDD23\",\n    \"filig;\": \"\\uFB01\",\n    \"FilledSmallSquare;\": \"\\u25FC\",\n    \"FilledVerySmallSquare;\": \"\\u25AA\",\n    \"fjlig;\": \"fj\",\n    \"flat;\": \"\\u266D\",\n    \"fllig;\": \"\\uFB02\",\n    \"fltns;\": \"\\u25B1\",\n    \"fnof;\": \"\\u0192\",\n    \"Fopf;\": \"\\uD835\\uDD3D\",\n    \"fopf;\": \"\\uD835\\uDD57\",\n    \"ForAll;\": \"\\u2200\",\n    \"forall;\": \"\\u2200\",\n    \"fork;\": \"\\u22D4\",\n    \"forkv;\": \"\\u2AD9\",\n    \"Fouriertrf;\": \"\\u2131\",\n    \"fpartint;\": \"\\u2A0D\",\n    \"frac12;\": \"\\u00BD\",\n    \"frac12\": \"\\u00BD\",\n    \"frac13;\": \"\\u2153\",\n    \"frac14;\": \"\\u00BC\",\n    \"frac14\": \"\\u00BC\",\n    \"frac15;\": \"\\u2155\",\n    \"frac16;\": \"\\u2159\",\n    \"frac18;\": \"\\u215B\",\n    \"frac23;\": \"\\u2154\",\n    \"frac25;\": \"\\u2156\",\n    \"frac34;\": \"\\u00BE\",\n    \"frac34\": \"\\u00BE\",\n    \"frac35;\": \"\\u2157\",\n    \"frac38;\": \"\\u215C\",\n    \"frac45;\": \"\\u2158\",\n    \"frac56;\": \"\\u215A\",\n    \"frac58;\": \"\\u215D\",\n    \"frac78;\": \"\\u215E\",\n    \"frasl;\": \"\\u2044\",\n    \"frown;\": \"\\u2322\",\n    \"Fscr;\": \"\\u2131\",\n    \"fscr;\": \"\\uD835\\uDCBB\",\n    \"gacute;\": \"\\u01F5\",\n    \"Gamma;\": \"\\u0393\",\n    \"gamma;\": \"\\u03B3\",\n    \"Gammad;\": \"\\u03DC\",\n    \"gammad;\": \"\\u03DD\",\n    \"gap;\": \"\\u2A86\",\n    \"Gbreve;\": \"\\u011E\",\n    \"gbreve;\": \"\\u011F\",\n    \"Gcedil;\": \"\\u0122\",\n    \"Gcirc;\": \"\\u011C\",\n    \"gcirc;\": \"\\u011D\",\n    \"Gcy;\": \"\\u0413\",\n    \"gcy;\": \"\\u0433\",\n    \"Gdot;\": \"\\u0120\",\n    \"gdot;\": \"\\u0121\",\n    \"gE;\": \"\\u2267\",\n    \"ge;\": \"\\u2265\",\n    \"gEl;\": \"\\u2A8C\",\n    \"gel;\": \"\\u22DB\",\n    \"geq;\": \"\\u2265\",\n    \"geqq;\": \"\\u2267\",\n    \"geqslant;\": \"\\u2A7E\",\n    \"ges;\": \"\\u2A7E\",\n    \"gescc;\": \"\\u2AA9\",\n    \"gesdot;\": \"\\u2A80\",\n    \"gesdoto;\": \"\\u2A82\",\n    \"gesdotol;\": \"\\u2A84\",\n    \"gesl;\": \"\\u22DB\\uFE00\",\n    \"gesles;\": \"\\u2A94\",\n    \"Gfr;\": \"\\uD835\\uDD0A\",\n    \"gfr;\": \"\\uD835\\uDD24\",\n    \"Gg;\": \"\\u22D9\",\n    \"gg;\": \"\\u226B\",\n    \"ggg;\": \"\\u22D9\",\n    \"gimel;\": \"\\u2137\",\n    \"GJcy;\": \"\\u0403\",\n    \"gjcy;\": \"\\u0453\",\n    \"gl;\": \"\\u2277\",\n    \"gla;\": \"\\u2AA5\",\n    \"glE;\": \"\\u2A92\",\n    \"glj;\": \"\\u2AA4\",\n    \"gnap;\": \"\\u2A8A\",\n    \"gnapprox;\": \"\\u2A8A\",\n    \"gnE;\": \"\\u2269\",\n    \"gne;\": \"\\u2A88\",\n    \"gneq;\": \"\\u2A88\",\n    \"gneqq;\": \"\\u2269\",\n    \"gnsim;\": \"\\u22E7\",\n    \"Gopf;\": \"\\uD835\\uDD3E\",\n    \"gopf;\": \"\\uD835\\uDD58\",\n    \"grave;\": \"`\",\n    \"GreaterEqual;\": \"\\u2265\",\n    \"GreaterEqualLess;\": \"\\u22DB\",\n    \"GreaterFullEqual;\": \"\\u2267\",\n    \"GreaterGreater;\": \"\\u2AA2\",\n    \"GreaterLess;\": \"\\u2277\",\n    \"GreaterSlantEqual;\": \"\\u2A7E\",\n    \"GreaterTilde;\": \"\\u2273\",\n    \"Gscr;\": \"\\uD835\\uDCA2\",\n    \"gscr;\": \"\\u210A\",\n    \"gsim;\": \"\\u2273\",\n    \"gsime;\": \"\\u2A8E\",\n    \"gsiml;\": \"\\u2A90\",\n    \"GT;\": \">\",\n    \"GT\": \">\",\n    \"Gt;\": \"\\u226B\",\n    \"gt;\": \">\",\n    \"gt\": \">\",\n    \"gtcc;\": \"\\u2AA7\",\n    \"gtcir;\": \"\\u2A7A\",\n    \"gtdot;\": \"\\u22D7\",\n    \"gtlPar;\": \"\\u2995\",\n    \"gtquest;\": \"\\u2A7C\",\n    \"gtrapprox;\": \"\\u2A86\",\n    \"gtrarr;\": \"\\u2978\",\n    \"gtrdot;\": \"\\u22D7\",\n    \"gtreqless;\": \"\\u22DB\",\n    \"gtreqqless;\": \"\\u2A8C\",\n    \"gtrless;\": \"\\u2277\",\n    \"gtrsim;\": \"\\u2273\",\n    \"gvertneqq;\": \"\\u2269\\uFE00\",\n    \"gvnE;\": \"\\u2269\\uFE00\",\n    \"Hacek;\": \"\\u02C7\",\n    \"hairsp;\": \"\\u200A\",\n    \"half;\": \"\\u00BD\",\n    \"hamilt;\": \"\\u210B\",\n    \"HARDcy;\": \"\\u042A\",\n    \"hardcy;\": \"\\u044A\",\n    \"hArr;\": \"\\u21D4\",\n    \"harr;\": \"\\u2194\",\n    \"harrcir;\": \"\\u2948\",\n    \"harrw;\": \"\\u21AD\",\n    \"Hat;\": \"^\",\n    \"hbar;\": \"\\u210F\",\n    \"Hcirc;\": \"\\u0124\",\n    \"hcirc;\": \"\\u0125\",\n    \"hearts;\": \"\\u2665\",\n    \"heartsuit;\": \"\\u2665\",\n    \"hellip;\": \"\\u2026\",\n    \"hercon;\": \"\\u22B9\",\n    \"Hfr;\": \"\\u210C\",\n    \"hfr;\": \"\\uD835\\uDD25\",\n    \"HilbertSpace;\": \"\\u210B\",\n    \"hksearow;\": \"\\u2925\",\n    \"hkswarow;\": \"\\u2926\",\n    \"hoarr;\": \"\\u21FF\",\n    \"homtht;\": \"\\u223B\",\n    \"hookleftarrow;\": \"\\u21A9\",\n    \"hookrightarrow;\": \"\\u21AA\",\n    \"Hopf;\": \"\\u210D\",\n    \"hopf;\": \"\\uD835\\uDD59\",\n    \"horbar;\": \"\\u2015\",\n    \"HorizontalLine;\": \"\\u2500\",\n    \"Hscr;\": \"\\u210B\",\n    \"hscr;\": \"\\uD835\\uDCBD\",\n    \"hslash;\": \"\\u210F\",\n    \"Hstrok;\": \"\\u0126\",\n    \"hstrok;\": \"\\u0127\",\n    \"HumpDownHump;\": \"\\u224E\",\n    \"HumpEqual;\": \"\\u224F\",\n    \"hybull;\": \"\\u2043\",\n    \"hyphen;\": \"\\u2010\",\n    \"Iacute;\": \"\\u00CD\",\n    \"Iacute\": \"\\u00CD\",\n    \"iacute;\": \"\\u00ED\",\n    \"iacute\": \"\\u00ED\",\n    \"ic;\": \"\\u2063\",\n    \"Icirc;\": \"\\u00CE\",\n    \"Icirc\": \"\\u00CE\",\n    \"icirc;\": \"\\u00EE\",\n    \"icirc\": \"\\u00EE\",\n    \"Icy;\": \"\\u0418\",\n    \"icy;\": \"\\u0438\",\n    \"Idot;\": \"\\u0130\",\n    \"IEcy;\": \"\\u0415\",\n    \"iecy;\": \"\\u0435\",\n    \"iexcl;\": \"\\u00A1\",\n    \"iexcl\": \"\\u00A1\",\n    \"iff;\": \"\\u21D4\",\n    \"Ifr;\": \"\\u2111\",\n    \"ifr;\": \"\\uD835\\uDD26\",\n    \"Igrave;\": \"\\u00CC\",\n    \"Igrave\": \"\\u00CC\",\n    \"igrave;\": \"\\u00EC\",\n    \"igrave\": \"\\u00EC\",\n    \"ii;\": \"\\u2148\",\n    \"iiiint;\": \"\\u2A0C\",\n    \"iiint;\": \"\\u222D\",\n    \"iinfin;\": \"\\u29DC\",\n    \"iiota;\": \"\\u2129\",\n    \"IJlig;\": \"\\u0132\",\n    \"ijlig;\": \"\\u0133\",\n    \"Im;\": \"\\u2111\",\n    \"Imacr;\": \"\\u012A\",\n    \"imacr;\": \"\\u012B\",\n    \"image;\": \"\\u2111\",\n    \"ImaginaryI;\": \"\\u2148\",\n    \"imagline;\": \"\\u2110\",\n    \"imagpart;\": \"\\u2111\",\n    \"imath;\": \"\\u0131\",\n    \"imof;\": \"\\u22B7\",\n    \"imped;\": \"\\u01B5\",\n    \"Implies;\": \"\\u21D2\",\n    \"in;\": \"\\u2208\",\n    \"incare;\": \"\\u2105\",\n    \"infin;\": \"\\u221E\",\n    \"infintie;\": \"\\u29DD\",\n    \"inodot;\": \"\\u0131\",\n    \"Int;\": \"\\u222C\",\n    \"int;\": \"\\u222B\",\n    \"intcal;\": \"\\u22BA\",\n    \"integers;\": \"\\u2124\",\n    \"Integral;\": \"\\u222B\",\n    \"intercal;\": \"\\u22BA\",\n    \"Intersection;\": \"\\u22C2\",\n    \"intlarhk;\": \"\\u2A17\",\n    \"intprod;\": \"\\u2A3C\",\n    \"InvisibleComma;\": \"\\u2063\",\n    \"InvisibleTimes;\": \"\\u2062\",\n    \"IOcy;\": \"\\u0401\",\n    \"iocy;\": \"\\u0451\",\n    \"Iogon;\": \"\\u012E\",\n    \"iogon;\": \"\\u012F\",\n    \"Iopf;\": \"\\uD835\\uDD40\",\n    \"iopf;\": \"\\uD835\\uDD5A\",\n    \"Iota;\": \"\\u0399\",\n    \"iota;\": \"\\u03B9\",\n    \"iprod;\": \"\\u2A3C\",\n    \"iquest;\": \"\\u00BF\",\n    \"iquest\": \"\\u00BF\",\n    \"Iscr;\": \"\\u2110\",\n    \"iscr;\": \"\\uD835\\uDCBE\",\n    \"isin;\": \"\\u2208\",\n    \"isindot;\": \"\\u22F5\",\n    \"isinE;\": \"\\u22F9\",\n    \"isins;\": \"\\u22F4\",\n    \"isinsv;\": \"\\u22F3\",\n    \"isinv;\": \"\\u2208\",\n    \"it;\": \"\\u2062\",\n    \"Itilde;\": \"\\u0128\",\n    \"itilde;\": \"\\u0129\",\n    \"Iukcy;\": \"\\u0406\",\n    \"iukcy;\": \"\\u0456\",\n    \"Iuml;\": \"\\u00CF\",\n    \"Iuml\": \"\\u00CF\",\n    \"iuml;\": \"\\u00EF\",\n    \"iuml\": \"\\u00EF\",\n    \"Jcirc;\": \"\\u0134\",\n    \"jcirc;\": \"\\u0135\",\n    \"Jcy;\": \"\\u0419\",\n    \"jcy;\": \"\\u0439\",\n    \"Jfr;\": \"\\uD835\\uDD0D\",\n    \"jfr;\": \"\\uD835\\uDD27\",\n    \"jmath;\": \"\\u0237\",\n    \"Jopf;\": \"\\uD835\\uDD41\",\n    \"jopf;\": \"\\uD835\\uDD5B\",\n    \"Jscr;\": \"\\uD835\\uDCA5\",\n    \"jscr;\": \"\\uD835\\uDCBF\",\n    \"Jsercy;\": \"\\u0408\",\n    \"jsercy;\": \"\\u0458\",\n    \"Jukcy;\": \"\\u0404\",\n    \"jukcy;\": \"\\u0454\",\n    \"Kappa;\": \"\\u039A\",\n    \"kappa;\": \"\\u03BA\",\n    \"kappav;\": \"\\u03F0\",\n    \"Kcedil;\": \"\\u0136\",\n    \"kcedil;\": \"\\u0137\",\n    \"Kcy;\": \"\\u041A\",\n    \"kcy;\": \"\\u043A\",\n    \"Kfr;\": \"\\uD835\\uDD0E\",\n    \"kfr;\": \"\\uD835\\uDD28\",\n    \"kgreen;\": \"\\u0138\",\n    \"KHcy;\": \"\\u0425\",\n    \"khcy;\": \"\\u0445\",\n    \"KJcy;\": \"\\u040C\",\n    \"kjcy;\": \"\\u045C\",\n    \"Kopf;\": \"\\uD835\\uDD42\",\n    \"kopf;\": \"\\uD835\\uDD5C\",\n    \"Kscr;\": \"\\uD835\\uDCA6\",\n    \"kscr;\": \"\\uD835\\uDCC0\",\n    \"lAarr;\": \"\\u21DA\",\n    \"Lacute;\": \"\\u0139\",\n    \"lacute;\": \"\\u013A\",\n    \"laemptyv;\": \"\\u29B4\",\n    \"lagran;\": \"\\u2112\",\n    \"Lambda;\": \"\\u039B\",\n    \"lambda;\": \"\\u03BB\",\n    \"Lang;\": \"\\u27EA\",\n    \"lang;\": \"\\u27E8\",\n    \"langd;\": \"\\u2991\",\n    \"langle;\": \"\\u27E8\",\n    \"lap;\": \"\\u2A85\",\n    \"Laplacetrf;\": \"\\u2112\",\n    \"laquo;\": \"\\u00AB\",\n    \"laquo\": \"\\u00AB\",\n    \"Larr;\": \"\\u219E\",\n    \"lArr;\": \"\\u21D0\",\n    \"larr;\": \"\\u2190\",\n    \"larrb;\": \"\\u21E4\",\n    \"larrbfs;\": \"\\u291F\",\n    \"larrfs;\": \"\\u291D\",\n    \"larrhk;\": \"\\u21A9\",\n    \"larrlp;\": \"\\u21AB\",\n    \"larrpl;\": \"\\u2939\",\n    \"larrsim;\": \"\\u2973\",\n    \"larrtl;\": \"\\u21A2\",\n    \"lat;\": \"\\u2AAB\",\n    \"lAtail;\": \"\\u291B\",\n    \"latail;\": \"\\u2919\",\n    \"late;\": \"\\u2AAD\",\n    \"lates;\": \"\\u2AAD\\uFE00\",\n    \"lBarr;\": \"\\u290E\",\n    \"lbarr;\": \"\\u290C\",\n    \"lbbrk;\": \"\\u2772\",\n    \"lbrace;\": \"{\",\n    \"lbrack;\": \"[\",\n    \"lbrke;\": \"\\u298B\",\n    \"lbrksld;\": \"\\u298F\",\n    \"lbrkslu;\": \"\\u298D\",\n    \"Lcaron;\": \"\\u013D\",\n    \"lcaron;\": \"\\u013E\",\n    \"Lcedil;\": \"\\u013B\",\n    \"lcedil;\": \"\\u013C\",\n    \"lceil;\": \"\\u2308\",\n    \"lcub;\": \"{\",\n    \"Lcy;\": \"\\u041B\",\n    \"lcy;\": \"\\u043B\",\n    \"ldca;\": \"\\u2936\",\n    \"ldquo;\": \"\\u201C\",\n    \"ldquor;\": \"\\u201E\",\n    \"ldrdhar;\": \"\\u2967\",\n    \"ldrushar;\": \"\\u294B\",\n    \"ldsh;\": \"\\u21B2\",\n    \"lE;\": \"\\u2266\",\n    \"le;\": \"\\u2264\",\n    \"LeftAngleBracket;\": \"\\u27E8\",\n    \"LeftArrow;\": \"\\u2190\",\n    \"Leftarrow;\": \"\\u21D0\",\n    \"leftarrow;\": \"\\u2190\",\n    \"LeftArrowBar;\": \"\\u21E4\",\n    \"LeftArrowRightArrow;\": \"\\u21C6\",\n    \"leftarrowtail;\": \"\\u21A2\",\n    \"LeftCeiling;\": \"\\u2308\",\n    \"LeftDoubleBracket;\": \"\\u27E6\",\n    \"LeftDownTeeVector;\": \"\\u2961\",\n    \"LeftDownVector;\": \"\\u21C3\",\n    \"LeftDownVectorBar;\": \"\\u2959\",\n    \"LeftFloor;\": \"\\u230A\",\n    \"leftharpoondown;\": \"\\u21BD\",\n    \"leftharpoonup;\": \"\\u21BC\",\n    \"leftleftarrows;\": \"\\u21C7\",\n    \"LeftRightArrow;\": \"\\u2194\",\n    \"Leftrightarrow;\": \"\\u21D4\",\n    \"leftrightarrow;\": \"\\u2194\",\n    \"leftrightarrows;\": \"\\u21C6\",\n    \"leftrightharpoons;\": \"\\u21CB\",\n    \"leftrightsquigarrow;\": \"\\u21AD\",\n    \"LeftRightVector;\": \"\\u294E\",\n    \"LeftTee;\": \"\\u22A3\",\n    \"LeftTeeArrow;\": \"\\u21A4\",\n    \"LeftTeeVector;\": \"\\u295A\",\n    \"leftthreetimes;\": \"\\u22CB\",\n    \"LeftTriangle;\": \"\\u22B2\",\n    \"LeftTriangleBar;\": \"\\u29CF\",\n    \"LeftTriangleEqual;\": \"\\u22B4\",\n    \"LeftUpDownVector;\": \"\\u2951\",\n    \"LeftUpTeeVector;\": \"\\u2960\",\n    \"LeftUpVector;\": \"\\u21BF\",\n    \"LeftUpVectorBar;\": \"\\u2958\",\n    \"LeftVector;\": \"\\u21BC\",\n    \"LeftVectorBar;\": \"\\u2952\",\n    \"lEg;\": \"\\u2A8B\",\n    \"leg;\": \"\\u22DA\",\n    \"leq;\": \"\\u2264\",\n    \"leqq;\": \"\\u2266\",\n    \"leqslant;\": \"\\u2A7D\",\n    \"les;\": \"\\u2A7D\",\n    \"lescc;\": \"\\u2AA8\",\n    \"lesdot;\": \"\\u2A7F\",\n    \"lesdoto;\": \"\\u2A81\",\n    \"lesdotor;\": \"\\u2A83\",\n    \"lesg;\": \"\\u22DA\\uFE00\",\n    \"lesges;\": \"\\u2A93\",\n    \"lessapprox;\": \"\\u2A85\",\n    \"lessdot;\": \"\\u22D6\",\n    \"lesseqgtr;\": \"\\u22DA\",\n    \"lesseqqgtr;\": \"\\u2A8B\",\n    \"LessEqualGreater;\": \"\\u22DA\",\n    \"LessFullEqual;\": \"\\u2266\",\n    \"LessGreater;\": \"\\u2276\",\n    \"lessgtr;\": \"\\u2276\",\n    \"LessLess;\": \"\\u2AA1\",\n    \"lesssim;\": \"\\u2272\",\n    \"LessSlantEqual;\": \"\\u2A7D\",\n    \"LessTilde;\": \"\\u2272\",\n    \"lfisht;\": \"\\u297C\",\n    \"lfloor;\": \"\\u230A\",\n    \"Lfr;\": \"\\uD835\\uDD0F\",\n    \"lfr;\": \"\\uD835\\uDD29\",\n    \"lg;\": \"\\u2276\",\n    \"lgE;\": \"\\u2A91\",\n    \"lHar;\": \"\\u2962\",\n    \"lhard;\": \"\\u21BD\",\n    \"lharu;\": \"\\u21BC\",\n    \"lharul;\": \"\\u296A\",\n    \"lhblk;\": \"\\u2584\",\n    \"LJcy;\": \"\\u0409\",\n    \"ljcy;\": \"\\u0459\",\n    \"Ll;\": \"\\u22D8\",\n    \"ll;\": \"\\u226A\",\n    \"llarr;\": \"\\u21C7\",\n    \"llcorner;\": \"\\u231E\",\n    \"Lleftarrow;\": \"\\u21DA\",\n    \"llhard;\": \"\\u296B\",\n    \"lltri;\": \"\\u25FA\",\n    \"Lmidot;\": \"\\u013F\",\n    \"lmidot;\": \"\\u0140\",\n    \"lmoust;\": \"\\u23B0\",\n    \"lmoustache;\": \"\\u23B0\",\n    \"lnap;\": \"\\u2A89\",\n    \"lnapprox;\": \"\\u2A89\",\n    \"lnE;\": \"\\u2268\",\n    \"lne;\": \"\\u2A87\",\n    \"lneq;\": \"\\u2A87\",\n    \"lneqq;\": \"\\u2268\",\n    \"lnsim;\": \"\\u22E6\",\n    \"loang;\": \"\\u27EC\",\n    \"loarr;\": \"\\u21FD\",\n    \"lobrk;\": \"\\u27E6\",\n    \"LongLeftArrow;\": \"\\u27F5\",\n    \"Longleftarrow;\": \"\\u27F8\",\n    \"longleftarrow;\": \"\\u27F5\",\n    \"LongLeftRightArrow;\": \"\\u27F7\",\n    \"Longleftrightarrow;\": \"\\u27FA\",\n    \"longleftrightarrow;\": \"\\u27F7\",\n    \"longmapsto;\": \"\\u27FC\",\n    \"LongRightArrow;\": \"\\u27F6\",\n    \"Longrightarrow;\": \"\\u27F9\",\n    \"longrightarrow;\": \"\\u27F6\",\n    \"looparrowleft;\": \"\\u21AB\",\n    \"looparrowright;\": \"\\u21AC\",\n    \"lopar;\": \"\\u2985\",\n    \"Lopf;\": \"\\uD835\\uDD43\",\n    \"lopf;\": \"\\uD835\\uDD5D\",\n    \"loplus;\": \"\\u2A2D\",\n    \"lotimes;\": \"\\u2A34\",\n    \"lowast;\": \"\\u2217\",\n    \"lowbar;\": \"_\",\n    \"LowerLeftArrow;\": \"\\u2199\",\n    \"LowerRightArrow;\": \"\\u2198\",\n    \"loz;\": \"\\u25CA\",\n    \"lozenge;\": \"\\u25CA\",\n    \"lozf;\": \"\\u29EB\",\n    \"lpar;\": \"(\",\n    \"lparlt;\": \"\\u2993\",\n    \"lrarr;\": \"\\u21C6\",\n    \"lrcorner;\": \"\\u231F\",\n    \"lrhar;\": \"\\u21CB\",\n    \"lrhard;\": \"\\u296D\",\n    \"lrm;\": \"\\u200E\",\n    \"lrtri;\": \"\\u22BF\",\n    \"lsaquo;\": \"\\u2039\",\n    \"Lscr;\": \"\\u2112\",\n    \"lscr;\": \"\\uD835\\uDCC1\",\n    \"Lsh;\": \"\\u21B0\",\n    \"lsh;\": \"\\u21B0\",\n    \"lsim;\": \"\\u2272\",\n    \"lsime;\": \"\\u2A8D\",\n    \"lsimg;\": \"\\u2A8F\",\n    \"lsqb;\": \"[\",\n    \"lsquo;\": \"\\u2018\",\n    \"lsquor;\": \"\\u201A\",\n    \"Lstrok;\": \"\\u0141\",\n    \"lstrok;\": \"\\u0142\",\n    \"LT;\": \"<\",\n    \"LT\": \"<\",\n    \"Lt;\": \"\\u226A\",\n    \"lt;\": \"<\",\n    \"lt\": \"<\",\n    \"ltcc;\": \"\\u2AA6\",\n    \"ltcir;\": \"\\u2A79\",\n    \"ltdot;\": \"\\u22D6\",\n    \"lthree;\": \"\\u22CB\",\n    \"ltimes;\": \"\\u22C9\",\n    \"ltlarr;\": \"\\u2976\",\n    \"ltquest;\": \"\\u2A7B\",\n    \"ltri;\": \"\\u25C3\",\n    \"ltrie;\": \"\\u22B4\",\n    \"ltrif;\": \"\\u25C2\",\n    \"ltrPar;\": \"\\u2996\",\n    \"lurdshar;\": \"\\u294A\",\n    \"luruhar;\": \"\\u2966\",\n    \"lvertneqq;\": \"\\u2268\\uFE00\",\n    \"lvnE;\": \"\\u2268\\uFE00\",\n    \"macr;\": \"\\u00AF\",\n    \"macr\": \"\\u00AF\",\n    \"male;\": \"\\u2642\",\n    \"malt;\": \"\\u2720\",\n    \"maltese;\": \"\\u2720\",\n    \"Map;\": \"\\u2905\",\n    \"map;\": \"\\u21A6\",\n    \"mapsto;\": \"\\u21A6\",\n    \"mapstodown;\": \"\\u21A7\",\n    \"mapstoleft;\": \"\\u21A4\",\n    \"mapstoup;\": \"\\u21A5\",\n    \"marker;\": \"\\u25AE\",\n    \"mcomma;\": \"\\u2A29\",\n    \"Mcy;\": \"\\u041C\",\n    \"mcy;\": \"\\u043C\",\n    \"mdash;\": \"\\u2014\",\n    \"mDDot;\": \"\\u223A\",\n    \"measuredangle;\": \"\\u2221\",\n    \"MediumSpace;\": \"\\u205F\",\n    \"Mellintrf;\": \"\\u2133\",\n    \"Mfr;\": \"\\uD835\\uDD10\",\n    \"mfr;\": \"\\uD835\\uDD2A\",\n    \"mho;\": \"\\u2127\",\n    \"micro;\": \"\\u00B5\",\n    \"micro\": \"\\u00B5\",\n    \"mid;\": \"\\u2223\",\n    \"midast;\": \"*\",\n    \"midcir;\": \"\\u2AF0\",\n    \"middot;\": \"\\u00B7\",\n    \"middot\": \"\\u00B7\",\n    \"minus;\": \"\\u2212\",\n    \"minusb;\": \"\\u229F\",\n    \"minusd;\": \"\\u2238\",\n    \"minusdu;\": \"\\u2A2A\",\n    \"MinusPlus;\": \"\\u2213\",\n    \"mlcp;\": \"\\u2ADB\",\n    \"mldr;\": \"\\u2026\",\n    \"mnplus;\": \"\\u2213\",\n    \"models;\": \"\\u22A7\",\n    \"Mopf;\": \"\\uD835\\uDD44\",\n    \"mopf;\": \"\\uD835\\uDD5E\",\n    \"mp;\": \"\\u2213\",\n    \"Mscr;\": \"\\u2133\",\n    \"mscr;\": \"\\uD835\\uDCC2\",\n    \"mstpos;\": \"\\u223E\",\n    \"Mu;\": \"\\u039C\",\n    \"mu;\": \"\\u03BC\",\n    \"multimap;\": \"\\u22B8\",\n    \"mumap;\": \"\\u22B8\",\n    \"nabla;\": \"\\u2207\",\n    \"Nacute;\": \"\\u0143\",\n    \"nacute;\": \"\\u0144\",\n    \"nang;\": \"\\u2220\\u20D2\",\n    \"nap;\": \"\\u2249\",\n    \"napE;\": \"\\u2A70\\u0338\",\n    \"napid;\": \"\\u224B\\u0338\",\n    \"napos;\": \"\\u0149\",\n    \"napprox;\": \"\\u2249\",\n    \"natur;\": \"\\u266E\",\n    \"natural;\": \"\\u266E\",\n    \"naturals;\": \"\\u2115\",\n    \"nbsp;\": \"\\u00A0\",\n    \"nbsp\": \"\\u00A0\",\n    \"nbump;\": \"\\u224E\\u0338\",\n    \"nbumpe;\": \"\\u224F\\u0338\",\n    \"ncap;\": \"\\u2A43\",\n    \"Ncaron;\": \"\\u0147\",\n    \"ncaron;\": \"\\u0148\",\n    \"Ncedil;\": \"\\u0145\",\n    \"ncedil;\": \"\\u0146\",\n    \"ncong;\": \"\\u2247\",\n    \"ncongdot;\": \"\\u2A6D\\u0338\",\n    \"ncup;\": \"\\u2A42\",\n    \"Ncy;\": \"\\u041D\",\n    \"ncy;\": \"\\u043D\",\n    \"ndash;\": \"\\u2013\",\n    \"ne;\": \"\\u2260\",\n    \"nearhk;\": \"\\u2924\",\n    \"neArr;\": \"\\u21D7\",\n    \"nearr;\": \"\\u2197\",\n    \"nearrow;\": \"\\u2197\",\n    \"nedot;\": \"\\u2250\\u0338\",\n    \"NegativeMediumSpace;\": \"\\u200B\",\n    \"NegativeThickSpace;\": \"\\u200B\",\n    \"NegativeThinSpace;\": \"\\u200B\",\n    \"NegativeVeryThinSpace;\": \"\\u200B\",\n    \"nequiv;\": \"\\u2262\",\n    \"nesear;\": \"\\u2928\",\n    \"nesim;\": \"\\u2242\\u0338\",\n    \"NestedGreaterGreater;\": \"\\u226B\",\n    \"NestedLessLess;\": \"\\u226A\",\n    \"NewLine;\": \"\\n\",\n    \"nexist;\": \"\\u2204\",\n    \"nexists;\": \"\\u2204\",\n    \"Nfr;\": \"\\uD835\\uDD11\",\n    \"nfr;\": \"\\uD835\\uDD2B\",\n    \"ngE;\": \"\\u2267\\u0338\",\n    \"nge;\": \"\\u2271\",\n    \"ngeq;\": \"\\u2271\",\n    \"ngeqq;\": \"\\u2267\\u0338\",\n    \"ngeqslant;\": \"\\u2A7E\\u0338\",\n    \"nges;\": \"\\u2A7E\\u0338\",\n    \"nGg;\": \"\\u22D9\\u0338\",\n    \"ngsim;\": \"\\u2275\",\n    \"nGt;\": \"\\u226B\\u20D2\",\n    \"ngt;\": \"\\u226F\",\n    \"ngtr;\": \"\\u226F\",\n    \"nGtv;\": \"\\u226B\\u0338\",\n    \"nhArr;\": \"\\u21CE\",\n    \"nharr;\": \"\\u21AE\",\n    \"nhpar;\": \"\\u2AF2\",\n    \"ni;\": \"\\u220B\",\n    \"nis;\": \"\\u22FC\",\n    \"nisd;\": \"\\u22FA\",\n    \"niv;\": \"\\u220B\",\n    \"NJcy;\": \"\\u040A\",\n    \"njcy;\": \"\\u045A\",\n    \"nlArr;\": \"\\u21CD\",\n    \"nlarr;\": \"\\u219A\",\n    \"nldr;\": \"\\u2025\",\n    \"nlE;\": \"\\u2266\\u0338\",\n    \"nle;\": \"\\u2270\",\n    \"nLeftarrow;\": \"\\u21CD\",\n    \"nleftarrow;\": \"\\u219A\",\n    \"nLeftrightarrow;\": \"\\u21CE\",\n    \"nleftrightarrow;\": \"\\u21AE\",\n    \"nleq;\": \"\\u2270\",\n    \"nleqq;\": \"\\u2266\\u0338\",\n    \"nleqslant;\": \"\\u2A7D\\u0338\",\n    \"nles;\": \"\\u2A7D\\u0338\",\n    \"nless;\": \"\\u226E\",\n    \"nLl;\": \"\\u22D8\\u0338\",\n    \"nlsim;\": \"\\u2274\",\n    \"nLt;\": \"\\u226A\\u20D2\",\n    \"nlt;\": \"\\u226E\",\n    \"nltri;\": \"\\u22EA\",\n    \"nltrie;\": \"\\u22EC\",\n    \"nLtv;\": \"\\u226A\\u0338\",\n    \"nmid;\": \"\\u2224\",\n    \"NoBreak;\": \"\\u2060\",\n    \"NonBreakingSpace;\": \"\\u00A0\",\n    \"Nopf;\": \"\\u2115\",\n    \"nopf;\": \"\\uD835\\uDD5F\",\n    \"Not;\": \"\\u2AEC\",\n    \"not;\": \"\\u00AC\",\n    \"not\": \"\\u00AC\",\n    \"NotCongruent;\": \"\\u2262\",\n    \"NotCupCap;\": \"\\u226D\",\n    \"NotDoubleVerticalBar;\": \"\\u2226\",\n    \"NotElement;\": \"\\u2209\",\n    \"NotEqual;\": \"\\u2260\",\n    \"NotEqualTilde;\": \"\\u2242\\u0338\",\n    \"NotExists;\": \"\\u2204\",\n    \"NotGreater;\": \"\\u226F\",\n    \"NotGreaterEqual;\": \"\\u2271\",\n    \"NotGreaterFullEqual;\": \"\\u2267\\u0338\",\n    \"NotGreaterGreater;\": \"\\u226B\\u0338\",\n    \"NotGreaterLess;\": \"\\u2279\",\n    \"NotGreaterSlantEqual;\": \"\\u2A7E\\u0338\",\n    \"NotGreaterTilde;\": \"\\u2275\",\n    \"NotHumpDownHump;\": \"\\u224E\\u0338\",\n    \"NotHumpEqual;\": \"\\u224F\\u0338\",\n    \"notin;\": \"\\u2209\",\n    \"notindot;\": \"\\u22F5\\u0338\",\n    \"notinE;\": \"\\u22F9\\u0338\",\n    \"notinva;\": \"\\u2209\",\n    \"notinvb;\": \"\\u22F7\",\n    \"notinvc;\": \"\\u22F6\",\n    \"NotLeftTriangle;\": \"\\u22EA\",\n    \"NotLeftTriangleBar;\": \"\\u29CF\\u0338\",\n    \"NotLeftTriangleEqual;\": \"\\u22EC\",\n    \"NotLess;\": \"\\u226E\",\n    \"NotLessEqual;\": \"\\u2270\",\n    \"NotLessGreater;\": \"\\u2278\",\n    \"NotLessLess;\": \"\\u226A\\u0338\",\n    \"NotLessSlantEqual;\": \"\\u2A7D\\u0338\",\n    \"NotLessTilde;\": \"\\u2274\",\n    \"NotNestedGreaterGreater;\": \"\\u2AA2\\u0338\",\n    \"NotNestedLessLess;\": \"\\u2AA1\\u0338\",\n    \"notni;\": \"\\u220C\",\n    \"notniva;\": \"\\u220C\",\n    \"notnivb;\": \"\\u22FE\",\n    \"notnivc;\": \"\\u22FD\",\n    \"NotPrecedes;\": \"\\u2280\",\n    \"NotPrecedesEqual;\": \"\\u2AAF\\u0338\",\n    \"NotPrecedesSlantEqual;\": \"\\u22E0\",\n    \"NotReverseElement;\": \"\\u220C\",\n    \"NotRightTriangle;\": \"\\u22EB\",\n    \"NotRightTriangleBar;\": \"\\u29D0\\u0338\",\n    \"NotRightTriangleEqual;\": \"\\u22ED\",\n    \"NotSquareSubset;\": \"\\u228F\\u0338\",\n    \"NotSquareSubsetEqual;\": \"\\u22E2\",\n    \"NotSquareSuperset;\": \"\\u2290\\u0338\",\n    \"NotSquareSupersetEqual;\": \"\\u22E3\",\n    \"NotSubset;\": \"\\u2282\\u20D2\",\n    \"NotSubsetEqual;\": \"\\u2288\",\n    \"NotSucceeds;\": \"\\u2281\",\n    \"NotSucceedsEqual;\": \"\\u2AB0\\u0338\",\n    \"NotSucceedsSlantEqual;\": \"\\u22E1\",\n    \"NotSucceedsTilde;\": \"\\u227F\\u0338\",\n    \"NotSuperset;\": \"\\u2283\\u20D2\",\n    \"NotSupersetEqual;\": \"\\u2289\",\n    \"NotTilde;\": \"\\u2241\",\n    \"NotTildeEqual;\": \"\\u2244\",\n    \"NotTildeFullEqual;\": \"\\u2247\",\n    \"NotTildeTilde;\": \"\\u2249\",\n    \"NotVerticalBar;\": \"\\u2224\",\n    \"npar;\": \"\\u2226\",\n    \"nparallel;\": \"\\u2226\",\n    \"nparsl;\": \"\\u2AFD\\u20E5\",\n    \"npart;\": \"\\u2202\\u0338\",\n    \"npolint;\": \"\\u2A14\",\n    \"npr;\": \"\\u2280\",\n    \"nprcue;\": \"\\u22E0\",\n    \"npre;\": \"\\u2AAF\\u0338\",\n    \"nprec;\": \"\\u2280\",\n    \"npreceq;\": \"\\u2AAF\\u0338\",\n    \"nrArr;\": \"\\u21CF\",\n    \"nrarr;\": \"\\u219B\",\n    \"nrarrc;\": \"\\u2933\\u0338\",\n    \"nrarrw;\": \"\\u219D\\u0338\",\n    \"nRightarrow;\": \"\\u21CF\",\n    \"nrightarrow;\": \"\\u219B\",\n    \"nrtri;\": \"\\u22EB\",\n    \"nrtrie;\": \"\\u22ED\",\n    \"nsc;\": \"\\u2281\",\n    \"nsccue;\": \"\\u22E1\",\n    \"nsce;\": \"\\u2AB0\\u0338\",\n    \"Nscr;\": \"\\uD835\\uDCA9\",\n    \"nscr;\": \"\\uD835\\uDCC3\",\n    \"nshortmid;\": \"\\u2224\",\n    \"nshortparallel;\": \"\\u2226\",\n    \"nsim;\": \"\\u2241\",\n    \"nsime;\": \"\\u2244\",\n    \"nsimeq;\": \"\\u2244\",\n    \"nsmid;\": \"\\u2224\",\n    \"nspar;\": \"\\u2226\",\n    \"nsqsube;\": \"\\u22E2\",\n    \"nsqsupe;\": \"\\u22E3\",\n    \"nsub;\": \"\\u2284\",\n    \"nsubE;\": \"\\u2AC5\\u0338\",\n    \"nsube;\": \"\\u2288\",\n    \"nsubset;\": \"\\u2282\\u20D2\",\n    \"nsubseteq;\": \"\\u2288\",\n    \"nsubseteqq;\": \"\\u2AC5\\u0338\",\n    \"nsucc;\": \"\\u2281\",\n    \"nsucceq;\": \"\\u2AB0\\u0338\",\n    \"nsup;\": \"\\u2285\",\n    \"nsupE;\": \"\\u2AC6\\u0338\",\n    \"nsupe;\": \"\\u2289\",\n    \"nsupset;\": \"\\u2283\\u20D2\",\n    \"nsupseteq;\": \"\\u2289\",\n    \"nsupseteqq;\": \"\\u2AC6\\u0338\",\n    \"ntgl;\": \"\\u2279\",\n    \"Ntilde;\": \"\\u00D1\",\n    \"Ntilde\": \"\\u00D1\",\n    \"ntilde;\": \"\\u00F1\",\n    \"ntilde\": \"\\u00F1\",\n    \"ntlg;\": \"\\u2278\",\n    \"ntriangleleft;\": \"\\u22EA\",\n    \"ntrianglelefteq;\": \"\\u22EC\",\n    \"ntriangleright;\": \"\\u22EB\",\n    \"ntrianglerighteq;\": \"\\u22ED\",\n    \"Nu;\": \"\\u039D\",\n    \"nu;\": \"\\u03BD\",\n    \"num;\": \"#\",\n    \"numero;\": \"\\u2116\",\n    \"numsp;\": \"\\u2007\",\n    \"nvap;\": \"\\u224D\\u20D2\",\n    \"nVDash;\": \"\\u22AF\",\n    \"nVdash;\": \"\\u22AE\",\n    \"nvDash;\": \"\\u22AD\",\n    \"nvdash;\": \"\\u22AC\",\n    \"nvge;\": \"\\u2265\\u20D2\",\n    \"nvgt;\": \">\\u20D2\",\n    \"nvHarr;\": \"\\u2904\",\n    \"nvinfin;\": \"\\u29DE\",\n    \"nvlArr;\": \"\\u2902\",\n    \"nvle;\": \"\\u2264\\u20D2\",\n    \"nvlt;\": \"<\\u20D2\",\n    \"nvltrie;\": \"\\u22B4\\u20D2\",\n    \"nvrArr;\": \"\\u2903\",\n    \"nvrtrie;\": \"\\u22B5\\u20D2\",\n    \"nvsim;\": \"\\u223C\\u20D2\",\n    \"nwarhk;\": \"\\u2923\",\n    \"nwArr;\": \"\\u21D6\",\n    \"nwarr;\": \"\\u2196\",\n    \"nwarrow;\": \"\\u2196\",\n    \"nwnear;\": \"\\u2927\",\n    \"Oacute;\": \"\\u00D3\",\n    \"Oacute\": \"\\u00D3\",\n    \"oacute;\": \"\\u00F3\",\n    \"oacute\": \"\\u00F3\",\n    \"oast;\": \"\\u229B\",\n    \"ocir;\": \"\\u229A\",\n    \"Ocirc;\": \"\\u00D4\",\n    \"Ocirc\": \"\\u00D4\",\n    \"ocirc;\": \"\\u00F4\",\n    \"ocirc\": \"\\u00F4\",\n    \"Ocy;\": \"\\u041E\",\n    \"ocy;\": \"\\u043E\",\n    \"odash;\": \"\\u229D\",\n    \"Odblac;\": \"\\u0150\",\n    \"odblac;\": \"\\u0151\",\n    \"odiv;\": \"\\u2A38\",\n    \"odot;\": \"\\u2299\",\n    \"odsold;\": \"\\u29BC\",\n    \"OElig;\": \"\\u0152\",\n    \"oelig;\": \"\\u0153\",\n    \"ofcir;\": \"\\u29BF\",\n    \"Ofr;\": \"\\uD835\\uDD12\",\n    \"ofr;\": \"\\uD835\\uDD2C\",\n    \"ogon;\": \"\\u02DB\",\n    \"Ograve;\": \"\\u00D2\",\n    \"Ograve\": \"\\u00D2\",\n    \"ograve;\": \"\\u00F2\",\n    \"ograve\": \"\\u00F2\",\n    \"ogt;\": \"\\u29C1\",\n    \"ohbar;\": \"\\u29B5\",\n    \"ohm;\": \"\\u03A9\",\n    \"oint;\": \"\\u222E\",\n    \"olarr;\": \"\\u21BA\",\n    \"olcir;\": \"\\u29BE\",\n    \"olcross;\": \"\\u29BB\",\n    \"oline;\": \"\\u203E\",\n    \"olt;\": \"\\u29C0\",\n    \"Omacr;\": \"\\u014C\",\n    \"omacr;\": \"\\u014D\",\n    \"Omega;\": \"\\u03A9\",\n    \"omega;\": \"\\u03C9\",\n    \"Omicron;\": \"\\u039F\",\n    \"omicron;\": \"\\u03BF\",\n    \"omid;\": \"\\u29B6\",\n    \"ominus;\": \"\\u2296\",\n    \"Oopf;\": \"\\uD835\\uDD46\",\n    \"oopf;\": \"\\uD835\\uDD60\",\n    \"opar;\": \"\\u29B7\",\n    \"OpenCurlyDoubleQuote;\": \"\\u201C\",\n    \"OpenCurlyQuote;\": \"\\u2018\",\n    \"operp;\": \"\\u29B9\",\n    \"oplus;\": \"\\u2295\",\n    \"Or;\": \"\\u2A54\",\n    \"or;\": \"\\u2228\",\n    \"orarr;\": \"\\u21BB\",\n    \"ord;\": \"\\u2A5D\",\n    \"order;\": \"\\u2134\",\n    \"orderof;\": \"\\u2134\",\n    \"ordf;\": \"\\u00AA\",\n    \"ordf\": \"\\u00AA\",\n    \"ordm;\": \"\\u00BA\",\n    \"ordm\": \"\\u00BA\",\n    \"origof;\": \"\\u22B6\",\n    \"oror;\": \"\\u2A56\",\n    \"orslope;\": \"\\u2A57\",\n    \"orv;\": \"\\u2A5B\",\n    \"oS;\": \"\\u24C8\",\n    \"Oscr;\": \"\\uD835\\uDCAA\",\n    \"oscr;\": \"\\u2134\",\n    \"Oslash;\": \"\\u00D8\",\n    \"Oslash\": \"\\u00D8\",\n    \"oslash;\": \"\\u00F8\",\n    \"oslash\": \"\\u00F8\",\n    \"osol;\": \"\\u2298\",\n    \"Otilde;\": \"\\u00D5\",\n    \"Otilde\": \"\\u00D5\",\n    \"otilde;\": \"\\u00F5\",\n    \"otilde\": \"\\u00F5\",\n    \"Otimes;\": \"\\u2A37\",\n    \"otimes;\": \"\\u2297\",\n    \"otimesas;\": \"\\u2A36\",\n    \"Ouml;\": \"\\u00D6\",\n    \"Ouml\": \"\\u00D6\",\n    \"ouml;\": \"\\u00F6\",\n    \"ouml\": \"\\u00F6\",\n    \"ovbar;\": \"\\u233D\",\n    \"OverBar;\": \"\\u203E\",\n    \"OverBrace;\": \"\\u23DE\",\n    \"OverBracket;\": \"\\u23B4\",\n    \"OverParenthesis;\": \"\\u23DC\",\n    \"par;\": \"\\u2225\",\n    \"para;\": \"\\u00B6\",\n    \"para\": \"\\u00B6\",\n    \"parallel;\": \"\\u2225\",\n    \"parsim;\": \"\\u2AF3\",\n    \"parsl;\": \"\\u2AFD\",\n    \"part;\": \"\\u2202\",\n    \"PartialD;\": \"\\u2202\",\n    \"Pcy;\": \"\\u041F\",\n    \"pcy;\": \"\\u043F\",\n    \"percnt;\": \"%\",\n    \"period;\": \".\",\n    \"permil;\": \"\\u2030\",\n    \"perp;\": \"\\u22A5\",\n    \"pertenk;\": \"\\u2031\",\n    \"Pfr;\": \"\\uD835\\uDD13\",\n    \"pfr;\": \"\\uD835\\uDD2D\",\n    \"Phi;\": \"\\u03A6\",\n    \"phi;\": \"\\u03C6\",\n    \"phiv;\": \"\\u03D5\",\n    \"phmmat;\": \"\\u2133\",\n    \"phone;\": \"\\u260E\",\n    \"Pi;\": \"\\u03A0\",\n    \"pi;\": \"\\u03C0\",\n    \"pitchfork;\": \"\\u22D4\",\n    \"piv;\": \"\\u03D6\",\n    \"planck;\": \"\\u210F\",\n    \"planckh;\": \"\\u210E\",\n    \"plankv;\": \"\\u210F\",\n    \"plus;\": \"+\",\n    \"plusacir;\": \"\\u2A23\",\n    \"plusb;\": \"\\u229E\",\n    \"pluscir;\": \"\\u2A22\",\n    \"plusdo;\": \"\\u2214\",\n    \"plusdu;\": \"\\u2A25\",\n    \"pluse;\": \"\\u2A72\",\n    \"PlusMinus;\": \"\\u00B1\",\n    \"plusmn;\": \"\\u00B1\",\n    \"plusmn\": \"\\u00B1\",\n    \"plussim;\": \"\\u2A26\",\n    \"plustwo;\": \"\\u2A27\",\n    \"pm;\": \"\\u00B1\",\n    \"Poincareplane;\": \"\\u210C\",\n    \"pointint;\": \"\\u2A15\",\n    \"Popf;\": \"\\u2119\",\n    \"popf;\": \"\\uD835\\uDD61\",\n    \"pound;\": \"\\u00A3\",\n    \"pound\": \"\\u00A3\",\n    \"Pr;\": \"\\u2ABB\",\n    \"pr;\": \"\\u227A\",\n    \"prap;\": \"\\u2AB7\",\n    \"prcue;\": \"\\u227C\",\n    \"prE;\": \"\\u2AB3\",\n    \"pre;\": \"\\u2AAF\",\n    \"prec;\": \"\\u227A\",\n    \"precapprox;\": \"\\u2AB7\",\n    \"preccurlyeq;\": \"\\u227C\",\n    \"Precedes;\": \"\\u227A\",\n    \"PrecedesEqual;\": \"\\u2AAF\",\n    \"PrecedesSlantEqual;\": \"\\u227C\",\n    \"PrecedesTilde;\": \"\\u227E\",\n    \"preceq;\": \"\\u2AAF\",\n    \"precnapprox;\": \"\\u2AB9\",\n    \"precneqq;\": \"\\u2AB5\",\n    \"precnsim;\": \"\\u22E8\",\n    \"precsim;\": \"\\u227E\",\n    \"Prime;\": \"\\u2033\",\n    \"prime;\": \"\\u2032\",\n    \"primes;\": \"\\u2119\",\n    \"prnap;\": \"\\u2AB9\",\n    \"prnE;\": \"\\u2AB5\",\n    \"prnsim;\": \"\\u22E8\",\n    \"prod;\": \"\\u220F\",\n    \"Product;\": \"\\u220F\",\n    \"profalar;\": \"\\u232E\",\n    \"profline;\": \"\\u2312\",\n    \"profsurf;\": \"\\u2313\",\n    \"prop;\": \"\\u221D\",\n    \"Proportion;\": \"\\u2237\",\n    \"Proportional;\": \"\\u221D\",\n    \"propto;\": \"\\u221D\",\n    \"prsim;\": \"\\u227E\",\n    \"prurel;\": \"\\u22B0\",\n    \"Pscr;\": \"\\uD835\\uDCAB\",\n    \"pscr;\": \"\\uD835\\uDCC5\",\n    \"Psi;\": \"\\u03A8\",\n    \"psi;\": \"\\u03C8\",\n    \"puncsp;\": \"\\u2008\",\n    \"Qfr;\": \"\\uD835\\uDD14\",\n    \"qfr;\": \"\\uD835\\uDD2E\",\n    \"qint;\": \"\\u2A0C\",\n    \"Qopf;\": \"\\u211A\",\n    \"qopf;\": \"\\uD835\\uDD62\",\n    \"qprime;\": \"\\u2057\",\n    \"Qscr;\": \"\\uD835\\uDCAC\",\n    \"qscr;\": \"\\uD835\\uDCC6\",\n    \"quaternions;\": \"\\u210D\",\n    \"quatint;\": \"\\u2A16\",\n    \"quest;\": \"?\",\n    \"questeq;\": \"\\u225F\",\n    \"QUOT;\": \"\\\"\",\n    \"QUOT\": \"\\\"\",\n    \"quot;\": \"\\\"\",\n    \"quot\": \"\\\"\",\n    \"rAarr;\": \"\\u21DB\",\n    \"race;\": \"\\u223D\\u0331\",\n    \"Racute;\": \"\\u0154\",\n    \"racute;\": \"\\u0155\",\n    \"radic;\": \"\\u221A\",\n    \"raemptyv;\": \"\\u29B3\",\n    \"Rang;\": \"\\u27EB\",\n    \"rang;\": \"\\u27E9\",\n    \"rangd;\": \"\\u2992\",\n    \"range;\": \"\\u29A5\",\n    \"rangle;\": \"\\u27E9\",\n    \"raquo;\": \"\\u00BB\",\n    \"raquo\": \"\\u00BB\",\n    \"Rarr;\": \"\\u21A0\",\n    \"rArr;\": \"\\u21D2\",\n    \"rarr;\": \"\\u2192\",\n    \"rarrap;\": \"\\u2975\",\n    \"rarrb;\": \"\\u21E5\",\n    \"rarrbfs;\": \"\\u2920\",\n    \"rarrc;\": \"\\u2933\",\n    \"rarrfs;\": \"\\u291E\",\n    \"rarrhk;\": \"\\u21AA\",\n    \"rarrlp;\": \"\\u21AC\",\n    \"rarrpl;\": \"\\u2945\",\n    \"rarrsim;\": \"\\u2974\",\n    \"Rarrtl;\": \"\\u2916\",\n    \"rarrtl;\": \"\\u21A3\",\n    \"rarrw;\": \"\\u219D\",\n    \"rAtail;\": \"\\u291C\",\n    \"ratail;\": \"\\u291A\",\n    \"ratio;\": \"\\u2236\",\n    \"rationals;\": \"\\u211A\",\n    \"RBarr;\": \"\\u2910\",\n    \"rBarr;\": \"\\u290F\",\n    \"rbarr;\": \"\\u290D\",\n    \"rbbrk;\": \"\\u2773\",\n    \"rbrace;\": \"}\",\n    \"rbrack;\": \"]\",\n    \"rbrke;\": \"\\u298C\",\n    \"rbrksld;\": \"\\u298E\",\n    \"rbrkslu;\": \"\\u2990\",\n    \"Rcaron;\": \"\\u0158\",\n    \"rcaron;\": \"\\u0159\",\n    \"Rcedil;\": \"\\u0156\",\n    \"rcedil;\": \"\\u0157\",\n    \"rceil;\": \"\\u2309\",\n    \"rcub;\": \"}\",\n    \"Rcy;\": \"\\u0420\",\n    \"rcy;\": \"\\u0440\",\n    \"rdca;\": \"\\u2937\",\n    \"rdldhar;\": \"\\u2969\",\n    \"rdquo;\": \"\\u201D\",\n    \"rdquor;\": \"\\u201D\",\n    \"rdsh;\": \"\\u21B3\",\n    \"Re;\": \"\\u211C\",\n    \"real;\": \"\\u211C\",\n    \"realine;\": \"\\u211B\",\n    \"realpart;\": \"\\u211C\",\n    \"reals;\": \"\\u211D\",\n    \"rect;\": \"\\u25AD\",\n    \"REG;\": \"\\u00AE\",\n    \"REG\": \"\\u00AE\",\n    \"reg;\": \"\\u00AE\",\n    \"reg\": \"\\u00AE\",\n    \"ReverseElement;\": \"\\u220B\",\n    \"ReverseEquilibrium;\": \"\\u21CB\",\n    \"ReverseUpEquilibrium;\": \"\\u296F\",\n    \"rfisht;\": \"\\u297D\",\n    \"rfloor;\": \"\\u230B\",\n    \"Rfr;\": \"\\u211C\",\n    \"rfr;\": \"\\uD835\\uDD2F\",\n    \"rHar;\": \"\\u2964\",\n    \"rhard;\": \"\\u21C1\",\n    \"rharu;\": \"\\u21C0\",\n    \"rharul;\": \"\\u296C\",\n    \"Rho;\": \"\\u03A1\",\n    \"rho;\": \"\\u03C1\",\n    \"rhov;\": \"\\u03F1\",\n    \"RightAngleBracket;\": \"\\u27E9\",\n    \"RightArrow;\": \"\\u2192\",\n    \"Rightarrow;\": \"\\u21D2\",\n    \"rightarrow;\": \"\\u2192\",\n    \"RightArrowBar;\": \"\\u21E5\",\n    \"RightArrowLeftArrow;\": \"\\u21C4\",\n    \"rightarrowtail;\": \"\\u21A3\",\n    \"RightCeiling;\": \"\\u2309\",\n    \"RightDoubleBracket;\": \"\\u27E7\",\n    \"RightDownTeeVector;\": \"\\u295D\",\n    \"RightDownVector;\": \"\\u21C2\",\n    \"RightDownVectorBar;\": \"\\u2955\",\n    \"RightFloor;\": \"\\u230B\",\n    \"rightharpoondown;\": \"\\u21C1\",\n    \"rightharpoonup;\": \"\\u21C0\",\n    \"rightleftarrows;\": \"\\u21C4\",\n    \"rightleftharpoons;\": \"\\u21CC\",\n    \"rightrightarrows;\": \"\\u21C9\",\n    \"rightsquigarrow;\": \"\\u219D\",\n    \"RightTee;\": \"\\u22A2\",\n    \"RightTeeArrow;\": \"\\u21A6\",\n    \"RightTeeVector;\": \"\\u295B\",\n    \"rightthreetimes;\": \"\\u22CC\",\n    \"RightTriangle;\": \"\\u22B3\",\n    \"RightTriangleBar;\": \"\\u29D0\",\n    \"RightTriangleEqual;\": \"\\u22B5\",\n    \"RightUpDownVector;\": \"\\u294F\",\n    \"RightUpTeeVector;\": \"\\u295C\",\n    \"RightUpVector;\": \"\\u21BE\",\n    \"RightUpVectorBar;\": \"\\u2954\",\n    \"RightVector;\": \"\\u21C0\",\n    \"RightVectorBar;\": \"\\u2953\",\n    \"ring;\": \"\\u02DA\",\n    \"risingdotseq;\": \"\\u2253\",\n    \"rlarr;\": \"\\u21C4\",\n    \"rlhar;\": \"\\u21CC\",\n    \"rlm;\": \"\\u200F\",\n    \"rmoust;\": \"\\u23B1\",\n    \"rmoustache;\": \"\\u23B1\",\n    \"rnmid;\": \"\\u2AEE\",\n    \"roang;\": \"\\u27ED\",\n    \"roarr;\": \"\\u21FE\",\n    \"robrk;\": \"\\u27E7\",\n    \"ropar;\": \"\\u2986\",\n    \"Ropf;\": \"\\u211D\",\n    \"ropf;\": \"\\uD835\\uDD63\",\n    \"roplus;\": \"\\u2A2E\",\n    \"rotimes;\": \"\\u2A35\",\n    \"RoundImplies;\": \"\\u2970\",\n    \"rpar;\": \")\",\n    \"rpargt;\": \"\\u2994\",\n    \"rppolint;\": \"\\u2A12\",\n    \"rrarr;\": \"\\u21C9\",\n    \"Rrightarrow;\": \"\\u21DB\",\n    \"rsaquo;\": \"\\u203A\",\n    \"Rscr;\": \"\\u211B\",\n    \"rscr;\": \"\\uD835\\uDCC7\",\n    \"Rsh;\": \"\\u21B1\",\n    \"rsh;\": \"\\u21B1\",\n    \"rsqb;\": \"]\",\n    \"rsquo;\": \"\\u2019\",\n    \"rsquor;\": \"\\u2019\",\n    \"rthree;\": \"\\u22CC\",\n    \"rtimes;\": \"\\u22CA\",\n    \"rtri;\": \"\\u25B9\",\n    \"rtrie;\": \"\\u22B5\",\n    \"rtrif;\": \"\\u25B8\",\n    \"rtriltri;\": \"\\u29CE\",\n    \"RuleDelayed;\": \"\\u29F4\",\n    \"ruluhar;\": \"\\u2968\",\n    \"rx;\": \"\\u211E\",\n    \"Sacute;\": \"\\u015A\",\n    \"sacute;\": \"\\u015B\",\n    \"sbquo;\": \"\\u201A\",\n    \"Sc;\": \"\\u2ABC\",\n    \"sc;\": \"\\u227B\",\n    \"scap;\": \"\\u2AB8\",\n    \"Scaron;\": \"\\u0160\",\n    \"scaron;\": \"\\u0161\",\n    \"sccue;\": \"\\u227D\",\n    \"scE;\": \"\\u2AB4\",\n    \"sce;\": \"\\u2AB0\",\n    \"Scedil;\": \"\\u015E\",\n    \"scedil;\": \"\\u015F\",\n    \"Scirc;\": \"\\u015C\",\n    \"scirc;\": \"\\u015D\",\n    \"scnap;\": \"\\u2ABA\",\n    \"scnE;\": \"\\u2AB6\",\n    \"scnsim;\": \"\\u22E9\",\n    \"scpolint;\": \"\\u2A13\",\n    \"scsim;\": \"\\u227F\",\n    \"Scy;\": \"\\u0421\",\n    \"scy;\": \"\\u0441\",\n    \"sdot;\": \"\\u22C5\",\n    \"sdotb;\": \"\\u22A1\",\n    \"sdote;\": \"\\u2A66\",\n    \"searhk;\": \"\\u2925\",\n    \"seArr;\": \"\\u21D8\",\n    \"searr;\": \"\\u2198\",\n    \"searrow;\": \"\\u2198\",\n    \"sect;\": \"\\u00A7\",\n    \"sect\": \"\\u00A7\",\n    \"semi;\": \";\",\n    \"seswar;\": \"\\u2929\",\n    \"setminus;\": \"\\u2216\",\n    \"setmn;\": \"\\u2216\",\n    \"sext;\": \"\\u2736\",\n    \"Sfr;\": \"\\uD835\\uDD16\",\n    \"sfr;\": \"\\uD835\\uDD30\",\n    \"sfrown;\": \"\\u2322\",\n    \"sharp;\": \"\\u266F\",\n    \"SHCHcy;\": \"\\u0429\",\n    \"shchcy;\": \"\\u0449\",\n    \"SHcy;\": \"\\u0428\",\n    \"shcy;\": \"\\u0448\",\n    \"ShortDownArrow;\": \"\\u2193\",\n    \"ShortLeftArrow;\": \"\\u2190\",\n    \"shortmid;\": \"\\u2223\",\n    \"shortparallel;\": \"\\u2225\",\n    \"ShortRightArrow;\": \"\\u2192\",\n    \"ShortUpArrow;\": \"\\u2191\",\n    \"shy;\": \"\\u00AD\",\n    \"shy\": \"\\u00AD\",\n    \"Sigma;\": \"\\u03A3\",\n    \"sigma;\": \"\\u03C3\",\n    \"sigmaf;\": \"\\u03C2\",\n    \"sigmav;\": \"\\u03C2\",\n    \"sim;\": \"\\u223C\",\n    \"simdot;\": \"\\u2A6A\",\n    \"sime;\": \"\\u2243\",\n    \"simeq;\": \"\\u2243\",\n    \"simg;\": \"\\u2A9E\",\n    \"simgE;\": \"\\u2AA0\",\n    \"siml;\": \"\\u2A9D\",\n    \"simlE;\": \"\\u2A9F\",\n    \"simne;\": \"\\u2246\",\n    \"simplus;\": \"\\u2A24\",\n    \"simrarr;\": \"\\u2972\",\n    \"slarr;\": \"\\u2190\",\n    \"SmallCircle;\": \"\\u2218\",\n    \"smallsetminus;\": \"\\u2216\",\n    \"smashp;\": \"\\u2A33\",\n    \"smeparsl;\": \"\\u29E4\",\n    \"smid;\": \"\\u2223\",\n    \"smile;\": \"\\u2323\",\n    \"smt;\": \"\\u2AAA\",\n    \"smte;\": \"\\u2AAC\",\n    \"smtes;\": \"\\u2AAC\\uFE00\",\n    \"SOFTcy;\": \"\\u042C\",\n    \"softcy;\": \"\\u044C\",\n    \"sol;\": \"/\",\n    \"solb;\": \"\\u29C4\",\n    \"solbar;\": \"\\u233F\",\n    \"Sopf;\": \"\\uD835\\uDD4A\",\n    \"sopf;\": \"\\uD835\\uDD64\",\n    \"spades;\": \"\\u2660\",\n    \"spadesuit;\": \"\\u2660\",\n    \"spar;\": \"\\u2225\",\n    \"sqcap;\": \"\\u2293\",\n    \"sqcaps;\": \"\\u2293\\uFE00\",\n    \"sqcup;\": \"\\u2294\",\n    \"sqcups;\": \"\\u2294\\uFE00\",\n    \"Sqrt;\": \"\\u221A\",\n    \"sqsub;\": \"\\u228F\",\n    \"sqsube;\": \"\\u2291\",\n    \"sqsubset;\": \"\\u228F\",\n    \"sqsubseteq;\": \"\\u2291\",\n    \"sqsup;\": \"\\u2290\",\n    \"sqsupe;\": \"\\u2292\",\n    \"sqsupset;\": \"\\u2290\",\n    \"sqsupseteq;\": \"\\u2292\",\n    \"squ;\": \"\\u25A1\",\n    \"Square;\": \"\\u25A1\",\n    \"square;\": \"\\u25A1\",\n    \"SquareIntersection;\": \"\\u2293\",\n    \"SquareSubset;\": \"\\u228F\",\n    \"SquareSubsetEqual;\": \"\\u2291\",\n    \"SquareSuperset;\": \"\\u2290\",\n    \"SquareSupersetEqual;\": \"\\u2292\",\n    \"SquareUnion;\": \"\\u2294\",\n    \"squarf;\": \"\\u25AA\",\n    \"squf;\": \"\\u25AA\",\n    \"srarr;\": \"\\u2192\",\n    \"Sscr;\": \"\\uD835\\uDCAE\",\n    \"sscr;\": \"\\uD835\\uDCC8\",\n    \"ssetmn;\": \"\\u2216\",\n    \"ssmile;\": \"\\u2323\",\n    \"sstarf;\": \"\\u22C6\",\n    \"Star;\": \"\\u22C6\",\n    \"star;\": \"\\u2606\",\n    \"starf;\": \"\\u2605\",\n    \"straightepsilon;\": \"\\u03F5\",\n    \"straightphi;\": \"\\u03D5\",\n    \"strns;\": \"\\u00AF\",\n    \"Sub;\": \"\\u22D0\",\n    \"sub;\": \"\\u2282\",\n    \"subdot;\": \"\\u2ABD\",\n    \"subE;\": \"\\u2AC5\",\n    \"sube;\": \"\\u2286\",\n    \"subedot;\": \"\\u2AC3\",\n    \"submult;\": \"\\u2AC1\",\n    \"subnE;\": \"\\u2ACB\",\n    \"subne;\": \"\\u228A\",\n    \"subplus;\": \"\\u2ABF\",\n    \"subrarr;\": \"\\u2979\",\n    \"Subset;\": \"\\u22D0\",\n    \"subset;\": \"\\u2282\",\n    \"subseteq;\": \"\\u2286\",\n    \"subseteqq;\": \"\\u2AC5\",\n    \"SubsetEqual;\": \"\\u2286\",\n    \"subsetneq;\": \"\\u228A\",\n    \"subsetneqq;\": \"\\u2ACB\",\n    \"subsim;\": \"\\u2AC7\",\n    \"subsub;\": \"\\u2AD5\",\n    \"subsup;\": \"\\u2AD3\",\n    \"succ;\": \"\\u227B\",\n    \"succapprox;\": \"\\u2AB8\",\n    \"succcurlyeq;\": \"\\u227D\",\n    \"Succeeds;\": \"\\u227B\",\n    \"SucceedsEqual;\": \"\\u2AB0\",\n    \"SucceedsSlantEqual;\": \"\\u227D\",\n    \"SucceedsTilde;\": \"\\u227F\",\n    \"succeq;\": \"\\u2AB0\",\n    \"succnapprox;\": \"\\u2ABA\",\n    \"succneqq;\": \"\\u2AB6\",\n    \"succnsim;\": \"\\u22E9\",\n    \"succsim;\": \"\\u227F\",\n    \"SuchThat;\": \"\\u220B\",\n    \"Sum;\": \"\\u2211\",\n    \"sum;\": \"\\u2211\",\n    \"sung;\": \"\\u266A\",\n    \"Sup;\": \"\\u22D1\",\n    \"sup;\": \"\\u2283\",\n    \"sup1;\": \"\\u00B9\",\n    \"sup1\": \"\\u00B9\",\n    \"sup2;\": \"\\u00B2\",\n    \"sup2\": \"\\u00B2\",\n    \"sup3;\": \"\\u00B3\",\n    \"sup3\": \"\\u00B3\",\n    \"supdot;\": \"\\u2ABE\",\n    \"supdsub;\": \"\\u2AD8\",\n    \"supE;\": \"\\u2AC6\",\n    \"supe;\": \"\\u2287\",\n    \"supedot;\": \"\\u2AC4\",\n    \"Superset;\": \"\\u2283\",\n    \"SupersetEqual;\": \"\\u2287\",\n    \"suphsol;\": \"\\u27C9\",\n    \"suphsub;\": \"\\u2AD7\",\n    \"suplarr;\": \"\\u297B\",\n    \"supmult;\": \"\\u2AC2\",\n    \"supnE;\": \"\\u2ACC\",\n    \"supne;\": \"\\u228B\",\n    \"supplus;\": \"\\u2AC0\",\n    \"Supset;\": \"\\u22D1\",\n    \"supset;\": \"\\u2283\",\n    \"supseteq;\": \"\\u2287\",\n    \"supseteqq;\": \"\\u2AC6\",\n    \"supsetneq;\": \"\\u228B\",\n    \"supsetneqq;\": \"\\u2ACC\",\n    \"supsim;\": \"\\u2AC8\",\n    \"supsub;\": \"\\u2AD4\",\n    \"supsup;\": \"\\u2AD6\",\n    \"swarhk;\": \"\\u2926\",\n    \"swArr;\": \"\\u21D9\",\n    \"swarr;\": \"\\u2199\",\n    \"swarrow;\": \"\\u2199\",\n    \"swnwar;\": \"\\u292A\",\n    \"szlig;\": \"\\u00DF\",\n    \"szlig\": \"\\u00DF\",\n    \"Tab;\": \"\\t\",\n    \"target;\": \"\\u2316\",\n    \"Tau;\": \"\\u03A4\",\n    \"tau;\": \"\\u03C4\",\n    \"tbrk;\": \"\\u23B4\",\n    \"Tcaron;\": \"\\u0164\",\n    \"tcaron;\": \"\\u0165\",\n    \"Tcedil;\": \"\\u0162\",\n    \"tcedil;\": \"\\u0163\",\n    \"Tcy;\": \"\\u0422\",\n    \"tcy;\": \"\\u0442\",\n    \"tdot;\": \"\\u20DB\",\n    \"telrec;\": \"\\u2315\",\n    \"Tfr;\": \"\\uD835\\uDD17\",\n    \"tfr;\": \"\\uD835\\uDD31\",\n    \"there4;\": \"\\u2234\",\n    \"Therefore;\": \"\\u2234\",\n    \"therefore;\": \"\\u2234\",\n    \"Theta;\": \"\\u0398\",\n    \"theta;\": \"\\u03B8\",\n    \"thetasym;\": \"\\u03D1\",\n    \"thetav;\": \"\\u03D1\",\n    \"thickapprox;\": \"\\u2248\",\n    \"thicksim;\": \"\\u223C\",\n    \"ThickSpace;\": \"\\u205F\\u200A\",\n    \"thinsp;\": \"\\u2009\",\n    \"ThinSpace;\": \"\\u2009\",\n    \"thkap;\": \"\\u2248\",\n    \"thksim;\": \"\\u223C\",\n    \"THORN;\": \"\\u00DE\",\n    \"THORN\": \"\\u00DE\",\n    \"thorn;\": \"\\u00FE\",\n    \"thorn\": \"\\u00FE\",\n    \"Tilde;\": \"\\u223C\",\n    \"tilde;\": \"\\u02DC\",\n    \"TildeEqual;\": \"\\u2243\",\n    \"TildeFullEqual;\": \"\\u2245\",\n    \"TildeTilde;\": \"\\u2248\",\n    \"times;\": \"\\u00D7\",\n    \"times\": \"\\u00D7\",\n    \"timesb;\": \"\\u22A0\",\n    \"timesbar;\": \"\\u2A31\",\n    \"timesd;\": \"\\u2A30\",\n    \"tint;\": \"\\u222D\",\n    \"toea;\": \"\\u2928\",\n    \"top;\": \"\\u22A4\",\n    \"topbot;\": \"\\u2336\",\n    \"topcir;\": \"\\u2AF1\",\n    \"Topf;\": \"\\uD835\\uDD4B\",\n    \"topf;\": \"\\uD835\\uDD65\",\n    \"topfork;\": \"\\u2ADA\",\n    \"tosa;\": \"\\u2929\",\n    \"tprime;\": \"\\u2034\",\n    \"TRADE;\": \"\\u2122\",\n    \"trade;\": \"\\u2122\",\n    \"triangle;\": \"\\u25B5\",\n    \"triangledown;\": \"\\u25BF\",\n    \"triangleleft;\": \"\\u25C3\",\n    \"trianglelefteq;\": \"\\u22B4\",\n    \"triangleq;\": \"\\u225C\",\n    \"triangleright;\": \"\\u25B9\",\n    \"trianglerighteq;\": \"\\u22B5\",\n    \"tridot;\": \"\\u25EC\",\n    \"trie;\": \"\\u225C\",\n    \"triminus;\": \"\\u2A3A\",\n    \"TripleDot;\": \"\\u20DB\",\n    \"triplus;\": \"\\u2A39\",\n    \"trisb;\": \"\\u29CD\",\n    \"tritime;\": \"\\u2A3B\",\n    \"trpezium;\": \"\\u23E2\",\n    \"Tscr;\": \"\\uD835\\uDCAF\",\n    \"tscr;\": \"\\uD835\\uDCC9\",\n    \"TScy;\": \"\\u0426\",\n    \"tscy;\": \"\\u0446\",\n    \"TSHcy;\": \"\\u040B\",\n    \"tshcy;\": \"\\u045B\",\n    \"Tstrok;\": \"\\u0166\",\n    \"tstrok;\": \"\\u0167\",\n    \"twixt;\": \"\\u226C\",\n    \"twoheadleftarrow;\": \"\\u219E\",\n    \"twoheadrightarrow;\": \"\\u21A0\",\n    \"Uacute;\": \"\\u00DA\",\n    \"Uacute\": \"\\u00DA\",\n    \"uacute;\": \"\\u00FA\",\n    \"uacute\": \"\\u00FA\",\n    \"Uarr;\": \"\\u219F\",\n    \"uArr;\": \"\\u21D1\",\n    \"uarr;\": \"\\u2191\",\n    \"Uarrocir;\": \"\\u2949\",\n    \"Ubrcy;\": \"\\u040E\",\n    \"ubrcy;\": \"\\u045E\",\n    \"Ubreve;\": \"\\u016C\",\n    \"ubreve;\": \"\\u016D\",\n    \"Ucirc;\": \"\\u00DB\",\n    \"Ucirc\": \"\\u00DB\",\n    \"ucirc;\": \"\\u00FB\",\n    \"ucirc\": \"\\u00FB\",\n    \"Ucy;\": \"\\u0423\",\n    \"ucy;\": \"\\u0443\",\n    \"udarr;\": \"\\u21C5\",\n    \"Udblac;\": \"\\u0170\",\n    \"udblac;\": \"\\u0171\",\n    \"udhar;\": \"\\u296E\",\n    \"ufisht;\": \"\\u297E\",\n    \"Ufr;\": \"\\uD835\\uDD18\",\n    \"ufr;\": \"\\uD835\\uDD32\",\n    \"Ugrave;\": \"\\u00D9\",\n    \"Ugrave\": \"\\u00D9\",\n    \"ugrave;\": \"\\u00F9\",\n    \"ugrave\": \"\\u00F9\",\n    \"uHar;\": \"\\u2963\",\n    \"uharl;\": \"\\u21BF\",\n    \"uharr;\": \"\\u21BE\",\n    \"uhblk;\": \"\\u2580\",\n    \"ulcorn;\": \"\\u231C\",\n    \"ulcorner;\": \"\\u231C\",\n    \"ulcrop;\": \"\\u230F\",\n    \"ultri;\": \"\\u25F8\",\n    \"Umacr;\": \"\\u016A\",\n    \"umacr;\": \"\\u016B\",\n    \"uml;\": \"\\u00A8\",\n    \"uml\": \"\\u00A8\",\n    \"UnderBar;\": \"_\",\n    \"UnderBrace;\": \"\\u23DF\",\n    \"UnderBracket;\": \"\\u23B5\",\n    \"UnderParenthesis;\": \"\\u23DD\",\n    \"Union;\": \"\\u22C3\",\n    \"UnionPlus;\": \"\\u228E\",\n    \"Uogon;\": \"\\u0172\",\n    \"uogon;\": \"\\u0173\",\n    \"Uopf;\": \"\\uD835\\uDD4C\",\n    \"uopf;\": \"\\uD835\\uDD66\",\n    \"UpArrow;\": \"\\u2191\",\n    \"Uparrow;\": \"\\u21D1\",\n    \"uparrow;\": \"\\u2191\",\n    \"UpArrowBar;\": \"\\u2912\",\n    \"UpArrowDownArrow;\": \"\\u21C5\",\n    \"UpDownArrow;\": \"\\u2195\",\n    \"Updownarrow;\": \"\\u21D5\",\n    \"updownarrow;\": \"\\u2195\",\n    \"UpEquilibrium;\": \"\\u296E\",\n    \"upharpoonleft;\": \"\\u21BF\",\n    \"upharpoonright;\": \"\\u21BE\",\n    \"uplus;\": \"\\u228E\",\n    \"UpperLeftArrow;\": \"\\u2196\",\n    \"UpperRightArrow;\": \"\\u2197\",\n    \"Upsi;\": \"\\u03D2\",\n    \"upsi;\": \"\\u03C5\",\n    \"upsih;\": \"\\u03D2\",\n    \"Upsilon;\": \"\\u03A5\",\n    \"upsilon;\": \"\\u03C5\",\n    \"UpTee;\": \"\\u22A5\",\n    \"UpTeeArrow;\": \"\\u21A5\",\n    \"upuparrows;\": \"\\u21C8\",\n    \"urcorn;\": \"\\u231D\",\n    \"urcorner;\": \"\\u231D\",\n    \"urcrop;\": \"\\u230E\",\n    \"Uring;\": \"\\u016E\",\n    \"uring;\": \"\\u016F\",\n    \"urtri;\": \"\\u25F9\",\n    \"Uscr;\": \"\\uD835\\uDCB0\",\n    \"uscr;\": \"\\uD835\\uDCCA\",\n    \"utdot;\": \"\\u22F0\",\n    \"Utilde;\": \"\\u0168\",\n    \"utilde;\": \"\\u0169\",\n    \"utri;\": \"\\u25B5\",\n    \"utrif;\": \"\\u25B4\",\n    \"uuarr;\": \"\\u21C8\",\n    \"Uuml;\": \"\\u00DC\",\n    \"Uuml\": \"\\u00DC\",\n    \"uuml;\": \"\\u00FC\",\n    \"uuml\": \"\\u00FC\",\n    \"uwangle;\": \"\\u29A7\",\n    \"vangrt;\": \"\\u299C\",\n    \"varepsilon;\": \"\\u03F5\",\n    \"varkappa;\": \"\\u03F0\",\n    \"varnothing;\": \"\\u2205\",\n    \"varphi;\": \"\\u03D5\",\n    \"varpi;\": \"\\u03D6\",\n    \"varpropto;\": \"\\u221D\",\n    \"vArr;\": \"\\u21D5\",\n    \"varr;\": \"\\u2195\",\n    \"varrho;\": \"\\u03F1\",\n    \"varsigma;\": \"\\u03C2\",\n    \"varsubsetneq;\": \"\\u228A\\uFE00\",\n    \"varsubsetneqq;\": \"\\u2ACB\\uFE00\",\n    \"varsupsetneq;\": \"\\u228B\\uFE00\",\n    \"varsupsetneqq;\": \"\\u2ACC\\uFE00\",\n    \"vartheta;\": \"\\u03D1\",\n    \"vartriangleleft;\": \"\\u22B2\",\n    \"vartriangleright;\": \"\\u22B3\",\n    \"Vbar;\": \"\\u2AEB\",\n    \"vBar;\": \"\\u2AE8\",\n    \"vBarv;\": \"\\u2AE9\",\n    \"Vcy;\": \"\\u0412\",\n    \"vcy;\": \"\\u0432\",\n    \"VDash;\": \"\\u22AB\",\n    \"Vdash;\": \"\\u22A9\",\n    \"vDash;\": \"\\u22A8\",\n    \"vdash;\": \"\\u22A2\",\n    \"Vdashl;\": \"\\u2AE6\",\n    \"Vee;\": \"\\u22C1\",\n    \"vee;\": \"\\u2228\",\n    \"veebar;\": \"\\u22BB\",\n    \"veeeq;\": \"\\u225A\",\n    \"vellip;\": \"\\u22EE\",\n    \"Verbar;\": \"\\u2016\",\n    \"verbar;\": \"|\",\n    \"Vert;\": \"\\u2016\",\n    \"vert;\": \"|\",\n    \"VerticalBar;\": \"\\u2223\",\n    \"VerticalLine;\": \"|\",\n    \"VerticalSeparator;\": \"\\u2758\",\n    \"VerticalTilde;\": \"\\u2240\",\n    \"VeryThinSpace;\": \"\\u200A\",\n    \"Vfr;\": \"\\uD835\\uDD19\",\n    \"vfr;\": \"\\uD835\\uDD33\",\n    \"vltri;\": \"\\u22B2\",\n    \"vnsub;\": \"\\u2282\\u20D2\",\n    \"vnsup;\": \"\\u2283\\u20D2\",\n    \"Vopf;\": \"\\uD835\\uDD4D\",\n    \"vopf;\": \"\\uD835\\uDD67\",\n    \"vprop;\": \"\\u221D\",\n    \"vrtri;\": \"\\u22B3\",\n    \"Vscr;\": \"\\uD835\\uDCB1\",\n    \"vscr;\": \"\\uD835\\uDCCB\",\n    \"vsubnE;\": \"\\u2ACB\\uFE00\",\n    \"vsubne;\": \"\\u228A\\uFE00\",\n    \"vsupnE;\": \"\\u2ACC\\uFE00\",\n    \"vsupne;\": \"\\u228B\\uFE00\",\n    \"Vvdash;\": \"\\u22AA\",\n    \"vzigzag;\": \"\\u299A\",\n    \"Wcirc;\": \"\\u0174\",\n    \"wcirc;\": \"\\u0175\",\n    \"wedbar;\": \"\\u2A5F\",\n    \"Wedge;\": \"\\u22C0\",\n    \"wedge;\": \"\\u2227\",\n    \"wedgeq;\": \"\\u2259\",\n    \"weierp;\": \"\\u2118\",\n    \"Wfr;\": \"\\uD835\\uDD1A\",\n    \"wfr;\": \"\\uD835\\uDD34\",\n    \"Wopf;\": \"\\uD835\\uDD4E\",\n    \"wopf;\": \"\\uD835\\uDD68\",\n    \"wp;\": \"\\u2118\",\n    \"wr;\": \"\\u2240\",\n    \"wreath;\": \"\\u2240\",\n    \"Wscr;\": \"\\uD835\\uDCB2\",\n    \"wscr;\": \"\\uD835\\uDCCC\",\n    \"xcap;\": \"\\u22C2\",\n    \"xcirc;\": \"\\u25EF\",\n    \"xcup;\": \"\\u22C3\",\n    \"xdtri;\": \"\\u25BD\",\n    \"Xfr;\": \"\\uD835\\uDD1B\",\n    \"xfr;\": \"\\uD835\\uDD35\",\n    \"xhArr;\": \"\\u27FA\",\n    \"xharr;\": \"\\u27F7\",\n    \"Xi;\": \"\\u039E\",\n    \"xi;\": \"\\u03BE\",\n    \"xlArr;\": \"\\u27F8\",\n    \"xlarr;\": \"\\u27F5\",\n    \"xmap;\": \"\\u27FC\",\n    \"xnis;\": \"\\u22FB\",\n    \"xodot;\": \"\\u2A00\",\n    \"Xopf;\": \"\\uD835\\uDD4F\",\n    \"xopf;\": \"\\uD835\\uDD69\",\n    \"xoplus;\": \"\\u2A01\",\n    \"xotime;\": \"\\u2A02\",\n    \"xrArr;\": \"\\u27F9\",\n    \"xrarr;\": \"\\u27F6\",\n    \"Xscr;\": \"\\uD835\\uDCB3\",\n    \"xscr;\": \"\\uD835\\uDCCD\",\n    \"xsqcup;\": \"\\u2A06\",\n    \"xuplus;\": \"\\u2A04\",\n    \"xutri;\": \"\\u25B3\",\n    \"xvee;\": \"\\u22C1\",\n    \"xwedge;\": \"\\u22C0\",\n    \"Yacute;\": \"\\u00DD\",\n    \"Yacute\": \"\\u00DD\",\n    \"yacute;\": \"\\u00FD\",\n    \"yacute\": \"\\u00FD\",\n    \"YAcy;\": \"\\u042F\",\n    \"yacy;\": \"\\u044F\",\n    \"Ycirc;\": \"\\u0176\",\n    \"ycirc;\": \"\\u0177\",\n    \"Ycy;\": \"\\u042B\",\n    \"ycy;\": \"\\u044B\",\n    \"yen;\": \"\\u00A5\",\n    \"yen\": \"\\u00A5\",\n    \"Yfr;\": \"\\uD835\\uDD1C\",\n    \"yfr;\": \"\\uD835\\uDD36\",\n    \"YIcy;\": \"\\u0407\",\n    \"yicy;\": \"\\u0457\",\n    \"Yopf;\": \"\\uD835\\uDD50\",\n    \"yopf;\": \"\\uD835\\uDD6A\",\n    \"Yscr;\": \"\\uD835\\uDCB4\",\n    \"yscr;\": \"\\uD835\\uDCCE\",\n    \"YUcy;\": \"\\u042E\",\n    \"yucy;\": \"\\u044E\",\n    \"Yuml;\": \"\\u0178\",\n    \"yuml;\": \"\\u00FF\",\n    \"yuml\": \"\\u00FF\",\n    \"Zacute;\": \"\\u0179\",\n    \"zacute;\": \"\\u017A\",\n    \"Zcaron;\": \"\\u017D\",\n    \"zcaron;\": \"\\u017E\",\n    \"Zcy;\": \"\\u0417\",\n    \"zcy;\": \"\\u0437\",\n    \"Zdot;\": \"\\u017B\",\n    \"zdot;\": \"\\u017C\",\n    \"zeetrf;\": \"\\u2128\",\n    \"ZeroWidthSpace;\": \"\\u200B\",\n    \"Zeta;\": \"\\u0396\",\n    \"zeta;\": \"\\u03B6\",\n    \"Zfr;\": \"\\u2128\",\n    \"zfr;\": \"\\uD835\\uDD37\",\n    \"ZHcy;\": \"\\u0416\",\n    \"zhcy;\": \"\\u0436\",\n    \"zigrarr;\": \"\\u21DD\",\n    \"Zopf;\": \"\\u2124\",\n    \"zopf;\": \"\\uD835\\uDD6B\",\n    \"Zscr;\": \"\\uD835\\uDCB5\",\n    \"zscr;\": \"\\uD835\\uDCCF\",\n    \"zwj;\": \"\\u200D\",\n    \"zwnj;\": \"\\u200C\"\n}\n},{}],137:[function(require,module,exports){\nexports.encode = require('./encode');\nexports.decode = require('./decode');\n\n},{\"./decode\":134,\"./encode\":135}],138:[function(require,module,exports){\nmodule.exports={\n    \"9\": \"Tab;\",\n    \"10\": \"NewLine;\",\n    \"33\": \"excl;\",\n    \"34\": \"quot;\",\n    \"35\": \"num;\",\n    \"36\": \"dollar;\",\n    \"37\": \"percnt;\",\n    \"38\": \"amp;\",\n    \"39\": \"apos;\",\n    \"40\": \"lpar;\",\n    \"41\": \"rpar;\",\n    \"42\": \"midast;\",\n    \"43\": \"plus;\",\n    \"44\": \"comma;\",\n    \"46\": \"period;\",\n    \"47\": \"sol;\",\n    \"58\": \"colon;\",\n    \"59\": \"semi;\",\n    \"60\": \"lt;\",\n    \"61\": \"equals;\",\n    \"62\": \"gt;\",\n    \"63\": \"quest;\",\n    \"64\": \"commat;\",\n    \"91\": \"lsqb;\",\n    \"92\": \"bsol;\",\n    \"93\": \"rsqb;\",\n    \"94\": \"Hat;\",\n    \"95\": \"UnderBar;\",\n    \"96\": \"grave;\",\n    \"123\": \"lcub;\",\n    \"124\": \"VerticalLine;\",\n    \"125\": \"rcub;\",\n    \"160\": \"NonBreakingSpace;\",\n    \"161\": \"iexcl;\",\n    \"162\": \"cent;\",\n    \"163\": \"pound;\",\n    \"164\": \"curren;\",\n    \"165\": \"yen;\",\n    \"166\": \"brvbar;\",\n    \"167\": \"sect;\",\n    \"168\": \"uml;\",\n    \"169\": \"copy;\",\n    \"170\": \"ordf;\",\n    \"171\": \"laquo;\",\n    \"172\": \"not;\",\n    \"173\": \"shy;\",\n    \"174\": \"reg;\",\n    \"175\": \"strns;\",\n    \"176\": \"deg;\",\n    \"177\": \"pm;\",\n    \"178\": \"sup2;\",\n    \"179\": \"sup3;\",\n    \"180\": \"DiacriticalAcute;\",\n    \"181\": \"micro;\",\n    \"182\": \"para;\",\n    \"183\": \"middot;\",\n    \"184\": \"Cedilla;\",\n    \"185\": \"sup1;\",\n    \"186\": \"ordm;\",\n    \"187\": \"raquo;\",\n    \"188\": \"frac14;\",\n    \"189\": \"half;\",\n    \"190\": \"frac34;\",\n    \"191\": \"iquest;\",\n    \"192\": \"Agrave;\",\n    \"193\": \"Aacute;\",\n    \"194\": \"Acirc;\",\n    \"195\": \"Atilde;\",\n    \"196\": \"Auml;\",\n    \"197\": \"Aring;\",\n    \"198\": \"AElig;\",\n    \"199\": \"Ccedil;\",\n    \"200\": \"Egrave;\",\n    \"201\": \"Eacute;\",\n    \"202\": \"Ecirc;\",\n    \"203\": \"Euml;\",\n    \"204\": \"Igrave;\",\n    \"205\": \"Iacute;\",\n    \"206\": \"Icirc;\",\n    \"207\": \"Iuml;\",\n    \"208\": \"ETH;\",\n    \"209\": \"Ntilde;\",\n    \"210\": \"Ograve;\",\n    \"211\": \"Oacute;\",\n    \"212\": \"Ocirc;\",\n    \"213\": \"Otilde;\",\n    \"214\": \"Ouml;\",\n    \"215\": \"times;\",\n    \"216\": \"Oslash;\",\n    \"217\": \"Ugrave;\",\n    \"218\": \"Uacute;\",\n    \"219\": \"Ucirc;\",\n    \"220\": \"Uuml;\",\n    \"221\": \"Yacute;\",\n    \"222\": \"THORN;\",\n    \"223\": \"szlig;\",\n    \"224\": \"agrave;\",\n    \"225\": \"aacute;\",\n    \"226\": \"acirc;\",\n    \"227\": \"atilde;\",\n    \"228\": \"auml;\",\n    \"229\": \"aring;\",\n    \"230\": \"aelig;\",\n    \"231\": \"ccedil;\",\n    \"232\": \"egrave;\",\n    \"233\": \"eacute;\",\n    \"234\": \"ecirc;\",\n    \"235\": \"euml;\",\n    \"236\": \"igrave;\",\n    \"237\": \"iacute;\",\n    \"238\": \"icirc;\",\n    \"239\": \"iuml;\",\n    \"240\": \"eth;\",\n    \"241\": \"ntilde;\",\n    \"242\": \"ograve;\",\n    \"243\": \"oacute;\",\n    \"244\": \"ocirc;\",\n    \"245\": \"otilde;\",\n    \"246\": \"ouml;\",\n    \"247\": \"divide;\",\n    \"248\": \"oslash;\",\n    \"249\": \"ugrave;\",\n    \"250\": \"uacute;\",\n    \"251\": \"ucirc;\",\n    \"252\": \"uuml;\",\n    \"253\": \"yacute;\",\n    \"254\": \"thorn;\",\n    \"255\": \"yuml;\",\n    \"256\": \"Amacr;\",\n    \"257\": \"amacr;\",\n    \"258\": \"Abreve;\",\n    \"259\": \"abreve;\",\n    \"260\": \"Aogon;\",\n    \"261\": \"aogon;\",\n    \"262\": \"Cacute;\",\n    \"263\": \"cacute;\",\n    \"264\": \"Ccirc;\",\n    \"265\": \"ccirc;\",\n    \"266\": \"Cdot;\",\n    \"267\": \"cdot;\",\n    \"268\": \"Ccaron;\",\n    \"269\": \"ccaron;\",\n    \"270\": \"Dcaron;\",\n    \"271\": \"dcaron;\",\n    \"272\": \"Dstrok;\",\n    \"273\": \"dstrok;\",\n    \"274\": \"Emacr;\",\n    \"275\": \"emacr;\",\n    \"278\": \"Edot;\",\n    \"279\": \"edot;\",\n    \"280\": \"Eogon;\",\n    \"281\": \"eogon;\",\n    \"282\": \"Ecaron;\",\n    \"283\": \"ecaron;\",\n    \"284\": \"Gcirc;\",\n    \"285\": \"gcirc;\",\n    \"286\": \"Gbreve;\",\n    \"287\": \"gbreve;\",\n    \"288\": \"Gdot;\",\n    \"289\": \"gdot;\",\n    \"290\": \"Gcedil;\",\n    \"292\": \"Hcirc;\",\n    \"293\": \"hcirc;\",\n    \"294\": \"Hstrok;\",\n    \"295\": \"hstrok;\",\n    \"296\": \"Itilde;\",\n    \"297\": \"itilde;\",\n    \"298\": \"Imacr;\",\n    \"299\": \"imacr;\",\n    \"302\": \"Iogon;\",\n    \"303\": \"iogon;\",\n    \"304\": \"Idot;\",\n    \"305\": \"inodot;\",\n    \"306\": \"IJlig;\",\n    \"307\": \"ijlig;\",\n    \"308\": \"Jcirc;\",\n    \"309\": \"jcirc;\",\n    \"310\": \"Kcedil;\",\n    \"311\": \"kcedil;\",\n    \"312\": \"kgreen;\",\n    \"313\": \"Lacute;\",\n    \"314\": \"lacute;\",\n    \"315\": \"Lcedil;\",\n    \"316\": \"lcedil;\",\n    \"317\": \"Lcaron;\",\n    \"318\": \"lcaron;\",\n    \"319\": \"Lmidot;\",\n    \"320\": \"lmidot;\",\n    \"321\": \"Lstrok;\",\n    \"322\": \"lstrok;\",\n    \"323\": \"Nacute;\",\n    \"324\": \"nacute;\",\n    \"325\": \"Ncedil;\",\n    \"326\": \"ncedil;\",\n    \"327\": \"Ncaron;\",\n    \"328\": \"ncaron;\",\n    \"329\": \"napos;\",\n    \"330\": \"ENG;\",\n    \"331\": \"eng;\",\n    \"332\": \"Omacr;\",\n    \"333\": \"omacr;\",\n    \"336\": \"Odblac;\",\n    \"337\": \"odblac;\",\n    \"338\": \"OElig;\",\n    \"339\": \"oelig;\",\n    \"340\": \"Racute;\",\n    \"341\": \"racute;\",\n    \"342\": \"Rcedil;\",\n    \"343\": \"rcedil;\",\n    \"344\": \"Rcaron;\",\n    \"345\": \"rcaron;\",\n    \"346\": \"Sacute;\",\n    \"347\": \"sacute;\",\n    \"348\": \"Scirc;\",\n    \"349\": \"scirc;\",\n    \"350\": \"Scedil;\",\n    \"351\": \"scedil;\",\n    \"352\": \"Scaron;\",\n    \"353\": \"scaron;\",\n    \"354\": \"Tcedil;\",\n    \"355\": \"tcedil;\",\n    \"356\": \"Tcaron;\",\n    \"357\": \"tcaron;\",\n    \"358\": \"Tstrok;\",\n    \"359\": \"tstrok;\",\n    \"360\": \"Utilde;\",\n    \"361\": \"utilde;\",\n    \"362\": \"Umacr;\",\n    \"363\": \"umacr;\",\n    \"364\": \"Ubreve;\",\n    \"365\": \"ubreve;\",\n    \"366\": \"Uring;\",\n    \"367\": \"uring;\",\n    \"368\": \"Udblac;\",\n    \"369\": \"udblac;\",\n    \"370\": \"Uogon;\",\n    \"371\": \"uogon;\",\n    \"372\": \"Wcirc;\",\n    \"373\": \"wcirc;\",\n    \"374\": \"Ycirc;\",\n    \"375\": \"ycirc;\",\n    \"376\": \"Yuml;\",\n    \"377\": \"Zacute;\",\n    \"378\": \"zacute;\",\n    \"379\": \"Zdot;\",\n    \"380\": \"zdot;\",\n    \"381\": \"Zcaron;\",\n    \"382\": \"zcaron;\",\n    \"402\": \"fnof;\",\n    \"437\": \"imped;\",\n    \"501\": \"gacute;\",\n    \"567\": \"jmath;\",\n    \"710\": \"circ;\",\n    \"711\": \"Hacek;\",\n    \"728\": \"breve;\",\n    \"729\": \"dot;\",\n    \"730\": \"ring;\",\n    \"731\": \"ogon;\",\n    \"732\": \"tilde;\",\n    \"733\": \"DiacriticalDoubleAcute;\",\n    \"785\": \"DownBreve;\",\n    \"913\": \"Alpha;\",\n    \"914\": \"Beta;\",\n    \"915\": \"Gamma;\",\n    \"916\": \"Delta;\",\n    \"917\": \"Epsilon;\",\n    \"918\": \"Zeta;\",\n    \"919\": \"Eta;\",\n    \"920\": \"Theta;\",\n    \"921\": \"Iota;\",\n    \"922\": \"Kappa;\",\n    \"923\": \"Lambda;\",\n    \"924\": \"Mu;\",\n    \"925\": \"Nu;\",\n    \"926\": \"Xi;\",\n    \"927\": \"Omicron;\",\n    \"928\": \"Pi;\",\n    \"929\": \"Rho;\",\n    \"931\": \"Sigma;\",\n    \"932\": \"Tau;\",\n    \"933\": \"Upsilon;\",\n    \"934\": \"Phi;\",\n    \"935\": \"Chi;\",\n    \"936\": \"Psi;\",\n    \"937\": \"Omega;\",\n    \"945\": \"alpha;\",\n    \"946\": \"beta;\",\n    \"947\": \"gamma;\",\n    \"948\": \"delta;\",\n    \"949\": \"epsilon;\",\n    \"950\": \"zeta;\",\n    \"951\": \"eta;\",\n    \"952\": \"theta;\",\n    \"953\": \"iota;\",\n    \"954\": \"kappa;\",\n    \"955\": \"lambda;\",\n    \"956\": \"mu;\",\n    \"957\": \"nu;\",\n    \"958\": \"xi;\",\n    \"959\": \"omicron;\",\n    \"960\": \"pi;\",\n    \"961\": \"rho;\",\n    \"962\": \"varsigma;\",\n    \"963\": \"sigma;\",\n    \"964\": \"tau;\",\n    \"965\": \"upsilon;\",\n    \"966\": \"phi;\",\n    \"967\": \"chi;\",\n    \"968\": \"psi;\",\n    \"969\": \"omega;\",\n    \"977\": \"vartheta;\",\n    \"978\": \"upsih;\",\n    \"981\": \"varphi;\",\n    \"982\": \"varpi;\",\n    \"988\": \"Gammad;\",\n    \"989\": \"gammad;\",\n    \"1008\": \"varkappa;\",\n    \"1009\": \"varrho;\",\n    \"1013\": \"varepsilon;\",\n    \"1014\": \"bepsi;\",\n    \"1025\": \"IOcy;\",\n    \"1026\": \"DJcy;\",\n    \"1027\": \"GJcy;\",\n    \"1028\": \"Jukcy;\",\n    \"1029\": \"DScy;\",\n    \"1030\": \"Iukcy;\",\n    \"1031\": \"YIcy;\",\n    \"1032\": \"Jsercy;\",\n    \"1033\": \"LJcy;\",\n    \"1034\": \"NJcy;\",\n    \"1035\": \"TSHcy;\",\n    \"1036\": \"KJcy;\",\n    \"1038\": \"Ubrcy;\",\n    \"1039\": \"DZcy;\",\n    \"1040\": \"Acy;\",\n    \"1041\": \"Bcy;\",\n    \"1042\": \"Vcy;\",\n    \"1043\": \"Gcy;\",\n    \"1044\": \"Dcy;\",\n    \"1045\": \"IEcy;\",\n    \"1046\": \"ZHcy;\",\n    \"1047\": \"Zcy;\",\n    \"1048\": \"Icy;\",\n    \"1049\": \"Jcy;\",\n    \"1050\": \"Kcy;\",\n    \"1051\": \"Lcy;\",\n    \"1052\": \"Mcy;\",\n    \"1053\": \"Ncy;\",\n    \"1054\": \"Ocy;\",\n    \"1055\": \"Pcy;\",\n    \"1056\": \"Rcy;\",\n    \"1057\": \"Scy;\",\n    \"1058\": \"Tcy;\",\n    \"1059\": \"Ucy;\",\n    \"1060\": \"Fcy;\",\n    \"1061\": \"KHcy;\",\n    \"1062\": \"TScy;\",\n    \"1063\": \"CHcy;\",\n    \"1064\": \"SHcy;\",\n    \"1065\": \"SHCHcy;\",\n    \"1066\": \"HARDcy;\",\n    \"1067\": \"Ycy;\",\n    \"1068\": \"SOFTcy;\",\n    \"1069\": \"Ecy;\",\n    \"1070\": \"YUcy;\",\n    \"1071\": \"YAcy;\",\n    \"1072\": \"acy;\",\n    \"1073\": \"bcy;\",\n    \"1074\": \"vcy;\",\n    \"1075\": \"gcy;\",\n    \"1076\": \"dcy;\",\n    \"1077\": \"iecy;\",\n    \"1078\": \"zhcy;\",\n    \"1079\": \"zcy;\",\n    \"1080\": \"icy;\",\n    \"1081\": \"jcy;\",\n    \"1082\": \"kcy;\",\n    \"1083\": \"lcy;\",\n    \"1084\": \"mcy;\",\n    \"1085\": \"ncy;\",\n    \"1086\": \"ocy;\",\n    \"1087\": \"pcy;\",\n    \"1088\": \"rcy;\",\n    \"1089\": \"scy;\",\n    \"1090\": \"tcy;\",\n    \"1091\": \"ucy;\",\n    \"1092\": \"fcy;\",\n    \"1093\": \"khcy;\",\n    \"1094\": \"tscy;\",\n    \"1095\": \"chcy;\",\n    \"1096\": \"shcy;\",\n    \"1097\": \"shchcy;\",\n    \"1098\": \"hardcy;\",\n    \"1099\": \"ycy;\",\n    \"1100\": \"softcy;\",\n    \"1101\": \"ecy;\",\n    \"1102\": \"yucy;\",\n    \"1103\": \"yacy;\",\n    \"1105\": \"iocy;\",\n    \"1106\": \"djcy;\",\n    \"1107\": \"gjcy;\",\n    \"1108\": \"jukcy;\",\n    \"1109\": \"dscy;\",\n    \"1110\": \"iukcy;\",\n    \"1111\": \"yicy;\",\n    \"1112\": \"jsercy;\",\n    \"1113\": \"ljcy;\",\n    \"1114\": \"njcy;\",\n    \"1115\": \"tshcy;\",\n    \"1116\": \"kjcy;\",\n    \"1118\": \"ubrcy;\",\n    \"1119\": \"dzcy;\",\n    \"8194\": \"ensp;\",\n    \"8195\": \"emsp;\",\n    \"8196\": \"emsp13;\",\n    \"8197\": \"emsp14;\",\n    \"8199\": \"numsp;\",\n    \"8200\": \"puncsp;\",\n    \"8201\": \"ThinSpace;\",\n    \"8202\": \"VeryThinSpace;\",\n    \"8203\": \"ZeroWidthSpace;\",\n    \"8204\": \"zwnj;\",\n    \"8205\": \"zwj;\",\n    \"8206\": \"lrm;\",\n    \"8207\": \"rlm;\",\n    \"8208\": \"hyphen;\",\n    \"8211\": \"ndash;\",\n    \"8212\": \"mdash;\",\n    \"8213\": \"horbar;\",\n    \"8214\": \"Vert;\",\n    \"8216\": \"OpenCurlyQuote;\",\n    \"8217\": \"rsquor;\",\n    \"8218\": \"sbquo;\",\n    \"8220\": \"OpenCurlyDoubleQuote;\",\n    \"8221\": \"rdquor;\",\n    \"8222\": \"ldquor;\",\n    \"8224\": \"dagger;\",\n    \"8225\": \"ddagger;\",\n    \"8226\": \"bullet;\",\n    \"8229\": \"nldr;\",\n    \"8230\": \"mldr;\",\n    \"8240\": \"permil;\",\n    \"8241\": \"pertenk;\",\n    \"8242\": \"prime;\",\n    \"8243\": \"Prime;\",\n    \"8244\": \"tprime;\",\n    \"8245\": \"bprime;\",\n    \"8249\": \"lsaquo;\",\n    \"8250\": \"rsaquo;\",\n    \"8254\": \"OverBar;\",\n    \"8257\": \"caret;\",\n    \"8259\": \"hybull;\",\n    \"8260\": \"frasl;\",\n    \"8271\": \"bsemi;\",\n    \"8279\": \"qprime;\",\n    \"8287\": \"MediumSpace;\",\n    \"8288\": \"NoBreak;\",\n    \"8289\": \"ApplyFunction;\",\n    \"8290\": \"it;\",\n    \"8291\": \"InvisibleComma;\",\n    \"8364\": \"euro;\",\n    \"8411\": \"TripleDot;\",\n    \"8412\": \"DotDot;\",\n    \"8450\": \"Copf;\",\n    \"8453\": \"incare;\",\n    \"8458\": \"gscr;\",\n    \"8459\": \"Hscr;\",\n    \"8460\": \"Poincareplane;\",\n    \"8461\": \"quaternions;\",\n    \"8462\": \"planckh;\",\n    \"8463\": \"plankv;\",\n    \"8464\": \"Iscr;\",\n    \"8465\": \"imagpart;\",\n    \"8466\": \"Lscr;\",\n    \"8467\": \"ell;\",\n    \"8469\": \"Nopf;\",\n    \"8470\": \"numero;\",\n    \"8471\": \"copysr;\",\n    \"8472\": \"wp;\",\n    \"8473\": \"primes;\",\n    \"8474\": \"rationals;\",\n    \"8475\": \"Rscr;\",\n    \"8476\": \"Rfr;\",\n    \"8477\": \"Ropf;\",\n    \"8478\": \"rx;\",\n    \"8482\": \"trade;\",\n    \"8484\": \"Zopf;\",\n    \"8487\": \"mho;\",\n    \"8488\": \"Zfr;\",\n    \"8489\": \"iiota;\",\n    \"8492\": \"Bscr;\",\n    \"8493\": \"Cfr;\",\n    \"8495\": \"escr;\",\n    \"8496\": \"expectation;\",\n    \"8497\": \"Fscr;\",\n    \"8499\": \"phmmat;\",\n    \"8500\": \"oscr;\",\n    \"8501\": \"aleph;\",\n    \"8502\": \"beth;\",\n    \"8503\": \"gimel;\",\n    \"8504\": \"daleth;\",\n    \"8517\": \"DD;\",\n    \"8518\": \"DifferentialD;\",\n    \"8519\": \"exponentiale;\",\n    \"8520\": \"ImaginaryI;\",\n    \"8531\": \"frac13;\",\n    \"8532\": \"frac23;\",\n    \"8533\": \"frac15;\",\n    \"8534\": \"frac25;\",\n    \"8535\": \"frac35;\",\n    \"8536\": \"frac45;\",\n    \"8537\": \"frac16;\",\n    \"8538\": \"frac56;\",\n    \"8539\": \"frac18;\",\n    \"8540\": \"frac38;\",\n    \"8541\": \"frac58;\",\n    \"8542\": \"frac78;\",\n    \"8592\": \"slarr;\",\n    \"8593\": \"uparrow;\",\n    \"8594\": \"srarr;\",\n    \"8595\": \"ShortDownArrow;\",\n    \"8596\": \"leftrightarrow;\",\n    \"8597\": \"varr;\",\n    \"8598\": \"UpperLeftArrow;\",\n    \"8599\": \"UpperRightArrow;\",\n    \"8600\": \"searrow;\",\n    \"8601\": \"swarrow;\",\n    \"8602\": \"nleftarrow;\",\n    \"8603\": \"nrightarrow;\",\n    \"8605\": \"rightsquigarrow;\",\n    \"8606\": \"twoheadleftarrow;\",\n    \"8607\": \"Uarr;\",\n    \"8608\": \"twoheadrightarrow;\",\n    \"8609\": \"Darr;\",\n    \"8610\": \"leftarrowtail;\",\n    \"8611\": \"rightarrowtail;\",\n    \"8612\": \"mapstoleft;\",\n    \"8613\": \"UpTeeArrow;\",\n    \"8614\": \"RightTeeArrow;\",\n    \"8615\": \"mapstodown;\",\n    \"8617\": \"larrhk;\",\n    \"8618\": \"rarrhk;\",\n    \"8619\": \"looparrowleft;\",\n    \"8620\": \"rarrlp;\",\n    \"8621\": \"leftrightsquigarrow;\",\n    \"8622\": \"nleftrightarrow;\",\n    \"8624\": \"lsh;\",\n    \"8625\": \"rsh;\",\n    \"8626\": \"ldsh;\",\n    \"8627\": \"rdsh;\",\n    \"8629\": \"crarr;\",\n    \"8630\": \"curvearrowleft;\",\n    \"8631\": \"curvearrowright;\",\n    \"8634\": \"olarr;\",\n    \"8635\": \"orarr;\",\n    \"8636\": \"lharu;\",\n    \"8637\": \"lhard;\",\n    \"8638\": \"upharpoonright;\",\n    \"8639\": \"upharpoonleft;\",\n    \"8640\": \"RightVector;\",\n    \"8641\": \"rightharpoondown;\",\n    \"8642\": \"RightDownVector;\",\n    \"8643\": \"LeftDownVector;\",\n    \"8644\": \"rlarr;\",\n    \"8645\": \"UpArrowDownArrow;\",\n    \"8646\": \"lrarr;\",\n    \"8647\": \"llarr;\",\n    \"8648\": \"uuarr;\",\n    \"8649\": \"rrarr;\",\n    \"8650\": \"downdownarrows;\",\n    \"8651\": \"ReverseEquilibrium;\",\n    \"8652\": \"rlhar;\",\n    \"8653\": \"nLeftarrow;\",\n    \"8654\": \"nLeftrightarrow;\",\n    \"8655\": \"nRightarrow;\",\n    \"8656\": \"Leftarrow;\",\n    \"8657\": \"Uparrow;\",\n    \"8658\": \"Rightarrow;\",\n    \"8659\": \"Downarrow;\",\n    \"8660\": \"Leftrightarrow;\",\n    \"8661\": \"vArr;\",\n    \"8662\": \"nwArr;\",\n    \"8663\": \"neArr;\",\n    \"8664\": \"seArr;\",\n    \"8665\": \"swArr;\",\n    \"8666\": \"Lleftarrow;\",\n    \"8667\": \"Rrightarrow;\",\n    \"8669\": \"zigrarr;\",\n    \"8676\": \"LeftArrowBar;\",\n    \"8677\": \"RightArrowBar;\",\n    \"8693\": \"duarr;\",\n    \"8701\": \"loarr;\",\n    \"8702\": \"roarr;\",\n    \"8703\": \"hoarr;\",\n    \"8704\": \"forall;\",\n    \"8705\": \"complement;\",\n    \"8706\": \"PartialD;\",\n    \"8707\": \"Exists;\",\n    \"8708\": \"NotExists;\",\n    \"8709\": \"varnothing;\",\n    \"8711\": \"nabla;\",\n    \"8712\": \"isinv;\",\n    \"8713\": \"notinva;\",\n    \"8715\": \"SuchThat;\",\n    \"8716\": \"NotReverseElement;\",\n    \"8719\": \"Product;\",\n    \"8720\": \"Coproduct;\",\n    \"8721\": \"sum;\",\n    \"8722\": \"minus;\",\n    \"8723\": \"mp;\",\n    \"8724\": \"plusdo;\",\n    \"8726\": \"ssetmn;\",\n    \"8727\": \"lowast;\",\n    \"8728\": \"SmallCircle;\",\n    \"8730\": \"Sqrt;\",\n    \"8733\": \"vprop;\",\n    \"8734\": \"infin;\",\n    \"8735\": \"angrt;\",\n    \"8736\": \"angle;\",\n    \"8737\": \"measuredangle;\",\n    \"8738\": \"angsph;\",\n    \"8739\": \"VerticalBar;\",\n    \"8740\": \"nsmid;\",\n    \"8741\": \"spar;\",\n    \"8742\": \"nspar;\",\n    \"8743\": \"wedge;\",\n    \"8744\": \"vee;\",\n    \"8745\": \"cap;\",\n    \"8746\": \"cup;\",\n    \"8747\": \"Integral;\",\n    \"8748\": \"Int;\",\n    \"8749\": \"tint;\",\n    \"8750\": \"oint;\",\n    \"8751\": \"DoubleContourIntegral;\",\n    \"8752\": \"Cconint;\",\n    \"8753\": \"cwint;\",\n    \"8754\": \"cwconint;\",\n    \"8755\": \"CounterClockwiseContourIntegral;\",\n    \"8756\": \"therefore;\",\n    \"8757\": \"because;\",\n    \"8758\": \"ratio;\",\n    \"8759\": \"Proportion;\",\n    \"8760\": \"minusd;\",\n    \"8762\": \"mDDot;\",\n    \"8763\": \"homtht;\",\n    \"8764\": \"Tilde;\",\n    \"8765\": \"bsim;\",\n    \"8766\": \"mstpos;\",\n    \"8767\": \"acd;\",\n    \"8768\": \"wreath;\",\n    \"8769\": \"nsim;\",\n    \"8770\": \"esim;\",\n    \"8771\": \"TildeEqual;\",\n    \"8772\": \"nsimeq;\",\n    \"8773\": \"TildeFullEqual;\",\n    \"8774\": \"simne;\",\n    \"8775\": \"NotTildeFullEqual;\",\n    \"8776\": \"TildeTilde;\",\n    \"8777\": \"NotTildeTilde;\",\n    \"8778\": \"approxeq;\",\n    \"8779\": \"apid;\",\n    \"8780\": \"bcong;\",\n    \"8781\": \"CupCap;\",\n    \"8782\": \"HumpDownHump;\",\n    \"8783\": \"HumpEqual;\",\n    \"8784\": \"esdot;\",\n    \"8785\": \"eDot;\",\n    \"8786\": \"fallingdotseq;\",\n    \"8787\": \"risingdotseq;\",\n    \"8788\": \"coloneq;\",\n    \"8789\": \"eqcolon;\",\n    \"8790\": \"eqcirc;\",\n    \"8791\": \"cire;\",\n    \"8793\": \"wedgeq;\",\n    \"8794\": \"veeeq;\",\n    \"8796\": \"trie;\",\n    \"8799\": \"questeq;\",\n    \"8800\": \"NotEqual;\",\n    \"8801\": \"equiv;\",\n    \"8802\": \"NotCongruent;\",\n    \"8804\": \"leq;\",\n    \"8805\": \"GreaterEqual;\",\n    \"8806\": \"LessFullEqual;\",\n    \"8807\": \"GreaterFullEqual;\",\n    \"8808\": \"lneqq;\",\n    \"8809\": \"gneqq;\",\n    \"8810\": \"NestedLessLess;\",\n    \"8811\": \"NestedGreaterGreater;\",\n    \"8812\": \"twixt;\",\n    \"8813\": \"NotCupCap;\",\n    \"8814\": \"NotLess;\",\n    \"8815\": \"NotGreater;\",\n    \"8816\": \"NotLessEqual;\",\n    \"8817\": \"NotGreaterEqual;\",\n    \"8818\": \"lsim;\",\n    \"8819\": \"gtrsim;\",\n    \"8820\": \"NotLessTilde;\",\n    \"8821\": \"NotGreaterTilde;\",\n    \"8822\": \"lg;\",\n    \"8823\": \"gtrless;\",\n    \"8824\": \"ntlg;\",\n    \"8825\": \"ntgl;\",\n    \"8826\": \"Precedes;\",\n    \"8827\": \"Succeeds;\",\n    \"8828\": \"PrecedesSlantEqual;\",\n    \"8829\": \"SucceedsSlantEqual;\",\n    \"8830\": \"prsim;\",\n    \"8831\": \"succsim;\",\n    \"8832\": \"nprec;\",\n    \"8833\": \"nsucc;\",\n    \"8834\": \"subset;\",\n    \"8835\": \"supset;\",\n    \"8836\": \"nsub;\",\n    \"8837\": \"nsup;\",\n    \"8838\": \"SubsetEqual;\",\n    \"8839\": \"supseteq;\",\n    \"8840\": \"nsubseteq;\",\n    \"8841\": \"nsupseteq;\",\n    \"8842\": \"subsetneq;\",\n    \"8843\": \"supsetneq;\",\n    \"8845\": \"cupdot;\",\n    \"8846\": \"uplus;\",\n    \"8847\": \"SquareSubset;\",\n    \"8848\": \"SquareSuperset;\",\n    \"8849\": \"SquareSubsetEqual;\",\n    \"8850\": \"SquareSupersetEqual;\",\n    \"8851\": \"SquareIntersection;\",\n    \"8852\": \"SquareUnion;\",\n    \"8853\": \"oplus;\",\n    \"8854\": \"ominus;\",\n    \"8855\": \"otimes;\",\n    \"8856\": \"osol;\",\n    \"8857\": \"odot;\",\n    \"8858\": \"ocir;\",\n    \"8859\": \"oast;\",\n    \"8861\": \"odash;\",\n    \"8862\": \"plusb;\",\n    \"8863\": \"minusb;\",\n    \"8864\": \"timesb;\",\n    \"8865\": \"sdotb;\",\n    \"8866\": \"vdash;\",\n    \"8867\": \"LeftTee;\",\n    \"8868\": \"top;\",\n    \"8869\": \"UpTee;\",\n    \"8871\": \"models;\",\n    \"8872\": \"vDash;\",\n    \"8873\": \"Vdash;\",\n    \"8874\": \"Vvdash;\",\n    \"8875\": \"VDash;\",\n    \"8876\": \"nvdash;\",\n    \"8877\": \"nvDash;\",\n    \"8878\": \"nVdash;\",\n    \"8879\": \"nVDash;\",\n    \"8880\": \"prurel;\",\n    \"8882\": \"vltri;\",\n    \"8883\": \"vrtri;\",\n    \"8884\": \"trianglelefteq;\",\n    \"8885\": \"trianglerighteq;\",\n    \"8886\": \"origof;\",\n    \"8887\": \"imof;\",\n    \"8888\": \"mumap;\",\n    \"8889\": \"hercon;\",\n    \"8890\": \"intercal;\",\n    \"8891\": \"veebar;\",\n    \"8893\": \"barvee;\",\n    \"8894\": \"angrtvb;\",\n    \"8895\": \"lrtri;\",\n    \"8896\": \"xwedge;\",\n    \"8897\": \"xvee;\",\n    \"8898\": \"xcap;\",\n    \"8899\": \"xcup;\",\n    \"8900\": \"diamond;\",\n    \"8901\": \"sdot;\",\n    \"8902\": \"Star;\",\n    \"8903\": \"divonx;\",\n    \"8904\": \"bowtie;\",\n    \"8905\": \"ltimes;\",\n    \"8906\": \"rtimes;\",\n    \"8907\": \"lthree;\",\n    \"8908\": \"rthree;\",\n    \"8909\": \"bsime;\",\n    \"8910\": \"cuvee;\",\n    \"8911\": \"cuwed;\",\n    \"8912\": \"Subset;\",\n    \"8913\": \"Supset;\",\n    \"8914\": \"Cap;\",\n    \"8915\": \"Cup;\",\n    \"8916\": \"pitchfork;\",\n    \"8917\": \"epar;\",\n    \"8918\": \"ltdot;\",\n    \"8919\": \"gtrdot;\",\n    \"8920\": \"Ll;\",\n    \"8921\": \"ggg;\",\n    \"8922\": \"LessEqualGreater;\",\n    \"8923\": \"gtreqless;\",\n    \"8926\": \"curlyeqprec;\",\n    \"8927\": \"curlyeqsucc;\",\n    \"8928\": \"nprcue;\",\n    \"8929\": \"nsccue;\",\n    \"8930\": \"nsqsube;\",\n    \"8931\": \"nsqsupe;\",\n    \"8934\": \"lnsim;\",\n    \"8935\": \"gnsim;\",\n    \"8936\": \"prnsim;\",\n    \"8937\": \"succnsim;\",\n    \"8938\": \"ntriangleleft;\",\n    \"8939\": \"ntriangleright;\",\n    \"8940\": \"ntrianglelefteq;\",\n    \"8941\": \"ntrianglerighteq;\",\n    \"8942\": \"vellip;\",\n    \"8943\": \"ctdot;\",\n    \"8944\": \"utdot;\",\n    \"8945\": \"dtdot;\",\n    \"8946\": \"disin;\",\n    \"8947\": \"isinsv;\",\n    \"8948\": \"isins;\",\n    \"8949\": \"isindot;\",\n    \"8950\": \"notinvc;\",\n    \"8951\": \"notinvb;\",\n    \"8953\": \"isinE;\",\n    \"8954\": \"nisd;\",\n    \"8955\": \"xnis;\",\n    \"8956\": \"nis;\",\n    \"8957\": \"notnivc;\",\n    \"8958\": \"notnivb;\",\n    \"8965\": \"barwedge;\",\n    \"8966\": \"doublebarwedge;\",\n    \"8968\": \"LeftCeiling;\",\n    \"8969\": \"RightCeiling;\",\n    \"8970\": \"lfloor;\",\n    \"8971\": \"RightFloor;\",\n    \"8972\": \"drcrop;\",\n    \"8973\": \"dlcrop;\",\n    \"8974\": \"urcrop;\",\n    \"8975\": \"ulcrop;\",\n    \"8976\": \"bnot;\",\n    \"8978\": \"profline;\",\n    \"8979\": \"profsurf;\",\n    \"8981\": \"telrec;\",\n    \"8982\": \"target;\",\n    \"8988\": \"ulcorner;\",\n    \"8989\": \"urcorner;\",\n    \"8990\": \"llcorner;\",\n    \"8991\": \"lrcorner;\",\n    \"8994\": \"sfrown;\",\n    \"8995\": \"ssmile;\",\n    \"9005\": \"cylcty;\",\n    \"9006\": \"profalar;\",\n    \"9014\": \"topbot;\",\n    \"9021\": \"ovbar;\",\n    \"9023\": \"solbar;\",\n    \"9084\": \"angzarr;\",\n    \"9136\": \"lmoustache;\",\n    \"9137\": \"rmoustache;\",\n    \"9140\": \"tbrk;\",\n    \"9141\": \"UnderBracket;\",\n    \"9142\": \"bbrktbrk;\",\n    \"9180\": \"OverParenthesis;\",\n    \"9181\": \"UnderParenthesis;\",\n    \"9182\": \"OverBrace;\",\n    \"9183\": \"UnderBrace;\",\n    \"9186\": \"trpezium;\",\n    \"9191\": \"elinters;\",\n    \"9251\": \"blank;\",\n    \"9416\": \"oS;\",\n    \"9472\": \"HorizontalLine;\",\n    \"9474\": \"boxv;\",\n    \"9484\": \"boxdr;\",\n    \"9488\": \"boxdl;\",\n    \"9492\": \"boxur;\",\n    \"9496\": \"boxul;\",\n    \"9500\": \"boxvr;\",\n    \"9508\": \"boxvl;\",\n    \"9516\": \"boxhd;\",\n    \"9524\": \"boxhu;\",\n    \"9532\": \"boxvh;\",\n    \"9552\": \"boxH;\",\n    \"9553\": \"boxV;\",\n    \"9554\": \"boxdR;\",\n    \"9555\": \"boxDr;\",\n    \"9556\": \"boxDR;\",\n    \"9557\": \"boxdL;\",\n    \"9558\": \"boxDl;\",\n    \"9559\": \"boxDL;\",\n    \"9560\": \"boxuR;\",\n    \"9561\": \"boxUr;\",\n    \"9562\": \"boxUR;\",\n    \"9563\": \"boxuL;\",\n    \"9564\": \"boxUl;\",\n    \"9565\": \"boxUL;\",\n    \"9566\": \"boxvR;\",\n    \"9567\": \"boxVr;\",\n    \"9568\": \"boxVR;\",\n    \"9569\": \"boxvL;\",\n    \"9570\": \"boxVl;\",\n    \"9571\": \"boxVL;\",\n    \"9572\": \"boxHd;\",\n    \"9573\": \"boxhD;\",\n    \"9574\": \"boxHD;\",\n    \"9575\": \"boxHu;\",\n    \"9576\": \"boxhU;\",\n    \"9577\": \"boxHU;\",\n    \"9578\": \"boxvH;\",\n    \"9579\": \"boxVh;\",\n    \"9580\": \"boxVH;\",\n    \"9600\": \"uhblk;\",\n    \"9604\": \"lhblk;\",\n    \"9608\": \"block;\",\n    \"9617\": \"blk14;\",\n    \"9618\": \"blk12;\",\n    \"9619\": \"blk34;\",\n    \"9633\": \"square;\",\n    \"9642\": \"squf;\",\n    \"9643\": \"EmptyVerySmallSquare;\",\n    \"9645\": \"rect;\",\n    \"9646\": \"marker;\",\n    \"9649\": \"fltns;\",\n    \"9651\": \"xutri;\",\n    \"9652\": \"utrif;\",\n    \"9653\": \"utri;\",\n    \"9656\": \"rtrif;\",\n    \"9657\": \"triangleright;\",\n    \"9661\": \"xdtri;\",\n    \"9662\": \"dtrif;\",\n    \"9663\": \"triangledown;\",\n    \"9666\": \"ltrif;\",\n    \"9667\": \"triangleleft;\",\n    \"9674\": \"lozenge;\",\n    \"9675\": \"cir;\",\n    \"9708\": \"tridot;\",\n    \"9711\": \"xcirc;\",\n    \"9720\": \"ultri;\",\n    \"9721\": \"urtri;\",\n    \"9722\": \"lltri;\",\n    \"9723\": \"EmptySmallSquare;\",\n    \"9724\": \"FilledSmallSquare;\",\n    \"9733\": \"starf;\",\n    \"9734\": \"star;\",\n    \"9742\": \"phone;\",\n    \"9792\": \"female;\",\n    \"9794\": \"male;\",\n    \"9824\": \"spadesuit;\",\n    \"9827\": \"clubsuit;\",\n    \"9829\": \"heartsuit;\",\n    \"9830\": \"diams;\",\n    \"9834\": \"sung;\",\n    \"9837\": \"flat;\",\n    \"9838\": \"natural;\",\n    \"9839\": \"sharp;\",\n    \"10003\": \"checkmark;\",\n    \"10007\": \"cross;\",\n    \"10016\": \"maltese;\",\n    \"10038\": \"sext;\",\n    \"10072\": \"VerticalSeparator;\",\n    \"10098\": \"lbbrk;\",\n    \"10099\": \"rbbrk;\",\n    \"10184\": \"bsolhsub;\",\n    \"10185\": \"suphsol;\",\n    \"10214\": \"lobrk;\",\n    \"10215\": \"robrk;\",\n    \"10216\": \"LeftAngleBracket;\",\n    \"10217\": \"RightAngleBracket;\",\n    \"10218\": \"Lang;\",\n    \"10219\": \"Rang;\",\n    \"10220\": \"loang;\",\n    \"10221\": \"roang;\",\n    \"10229\": \"xlarr;\",\n    \"10230\": \"xrarr;\",\n    \"10231\": \"xharr;\",\n    \"10232\": \"xlArr;\",\n    \"10233\": \"xrArr;\",\n    \"10234\": \"xhArr;\",\n    \"10236\": \"xmap;\",\n    \"10239\": \"dzigrarr;\",\n    \"10498\": \"nvlArr;\",\n    \"10499\": \"nvrArr;\",\n    \"10500\": \"nvHarr;\",\n    \"10501\": \"Map;\",\n    \"10508\": \"lbarr;\",\n    \"10509\": \"rbarr;\",\n    \"10510\": \"lBarr;\",\n    \"10511\": \"rBarr;\",\n    \"10512\": \"RBarr;\",\n    \"10513\": \"DDotrahd;\",\n    \"10514\": \"UpArrowBar;\",\n    \"10515\": \"DownArrowBar;\",\n    \"10518\": \"Rarrtl;\",\n    \"10521\": \"latail;\",\n    \"10522\": \"ratail;\",\n    \"10523\": \"lAtail;\",\n    \"10524\": \"rAtail;\",\n    \"10525\": \"larrfs;\",\n    \"10526\": \"rarrfs;\",\n    \"10527\": \"larrbfs;\",\n    \"10528\": \"rarrbfs;\",\n    \"10531\": \"nwarhk;\",\n    \"10532\": \"nearhk;\",\n    \"10533\": \"searhk;\",\n    \"10534\": \"swarhk;\",\n    \"10535\": \"nwnear;\",\n    \"10536\": \"toea;\",\n    \"10537\": \"tosa;\",\n    \"10538\": \"swnwar;\",\n    \"10547\": \"rarrc;\",\n    \"10549\": \"cudarrr;\",\n    \"10550\": \"ldca;\",\n    \"10551\": \"rdca;\",\n    \"10552\": \"cudarrl;\",\n    \"10553\": \"larrpl;\",\n    \"10556\": \"curarrm;\",\n    \"10557\": \"cularrp;\",\n    \"10565\": \"rarrpl;\",\n    \"10568\": \"harrcir;\",\n    \"10569\": \"Uarrocir;\",\n    \"10570\": \"lurdshar;\",\n    \"10571\": \"ldrushar;\",\n    \"10574\": \"LeftRightVector;\",\n    \"10575\": \"RightUpDownVector;\",\n    \"10576\": \"DownLeftRightVector;\",\n    \"10577\": \"LeftUpDownVector;\",\n    \"10578\": \"LeftVectorBar;\",\n    \"10579\": \"RightVectorBar;\",\n    \"10580\": \"RightUpVectorBar;\",\n    \"10581\": \"RightDownVectorBar;\",\n    \"10582\": \"DownLeftVectorBar;\",\n    \"10583\": \"DownRightVectorBar;\",\n    \"10584\": \"LeftUpVectorBar;\",\n    \"10585\": \"LeftDownVectorBar;\",\n    \"10586\": \"LeftTeeVector;\",\n    \"10587\": \"RightTeeVector;\",\n    \"10588\": \"RightUpTeeVector;\",\n    \"10589\": \"RightDownTeeVector;\",\n    \"10590\": \"DownLeftTeeVector;\",\n    \"10591\": \"DownRightTeeVector;\",\n    \"10592\": \"LeftUpTeeVector;\",\n    \"10593\": \"LeftDownTeeVector;\",\n    \"10594\": \"lHar;\",\n    \"10595\": \"uHar;\",\n    \"10596\": \"rHar;\",\n    \"10597\": \"dHar;\",\n    \"10598\": \"luruhar;\",\n    \"10599\": \"ldrdhar;\",\n    \"10600\": \"ruluhar;\",\n    \"10601\": \"rdldhar;\",\n    \"10602\": \"lharul;\",\n    \"10603\": \"llhard;\",\n    \"10604\": \"rharul;\",\n    \"10605\": \"lrhard;\",\n    \"10606\": \"UpEquilibrium;\",\n    \"10607\": \"ReverseUpEquilibrium;\",\n    \"10608\": \"RoundImplies;\",\n    \"10609\": \"erarr;\",\n    \"10610\": \"simrarr;\",\n    \"10611\": \"larrsim;\",\n    \"10612\": \"rarrsim;\",\n    \"10613\": \"rarrap;\",\n    \"10614\": \"ltlarr;\",\n    \"10616\": \"gtrarr;\",\n    \"10617\": \"subrarr;\",\n    \"10619\": \"suplarr;\",\n    \"10620\": \"lfisht;\",\n    \"10621\": \"rfisht;\",\n    \"10622\": \"ufisht;\",\n    \"10623\": \"dfisht;\",\n    \"10629\": \"lopar;\",\n    \"10630\": \"ropar;\",\n    \"10635\": \"lbrke;\",\n    \"10636\": \"rbrke;\",\n    \"10637\": \"lbrkslu;\",\n    \"10638\": \"rbrksld;\",\n    \"10639\": \"lbrksld;\",\n    \"10640\": \"rbrkslu;\",\n    \"10641\": \"langd;\",\n    \"10642\": \"rangd;\",\n    \"10643\": \"lparlt;\",\n    \"10644\": \"rpargt;\",\n    \"10645\": \"gtlPar;\",\n    \"10646\": \"ltrPar;\",\n    \"10650\": \"vzigzag;\",\n    \"10652\": \"vangrt;\",\n    \"10653\": \"angrtvbd;\",\n    \"10660\": \"ange;\",\n    \"10661\": \"range;\",\n    \"10662\": \"dwangle;\",\n    \"10663\": \"uwangle;\",\n    \"10664\": \"angmsdaa;\",\n    \"10665\": \"angmsdab;\",\n    \"10666\": \"angmsdac;\",\n    \"10667\": \"angmsdad;\",\n    \"10668\": \"angmsdae;\",\n    \"10669\": \"angmsdaf;\",\n    \"10670\": \"angmsdag;\",\n    \"10671\": \"angmsdah;\",\n    \"10672\": \"bemptyv;\",\n    \"10673\": \"demptyv;\",\n    \"10674\": \"cemptyv;\",\n    \"10675\": \"raemptyv;\",\n    \"10676\": \"laemptyv;\",\n    \"10677\": \"ohbar;\",\n    \"10678\": \"omid;\",\n    \"10679\": \"opar;\",\n    \"10681\": \"operp;\",\n    \"10683\": \"olcross;\",\n    \"10684\": \"odsold;\",\n    \"10686\": \"olcir;\",\n    \"10687\": \"ofcir;\",\n    \"10688\": \"olt;\",\n    \"10689\": \"ogt;\",\n    \"10690\": \"cirscir;\",\n    \"10691\": \"cirE;\",\n    \"10692\": \"solb;\",\n    \"10693\": \"bsolb;\",\n    \"10697\": \"boxbox;\",\n    \"10701\": \"trisb;\",\n    \"10702\": \"rtriltri;\",\n    \"10703\": \"LeftTriangleBar;\",\n    \"10704\": \"RightTriangleBar;\",\n    \"10716\": \"iinfin;\",\n    \"10717\": \"infintie;\",\n    \"10718\": \"nvinfin;\",\n    \"10723\": \"eparsl;\",\n    \"10724\": \"smeparsl;\",\n    \"10725\": \"eqvparsl;\",\n    \"10731\": \"lozf;\",\n    \"10740\": \"RuleDelayed;\",\n    \"10742\": \"dsol;\",\n    \"10752\": \"xodot;\",\n    \"10753\": \"xoplus;\",\n    \"10754\": \"xotime;\",\n    \"10756\": \"xuplus;\",\n    \"10758\": \"xsqcup;\",\n    \"10764\": \"qint;\",\n    \"10765\": \"fpartint;\",\n    \"10768\": \"cirfnint;\",\n    \"10769\": \"awint;\",\n    \"10770\": \"rppolint;\",\n    \"10771\": \"scpolint;\",\n    \"10772\": \"npolint;\",\n    \"10773\": \"pointint;\",\n    \"10774\": \"quatint;\",\n    \"10775\": \"intlarhk;\",\n    \"10786\": \"pluscir;\",\n    \"10787\": \"plusacir;\",\n    \"10788\": \"simplus;\",\n    \"10789\": \"plusdu;\",\n    \"10790\": \"plussim;\",\n    \"10791\": \"plustwo;\",\n    \"10793\": \"mcomma;\",\n    \"10794\": \"minusdu;\",\n    \"10797\": \"loplus;\",\n    \"10798\": \"roplus;\",\n    \"10799\": \"Cross;\",\n    \"10800\": \"timesd;\",\n    \"10801\": \"timesbar;\",\n    \"10803\": \"smashp;\",\n    \"10804\": \"lotimes;\",\n    \"10805\": \"rotimes;\",\n    \"10806\": \"otimesas;\",\n    \"10807\": \"Otimes;\",\n    \"10808\": \"odiv;\",\n    \"10809\": \"triplus;\",\n    \"10810\": \"triminus;\",\n    \"10811\": \"tritime;\",\n    \"10812\": \"iprod;\",\n    \"10815\": \"amalg;\",\n    \"10816\": \"capdot;\",\n    \"10818\": \"ncup;\",\n    \"10819\": \"ncap;\",\n    \"10820\": \"capand;\",\n    \"10821\": \"cupor;\",\n    \"10822\": \"cupcap;\",\n    \"10823\": \"capcup;\",\n    \"10824\": \"cupbrcap;\",\n    \"10825\": \"capbrcup;\",\n    \"10826\": \"cupcup;\",\n    \"10827\": \"capcap;\",\n    \"10828\": \"ccups;\",\n    \"10829\": \"ccaps;\",\n    \"10832\": \"ccupssm;\",\n    \"10835\": \"And;\",\n    \"10836\": \"Or;\",\n    \"10837\": \"andand;\",\n    \"10838\": \"oror;\",\n    \"10839\": \"orslope;\",\n    \"10840\": \"andslope;\",\n    \"10842\": \"andv;\",\n    \"10843\": \"orv;\",\n    \"10844\": \"andd;\",\n    \"10845\": \"ord;\",\n    \"10847\": \"wedbar;\",\n    \"10854\": \"sdote;\",\n    \"10858\": \"simdot;\",\n    \"10861\": \"congdot;\",\n    \"10862\": \"easter;\",\n    \"10863\": \"apacir;\",\n    \"10864\": \"apE;\",\n    \"10865\": \"eplus;\",\n    \"10866\": \"pluse;\",\n    \"10867\": \"Esim;\",\n    \"10868\": \"Colone;\",\n    \"10869\": \"Equal;\",\n    \"10871\": \"eDDot;\",\n    \"10872\": \"equivDD;\",\n    \"10873\": \"ltcir;\",\n    \"10874\": \"gtcir;\",\n    \"10875\": \"ltquest;\",\n    \"10876\": \"gtquest;\",\n    \"10877\": \"LessSlantEqual;\",\n    \"10878\": \"GreaterSlantEqual;\",\n    \"10879\": \"lesdot;\",\n    \"10880\": \"gesdot;\",\n    \"10881\": \"lesdoto;\",\n    \"10882\": \"gesdoto;\",\n    \"10883\": \"lesdotor;\",\n    \"10884\": \"gesdotol;\",\n    \"10885\": \"lessapprox;\",\n    \"10886\": \"gtrapprox;\",\n    \"10887\": \"lneq;\",\n    \"10888\": \"gneq;\",\n    \"10889\": \"lnapprox;\",\n    \"10890\": \"gnapprox;\",\n    \"10891\": \"lesseqqgtr;\",\n    \"10892\": \"gtreqqless;\",\n    \"10893\": \"lsime;\",\n    \"10894\": \"gsime;\",\n    \"10895\": \"lsimg;\",\n    \"10896\": \"gsiml;\",\n    \"10897\": \"lgE;\",\n    \"10898\": \"glE;\",\n    \"10899\": \"lesges;\",\n    \"10900\": \"gesles;\",\n    \"10901\": \"eqslantless;\",\n    \"10902\": \"eqslantgtr;\",\n    \"10903\": \"elsdot;\",\n    \"10904\": \"egsdot;\",\n    \"10905\": \"el;\",\n    \"10906\": \"eg;\",\n    \"10909\": \"siml;\",\n    \"10910\": \"simg;\",\n    \"10911\": \"simlE;\",\n    \"10912\": \"simgE;\",\n    \"10913\": \"LessLess;\",\n    \"10914\": \"GreaterGreater;\",\n    \"10916\": \"glj;\",\n    \"10917\": \"gla;\",\n    \"10918\": \"ltcc;\",\n    \"10919\": \"gtcc;\",\n    \"10920\": \"lescc;\",\n    \"10921\": \"gescc;\",\n    \"10922\": \"smt;\",\n    \"10923\": \"lat;\",\n    \"10924\": \"smte;\",\n    \"10925\": \"late;\",\n    \"10926\": \"bumpE;\",\n    \"10927\": \"preceq;\",\n    \"10928\": \"succeq;\",\n    \"10931\": \"prE;\",\n    \"10932\": \"scE;\",\n    \"10933\": \"prnE;\",\n    \"10934\": \"succneqq;\",\n    \"10935\": \"precapprox;\",\n    \"10936\": \"succapprox;\",\n    \"10937\": \"prnap;\",\n    \"10938\": \"succnapprox;\",\n    \"10939\": \"Pr;\",\n    \"10940\": \"Sc;\",\n    \"10941\": \"subdot;\",\n    \"10942\": \"supdot;\",\n    \"10943\": \"subplus;\",\n    \"10944\": \"supplus;\",\n    \"10945\": \"submult;\",\n    \"10946\": \"supmult;\",\n    \"10947\": \"subedot;\",\n    \"10948\": \"supedot;\",\n    \"10949\": \"subseteqq;\",\n    \"10950\": \"supseteqq;\",\n    \"10951\": \"subsim;\",\n    \"10952\": \"supsim;\",\n    \"10955\": \"subsetneqq;\",\n    \"10956\": \"supsetneqq;\",\n    \"10959\": \"csub;\",\n    \"10960\": \"csup;\",\n    \"10961\": \"csube;\",\n    \"10962\": \"csupe;\",\n    \"10963\": \"subsup;\",\n    \"10964\": \"supsub;\",\n    \"10965\": \"subsub;\",\n    \"10966\": \"supsup;\",\n    \"10967\": \"suphsub;\",\n    \"10968\": \"supdsub;\",\n    \"10969\": \"forkv;\",\n    \"10970\": \"topfork;\",\n    \"10971\": \"mlcp;\",\n    \"10980\": \"DoubleLeftTee;\",\n    \"10982\": \"Vdashl;\",\n    \"10983\": \"Barv;\",\n    \"10984\": \"vBar;\",\n    \"10985\": \"vBarv;\",\n    \"10987\": \"Vbar;\",\n    \"10988\": \"Not;\",\n    \"10989\": \"bNot;\",\n    \"10990\": \"rnmid;\",\n    \"10991\": \"cirmid;\",\n    \"10992\": \"midcir;\",\n    \"10993\": \"topcir;\",\n    \"10994\": \"nhpar;\",\n    \"10995\": \"parsim;\",\n    \"11005\": \"parsl;\",\n    \"64256\": \"fflig;\",\n    \"64257\": \"filig;\",\n    \"64258\": \"fllig;\",\n    \"64259\": \"ffilig;\",\n    \"64260\": \"ffllig;\"\n}\n},{}],139:[function(require,module,exports){\nvar encode = require(\"./lib/encode.js\"),\n    decode = require(\"./lib/decode.js\");\n\nexports.decode = function(data, level){\n\treturn (!level || level <= 0 ? decode.XML : decode.HTML)(data);\n};\n\nexports.decodeStrict = function(data, level){\n\treturn (!level || level <= 0 ? decode.XML : decode.HTMLStrict)(data);\n};\n\nexports.encode = function(data, level){\n\treturn (!level || level <= 0 ? encode.XML : encode.HTML)(data);\n};\n\nexports.encodeXML = encode.XML;\n\nexports.encodeHTML4 =\nexports.encodeHTML5 =\nexports.encodeHTML  = encode.HTML;\n\nexports.decodeXML =\nexports.decodeXMLStrict = decode.XML;\n\nexports.decodeHTML4 =\nexports.decodeHTML5 =\nexports.decodeHTML = decode.HTML;\n\nexports.decodeHTML4Strict =\nexports.decodeHTML5Strict =\nexports.decodeHTMLStrict = decode.HTMLStrict;\n\nexports.escape = encode.escape;\n\n},{\"./lib/decode.js\":140,\"./lib/encode.js\":142}],140:[function(require,module,exports){\nvar entityMap = require(\"../maps/entities.json\"),\n    legacyMap = require(\"../maps/legacy.json\"),\n    xmlMap    = require(\"../maps/xml.json\"),\n    decodeCodePoint = require(\"./decode_codepoint.js\");\n\nvar decodeXMLStrict  = getStrictDecoder(xmlMap),\n    decodeHTMLStrict = getStrictDecoder(entityMap);\n\nfunction getStrictDecoder(map){\n\tvar keys = Object.keys(map).join(\"|\"),\n\t    replace = getReplacer(map);\n\n\tkeys += \"|#[xX][\\\\da-fA-F]+|#\\\\d+\";\n\n\tvar re = new RegExp(\"&(?:\" + keys + \");\", \"g\");\n\n\treturn function(str){\n\t\treturn String(str).replace(re, replace);\n\t};\n}\n\nvar decodeHTML = (function(){\n\tvar legacy = Object.keys(legacyMap)\n\t\t.sort(sorter);\n\n\tvar keys = Object.keys(entityMap)\n\t\t.sort(sorter);\n\n\tfor(var i = 0, j = 0; i < keys.length; i++){\n\t\tif(legacy[j] === keys[i]){\n\t\t\tkeys[i] += \";?\";\n\t\t\tj++;\n\t\t} else {\n\t\t\tkeys[i] += \";\";\n\t\t}\n\t}\n\n\tvar re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\"),\n\t    replace = getReplacer(entityMap);\n\n\tfunction replacer(str){\n\t\tif(str.substr(-1) !== \";\") str += \";\";\n\t\treturn replace(str);\n\t}\n\n\t//TODO consider creating a merged map\n\treturn function(str){\n\t\treturn String(str).replace(re, replacer);\n\t};\n}());\n\nfunction sorter(a, b){\n\treturn a < b ? 1 : -1;\n}\n\nfunction getReplacer(map){\n\treturn function replace(str){\n\t\tif(str.charAt(1) === \"#\"){\n\t\t\tif(str.charAt(2) === \"X\" || str.charAt(2) === \"x\"){\n\t\t\t\treturn decodeCodePoint(parseInt(str.substr(3), 16));\n\t\t\t}\n\t\t\treturn decodeCodePoint(parseInt(str.substr(2), 10));\n\t\t}\n\t\treturn map[str.slice(1, -1)];\n\t};\n}\n\nmodule.exports = {\n\tXML: decodeXMLStrict,\n\tHTML: decodeHTML,\n\tHTMLStrict: decodeHTMLStrict\n};\n},{\"../maps/entities.json\":144,\"../maps/legacy.json\":145,\"../maps/xml.json\":146,\"./decode_codepoint.js\":141}],141:[function(require,module,exports){\nvar decodeMap = require(\"../maps/decode.json\");\n\nmodule.exports = decodeCodePoint;\n\n// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nfunction decodeCodePoint(codePoint){\n\n\tif((codePoint >= 0xD800 && codePoint <= 0xDFFF) || codePoint > 0x10FFFF){\n\t\treturn \"\\uFFFD\";\n\t}\n\n\tif(codePoint in decodeMap){\n\t\tcodePoint = decodeMap[codePoint];\n\t}\n\n\tvar output = \"\";\n\n\tif(codePoint > 0xFFFF){\n\t\tcodePoint -= 0x10000;\n\t\toutput += String.fromCharCode(codePoint >>> 10 & 0x3FF | 0xD800);\n\t\tcodePoint = 0xDC00 | codePoint & 0x3FF;\n\t}\n\n\toutput += String.fromCharCode(codePoint);\n\treturn output;\n}\n\n},{\"../maps/decode.json\":143}],142:[function(require,module,exports){\nvar inverseXML = getInverseObj(require(\"../maps/xml.json\")),\n    xmlReplacer = getInverseReplacer(inverseXML);\n\nexports.XML = getInverse(inverseXML, xmlReplacer);\n\nvar inverseHTML = getInverseObj(require(\"../maps/entities.json\")),\n    htmlReplacer = getInverseReplacer(inverseHTML);\n\nexports.HTML = getInverse(inverseHTML, htmlReplacer);\n\nfunction getInverseObj(obj){\n\treturn Object.keys(obj).sort().reduce(function(inverse, name){\n\t\tinverse[obj[name]] = \"&\" + name + \";\";\n\t\treturn inverse;\n\t}, {});\n}\n\nfunction getInverseReplacer(inverse){\n\tvar single = [],\n\t    multiple = [];\n\n\tObject.keys(inverse).forEach(function(k){\n\t\tif(k.length === 1){\n\t\t\tsingle.push(\"\\\\\" + k);\n\t\t} else {\n\t\t\tmultiple.push(k);\n\t\t}\n\t});\n\n\t//TODO add ranges\n\tmultiple.unshift(\"[\" + single.join(\"\") + \"]\");\n\n\treturn new RegExp(multiple.join(\"|\"), \"g\");\n}\n\nvar re_nonASCII = /[^\\0-\\x7F]/g,\n    re_astralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction singleCharReplacer(c){\n\treturn \"&#x\" + c.charCodeAt(0).toString(16).toUpperCase() + \";\";\n}\n\nfunction astralReplacer(c){\n\t// http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\tvar high = c.charCodeAt(0);\n\tvar low  = c.charCodeAt(1);\n\tvar codePoint = (high - 0xD800) * 0x400 + low - 0xDC00 + 0x10000;\n\treturn \"&#x\" + codePoint.toString(16).toUpperCase() + \";\";\n}\n\nfunction getInverse(inverse, re){\n\tfunction func(name){\n\t\treturn inverse[name];\n\t}\n\n\treturn function(data){\n\t\treturn data\n\t\t\t\t.replace(re, func)\n\t\t\t\t.replace(re_astralSymbols, astralReplacer)\n\t\t\t\t.replace(re_nonASCII, singleCharReplacer);\n\t};\n}\n\nvar re_xmlChars = getInverseReplacer(inverseXML);\n\nfunction escapeXML(data){\n\treturn data\n\t\t\t.replace(re_xmlChars, singleCharReplacer)\n\t\t\t.replace(re_astralSymbols, astralReplacer)\n\t\t\t.replace(re_nonASCII, singleCharReplacer);\n}\n\nexports.escape = escapeXML;\n\n},{\"../maps/entities.json\":144,\"../maps/xml.json\":146}],143:[function(require,module,exports){\nmodule.exports={\"0\":65533,\"128\":8364,\"130\":8218,\"131\":402,\"132\":8222,\"133\":8230,\"134\":8224,\"135\":8225,\"136\":710,\"137\":8240,\"138\":352,\"139\":8249,\"140\":338,\"142\":381,\"145\":8216,\"146\":8217,\"147\":8220,\"148\":8221,\"149\":8226,\"150\":8211,\"151\":8212,\"152\":732,\"153\":8482,\"154\":353,\"155\":8250,\"156\":339,\"158\":382,\"159\":376}\n},{}],144:[function(require,module,exports){\nmodule.exports={\"Aacute\":\"\\u00C1\",\"aacute\":\"\\u00E1\",\"Abreve\":\"\\u0102\",\"abreve\":\"\\u0103\",\"ac\":\"\\u223E\",\"acd\":\"\\u223F\",\"acE\":\"\\u223E\\u0333\",\"Acirc\":\"\\u00C2\",\"acirc\":\"\\u00E2\",\"acute\":\"\\u00B4\",\"Acy\":\"\\u0410\",\"acy\":\"\\u0430\",\"AElig\":\"\\u00C6\",\"aelig\":\"\\u00E6\",\"af\":\"\\u2061\",\"Afr\":\"\\uD835\\uDD04\",\"afr\":\"\\uD835\\uDD1E\",\"Agrave\":\"\\u00C0\",\"agrave\":\"\\u00E0\",\"alefsym\":\"\\u2135\",\"aleph\":\"\\u2135\",\"Alpha\":\"\\u0391\",\"alpha\":\"\\u03B1\",\"Amacr\":\"\\u0100\",\"amacr\":\"\\u0101\",\"amalg\":\"\\u2A3F\",\"amp\":\"&\",\"AMP\":\"&\",\"andand\":\"\\u2A55\",\"And\":\"\\u2A53\",\"and\":\"\\u2227\",\"andd\":\"\\u2A5C\",\"andslope\":\"\\u2A58\",\"andv\":\"\\u2A5A\",\"ang\":\"\\u2220\",\"ange\":\"\\u29A4\",\"angle\":\"\\u2220\",\"angmsdaa\":\"\\u29A8\",\"angmsdab\":\"\\u29A9\",\"angmsdac\":\"\\u29AA\",\"angmsdad\":\"\\u29AB\",\"angmsdae\":\"\\u29AC\",\"angmsdaf\":\"\\u29AD\",\"angmsdag\":\"\\u29AE\",\"angmsdah\":\"\\u29AF\",\"angmsd\":\"\\u2221\",\"angrt\":\"\\u221F\",\"angrtvb\":\"\\u22BE\",\"angrtvbd\":\"\\u299D\",\"angsph\":\"\\u2222\",\"angst\":\"\\u00C5\",\"angzarr\":\"\\u237C\",\"Aogon\":\"\\u0104\",\"aogon\":\"\\u0105\",\"Aopf\":\"\\uD835\\uDD38\",\"aopf\":\"\\uD835\\uDD52\",\"apacir\":\"\\u2A6F\",\"ap\":\"\\u2248\",\"apE\":\"\\u2A70\",\"ape\":\"\\u224A\",\"apid\":\"\\u224B\",\"apos\":\"'\",\"ApplyFunction\":\"\\u2061\",\"approx\":\"\\u2248\",\"approxeq\":\"\\u224A\",\"Aring\":\"\\u00C5\",\"aring\":\"\\u00E5\",\"Ascr\":\"\\uD835\\uDC9C\",\"ascr\":\"\\uD835\\uDCB6\",\"Assign\":\"\\u2254\",\"ast\":\"*\",\"asymp\":\"\\u2248\",\"asympeq\":\"\\u224D\",\"Atilde\":\"\\u00C3\",\"atilde\":\"\\u00E3\",\"Auml\":\"\\u00C4\",\"auml\":\"\\u00E4\",\"awconint\":\"\\u2233\",\"awint\":\"\\u2A11\",\"backcong\":\"\\u224C\",\"backepsilon\":\"\\u03F6\",\"backprime\":\"\\u2035\",\"backsim\":\"\\u223D\",\"backsimeq\":\"\\u22CD\",\"Backslash\":\"\\u2216\",\"Barv\":\"\\u2AE7\",\"barvee\":\"\\u22BD\",\"barwed\":\"\\u2305\",\"Barwed\":\"\\u2306\",\"barwedge\":\"\\u2305\",\"bbrk\":\"\\u23B5\",\"bbrktbrk\":\"\\u23B6\",\"bcong\":\"\\u224C\",\"Bcy\":\"\\u0411\",\"bcy\":\"\\u0431\",\"bdquo\":\"\\u201E\",\"becaus\":\"\\u2235\",\"because\":\"\\u2235\",\"Because\":\"\\u2235\",\"bemptyv\":\"\\u29B0\",\"bepsi\":\"\\u03F6\",\"bernou\":\"\\u212C\",\"Bernoullis\":\"\\u212C\",\"Beta\":\"\\u0392\",\"beta\":\"\\u03B2\",\"beth\":\"\\u2136\",\"between\":\"\\u226C\",\"Bfr\":\"\\uD835\\uDD05\",\"bfr\":\"\\uD835\\uDD1F\",\"bigcap\":\"\\u22C2\",\"bigcirc\":\"\\u25EF\",\"bigcup\":\"\\u22C3\",\"bigodot\":\"\\u2A00\",\"bigoplus\":\"\\u2A01\",\"bigotimes\":\"\\u2A02\",\"bigsqcup\":\"\\u2A06\",\"bigstar\":\"\\u2605\",\"bigtriangledown\":\"\\u25BD\",\"bigtriangleup\":\"\\u25B3\",\"biguplus\":\"\\u2A04\",\"bigvee\":\"\\u22C1\",\"bigwedge\":\"\\u22C0\",\"bkarow\":\"\\u290D\",\"blacklozenge\":\"\\u29EB\",\"blacksquare\":\"\\u25AA\",\"blacktriangle\":\"\\u25B4\",\"blacktriangledown\":\"\\u25BE\",\"blacktriangleleft\":\"\\u25C2\",\"blacktriangleright\":\"\\u25B8\",\"blank\":\"\\u2423\",\"blk12\":\"\\u2592\",\"blk14\":\"\\u2591\",\"blk34\":\"\\u2593\",\"block\":\"\\u2588\",\"bne\":\"=\\u20E5\",\"bnequiv\":\"\\u2261\\u20E5\",\"bNot\":\"\\u2AED\",\"bnot\":\"\\u2310\",\"Bopf\":\"\\uD835\\uDD39\",\"bopf\":\"\\uD835\\uDD53\",\"bot\":\"\\u22A5\",\"bottom\":\"\\u22A5\",\"bowtie\":\"\\u22C8\",\"boxbox\":\"\\u29C9\",\"boxdl\":\"\\u2510\",\"boxdL\":\"\\u2555\",\"boxDl\":\"\\u2556\",\"boxDL\":\"\\u2557\",\"boxdr\":\"\\u250C\",\"boxdR\":\"\\u2552\",\"boxDr\":\"\\u2553\",\"boxDR\":\"\\u2554\",\"boxh\":\"\\u2500\",\"boxH\":\"\\u2550\",\"boxhd\":\"\\u252C\",\"boxHd\":\"\\u2564\",\"boxhD\":\"\\u2565\",\"boxHD\":\"\\u2566\",\"boxhu\":\"\\u2534\",\"boxHu\":\"\\u2567\",\"boxhU\":\"\\u2568\",\"boxHU\":\"\\u2569\",\"boxminus\":\"\\u229F\",\"boxplus\":\"\\u229E\",\"boxtimes\":\"\\u22A0\",\"boxul\":\"\\u2518\",\"boxuL\":\"\\u255B\",\"boxUl\":\"\\u255C\",\"boxUL\":\"\\u255D\",\"boxur\":\"\\u2514\",\"boxuR\":\"\\u2558\",\"boxUr\":\"\\u2559\",\"boxUR\":\"\\u255A\",\"boxv\":\"\\u2502\",\"boxV\":\"\\u2551\",\"boxvh\":\"\\u253C\",\"boxvH\":\"\\u256A\",\"boxVh\":\"\\u256B\",\"boxVH\":\"\\u256C\",\"boxvl\":\"\\u2524\",\"boxvL\":\"\\u2561\",\"boxVl\":\"\\u2562\",\"boxVL\":\"\\u2563\",\"boxvr\":\"\\u251C\",\"boxvR\":\"\\u255E\",\"boxVr\":\"\\u255F\",\"boxVR\":\"\\u2560\",\"bprime\":\"\\u2035\",\"breve\":\"\\u02D8\",\"Breve\":\"\\u02D8\",\"brvbar\":\"\\u00A6\",\"bscr\":\"\\uD835\\uDCB7\",\"Bscr\":\"\\u212C\",\"bsemi\":\"\\u204F\",\"bsim\":\"\\u223D\",\"bsime\":\"\\u22CD\",\"bsolb\":\"\\u29C5\",\"bsol\":\"\\\\\",\"bsolhsub\":\"\\u27C8\",\"bull\":\"\\u2022\",\"bullet\":\"\\u2022\",\"bump\":\"\\u224E\",\"bumpE\":\"\\u2AAE\",\"bumpe\":\"\\u224F\",\"Bumpeq\":\"\\u224E\",\"bumpeq\":\"\\u224F\",\"Cacute\":\"\\u0106\",\"cacute\":\"\\u0107\",\"capand\":\"\\u2A44\",\"capbrcup\":\"\\u2A49\",\"capcap\":\"\\u2A4B\",\"cap\":\"\\u2229\",\"Cap\":\"\\u22D2\",\"capcup\":\"\\u2A47\",\"capdot\":\"\\u2A40\",\"CapitalDifferentialD\":\"\\u2145\",\"caps\":\"\\u2229\\uFE00\",\"caret\":\"\\u2041\",\"caron\":\"\\u02C7\",\"Cayleys\":\"\\u212D\",\"ccaps\":\"\\u2A4D\",\"Ccaron\":\"\\u010C\",\"ccaron\":\"\\u010D\",\"Ccedil\":\"\\u00C7\",\"ccedil\":\"\\u00E7\",\"Ccirc\":\"\\u0108\",\"ccirc\":\"\\u0109\",\"Cconint\":\"\\u2230\",\"ccups\":\"\\u2A4C\",\"ccupssm\":\"\\u2A50\",\"Cdot\":\"\\u010A\",\"cdot\":\"\\u010B\",\"cedil\":\"\\u00B8\",\"Cedilla\":\"\\u00B8\",\"cemptyv\":\"\\u29B2\",\"cent\":\"\\u00A2\",\"centerdot\":\"\\u00B7\",\"CenterDot\":\"\\u00B7\",\"cfr\":\"\\uD835\\uDD20\",\"Cfr\":\"\\u212D\",\"CHcy\":\"\\u0427\",\"chcy\":\"\\u0447\",\"check\":\"\\u2713\",\"checkmark\":\"\\u2713\",\"Chi\":\"\\u03A7\",\"chi\":\"\\u03C7\",\"circ\":\"\\u02C6\",\"circeq\":\"\\u2257\",\"circlearrowleft\":\"\\u21BA\",\"circlearrowright\":\"\\u21BB\",\"circledast\":\"\\u229B\",\"circledcirc\":\"\\u229A\",\"circleddash\":\"\\u229D\",\"CircleDot\":\"\\u2299\",\"circledR\":\"\\u00AE\",\"circledS\":\"\\u24C8\",\"CircleMinus\":\"\\u2296\",\"CirclePlus\":\"\\u2295\",\"CircleTimes\":\"\\u2297\",\"cir\":\"\\u25CB\",\"cirE\":\"\\u29C3\",\"cire\":\"\\u2257\",\"cirfnint\":\"\\u2A10\",\"cirmid\":\"\\u2AEF\",\"cirscir\":\"\\u29C2\",\"ClockwiseContourIntegral\":\"\\u2232\",\"CloseCurlyDoubleQuote\":\"\\u201D\",\"CloseCurlyQuote\":\"\\u2019\",\"clubs\":\"\\u2663\",\"clubsuit\":\"\\u2663\",\"colon\":\":\",\"Colon\":\"\\u2237\",\"Colone\":\"\\u2A74\",\"colone\":\"\\u2254\",\"coloneq\":\"\\u2254\",\"comma\":\",\",\"commat\":\"@\",\"comp\":\"\\u2201\",\"compfn\":\"\\u2218\",\"complement\":\"\\u2201\",\"complexes\":\"\\u2102\",\"cong\":\"\\u2245\",\"congdot\":\"\\u2A6D\",\"Congruent\":\"\\u2261\",\"conint\":\"\\u222E\",\"Conint\":\"\\u222F\",\"ContourIntegral\":\"\\u222E\",\"copf\":\"\\uD835\\uDD54\",\"Copf\":\"\\u2102\",\"coprod\":\"\\u2210\",\"Coproduct\":\"\\u2210\",\"copy\":\"\\u00A9\",\"COPY\":\"\\u00A9\",\"copysr\":\"\\u2117\",\"CounterClockwiseContourIntegral\":\"\\u2233\",\"crarr\":\"\\u21B5\",\"cross\":\"\\u2717\",\"Cross\":\"\\u2A2F\",\"Cscr\":\"\\uD835\\uDC9E\",\"cscr\":\"\\uD835\\uDCB8\",\"csub\":\"\\u2ACF\",\"csube\":\"\\u2AD1\",\"csup\":\"\\u2AD0\",\"csupe\":\"\\u2AD2\",\"ctdot\":\"\\u22EF\",\"cudarrl\":\"\\u2938\",\"cudarrr\":\"\\u2935\",\"cuepr\":\"\\u22DE\",\"cuesc\":\"\\u22DF\",\"cularr\":\"\\u21B6\",\"cularrp\":\"\\u293D\",\"cupbrcap\":\"\\u2A48\",\"cupcap\":\"\\u2A46\",\"CupCap\":\"\\u224D\",\"cup\":\"\\u222A\",\"Cup\":\"\\u22D3\",\"cupcup\":\"\\u2A4A\",\"cupdot\":\"\\u228D\",\"cupor\":\"\\u2A45\",\"cups\":\"\\u222A\\uFE00\",\"curarr\":\"\\u21B7\",\"curarrm\":\"\\u293C\",\"curlyeqprec\":\"\\u22DE\",\"curlyeqsucc\":\"\\u22DF\",\"curlyvee\":\"\\u22CE\",\"curlywedge\":\"\\u22CF\",\"curren\":\"\\u00A4\",\"curvearrowleft\":\"\\u21B6\",\"curvearrowright\":\"\\u21B7\",\"cuvee\":\"\\u22CE\",\"cuwed\":\"\\u22CF\",\"cwconint\":\"\\u2232\",\"cwint\":\"\\u2231\",\"cylcty\":\"\\u232D\",\"dagger\":\"\\u2020\",\"Dagger\":\"\\u2021\",\"daleth\":\"\\u2138\",\"darr\":\"\\u2193\",\"Darr\":\"\\u21A1\",\"dArr\":\"\\u21D3\",\"dash\":\"\\u2010\",\"Dashv\":\"\\u2AE4\",\"dashv\":\"\\u22A3\",\"dbkarow\":\"\\u290F\",\"dblac\":\"\\u02DD\",\"Dcaron\":\"\\u010E\",\"dcaron\":\"\\u010F\",\"Dcy\":\"\\u0414\",\"dcy\":\"\\u0434\",\"ddagger\":\"\\u2021\",\"ddarr\":\"\\u21CA\",\"DD\":\"\\u2145\",\"dd\":\"\\u2146\",\"DDotrahd\":\"\\u2911\",\"ddotseq\":\"\\u2A77\",\"deg\":\"\\u00B0\",\"Del\":\"\\u2207\",\"Delta\":\"\\u0394\",\"delta\":\"\\u03B4\",\"demptyv\":\"\\u29B1\",\"dfisht\":\"\\u297F\",\"Dfr\":\"\\uD835\\uDD07\",\"dfr\":\"\\uD835\\uDD21\",\"dHar\":\"\\u2965\",\"dharl\":\"\\u21C3\",\"dharr\":\"\\u21C2\",\"DiacriticalAcute\":\"\\u00B4\",\"DiacriticalDot\":\"\\u02D9\",\"DiacriticalDoubleAcute\":\"\\u02DD\",\"DiacriticalGrave\":\"`\",\"DiacriticalTilde\":\"\\u02DC\",\"diam\":\"\\u22C4\",\"diamond\":\"\\u22C4\",\"Diamond\":\"\\u22C4\",\"diamondsuit\":\"\\u2666\",\"diams\":\"\\u2666\",\"die\":\"\\u00A8\",\"DifferentialD\":\"\\u2146\",\"digamma\":\"\\u03DD\",\"disin\":\"\\u22F2\",\"div\":\"\\u00F7\",\"divide\":\"\\u00F7\",\"divideontimes\":\"\\u22C7\",\"divonx\":\"\\u22C7\",\"DJcy\":\"\\u0402\",\"djcy\":\"\\u0452\",\"dlcorn\":\"\\u231E\",\"dlcrop\":\"\\u230D\",\"dollar\":\"$\",\"Dopf\":\"\\uD835\\uDD3B\",\"dopf\":\"\\uD835\\uDD55\",\"Dot\":\"\\u00A8\",\"dot\":\"\\u02D9\",\"DotDot\":\"\\u20DC\",\"doteq\":\"\\u2250\",\"doteqdot\":\"\\u2251\",\"DotEqual\":\"\\u2250\",\"dotminus\":\"\\u2238\",\"dotplus\":\"\\u2214\",\"dotsquare\":\"\\u22A1\",\"doublebarwedge\":\"\\u2306\",\"DoubleContourIntegral\":\"\\u222F\",\"DoubleDot\":\"\\u00A8\",\"DoubleDownArrow\":\"\\u21D3\",\"DoubleLeftArrow\":\"\\u21D0\",\"DoubleLeftRightArrow\":\"\\u21D4\",\"DoubleLeftTee\":\"\\u2AE4\",\"DoubleLongLeftArrow\":\"\\u27F8\",\"DoubleLongLeftRightArrow\":\"\\u27FA\",\"DoubleLongRightArrow\":\"\\u27F9\",\"DoubleRightArrow\":\"\\u21D2\",\"DoubleRightTee\":\"\\u22A8\",\"DoubleUpArrow\":\"\\u21D1\",\"DoubleUpDownArrow\":\"\\u21D5\",\"DoubleVerticalBar\":\"\\u2225\",\"DownArrowBar\":\"\\u2913\",\"downarrow\":\"\\u2193\",\"DownArrow\":\"\\u2193\",\"Downarrow\":\"\\u21D3\",\"DownArrowUpArrow\":\"\\u21F5\",\"DownBreve\":\"\\u0311\",\"downdownarrows\":\"\\u21CA\",\"downharpoonleft\":\"\\u21C3\",\"downharpoonright\":\"\\u21C2\",\"DownLeftRightVector\":\"\\u2950\",\"DownLeftTeeVector\":\"\\u295E\",\"DownLeftVectorBar\":\"\\u2956\",\"DownLeftVector\":\"\\u21BD\",\"DownRightTeeVector\":\"\\u295F\",\"DownRightVectorBar\":\"\\u2957\",\"DownRightVector\":\"\\u21C1\",\"DownTeeArrow\":\"\\u21A7\",\"DownTee\":\"\\u22A4\",\"drbkarow\":\"\\u2910\",\"drcorn\":\"\\u231F\",\"drcrop\":\"\\u230C\",\"Dscr\":\"\\uD835\\uDC9F\",\"dscr\":\"\\uD835\\uDCB9\",\"DScy\":\"\\u0405\",\"dscy\":\"\\u0455\",\"dsol\":\"\\u29F6\",\"Dstrok\":\"\\u0110\",\"dstrok\":\"\\u0111\",\"dtdot\":\"\\u22F1\",\"dtri\":\"\\u25BF\",\"dtrif\":\"\\u25BE\",\"duarr\":\"\\u21F5\",\"duhar\":\"\\u296F\",\"dwangle\":\"\\u29A6\",\"DZcy\":\"\\u040F\",\"dzcy\":\"\\u045F\",\"dzigrarr\":\"\\u27FF\",\"Eacute\":\"\\u00C9\",\"eacute\":\"\\u00E9\",\"easter\":\"\\u2A6E\",\"Ecaron\":\"\\u011A\",\"ecaron\":\"\\u011B\",\"Ecirc\":\"\\u00CA\",\"ecirc\":\"\\u00EA\",\"ecir\":\"\\u2256\",\"ecolon\":\"\\u2255\",\"Ecy\":\"\\u042D\",\"ecy\":\"\\u044D\",\"eDDot\":\"\\u2A77\",\"Edot\":\"\\u0116\",\"edot\":\"\\u0117\",\"eDot\":\"\\u2251\",\"ee\":\"\\u2147\",\"efDot\":\"\\u2252\",\"Efr\":\"\\uD835\\uDD08\",\"efr\":\"\\uD835\\uDD22\",\"eg\":\"\\u2A9A\",\"Egrave\":\"\\u00C8\",\"egrave\":\"\\u00E8\",\"egs\":\"\\u2A96\",\"egsdot\":\"\\u2A98\",\"el\":\"\\u2A99\",\"Element\":\"\\u2208\",\"elinters\":\"\\u23E7\",\"ell\":\"\\u2113\",\"els\":\"\\u2A95\",\"elsdot\":\"\\u2A97\",\"Emacr\":\"\\u0112\",\"emacr\":\"\\u0113\",\"empty\":\"\\u2205\",\"emptyset\":\"\\u2205\",\"EmptySmallSquare\":\"\\u25FB\",\"emptyv\":\"\\u2205\",\"EmptyVerySmallSquare\":\"\\u25AB\",\"emsp13\":\"\\u2004\",\"emsp14\":\"\\u2005\",\"emsp\":\"\\u2003\",\"ENG\":\"\\u014A\",\"eng\":\"\\u014B\",\"ensp\":\"\\u2002\",\"Eogon\":\"\\u0118\",\"eogon\":\"\\u0119\",\"Eopf\":\"\\uD835\\uDD3C\",\"eopf\":\"\\uD835\\uDD56\",\"epar\":\"\\u22D5\",\"eparsl\":\"\\u29E3\",\"eplus\":\"\\u2A71\",\"epsi\":\"\\u03B5\",\"Epsilon\":\"\\u0395\",\"epsilon\":\"\\u03B5\",\"epsiv\":\"\\u03F5\",\"eqcirc\":\"\\u2256\",\"eqcolon\":\"\\u2255\",\"eqsim\":\"\\u2242\",\"eqslantgtr\":\"\\u2A96\",\"eqslantless\":\"\\u2A95\",\"Equal\":\"\\u2A75\",\"equals\":\"=\",\"EqualTilde\":\"\\u2242\",\"equest\":\"\\u225F\",\"Equilibrium\":\"\\u21CC\",\"equiv\":\"\\u2261\",\"equivDD\":\"\\u2A78\",\"eqvparsl\":\"\\u29E5\",\"erarr\":\"\\u2971\",\"erDot\":\"\\u2253\",\"escr\":\"\\u212F\",\"Escr\":\"\\u2130\",\"esdot\":\"\\u2250\",\"Esim\":\"\\u2A73\",\"esim\":\"\\u2242\",\"Eta\":\"\\u0397\",\"eta\":\"\\u03B7\",\"ETH\":\"\\u00D0\",\"eth\":\"\\u00F0\",\"Euml\":\"\\u00CB\",\"euml\":\"\\u00EB\",\"euro\":\"\\u20AC\",\"excl\":\"!\",\"exist\":\"\\u2203\",\"Exists\":\"\\u2203\",\"expectation\":\"\\u2130\",\"exponentiale\":\"\\u2147\",\"ExponentialE\":\"\\u2147\",\"fallingdotseq\":\"\\u2252\",\"Fcy\":\"\\u0424\",\"fcy\":\"\\u0444\",\"female\":\"\\u2640\",\"ffilig\":\"\\uFB03\",\"fflig\":\"\\uFB00\",\"ffllig\":\"\\uFB04\",\"Ffr\":\"\\uD835\\uDD09\",\"ffr\":\"\\uD835\\uDD23\",\"filig\":\"\\uFB01\",\"FilledSmallSquare\":\"\\u25FC\",\"FilledVerySmallSquare\":\"\\u25AA\",\"fjlig\":\"fj\",\"flat\":\"\\u266D\",\"fllig\":\"\\uFB02\",\"fltns\":\"\\u25B1\",\"fnof\":\"\\u0192\",\"Fopf\":\"\\uD835\\uDD3D\",\"fopf\":\"\\uD835\\uDD57\",\"forall\":\"\\u2200\",\"ForAll\":\"\\u2200\",\"fork\":\"\\u22D4\",\"forkv\":\"\\u2AD9\",\"Fouriertrf\":\"\\u2131\",\"fpartint\":\"\\u2A0D\",\"frac12\":\"\\u00BD\",\"frac13\":\"\\u2153\",\"frac14\":\"\\u00BC\",\"frac15\":\"\\u2155\",\"frac16\":\"\\u2159\",\"frac18\":\"\\u215B\",\"frac23\":\"\\u2154\",\"frac25\":\"\\u2156\",\"frac34\":\"\\u00BE\",\"frac35\":\"\\u2157\",\"frac38\":\"\\u215C\",\"frac45\":\"\\u2158\",\"frac56\":\"\\u215A\",\"frac58\":\"\\u215D\",\"frac78\":\"\\u215E\",\"frasl\":\"\\u2044\",\"frown\":\"\\u2322\",\"fscr\":\"\\uD835\\uDCBB\",\"Fscr\":\"\\u2131\",\"gacute\":\"\\u01F5\",\"Gamma\":\"\\u0393\",\"gamma\":\"\\u03B3\",\"Gammad\":\"\\u03DC\",\"gammad\":\"\\u03DD\",\"gap\":\"\\u2A86\",\"Gbreve\":\"\\u011E\",\"gbreve\":\"\\u011F\",\"Gcedil\":\"\\u0122\",\"Gcirc\":\"\\u011C\",\"gcirc\":\"\\u011D\",\"Gcy\":\"\\u0413\",\"gcy\":\"\\u0433\",\"Gdot\":\"\\u0120\",\"gdot\":\"\\u0121\",\"ge\":\"\\u2265\",\"gE\":\"\\u2267\",\"gEl\":\"\\u2A8C\",\"gel\":\"\\u22DB\",\"geq\":\"\\u2265\",\"geqq\":\"\\u2267\",\"geqslant\":\"\\u2A7E\",\"gescc\":\"\\u2AA9\",\"ges\":\"\\u2A7E\",\"gesdot\":\"\\u2A80\",\"gesdoto\":\"\\u2A82\",\"gesdotol\":\"\\u2A84\",\"gesl\":\"\\u22DB\\uFE00\",\"gesles\":\"\\u2A94\",\"Gfr\":\"\\uD835\\uDD0A\",\"gfr\":\"\\uD835\\uDD24\",\"gg\":\"\\u226B\",\"Gg\":\"\\u22D9\",\"ggg\":\"\\u22D9\",\"gimel\":\"\\u2137\",\"GJcy\":\"\\u0403\",\"gjcy\":\"\\u0453\",\"gla\":\"\\u2AA5\",\"gl\":\"\\u2277\",\"glE\":\"\\u2A92\",\"glj\":\"\\u2AA4\",\"gnap\":\"\\u2A8A\",\"gnapprox\":\"\\u2A8A\",\"gne\":\"\\u2A88\",\"gnE\":\"\\u2269\",\"gneq\":\"\\u2A88\",\"gneqq\":\"\\u2269\",\"gnsim\":\"\\u22E7\",\"Gopf\":\"\\uD835\\uDD3E\",\"gopf\":\"\\uD835\\uDD58\",\"grave\":\"`\",\"GreaterEqual\":\"\\u2265\",\"GreaterEqualLess\":\"\\u22DB\",\"GreaterFullEqual\":\"\\u2267\",\"GreaterGreater\":\"\\u2AA2\",\"GreaterLess\":\"\\u2277\",\"GreaterSlantEqual\":\"\\u2A7E\",\"GreaterTilde\":\"\\u2273\",\"Gscr\":\"\\uD835\\uDCA2\",\"gscr\":\"\\u210A\",\"gsim\":\"\\u2273\",\"gsime\":\"\\u2A8E\",\"gsiml\":\"\\u2A90\",\"gtcc\":\"\\u2AA7\",\"gtcir\":\"\\u2A7A\",\"gt\":\">\",\"GT\":\">\",\"Gt\":\"\\u226B\",\"gtdot\":\"\\u22D7\",\"gtlPar\":\"\\u2995\",\"gtquest\":\"\\u2A7C\",\"gtrapprox\":\"\\u2A86\",\"gtrarr\":\"\\u2978\",\"gtrdot\":\"\\u22D7\",\"gtreqless\":\"\\u22DB\",\"gtreqqless\":\"\\u2A8C\",\"gtrless\":\"\\u2277\",\"gtrsim\":\"\\u2273\",\"gvertneqq\":\"\\u2269\\uFE00\",\"gvnE\":\"\\u2269\\uFE00\",\"Hacek\":\"\\u02C7\",\"hairsp\":\"\\u200A\",\"half\":\"\\u00BD\",\"hamilt\":\"\\u210B\",\"HARDcy\":\"\\u042A\",\"hardcy\":\"\\u044A\",\"harrcir\":\"\\u2948\",\"harr\":\"\\u2194\",\"hArr\":\"\\u21D4\",\"harrw\":\"\\u21AD\",\"Hat\":\"^\",\"hbar\":\"\\u210F\",\"Hcirc\":\"\\u0124\",\"hcirc\":\"\\u0125\",\"hearts\":\"\\u2665\",\"heartsuit\":\"\\u2665\",\"hellip\":\"\\u2026\",\"hercon\":\"\\u22B9\",\"hfr\":\"\\uD835\\uDD25\",\"Hfr\":\"\\u210C\",\"HilbertSpace\":\"\\u210B\",\"hksearow\":\"\\u2925\",\"hkswarow\":\"\\u2926\",\"hoarr\":\"\\u21FF\",\"homtht\":\"\\u223B\",\"hookleftarrow\":\"\\u21A9\",\"hookrightarrow\":\"\\u21AA\",\"hopf\":\"\\uD835\\uDD59\",\"Hopf\":\"\\u210D\",\"horbar\":\"\\u2015\",\"HorizontalLine\":\"\\u2500\",\"hscr\":\"\\uD835\\uDCBD\",\"Hscr\":\"\\u210B\",\"hslash\":\"\\u210F\",\"Hstrok\":\"\\u0126\",\"hstrok\":\"\\u0127\",\"HumpDownHump\":\"\\u224E\",\"HumpEqual\":\"\\u224F\",\"hybull\":\"\\u2043\",\"hyphen\":\"\\u2010\",\"Iacute\":\"\\u00CD\",\"iacute\":\"\\u00ED\",\"ic\":\"\\u2063\",\"Icirc\":\"\\u00CE\",\"icirc\":\"\\u00EE\",\"Icy\":\"\\u0418\",\"icy\":\"\\u0438\",\"Idot\":\"\\u0130\",\"IEcy\":\"\\u0415\",\"iecy\":\"\\u0435\",\"iexcl\":\"\\u00A1\",\"iff\":\"\\u21D4\",\"ifr\":\"\\uD835\\uDD26\",\"Ifr\":\"\\u2111\",\"Igrave\":\"\\u00CC\",\"igrave\":\"\\u00EC\",\"ii\":\"\\u2148\",\"iiiint\":\"\\u2A0C\",\"iiint\":\"\\u222D\",\"iinfin\":\"\\u29DC\",\"iiota\":\"\\u2129\",\"IJlig\":\"\\u0132\",\"ijlig\":\"\\u0133\",\"Imacr\":\"\\u012A\",\"imacr\":\"\\u012B\",\"image\":\"\\u2111\",\"ImaginaryI\":\"\\u2148\",\"imagline\":\"\\u2110\",\"imagpart\":\"\\u2111\",\"imath\":\"\\u0131\",\"Im\":\"\\u2111\",\"imof\":\"\\u22B7\",\"imped\":\"\\u01B5\",\"Implies\":\"\\u21D2\",\"incare\":\"\\u2105\",\"in\":\"\\u2208\",\"infin\":\"\\u221E\",\"infintie\":\"\\u29DD\",\"inodot\":\"\\u0131\",\"intcal\":\"\\u22BA\",\"int\":\"\\u222B\",\"Int\":\"\\u222C\",\"integers\":\"\\u2124\",\"Integral\":\"\\u222B\",\"intercal\":\"\\u22BA\",\"Intersection\":\"\\u22C2\",\"intlarhk\":\"\\u2A17\",\"intprod\":\"\\u2A3C\",\"InvisibleComma\":\"\\u2063\",\"InvisibleTimes\":\"\\u2062\",\"IOcy\":\"\\u0401\",\"iocy\":\"\\u0451\",\"Iogon\":\"\\u012E\",\"iogon\":\"\\u012F\",\"Iopf\":\"\\uD835\\uDD40\",\"iopf\":\"\\uD835\\uDD5A\",\"Iota\":\"\\u0399\",\"iota\":\"\\u03B9\",\"iprod\":\"\\u2A3C\",\"iquest\":\"\\u00BF\",\"iscr\":\"\\uD835\\uDCBE\",\"Iscr\":\"\\u2110\",\"isin\":\"\\u2208\",\"isindot\":\"\\u22F5\",\"isinE\":\"\\u22F9\",\"isins\":\"\\u22F4\",\"isinsv\":\"\\u22F3\",\"isinv\":\"\\u2208\",\"it\":\"\\u2062\",\"Itilde\":\"\\u0128\",\"itilde\":\"\\u0129\",\"Iukcy\":\"\\u0406\",\"iukcy\":\"\\u0456\",\"Iuml\":\"\\u00CF\",\"iuml\":\"\\u00EF\",\"Jcirc\":\"\\u0134\",\"jcirc\":\"\\u0135\",\"Jcy\":\"\\u0419\",\"jcy\":\"\\u0439\",\"Jfr\":\"\\uD835\\uDD0D\",\"jfr\":\"\\uD835\\uDD27\",\"jmath\":\"\\u0237\",\"Jopf\":\"\\uD835\\uDD41\",\"jopf\":\"\\uD835\\uDD5B\",\"Jscr\":\"\\uD835\\uDCA5\",\"jscr\":\"\\uD835\\uDCBF\",\"Jsercy\":\"\\u0408\",\"jsercy\":\"\\u0458\",\"Jukcy\":\"\\u0404\",\"jukcy\":\"\\u0454\",\"Kappa\":\"\\u039A\",\"kappa\":\"\\u03BA\",\"kappav\":\"\\u03F0\",\"Kcedil\":\"\\u0136\",\"kcedil\":\"\\u0137\",\"Kcy\":\"\\u041A\",\"kcy\":\"\\u043A\",\"Kfr\":\"\\uD835\\uDD0E\",\"kfr\":\"\\uD835\\uDD28\",\"kgreen\":\"\\u0138\",\"KHcy\":\"\\u0425\",\"khcy\":\"\\u0445\",\"KJcy\":\"\\u040C\",\"kjcy\":\"\\u045C\",\"Kopf\":\"\\uD835\\uDD42\",\"kopf\":\"\\uD835\\uDD5C\",\"Kscr\":\"\\uD835\\uDCA6\",\"kscr\":\"\\uD835\\uDCC0\",\"lAarr\":\"\\u21DA\",\"Lacute\":\"\\u0139\",\"lacute\":\"\\u013A\",\"laemptyv\":\"\\u29B4\",\"lagran\":\"\\u2112\",\"Lambda\":\"\\u039B\",\"lambda\":\"\\u03BB\",\"lang\":\"\\u27E8\",\"Lang\":\"\\u27EA\",\"langd\":\"\\u2991\",\"langle\":\"\\u27E8\",\"lap\":\"\\u2A85\",\"Laplacetrf\":\"\\u2112\",\"laquo\":\"\\u00AB\",\"larrb\":\"\\u21E4\",\"larrbfs\":\"\\u291F\",\"larr\":\"\\u2190\",\"Larr\":\"\\u219E\",\"lArr\":\"\\u21D0\",\"larrfs\":\"\\u291D\",\"larrhk\":\"\\u21A9\",\"larrlp\":\"\\u21AB\",\"larrpl\":\"\\u2939\",\"larrsim\":\"\\u2973\",\"larrtl\":\"\\u21A2\",\"latail\":\"\\u2919\",\"lAtail\":\"\\u291B\",\"lat\":\"\\u2AAB\",\"late\":\"\\u2AAD\",\"lates\":\"\\u2AAD\\uFE00\",\"lbarr\":\"\\u290C\",\"lBarr\":\"\\u290E\",\"lbbrk\":\"\\u2772\",\"lbrace\":\"{\",\"lbrack\":\"[\",\"lbrke\":\"\\u298B\",\"lbrksld\":\"\\u298F\",\"lbrkslu\":\"\\u298D\",\"Lcaron\":\"\\u013D\",\"lcaron\":\"\\u013E\",\"Lcedil\":\"\\u013B\",\"lcedil\":\"\\u013C\",\"lceil\":\"\\u2308\",\"lcub\":\"{\",\"Lcy\":\"\\u041B\",\"lcy\":\"\\u043B\",\"ldca\":\"\\u2936\",\"ldquo\":\"\\u201C\",\"ldquor\":\"\\u201E\",\"ldrdhar\":\"\\u2967\",\"ldrushar\":\"\\u294B\",\"ldsh\":\"\\u21B2\",\"le\":\"\\u2264\",\"lE\":\"\\u2266\",\"LeftAngleBracket\":\"\\u27E8\",\"LeftArrowBar\":\"\\u21E4\",\"leftarrow\":\"\\u2190\",\"LeftArrow\":\"\\u2190\",\"Leftarrow\":\"\\u21D0\",\"LeftArrowRightArrow\":\"\\u21C6\",\"leftarrowtail\":\"\\u21A2\",\"LeftCeiling\":\"\\u2308\",\"LeftDoubleBracket\":\"\\u27E6\",\"LeftDownTeeVector\":\"\\u2961\",\"LeftDownVectorBar\":\"\\u2959\",\"LeftDownVector\":\"\\u21C3\",\"LeftFloor\":\"\\u230A\",\"leftharpoondown\":\"\\u21BD\",\"leftharpoonup\":\"\\u21BC\",\"leftleftarrows\":\"\\u21C7\",\"leftrightarrow\":\"\\u2194\",\"LeftRightArrow\":\"\\u2194\",\"Leftrightarrow\":\"\\u21D4\",\"leftrightarrows\":\"\\u21C6\",\"leftrightharpoons\":\"\\u21CB\",\"leftrightsquigarrow\":\"\\u21AD\",\"LeftRightVector\":\"\\u294E\",\"LeftTeeArrow\":\"\\u21A4\",\"LeftTee\":\"\\u22A3\",\"LeftTeeVector\":\"\\u295A\",\"leftthreetimes\":\"\\u22CB\",\"LeftTriangleBar\":\"\\u29CF\",\"LeftTriangle\":\"\\u22B2\",\"LeftTriangleEqual\":\"\\u22B4\",\"LeftUpDownVector\":\"\\u2951\",\"LeftUpTeeVector\":\"\\u2960\",\"LeftUpVectorBar\":\"\\u2958\",\"LeftUpVector\":\"\\u21BF\",\"LeftVectorBar\":\"\\u2952\",\"LeftVector\":\"\\u21BC\",\"lEg\":\"\\u2A8B\",\"leg\":\"\\u22DA\",\"leq\":\"\\u2264\",\"leqq\":\"\\u2266\",\"leqslant\":\"\\u2A7D\",\"lescc\":\"\\u2AA8\",\"les\":\"\\u2A7D\",\"lesdot\":\"\\u2A7F\",\"lesdoto\":\"\\u2A81\",\"lesdotor\":\"\\u2A83\",\"lesg\":\"\\u22DA\\uFE00\",\"lesges\":\"\\u2A93\",\"lessapprox\":\"\\u2A85\",\"lessdot\":\"\\u22D6\",\"lesseqgtr\":\"\\u22DA\",\"lesseqqgtr\":\"\\u2A8B\",\"LessEqualGreater\":\"\\u22DA\",\"LessFullEqual\":\"\\u2266\",\"LessGreater\":\"\\u2276\",\"lessgtr\":\"\\u2276\",\"LessLess\":\"\\u2AA1\",\"lesssim\":\"\\u2272\",\"LessSlantEqual\":\"\\u2A7D\",\"LessTilde\":\"\\u2272\",\"lfisht\":\"\\u297C\",\"lfloor\":\"\\u230A\",\"Lfr\":\"\\uD835\\uDD0F\",\"lfr\":\"\\uD835\\uDD29\",\"lg\":\"\\u2276\",\"lgE\":\"\\u2A91\",\"lHar\":\"\\u2962\",\"lhard\":\"\\u21BD\",\"lharu\":\"\\u21BC\",\"lharul\":\"\\u296A\",\"lhblk\":\"\\u2584\",\"LJcy\":\"\\u0409\",\"ljcy\":\"\\u0459\",\"llarr\":\"\\u21C7\",\"ll\":\"\\u226A\",\"Ll\":\"\\u22D8\",\"llcorner\":\"\\u231E\",\"Lleftarrow\":\"\\u21DA\",\"llhard\":\"\\u296B\",\"lltri\":\"\\u25FA\",\"Lmidot\":\"\\u013F\",\"lmidot\":\"\\u0140\",\"lmoustache\":\"\\u23B0\",\"lmoust\":\"\\u23B0\",\"lnap\":\"\\u2A89\",\"lnapprox\":\"\\u2A89\",\"lne\":\"\\u2A87\",\"lnE\":\"\\u2268\",\"lneq\":\"\\u2A87\",\"lneqq\":\"\\u2268\",\"lnsim\":\"\\u22E6\",\"loang\":\"\\u27EC\",\"loarr\":\"\\u21FD\",\"lobrk\":\"\\u27E6\",\"longleftarrow\":\"\\u27F5\",\"LongLeftArrow\":\"\\u27F5\",\"Longleftarrow\":\"\\u27F8\",\"longleftrightarrow\":\"\\u27F7\",\"LongLeftRightArrow\":\"\\u27F7\",\"Longleftrightarrow\":\"\\u27FA\",\"longmapsto\":\"\\u27FC\",\"longrightarrow\":\"\\u27F6\",\"LongRightArrow\":\"\\u27F6\",\"Longrightarrow\":\"\\u27F9\",\"looparrowleft\":\"\\u21AB\",\"looparrowright\":\"\\u21AC\",\"lopar\":\"\\u2985\",\"Lopf\":\"\\uD835\\uDD43\",\"lopf\":\"\\uD835\\uDD5D\",\"loplus\":\"\\u2A2D\",\"lotimes\":\"\\u2A34\",\"lowast\":\"\\u2217\",\"lowbar\":\"_\",\"LowerLeftArrow\":\"\\u2199\",\"LowerRightArrow\":\"\\u2198\",\"loz\":\"\\u25CA\",\"lozenge\":\"\\u25CA\",\"lozf\":\"\\u29EB\",\"lpar\":\"(\",\"lparlt\":\"\\u2993\",\"lrarr\":\"\\u21C6\",\"lrcorner\":\"\\u231F\",\"lrhar\":\"\\u21CB\",\"lrhard\":\"\\u296D\",\"lrm\":\"\\u200E\",\"lrtri\":\"\\u22BF\",\"lsaquo\":\"\\u2039\",\"lscr\":\"\\uD835\\uDCC1\",\"Lscr\":\"\\u2112\",\"lsh\":\"\\u21B0\",\"Lsh\":\"\\u21B0\",\"lsim\":\"\\u2272\",\"lsime\":\"\\u2A8D\",\"lsimg\":\"\\u2A8F\",\"lsqb\":\"[\",\"lsquo\":\"\\u2018\",\"lsquor\":\"\\u201A\",\"Lstrok\":\"\\u0141\",\"lstrok\":\"\\u0142\",\"ltcc\":\"\\u2AA6\",\"ltcir\":\"\\u2A79\",\"lt\":\"<\",\"LT\":\"<\",\"Lt\":\"\\u226A\",\"ltdot\":\"\\u22D6\",\"lthree\":\"\\u22CB\",\"ltimes\":\"\\u22C9\",\"ltlarr\":\"\\u2976\",\"ltquest\":\"\\u2A7B\",\"ltri\":\"\\u25C3\",\"ltrie\":\"\\u22B4\",\"ltrif\":\"\\u25C2\",\"ltrPar\":\"\\u2996\",\"lurdshar\":\"\\u294A\",\"luruhar\":\"\\u2966\",\"lvertneqq\":\"\\u2268\\uFE00\",\"lvnE\":\"\\u2268\\uFE00\",\"macr\":\"\\u00AF\",\"male\":\"\\u2642\",\"malt\":\"\\u2720\",\"maltese\":\"\\u2720\",\"Map\":\"\\u2905\",\"map\":\"\\u21A6\",\"mapsto\":\"\\u21A6\",\"mapstodown\":\"\\u21A7\",\"mapstoleft\":\"\\u21A4\",\"mapstoup\":\"\\u21A5\",\"marker\":\"\\u25AE\",\"mcomma\":\"\\u2A29\",\"Mcy\":\"\\u041C\",\"mcy\":\"\\u043C\",\"mdash\":\"\\u2014\",\"mDDot\":\"\\u223A\",\"measuredangle\":\"\\u2221\",\"MediumSpace\":\"\\u205F\",\"Mellintrf\":\"\\u2133\",\"Mfr\":\"\\uD835\\uDD10\",\"mfr\":\"\\uD835\\uDD2A\",\"mho\":\"\\u2127\",\"micro\":\"\\u00B5\",\"midast\":\"*\",\"midcir\":\"\\u2AF0\",\"mid\":\"\\u2223\",\"middot\":\"\\u00B7\",\"minusb\":\"\\u229F\",\"minus\":\"\\u2212\",\"minusd\":\"\\u2238\",\"minusdu\":\"\\u2A2A\",\"MinusPlus\":\"\\u2213\",\"mlcp\":\"\\u2ADB\",\"mldr\":\"\\u2026\",\"mnplus\":\"\\u2213\",\"models\":\"\\u22A7\",\"Mopf\":\"\\uD835\\uDD44\",\"mopf\":\"\\uD835\\uDD5E\",\"mp\":\"\\u2213\",\"mscr\":\"\\uD835\\uDCC2\",\"Mscr\":\"\\u2133\",\"mstpos\":\"\\u223E\",\"Mu\":\"\\u039C\",\"mu\":\"\\u03BC\",\"multimap\":\"\\u22B8\",\"mumap\":\"\\u22B8\",\"nabla\":\"\\u2207\",\"Nacute\":\"\\u0143\",\"nacute\":\"\\u0144\",\"nang\":\"\\u2220\\u20D2\",\"nap\":\"\\u2249\",\"napE\":\"\\u2A70\\u0338\",\"napid\":\"\\u224B\\u0338\",\"napos\":\"\\u0149\",\"napprox\":\"\\u2249\",\"natural\":\"\\u266E\",\"naturals\":\"\\u2115\",\"natur\":\"\\u266E\",\"nbsp\":\"\\u00A0\",\"nbump\":\"\\u224E\\u0338\",\"nbumpe\":\"\\u224F\\u0338\",\"ncap\":\"\\u2A43\",\"Ncaron\":\"\\u0147\",\"ncaron\":\"\\u0148\",\"Ncedil\":\"\\u0145\",\"ncedil\":\"\\u0146\",\"ncong\":\"\\u2247\",\"ncongdot\":\"\\u2A6D\\u0338\",\"ncup\":\"\\u2A42\",\"Ncy\":\"\\u041D\",\"ncy\":\"\\u043D\",\"ndash\":\"\\u2013\",\"nearhk\":\"\\u2924\",\"nearr\":\"\\u2197\",\"neArr\":\"\\u21D7\",\"nearrow\":\"\\u2197\",\"ne\":\"\\u2260\",\"nedot\":\"\\u2250\\u0338\",\"NegativeMediumSpace\":\"\\u200B\",\"NegativeThickSpace\":\"\\u200B\",\"NegativeThinSpace\":\"\\u200B\",\"NegativeVeryThinSpace\":\"\\u200B\",\"nequiv\":\"\\u2262\",\"nesear\":\"\\u2928\",\"nesim\":\"\\u2242\\u0338\",\"NestedGreaterGreater\":\"\\u226B\",\"NestedLessLess\":\"\\u226A\",\"NewLine\":\"\\n\",\"nexist\":\"\\u2204\",\"nexists\":\"\\u2204\",\"Nfr\":\"\\uD835\\uDD11\",\"nfr\":\"\\uD835\\uDD2B\",\"ngE\":\"\\u2267\\u0338\",\"nge\":\"\\u2271\",\"ngeq\":\"\\u2271\",\"ngeqq\":\"\\u2267\\u0338\",\"ngeqslant\":\"\\u2A7E\\u0338\",\"nges\":\"\\u2A7E\\u0338\",\"nGg\":\"\\u22D9\\u0338\",\"ngsim\":\"\\u2275\",\"nGt\":\"\\u226B\\u20D2\",\"ngt\":\"\\u226F\",\"ngtr\":\"\\u226F\",\"nGtv\":\"\\u226B\\u0338\",\"nharr\":\"\\u21AE\",\"nhArr\":\"\\u21CE\",\"nhpar\":\"\\u2AF2\",\"ni\":\"\\u220B\",\"nis\":\"\\u22FC\",\"nisd\":\"\\u22FA\",\"niv\":\"\\u220B\",\"NJcy\":\"\\u040A\",\"njcy\":\"\\u045A\",\"nlarr\":\"\\u219A\",\"nlArr\":\"\\u21CD\",\"nldr\":\"\\u2025\",\"nlE\":\"\\u2266\\u0338\",\"nle\":\"\\u2270\",\"nleftarrow\":\"\\u219A\",\"nLeftarrow\":\"\\u21CD\",\"nleftrightarrow\":\"\\u21AE\",\"nLeftrightarrow\":\"\\u21CE\",\"nleq\":\"\\u2270\",\"nleqq\":\"\\u2266\\u0338\",\"nleqslant\":\"\\u2A7D\\u0338\",\"nles\":\"\\u2A7D\\u0338\",\"nless\":\"\\u226E\",\"nLl\":\"\\u22D8\\u0338\",\"nlsim\":\"\\u2274\",\"nLt\":\"\\u226A\\u20D2\",\"nlt\":\"\\u226E\",\"nltri\":\"\\u22EA\",\"nltrie\":\"\\u22EC\",\"nLtv\":\"\\u226A\\u0338\",\"nmid\":\"\\u2224\",\"NoBreak\":\"\\u2060\",\"NonBreakingSpace\":\"\\u00A0\",\"nopf\":\"\\uD835\\uDD5F\",\"Nopf\":\"\\u2115\",\"Not\":\"\\u2AEC\",\"not\":\"\\u00AC\",\"NotCongruent\":\"\\u2262\",\"NotCupCap\":\"\\u226D\",\"NotDoubleVerticalBar\":\"\\u2226\",\"NotElement\":\"\\u2209\",\"NotEqual\":\"\\u2260\",\"NotEqualTilde\":\"\\u2242\\u0338\",\"NotExists\":\"\\u2204\",\"NotGreater\":\"\\u226F\",\"NotGreaterEqual\":\"\\u2271\",\"NotGreaterFullEqual\":\"\\u2267\\u0338\",\"NotGreaterGreater\":\"\\u226B\\u0338\",\"NotGreaterLess\":\"\\u2279\",\"NotGreaterSlantEqual\":\"\\u2A7E\\u0338\",\"NotGreaterTilde\":\"\\u2275\",\"NotHumpDownHump\":\"\\u224E\\u0338\",\"NotHumpEqual\":\"\\u224F\\u0338\",\"notin\":\"\\u2209\",\"notindot\":\"\\u22F5\\u0338\",\"notinE\":\"\\u22F9\\u0338\",\"notinva\":\"\\u2209\",\"notinvb\":\"\\u22F7\",\"notinvc\":\"\\u22F6\",\"NotLeftTriangleBar\":\"\\u29CF\\u0338\",\"NotLeftTriangle\":\"\\u22EA\",\"NotLeftTriangleEqual\":\"\\u22EC\",\"NotLess\":\"\\u226E\",\"NotLessEqual\":\"\\u2270\",\"NotLessGreater\":\"\\u2278\",\"NotLessLess\":\"\\u226A\\u0338\",\"NotLessSlantEqual\":\"\\u2A7D\\u0338\",\"NotLessTilde\":\"\\u2274\",\"NotNestedGreaterGreater\":\"\\u2AA2\\u0338\",\"NotNestedLessLess\":\"\\u2AA1\\u0338\",\"notni\":\"\\u220C\",\"notniva\":\"\\u220C\",\"notnivb\":\"\\u22FE\",\"notnivc\":\"\\u22FD\",\"NotPrecedes\":\"\\u2280\",\"NotPrecedesEqual\":\"\\u2AAF\\u0338\",\"NotPrecedesSlantEqual\":\"\\u22E0\",\"NotReverseElement\":\"\\u220C\",\"NotRightTriangleBar\":\"\\u29D0\\u0338\",\"NotRightTriangle\":\"\\u22EB\",\"NotRightTriangleEqual\":\"\\u22ED\",\"NotSquareSubset\":\"\\u228F\\u0338\",\"NotSquareSubsetEqual\":\"\\u22E2\",\"NotSquareSuperset\":\"\\u2290\\u0338\",\"NotSquareSupersetEqual\":\"\\u22E3\",\"NotSubset\":\"\\u2282\\u20D2\",\"NotSubsetEqual\":\"\\u2288\",\"NotSucceeds\":\"\\u2281\",\"NotSucceedsEqual\":\"\\u2AB0\\u0338\",\"NotSucceedsSlantEqual\":\"\\u22E1\",\"NotSucceedsTilde\":\"\\u227F\\u0338\",\"NotSuperset\":\"\\u2283\\u20D2\",\"NotSupersetEqual\":\"\\u2289\",\"NotTilde\":\"\\u2241\",\"NotTildeEqual\":\"\\u2244\",\"NotTildeFullEqual\":\"\\u2247\",\"NotTildeTilde\":\"\\u2249\",\"NotVerticalBar\":\"\\u2224\",\"nparallel\":\"\\u2226\",\"npar\":\"\\u2226\",\"nparsl\":\"\\u2AFD\\u20E5\",\"npart\":\"\\u2202\\u0338\",\"npolint\":\"\\u2A14\",\"npr\":\"\\u2280\",\"nprcue\":\"\\u22E0\",\"nprec\":\"\\u2280\",\"npreceq\":\"\\u2AAF\\u0338\",\"npre\":\"\\u2AAF\\u0338\",\"nrarrc\":\"\\u2933\\u0338\",\"nrarr\":\"\\u219B\",\"nrArr\":\"\\u21CF\",\"nrarrw\":\"\\u219D\\u0338\",\"nrightarrow\":\"\\u219B\",\"nRightarrow\":\"\\u21CF\",\"nrtri\":\"\\u22EB\",\"nrtrie\":\"\\u22ED\",\"nsc\":\"\\u2281\",\"nsccue\":\"\\u22E1\",\"nsce\":\"\\u2AB0\\u0338\",\"Nscr\":\"\\uD835\\uDCA9\",\"nscr\":\"\\uD835\\uDCC3\",\"nshortmid\":\"\\u2224\",\"nshortparallel\":\"\\u2226\",\"nsim\":\"\\u2241\",\"nsime\":\"\\u2244\",\"nsimeq\":\"\\u2244\",\"nsmid\":\"\\u2224\",\"nspar\":\"\\u2226\",\"nsqsube\":\"\\u22E2\",\"nsqsupe\":\"\\u22E3\",\"nsub\":\"\\u2284\",\"nsubE\":\"\\u2AC5\\u0338\",\"nsube\":\"\\u2288\",\"nsubset\":\"\\u2282\\u20D2\",\"nsubseteq\":\"\\u2288\",\"nsubseteqq\":\"\\u2AC5\\u0338\",\"nsucc\":\"\\u2281\",\"nsucceq\":\"\\u2AB0\\u0338\",\"nsup\":\"\\u2285\",\"nsupE\":\"\\u2AC6\\u0338\",\"nsupe\":\"\\u2289\",\"nsupset\":\"\\u2283\\u20D2\",\"nsupseteq\":\"\\u2289\",\"nsupseteqq\":\"\\u2AC6\\u0338\",\"ntgl\":\"\\u2279\",\"Ntilde\":\"\\u00D1\",\"ntilde\":\"\\u00F1\",\"ntlg\":\"\\u2278\",\"ntriangleleft\":\"\\u22EA\",\"ntrianglelefteq\":\"\\u22EC\",\"ntriangleright\":\"\\u22EB\",\"ntrianglerighteq\":\"\\u22ED\",\"Nu\":\"\\u039D\",\"nu\":\"\\u03BD\",\"num\":\"#\",\"numero\":\"\\u2116\",\"numsp\":\"\\u2007\",\"nvap\":\"\\u224D\\u20D2\",\"nvdash\":\"\\u22AC\",\"nvDash\":\"\\u22AD\",\"nVdash\":\"\\u22AE\",\"nVDash\":\"\\u22AF\",\"nvge\":\"\\u2265\\u20D2\",\"nvgt\":\">\\u20D2\",\"nvHarr\":\"\\u2904\",\"nvinfin\":\"\\u29DE\",\"nvlArr\":\"\\u2902\",\"nvle\":\"\\u2264\\u20D2\",\"nvlt\":\"<\\u20D2\",\"nvltrie\":\"\\u22B4\\u20D2\",\"nvrArr\":\"\\u2903\",\"nvrtrie\":\"\\u22B5\\u20D2\",\"nvsim\":\"\\u223C\\u20D2\",\"nwarhk\":\"\\u2923\",\"nwarr\":\"\\u2196\",\"nwArr\":\"\\u21D6\",\"nwarrow\":\"\\u2196\",\"nwnear\":\"\\u2927\",\"Oacute\":\"\\u00D3\",\"oacute\":\"\\u00F3\",\"oast\":\"\\u229B\",\"Ocirc\":\"\\u00D4\",\"ocirc\":\"\\u00F4\",\"ocir\":\"\\u229A\",\"Ocy\":\"\\u041E\",\"ocy\":\"\\u043E\",\"odash\":\"\\u229D\",\"Odblac\":\"\\u0150\",\"odblac\":\"\\u0151\",\"odiv\":\"\\u2A38\",\"odot\":\"\\u2299\",\"odsold\":\"\\u29BC\",\"OElig\":\"\\u0152\",\"oelig\":\"\\u0153\",\"ofcir\":\"\\u29BF\",\"Ofr\":\"\\uD835\\uDD12\",\"ofr\":\"\\uD835\\uDD2C\",\"ogon\":\"\\u02DB\",\"Ograve\":\"\\u00D2\",\"ograve\":\"\\u00F2\",\"ogt\":\"\\u29C1\",\"ohbar\":\"\\u29B5\",\"ohm\":\"\\u03A9\",\"oint\":\"\\u222E\",\"olarr\":\"\\u21BA\",\"olcir\":\"\\u29BE\",\"olcross\":\"\\u29BB\",\"oline\":\"\\u203E\",\"olt\":\"\\u29C0\",\"Omacr\":\"\\u014C\",\"omacr\":\"\\u014D\",\"Omega\":\"\\u03A9\",\"omega\":\"\\u03C9\",\"Omicron\":\"\\u039F\",\"omicron\":\"\\u03BF\",\"omid\":\"\\u29B6\",\"ominus\":\"\\u2296\",\"Oopf\":\"\\uD835\\uDD46\",\"oopf\":\"\\uD835\\uDD60\",\"opar\":\"\\u29B7\",\"OpenCurlyDoubleQuote\":\"\\u201C\",\"OpenCurlyQuote\":\"\\u2018\",\"operp\":\"\\u29B9\",\"oplus\":\"\\u2295\",\"orarr\":\"\\u21BB\",\"Or\":\"\\u2A54\",\"or\":\"\\u2228\",\"ord\":\"\\u2A5D\",\"order\":\"\\u2134\",\"orderof\":\"\\u2134\",\"ordf\":\"\\u00AA\",\"ordm\":\"\\u00BA\",\"origof\":\"\\u22B6\",\"oror\":\"\\u2A56\",\"orslope\":\"\\u2A57\",\"orv\":\"\\u2A5B\",\"oS\":\"\\u24C8\",\"Oscr\":\"\\uD835\\uDCAA\",\"oscr\":\"\\u2134\",\"Oslash\":\"\\u00D8\",\"oslash\":\"\\u00F8\",\"osol\":\"\\u2298\",\"Otilde\":\"\\u00D5\",\"otilde\":\"\\u00F5\",\"otimesas\":\"\\u2A36\",\"Otimes\":\"\\u2A37\",\"otimes\":\"\\u2297\",\"Ouml\":\"\\u00D6\",\"ouml\":\"\\u00F6\",\"ovbar\":\"\\u233D\",\"OverBar\":\"\\u203E\",\"OverBrace\":\"\\u23DE\",\"OverBracket\":\"\\u23B4\",\"OverParenthesis\":\"\\u23DC\",\"para\":\"\\u00B6\",\"parallel\":\"\\u2225\",\"par\":\"\\u2225\",\"parsim\":\"\\u2AF3\",\"parsl\":\"\\u2AFD\",\"part\":\"\\u2202\",\"PartialD\":\"\\u2202\",\"Pcy\":\"\\u041F\",\"pcy\":\"\\u043F\",\"percnt\":\"%\",\"period\":\".\",\"permil\":\"\\u2030\",\"perp\":\"\\u22A5\",\"pertenk\":\"\\u2031\",\"Pfr\":\"\\uD835\\uDD13\",\"pfr\":\"\\uD835\\uDD2D\",\"Phi\":\"\\u03A6\",\"phi\":\"\\u03C6\",\"phiv\":\"\\u03D5\",\"phmmat\":\"\\u2133\",\"phone\":\"\\u260E\",\"Pi\":\"\\u03A0\",\"pi\":\"\\u03C0\",\"pitchfork\":\"\\u22D4\",\"piv\":\"\\u03D6\",\"planck\":\"\\u210F\",\"planckh\":\"\\u210E\",\"plankv\":\"\\u210F\",\"plusacir\":\"\\u2A23\",\"plusb\":\"\\u229E\",\"pluscir\":\"\\u2A22\",\"plus\":\"+\",\"plusdo\":\"\\u2214\",\"plusdu\":\"\\u2A25\",\"pluse\":\"\\u2A72\",\"PlusMinus\":\"\\u00B1\",\"plusmn\":\"\\u00B1\",\"plussim\":\"\\u2A26\",\"plustwo\":\"\\u2A27\",\"pm\":\"\\u00B1\",\"Poincareplane\":\"\\u210C\",\"pointint\":\"\\u2A15\",\"popf\":\"\\uD835\\uDD61\",\"Popf\":\"\\u2119\",\"pound\":\"\\u00A3\",\"prap\":\"\\u2AB7\",\"Pr\":\"\\u2ABB\",\"pr\":\"\\u227A\",\"prcue\":\"\\u227C\",\"precapprox\":\"\\u2AB7\",\"prec\":\"\\u227A\",\"preccurlyeq\":\"\\u227C\",\"Precedes\":\"\\u227A\",\"PrecedesEqual\":\"\\u2AAF\",\"PrecedesSlantEqual\":\"\\u227C\",\"PrecedesTilde\":\"\\u227E\",\"preceq\":\"\\u2AAF\",\"precnapprox\":\"\\u2AB9\",\"precneqq\":\"\\u2AB5\",\"precnsim\":\"\\u22E8\",\"pre\":\"\\u2AAF\",\"prE\":\"\\u2AB3\",\"precsim\":\"\\u227E\",\"prime\":\"\\u2032\",\"Prime\":\"\\u2033\",\"primes\":\"\\u2119\",\"prnap\":\"\\u2AB9\",\"prnE\":\"\\u2AB5\",\"prnsim\":\"\\u22E8\",\"prod\":\"\\u220F\",\"Product\":\"\\u220F\",\"profalar\":\"\\u232E\",\"profline\":\"\\u2312\",\"profsurf\":\"\\u2313\",\"prop\":\"\\u221D\",\"Proportional\":\"\\u221D\",\"Proportion\":\"\\u2237\",\"propto\":\"\\u221D\",\"prsim\":\"\\u227E\",\"prurel\":\"\\u22B0\",\"Pscr\":\"\\uD835\\uDCAB\",\"pscr\":\"\\uD835\\uDCC5\",\"Psi\":\"\\u03A8\",\"psi\":\"\\u03C8\",\"puncsp\":\"\\u2008\",\"Qfr\":\"\\uD835\\uDD14\",\"qfr\":\"\\uD835\\uDD2E\",\"qint\":\"\\u2A0C\",\"qopf\":\"\\uD835\\uDD62\",\"Qopf\":\"\\u211A\",\"qprime\":\"\\u2057\",\"Qscr\":\"\\uD835\\uDCAC\",\"qscr\":\"\\uD835\\uDCC6\",\"quaternions\":\"\\u210D\",\"quatint\":\"\\u2A16\",\"quest\":\"?\",\"questeq\":\"\\u225F\",\"quot\":\"\\\"\",\"QUOT\":\"\\\"\",\"rAarr\":\"\\u21DB\",\"race\":\"\\u223D\\u0331\",\"Racute\":\"\\u0154\",\"racute\":\"\\u0155\",\"radic\":\"\\u221A\",\"raemptyv\":\"\\u29B3\",\"rang\":\"\\u27E9\",\"Rang\":\"\\u27EB\",\"rangd\":\"\\u2992\",\"range\":\"\\u29A5\",\"rangle\":\"\\u27E9\",\"raquo\":\"\\u00BB\",\"rarrap\":\"\\u2975\",\"rarrb\":\"\\u21E5\",\"rarrbfs\":\"\\u2920\",\"rarrc\":\"\\u2933\",\"rarr\":\"\\u2192\",\"Rarr\":\"\\u21A0\",\"rArr\":\"\\u21D2\",\"rarrfs\":\"\\u291E\",\"rarrhk\":\"\\u21AA\",\"rarrlp\":\"\\u21AC\",\"rarrpl\":\"\\u2945\",\"rarrsim\":\"\\u2974\",\"Rarrtl\":\"\\u2916\",\"rarrtl\":\"\\u21A3\",\"rarrw\":\"\\u219D\",\"ratail\":\"\\u291A\",\"rAtail\":\"\\u291C\",\"ratio\":\"\\u2236\",\"rationals\":\"\\u211A\",\"rbarr\":\"\\u290D\",\"rBarr\":\"\\u290F\",\"RBarr\":\"\\u2910\",\"rbbrk\":\"\\u2773\",\"rbrace\":\"}\",\"rbrack\":\"]\",\"rbrke\":\"\\u298C\",\"rbrksld\":\"\\u298E\",\"rbrkslu\":\"\\u2990\",\"Rcaron\":\"\\u0158\",\"rcaron\":\"\\u0159\",\"Rcedil\":\"\\u0156\",\"rcedil\":\"\\u0157\",\"rceil\":\"\\u2309\",\"rcub\":\"}\",\"Rcy\":\"\\u0420\",\"rcy\":\"\\u0440\",\"rdca\":\"\\u2937\",\"rdldhar\":\"\\u2969\",\"rdquo\":\"\\u201D\",\"rdquor\":\"\\u201D\",\"rdsh\":\"\\u21B3\",\"real\":\"\\u211C\",\"realine\":\"\\u211B\",\"realpart\":\"\\u211C\",\"reals\":\"\\u211D\",\"Re\":\"\\u211C\",\"rect\":\"\\u25AD\",\"reg\":\"\\u00AE\",\"REG\":\"\\u00AE\",\"ReverseElement\":\"\\u220B\",\"ReverseEquilibrium\":\"\\u21CB\",\"ReverseUpEquilibrium\":\"\\u296F\",\"rfisht\":\"\\u297D\",\"rfloor\":\"\\u230B\",\"rfr\":\"\\uD835\\uDD2F\",\"Rfr\":\"\\u211C\",\"rHar\":\"\\u2964\",\"rhard\":\"\\u21C1\",\"rharu\":\"\\u21C0\",\"rharul\":\"\\u296C\",\"Rho\":\"\\u03A1\",\"rho\":\"\\u03C1\",\"rhov\":\"\\u03F1\",\"RightAngleBracket\":\"\\u27E9\",\"RightArrowBar\":\"\\u21E5\",\"rightarrow\":\"\\u2192\",\"RightArrow\":\"\\u2192\",\"Rightarrow\":\"\\u21D2\",\"RightArrowLeftArrow\":\"\\u21C4\",\"rightarrowtail\":\"\\u21A3\",\"RightCeiling\":\"\\u2309\",\"RightDoubleBracket\":\"\\u27E7\",\"RightDownTeeVector\":\"\\u295D\",\"RightDownVectorBar\":\"\\u2955\",\"RightDownVector\":\"\\u21C2\",\"RightFloor\":\"\\u230B\",\"rightharpoondown\":\"\\u21C1\",\"rightharpoonup\":\"\\u21C0\",\"rightleftarrows\":\"\\u21C4\",\"rightleftharpoons\":\"\\u21CC\",\"rightrightarrows\":\"\\u21C9\",\"rightsquigarrow\":\"\\u219D\",\"RightTeeArrow\":\"\\u21A6\",\"RightTee\":\"\\u22A2\",\"RightTeeVector\":\"\\u295B\",\"rightthreetimes\":\"\\u22CC\",\"RightTriangleBar\":\"\\u29D0\",\"RightTriangle\":\"\\u22B3\",\"RightTriangleEqual\":\"\\u22B5\",\"RightUpDownVector\":\"\\u294F\",\"RightUpTeeVector\":\"\\u295C\",\"RightUpVectorBar\":\"\\u2954\",\"RightUpVector\":\"\\u21BE\",\"RightVectorBar\":\"\\u2953\",\"RightVector\":\"\\u21C0\",\"ring\":\"\\u02DA\",\"risingdotseq\":\"\\u2253\",\"rlarr\":\"\\u21C4\",\"rlhar\":\"\\u21CC\",\"rlm\":\"\\u200F\",\"rmoustache\":\"\\u23B1\",\"rmoust\":\"\\u23B1\",\"rnmid\":\"\\u2AEE\",\"roang\":\"\\u27ED\",\"roarr\":\"\\u21FE\",\"robrk\":\"\\u27E7\",\"ropar\":\"\\u2986\",\"ropf\":\"\\uD835\\uDD63\",\"Ropf\":\"\\u211D\",\"roplus\":\"\\u2A2E\",\"rotimes\":\"\\u2A35\",\"RoundImplies\":\"\\u2970\",\"rpar\":\")\",\"rpargt\":\"\\u2994\",\"rppolint\":\"\\u2A12\",\"rrarr\":\"\\u21C9\",\"Rrightarrow\":\"\\u21DB\",\"rsaquo\":\"\\u203A\",\"rscr\":\"\\uD835\\uDCC7\",\"Rscr\":\"\\u211B\",\"rsh\":\"\\u21B1\",\"Rsh\":\"\\u21B1\",\"rsqb\":\"]\",\"rsquo\":\"\\u2019\",\"rsquor\":\"\\u2019\",\"rthree\":\"\\u22CC\",\"rtimes\":\"\\u22CA\",\"rtri\":\"\\u25B9\",\"rtrie\":\"\\u22B5\",\"rtrif\":\"\\u25B8\",\"rtriltri\":\"\\u29CE\",\"RuleDelayed\":\"\\u29F4\",\"ruluhar\":\"\\u2968\",\"rx\":\"\\u211E\",\"Sacute\":\"\\u015A\",\"sacute\":\"\\u015B\",\"sbquo\":\"\\u201A\",\"scap\":\"\\u2AB8\",\"Scaron\":\"\\u0160\",\"scaron\":\"\\u0161\",\"Sc\":\"\\u2ABC\",\"sc\":\"\\u227B\",\"sccue\":\"\\u227D\",\"sce\":\"\\u2AB0\",\"scE\":\"\\u2AB4\",\"Scedil\":\"\\u015E\",\"scedil\":\"\\u015F\",\"Scirc\":\"\\u015C\",\"scirc\":\"\\u015D\",\"scnap\":\"\\u2ABA\",\"scnE\":\"\\u2AB6\",\"scnsim\":\"\\u22E9\",\"scpolint\":\"\\u2A13\",\"scsim\":\"\\u227F\",\"Scy\":\"\\u0421\",\"scy\":\"\\u0441\",\"sdotb\":\"\\u22A1\",\"sdot\":\"\\u22C5\",\"sdote\":\"\\u2A66\",\"searhk\":\"\\u2925\",\"searr\":\"\\u2198\",\"seArr\":\"\\u21D8\",\"searrow\":\"\\u2198\",\"sect\":\"\\u00A7\",\"semi\":\";\",\"seswar\":\"\\u2929\",\"setminus\":\"\\u2216\",\"setmn\":\"\\u2216\",\"sext\":\"\\u2736\",\"Sfr\":\"\\uD835\\uDD16\",\"sfr\":\"\\uD835\\uDD30\",\"sfrown\":\"\\u2322\",\"sharp\":\"\\u266F\",\"SHCHcy\":\"\\u0429\",\"shchcy\":\"\\u0449\",\"SHcy\":\"\\u0428\",\"shcy\":\"\\u0448\",\"ShortDownArrow\":\"\\u2193\",\"ShortLeftArrow\":\"\\u2190\",\"shortmid\":\"\\u2223\",\"shortparallel\":\"\\u2225\",\"ShortRightArrow\":\"\\u2192\",\"ShortUpArrow\":\"\\u2191\",\"shy\":\"\\u00AD\",\"Sigma\":\"\\u03A3\",\"sigma\":\"\\u03C3\",\"sigmaf\":\"\\u03C2\",\"sigmav\":\"\\u03C2\",\"sim\":\"\\u223C\",\"simdot\":\"\\u2A6A\",\"sime\":\"\\u2243\",\"simeq\":\"\\u2243\",\"simg\":\"\\u2A9E\",\"simgE\":\"\\u2AA0\",\"siml\":\"\\u2A9D\",\"simlE\":\"\\u2A9F\",\"simne\":\"\\u2246\",\"simplus\":\"\\u2A24\",\"simrarr\":\"\\u2972\",\"slarr\":\"\\u2190\",\"SmallCircle\":\"\\u2218\",\"smallsetminus\":\"\\u2216\",\"smashp\":\"\\u2A33\",\"smeparsl\":\"\\u29E4\",\"smid\":\"\\u2223\",\"smile\":\"\\u2323\",\"smt\":\"\\u2AAA\",\"smte\":\"\\u2AAC\",\"smtes\":\"\\u2AAC\\uFE00\",\"SOFTcy\":\"\\u042C\",\"softcy\":\"\\u044C\",\"solbar\":\"\\u233F\",\"solb\":\"\\u29C4\",\"sol\":\"/\",\"Sopf\":\"\\uD835\\uDD4A\",\"sopf\":\"\\uD835\\uDD64\",\"spades\":\"\\u2660\",\"spadesuit\":\"\\u2660\",\"spar\":\"\\u2225\",\"sqcap\":\"\\u2293\",\"sqcaps\":\"\\u2293\\uFE00\",\"sqcup\":\"\\u2294\",\"sqcups\":\"\\u2294\\uFE00\",\"Sqrt\":\"\\u221A\",\"sqsub\":\"\\u228F\",\"sqsube\":\"\\u2291\",\"sqsubset\":\"\\u228F\",\"sqsubseteq\":\"\\u2291\",\"sqsup\":\"\\u2290\",\"sqsupe\":\"\\u2292\",\"sqsupset\":\"\\u2290\",\"sqsupseteq\":\"\\u2292\",\"square\":\"\\u25A1\",\"Square\":\"\\u25A1\",\"SquareIntersection\":\"\\u2293\",\"SquareSubset\":\"\\u228F\",\"SquareSubsetEqual\":\"\\u2291\",\"SquareSuperset\":\"\\u2290\",\"SquareSupersetEqual\":\"\\u2292\",\"SquareUnion\":\"\\u2294\",\"squarf\":\"\\u25AA\",\"squ\":\"\\u25A1\",\"squf\":\"\\u25AA\",\"srarr\":\"\\u2192\",\"Sscr\":\"\\uD835\\uDCAE\",\"sscr\":\"\\uD835\\uDCC8\",\"ssetmn\":\"\\u2216\",\"ssmile\":\"\\u2323\",\"sstarf\":\"\\u22C6\",\"Star\":\"\\u22C6\",\"star\":\"\\u2606\",\"starf\":\"\\u2605\",\"straightepsilon\":\"\\u03F5\",\"straightphi\":\"\\u03D5\",\"strns\":\"\\u00AF\",\"sub\":\"\\u2282\",\"Sub\":\"\\u22D0\",\"subdot\":\"\\u2ABD\",\"subE\":\"\\u2AC5\",\"sube\":\"\\u2286\",\"subedot\":\"\\u2AC3\",\"submult\":\"\\u2AC1\",\"subnE\":\"\\u2ACB\",\"subne\":\"\\u228A\",\"subplus\":\"\\u2ABF\",\"subrarr\":\"\\u2979\",\"subset\":\"\\u2282\",\"Subset\":\"\\u22D0\",\"subseteq\":\"\\u2286\",\"subseteqq\":\"\\u2AC5\",\"SubsetEqual\":\"\\u2286\",\"subsetneq\":\"\\u228A\",\"subsetneqq\":\"\\u2ACB\",\"subsim\":\"\\u2AC7\",\"subsub\":\"\\u2AD5\",\"subsup\":\"\\u2AD3\",\"succapprox\":\"\\u2AB8\",\"succ\":\"\\u227B\",\"succcurlyeq\":\"\\u227D\",\"Succeeds\":\"\\u227B\",\"SucceedsEqual\":\"\\u2AB0\",\"SucceedsSlantEqual\":\"\\u227D\",\"SucceedsTilde\":\"\\u227F\",\"succeq\":\"\\u2AB0\",\"succnapprox\":\"\\u2ABA\",\"succneqq\":\"\\u2AB6\",\"succnsim\":\"\\u22E9\",\"succsim\":\"\\u227F\",\"SuchThat\":\"\\u220B\",\"sum\":\"\\u2211\",\"Sum\":\"\\u2211\",\"sung\":\"\\u266A\",\"sup1\":\"\\u00B9\",\"sup2\":\"\\u00B2\",\"sup3\":\"\\u00B3\",\"sup\":\"\\u2283\",\"Sup\":\"\\u22D1\",\"supdot\":\"\\u2ABE\",\"supdsub\":\"\\u2AD8\",\"supE\":\"\\u2AC6\",\"supe\":\"\\u2287\",\"supedot\":\"\\u2AC4\",\"Superset\":\"\\u2283\",\"SupersetEqual\":\"\\u2287\",\"suphsol\":\"\\u27C9\",\"suphsub\":\"\\u2AD7\",\"suplarr\":\"\\u297B\",\"supmult\":\"\\u2AC2\",\"supnE\":\"\\u2ACC\",\"supne\":\"\\u228B\",\"supplus\":\"\\u2AC0\",\"supset\":\"\\u2283\",\"Supset\":\"\\u22D1\",\"supseteq\":\"\\u2287\",\"supseteqq\":\"\\u2AC6\",\"supsetneq\":\"\\u228B\",\"supsetneqq\":\"\\u2ACC\",\"supsim\":\"\\u2AC8\",\"supsub\":\"\\u2AD4\",\"supsup\":\"\\u2AD6\",\"swarhk\":\"\\u2926\",\"swarr\":\"\\u2199\",\"swArr\":\"\\u21D9\",\"swarrow\":\"\\u2199\",\"swnwar\":\"\\u292A\",\"szlig\":\"\\u00DF\",\"Tab\":\"\\t\",\"target\":\"\\u2316\",\"Tau\":\"\\u03A4\",\"tau\":\"\\u03C4\",\"tbrk\":\"\\u23B4\",\"Tcaron\":\"\\u0164\",\"tcaron\":\"\\u0165\",\"Tcedil\":\"\\u0162\",\"tcedil\":\"\\u0163\",\"Tcy\":\"\\u0422\",\"tcy\":\"\\u0442\",\"tdot\":\"\\u20DB\",\"telrec\":\"\\u2315\",\"Tfr\":\"\\uD835\\uDD17\",\"tfr\":\"\\uD835\\uDD31\",\"there4\":\"\\u2234\",\"therefore\":\"\\u2234\",\"Therefore\":\"\\u2234\",\"Theta\":\"\\u0398\",\"theta\":\"\\u03B8\",\"thetasym\":\"\\u03D1\",\"thetav\":\"\\u03D1\",\"thickapprox\":\"\\u2248\",\"thicksim\":\"\\u223C\",\"ThickSpace\":\"\\u205F\\u200A\",\"ThinSpace\":\"\\u2009\",\"thinsp\":\"\\u2009\",\"thkap\":\"\\u2248\",\"thksim\":\"\\u223C\",\"THORN\":\"\\u00DE\",\"thorn\":\"\\u00FE\",\"tilde\":\"\\u02DC\",\"Tilde\":\"\\u223C\",\"TildeEqual\":\"\\u2243\",\"TildeFullEqual\":\"\\u2245\",\"TildeTilde\":\"\\u2248\",\"timesbar\":\"\\u2A31\",\"timesb\":\"\\u22A0\",\"times\":\"\\u00D7\",\"timesd\":\"\\u2A30\",\"tint\":\"\\u222D\",\"toea\":\"\\u2928\",\"topbot\":\"\\u2336\",\"topcir\":\"\\u2AF1\",\"top\":\"\\u22A4\",\"Topf\":\"\\uD835\\uDD4B\",\"topf\":\"\\uD835\\uDD65\",\"topfork\":\"\\u2ADA\",\"tosa\":\"\\u2929\",\"tprime\":\"\\u2034\",\"trade\":\"\\u2122\",\"TRADE\":\"\\u2122\",\"triangle\":\"\\u25B5\",\"triangledown\":\"\\u25BF\",\"triangleleft\":\"\\u25C3\",\"trianglelefteq\":\"\\u22B4\",\"triangleq\":\"\\u225C\",\"triangleright\":\"\\u25B9\",\"trianglerighteq\":\"\\u22B5\",\"tridot\":\"\\u25EC\",\"trie\":\"\\u225C\",\"triminus\":\"\\u2A3A\",\"TripleDot\":\"\\u20DB\",\"triplus\":\"\\u2A39\",\"trisb\":\"\\u29CD\",\"tritime\":\"\\u2A3B\",\"trpezium\":\"\\u23E2\",\"Tscr\":\"\\uD835\\uDCAF\",\"tscr\":\"\\uD835\\uDCC9\",\"TScy\":\"\\u0426\",\"tscy\":\"\\u0446\",\"TSHcy\":\"\\u040B\",\"tshcy\":\"\\u045B\",\"Tstrok\":\"\\u0166\",\"tstrok\":\"\\u0167\",\"twixt\":\"\\u226C\",\"twoheadleftarrow\":\"\\u219E\",\"twoheadrightarrow\":\"\\u21A0\",\"Uacute\":\"\\u00DA\",\"uacute\":\"\\u00FA\",\"uarr\":\"\\u2191\",\"Uarr\":\"\\u219F\",\"uArr\":\"\\u21D1\",\"Uarrocir\":\"\\u2949\",\"Ubrcy\":\"\\u040E\",\"ubrcy\":\"\\u045E\",\"Ubreve\":\"\\u016C\",\"ubreve\":\"\\u016D\",\"Ucirc\":\"\\u00DB\",\"ucirc\":\"\\u00FB\",\"Ucy\":\"\\u0423\",\"ucy\":\"\\u0443\",\"udarr\":\"\\u21C5\",\"Udblac\":\"\\u0170\",\"udblac\":\"\\u0171\",\"udhar\":\"\\u296E\",\"ufisht\":\"\\u297E\",\"Ufr\":\"\\uD835\\uDD18\",\"ufr\":\"\\uD835\\uDD32\",\"Ugrave\":\"\\u00D9\",\"ugrave\":\"\\u00F9\",\"uHar\":\"\\u2963\",\"uharl\":\"\\u21BF\",\"uharr\":\"\\u21BE\",\"uhblk\":\"\\u2580\",\"ulcorn\":\"\\u231C\",\"ulcorner\":\"\\u231C\",\"ulcrop\":\"\\u230F\",\"ultri\":\"\\u25F8\",\"Umacr\":\"\\u016A\",\"umacr\":\"\\u016B\",\"uml\":\"\\u00A8\",\"UnderBar\":\"_\",\"UnderBrace\":\"\\u23DF\",\"UnderBracket\":\"\\u23B5\",\"UnderParenthesis\":\"\\u23DD\",\"Union\":\"\\u22C3\",\"UnionPlus\":\"\\u228E\",\"Uogon\":\"\\u0172\",\"uogon\":\"\\u0173\",\"Uopf\":\"\\uD835\\uDD4C\",\"uopf\":\"\\uD835\\uDD66\",\"UpArrowBar\":\"\\u2912\",\"uparrow\":\"\\u2191\",\"UpArrow\":\"\\u2191\",\"Uparrow\":\"\\u21D1\",\"UpArrowDownArrow\":\"\\u21C5\",\"updownarrow\":\"\\u2195\",\"UpDownArrow\":\"\\u2195\",\"Updownarrow\":\"\\u21D5\",\"UpEquilibrium\":\"\\u296E\",\"upharpoonleft\":\"\\u21BF\",\"upharpoonright\":\"\\u21BE\",\"uplus\":\"\\u228E\",\"UpperLeftArrow\":\"\\u2196\",\"UpperRightArrow\":\"\\u2197\",\"upsi\":\"\\u03C5\",\"Upsi\":\"\\u03D2\",\"upsih\":\"\\u03D2\",\"Upsilon\":\"\\u03A5\",\"upsilon\":\"\\u03C5\",\"UpTeeArrow\":\"\\u21A5\",\"UpTee\":\"\\u22A5\",\"upuparrows\":\"\\u21C8\",\"urcorn\":\"\\u231D\",\"urcorner\":\"\\u231D\",\"urcrop\":\"\\u230E\",\"Uring\":\"\\u016E\",\"uring\":\"\\u016F\",\"urtri\":\"\\u25F9\",\"Uscr\":\"\\uD835\\uDCB0\",\"uscr\":\"\\uD835\\uDCCA\",\"utdot\":\"\\u22F0\",\"Utilde\":\"\\u0168\",\"utilde\":\"\\u0169\",\"utri\":\"\\u25B5\",\"utrif\":\"\\u25B4\",\"uuarr\":\"\\u21C8\",\"Uuml\":\"\\u00DC\",\"uuml\":\"\\u00FC\",\"uwangle\":\"\\u29A7\",\"vangrt\":\"\\u299C\",\"varepsilon\":\"\\u03F5\",\"varkappa\":\"\\u03F0\",\"varnothing\":\"\\u2205\",\"varphi\":\"\\u03D5\",\"varpi\":\"\\u03D6\",\"varpropto\":\"\\u221D\",\"varr\":\"\\u2195\",\"vArr\":\"\\u21D5\",\"varrho\":\"\\u03F1\",\"varsigma\":\"\\u03C2\",\"varsubsetneq\":\"\\u228A\\uFE00\",\"varsubsetneqq\":\"\\u2ACB\\uFE00\",\"varsupsetneq\":\"\\u228B\\uFE00\",\"varsupsetneqq\":\"\\u2ACC\\uFE00\",\"vartheta\":\"\\u03D1\",\"vartriangleleft\":\"\\u22B2\",\"vartriangleright\":\"\\u22B3\",\"vBar\":\"\\u2AE8\",\"Vbar\":\"\\u2AEB\",\"vBarv\":\"\\u2AE9\",\"Vcy\":\"\\u0412\",\"vcy\":\"\\u0432\",\"vdash\":\"\\u22A2\",\"vDash\":\"\\u22A8\",\"Vdash\":\"\\u22A9\",\"VDash\":\"\\u22AB\",\"Vdashl\":\"\\u2AE6\",\"veebar\":\"\\u22BB\",\"vee\":\"\\u2228\",\"Vee\":\"\\u22C1\",\"veeeq\":\"\\u225A\",\"vellip\":\"\\u22EE\",\"verbar\":\"|\",\"Verbar\":\"\\u2016\",\"vert\":\"|\",\"Vert\":\"\\u2016\",\"VerticalBar\":\"\\u2223\",\"VerticalLine\":\"|\",\"VerticalSeparator\":\"\\u2758\",\"VerticalTilde\":\"\\u2240\",\"VeryThinSpace\":\"\\u200A\",\"Vfr\":\"\\uD835\\uDD19\",\"vfr\":\"\\uD835\\uDD33\",\"vltri\":\"\\u22B2\",\"vnsub\":\"\\u2282\\u20D2\",\"vnsup\":\"\\u2283\\u20D2\",\"Vopf\":\"\\uD835\\uDD4D\",\"vopf\":\"\\uD835\\uDD67\",\"vprop\":\"\\u221D\",\"vrtri\":\"\\u22B3\",\"Vscr\":\"\\uD835\\uDCB1\",\"vscr\":\"\\uD835\\uDCCB\",\"vsubnE\":\"\\u2ACB\\uFE00\",\"vsubne\":\"\\u228A\\uFE00\",\"vsupnE\":\"\\u2ACC\\uFE00\",\"vsupne\":\"\\u228B\\uFE00\",\"Vvdash\":\"\\u22AA\",\"vzigzag\":\"\\u299A\",\"Wcirc\":\"\\u0174\",\"wcirc\":\"\\u0175\",\"wedbar\":\"\\u2A5F\",\"wedge\":\"\\u2227\",\"Wedge\":\"\\u22C0\",\"wedgeq\":\"\\u2259\",\"weierp\":\"\\u2118\",\"Wfr\":\"\\uD835\\uDD1A\",\"wfr\":\"\\uD835\\uDD34\",\"Wopf\":\"\\uD835\\uDD4E\",\"wopf\":\"\\uD835\\uDD68\",\"wp\":\"\\u2118\",\"wr\":\"\\u2240\",\"wreath\":\"\\u2240\",\"Wscr\":\"\\uD835\\uDCB2\",\"wscr\":\"\\uD835\\uDCCC\",\"xcap\":\"\\u22C2\",\"xcirc\":\"\\u25EF\",\"xcup\":\"\\u22C3\",\"xdtri\":\"\\u25BD\",\"Xfr\":\"\\uD835\\uDD1B\",\"xfr\":\"\\uD835\\uDD35\",\"xharr\":\"\\u27F7\",\"xhArr\":\"\\u27FA\",\"Xi\":\"\\u039E\",\"xi\":\"\\u03BE\",\"xlarr\":\"\\u27F5\",\"xlArr\":\"\\u27F8\",\"xmap\":\"\\u27FC\",\"xnis\":\"\\u22FB\",\"xodot\":\"\\u2A00\",\"Xopf\":\"\\uD835\\uDD4F\",\"xopf\":\"\\uD835\\uDD69\",\"xoplus\":\"\\u2A01\",\"xotime\":\"\\u2A02\",\"xrarr\":\"\\u27F6\",\"xrArr\":\"\\u27F9\",\"Xscr\":\"\\uD835\\uDCB3\",\"xscr\":\"\\uD835\\uDCCD\",\"xsqcup\":\"\\u2A06\",\"xuplus\":\"\\u2A04\",\"xutri\":\"\\u25B3\",\"xvee\":\"\\u22C1\",\"xwedge\":\"\\u22C0\",\"Yacute\":\"\\u00DD\",\"yacute\":\"\\u00FD\",\"YAcy\":\"\\u042F\",\"yacy\":\"\\u044F\",\"Ycirc\":\"\\u0176\",\"ycirc\":\"\\u0177\",\"Ycy\":\"\\u042B\",\"ycy\":\"\\u044B\",\"yen\":\"\\u00A5\",\"Yfr\":\"\\uD835\\uDD1C\",\"yfr\":\"\\uD835\\uDD36\",\"YIcy\":\"\\u0407\",\"yicy\":\"\\u0457\",\"Yopf\":\"\\uD835\\uDD50\",\"yopf\":\"\\uD835\\uDD6A\",\"Yscr\":\"\\uD835\\uDCB4\",\"yscr\":\"\\uD835\\uDCCE\",\"YUcy\":\"\\u042E\",\"yucy\":\"\\u044E\",\"yuml\":\"\\u00FF\",\"Yuml\":\"\\u0178\",\"Zacute\":\"\\u0179\",\"zacute\":\"\\u017A\",\"Zcaron\":\"\\u017D\",\"zcaron\":\"\\u017E\",\"Zcy\":\"\\u0417\",\"zcy\":\"\\u0437\",\"Zdot\":\"\\u017B\",\"zdot\":\"\\u017C\",\"zeetrf\":\"\\u2128\",\"ZeroWidthSpace\":\"\\u200B\",\"Zeta\":\"\\u0396\",\"zeta\":\"\\u03B6\",\"zfr\":\"\\uD835\\uDD37\",\"Zfr\":\"\\u2128\",\"ZHcy\":\"\\u0416\",\"zhcy\":\"\\u0436\",\"zigrarr\":\"\\u21DD\",\"zopf\":\"\\uD835\\uDD6B\",\"Zopf\":\"\\u2124\",\"Zscr\":\"\\uD835\\uDCB5\",\"zscr\":\"\\uD835\\uDCCF\",\"zwj\":\"\\u200D\",\"zwnj\":\"\\u200C\"}\n},{}],145:[function(require,module,exports){\nmodule.exports={\"Aacute\":\"\\u00C1\",\"aacute\":\"\\u00E1\",\"Acirc\":\"\\u00C2\",\"acirc\":\"\\u00E2\",\"acute\":\"\\u00B4\",\"AElig\":\"\\u00C6\",\"aelig\":\"\\u00E6\",\"Agrave\":\"\\u00C0\",\"agrave\":\"\\u00E0\",\"amp\":\"&\",\"AMP\":\"&\",\"Aring\":\"\\u00C5\",\"aring\":\"\\u00E5\",\"Atilde\":\"\\u00C3\",\"atilde\":\"\\u00E3\",\"Auml\":\"\\u00C4\",\"auml\":\"\\u00E4\",\"brvbar\":\"\\u00A6\",\"Ccedil\":\"\\u00C7\",\"ccedil\":\"\\u00E7\",\"cedil\":\"\\u00B8\",\"cent\":\"\\u00A2\",\"copy\":\"\\u00A9\",\"COPY\":\"\\u00A9\",\"curren\":\"\\u00A4\",\"deg\":\"\\u00B0\",\"divide\":\"\\u00F7\",\"Eacute\":\"\\u00C9\",\"eacute\":\"\\u00E9\",\"Ecirc\":\"\\u00CA\",\"ecirc\":\"\\u00EA\",\"Egrave\":\"\\u00C8\",\"egrave\":\"\\u00E8\",\"ETH\":\"\\u00D0\",\"eth\":\"\\u00F0\",\"Euml\":\"\\u00CB\",\"euml\":\"\\u00EB\",\"frac12\":\"\\u00BD\",\"frac14\":\"\\u00BC\",\"frac34\":\"\\u00BE\",\"gt\":\">\",\"GT\":\">\",\"Iacute\":\"\\u00CD\",\"iacute\":\"\\u00ED\",\"Icirc\":\"\\u00CE\",\"icirc\":\"\\u00EE\",\"iexcl\":\"\\u00A1\",\"Igrave\":\"\\u00CC\",\"igrave\":\"\\u00EC\",\"iquest\":\"\\u00BF\",\"Iuml\":\"\\u00CF\",\"iuml\":\"\\u00EF\",\"laquo\":\"\\u00AB\",\"lt\":\"<\",\"LT\":\"<\",\"macr\":\"\\u00AF\",\"micro\":\"\\u00B5\",\"middot\":\"\\u00B7\",\"nbsp\":\"\\u00A0\",\"not\":\"\\u00AC\",\"Ntilde\":\"\\u00D1\",\"ntilde\":\"\\u00F1\",\"Oacute\":\"\\u00D3\",\"oacute\":\"\\u00F3\",\"Ocirc\":\"\\u00D4\",\"ocirc\":\"\\u00F4\",\"Ograve\":\"\\u00D2\",\"ograve\":\"\\u00F2\",\"ordf\":\"\\u00AA\",\"ordm\":\"\\u00BA\",\"Oslash\":\"\\u00D8\",\"oslash\":\"\\u00F8\",\"Otilde\":\"\\u00D5\",\"otilde\":\"\\u00F5\",\"Ouml\":\"\\u00D6\",\"ouml\":\"\\u00F6\",\"para\":\"\\u00B6\",\"plusmn\":\"\\u00B1\",\"pound\":\"\\u00A3\",\"quot\":\"\\\"\",\"QUOT\":\"\\\"\",\"raquo\":\"\\u00BB\",\"reg\":\"\\u00AE\",\"REG\":\"\\u00AE\",\"sect\":\"\\u00A7\",\"shy\":\"\\u00AD\",\"sup1\":\"\\u00B9\",\"sup2\":\"\\u00B2\",\"sup3\":\"\\u00B3\",\"szlig\":\"\\u00DF\",\"THORN\":\"\\u00DE\",\"thorn\":\"\\u00FE\",\"times\":\"\\u00D7\",\"Uacute\":\"\\u00DA\",\"uacute\":\"\\u00FA\",\"Ucirc\":\"\\u00DB\",\"ucirc\":\"\\u00FB\",\"Ugrave\":\"\\u00D9\",\"ugrave\":\"\\u00F9\",\"uml\":\"\\u00A8\",\"Uuml\":\"\\u00DC\",\"uuml\":\"\\u00FC\",\"Yacute\":\"\\u00DD\",\"yacute\":\"\\u00FD\",\"yen\":\"\\u00A5\",\"yuml\":\"\\u00FF\"}\n},{}],146:[function(require,module,exports){\nmodule.exports={\"amp\":\"&\",\"apos\":\"'\",\"gt\":\">\",\"lt\":\"<\",\"quot\":\"\\\"\"}\n\n},{}],147:[function(require,module,exports){\n'use strict';\n\nvar OneVersionConstraint = require('individual/one-version');\n\nvar MY_VERSION = '7';\nOneVersionConstraint('ev-store', MY_VERSION);\n\nvar hashKey = '__EV_STORE_KEY@' + MY_VERSION;\n\nmodule.exports = EvStore;\n\nfunction EvStore(elem) {\n    var hash = elem[hashKey];\n\n    if (!hash) {\n        hash = elem[hashKey] = {};\n    }\n\n    return hash;\n}\n\n},{\"individual/one-version\":172}],148:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],149:[function(require,module,exports){\n(function (global){\nvar topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"min-document\":110}],150:[function(require,module,exports){\n/*!!\n * Hasher <http://github.com/millermedeiros/hasher>\n * @author Miller Medeiros\n * @version 1.2.0 (2013/11/11 03:18 PM)\n * Released under the MIT License\n */\n\n;(function () {\nvar factory = function(signals){\n\n/*jshint white:false*/\n/*global signals:false, window:false*/\n\n/**\n * Hasher\n * @namespace History Manager for rich-media applications.\n * @name hasher\n */\nvar hasher = (function(window){\n\n    //--------------------------------------------------------------------------------------\n    // Private Vars\n    //--------------------------------------------------------------------------------------\n\n    var\n\n        // frequency that it will check hash value on IE 6-7 since it doesn't\n        // support the hashchange event\n        POOL_INTERVAL = 25,\n\n        // local storage for brevity and better compression --------------------------------\n\n        document = window.document,\n        history = window.history,\n        Signal = signals.Signal,\n\n        // local vars ----------------------------------------------------------------------\n\n        hasher,\n        _hash,\n        _checkInterval,\n        _isActive,\n        _frame, //iframe used for legacy IE (6-7)\n        _checkHistory,\n        _hashValRegexp = /#(.*)$/,\n        _baseUrlRegexp = /(\\?.*)|(\\#.*)/,\n        _hashRegexp = /^\\#/,\n\n        // sniffing/feature detection -------------------------------------------------------\n\n        //hack based on this: http://webreflection.blogspot.com/2009/01/32-bytes-to-know-if-your-browser-is-ie.html\n        _isIE = (!+\"\\v1\"),\n        // hashchange is supported by FF3.6+, IE8+, Chrome 5+, Safari 5+ but\n        // feature detection fails on IE compatibility mode, so we need to\n        // check documentMode\n        _isHashChangeSupported = ('onhashchange' in window) && document.documentMode !== 7,\n        //check if is IE6-7 since hash change is only supported on IE8+ and\n        //changing hash value on IE6-7 doesn't generate history record.\n        _isLegacyIE = _isIE && !_isHashChangeSupported,\n        _isLocal = (location.protocol === 'file:');\n\n\n    //--------------------------------------------------------------------------------------\n    // Private Methods\n    //--------------------------------------------------------------------------------------\n\n    function _escapeRegExp(str){\n        return String(str || '').replace(/\\W/g, \"\\\\$&\");\n    }\n\n    function _trimHash(hash){\n        if (!hash) return '';\n        var regexp = new RegExp('^' + _escapeRegExp(hasher.prependHash) + '|' + _escapeRegExp(hasher.appendHash) + '$', 'g');\n        return hash.replace(regexp, '');\n    }\n\n    function _getWindowHash(){\n        //parsed full URL instead of getting window.location.hash because Firefox decode hash value (and all the other browsers don't)\n        //also because of IE8 bug with hash query in local file [issue #6]\n        var result = _hashValRegexp.exec( hasher.getURL() );\n        var path = (result && result[1]) || '';\n        try {\n          return hasher.raw? path : decodeURIComponent(path);\n        } catch (e) {\n          // in case user did not set `hasher.raw` and decodeURIComponent\n          // throws an error (see #57)\n          return path;\n        }\n    }\n\n    function _getFrameHash(){\n        return (_frame)? _frame.contentWindow.frameHash : null;\n    }\n\n    function _createFrame(){\n        _frame = document.createElement('iframe');\n        _frame.src = 'about:blank';\n        _frame.style.display = 'none';\n        document.body.appendChild(_frame);\n    }\n\n    function _updateFrame(){\n        if(_frame && _hash !== _getFrameHash()){\n            var frameDoc = _frame.contentWindow.document;\n            frameDoc.open();\n            //update iframe content to force new history record.\n            //based on Really Simple History, SWFAddress and YUI.history.\n            frameDoc.write('<html><head><title>' + document.title + '</title><script type=\"text/javascript\">var frameHash=\"' + _hash + '\";</script></head><body>&nbsp;</body></html>');\n            frameDoc.close();\n        }\n    }\n\n    function _registerChange(newHash, isReplace){\n        if(_hash !== newHash){\n            var oldHash = _hash;\n            _hash = newHash; //should come before event dispatch to make sure user can get proper value inside event handler\n            if(_isLegacyIE){\n                if(!isReplace){\n                    _updateFrame();\n                } else {\n                    _frame.contentWindow.frameHash = newHash;\n                }\n            }\n            hasher.changed.dispatch(_trimHash(newHash), _trimHash(oldHash));\n        }\n    }\n\n    if (_isLegacyIE) {\n        /**\n         * @private\n         */\n        _checkHistory = function(){\n            var windowHash = _getWindowHash(),\n                frameHash = _getFrameHash();\n            if(frameHash !== _hash && frameHash !== windowHash){\n                //detect changes made pressing browser history buttons.\n                //Workaround since history.back() and history.forward() doesn't\n                //update hash value on IE6/7 but updates content of the iframe.\n                //needs to trim hash since value stored already have\n                //prependHash + appendHash for fast check.\n                hasher.setHash(_trimHash(frameHash));\n            } else if (windowHash !== _hash){\n                //detect if hash changed (manually or using setHash)\n                _registerChange(windowHash);\n            }\n        };\n    } else {\n        /**\n         * @private\n         */\n        _checkHistory = function(){\n            var windowHash = _getWindowHash();\n            if(windowHash !== _hash){\n                _registerChange(windowHash);\n            }\n        };\n    }\n\n    function _addListener(elm, eType, fn){\n        if(elm.addEventListener){\n            elm.addEventListener(eType, fn, false);\n        } else if (elm.attachEvent){\n            elm.attachEvent('on' + eType, fn);\n        }\n    }\n\n    function _removeListener(elm, eType, fn){\n        if(elm.removeEventListener){\n            elm.removeEventListener(eType, fn, false);\n        } else if (elm.detachEvent){\n            elm.detachEvent('on' + eType, fn);\n        }\n    }\n\n    function _makePath(paths){\n        paths = Array.prototype.slice.call(arguments);\n\n        var path = paths.join(hasher.separator);\n        path = path? hasher.prependHash + path.replace(_hashRegexp, '') + hasher.appendHash : path;\n        return path;\n    }\n\n    function _encodePath(path){\n        //used encodeURI instead of encodeURIComponent to preserve '?', '/',\n        //'#'. Fixes Safari bug [issue #8]\n        path = encodeURI(path);\n        if(_isIE && _isLocal){\n            //fix IE8 local file bug [issue #6]\n            path = path.replace(/\\?/, '%3F');\n        }\n        return path;\n    }\n\n    //--------------------------------------------------------------------------------------\n    // Public (API)\n    //--------------------------------------------------------------------------------------\n\n    hasher = /** @lends hasher */ {\n\n        /**\n         * hasher Version Number\n         * @type string\n         * @constant\n         */\n        VERSION : '1.2.0',\n\n        /**\n         * Boolean deciding if hasher encodes/decodes the hash or not.\n         * <ul>\n         * <li>default value: false;</li>\n         * </ul>\n         * @type boolean\n         */\n        raw : false,\n\n        /**\n         * String that should always be added to the end of Hash value.\n         * <ul>\n         * <li>default value: '';</li>\n         * <li>will be automatically removed from `hasher.getHash()`</li>\n         * <li>avoid conflicts with elements that contain ID equal to hash value;</li>\n         * </ul>\n         * @type string\n         */\n        appendHash : '',\n\n        /**\n         * String that should always be added to the beginning of Hash value.\n         * <ul>\n         * <li>default value: '/';</li>\n         * <li>will be automatically removed from `hasher.getHash()`</li>\n         * <li>avoid conflicts with elements that contain ID equal to hash value;</li>\n         * </ul>\n         * @type string\n         */\n        prependHash : '/',\n\n        /**\n         * String used to split hash paths; used by `hasher.getHashAsArray()` to split paths.\n         * <ul>\n         * <li>default value: '/';</li>\n         * </ul>\n         * @type string\n         */\n        separator : '/',\n\n        /**\n         * Signal dispatched when hash value changes.\n         * - pass current hash as 1st parameter to listeners and previous hash value as 2nd parameter.\n         * @type signals.Signal\n         */\n        changed : new Signal(),\n\n        /**\n         * Signal dispatched when hasher is stopped.\n         * -  pass current hash as first parameter to listeners\n         * @type signals.Signal\n         */\n        stopped : new Signal(),\n\n        /**\n         * Signal dispatched when hasher is initialized.\n         * - pass current hash as first parameter to listeners.\n         * @type signals.Signal\n         */\n        initialized : new Signal(),\n\n        /**\n         * Start listening/dispatching changes in the hash/history.\n         * <ul>\n         *   <li>hasher won't dispatch CHANGE events by manually typing a new value or pressing the back/forward buttons before calling this method.</li>\n         * </ul>\n         */\n        init : function(){\n            if(_isActive) return;\n\n            _hash = _getWindowHash();\n\n            //thought about branching/overloading hasher.init() to avoid checking multiple times but\n            //don't think worth doing it since it probably won't be called multiple times.\n            if(_isHashChangeSupported){\n                _addListener(window, 'hashchange', _checkHistory);\n            }else {\n                if(_isLegacyIE){\n                    if(! _frame){\n                        _createFrame();\n                    }\n                    _updateFrame();\n                }\n                _checkInterval = setInterval(_checkHistory, POOL_INTERVAL);\n            }\n\n            _isActive = true;\n            hasher.initialized.dispatch(_trimHash(_hash));\n        },\n\n        /**\n         * Stop listening/dispatching changes in the hash/history.\n         * <ul>\n         *   <li>hasher won't dispatch CHANGE events by manually typing a new value or pressing the back/forward buttons after calling this method, unless you call hasher.init() again.</li>\n         *   <li>hasher will still dispatch changes made programatically by calling hasher.setHash();</li>\n         * </ul>\n         */\n        stop : function(){\n            if(! _isActive) return;\n\n            if(_isHashChangeSupported){\n                _removeListener(window, 'hashchange', _checkHistory);\n            }else{\n                clearInterval(_checkInterval);\n                _checkInterval = null;\n            }\n\n            _isActive = false;\n            hasher.stopped.dispatch(_trimHash(_hash));\n        },\n\n        /**\n         * @return {boolean}    If hasher is listening to changes on the browser history and/or hash value.\n         */\n        isActive : function(){\n            return _isActive;\n        },\n\n        /**\n         * @return {string} Full URL.\n         */\n        getURL : function(){\n            return window.location.href;\n        },\n\n        /**\n         * @return {string} Retrieve URL without query string and hash.\n         */\n        getBaseURL : function(){\n            return hasher.getURL().replace(_baseUrlRegexp, ''); //removes everything after '?' and/or '#'\n        },\n\n        /**\n         * Set Hash value, generating a new history record.\n         * @param {...string} path    Hash value without '#'. Hasher will join\n         * path segments using `hasher.separator` and prepend/append hash value\n         * with `hasher.appendHash` and `hasher.prependHash`\n         * @example hasher.setHash('lorem', 'ipsum', 'dolor') -> '#/lorem/ipsum/dolor'\n         */\n        setHash : function(path){\n            path = _makePath.apply(null, arguments);\n            if(path !== _hash){\n                // we should store raw value\n                _registerChange(path);\n                if (path === _hash) {\n                    // we check if path is still === _hash to avoid error in\n                    // case of multiple consecutive redirects [issue #39]\n                    if (! hasher.raw) {\n                        path = _encodePath(path);\n                    }\n                    window.location.hash = '#' + path;\n                }\n            }\n        },\n\n        /**\n         * Set Hash value without keeping previous hash on the history record.\n         * Similar to calling `window.location.replace(\"#/hash\")` but will also work on IE6-7.\n         * @param {...string} path    Hash value without '#'. Hasher will join\n         * path segments using `hasher.separator` and prepend/append hash value\n         * with `hasher.appendHash` and `hasher.prependHash`\n         * @example hasher.replaceHash('lorem', 'ipsum', 'dolor') -> '#/lorem/ipsum/dolor'\n         */\n        replaceHash : function(path){\n            path = _makePath.apply(null, arguments);\n            if(path !== _hash){\n                // we should store raw value\n                _registerChange(path, true);\n                if (path === _hash) {\n                    // we check if path is still === _hash to avoid error in\n                    // case of multiple consecutive redirects [issue #39]\n                    if (! hasher.raw) {\n                        path = _encodePath(path);\n                    }\n                    window.location.replace('#' + path);\n                }\n            }\n        },\n\n        /**\n         * @return {string} Hash value without '#', `hasher.appendHash` and `hasher.prependHash`.\n         */\n        getHash : function(){\n            //didn't used actual value of the `window.location.hash` to avoid breaking the application in case `window.location.hash` isn't available and also because value should always be synched.\n            return _trimHash(_hash);\n        },\n\n        /**\n         * @return {Array.<string>} Hash value split into an Array.\n         */\n        getHashAsArray : function(){\n            return hasher.getHash().split(hasher.separator);\n        },\n\n        /**\n         * Removes all event listeners, stops hasher and destroy hasher object.\n         * - IMPORTANT: hasher won't work after calling this method, hasher Object will be deleted.\n         */\n        dispose : function(){\n            hasher.stop();\n            hasher.initialized.dispose();\n            hasher.stopped.dispose();\n            hasher.changed.dispose();\n            _frame = hasher = window.hasher = null;\n        },\n\n        /**\n         * @return {string} A string representation of the object.\n         */\n        toString : function(){\n            return '[hasher version=\"'+ hasher.VERSION +'\" hash=\"'+ hasher.getHash() +'\"]';\n        }\n\n    };\n\n    hasher.initialized.memorize = true; //see #33\n\n    return hasher;\n\n}(window));\n\n\n    return hasher;\n};\n\nif (typeof define === 'function' && define.amd) {\n    define(['signals'], factory);\n} else if (typeof exports === 'object') {\n    module.exports = factory(require('signals'));\n} else {\n    /*jshint sub:true */\n    window['hasher'] = factory(window['signals']);\n}\n\n}());\n\n},{\"signals\":151}],151:[function(require,module,exports){\narguments[4][118][0].apply(exports,arguments)\n},{\"dup\":118}],152:[function(require,module,exports){\nmodule.exports = {\n  XmlEntities: require('./lib/xml-entities.js'),\n  Html4Entities: require('./lib/html4-entities.js'),\n  Html5Entities: require('./lib/html5-entities.js'),\n  AllHtmlEntities: require('./lib/html5-entities.js')\n};\n\n},{\"./lib/html4-entities.js\":153,\"./lib/html5-entities.js\":154,\"./lib/xml-entities.js\":155}],153:[function(require,module,exports){\nvar HTML_ALPHA = ['apos', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'Aelig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'acirc', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'Oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'quot', 'amp', 'lt', 'gt', 'oelig', 'oelig', 'scaron', 'scaron', 'yuml', 'circ', 'tilde', 'ensp', 'emsp', 'thinsp', 'zwnj', 'zwj', 'lrm', 'rlm', 'ndash', 'mdash', 'lsquo', 'rsquo', 'sbquo', 'ldquo', 'rdquo', 'bdquo', 'dagger', 'dagger', 'permil', 'lsaquo', 'rsaquo', 'euro', 'fnof', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigmaf', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'thetasym', 'upsih', 'piv', 'bull', 'hellip', 'prime', 'prime', 'oline', 'frasl', 'weierp', 'image', 'real', 'trade', 'alefsym', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'crarr', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'forall', 'part', 'exist', 'empty', 'nabla', 'isin', 'notin', 'ni', 'prod', 'sum', 'minus', 'lowast', 'radic', 'prop', 'infin', 'ang', 'and', 'or', 'cap', 'cup', 'int', 'there4', 'sim', 'cong', 'asymp', 'ne', 'equiv', 'le', 'ge', 'sub', 'sup', 'nsub', 'sube', 'supe', 'oplus', 'otimes', 'perp', 'sdot', 'lceil', 'rceil', 'lfloor', 'rfloor', 'lang', 'rang', 'loz', 'spades', 'clubs', 'hearts', 'diams'];\nvar HTML_CODES = [39, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 34, 38, 60, 62, 338, 339, 352, 353, 376, 710, 732, 8194, 8195, 8201, 8204, 8205, 8206, 8207, 8211, 8212, 8216, 8217, 8218, 8220, 8221, 8222, 8224, 8225, 8240, 8249, 8250, 8364, 402, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 931, 932, 933, 934, 935, 936, 937, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 977, 978, 982, 8226, 8230, 8242, 8243, 8254, 8260, 8472, 8465, 8476, 8482, 8501, 8592, 8593, 8594, 8595, 8596, 8629, 8656, 8657, 8658, 8659, 8660, 8704, 8706, 8707, 8709, 8711, 8712, 8713, 8715, 8719, 8721, 8722, 8727, 8730, 8733, 8734, 8736, 8743, 8744, 8745, 8746, 8747, 8756, 8764, 8773, 8776, 8800, 8801, 8804, 8805, 8834, 8835, 8836, 8838, 8839, 8853, 8855, 8869, 8901, 8968, 8969, 8970, 8971, 9001, 9002, 9674, 9824, 9827, 9829, 9830];\n\nvar alphaIndex = {};\nvar numIndex = {};\n\nvar i = 0;\nvar length = HTML_ALPHA.length;\nwhile (i < length) {\n    var a = HTML_ALPHA[i];\n    var c = HTML_CODES[i];\n    alphaIndex[a] = String.fromCharCode(c);\n    numIndex[c] = a;\n    i++;\n}\n\n/**\n * @constructor\n */\nfunction Html4Entities() {}\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.prototype.decode = function(str) {\n    if (str.length === 0) {\n        return '';\n    }\n    return str.replace(/&(#?[\\w\\d]+);?/g, function(s, entity) {\n        var chr;\n        if (entity.charAt(0) === \"#\") {\n            var code = entity.charAt(1).toLowerCase() === 'x' ?\n                parseInt(entity.substr(2), 16) :\n                parseInt(entity.substr(1));\n\n            if (!(isNaN(code) || code < -32768 || code > 65535)) {\n                chr = String.fromCharCode(code);\n            }\n        } else {\n            chr = alphaIndex[entity];\n        }\n        return chr || s;\n    });\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.decode = function(str) {\n    return new Html4Entities().decode(str);\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.prototype.encode = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var alpha = numIndex[str.charCodeAt(i)];\n        result += alpha ? \"&\" + alpha + \";\" : str.charAt(i);\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.encode = function(str) {\n    return new Html4Entities().encode(str);\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.prototype.encodeNonUTF = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var cc = str.charCodeAt(i);\n        var alpha = numIndex[cc];\n        if (alpha) {\n            result += \"&\" + alpha + \";\";\n        } else if (cc < 32 || cc > 126) {\n            result += \"&#\" + cc + \";\";\n        } else {\n            result += str.charAt(i);\n        }\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.encodeNonUTF = function(str) {\n    return new Html4Entities().encodeNonUTF(str);\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.prototype.encodeNonASCII = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var c = str.charCodeAt(i);\n        if (c <= 255) {\n            result += str[i++];\n            continue;\n        }\n        result += '&#' + c + ';';\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml4Entities.encodeNonASCII = function(str) {\n    return new Html4Entities().encodeNonASCII(str);\n};\n\nmodule.exports = Html4Entities;\n\n},{}],154:[function(require,module,exports){\nvar ENTITIES = [['Aacute', [193]], ['aacute', [225]], ['Abreve', [258]], ['abreve', [259]], ['ac', [8766]], ['acd', [8767]], ['acE', [8766, 819]], ['Acirc', [194]], ['acirc', [226]], ['acute', [180]], ['Acy', [1040]], ['acy', [1072]], ['AElig', [198]], ['aelig', [230]], ['af', [8289]], ['Afr', [120068]], ['afr', [120094]], ['Agrave', [192]], ['agrave', [224]], ['alefsym', [8501]], ['aleph', [8501]], ['Alpha', [913]], ['alpha', [945]], ['Amacr', [256]], ['amacr', [257]], ['amalg', [10815]], ['amp', [38]], ['AMP', [38]], ['andand', [10837]], ['And', [10835]], ['and', [8743]], ['andd', [10844]], ['andslope', [10840]], ['andv', [10842]], ['ang', [8736]], ['ange', [10660]], ['angle', [8736]], ['angmsdaa', [10664]], ['angmsdab', [10665]], ['angmsdac', [10666]], ['angmsdad', [10667]], ['angmsdae', [10668]], ['angmsdaf', [10669]], ['angmsdag', [10670]], ['angmsdah', [10671]], ['angmsd', [8737]], ['angrt', [8735]], ['angrtvb', [8894]], ['angrtvbd', [10653]], ['angsph', [8738]], ['angst', [197]], ['angzarr', [9084]], ['Aogon', [260]], ['aogon', [261]], ['Aopf', [120120]], ['aopf', [120146]], ['apacir', [10863]], ['ap', [8776]], ['apE', [10864]], ['ape', [8778]], ['apid', [8779]], ['apos', [39]], ['ApplyFunction', [8289]], ['approx', [8776]], ['approxeq', [8778]], ['Aring', [197]], ['aring', [229]], ['Ascr', [119964]], ['ascr', [119990]], ['Assign', [8788]], ['ast', [42]], ['asymp', [8776]], ['asympeq', [8781]], ['Atilde', [195]], ['atilde', [227]], ['Auml', [196]], ['auml', [228]], ['awconint', [8755]], ['awint', [10769]], ['backcong', [8780]], ['backepsilon', [1014]], ['backprime', [8245]], ['backsim', [8765]], ['backsimeq', [8909]], ['Backslash', [8726]], ['Barv', [10983]], ['barvee', [8893]], ['barwed', [8965]], ['Barwed', [8966]], ['barwedge', [8965]], ['bbrk', [9141]], ['bbrktbrk', [9142]], ['bcong', [8780]], ['Bcy', [1041]], ['bcy', [1073]], ['bdquo', [8222]], ['becaus', [8757]], ['because', [8757]], ['Because', [8757]], ['bemptyv', [10672]], ['bepsi', [1014]], ['bernou', [8492]], ['Bernoullis', [8492]], ['Beta', [914]], ['beta', [946]], ['beth', [8502]], ['between', [8812]], ['Bfr', [120069]], ['bfr', [120095]], ['bigcap', [8898]], ['bigcirc', [9711]], ['bigcup', [8899]], ['bigodot', [10752]], ['bigoplus', [10753]], ['bigotimes', [10754]], ['bigsqcup', [10758]], ['bigstar', [9733]], ['bigtriangledown', [9661]], ['bigtriangleup', [9651]], ['biguplus', [10756]], ['bigvee', [8897]], ['bigwedge', [8896]], ['bkarow', [10509]], ['blacklozenge', [10731]], ['blacksquare', [9642]], ['blacktriangle', [9652]], ['blacktriangledown', [9662]], ['blacktriangleleft', [9666]], ['blacktriangleright', [9656]], ['blank', [9251]], ['blk12', [9618]], ['blk14', [9617]], ['blk34', [9619]], ['block', [9608]], ['bne', [61, 8421]], ['bnequiv', [8801, 8421]], ['bNot', [10989]], ['bnot', [8976]], ['Bopf', [120121]], ['bopf', [120147]], ['bot', [8869]], ['bottom', [8869]], ['bowtie', [8904]], ['boxbox', [10697]], ['boxdl', [9488]], ['boxdL', [9557]], ['boxDl', [9558]], ['boxDL', [9559]], ['boxdr', [9484]], ['boxdR', [9554]], ['boxDr', [9555]], ['boxDR', [9556]], ['boxh', [9472]], ['boxH', [9552]], ['boxhd', [9516]], ['boxHd', [9572]], ['boxhD', [9573]], ['boxHD', [9574]], ['boxhu', [9524]], ['boxHu', [9575]], ['boxhU', [9576]], ['boxHU', [9577]], ['boxminus', [8863]], ['boxplus', [8862]], ['boxtimes', [8864]], ['boxul', [9496]], ['boxuL', [9563]], ['boxUl', [9564]], ['boxUL', [9565]], ['boxur', [9492]], ['boxuR', [9560]], ['boxUr', [9561]], ['boxUR', [9562]], ['boxv', [9474]], ['boxV', [9553]], ['boxvh', [9532]], ['boxvH', [9578]], ['boxVh', [9579]], ['boxVH', [9580]], ['boxvl', [9508]], ['boxvL', [9569]], ['boxVl', [9570]], ['boxVL', [9571]], ['boxvr', [9500]], ['boxvR', [9566]], ['boxVr', [9567]], ['boxVR', [9568]], ['bprime', [8245]], ['breve', [728]], ['Breve', [728]], ['brvbar', [166]], ['bscr', [119991]], ['Bscr', [8492]], ['bsemi', [8271]], ['bsim', [8765]], ['bsime', [8909]], ['bsolb', [10693]], ['bsol', [92]], ['bsolhsub', [10184]], ['bull', [8226]], ['bullet', [8226]], ['bump', [8782]], ['bumpE', [10926]], ['bumpe', [8783]], ['Bumpeq', [8782]], ['bumpeq', [8783]], ['Cacute', [262]], ['cacute', [263]], ['capand', [10820]], ['capbrcup', [10825]], ['capcap', [10827]], ['cap', [8745]], ['Cap', [8914]], ['capcup', [10823]], ['capdot', [10816]], ['CapitalDifferentialD', [8517]], ['caps', [8745, 65024]], ['caret', [8257]], ['caron', [711]], ['Cayleys', [8493]], ['ccaps', [10829]], ['Ccaron', [268]], ['ccaron', [269]], ['Ccedil', [199]], ['ccedil', [231]], ['Ccirc', [264]], ['ccirc', [265]], ['Cconint', [8752]], ['ccups', [10828]], ['ccupssm', [10832]], ['Cdot', [266]], ['cdot', [267]], ['cedil', [184]], ['Cedilla', [184]], ['cemptyv', [10674]], ['cent', [162]], ['centerdot', [183]], ['CenterDot', [183]], ['cfr', [120096]], ['Cfr', [8493]], ['CHcy', [1063]], ['chcy', [1095]], ['check', [10003]], ['checkmark', [10003]], ['Chi', [935]], ['chi', [967]], ['circ', [710]], ['circeq', [8791]], ['circlearrowleft', [8634]], ['circlearrowright', [8635]], ['circledast', [8859]], ['circledcirc', [8858]], ['circleddash', [8861]], ['CircleDot', [8857]], ['circledR', [174]], ['circledS', [9416]], ['CircleMinus', [8854]], ['CirclePlus', [8853]], ['CircleTimes', [8855]], ['cir', [9675]], ['cirE', [10691]], ['cire', [8791]], ['cirfnint', [10768]], ['cirmid', [10991]], ['cirscir', [10690]], ['ClockwiseContourIntegral', [8754]], ['CloseCurlyDoubleQuote', [8221]], ['CloseCurlyQuote', [8217]], ['clubs', [9827]], ['clubsuit', [9827]], ['colon', [58]], ['Colon', [8759]], ['Colone', [10868]], ['colone', [8788]], ['coloneq', [8788]], ['comma', [44]], ['commat', [64]], ['comp', [8705]], ['compfn', [8728]], ['complement', [8705]], ['complexes', [8450]], ['cong', [8773]], ['congdot', [10861]], ['Congruent', [8801]], ['conint', [8750]], ['Conint', [8751]], ['ContourIntegral', [8750]], ['copf', [120148]], ['Copf', [8450]], ['coprod', [8720]], ['Coproduct', [8720]], ['copy', [169]], ['COPY', [169]], ['copysr', [8471]], ['CounterClockwiseContourIntegral', [8755]], ['crarr', [8629]], ['cross', [10007]], ['Cross', [10799]], ['Cscr', [119966]], ['cscr', [119992]], ['csub', [10959]], ['csube', [10961]], ['csup', [10960]], ['csupe', [10962]], ['ctdot', [8943]], ['cudarrl', [10552]], ['cudarrr', [10549]], ['cuepr', [8926]], ['cuesc', [8927]], ['cularr', [8630]], ['cularrp', [10557]], ['cupbrcap', [10824]], ['cupcap', [10822]], ['CupCap', [8781]], ['cup', [8746]], ['Cup', [8915]], ['cupcup', [10826]], ['cupdot', [8845]], ['cupor', [10821]], ['cups', [8746, 65024]], ['curarr', [8631]], ['curarrm', [10556]], ['curlyeqprec', [8926]], ['curlyeqsucc', [8927]], ['curlyvee', [8910]], ['curlywedge', [8911]], ['curren', [164]], ['curvearrowleft', [8630]], ['curvearrowright', [8631]], ['cuvee', [8910]], ['cuwed', [8911]], ['cwconint', [8754]], ['cwint', [8753]], ['cylcty', [9005]], ['dagger', [8224]], ['Dagger', [8225]], ['daleth', [8504]], ['darr', [8595]], ['Darr', [8609]], ['dArr', [8659]], ['dash', [8208]], ['Dashv', [10980]], ['dashv', [8867]], ['dbkarow', [10511]], ['dblac', [733]], ['Dcaron', [270]], ['dcaron', [271]], ['Dcy', [1044]], ['dcy', [1076]], ['ddagger', [8225]], ['ddarr', [8650]], ['DD', [8517]], ['dd', [8518]], ['DDotrahd', [10513]], ['ddotseq', [10871]], ['deg', [176]], ['Del', [8711]], ['Delta', [916]], ['delta', [948]], ['demptyv', [10673]], ['dfisht', [10623]], ['Dfr', [120071]], ['dfr', [120097]], ['dHar', [10597]], ['dharl', [8643]], ['dharr', [8642]], ['DiacriticalAcute', [180]], ['DiacriticalDot', [729]], ['DiacriticalDoubleAcute', [733]], ['DiacriticalGrave', [96]], ['DiacriticalTilde', [732]], ['diam', [8900]], ['diamond', [8900]], ['Diamond', [8900]], ['diamondsuit', [9830]], ['diams', [9830]], ['die', [168]], ['DifferentialD', [8518]], ['digamma', [989]], ['disin', [8946]], ['div', [247]], ['divide', [247]], ['divideontimes', [8903]], ['divonx', [8903]], ['DJcy', [1026]], ['djcy', [1106]], ['dlcorn', [8990]], ['dlcrop', [8973]], ['dollar', [36]], ['Dopf', [120123]], ['dopf', [120149]], ['Dot', [168]], ['dot', [729]], ['DotDot', [8412]], ['doteq', [8784]], ['doteqdot', [8785]], ['DotEqual', [8784]], ['dotminus', [8760]], ['dotplus', [8724]], ['dotsquare', [8865]], ['doublebarwedge', [8966]], ['DoubleContourIntegral', [8751]], ['DoubleDot', [168]], ['DoubleDownArrow', [8659]], ['DoubleLeftArrow', [8656]], ['DoubleLeftRightArrow', [8660]], ['DoubleLeftTee', [10980]], ['DoubleLongLeftArrow', [10232]], ['DoubleLongLeftRightArrow', [10234]], ['DoubleLongRightArrow', [10233]], ['DoubleRightArrow', [8658]], ['DoubleRightTee', [8872]], ['DoubleUpArrow', [8657]], ['DoubleUpDownArrow', [8661]], ['DoubleVerticalBar', [8741]], ['DownArrowBar', [10515]], ['downarrow', [8595]], ['DownArrow', [8595]], ['Downarrow', [8659]], ['DownArrowUpArrow', [8693]], ['DownBreve', [785]], ['downdownarrows', [8650]], ['downharpoonleft', [8643]], ['downharpoonright', [8642]], ['DownLeftRightVector', [10576]], ['DownLeftTeeVector', [10590]], ['DownLeftVectorBar', [10582]], ['DownLeftVector', [8637]], ['DownRightTeeVector', [10591]], ['DownRightVectorBar', [10583]], ['DownRightVector', [8641]], ['DownTeeArrow', [8615]], ['DownTee', [8868]], ['drbkarow', [10512]], ['drcorn', [8991]], ['drcrop', [8972]], ['Dscr', [119967]], ['dscr', [119993]], ['DScy', [1029]], ['dscy', [1109]], ['dsol', [10742]], ['Dstrok', [272]], ['dstrok', [273]], ['dtdot', [8945]], ['dtri', [9663]], ['dtrif', [9662]], ['duarr', [8693]], ['duhar', [10607]], ['dwangle', [10662]], ['DZcy', [1039]], ['dzcy', [1119]], ['dzigrarr', [10239]], ['Eacute', [201]], ['eacute', [233]], ['easter', [10862]], ['Ecaron', [282]], ['ecaron', [283]], ['Ecirc', [202]], ['ecirc', [234]], ['ecir', [8790]], ['ecolon', [8789]], ['Ecy', [1069]], ['ecy', [1101]], ['eDDot', [10871]], ['Edot', [278]], ['edot', [279]], ['eDot', [8785]], ['ee', [8519]], ['efDot', [8786]], ['Efr', [120072]], ['efr', [120098]], ['eg', [10906]], ['Egrave', [200]], ['egrave', [232]], ['egs', [10902]], ['egsdot', [10904]], ['el', [10905]], ['Element', [8712]], ['elinters', [9191]], ['ell', [8467]], ['els', [10901]], ['elsdot', [10903]], ['Emacr', [274]], ['emacr', [275]], ['empty', [8709]], ['emptyset', [8709]], ['EmptySmallSquare', [9723]], ['emptyv', [8709]], ['EmptyVerySmallSquare', [9643]], ['emsp13', [8196]], ['emsp14', [8197]], ['emsp', [8195]], ['ENG', [330]], ['eng', [331]], ['ensp', [8194]], ['Eogon', [280]], ['eogon', [281]], ['Eopf', [120124]], ['eopf', [120150]], ['epar', [8917]], ['eparsl', [10723]], ['eplus', [10865]], ['epsi', [949]], ['Epsilon', [917]], ['epsilon', [949]], ['epsiv', [1013]], ['eqcirc', [8790]], ['eqcolon', [8789]], ['eqsim', [8770]], ['eqslantgtr', [10902]], ['eqslantless', [10901]], ['Equal', [10869]], ['equals', [61]], ['EqualTilde', [8770]], ['equest', [8799]], ['Equilibrium', [8652]], ['equiv', [8801]], ['equivDD', [10872]], ['eqvparsl', [10725]], ['erarr', [10609]], ['erDot', [8787]], ['escr', [8495]], ['Escr', [8496]], ['esdot', [8784]], ['Esim', [10867]], ['esim', [8770]], ['Eta', [919]], ['eta', [951]], ['ETH', [208]], ['eth', [240]], ['Euml', [203]], ['euml', [235]], ['euro', [8364]], ['excl', [33]], ['exist', [8707]], ['Exists', [8707]], ['expectation', [8496]], ['exponentiale', [8519]], ['ExponentialE', [8519]], ['fallingdotseq', [8786]], ['Fcy', [1060]], ['fcy', [1092]], ['female', [9792]], ['ffilig', [64259]], ['fflig', [64256]], ['ffllig', [64260]], ['Ffr', [120073]], ['ffr', [120099]], ['filig', [64257]], ['FilledSmallSquare', [9724]], ['FilledVerySmallSquare', [9642]], ['fjlig', [102, 106]], ['flat', [9837]], ['fllig', [64258]], ['fltns', [9649]], ['fnof', [402]], ['Fopf', [120125]], ['fopf', [120151]], ['forall', [8704]], ['ForAll', [8704]], ['fork', [8916]], ['forkv', [10969]], ['Fouriertrf', [8497]], ['fpartint', [10765]], ['frac12', [189]], ['frac13', [8531]], ['frac14', [188]], ['frac15', [8533]], ['frac16', [8537]], ['frac18', [8539]], ['frac23', [8532]], ['frac25', [8534]], ['frac34', [190]], ['frac35', [8535]], ['frac38', [8540]], ['frac45', [8536]], ['frac56', [8538]], ['frac58', [8541]], ['frac78', [8542]], ['frasl', [8260]], ['frown', [8994]], ['fscr', [119995]], ['Fscr', [8497]], ['gacute', [501]], ['Gamma', [915]], ['gamma', [947]], ['Gammad', [988]], ['gammad', [989]], ['gap', [10886]], ['Gbreve', [286]], ['gbreve', [287]], ['Gcedil', [290]], ['Gcirc', [284]], ['gcirc', [285]], ['Gcy', [1043]], ['gcy', [1075]], ['Gdot', [288]], ['gdot', [289]], ['ge', [8805]], ['gE', [8807]], ['gEl', [10892]], ['gel', [8923]], ['geq', [8805]], ['geqq', [8807]], ['geqslant', [10878]], ['gescc', [10921]], ['ges', [10878]], ['gesdot', [10880]], ['gesdoto', [10882]], ['gesdotol', [10884]], ['gesl', [8923, 65024]], ['gesles', [10900]], ['Gfr', [120074]], ['gfr', [120100]], ['gg', [8811]], ['Gg', [8921]], ['ggg', [8921]], ['gimel', [8503]], ['GJcy', [1027]], ['gjcy', [1107]], ['gla', [10917]], ['gl', [8823]], ['glE', [10898]], ['glj', [10916]], ['gnap', [10890]], ['gnapprox', [10890]], ['gne', [10888]], ['gnE', [8809]], ['gneq', [10888]], ['gneqq', [8809]], ['gnsim', [8935]], ['Gopf', [120126]], ['gopf', [120152]], ['grave', [96]], ['GreaterEqual', [8805]], ['GreaterEqualLess', [8923]], ['GreaterFullEqual', [8807]], ['GreaterGreater', [10914]], ['GreaterLess', [8823]], ['GreaterSlantEqual', [10878]], ['GreaterTilde', [8819]], ['Gscr', [119970]], ['gscr', [8458]], ['gsim', [8819]], ['gsime', [10894]], ['gsiml', [10896]], ['gtcc', [10919]], ['gtcir', [10874]], ['gt', [62]], ['GT', [62]], ['Gt', [8811]], ['gtdot', [8919]], ['gtlPar', [10645]], ['gtquest', [10876]], ['gtrapprox', [10886]], ['gtrarr', [10616]], ['gtrdot', [8919]], ['gtreqless', [8923]], ['gtreqqless', [10892]], ['gtrless', [8823]], ['gtrsim', [8819]], ['gvertneqq', [8809, 65024]], ['gvnE', [8809, 65024]], ['Hacek', [711]], ['hairsp', [8202]], ['half', [189]], ['hamilt', [8459]], ['HARDcy', [1066]], ['hardcy', [1098]], ['harrcir', [10568]], ['harr', [8596]], ['hArr', [8660]], ['harrw', [8621]], ['Hat', [94]], ['hbar', [8463]], ['Hcirc', [292]], ['hcirc', [293]], ['hearts', [9829]], ['heartsuit', [9829]], ['hellip', [8230]], ['hercon', [8889]], ['hfr', [120101]], ['Hfr', [8460]], ['HilbertSpace', [8459]], ['hksearow', [10533]], ['hkswarow', [10534]], ['hoarr', [8703]], ['homtht', [8763]], ['hookleftarrow', [8617]], ['hookrightarrow', [8618]], ['hopf', [120153]], ['Hopf', [8461]], ['horbar', [8213]], ['HorizontalLine', [9472]], ['hscr', [119997]], ['Hscr', [8459]], ['hslash', [8463]], ['Hstrok', [294]], ['hstrok', [295]], ['HumpDownHump', [8782]], ['HumpEqual', [8783]], ['hybull', [8259]], ['hyphen', [8208]], ['Iacute', [205]], ['iacute', [237]], ['ic', [8291]], ['Icirc', [206]], ['icirc', [238]], ['Icy', [1048]], ['icy', [1080]], ['Idot', [304]], ['IEcy', [1045]], ['iecy', [1077]], ['iexcl', [161]], ['iff', [8660]], ['ifr', [120102]], ['Ifr', [8465]], ['Igrave', [204]], ['igrave', [236]], ['ii', [8520]], ['iiiint', [10764]], ['iiint', [8749]], ['iinfin', [10716]], ['iiota', [8489]], ['IJlig', [306]], ['ijlig', [307]], ['Imacr', [298]], ['imacr', [299]], ['image', [8465]], ['ImaginaryI', [8520]], ['imagline', [8464]], ['imagpart', [8465]], ['imath', [305]], ['Im', [8465]], ['imof', [8887]], ['imped', [437]], ['Implies', [8658]], ['incare', [8453]], ['in', [8712]], ['infin', [8734]], ['infintie', [10717]], ['inodot', [305]], ['intcal', [8890]], ['int', [8747]], ['Int', [8748]], ['integers', [8484]], ['Integral', [8747]], ['intercal', [8890]], ['Intersection', [8898]], ['intlarhk', [10775]], ['intprod', [10812]], ['InvisibleComma', [8291]], ['InvisibleTimes', [8290]], ['IOcy', [1025]], ['iocy', [1105]], ['Iogon', [302]], ['iogon', [303]], ['Iopf', [120128]], ['iopf', [120154]], ['Iota', [921]], ['iota', [953]], ['iprod', [10812]], ['iquest', [191]], ['iscr', [119998]], ['Iscr', [8464]], ['isin', [8712]], ['isindot', [8949]], ['isinE', [8953]], ['isins', [8948]], ['isinsv', [8947]], ['isinv', [8712]], ['it', [8290]], ['Itilde', [296]], ['itilde', [297]], ['Iukcy', [1030]], ['iukcy', [1110]], ['Iuml', [207]], ['iuml', [239]], ['Jcirc', [308]], ['jcirc', [309]], ['Jcy', [1049]], ['jcy', [1081]], ['Jfr', [120077]], ['jfr', [120103]], ['jmath', [567]], ['Jopf', [120129]], ['jopf', [120155]], ['Jscr', [119973]], ['jscr', [119999]], ['Jsercy', [1032]], ['jsercy', [1112]], ['Jukcy', [1028]], ['jukcy', [1108]], ['Kappa', [922]], ['kappa', [954]], ['kappav', [1008]], ['Kcedil', [310]], ['kcedil', [311]], ['Kcy', [1050]], ['kcy', [1082]], ['Kfr', [120078]], ['kfr', [120104]], ['kgreen', [312]], ['KHcy', [1061]], ['khcy', [1093]], ['KJcy', [1036]], ['kjcy', [1116]], ['Kopf', [120130]], ['kopf', [120156]], ['Kscr', [119974]], ['kscr', [120000]], ['lAarr', [8666]], ['Lacute', [313]], ['lacute', [314]], ['laemptyv', [10676]], ['lagran', [8466]], ['Lambda', [923]], ['lambda', [955]], ['lang', [10216]], ['Lang', [10218]], ['langd', [10641]], ['langle', [10216]], ['lap', [10885]], ['Laplacetrf', [8466]], ['laquo', [171]], ['larrb', [8676]], ['larrbfs', [10527]], ['larr', [8592]], ['Larr', [8606]], ['lArr', [8656]], ['larrfs', [10525]], ['larrhk', [8617]], ['larrlp', [8619]], ['larrpl', [10553]], ['larrsim', [10611]], ['larrtl', [8610]], ['latail', [10521]], ['lAtail', [10523]], ['lat', [10923]], ['late', [10925]], ['lates', [10925, 65024]], ['lbarr', [10508]], ['lBarr', [10510]], ['lbbrk', [10098]], ['lbrace', [123]], ['lbrack', [91]], ['lbrke', [10635]], ['lbrksld', [10639]], ['lbrkslu', [10637]], ['Lcaron', [317]], ['lcaron', [318]], ['Lcedil', [315]], ['lcedil', [316]], ['lceil', [8968]], ['lcub', [123]], ['Lcy', [1051]], ['lcy', [1083]], ['ldca', [10550]], ['ldquo', [8220]], ['ldquor', [8222]], ['ldrdhar', [10599]], ['ldrushar', [10571]], ['ldsh', [8626]], ['le', [8804]], ['lE', [8806]], ['LeftAngleBracket', [10216]], ['LeftArrowBar', [8676]], ['leftarrow', [8592]], ['LeftArrow', [8592]], ['Leftarrow', [8656]], ['LeftArrowRightArrow', [8646]], ['leftarrowtail', [8610]], ['LeftCeiling', [8968]], ['LeftDoubleBracket', [10214]], ['LeftDownTeeVector', [10593]], ['LeftDownVectorBar', [10585]], ['LeftDownVector', [8643]], ['LeftFloor', [8970]], ['leftharpoondown', [8637]], ['leftharpoonup', [8636]], ['leftleftarrows', [8647]], ['leftrightarrow', [8596]], ['LeftRightArrow', [8596]], ['Leftrightarrow', [8660]], ['leftrightarrows', [8646]], ['leftrightharpoons', [8651]], ['leftrightsquigarrow', [8621]], ['LeftRightVector', [10574]], ['LeftTeeArrow', [8612]], ['LeftTee', [8867]], ['LeftTeeVector', [10586]], ['leftthreetimes', [8907]], ['LeftTriangleBar', [10703]], ['LeftTriangle', [8882]], ['LeftTriangleEqual', [8884]], ['LeftUpDownVector', [10577]], ['LeftUpTeeVector', [10592]], ['LeftUpVectorBar', [10584]], ['LeftUpVector', [8639]], ['LeftVectorBar', [10578]], ['LeftVector', [8636]], ['lEg', [10891]], ['leg', [8922]], ['leq', [8804]], ['leqq', [8806]], ['leqslant', [10877]], ['lescc', [10920]], ['les', [10877]], ['lesdot', [10879]], ['lesdoto', [10881]], ['lesdotor', [10883]], ['lesg', [8922, 65024]], ['lesges', [10899]], ['lessapprox', [10885]], ['lessdot', [8918]], ['lesseqgtr', [8922]], ['lesseqqgtr', [10891]], ['LessEqualGreater', [8922]], ['LessFullEqual', [8806]], ['LessGreater', [8822]], ['lessgtr', [8822]], ['LessLess', [10913]], ['lesssim', [8818]], ['LessSlantEqual', [10877]], ['LessTilde', [8818]], ['lfisht', [10620]], ['lfloor', [8970]], ['Lfr', [120079]], ['lfr', [120105]], ['lg', [8822]], ['lgE', [10897]], ['lHar', [10594]], ['lhard', [8637]], ['lharu', [8636]], ['lharul', [10602]], ['lhblk', [9604]], ['LJcy', [1033]], ['ljcy', [1113]], ['llarr', [8647]], ['ll', [8810]], ['Ll', [8920]], ['llcorner', [8990]], ['Lleftarrow', [8666]], ['llhard', [10603]], ['lltri', [9722]], ['Lmidot', [319]], ['lmidot', [320]], ['lmoustache', [9136]], ['lmoust', [9136]], ['lnap', [10889]], ['lnapprox', [10889]], ['lne', [10887]], ['lnE', [8808]], ['lneq', [10887]], ['lneqq', [8808]], ['lnsim', [8934]], ['loang', [10220]], ['loarr', [8701]], ['lobrk', [10214]], ['longleftarrow', [10229]], ['LongLeftArrow', [10229]], ['Longleftarrow', [10232]], ['longleftrightarrow', [10231]], ['LongLeftRightArrow', [10231]], ['Longleftrightarrow', [10234]], ['longmapsto', [10236]], ['longrightarrow', [10230]], ['LongRightArrow', [10230]], ['Longrightarrow', [10233]], ['looparrowleft', [8619]], ['looparrowright', [8620]], ['lopar', [10629]], ['Lopf', [120131]], ['lopf', [120157]], ['loplus', [10797]], ['lotimes', [10804]], ['lowast', [8727]], ['lowbar', [95]], ['LowerLeftArrow', [8601]], ['LowerRightArrow', [8600]], ['loz', [9674]], ['lozenge', [9674]], ['lozf', [10731]], ['lpar', [40]], ['lparlt', [10643]], ['lrarr', [8646]], ['lrcorner', [8991]], ['lrhar', [8651]], ['lrhard', [10605]], ['lrm', [8206]], ['lrtri', [8895]], ['lsaquo', [8249]], ['lscr', [120001]], ['Lscr', [8466]], ['lsh', [8624]], ['Lsh', [8624]], ['lsim', [8818]], ['lsime', [10893]], ['lsimg', [10895]], ['lsqb', [91]], ['lsquo', [8216]], ['lsquor', [8218]], ['Lstrok', [321]], ['lstrok', [322]], ['ltcc', [10918]], ['ltcir', [10873]], ['lt', [60]], ['LT', [60]], ['Lt', [8810]], ['ltdot', [8918]], ['lthree', [8907]], ['ltimes', [8905]], ['ltlarr', [10614]], ['ltquest', [10875]], ['ltri', [9667]], ['ltrie', [8884]], ['ltrif', [9666]], ['ltrPar', [10646]], ['lurdshar', [10570]], ['luruhar', [10598]], ['lvertneqq', [8808, 65024]], ['lvnE', [8808, 65024]], ['macr', [175]], ['male', [9794]], ['malt', [10016]], ['maltese', [10016]], ['Map', [10501]], ['map', [8614]], ['mapsto', [8614]], ['mapstodown', [8615]], ['mapstoleft', [8612]], ['mapstoup', [8613]], ['marker', [9646]], ['mcomma', [10793]], ['Mcy', [1052]], ['mcy', [1084]], ['mdash', [8212]], ['mDDot', [8762]], ['measuredangle', [8737]], ['MediumSpace', [8287]], ['Mellintrf', [8499]], ['Mfr', [120080]], ['mfr', [120106]], ['mho', [8487]], ['micro', [181]], ['midast', [42]], ['midcir', [10992]], ['mid', [8739]], ['middot', [183]], ['minusb', [8863]], ['minus', [8722]], ['minusd', [8760]], ['minusdu', [10794]], ['MinusPlus', [8723]], ['mlcp', [10971]], ['mldr', [8230]], ['mnplus', [8723]], ['models', [8871]], ['Mopf', [120132]], ['mopf', [120158]], ['mp', [8723]], ['mscr', [120002]], ['Mscr', [8499]], ['mstpos', [8766]], ['Mu', [924]], ['mu', [956]], ['multimap', [8888]], ['mumap', [8888]], ['nabla', [8711]], ['Nacute', [323]], ['nacute', [324]], ['nang', [8736, 8402]], ['nap', [8777]], ['napE', [10864, 824]], ['napid', [8779, 824]], ['napos', [329]], ['napprox', [8777]], ['natural', [9838]], ['naturals', [8469]], ['natur', [9838]], ['nbsp', [160]], ['nbump', [8782, 824]], ['nbumpe', [8783, 824]], ['ncap', [10819]], ['Ncaron', [327]], ['ncaron', [328]], ['Ncedil', [325]], ['ncedil', [326]], ['ncong', [8775]], ['ncongdot', [10861, 824]], ['ncup', [10818]], ['Ncy', [1053]], ['ncy', [1085]], ['ndash', [8211]], ['nearhk', [10532]], ['nearr', [8599]], ['neArr', [8663]], ['nearrow', [8599]], ['ne', [8800]], ['nedot', [8784, 824]], ['NegativeMediumSpace', [8203]], ['NegativeThickSpace', [8203]], ['NegativeThinSpace', [8203]], ['NegativeVeryThinSpace', [8203]], ['nequiv', [8802]], ['nesear', [10536]], ['nesim', [8770, 824]], ['NestedGreaterGreater', [8811]], ['NestedLessLess', [8810]], ['nexist', [8708]], ['nexists', [8708]], ['Nfr', [120081]], ['nfr', [120107]], ['ngE', [8807, 824]], ['nge', [8817]], ['ngeq', [8817]], ['ngeqq', [8807, 824]], ['ngeqslant', [10878, 824]], ['nges', [10878, 824]], ['nGg', [8921, 824]], ['ngsim', [8821]], ['nGt', [8811, 8402]], ['ngt', [8815]], ['ngtr', [8815]], ['nGtv', [8811, 824]], ['nharr', [8622]], ['nhArr', [8654]], ['nhpar', [10994]], ['ni', [8715]], ['nis', [8956]], ['nisd', [8954]], ['niv', [8715]], ['NJcy', [1034]], ['njcy', [1114]], ['nlarr', [8602]], ['nlArr', [8653]], ['nldr', [8229]], ['nlE', [8806, 824]], ['nle', [8816]], ['nleftarrow', [8602]], ['nLeftarrow', [8653]], ['nleftrightarrow', [8622]], ['nLeftrightarrow', [8654]], ['nleq', [8816]], ['nleqq', [8806, 824]], ['nleqslant', [10877, 824]], ['nles', [10877, 824]], ['nless', [8814]], ['nLl', [8920, 824]], ['nlsim', [8820]], ['nLt', [8810, 8402]], ['nlt', [8814]], ['nltri', [8938]], ['nltrie', [8940]], ['nLtv', [8810, 824]], ['nmid', [8740]], ['NoBreak', [8288]], ['NonBreakingSpace', [160]], ['nopf', [120159]], ['Nopf', [8469]], ['Not', [10988]], ['not', [172]], ['NotCongruent', [8802]], ['NotCupCap', [8813]], ['NotDoubleVerticalBar', [8742]], ['NotElement', [8713]], ['NotEqual', [8800]], ['NotEqualTilde', [8770, 824]], ['NotExists', [8708]], ['NotGreater', [8815]], ['NotGreaterEqual', [8817]], ['NotGreaterFullEqual', [8807, 824]], ['NotGreaterGreater', [8811, 824]], ['NotGreaterLess', [8825]], ['NotGreaterSlantEqual', [10878, 824]], ['NotGreaterTilde', [8821]], ['NotHumpDownHump', [8782, 824]], ['NotHumpEqual', [8783, 824]], ['notin', [8713]], ['notindot', [8949, 824]], ['notinE', [8953, 824]], ['notinva', [8713]], ['notinvb', [8951]], ['notinvc', [8950]], ['NotLeftTriangleBar', [10703, 824]], ['NotLeftTriangle', [8938]], ['NotLeftTriangleEqual', [8940]], ['NotLess', [8814]], ['NotLessEqual', [8816]], ['NotLessGreater', [8824]], ['NotLessLess', [8810, 824]], ['NotLessSlantEqual', [10877, 824]], ['NotLessTilde', [8820]], ['NotNestedGreaterGreater', [10914, 824]], ['NotNestedLessLess', [10913, 824]], ['notni', [8716]], ['notniva', [8716]], ['notnivb', [8958]], ['notnivc', [8957]], ['NotPrecedes', [8832]], ['NotPrecedesEqual', [10927, 824]], ['NotPrecedesSlantEqual', [8928]], ['NotReverseElement', [8716]], ['NotRightTriangleBar', [10704, 824]], ['NotRightTriangle', [8939]], ['NotRightTriangleEqual', [8941]], ['NotSquareSubset', [8847, 824]], ['NotSquareSubsetEqual', [8930]], ['NotSquareSuperset', [8848, 824]], ['NotSquareSupersetEqual', [8931]], ['NotSubset', [8834, 8402]], ['NotSubsetEqual', [8840]], ['NotSucceeds', [8833]], ['NotSucceedsEqual', [10928, 824]], ['NotSucceedsSlantEqual', [8929]], ['NotSucceedsTilde', [8831, 824]], ['NotSuperset', [8835, 8402]], ['NotSupersetEqual', [8841]], ['NotTilde', [8769]], ['NotTildeEqual', [8772]], ['NotTildeFullEqual', [8775]], ['NotTildeTilde', [8777]], ['NotVerticalBar', [8740]], ['nparallel', [8742]], ['npar', [8742]], ['nparsl', [11005, 8421]], ['npart', [8706, 824]], ['npolint', [10772]], ['npr', [8832]], ['nprcue', [8928]], ['nprec', [8832]], ['npreceq', [10927, 824]], ['npre', [10927, 824]], ['nrarrc', [10547, 824]], ['nrarr', [8603]], ['nrArr', [8655]], ['nrarrw', [8605, 824]], ['nrightarrow', [8603]], ['nRightarrow', [8655]], ['nrtri', [8939]], ['nrtrie', [8941]], ['nsc', [8833]], ['nsccue', [8929]], ['nsce', [10928, 824]], ['Nscr', [119977]], ['nscr', [120003]], ['nshortmid', [8740]], ['nshortparallel', [8742]], ['nsim', [8769]], ['nsime', [8772]], ['nsimeq', [8772]], ['nsmid', [8740]], ['nspar', [8742]], ['nsqsube', [8930]], ['nsqsupe', [8931]], ['nsub', [8836]], ['nsubE', [10949, 824]], ['nsube', [8840]], ['nsubset', [8834, 8402]], ['nsubseteq', [8840]], ['nsubseteqq', [10949, 824]], ['nsucc', [8833]], ['nsucceq', [10928, 824]], ['nsup', [8837]], ['nsupE', [10950, 824]], ['nsupe', [8841]], ['nsupset', [8835, 8402]], ['nsupseteq', [8841]], ['nsupseteqq', [10950, 824]], ['ntgl', [8825]], ['Ntilde', [209]], ['ntilde', [241]], ['ntlg', [8824]], ['ntriangleleft', [8938]], ['ntrianglelefteq', [8940]], ['ntriangleright', [8939]], ['ntrianglerighteq', [8941]], ['Nu', [925]], ['nu', [957]], ['num', [35]], ['numero', [8470]], ['numsp', [8199]], ['nvap', [8781, 8402]], ['nvdash', [8876]], ['nvDash', [8877]], ['nVdash', [8878]], ['nVDash', [8879]], ['nvge', [8805, 8402]], ['nvgt', [62, 8402]], ['nvHarr', [10500]], ['nvinfin', [10718]], ['nvlArr', [10498]], ['nvle', [8804, 8402]], ['nvlt', [60, 8402]], ['nvltrie', [8884, 8402]], ['nvrArr', [10499]], ['nvrtrie', [8885, 8402]], ['nvsim', [8764, 8402]], ['nwarhk', [10531]], ['nwarr', [8598]], ['nwArr', [8662]], ['nwarrow', [8598]], ['nwnear', [10535]], ['Oacute', [211]], ['oacute', [243]], ['oast', [8859]], ['Ocirc', [212]], ['ocirc', [244]], ['ocir', [8858]], ['Ocy', [1054]], ['ocy', [1086]], ['odash', [8861]], ['Odblac', [336]], ['odblac', [337]], ['odiv', [10808]], ['odot', [8857]], ['odsold', [10684]], ['OElig', [338]], ['oelig', [339]], ['ofcir', [10687]], ['Ofr', [120082]], ['ofr', [120108]], ['ogon', [731]], ['Ograve', [210]], ['ograve', [242]], ['ogt', [10689]], ['ohbar', [10677]], ['ohm', [937]], ['oint', [8750]], ['olarr', [8634]], ['olcir', [10686]], ['olcross', [10683]], ['oline', [8254]], ['olt', [10688]], ['Omacr', [332]], ['omacr', [333]], ['Omega', [937]], ['omega', [969]], ['Omicron', [927]], ['omicron', [959]], ['omid', [10678]], ['ominus', [8854]], ['Oopf', [120134]], ['oopf', [120160]], ['opar', [10679]], ['OpenCurlyDoubleQuote', [8220]], ['OpenCurlyQuote', [8216]], ['operp', [10681]], ['oplus', [8853]], ['orarr', [8635]], ['Or', [10836]], ['or', [8744]], ['ord', [10845]], ['order', [8500]], ['orderof', [8500]], ['ordf', [170]], ['ordm', [186]], ['origof', [8886]], ['oror', [10838]], ['orslope', [10839]], ['orv', [10843]], ['oS', [9416]], ['Oscr', [119978]], ['oscr', [8500]], ['Oslash', [216]], ['oslash', [248]], ['osol', [8856]], ['Otilde', [213]], ['otilde', [245]], ['otimesas', [10806]], ['Otimes', [10807]], ['otimes', [8855]], ['Ouml', [214]], ['ouml', [246]], ['ovbar', [9021]], ['OverBar', [8254]], ['OverBrace', [9182]], ['OverBracket', [9140]], ['OverParenthesis', [9180]], ['para', [182]], ['parallel', [8741]], ['par', [8741]], ['parsim', [10995]], ['parsl', [11005]], ['part', [8706]], ['PartialD', [8706]], ['Pcy', [1055]], ['pcy', [1087]], ['percnt', [37]], ['period', [46]], ['permil', [8240]], ['perp', [8869]], ['pertenk', [8241]], ['Pfr', [120083]], ['pfr', [120109]], ['Phi', [934]], ['phi', [966]], ['phiv', [981]], ['phmmat', [8499]], ['phone', [9742]], ['Pi', [928]], ['pi', [960]], ['pitchfork', [8916]], ['piv', [982]], ['planck', [8463]], ['planckh', [8462]], ['plankv', [8463]], ['plusacir', [10787]], ['plusb', [8862]], ['pluscir', [10786]], ['plus', [43]], ['plusdo', [8724]], ['plusdu', [10789]], ['pluse', [10866]], ['PlusMinus', [177]], ['plusmn', [177]], ['plussim', [10790]], ['plustwo', [10791]], ['pm', [177]], ['Poincareplane', [8460]], ['pointint', [10773]], ['popf', [120161]], ['Popf', [8473]], ['pound', [163]], ['prap', [10935]], ['Pr', [10939]], ['pr', [8826]], ['prcue', [8828]], ['precapprox', [10935]], ['prec', [8826]], ['preccurlyeq', [8828]], ['Precedes', [8826]], ['PrecedesEqual', [10927]], ['PrecedesSlantEqual', [8828]], ['PrecedesTilde', [8830]], ['preceq', [10927]], ['precnapprox', [10937]], ['precneqq', [10933]], ['precnsim', [8936]], ['pre', [10927]], ['prE', [10931]], ['precsim', [8830]], ['prime', [8242]], ['Prime', [8243]], ['primes', [8473]], ['prnap', [10937]], ['prnE', [10933]], ['prnsim', [8936]], ['prod', [8719]], ['Product', [8719]], ['profalar', [9006]], ['profline', [8978]], ['profsurf', [8979]], ['prop', [8733]], ['Proportional', [8733]], ['Proportion', [8759]], ['propto', [8733]], ['prsim', [8830]], ['prurel', [8880]], ['Pscr', [119979]], ['pscr', [120005]], ['Psi', [936]], ['psi', [968]], ['puncsp', [8200]], ['Qfr', [120084]], ['qfr', [120110]], ['qint', [10764]], ['qopf', [120162]], ['Qopf', [8474]], ['qprime', [8279]], ['Qscr', [119980]], ['qscr', [120006]], ['quaternions', [8461]], ['quatint', [10774]], ['quest', [63]], ['questeq', [8799]], ['quot', [34]], ['QUOT', [34]], ['rAarr', [8667]], ['race', [8765, 817]], ['Racute', [340]], ['racute', [341]], ['radic', [8730]], ['raemptyv', [10675]], ['rang', [10217]], ['Rang', [10219]], ['rangd', [10642]], ['range', [10661]], ['rangle', [10217]], ['raquo', [187]], ['rarrap', [10613]], ['rarrb', [8677]], ['rarrbfs', [10528]], ['rarrc', [10547]], ['rarr', [8594]], ['Rarr', [8608]], ['rArr', [8658]], ['rarrfs', [10526]], ['rarrhk', [8618]], ['rarrlp', [8620]], ['rarrpl', [10565]], ['rarrsim', [10612]], ['Rarrtl', [10518]], ['rarrtl', [8611]], ['rarrw', [8605]], ['ratail', [10522]], ['rAtail', [10524]], ['ratio', [8758]], ['rationals', [8474]], ['rbarr', [10509]], ['rBarr', [10511]], ['RBarr', [10512]], ['rbbrk', [10099]], ['rbrace', [125]], ['rbrack', [93]], ['rbrke', [10636]], ['rbrksld', [10638]], ['rbrkslu', [10640]], ['Rcaron', [344]], ['rcaron', [345]], ['Rcedil', [342]], ['rcedil', [343]], ['rceil', [8969]], ['rcub', [125]], ['Rcy', [1056]], ['rcy', [1088]], ['rdca', [10551]], ['rdldhar', [10601]], ['rdquo', [8221]], ['rdquor', [8221]], ['rdsh', [8627]], ['real', [8476]], ['realine', [8475]], ['realpart', [8476]], ['reals', [8477]], ['Re', [8476]], ['rect', [9645]], ['reg', [174]], ['REG', [174]], ['ReverseElement', [8715]], ['ReverseEquilibrium', [8651]], ['ReverseUpEquilibrium', [10607]], ['rfisht', [10621]], ['rfloor', [8971]], ['rfr', [120111]], ['Rfr', [8476]], ['rHar', [10596]], ['rhard', [8641]], ['rharu', [8640]], ['rharul', [10604]], ['Rho', [929]], ['rho', [961]], ['rhov', [1009]], ['RightAngleBracket', [10217]], ['RightArrowBar', [8677]], ['rightarrow', [8594]], ['RightArrow', [8594]], ['Rightarrow', [8658]], ['RightArrowLeftArrow', [8644]], ['rightarrowtail', [8611]], ['RightCeiling', [8969]], ['RightDoubleBracket', [10215]], ['RightDownTeeVector', [10589]], ['RightDownVectorBar', [10581]], ['RightDownVector', [8642]], ['RightFloor', [8971]], ['rightharpoondown', [8641]], ['rightharpoonup', [8640]], ['rightleftarrows', [8644]], ['rightleftharpoons', [8652]], ['rightrightarrows', [8649]], ['rightsquigarrow', [8605]], ['RightTeeArrow', [8614]], ['RightTee', [8866]], ['RightTeeVector', [10587]], ['rightthreetimes', [8908]], ['RightTriangleBar', [10704]], ['RightTriangle', [8883]], ['RightTriangleEqual', [8885]], ['RightUpDownVector', [10575]], ['RightUpTeeVector', [10588]], ['RightUpVectorBar', [10580]], ['RightUpVector', [8638]], ['RightVectorBar', [10579]], ['RightVector', [8640]], ['ring', [730]], ['risingdotseq', [8787]], ['rlarr', [8644]], ['rlhar', [8652]], ['rlm', [8207]], ['rmoustache', [9137]], ['rmoust', [9137]], ['rnmid', [10990]], ['roang', [10221]], ['roarr', [8702]], ['robrk', [10215]], ['ropar', [10630]], ['ropf', [120163]], ['Ropf', [8477]], ['roplus', [10798]], ['rotimes', [10805]], ['RoundImplies', [10608]], ['rpar', [41]], ['rpargt', [10644]], ['rppolint', [10770]], ['rrarr', [8649]], ['Rrightarrow', [8667]], ['rsaquo', [8250]], ['rscr', [120007]], ['Rscr', [8475]], ['rsh', [8625]], ['Rsh', [8625]], ['rsqb', [93]], ['rsquo', [8217]], ['rsquor', [8217]], ['rthree', [8908]], ['rtimes', [8906]], ['rtri', [9657]], ['rtrie', [8885]], ['rtrif', [9656]], ['rtriltri', [10702]], ['RuleDelayed', [10740]], ['ruluhar', [10600]], ['rx', [8478]], ['Sacute', [346]], ['sacute', [347]], ['sbquo', [8218]], ['scap', [10936]], ['Scaron', [352]], ['scaron', [353]], ['Sc', [10940]], ['sc', [8827]], ['sccue', [8829]], ['sce', [10928]], ['scE', [10932]], ['Scedil', [350]], ['scedil', [351]], ['Scirc', [348]], ['scirc', [349]], ['scnap', [10938]], ['scnE', [10934]], ['scnsim', [8937]], ['scpolint', [10771]], ['scsim', [8831]], ['Scy', [1057]], ['scy', [1089]], ['sdotb', [8865]], ['sdot', [8901]], ['sdote', [10854]], ['searhk', [10533]], ['searr', [8600]], ['seArr', [8664]], ['searrow', [8600]], ['sect', [167]], ['semi', [59]], ['seswar', [10537]], ['setminus', [8726]], ['setmn', [8726]], ['sext', [10038]], ['Sfr', [120086]], ['sfr', [120112]], ['sfrown', [8994]], ['sharp', [9839]], ['SHCHcy', [1065]], ['shchcy', [1097]], ['SHcy', [1064]], ['shcy', [1096]], ['ShortDownArrow', [8595]], ['ShortLeftArrow', [8592]], ['shortmid', [8739]], ['shortparallel', [8741]], ['ShortRightArrow', [8594]], ['ShortUpArrow', [8593]], ['shy', [173]], ['Sigma', [931]], ['sigma', [963]], ['sigmaf', [962]], ['sigmav', [962]], ['sim', [8764]], ['simdot', [10858]], ['sime', [8771]], ['simeq', [8771]], ['simg', [10910]], ['simgE', [10912]], ['siml', [10909]], ['simlE', [10911]], ['simne', [8774]], ['simplus', [10788]], ['simrarr', [10610]], ['slarr', [8592]], ['SmallCircle', [8728]], ['smallsetminus', [8726]], ['smashp', [10803]], ['smeparsl', [10724]], ['smid', [8739]], ['smile', [8995]], ['smt', [10922]], ['smte', [10924]], ['smtes', [10924, 65024]], ['SOFTcy', [1068]], ['softcy', [1100]], ['solbar', [9023]], ['solb', [10692]], ['sol', [47]], ['Sopf', [120138]], ['sopf', [120164]], ['spades', [9824]], ['spadesuit', [9824]], ['spar', [8741]], ['sqcap', [8851]], ['sqcaps', [8851, 65024]], ['sqcup', [8852]], ['sqcups', [8852, 65024]], ['Sqrt', [8730]], ['sqsub', [8847]], ['sqsube', [8849]], ['sqsubset', [8847]], ['sqsubseteq', [8849]], ['sqsup', [8848]], ['sqsupe', [8850]], ['sqsupset', [8848]], ['sqsupseteq', [8850]], ['square', [9633]], ['Square', [9633]], ['SquareIntersection', [8851]], ['SquareSubset', [8847]], ['SquareSubsetEqual', [8849]], ['SquareSuperset', [8848]], ['SquareSupersetEqual', [8850]], ['SquareUnion', [8852]], ['squarf', [9642]], ['squ', [9633]], ['squf', [9642]], ['srarr', [8594]], ['Sscr', [119982]], ['sscr', [120008]], ['ssetmn', [8726]], ['ssmile', [8995]], ['sstarf', [8902]], ['Star', [8902]], ['star', [9734]], ['starf', [9733]], ['straightepsilon', [1013]], ['straightphi', [981]], ['strns', [175]], ['sub', [8834]], ['Sub', [8912]], ['subdot', [10941]], ['subE', [10949]], ['sube', [8838]], ['subedot', [10947]], ['submult', [10945]], ['subnE', [10955]], ['subne', [8842]], ['subplus', [10943]], ['subrarr', [10617]], ['subset', [8834]], ['Subset', [8912]], ['subseteq', [8838]], ['subseteqq', [10949]], ['SubsetEqual', [8838]], ['subsetneq', [8842]], ['subsetneqq', [10955]], ['subsim', [10951]], ['subsub', [10965]], ['subsup', [10963]], ['succapprox', [10936]], ['succ', [8827]], ['succcurlyeq', [8829]], ['Succeeds', [8827]], ['SucceedsEqual', [10928]], ['SucceedsSlantEqual', [8829]], ['SucceedsTilde', [8831]], ['succeq', [10928]], ['succnapprox', [10938]], ['succneqq', [10934]], ['succnsim', [8937]], ['succsim', [8831]], ['SuchThat', [8715]], ['sum', [8721]], ['Sum', [8721]], ['sung', [9834]], ['sup1', [185]], ['sup2', [178]], ['sup3', [179]], ['sup', [8835]], ['Sup', [8913]], ['supdot', [10942]], ['supdsub', [10968]], ['supE', [10950]], ['supe', [8839]], ['supedot', [10948]], ['Superset', [8835]], ['SupersetEqual', [8839]], ['suphsol', [10185]], ['suphsub', [10967]], ['suplarr', [10619]], ['supmult', [10946]], ['supnE', [10956]], ['supne', [8843]], ['supplus', [10944]], ['supset', [8835]], ['Supset', [8913]], ['supseteq', [8839]], ['supseteqq', [10950]], ['supsetneq', [8843]], ['supsetneqq', [10956]], ['supsim', [10952]], ['supsub', [10964]], ['supsup', [10966]], ['swarhk', [10534]], ['swarr', [8601]], ['swArr', [8665]], ['swarrow', [8601]], ['swnwar', [10538]], ['szlig', [223]], ['Tab', [9]], ['target', [8982]], ['Tau', [932]], ['tau', [964]], ['tbrk', [9140]], ['Tcaron', [356]], ['tcaron', [357]], ['Tcedil', [354]], ['tcedil', [355]], ['Tcy', [1058]], ['tcy', [1090]], ['tdot', [8411]], ['telrec', [8981]], ['Tfr', [120087]], ['tfr', [120113]], ['there4', [8756]], ['therefore', [8756]], ['Therefore', [8756]], ['Theta', [920]], ['theta', [952]], ['thetasym', [977]], ['thetav', [977]], ['thickapprox', [8776]], ['thicksim', [8764]], ['ThickSpace', [8287, 8202]], ['ThinSpace', [8201]], ['thinsp', [8201]], ['thkap', [8776]], ['thksim', [8764]], ['THORN', [222]], ['thorn', [254]], ['tilde', [732]], ['Tilde', [8764]], ['TildeEqual', [8771]], ['TildeFullEqual', [8773]], ['TildeTilde', [8776]], ['timesbar', [10801]], ['timesb', [8864]], ['times', [215]], ['timesd', [10800]], ['tint', [8749]], ['toea', [10536]], ['topbot', [9014]], ['topcir', [10993]], ['top', [8868]], ['Topf', [120139]], ['topf', [120165]], ['topfork', [10970]], ['tosa', [10537]], ['tprime', [8244]], ['trade', [8482]], ['TRADE', [8482]], ['triangle', [9653]], ['triangledown', [9663]], ['triangleleft', [9667]], ['trianglelefteq', [8884]], ['triangleq', [8796]], ['triangleright', [9657]], ['trianglerighteq', [8885]], ['tridot', [9708]], ['trie', [8796]], ['triminus', [10810]], ['TripleDot', [8411]], ['triplus', [10809]], ['trisb', [10701]], ['tritime', [10811]], ['trpezium', [9186]], ['Tscr', [119983]], ['tscr', [120009]], ['TScy', [1062]], ['tscy', [1094]], ['TSHcy', [1035]], ['tshcy', [1115]], ['Tstrok', [358]], ['tstrok', [359]], ['twixt', [8812]], ['twoheadleftarrow', [8606]], ['twoheadrightarrow', [8608]], ['Uacute', [218]], ['uacute', [250]], ['uarr', [8593]], ['Uarr', [8607]], ['uArr', [8657]], ['Uarrocir', [10569]], ['Ubrcy', [1038]], ['ubrcy', [1118]], ['Ubreve', [364]], ['ubreve', [365]], ['Ucirc', [219]], ['ucirc', [251]], ['Ucy', [1059]], ['ucy', [1091]], ['udarr', [8645]], ['Udblac', [368]], ['udblac', [369]], ['udhar', [10606]], ['ufisht', [10622]], ['Ufr', [120088]], ['ufr', [120114]], ['Ugrave', [217]], ['ugrave', [249]], ['uHar', [10595]], ['uharl', [8639]], ['uharr', [8638]], ['uhblk', [9600]], ['ulcorn', [8988]], ['ulcorner', [8988]], ['ulcrop', [8975]], ['ultri', [9720]], ['Umacr', [362]], ['umacr', [363]], ['uml', [168]], ['UnderBar', [95]], ['UnderBrace', [9183]], ['UnderBracket', [9141]], ['UnderParenthesis', [9181]], ['Union', [8899]], ['UnionPlus', [8846]], ['Uogon', [370]], ['uogon', [371]], ['Uopf', [120140]], ['uopf', [120166]], ['UpArrowBar', [10514]], ['uparrow', [8593]], ['UpArrow', [8593]], ['Uparrow', [8657]], ['UpArrowDownArrow', [8645]], ['updownarrow', [8597]], ['UpDownArrow', [8597]], ['Updownarrow', [8661]], ['UpEquilibrium', [10606]], ['upharpoonleft', [8639]], ['upharpoonright', [8638]], ['uplus', [8846]], ['UpperLeftArrow', [8598]], ['UpperRightArrow', [8599]], ['upsi', [965]], ['Upsi', [978]], ['upsih', [978]], ['Upsilon', [933]], ['upsilon', [965]], ['UpTeeArrow', [8613]], ['UpTee', [8869]], ['upuparrows', [8648]], ['urcorn', [8989]], ['urcorner', [8989]], ['urcrop', [8974]], ['Uring', [366]], ['uring', [367]], ['urtri', [9721]], ['Uscr', [119984]], ['uscr', [120010]], ['utdot', [8944]], ['Utilde', [360]], ['utilde', [361]], ['utri', [9653]], ['utrif', [9652]], ['uuarr', [8648]], ['Uuml', [220]], ['uuml', [252]], ['uwangle', [10663]], ['vangrt', [10652]], ['varepsilon', [1013]], ['varkappa', [1008]], ['varnothing', [8709]], ['varphi', [981]], ['varpi', [982]], ['varpropto', [8733]], ['varr', [8597]], ['vArr', [8661]], ['varrho', [1009]], ['varsigma', [962]], ['varsubsetneq', [8842, 65024]], ['varsubsetneqq', [10955, 65024]], ['varsupsetneq', [8843, 65024]], ['varsupsetneqq', [10956, 65024]], ['vartheta', [977]], ['vartriangleleft', [8882]], ['vartriangleright', [8883]], ['vBar', [10984]], ['Vbar', [10987]], ['vBarv', [10985]], ['Vcy', [1042]], ['vcy', [1074]], ['vdash', [8866]], ['vDash', [8872]], ['Vdash', [8873]], ['VDash', [8875]], ['Vdashl', [10982]], ['veebar', [8891]], ['vee', [8744]], ['Vee', [8897]], ['veeeq', [8794]], ['vellip', [8942]], ['verbar', [124]], ['Verbar', [8214]], ['vert', [124]], ['Vert', [8214]], ['VerticalBar', [8739]], ['VerticalLine', [124]], ['VerticalSeparator', [10072]], ['VerticalTilde', [8768]], ['VeryThinSpace', [8202]], ['Vfr', [120089]], ['vfr', [120115]], ['vltri', [8882]], ['vnsub', [8834, 8402]], ['vnsup', [8835, 8402]], ['Vopf', [120141]], ['vopf', [120167]], ['vprop', [8733]], ['vrtri', [8883]], ['Vscr', [119985]], ['vscr', [120011]], ['vsubnE', [10955, 65024]], ['vsubne', [8842, 65024]], ['vsupnE', [10956, 65024]], ['vsupne', [8843, 65024]], ['Vvdash', [8874]], ['vzigzag', [10650]], ['Wcirc', [372]], ['wcirc', [373]], ['wedbar', [10847]], ['wedge', [8743]], ['Wedge', [8896]], ['wedgeq', [8793]], ['weierp', [8472]], ['Wfr', [120090]], ['wfr', [120116]], ['Wopf', [120142]], ['wopf', [120168]], ['wp', [8472]], ['wr', [8768]], ['wreath', [8768]], ['Wscr', [119986]], ['wscr', [120012]], ['xcap', [8898]], ['xcirc', [9711]], ['xcup', [8899]], ['xdtri', [9661]], ['Xfr', [120091]], ['xfr', [120117]], ['xharr', [10231]], ['xhArr', [10234]], ['Xi', [926]], ['xi', [958]], ['xlarr', [10229]], ['xlArr', [10232]], ['xmap', [10236]], ['xnis', [8955]], ['xodot', [10752]], ['Xopf', [120143]], ['xopf', [120169]], ['xoplus', [10753]], ['xotime', [10754]], ['xrarr', [10230]], ['xrArr', [10233]], ['Xscr', [119987]], ['xscr', [120013]], ['xsqcup', [10758]], ['xuplus', [10756]], ['xutri', [9651]], ['xvee', [8897]], ['xwedge', [8896]], ['Yacute', [221]], ['yacute', [253]], ['YAcy', [1071]], ['yacy', [1103]], ['Ycirc', [374]], ['ycirc', [375]], ['Ycy', [1067]], ['ycy', [1099]], ['yen', [165]], ['Yfr', [120092]], ['yfr', [120118]], ['YIcy', [1031]], ['yicy', [1111]], ['Yopf', [120144]], ['yopf', [120170]], ['Yscr', [119988]], ['yscr', [120014]], ['YUcy', [1070]], ['yucy', [1102]], ['yuml', [255]], ['Yuml', [376]], ['Zacute', [377]], ['zacute', [378]], ['Zcaron', [381]], ['zcaron', [382]], ['Zcy', [1047]], ['zcy', [1079]], ['Zdot', [379]], ['zdot', [380]], ['zeetrf', [8488]], ['ZeroWidthSpace', [8203]], ['Zeta', [918]], ['zeta', [950]], ['zfr', [120119]], ['Zfr', [8488]], ['ZHcy', [1046]], ['zhcy', [1078]], ['zigrarr', [8669]], ['zopf', [120171]], ['Zopf', [8484]], ['Zscr', [119989]], ['zscr', [120015]], ['zwj', [8205]], ['zwnj', [8204]]];\n\nvar alphaIndex = {};\nvar charIndex = {};\n\ncreateIndexes(alphaIndex, charIndex);\n\n/**\n * @constructor\n */\nfunction Html5Entities() {}\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml5Entities.prototype.decode = function(str) {\n    if (str.length === 0) {\n        return '';\n    }\n    return str.replace(/&(#?[\\w\\d]+);?/g, function(s, entity) {\n        var chr;\n        if (entity.charAt(0) === \"#\") {\n            var code = entity.charAt(1) === 'x' ?\n                parseInt(entity.substr(2).toLowerCase(), 16) :\n                parseInt(entity.substr(1));\n\n            if (!(isNaN(code) || code < -32768 || code > 65535)) {\n                chr = String.fromCharCode(code);\n            }\n        } else {\n            chr = alphaIndex[entity];\n        }\n        return chr || s;\n    });\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n Html5Entities.decode = function(str) {\n    return new Html5Entities().decode(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml5Entities.prototype.encode = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var charInfo = charIndex[str.charCodeAt(i)];\n        if (charInfo) {\n            var alpha = charInfo[str.charCodeAt(i + 1)];\n            if (alpha) {\n                i++;\n            } else {\n                alpha = charInfo[''];\n            }\n            if (alpha) {\n                result += \"&\" + alpha + \";\";\n                i++;\n                continue;\n            }\n        }\n        result += str.charAt(i);\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n Html5Entities.encode = function(str) {\n    return new Html5Entities().encode(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml5Entities.prototype.encodeNonUTF = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var c = str.charCodeAt(i);\n        var charInfo = charIndex[c];\n        if (charInfo) {\n            var alpha = charInfo[str.charCodeAt(i + 1)];\n            if (alpha) {\n                i++;\n            } else {\n                alpha = charInfo[''];\n            }\n            if (alpha) {\n                result += \"&\" + alpha + \";\";\n                i++;\n                continue;\n            }\n        }\n        if (c < 32 || c > 126) {\n            result += '&#' + c + ';';\n        } else {\n            result += str.charAt(i);\n        }\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n Html5Entities.encodeNonUTF = function(str) {\n    return new Html5Entities().encodeNonUTF(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nHtml5Entities.prototype.encodeNonASCII = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var c = str.charCodeAt(i);\n        if (c <= 255) {\n            result += str[i++];\n            continue;\n        }\n        result += '&#' + c + ';';\n        i++\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n Html5Entities.encodeNonASCII = function(str) {\n    return new Html5Entities().encodeNonASCII(str);\n };\n\n/**\n * @param {Object} alphaIndex Passed by reference.\n * @param {Object} charIndex Passed by reference.\n */\nfunction createIndexes(alphaIndex, charIndex) {\n    var i = ENTITIES.length;\n    var _results = [];\n    while (i--) {\n        var e = ENTITIES[i];\n        var alpha = e[0];\n        var chars = e[1];\n        var chr = chars[0];\n        var addChar = (chr < 32 || chr > 126) || chr === 62 || chr === 60 || chr === 38 || chr === 34 || chr === 39;\n        var charInfo;\n        if (addChar) {\n            charInfo = charIndex[chr] = charIndex[chr] || {};\n        }\n        if (chars[1]) {\n            var chr2 = chars[1];\n            alphaIndex[alpha] = String.fromCharCode(chr) + String.fromCharCode(chr2);\n            _results.push(addChar && (charInfo[chr2] = alpha));\n        } else {\n            alphaIndex[alpha] = String.fromCharCode(chr);\n            _results.push(addChar && (charInfo[''] = alpha));\n        }\n    }\n}\n\nmodule.exports = Html5Entities;\n\n},{}],155:[function(require,module,exports){\nvar ALPHA_INDEX = {\n    '&lt': '<',\n    '&gt': '>',\n    '&quot': '\"',\n    '&apos': '\\'',\n    '&amp': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&apos;': '\\'',\n    '&amp;': '&'\n};\n\nvar CHAR_INDEX = {\n    60: 'lt',\n    62: 'gt',\n    34: 'quot',\n    39: 'apos',\n    38: 'amp'\n};\n\nvar CHAR_S_INDEX = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&apos;',\n    '&': '&amp;'\n};\n\n/**\n * @constructor\n */\nfunction XmlEntities() {}\n\n/**\n * @param {String} str\n * @returns {String}\n */\nXmlEntities.prototype.encode = function(str) {\n    if (str.length === 0) {\n        return '';\n    }\n    return str.replace(/<|>|\"|'|&/g, function(s) {\n        return CHAR_S_INDEX[s];\n    });\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n XmlEntities.encode = function(str) {\n    return new XmlEntities().encode(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nXmlEntities.prototype.decode = function(str) {\n    if (str.length === 0) {\n        return '';\n    }\n    return str.replace(/&#?[0-9a-zA-Z]+;?/g, function(s) {\n        if (s.charAt(1) === '#') {\n            var code = s.charAt(2).toLowerCase() === 'x' ?\n                parseInt(s.substr(3), 16) :\n                parseInt(s.substr(2));\n\n            if (isNaN(code) || code < -32768 || code > 65535) {\n                return '';\n            }\n            return String.fromCharCode(code);\n        }\n        return ALPHA_INDEX[s] || s;\n    });\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n XmlEntities.decode = function(str) {\n    return new XmlEntities().decode(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nXmlEntities.prototype.encodeNonUTF = function(str) {\n    var strLength = str.length;\n    if (strLength === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLength) {\n        var c = str.charCodeAt(i);\n        var alpha = CHAR_INDEX[c];\n        if (alpha) {\n            result += \"&\" + alpha + \";\";\n            i++;\n            continue;\n        }\n        if (c < 32 || c > 126) {\n            result += '&#' + c + ';';\n        } else {\n            result += str.charAt(i);\n        }\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n XmlEntities.encodeNonUTF = function(str) {\n    return new XmlEntities().encodeNonUTF(str);\n };\n\n/**\n * @param {String} str\n * @returns {String}\n */\nXmlEntities.prototype.encodeNonASCII = function(str) {\n    var strLenght = str.length;\n    if (strLenght === 0) {\n        return '';\n    }\n    var result = '';\n    var i = 0;\n    while (i < strLenght) {\n        var c = str.charCodeAt(i);\n        if (c <= 255) {\n            result += str[i++];\n            continue;\n        }\n        result += '&#' + c + ';';\n        i++;\n    }\n    return result;\n};\n\n/**\n * @param {String} str\n * @returns {String}\n */\n XmlEntities.encodeNonASCII = function(str) {\n    return new XmlEntities().encodeNonASCII(str);\n };\n\nmodule.exports = XmlEntities;\n\n},{}],156:[function(require,module,exports){\nvar convertHTML = require('./lib/html-to-vdom');\nmodule.exports = function initializeConverter (dependencies) {\n    if (!dependencies.VNode || !dependencies.VText) {\n        throw new Error('html-to-vdom needs to be initialized with VNode and VText');\n    }\n    return convertHTML(dependencies.VNode, dependencies.VText);\n};\n\n},{\"./lib/html-to-vdom\":158}],157:[function(require,module,exports){\n/*\n    Adapted from https://github.com/facebook/react/blob/c265504fe2fdeadf0e5358879a3c141628b37a23/src/renderers/dom/shared/HTMLDOMPropertyConfig.js\n */\nvar decode = require('ent').decode;\n\nvar MUST_USE_ATTRIBUTE = 0x1;\nvar MUST_USE_PROPERTY = 0x2;\nvar HAS_BOOLEAN_VALUE = 0x8;\nvar HAS_NUMERIC_VALUE = 0x10;\nvar HAS_POSITIVE_NUMERIC_VALUE = 0x20 | 0x10;\nvar HAS_OVERLOADED_BOOLEAN_VALUE = 0x40;\n\nfunction checkMask(value, bitmask) {\n  return (value & bitmask) === bitmask;\n}\n\nvar isCustomAttribute = RegExp.prototype.test.bind(\n    /^(data|aria)-[a-z_][a-z\\d_.\\-]*$/\n);\n\nvar HTMLDOMPropertyConfig = {\n  \n  Properties: {\n    /**\n     * Standard Properties\n     */\n    accept: null,\n    acceptCharset: null,\n    accessKey: null,\n    action: null,\n    allowFullScreen: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    allowTransparency: MUST_USE_ATTRIBUTE,\n    alt: null,\n    async: HAS_BOOLEAN_VALUE,\n    autoComplete: null,\n    autoFocus: HAS_BOOLEAN_VALUE,\n    autoPlay: HAS_BOOLEAN_VALUE,\n    capture: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    cellPadding: null,\n    cellSpacing: null,\n    charSet: MUST_USE_ATTRIBUTE,\n    challenge: MUST_USE_ATTRIBUTE,\n    checked: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    classID: MUST_USE_ATTRIBUTE,\n    // To set className on SVG elements, it's necessary to use .setAttribute;\n    // this works on HTML elements too in all browsers except IE8.\n    className: MUST_USE_ATTRIBUTE,\n    cols: MUST_USE_ATTRIBUTE | HAS_POSITIVE_NUMERIC_VALUE,\n    colSpan: null,\n    content: null,\n    contentEditable: null,\n    contextMenu: MUST_USE_ATTRIBUTE,\n    controls: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    coords: null,\n    crossOrigin: null,\n    data: null, // For `<object />` acts as `src`.\n    dateTime: MUST_USE_ATTRIBUTE,\n    defer: HAS_BOOLEAN_VALUE,\n    dir: null,\n    disabled: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    download: HAS_OVERLOADED_BOOLEAN_VALUE,\n    draggable: null,\n    encType: null,\n    form: MUST_USE_ATTRIBUTE,\n    formAction: MUST_USE_ATTRIBUTE,\n    formEncType: MUST_USE_ATTRIBUTE,\n    formMethod: MUST_USE_ATTRIBUTE,\n    formNoValidate: HAS_BOOLEAN_VALUE,\n    formTarget: MUST_USE_ATTRIBUTE,\n    frameBorder: MUST_USE_ATTRIBUTE,\n    headers: null,\n    height: MUST_USE_ATTRIBUTE,\n    hidden: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    high: null,\n    href: null,\n    hrefLang: null,\n    htmlFor: null,\n    httpEquiv: null,\n    icon: null,\n    id: MUST_USE_PROPERTY,\n    is: MUST_USE_ATTRIBUTE,\n    keyParams: MUST_USE_ATTRIBUTE,\n    keyType: MUST_USE_ATTRIBUTE,\n    label: null,\n    lang: null,\n    list: MUST_USE_ATTRIBUTE,\n    loop: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    low: null,\n    manifest: MUST_USE_ATTRIBUTE,\n    marginHeight: null,\n    marginWidth: null,\n    max: null,\n    maxLength: MUST_USE_ATTRIBUTE,\n    media: MUST_USE_ATTRIBUTE,\n    mediaGroup: null,\n    method: null,\n    min: null,\n    minLength: MUST_USE_ATTRIBUTE,\n    multiple: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    muted: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    name: null,\n    noValidate: HAS_BOOLEAN_VALUE,\n    open: HAS_BOOLEAN_VALUE,\n    optimum: null,\n    pattern: null,\n    placeholder: null,\n    poster: null,\n    preload: null,\n    radioGroup: null,\n    readOnly: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    rel: null,\n    required: HAS_BOOLEAN_VALUE,\n    role: MUST_USE_ATTRIBUTE,\n    rows: MUST_USE_ATTRIBUTE | HAS_POSITIVE_NUMERIC_VALUE,\n    rowSpan: null,\n    sandbox: null,\n    scope: null,\n    scoped: HAS_BOOLEAN_VALUE,\n    scrolling: null,\n    seamless: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    selected: MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE,\n    shape: null,\n    size: MUST_USE_ATTRIBUTE | HAS_POSITIVE_NUMERIC_VALUE,\n    sizes: MUST_USE_ATTRIBUTE,\n    span: HAS_POSITIVE_NUMERIC_VALUE,\n    spellCheck: null,\n    src: null,\n    srcDoc: MUST_USE_PROPERTY,\n    srcSet: MUST_USE_ATTRIBUTE,\n    start: HAS_NUMERIC_VALUE,\n    step: null,\n    style: null,\n    tabIndex: null,\n    target: null,\n    title: null,\n    type: null,\n    useMap: null,\n    value: MUST_USE_PROPERTY,\n    width: MUST_USE_ATTRIBUTE,\n    wmode: MUST_USE_ATTRIBUTE,\n\n    /**\n     * Non-standard Properties\n     */\n    // autoCapitalize and autoCorrect are supported in Mobile Safari for\n    // keyboard hints.\n    autoCapitalize: null,\n    autoCorrect: null,\n    // itemProp, itemScope, itemType are for\n    // Microdata support. See http://schema.org/docs/gs.html\n    itemProp: MUST_USE_ATTRIBUTE,\n    itemScope: MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE,\n    itemType: MUST_USE_ATTRIBUTE,\n    // itemID and itemRef are for Microdata support as well but\n    // only specified in the the WHATWG spec document. See\n    // https://html.spec.whatwg.org/multipage/microdata.html#microdata-dom-api\n    itemID: MUST_USE_ATTRIBUTE,\n    itemRef: MUST_USE_ATTRIBUTE,\n    // property is supported for OpenGraph in meta tags.\n    property: null,\n    // IE-only attribute that controls focus behavior\n    unselectable: MUST_USE_ATTRIBUTE\n  }\n};\n\nvar parseStyles = function(input) {\n    var attributes = input.split(';');\n    var styles = attributes.reduce(function(object, attribute){\n        var entry = attribute.split(/:(.+)/);\n        if (entry[0] && entry[1]) {\n            object[entry[0].trim()] = entry[1].trim();\n        }\n        return object;\n    },{});\n    return styles;\n};\n\nvar propertyToAttributeMapping = {\n    'className': 'class',\n    'htmlFor': 'for',\n    'httpEquiv': 'http-equiv',\n    'acceptCharset': 'accept-charset'\n};\n\nvar propertyValueConversions = {\n    'style': parseStyles,\n    'placeholder': decode,\n    'title': decode,\n    'alt': decode\n};\n\nvar getPropertyInfo = (function () {\n    var propInfoByAttributeName = {};\n\n    Object.keys(HTMLDOMPropertyConfig.Properties).forEach(function (propName) {\n        var propConfig = HTMLDOMPropertyConfig.Properties[propName];\n        var attributeName = propertyToAttributeMapping[propName] || propName.toLowerCase();\n\n        var propertyInfo = {\n            attributeName: attributeName,\n            propertyName: propName,\n\n            mustUseAttribute: checkMask(propConfig, MUST_USE_ATTRIBUTE),\n            mustUseProperty: checkMask(propConfig, MUST_USE_PROPERTY),\n            hasBooleanValue: checkMask(propConfig, HAS_BOOLEAN_VALUE),\n            hasNumericValue: checkMask(propConfig, HAS_NUMERIC_VALUE),\n            hasPositiveNumericValue:\n            checkMask(propConfig, HAS_POSITIVE_NUMERIC_VALUE),\n            hasOverloadedBooleanValue:\n            checkMask(propConfig, HAS_OVERLOADED_BOOLEAN_VALUE),\n        };\n\n        propInfoByAttributeName[attributeName] = propertyInfo;\n    });\n\n    return function (attributeName) {\n        return propInfoByAttributeName[attributeName];\n    };\n})();\n\n\nvar convertTagAttributes = function (tag) {\n    var attributes = tag.attribs;\n\n    var vdomProperties = {\n        attributes: {}\n    };\n\n    Object.keys(attributes).forEach(function (attributeName) {\n        var lowerCased = attributeName.toLowerCase();\n        var propInfo = getPropertyInfo(lowerCased);\n\n        var value = attributes[attributeName];\n        if (isCustomAttribute(attributeName) || !propInfo) {\n            vdomProperties.attributes[attributeName] = value;\n            return;\n        }\n        \n        var valueConverter = propertyValueConversions[propInfo.propertyName];\n        if (valueConverter) {\n            value = valueConverter(value);\n        }\n\n        if (propInfo.mustUseAttribute) {\n            if (propInfo.hasBooleanValue) {\n                // Boolean attributes come in as an empty string or the \n                vdomProperties.attributes[propInfo.attributeName] = '';\n            }\n            else {\n                vdomProperties.attributes[propInfo.attributeName] = value;\n            }\n        }\n        // Anything we don't set as an attribute is treated as a property\n        else {\n            var isTrue;\n            if (propInfo.hasBooleanValue) {\n                isTrue = (value === '' || value.toLowerCase() === propInfo.attributeName);\n                vdomProperties[propInfo.propertyName] = isTrue ? true : false;\n            }\n            else if (propInfo.hasOverloadedBooleanValue) {\n                isTrue = (value === '');\n                vdomProperties[propInfo.propertyName] = isTrue ? true : value;\n            }\n            else if (propInfo.hasNumericValue || propInfo.hasPositiveNumericValue) {\n                vdomProperties[propInfo.propertyName] = Number(value);\n            }\n            else {\n                vdomProperties[propInfo.propertyName] = value;\n            }\n        }\n\n    });\n\n    return vdomProperties;\n};\n\nmodule.exports = convertTagAttributes;\n\n},{\"ent\":137}],158:[function(require,module,exports){\nvar createConverter = require('./htmlparser-to-vdom');\nvar parseHTML = require('./parse-html');\n\nmodule.exports = function initializeHtmlToVdom (VTree, VText) {\n    var htmlparserToVdom = createConverter(VTree, VText);\n    return function convertHTML(options, html) {\n        var noOptions = typeof html === 'undefined' && typeof options === 'string';\n        var hasOptions = !noOptions;\n\n        // was html supplied as the only argument?\n        var htmlToConvert = noOptions ? options : html;\n        var getVNodeKey = hasOptions ? options.getVNodeKey : undefined;\n\n        var tags = parseHTML(htmlToConvert);\n\n        var convertedHTML;\n        if (tags.length > 1) {\n            convertedHTML = tags.map(function (tag) {\n                return htmlparserToVdom.convert(tag, getVNodeKey);\n            });\n        }\n        else {\n            convertedHTML = htmlparserToVdom.convert(tags[0], getVNodeKey);\n        }\n        \n        return convertedHTML;\n    };\n};\n\n},{\"./htmlparser-to-vdom\":159,\"./parse-html\":160}],159:[function(require,module,exports){\nvar decode = require('ent').decode;\nvar convertTagAttributes = require('./convert-tag-attributes');\n\nmodule.exports = function createConverter (VNode, VText) {\n    var converter = {\n        convert: function (node, getVNodeKey) {\n            if (node.type === 'tag' || node.type === 'script' || node.type === 'style') {\n                return converter.convertTag(node, getVNodeKey);\n            } else if (node.type === 'text') {\n                return new VText(decode(node.data));\n            } else {\n                // converting an unsupported node, return an empty text node instead.\n                return new VText('');\n            }\n        },\n        convertTag: function (tag, getVNodeKey) {\n            var attributes = convertTagAttributes(tag);\n            var key;\n\n            if (getVNodeKey) {\n                key = getVNodeKey(attributes);\n            }\n\n            var children = Array.prototype.map.call(tag.children || [], function(node) {\n                return converter.convert(node, getVNodeKey);\n            });\n\n            return new VNode(tag.name, attributes, children, key);\n        }\n    };\n    return converter;\n};\n\n},{\"./convert-tag-attributes\":157,\"ent\":137}],160:[function(require,module,exports){\nvar htmlparser = require('htmlparser2');\n\nvar parseHTML = function parseHTML (html) {\n    var handler = new htmlparser.DomHandler();\n\n    var parser = new htmlparser.Parser(handler, {\n        lowerCaseAttributeNames: false\n    });\n    parser.parseComplete(html);\n    return handler.dom;\n};\n\nmodule.exports = parseHTML;\n\n},{\"htmlparser2\":168}],161:[function(require,module,exports){\nmodule.exports = CollectingHandler;\n\nfunction CollectingHandler(cbs){\n\tthis._cbs = cbs || {};\n\tthis.events = [];\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name){\n\tif(EVENTS[name] === 0){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(){\n\t\t\tthis.events.push([name]);\n\t\t\tif(this._cbs[name]) this._cbs[name]();\n\t\t};\n\t} else if(EVENTS[name] === 1){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(a){\n\t\t\tthis.events.push([name, a]);\n\t\t\tif(this._cbs[name]) this._cbs[name](a);\n\t\t};\n\t} else if(EVENTS[name] === 2){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(a, b){\n\t\t\tthis.events.push([name, a, b]);\n\t\t\tif(this._cbs[name]) this._cbs[name](a, b);\n\t\t};\n\t} else {\n\t\tthrow Error(\"wrong number of arguments\");\n\t}\n});\n\nCollectingHandler.prototype.onreset = function(){\n\tthis.events = [];\n\tif(this._cbs.onreset) this._cbs.onreset();\n};\n\nCollectingHandler.prototype.restart = function(){\n\tif(this._cbs.onreset) this._cbs.onreset();\n\n\tfor(var i = 0, len = this.events.length; i < len; i++){\n\t\tif(this._cbs[this.events[i][0]]){\n\n\t\t\tvar num = this.events[i].length;\n\n\t\t\tif(num === 1){\n\t\t\t\tthis._cbs[this.events[i][0]]();\n\t\t\t} else if(num === 2){\n\t\t\t\tthis._cbs[this.events[i][0]](this.events[i][1]);\n\t\t\t} else {\n\t\t\t\tthis._cbs[this.events[i][0]](this.events[i][1], this.events[i][2]);\n\t\t\t}\n\t\t}\n\t}\n};\n\n},{\"./\":168}],162:[function(require,module,exports){\nvar index = require(\"./index.js\"),\n    DomHandler = index.DomHandler,\n    DomUtils = index.DomUtils;\n\n//TODO: make this a streamable handler\nfunction FeedHandler(callback, options){\n\tthis.init(callback, options);\n}\n\nrequire(\"inherits\")(FeedHandler, DomHandler);\n\nFeedHandler.prototype.init = DomHandler;\n\nfunction getElements(what, where){\n\treturn DomUtils.getElementsByTagName(what, where, true);\n}\nfunction getOneElement(what, where){\n\treturn DomUtils.getElementsByTagName(what, where, true, 1)[0];\n}\nfunction fetch(what, where, recurse){\n\treturn DomUtils.getText(\n\t\tDomUtils.getElementsByTagName(what, where, recurse, 1)\n\t).trim();\n}\n\nfunction addConditionally(obj, prop, what, where, recurse){\n\tvar tmp = fetch(what, where, recurse);\n\tif(tmp) obj[prop] = tmp;\n}\n\nvar isValidFeed = function(value){\n\treturn value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n};\n\nFeedHandler.prototype.onend = function(){\n\tvar feed = {},\n\t    feedRoot = getOneElement(isValidFeed, this.dom),\n\t    tmp, childs;\n\n\tif(feedRoot){\n\t\tif(feedRoot.name === \"feed\"){\n\t\t\tchilds = feedRoot.children;\n\n\t\t\tfeed.type = \"atom\";\n\t\t\taddConditionally(feed, \"id\", \"id\", childs);\n\t\t\taddConditionally(feed, \"title\", \"title\", childs);\n\t\t\tif((tmp = getOneElement(\"link\", childs)) && (tmp = tmp.attribs) && (tmp = tmp.href)) feed.link = tmp;\n\t\t\taddConditionally(feed, \"description\", \"subtitle\", childs);\n\t\t\tif((tmp = fetch(\"updated\", childs))) feed.updated = new Date(tmp);\n\t\t\taddConditionally(feed, \"author\", \"email\", childs, true);\n\n\t\t\tfeed.items = getElements(\"entry\", childs).map(function(item){\n\t\t\t\tvar entry = {}, tmp;\n\n\t\t\t\titem = item.children;\n\n\t\t\t\taddConditionally(entry, \"id\", \"id\", item);\n\t\t\t\taddConditionally(entry, \"title\", \"title\", item);\n\t\t\t\tif((tmp = getOneElement(\"link\", item)) && (tmp = tmp.attribs) && (tmp = tmp.href)) entry.link = tmp;\n\t\t\t\tif((tmp = fetch(\"summary\", item) || fetch(\"content\", item))) entry.description = tmp;\n\t\t\t\tif((tmp = fetch(\"updated\", item))) entry.pubDate = new Date(tmp);\n\t\t\t\treturn entry;\n\t\t\t});\n\t\t} else {\n\t\t\tchilds = getOneElement(\"channel\", feedRoot.children).children;\n\n\t\t\tfeed.type = feedRoot.name.substr(0, 3);\n\t\t\tfeed.id = \"\";\n\t\t\taddConditionally(feed, \"title\", \"title\", childs);\n\t\t\taddConditionally(feed, \"link\", \"link\", childs);\n\t\t\taddConditionally(feed, \"description\", \"description\", childs);\n\t\t\tif((tmp = fetch(\"lastBuildDate\", childs))) feed.updated = new Date(tmp);\n\t\t\taddConditionally(feed, \"author\", \"managingEditor\", childs, true);\n\n\t\t\tfeed.items = getElements(\"item\", feedRoot.children).map(function(item){\n\t\t\t\tvar entry = {}, tmp;\n\n\t\t\t\titem = item.children;\n\n\t\t\t\taddConditionally(entry, \"id\", \"guid\", item);\n\t\t\t\taddConditionally(entry, \"title\", \"title\", item);\n\t\t\t\taddConditionally(entry, \"link\", \"link\", item);\n\t\t\t\taddConditionally(entry, \"description\", \"description\", item);\n\t\t\t\tif((tmp = fetch(\"pubDate\", item))) entry.pubDate = new Date(tmp);\n\t\t\t\treturn entry;\n\t\t\t});\n\t\t}\n\t}\n\tthis.dom = feed;\n\tDomHandler.prototype._handleCallback.call(\n\t\tthis, feedRoot ? null : Error(\"couldn't find root of feed\")\n\t);\n};\n\nmodule.exports = FeedHandler;\n\n},{\"./index.js\":168,\"inherits\":173}],163:[function(require,module,exports){\nvar Tokenizer = require(\"./Tokenizer.js\");\n\n/*\n\tOptions:\n\n\txmlMode: Disables the special behavior for script/style tags (false by default)\n\tlowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)\n\tlowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)\n*/\n\n/*\n\tCallbacks:\n\n\toncdataend,\n\toncdatastart,\n\tonclosetag,\n\toncomment,\n\toncommentend,\n\tonerror,\n\tonopentag,\n\tonprocessinginstruction,\n\tonreset,\n\tontext\n*/\n\nvar formTags = {\n\tinput: true,\n\toption: true,\n\toptgroup: true,\n\tselect: true,\n\tbutton: true,\n\tdatalist: true,\n\ttextarea: true\n};\n\nvar openImpliesClose = {\n\ttr      : { tr:true, th:true, td:true },\n\tth      : { th:true },\n\ttd      : { thead:true, th:true, td:true },\n\tbody    : { head:true, link:true, script:true },\n\tli      : { li:true },\n\tp       : { p:true },\n\th1      : { p:true },\n\th2      : { p:true },\n\th3      : { p:true },\n\th4      : { p:true },\n\th5      : { p:true },\n\th6      : { p:true },\n\tselect  : formTags,\n\tinput   : formTags,\n\toutput  : formTags,\n\tbutton  : formTags,\n\tdatalist: formTags,\n\ttextarea: formTags,\n\toption  : { option:true },\n\toptgroup: { optgroup:true }\n};\n\nvar voidElements = {\n\t__proto__: null,\n\tarea: true,\n\tbase: true,\n\tbasefont: true,\n\tbr: true,\n\tcol: true,\n\tcommand: true,\n\tembed: true,\n\tframe: true,\n\thr: true,\n\timg: true,\n\tinput: true,\n\tisindex: true,\n\tkeygen: true,\n\tlink: true,\n\tmeta: true,\n\tparam: true,\n\tsource: true,\n\ttrack: true,\n\twbr: true,\n\n\t//common self closing svg elements\n\tpath: true,\n\tcircle: true,\n\tellipse: true,\n\tline: true,\n\trect: true,\n\tuse: true,\n\tstop: true,\n\tpolyline: true,\n\tpolygon: true\n};\n\nvar re_nameEnd = /\\s|\\//;\n\nfunction Parser(cbs, options){\n\tthis._options = options || {};\n\tthis._cbs = cbs || {};\n\n\tthis._tagname = \"\";\n\tthis._attribname = \"\";\n\tthis._attribvalue = \"\";\n\tthis._attribs = null;\n\tthis._stack = [];\n\n\tthis.startIndex = 0;\n\tthis.endIndex = null;\n\n\tthis._lowerCaseTagNames = \"lowerCaseTags\" in this._options ?\n\t\t\t\t\t\t\t\t\t!!this._options.lowerCaseTags :\n\t\t\t\t\t\t\t\t\t!this._options.xmlMode;\n\tthis._lowerCaseAttributeNames = \"lowerCaseAttributeNames\" in this._options ?\n\t\t\t\t\t\t\t\t\t!!this._options.lowerCaseAttributeNames :\n\t\t\t\t\t\t\t\t\t!this._options.xmlMode;\n\n\tif(this._options.Tokenizer) {\n\t\tTokenizer = this._options.Tokenizer;\n\t}\n\tthis._tokenizer = new Tokenizer(this._options, this);\n\n\tif(this._cbs.onparserinit) this._cbs.onparserinit(this);\n}\n\nrequire(\"inherits\")(Parser, require(\"events\").EventEmitter);\n\nParser.prototype._updatePosition = function(initialOffset){\n\tif(this.endIndex === null){\n\t\tif(this._tokenizer._sectionStart <= initialOffset){\n\t\t\tthis.startIndex = 0;\n\t\t} else {\n\t\t\tthis.startIndex = this._tokenizer._sectionStart - initialOffset;\n\t\t}\n\t}\n\telse this.startIndex = this.endIndex + 1;\n\tthis.endIndex = this._tokenizer.getAbsoluteIndex();\n};\n\n//Tokenizer event handlers\nParser.prototype.ontext = function(data){\n\tthis._updatePosition(1);\n\tthis.endIndex--;\n\n\tif(this._cbs.ontext) this._cbs.ontext(data);\n};\n\nParser.prototype.onopentagname = function(name){\n\tif(this._lowerCaseTagNames){\n\t\tname = name.toLowerCase();\n\t}\n\n\tthis._tagname = name;\n\n\tif(!this._options.xmlMode && name in openImpliesClose) {\n\t\tfor(\n\t\t\tvar el;\n\t\t\t(el = this._stack[this._stack.length - 1]) in openImpliesClose[name];\n\t\t\tthis.onclosetag(el)\n\t\t);\n\t}\n\n\tif(this._options.xmlMode || !(name in voidElements)){\n\t\tthis._stack.push(name);\n\t}\n\n\tif(this._cbs.onopentagname) this._cbs.onopentagname(name);\n\tif(this._cbs.onopentag) this._attribs = {};\n};\n\nParser.prototype.onopentagend = function(){\n\tthis._updatePosition(1);\n\n\tif(this._attribs){\n\t\tif(this._cbs.onopentag) this._cbs.onopentag(this._tagname, this._attribs);\n\t\tthis._attribs = null;\n\t}\n\n\tif(!this._options.xmlMode && this._cbs.onclosetag && this._tagname in voidElements){\n\t\tthis._cbs.onclosetag(this._tagname);\n\t}\n\n\tthis._tagname = \"\";\n};\n\nParser.prototype.onclosetag = function(name){\n\tthis._updatePosition(1);\n\n\tif(this._lowerCaseTagNames){\n\t\tname = name.toLowerCase();\n\t}\n\n\tif(this._stack.length && (!(name in voidElements) || this._options.xmlMode)){\n\t\tvar pos = this._stack.lastIndexOf(name);\n\t\tif(pos !== -1){\n\t\t\tif(this._cbs.onclosetag){\n\t\t\t\tpos = this._stack.length - pos;\n\t\t\t\twhile(pos--) this._cbs.onclosetag(this._stack.pop());\n\t\t\t}\n\t\t\telse this._stack.length = pos;\n\t\t} else if(name === \"p\" && !this._options.xmlMode){\n\t\t\tthis.onopentagname(name);\n\t\t\tthis._closeCurrentTag();\n\t\t}\n\t} else if(!this._options.xmlMode && (name === \"br\" || name === \"p\")){\n\t\tthis.onopentagname(name);\n\t\tthis._closeCurrentTag();\n\t}\n};\n\nParser.prototype.onselfclosingtag = function(){\n\tif(this._options.xmlMode || this._options.recognizeSelfClosing){\n\t\tthis._closeCurrentTag();\n\t} else {\n\t\tthis.onopentagend();\n\t}\n};\n\nParser.prototype._closeCurrentTag = function(){\n\tvar name = this._tagname;\n\n\tthis.onopentagend();\n\n\t//self-closing tags will be on the top of the stack\n\t//(cheaper check than in onclosetag)\n\tif(this._stack[this._stack.length - 1] === name){\n\t\tif(this._cbs.onclosetag){\n\t\t\tthis._cbs.onclosetag(name);\n\t\t}\n\t\tthis._stack.pop();\n\t}\n};\n\nParser.prototype.onattribname = function(name){\n\tif(this._lowerCaseAttributeNames){\n\t\tname = name.toLowerCase();\n\t}\n\tthis._attribname = name;\n};\n\nParser.prototype.onattribdata = function(value){\n\tthis._attribvalue += value;\n};\n\nParser.prototype.onattribend = function(){\n\tif(this._cbs.onattribute) this._cbs.onattribute(this._attribname, this._attribvalue);\n\tif(\n\t\tthis._attribs &&\n\t\t!Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)\n\t){\n\t\tthis._attribs[this._attribname] = this._attribvalue;\n\t}\n\tthis._attribname = \"\";\n\tthis._attribvalue = \"\";\n};\n\nParser.prototype._getInstructionName = function(value){\n\tvar idx = value.search(re_nameEnd),\n\t    name = idx < 0 ? value : value.substr(0, idx);\n\n\tif(this._lowerCaseTagNames){\n\t\tname = name.toLowerCase();\n\t}\n\n\treturn name;\n};\n\nParser.prototype.ondeclaration = function(value){\n\tif(this._cbs.onprocessinginstruction){\n\t\tvar name = this._getInstructionName(value);\n\t\tthis._cbs.onprocessinginstruction(\"!\" + name, \"!\" + value);\n\t}\n};\n\nParser.prototype.onprocessinginstruction = function(value){\n\tif(this._cbs.onprocessinginstruction){\n\t\tvar name = this._getInstructionName(value);\n\t\tthis._cbs.onprocessinginstruction(\"?\" + name, \"?\" + value);\n\t}\n};\n\nParser.prototype.oncomment = function(value){\n\tthis._updatePosition(4);\n\n\tif(this._cbs.oncomment) this._cbs.oncomment(value);\n\tif(this._cbs.oncommentend) this._cbs.oncommentend();\n};\n\nParser.prototype.oncdata = function(value){\n\tthis._updatePosition(1);\n\n\tif(this._options.xmlMode || this._options.recognizeCDATA){\n\t\tif(this._cbs.oncdatastart) this._cbs.oncdatastart();\n\t\tif(this._cbs.ontext) this._cbs.ontext(value);\n\t\tif(this._cbs.oncdataend) this._cbs.oncdataend();\n\t} else {\n\t\tthis.oncomment(\"[CDATA[\" + value + \"]]\");\n\t}\n};\n\nParser.prototype.onerror = function(err){\n\tif(this._cbs.onerror) this._cbs.onerror(err);\n};\n\nParser.prototype.onend = function(){\n\tif(this._cbs.onclosetag){\n\t\tfor(\n\t\t\tvar i = this._stack.length;\n\t\t\ti > 0;\n\t\t\tthis._cbs.onclosetag(this._stack[--i])\n\t\t);\n\t}\n\tif(this._cbs.onend) this._cbs.onend();\n};\n\n\n//Resets the parser to a blank state, ready to parse a new HTML document\nParser.prototype.reset = function(){\n\tif(this._cbs.onreset) this._cbs.onreset();\n\tthis._tokenizer.reset();\n\n\tthis._tagname = \"\";\n\tthis._attribname = \"\";\n\tthis._attribs = null;\n\tthis._stack = [];\n\n\tif(this._cbs.onparserinit) this._cbs.onparserinit(this);\n};\n\n//Parses a complete HTML document and pushes it to the handler\nParser.prototype.parseComplete = function(data){\n\tthis.reset();\n\tthis.end(data);\n};\n\nParser.prototype.write = function(chunk){\n\tthis._tokenizer.write(chunk);\n};\n\nParser.prototype.end = function(chunk){\n\tthis._tokenizer.end(chunk);\n};\n\nParser.prototype.pause = function(){\n\tthis._tokenizer.pause();\n};\n\nParser.prototype.resume = function(){\n\tthis._tokenizer.resume();\n};\n\n//alias for backwards compat\nParser.prototype.parseChunk = Parser.prototype.write;\nParser.prototype.done = Parser.prototype.end;\n\nmodule.exports = Parser;\n\n},{\"./Tokenizer.js\":166,\"events\":148,\"inherits\":173}],164:[function(require,module,exports){\nmodule.exports = ProxyHandler;\n\nfunction ProxyHandler(cbs){\n\tthis._cbs = cbs || {};\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name){\n\tif(EVENTS[name] === 0){\n\t\tname = \"on\" + name;\n\t\tProxyHandler.prototype[name] = function(){\n\t\t\tif(this._cbs[name]) this._cbs[name]();\n\t\t};\n\t} else if(EVENTS[name] === 1){\n\t\tname = \"on\" + name;\n\t\tProxyHandler.prototype[name] = function(a){\n\t\t\tif(this._cbs[name]) this._cbs[name](a);\n\t\t};\n\t} else if(EVENTS[name] === 2){\n\t\tname = \"on\" + name;\n\t\tProxyHandler.prototype[name] = function(a, b){\n\t\t\tif(this._cbs[name]) this._cbs[name](a, b);\n\t\t};\n\t} else {\n\t\tthrow Error(\"wrong number of arguments\");\n\t}\n});\n},{\"./\":168}],165:[function(require,module,exports){\nmodule.exports = Stream;\n\nvar Parser = require(\"./WritableStream.js\");\n\nfunction Stream(options){\n\tParser.call(this, new Cbs(this), options);\n}\n\nrequire(\"inherits\")(Stream, Parser);\n\nStream.prototype.readable = true;\n\nfunction Cbs(scope){\n\tthis.scope = scope;\n}\n\nvar EVENTS = require(\"../\").EVENTS;\n\nObject.keys(EVENTS).forEach(function(name){\n\tif(EVENTS[name] === 0){\n\t\tCbs.prototype[\"on\" + name] = function(){\n\t\t\tthis.scope.emit(name);\n\t\t};\n\t} else if(EVENTS[name] === 1){\n\t\tCbs.prototype[\"on\" + name] = function(a){\n\t\t\tthis.scope.emit(name, a);\n\t\t};\n\t} else if(EVENTS[name] === 2){\n\t\tCbs.prototype[\"on\" + name] = function(a, b){\n\t\t\tthis.scope.emit(name, a, b);\n\t\t};\n\t} else {\n\t\tthrow Error(\"wrong number of arguments!\");\n\t}\n});\n},{\"../\":168,\"./WritableStream.js\":167,\"inherits\":173}],166:[function(require,module,exports){\nmodule.exports = Tokenizer;\n\nvar decodeCodePoint = require(\"entities/lib/decode_codepoint.js\"),\n    entityMap = require(\"entities/maps/entities.json\"),\n    legacyMap = require(\"entities/maps/legacy.json\"),\n    xmlMap    = require(\"entities/maps/xml.json\"),\n\n    i = 0,\n\n    TEXT                      = i++,\n    BEFORE_TAG_NAME           = i++, //after <\n    IN_TAG_NAME               = i++,\n    IN_SELF_CLOSING_TAG       = i++,\n    BEFORE_CLOSING_TAG_NAME   = i++,\n    IN_CLOSING_TAG_NAME       = i++,\n    AFTER_CLOSING_TAG_NAME    = i++,\n\n    //attributes\n    BEFORE_ATTRIBUTE_NAME     = i++,\n    IN_ATTRIBUTE_NAME         = i++,\n    AFTER_ATTRIBUTE_NAME      = i++,\n    BEFORE_ATTRIBUTE_VALUE    = i++,\n    IN_ATTRIBUTE_VALUE_DQ     = i++, // \"\n    IN_ATTRIBUTE_VALUE_SQ     = i++, // '\n    IN_ATTRIBUTE_VALUE_NQ     = i++,\n\n    //declarations\n    BEFORE_DECLARATION        = i++, // !\n    IN_DECLARATION            = i++,\n\n    //processing instructions\n    IN_PROCESSING_INSTRUCTION = i++, // ?\n\n    //comments\n    BEFORE_COMMENT            = i++,\n    IN_COMMENT                = i++,\n    AFTER_COMMENT_1           = i++,\n    AFTER_COMMENT_2           = i++,\n\n    //cdata\n    BEFORE_CDATA_1            = i++, // [\n    BEFORE_CDATA_2            = i++, // C\n    BEFORE_CDATA_3            = i++, // D\n    BEFORE_CDATA_4            = i++, // A\n    BEFORE_CDATA_5            = i++, // T\n    BEFORE_CDATA_6            = i++, // A\n    IN_CDATA                  = i++, // [\n    AFTER_CDATA_1             = i++, // ]\n    AFTER_CDATA_2             = i++, // ]\n\n    //special tags\n    BEFORE_SPECIAL            = i++, //S\n    BEFORE_SPECIAL_END        = i++,   //S\n\n    BEFORE_SCRIPT_1           = i++, //C\n    BEFORE_SCRIPT_2           = i++, //R\n    BEFORE_SCRIPT_3           = i++, //I\n    BEFORE_SCRIPT_4           = i++, //P\n    BEFORE_SCRIPT_5           = i++, //T\n    AFTER_SCRIPT_1            = i++, //C\n    AFTER_SCRIPT_2            = i++, //R\n    AFTER_SCRIPT_3            = i++, //I\n    AFTER_SCRIPT_4            = i++, //P\n    AFTER_SCRIPT_5            = i++, //T\n\n    BEFORE_STYLE_1            = i++, //T\n    BEFORE_STYLE_2            = i++, //Y\n    BEFORE_STYLE_3            = i++, //L\n    BEFORE_STYLE_4            = i++, //E\n    AFTER_STYLE_1             = i++, //T\n    AFTER_STYLE_2             = i++, //Y\n    AFTER_STYLE_3             = i++, //L\n    AFTER_STYLE_4             = i++, //E\n\n    BEFORE_ENTITY             = i++, //&\n    BEFORE_NUMERIC_ENTITY     = i++, //#\n    IN_NAMED_ENTITY           = i++,\n    IN_NUMERIC_ENTITY         = i++,\n    IN_HEX_ENTITY             = i++, //X\n\n    j = 0,\n\n    SPECIAL_NONE              = j++,\n    SPECIAL_SCRIPT            = j++,\n    SPECIAL_STYLE             = j++;\n\nfunction whitespace(c){\n\treturn c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\n\nfunction characterState(char, SUCCESS){\n\treturn function(c){\n\t\tif(c === char) this._state = SUCCESS;\n\t};\n}\n\nfunction ifElseState(upper, SUCCESS, FAILURE){\n\tvar lower = upper.toLowerCase();\n\n\tif(upper === lower){\n\t\treturn function(c){\n\t\t\tif(c === lower){\n\t\t\t\tthis._state = SUCCESS;\n\t\t\t} else {\n\t\t\t\tthis._state = FAILURE;\n\t\t\t\tthis._index--;\n\t\t\t}\n\t\t};\n\t} else {\n\t\treturn function(c){\n\t\t\tif(c === lower || c === upper){\n\t\t\t\tthis._state = SUCCESS;\n\t\t\t} else {\n\t\t\t\tthis._state = FAILURE;\n\t\t\t\tthis._index--;\n\t\t\t}\n\t\t};\n\t}\n}\n\nfunction consumeSpecialNameChar(upper, NEXT_STATE){\n\tvar lower = upper.toLowerCase();\n\n\treturn function(c){\n\t\tif(c === lower || c === upper){\n\t\t\tthis._state = NEXT_STATE;\n\t\t} else {\n\t\t\tthis._state = IN_TAG_NAME;\n\t\t\tthis._index--; //consume the token again\n\t\t}\n\t};\n}\n\nfunction Tokenizer(options, cbs){\n\tthis._state = TEXT;\n\tthis._buffer = \"\";\n\tthis._sectionStart = 0;\n\tthis._index = 0;\n\tthis._bufferOffset = 0; //chars removed from _buffer\n\tthis._baseState = TEXT;\n\tthis._special = SPECIAL_NONE;\n\tthis._cbs = cbs;\n\tthis._running = true;\n\tthis._ended = false;\n\tthis._xmlMode = !!(options && options.xmlMode);\n\tthis._decodeEntities = !!(options && options.decodeEntities);\n}\n\nTokenizer.prototype._stateText = function(c){\n\tif(c === \"<\"){\n\t\tif(this._index > this._sectionStart){\n\t\t\tthis._cbs.ontext(this._getSection());\n\t\t}\n\t\tthis._state = BEFORE_TAG_NAME;\n\t\tthis._sectionStart = this._index;\n\t} else if(this._decodeEntities && this._special === SPECIAL_NONE && c === \"&\"){\n\t\tif(this._index > this._sectionStart){\n\t\t\tthis._cbs.ontext(this._getSection());\n\t\t}\n\t\tthis._baseState = TEXT;\n\t\tthis._state = BEFORE_ENTITY;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateBeforeTagName = function(c){\n\tif(c === \"/\"){\n\t\tthis._state = BEFORE_CLOSING_TAG_NAME;\n\t} else if(c === \"<\"){\n\t\tthis._cbs.ontext(this._getSection());\n\t\tthis._sectionStart = this._index;\n\t} else if(c === \">\" || this._special !== SPECIAL_NONE || whitespace(c)) {\n\t\tthis._state = TEXT;\n\t} else if(c === \"!\"){\n\t\tthis._state = BEFORE_DECLARATION;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(c === \"?\"){\n\t\tthis._state = IN_PROCESSING_INSTRUCTION;\n\t\tthis._sectionStart = this._index + 1;\n\t} else {\n\t\tthis._state = (!this._xmlMode && (c === \"s\" || c === \"S\")) ?\n\t\t\t\t\t\tBEFORE_SPECIAL : IN_TAG_NAME;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateInTagName = function(c){\n\tif(c === \"/\" || c === \">\" || whitespace(c)){\n\t\tthis._emitToken(\"onopentagname\");\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateBeforeCloseingTagName = function(c){\n\tif(whitespace(c));\n\telse if(c === \">\"){\n\t\tthis._state = TEXT;\n\t} else if(this._special !== SPECIAL_NONE){\n\t\tif(c === \"s\" || c === \"S\"){\n\t\t\tthis._state = BEFORE_SPECIAL_END;\n\t\t} else {\n\t\t\tthis._state = TEXT;\n\t\t\tthis._index--;\n\t\t}\n\t} else {\n\t\tthis._state = IN_CLOSING_TAG_NAME;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateInCloseingTagName = function(c){\n\tif(c === \">\" || whitespace(c)){\n\t\tthis._emitToken(\"onclosetag\");\n\t\tthis._state = AFTER_CLOSING_TAG_NAME;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateAfterCloseingTagName = function(c){\n\t//skip everything until \">\"\n\tif(c === \">\"){\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t}\n};\n\nTokenizer.prototype._stateBeforeAttributeName = function(c){\n\tif(c === \">\"){\n\t\tthis._cbs.onopentagend();\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(c === \"/\"){\n\t\tthis._state = IN_SELF_CLOSING_TAG;\n\t} else if(!whitespace(c)){\n\t\tthis._state = IN_ATTRIBUTE_NAME;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateInSelfClosingTag = function(c){\n\tif(c === \">\"){\n\t\tthis._cbs.onselfclosingtag();\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(!whitespace(c)){\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateInAttributeName = function(c){\n\tif(c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)){\n\t\tthis._cbs.onattribname(this._getSection());\n\t\tthis._sectionStart = -1;\n\t\tthis._state = AFTER_ATTRIBUTE_NAME;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateAfterAttributeName = function(c){\n\tif(c === \"=\"){\n\t\tthis._state = BEFORE_ATTRIBUTE_VALUE;\n\t} else if(c === \"/\" || c === \">\"){\n\t\tthis._cbs.onattribend();\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t\tthis._index--;\n\t} else if(!whitespace(c)){\n\t\tthis._cbs.onattribend();\n\t\tthis._state = IN_ATTRIBUTE_NAME;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateBeforeAttributeValue = function(c){\n\tif(c === \"\\\"\"){\n\t\tthis._state = IN_ATTRIBUTE_VALUE_DQ;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(c === \"'\"){\n\t\tthis._state = IN_ATTRIBUTE_VALUE_SQ;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(!whitespace(c)){\n\t\tthis._state = IN_ATTRIBUTE_VALUE_NQ;\n\t\tthis._sectionStart = this._index;\n\t\tthis._index--; //reconsume token\n\t}\n};\n\nTokenizer.prototype._stateInAttributeValueDoubleQuotes = function(c){\n\tif(c === \"\\\"\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._cbs.onattribend();\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t} else if(this._decodeEntities && c === \"&\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._baseState = this._state;\n\t\tthis._state = BEFORE_ENTITY;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateInAttributeValueSingleQuotes = function(c){\n\tif(c === \"'\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._cbs.onattribend();\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t} else if(this._decodeEntities && c === \"&\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._baseState = this._state;\n\t\tthis._state = BEFORE_ENTITY;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateInAttributeValueNoQuotes = function(c){\n\tif(whitespace(c) || c === \">\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._cbs.onattribend();\n\t\tthis._state = BEFORE_ATTRIBUTE_NAME;\n\t\tthis._index--;\n\t} else if(this._decodeEntities && c === \"&\"){\n\t\tthis._emitToken(\"onattribdata\");\n\t\tthis._baseState = this._state;\n\t\tthis._state = BEFORE_ENTITY;\n\t\tthis._sectionStart = this._index;\n\t}\n};\n\nTokenizer.prototype._stateBeforeDeclaration = function(c){\n\tthis._state = c === \"[\" ? BEFORE_CDATA_1 :\n\t\t\t\t\tc === \"-\" ? BEFORE_COMMENT :\n\t\t\t\t\t\tIN_DECLARATION;\n};\n\nTokenizer.prototype._stateInDeclaration = function(c){\n\tif(c === \">\"){\n\t\tthis._cbs.ondeclaration(this._getSection());\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t}\n};\n\nTokenizer.prototype._stateInProcessingInstruction = function(c){\n\tif(c === \">\"){\n\t\tthis._cbs.onprocessinginstruction(this._getSection());\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t}\n};\n\nTokenizer.prototype._stateBeforeComment = function(c){\n\tif(c === \"-\"){\n\t\tthis._state = IN_COMMENT;\n\t\tthis._sectionStart = this._index + 1;\n\t} else {\n\t\tthis._state = IN_DECLARATION;\n\t}\n};\n\nTokenizer.prototype._stateInComment = function(c){\n\tif(c === \"-\") this._state = AFTER_COMMENT_1;\n};\n\nTokenizer.prototype._stateAfterComment1 = function(c){\n\tif(c === \"-\"){\n\t\tthis._state = AFTER_COMMENT_2;\n\t} else {\n\t\tthis._state = IN_COMMENT;\n\t}\n};\n\nTokenizer.prototype._stateAfterComment2 = function(c){\n\tif(c === \">\"){\n\t\t//remove 2 trailing chars\n\t\tthis._cbs.oncomment(this._buffer.substring(this._sectionStart, this._index - 2));\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(c !== \"-\"){\n\t\tthis._state = IN_COMMENT;\n\t}\n\t// else: stay in AFTER_COMMENT_2 (`--->`)\n};\n\nTokenizer.prototype._stateBeforeCdata1 = ifElseState(\"C\", BEFORE_CDATA_2, IN_DECLARATION);\nTokenizer.prototype._stateBeforeCdata2 = ifElseState(\"D\", BEFORE_CDATA_3, IN_DECLARATION);\nTokenizer.prototype._stateBeforeCdata3 = ifElseState(\"A\", BEFORE_CDATA_4, IN_DECLARATION);\nTokenizer.prototype._stateBeforeCdata4 = ifElseState(\"T\", BEFORE_CDATA_5, IN_DECLARATION);\nTokenizer.prototype._stateBeforeCdata5 = ifElseState(\"A\", BEFORE_CDATA_6, IN_DECLARATION);\n\nTokenizer.prototype._stateBeforeCdata6 = function(c){\n\tif(c === \"[\"){\n\t\tthis._state = IN_CDATA;\n\t\tthis._sectionStart = this._index + 1;\n\t} else {\n\t\tthis._state = IN_DECLARATION;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateInCdata = function(c){\n\tif(c === \"]\") this._state = AFTER_CDATA_1;\n};\n\nTokenizer.prototype._stateAfterCdata1 = characterState(\"]\", AFTER_CDATA_2);\n\nTokenizer.prototype._stateAfterCdata2 = function(c){\n\tif(c === \">\"){\n\t\t//remove 2 trailing chars\n\t\tthis._cbs.oncdata(this._buffer.substring(this._sectionStart, this._index - 2));\n\t\tthis._state = TEXT;\n\t\tthis._sectionStart = this._index + 1;\n\t} else if(c !== \"]\") {\n\t\tthis._state = IN_CDATA;\n\t}\n\t//else: stay in AFTER_CDATA_2 (`]]]>`)\n};\n\nTokenizer.prototype._stateBeforeSpecial = function(c){\n\tif(c === \"c\" || c === \"C\"){\n\t\tthis._state = BEFORE_SCRIPT_1;\n\t} else if(c === \"t\" || c === \"T\"){\n\t\tthis._state = BEFORE_STYLE_1;\n\t} else {\n\t\tthis._state = IN_TAG_NAME;\n\t\tthis._index--; //consume the token again\n\t}\n};\n\nTokenizer.prototype._stateBeforeSpecialEnd = function(c){\n\tif(this._special === SPECIAL_SCRIPT && (c === \"c\" || c === \"C\")){\n\t\tthis._state = AFTER_SCRIPT_1;\n\t} else if(this._special === SPECIAL_STYLE && (c === \"t\" || c === \"T\")){\n\t\tthis._state = AFTER_STYLE_1;\n\t}\n\telse this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeScript1 = consumeSpecialNameChar(\"R\", BEFORE_SCRIPT_2);\nTokenizer.prototype._stateBeforeScript2 = consumeSpecialNameChar(\"I\", BEFORE_SCRIPT_3);\nTokenizer.prototype._stateBeforeScript3 = consumeSpecialNameChar(\"P\", BEFORE_SCRIPT_4);\nTokenizer.prototype._stateBeforeScript4 = consumeSpecialNameChar(\"T\", BEFORE_SCRIPT_5);\n\nTokenizer.prototype._stateBeforeScript5 = function(c){\n\tif(c === \"/\" || c === \">\" || whitespace(c)){\n\t\tthis._special = SPECIAL_SCRIPT;\n\t}\n\tthis._state = IN_TAG_NAME;\n\tthis._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterScript1 = ifElseState(\"R\", AFTER_SCRIPT_2, TEXT);\nTokenizer.prototype._stateAfterScript2 = ifElseState(\"I\", AFTER_SCRIPT_3, TEXT);\nTokenizer.prototype._stateAfterScript3 = ifElseState(\"P\", AFTER_SCRIPT_4, TEXT);\nTokenizer.prototype._stateAfterScript4 = ifElseState(\"T\", AFTER_SCRIPT_5, TEXT);\n\nTokenizer.prototype._stateAfterScript5 = function(c){\n\tif(c === \">\" || whitespace(c)){\n\t\tthis._special = SPECIAL_NONE;\n\t\tthis._state = IN_CLOSING_TAG_NAME;\n\t\tthis._sectionStart = this._index - 6;\n\t\tthis._index--; //reconsume the token\n\t}\n\telse this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", BEFORE_STYLE_2);\nTokenizer.prototype._stateBeforeStyle2 = consumeSpecialNameChar(\"L\", BEFORE_STYLE_3);\nTokenizer.prototype._stateBeforeStyle3 = consumeSpecialNameChar(\"E\", BEFORE_STYLE_4);\n\nTokenizer.prototype._stateBeforeStyle4 = function(c){\n\tif(c === \"/\" || c === \">\" || whitespace(c)){\n\t\tthis._special = SPECIAL_STYLE;\n\t}\n\tthis._state = IN_TAG_NAME;\n\tthis._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterStyle1 = ifElseState(\"Y\", AFTER_STYLE_2, TEXT);\nTokenizer.prototype._stateAfterStyle2 = ifElseState(\"L\", AFTER_STYLE_3, TEXT);\nTokenizer.prototype._stateAfterStyle3 = ifElseState(\"E\", AFTER_STYLE_4, TEXT);\n\nTokenizer.prototype._stateAfterStyle4 = function(c){\n\tif(c === \">\" || whitespace(c)){\n\t\tthis._special = SPECIAL_NONE;\n\t\tthis._state = IN_CLOSING_TAG_NAME;\n\t\tthis._sectionStart = this._index - 5;\n\t\tthis._index--; //reconsume the token\n\t}\n\telse this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeEntity = ifElseState(\"#\", BEFORE_NUMERIC_ENTITY, IN_NAMED_ENTITY);\nTokenizer.prototype._stateBeforeNumericEntity = ifElseState(\"X\", IN_HEX_ENTITY, IN_NUMERIC_ENTITY);\n\n//for entities terminated with a semicolon\nTokenizer.prototype._parseNamedEntityStrict = function(){\n\t//offset = 1\n\tif(this._sectionStart + 1 < this._index){\n\t\tvar entity = this._buffer.substring(this._sectionStart + 1, this._index),\n\t\t    map = this._xmlMode ? xmlMap : entityMap;\n\n\t\tif(map.hasOwnProperty(entity)){\n\t\t\tthis._emitPartial(map[entity]);\n\t\t\tthis._sectionStart = this._index + 1;\n\t\t}\n\t}\n};\n\n\n//parses legacy entities (without trailing semicolon)\nTokenizer.prototype._parseLegacyEntity = function(){\n\tvar start = this._sectionStart + 1,\n\t    limit = this._index - start;\n\n\tif(limit > 6) limit = 6; //the max length of legacy entities is 6\n\n\twhile(limit >= 2){ //the min length of legacy entities is 2\n\t\tvar entity = this._buffer.substr(start, limit);\n\n\t\tif(legacyMap.hasOwnProperty(entity)){\n\t\t\tthis._emitPartial(legacyMap[entity]);\n\t\t\tthis._sectionStart += limit + 1;\n\t\t\treturn;\n\t\t} else {\n\t\t\tlimit--;\n\t\t}\n\t}\n};\n\nTokenizer.prototype._stateInNamedEntity = function(c){\n\tif(c === \";\"){\n\t\tthis._parseNamedEntityStrict();\n\t\tif(this._sectionStart + 1 < this._index && !this._xmlMode){\n\t\t\tthis._parseLegacyEntity();\n\t\t}\n\t\tthis._state = this._baseState;\n\t} else if((c < \"a\" || c > \"z\") && (c < \"A\" || c > \"Z\") && (c < \"0\" || c > \"9\")){\n\t\tif(this._xmlMode);\n\t\telse if(this._sectionStart + 1 === this._index);\n\t\telse if(this._baseState !== TEXT){\n\t\t\tif(c !== \"=\"){\n\t\t\t\tthis._parseNamedEntityStrict();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._parseLegacyEntity();\n\t\t}\n\n\t\tthis._state = this._baseState;\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._decodeNumericEntity = function(offset, base){\n\tvar sectionStart = this._sectionStart + offset;\n\n\tif(sectionStart !== this._index){\n\t\t//parse entity\n\t\tvar entity = this._buffer.substring(sectionStart, this._index);\n\t\tvar parsed = parseInt(entity, base);\n\n\t\tthis._emitPartial(decodeCodePoint(parsed));\n\t\tthis._sectionStart = this._index;\n\t} else {\n\t\tthis._sectionStart--;\n\t}\n\n\tthis._state = this._baseState;\n};\n\nTokenizer.prototype._stateInNumericEntity = function(c){\n\tif(c === \";\"){\n\t\tthis._decodeNumericEntity(2, 10);\n\t\tthis._sectionStart++;\n\t} else if(c < \"0\" || c > \"9\"){\n\t\tif(!this._xmlMode){\n\t\t\tthis._decodeNumericEntity(2, 10);\n\t\t} else {\n\t\t\tthis._state = this._baseState;\n\t\t}\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._stateInHexEntity = function(c){\n\tif(c === \";\"){\n\t\tthis._decodeNumericEntity(3, 16);\n\t\tthis._sectionStart++;\n\t} else if((c < \"a\" || c > \"f\") && (c < \"A\" || c > \"F\") && (c < \"0\" || c > \"9\")){\n\t\tif(!this._xmlMode){\n\t\t\tthis._decodeNumericEntity(3, 16);\n\t\t} else {\n\t\t\tthis._state = this._baseState;\n\t\t}\n\t\tthis._index--;\n\t}\n};\n\nTokenizer.prototype._cleanup = function (){\n\tif(this._sectionStart < 0){\n\t\tthis._buffer = \"\";\n\t\tthis._index = 0;\n\t\tthis._bufferOffset += this._index;\n\t} else if(this._running){\n\t\tif(this._state === TEXT){\n\t\t\tif(this._sectionStart !== this._index){\n\t\t\t\tthis._cbs.ontext(this._buffer.substr(this._sectionStart));\n\t\t\t}\n\t\t\tthis._buffer = \"\";\n\t\t\tthis._bufferOffset += this._index;\n\t\t\tthis._index = 0;\n\t\t} else if(this._sectionStart === this._index){\n\t\t\t//the section just started\n\t\t\tthis._buffer = \"\";\n\t\t\tthis._bufferOffset += this._index;\n\t\t\tthis._index = 0;\n\t\t} else {\n\t\t\t//remove everything unnecessary\n\t\t\tthis._buffer = this._buffer.substr(this._sectionStart);\n\t\t\tthis._index -= this._sectionStart;\n\t\t\tthis._bufferOffset += this._sectionStart;\n\t\t}\n\n\t\tthis._sectionStart = 0;\n\t}\n};\n\n//TODO make events conditional\nTokenizer.prototype.write = function(chunk){\n\tif(this._ended) this._cbs.onerror(Error(\".write() after done!\"));\n\n\tthis._buffer += chunk;\n\tthis._parse();\n};\n\nTokenizer.prototype._parse = function(){\n\twhile(this._index < this._buffer.length && this._running){\n\t\tvar c = this._buffer.charAt(this._index);\n\t\tif(this._state === TEXT) {\n\t\t\tthis._stateText(c);\n\t\t} else if(this._state === BEFORE_TAG_NAME){\n\t\t\tthis._stateBeforeTagName(c);\n\t\t} else if(this._state === IN_TAG_NAME) {\n\t\t\tthis._stateInTagName(c);\n\t\t} else if(this._state === BEFORE_CLOSING_TAG_NAME){\n\t\t\tthis._stateBeforeCloseingTagName(c);\n\t\t} else if(this._state === IN_CLOSING_TAG_NAME){\n\t\t\tthis._stateInCloseingTagName(c);\n\t\t} else if(this._state === AFTER_CLOSING_TAG_NAME){\n\t\t\tthis._stateAfterCloseingTagName(c);\n\t\t} else if(this._state === IN_SELF_CLOSING_TAG){\n\t\t\tthis._stateInSelfClosingTag(c);\n\t\t}\n\n\t\t/*\n\t\t*\tattributes\n\t\t*/\n\t\telse if(this._state === BEFORE_ATTRIBUTE_NAME){\n\t\t\tthis._stateBeforeAttributeName(c);\n\t\t} else if(this._state === IN_ATTRIBUTE_NAME){\n\t\t\tthis._stateInAttributeName(c);\n\t\t} else if(this._state === AFTER_ATTRIBUTE_NAME){\n\t\t\tthis._stateAfterAttributeName(c);\n\t\t} else if(this._state === BEFORE_ATTRIBUTE_VALUE){\n\t\t\tthis._stateBeforeAttributeValue(c);\n\t\t} else if(this._state === IN_ATTRIBUTE_VALUE_DQ){\n\t\t\tthis._stateInAttributeValueDoubleQuotes(c);\n\t\t} else if(this._state === IN_ATTRIBUTE_VALUE_SQ){\n\t\t\tthis._stateInAttributeValueSingleQuotes(c);\n\t\t} else if(this._state === IN_ATTRIBUTE_VALUE_NQ){\n\t\t\tthis._stateInAttributeValueNoQuotes(c);\n\t\t}\n\n\t\t/*\n\t\t*\tdeclarations\n\t\t*/\n\t\telse if(this._state === BEFORE_DECLARATION){\n\t\t\tthis._stateBeforeDeclaration(c);\n\t\t} else if(this._state === IN_DECLARATION){\n\t\t\tthis._stateInDeclaration(c);\n\t\t}\n\n\t\t/*\n\t\t*\tprocessing instructions\n\t\t*/\n\t\telse if(this._state === IN_PROCESSING_INSTRUCTION){\n\t\t\tthis._stateInProcessingInstruction(c);\n\t\t}\n\n\t\t/*\n\t\t*\tcomments\n\t\t*/\n\t\telse if(this._state === BEFORE_COMMENT){\n\t\t\tthis._stateBeforeComment(c);\n\t\t} else if(this._state === IN_COMMENT){\n\t\t\tthis._stateInComment(c);\n\t\t} else if(this._state === AFTER_COMMENT_1){\n\t\t\tthis._stateAfterComment1(c);\n\t\t} else if(this._state === AFTER_COMMENT_2){\n\t\t\tthis._stateAfterComment2(c);\n\t\t}\n\n\t\t/*\n\t\t*\tcdata\n\t\t*/\n\t\telse if(this._state === BEFORE_CDATA_1){\n\t\t\tthis._stateBeforeCdata1(c);\n\t\t} else if(this._state === BEFORE_CDATA_2){\n\t\t\tthis._stateBeforeCdata2(c);\n\t\t} else if(this._state === BEFORE_CDATA_3){\n\t\t\tthis._stateBeforeCdata3(c);\n\t\t} else if(this._state === BEFORE_CDATA_4){\n\t\t\tthis._stateBeforeCdata4(c);\n\t\t} else if(this._state === BEFORE_CDATA_5){\n\t\t\tthis._stateBeforeCdata5(c);\n\t\t} else if(this._state === BEFORE_CDATA_6){\n\t\t\tthis._stateBeforeCdata6(c);\n\t\t} else if(this._state === IN_CDATA){\n\t\t\tthis._stateInCdata(c);\n\t\t} else if(this._state === AFTER_CDATA_1){\n\t\t\tthis._stateAfterCdata1(c);\n\t\t} else if(this._state === AFTER_CDATA_2){\n\t\t\tthis._stateAfterCdata2(c);\n\t\t}\n\n\t\t/*\n\t\t* special tags\n\t\t*/\n\t\telse if(this._state === BEFORE_SPECIAL){\n\t\t\tthis._stateBeforeSpecial(c);\n\t\t} else if(this._state === BEFORE_SPECIAL_END){\n\t\t\tthis._stateBeforeSpecialEnd(c);\n\t\t}\n\n\t\t/*\n\t\t* script\n\t\t*/\n\t\telse if(this._state === BEFORE_SCRIPT_1){\n\t\t\tthis._stateBeforeScript1(c);\n\t\t} else if(this._state === BEFORE_SCRIPT_2){\n\t\t\tthis._stateBeforeScript2(c);\n\t\t} else if(this._state === BEFORE_SCRIPT_3){\n\t\t\tthis._stateBeforeScript3(c);\n\t\t} else if(this._state === BEFORE_SCRIPT_4){\n\t\t\tthis._stateBeforeScript4(c);\n\t\t} else if(this._state === BEFORE_SCRIPT_5){\n\t\t\tthis._stateBeforeScript5(c);\n\t\t}\n\n\t\telse if(this._state === AFTER_SCRIPT_1){\n\t\t\tthis._stateAfterScript1(c);\n\t\t} else if(this._state === AFTER_SCRIPT_2){\n\t\t\tthis._stateAfterScript2(c);\n\t\t} else if(this._state === AFTER_SCRIPT_3){\n\t\t\tthis._stateAfterScript3(c);\n\t\t} else if(this._state === AFTER_SCRIPT_4){\n\t\t\tthis._stateAfterScript4(c);\n\t\t} else if(this._state === AFTER_SCRIPT_5){\n\t\t\tthis._stateAfterScript5(c);\n\t\t}\n\n\t\t/*\n\t\t* style\n\t\t*/\n\t\telse if(this._state === BEFORE_STYLE_1){\n\t\t\tthis._stateBeforeStyle1(c);\n\t\t} else if(this._state === BEFORE_STYLE_2){\n\t\t\tthis._stateBeforeStyle2(c);\n\t\t} else if(this._state === BEFORE_STYLE_3){\n\t\t\tthis._stateBeforeStyle3(c);\n\t\t} else if(this._state === BEFORE_STYLE_4){\n\t\t\tthis._stateBeforeStyle4(c);\n\t\t}\n\n\t\telse if(this._state === AFTER_STYLE_1){\n\t\t\tthis._stateAfterStyle1(c);\n\t\t} else if(this._state === AFTER_STYLE_2){\n\t\t\tthis._stateAfterStyle2(c);\n\t\t} else if(this._state === AFTER_STYLE_3){\n\t\t\tthis._stateAfterStyle3(c);\n\t\t} else if(this._state === AFTER_STYLE_4){\n\t\t\tthis._stateAfterStyle4(c);\n\t\t}\n\n\t\t/*\n\t\t* entities\n\t\t*/\n\t\telse if(this._state === BEFORE_ENTITY){\n\t\t\tthis._stateBeforeEntity(c);\n\t\t} else if(this._state === BEFORE_NUMERIC_ENTITY){\n\t\t\tthis._stateBeforeNumericEntity(c);\n\t\t} else if(this._state === IN_NAMED_ENTITY){\n\t\t\tthis._stateInNamedEntity(c);\n\t\t} else if(this._state === IN_NUMERIC_ENTITY){\n\t\t\tthis._stateInNumericEntity(c);\n\t\t} else if(this._state === IN_HEX_ENTITY){\n\t\t\tthis._stateInHexEntity(c);\n\t\t}\n\n\t\telse {\n\t\t\tthis._cbs.onerror(Error(\"unknown _state\"), this._state);\n\t\t}\n\n\t\tthis._index++;\n\t}\n\n\tthis._cleanup();\n};\n\nTokenizer.prototype.pause = function(){\n\tthis._running = false;\n};\nTokenizer.prototype.resume = function(){\n\tthis._running = true;\n\n\tif(this._index < this._buffer.length){\n\t\tthis._parse();\n\t}\n\tif(this._ended){\n\t\tthis._finish();\n\t}\n};\n\nTokenizer.prototype.end = function(chunk){\n\tif(this._ended) this._cbs.onerror(Error(\".end() after done!\"));\n\tif(chunk) this.write(chunk);\n\n\tthis._ended = true;\n\n\tif(this._running) this._finish();\n};\n\nTokenizer.prototype._finish = function(){\n\t//if there is remaining data, emit it in a reasonable way\n\tif(this._sectionStart < this._index){\n\t\tthis._handleTrailingData();\n\t}\n\n\tthis._cbs.onend();\n};\n\nTokenizer.prototype._handleTrailingData = function(){\n\tvar data = this._buffer.substr(this._sectionStart);\n\n\tif(this._state === IN_CDATA || this._state === AFTER_CDATA_1 || this._state === AFTER_CDATA_2){\n\t\tthis._cbs.oncdata(data);\n\t} else if(this._state === IN_COMMENT || this._state === AFTER_COMMENT_1 || this._state === AFTER_COMMENT_2){\n\t\tthis._cbs.oncomment(data);\n\t} else if(this._state === IN_NAMED_ENTITY && !this._xmlMode){\n\t\tthis._parseLegacyEntity();\n\t\tif(this._sectionStart < this._index){\n\t\t\tthis._state = this._baseState;\n\t\t\tthis._handleTrailingData();\n\t\t}\n\t} else if(this._state === IN_NUMERIC_ENTITY && !this._xmlMode){\n\t\tthis._decodeNumericEntity(2, 10);\n\t\tif(this._sectionStart < this._index){\n\t\t\tthis._state = this._baseState;\n\t\t\tthis._handleTrailingData();\n\t\t}\n\t} else if(this._state === IN_HEX_ENTITY && !this._xmlMode){\n\t\tthis._decodeNumericEntity(3, 16);\n\t\tif(this._sectionStart < this._index){\n\t\t\tthis._state = this._baseState;\n\t\t\tthis._handleTrailingData();\n\t\t}\n\t} else if(\n\t\tthis._state !== IN_TAG_NAME &&\n\t\tthis._state !== BEFORE_ATTRIBUTE_NAME &&\n\t\tthis._state !== BEFORE_ATTRIBUTE_VALUE &&\n\t\tthis._state !== AFTER_ATTRIBUTE_NAME &&\n\t\tthis._state !== IN_ATTRIBUTE_NAME &&\n\t\tthis._state !== IN_ATTRIBUTE_VALUE_SQ &&\n\t\tthis._state !== IN_ATTRIBUTE_VALUE_DQ &&\n\t\tthis._state !== IN_ATTRIBUTE_VALUE_NQ &&\n\t\tthis._state !== IN_CLOSING_TAG_NAME\n\t){\n\t\tthis._cbs.ontext(data);\n\t}\n\t//else, ignore remaining data\n\t//TODO add a way to remove current tag\n};\n\nTokenizer.prototype.reset = function(){\n\tTokenizer.call(this, {xmlMode: this._xmlMode, decodeEntities: this._decodeEntities}, this._cbs);\n};\n\nTokenizer.prototype.getAbsoluteIndex = function(){\n\treturn this._bufferOffset + this._index;\n};\n\nTokenizer.prototype._getSection = function(){\n\treturn this._buffer.substring(this._sectionStart, this._index);\n};\n\nTokenizer.prototype._emitToken = function(name){\n\tthis._cbs[name](this._getSection());\n\tthis._sectionStart = -1;\n};\n\nTokenizer.prototype._emitPartial = function(value){\n\tif(this._baseState !== TEXT){\n\t\tthis._cbs.onattribdata(value); //TODO implement the new event\n\t} else {\n\t\tthis._cbs.ontext(value);\n\t}\n};\n\n},{\"entities/lib/decode_codepoint.js\":141,\"entities/maps/entities.json\":144,\"entities/maps/legacy.json\":145,\"entities/maps/xml.json\":146}],167:[function(require,module,exports){\nmodule.exports = Stream;\n\nvar Parser = require(\"./Parser.js\"),\n    WritableStream = require(\"stream\").Writable || require(\"readable-stream\").Writable,\n    StringDecoder = require(\"string_decoder\").StringDecoder,\n    Buffer = require(\"buffer\").Buffer;\n\nfunction Stream(cbs, options){\n\tvar parser = this._parser = new Parser(cbs, options);\n\tvar decoder = this._decoder = new StringDecoder();\n\n\tWritableStream.call(this, {decodeStrings: false});\n\n\tthis.once(\"finish\", function(){\n\t\tparser.end(decoder.end());\n\t});\n}\n\nrequire(\"inherits\")(Stream, WritableStream);\n\nWritableStream.prototype._write = function(chunk, encoding, cb){\n\tif(chunk instanceof Buffer) chunk = this._decoder.write(chunk);\n\tthis._parser.write(chunk);\n\tcb();\n};\n},{\"./Parser.js\":163,\"buffer\":115,\"inherits\":173,\"readable-stream\":110,\"stream\":212,\"string_decoder\":213}],168:[function(require,module,exports){\nvar Parser = require(\"./Parser.js\"),\n    DomHandler = require(\"domhandler\");\n\nfunction defineProp(name, value){\n\tdelete module.exports[name];\n\tmodule.exports[name] = value;\n\treturn value;\n}\n\nmodule.exports = {\n\tParser: Parser,\n\tTokenizer: require(\"./Tokenizer.js\"),\n\tElementType: require(\"domelementtype\"),\n\tDomHandler: DomHandler,\n\tget FeedHandler(){\n\t\treturn defineProp(\"FeedHandler\", require(\"./FeedHandler.js\"));\n\t},\n\tget Stream(){\n\t\treturn defineProp(\"Stream\", require(\"./Stream.js\"));\n\t},\n\tget WritableStream(){\n\t\treturn defineProp(\"WritableStream\", require(\"./WritableStream.js\"));\n\t},\n\tget ProxyHandler(){\n\t\treturn defineProp(\"ProxyHandler\", require(\"./ProxyHandler.js\"));\n\t},\n\tget DomUtils(){\n\t\treturn defineProp(\"DomUtils\", require(\"domutils\"));\n\t},\n\tget CollectingHandler(){\n\t\treturn defineProp(\"CollectingHandler\", require(\"./CollectingHandler.js\"));\n\t},\n\t// For legacy support\n\tDefaultHandler: DomHandler,\n\tget RssHandler(){\n\t\treturn defineProp(\"RssHandler\", this.FeedHandler);\n\t},\n\t//helper methods\n\tparseDOM: function(data, options){\n\t\tvar handler = new DomHandler(options);\n\t\tnew Parser(handler, options).end(data);\n\t\treturn handler.dom;\n\t},\n\tparseFeed: function(feed, options){\n\t\tvar handler = new module.exports.FeedHandler(options);\n\t\tnew Parser(handler, options).end(feed);\n\t\treturn handler.dom;\n\t},\n\tcreateDomStream: function(cb, options, elementCb){\n\t\tvar handler = new DomHandler(cb, options, elementCb);\n\t\treturn new Parser(handler, options);\n\t},\n\t// List of all events that the parser emits\n\tEVENTS: { /* Format: eventname: number of arguments */\n\t\tattribute: 2,\n\t\tcdatastart: 0,\n\t\tcdataend: 0,\n\t\ttext: 1,\n\t\tprocessinginstruction: 2,\n\t\tcomment: 1,\n\t\tcommentend: 0,\n\t\tclosetag: 1,\n\t\topentag: 2,\n\t\topentagname: 1,\n\t\terror: 1,\n\t\tend: 0\n\t}\n};\n\n},{\"./CollectingHandler.js\":161,\"./FeedHandler.js\":162,\"./Parser.js\":163,\"./ProxyHandler.js\":164,\"./Stream.js\":165,\"./Tokenizer.js\":166,\"./WritableStream.js\":167,\"domelementtype\":123,\"domhandler\":124,\"domutils\":127}],169:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}],170:[function(require,module,exports){\n/**\n *  Copyright (c) 2014-2015, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^321.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));\n},{}],171:[function(require,module,exports){\n(function (global){\n'use strict';\n\n/*global window, global*/\n\nvar root = typeof window !== 'undefined' ?\n    window : typeof global !== 'undefined' ?\n    global : {};\n\nmodule.exports = Individual;\n\nfunction Individual(key, value) {\n    if (key in root) {\n        return root[key];\n    }\n\n    root[key] = value;\n\n    return value;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],172:[function(require,module,exports){\n'use strict';\n\nvar Individual = require('./index.js');\n\nmodule.exports = OneVersion;\n\nfunction OneVersion(moduleName, version, defaultValue) {\n    var key = '__INDIVIDUAL_ONE_VERSION_' + moduleName;\n    var enforceKey = key + '_ENFORCE_SINGLETON';\n\n    var versionValue = Individual(enforceKey, version);\n\n    if (versionValue !== version) {\n        throw new Error('Can only have one copy of ' +\n            moduleName + '.\\n' +\n            'You already have version ' + versionValue +\n            ' installed.\\n' +\n            'This means you cannot install version ' + version);\n    }\n\n    return Individual(key, defaultValue);\n}\n\n},{\"./index.js\":171}],173:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],174:[function(require,module,exports){\n/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n},{}],175:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n\n},{}],176:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],177:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":184}],178:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  value = Object(value);\n  return (symToStringTag && symToStringTag in value)\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n},{\"./_Symbol\":177,\"./_getRawTag\":181,\"./_objectToString\":182}],179:[function(require,module,exports){\n(function (global){\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],180:[function(require,module,exports){\nvar overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n\n},{\"./_overArg\":183}],181:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n},{\"./_Symbol\":177}],182:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n},{}],183:[function(require,module,exports){\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n},{}],184:[function(require,module,exports){\nvar freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n},{\"./_freeGlobal\":179}],185:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],186:[function(require,module,exports){\nvar baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_baseGetTag\":178,\"./_getPrototype\":180,\"./isObjectLike\":185}],187:[function(require,module,exports){\n(function (global){\n/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.2';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      reLeadingDot = /^\\./,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading and trailing whitespace. */\n  var reTrim = /^\\s+|\\s+$/g,\n      reTrimStart = /^\\s+/,\n      reTrimEnd = /\\s+$/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:(?:1st|2nd|3rd|(?![123])\\\\dth)\\\\b)',\n      rsOrdUpper = '\\\\d*(?:(?:1ST|2ND|3RD|(?![123])\\\\dTH)\\\\b)',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Adds the key-value `pair` to `map`.\n   *\n   * @private\n   * @param {Object} map The map to modify.\n   * @param {Array} pair The key-value pair to add.\n   * @returns {Object} Returns `map`.\n   */\n  function addMapEntry(map, pair) {\n    // Don't return `map.set` because it's not chainable in IE 11.\n    map.set(pair[0], pair[1]);\n    return map;\n  }\n\n  /**\n   * Adds `value` to `set`.\n   *\n   * @private\n   * @param {Object} set The set to modify.\n   * @param {*} value The value to add.\n   * @returns {Object} Returns `set`.\n   */\n  function addSetEntry(set, value) {\n    // Don't return `set.add` because it's not chainable in IE 11.\n    set.add(value);\n    return set;\n  }\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array of at least `200` elements\n     * and any iteratees accept only one argument. The heuristic for whether a\n     * section qualifies for shortcut fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB). Change the following template settings to use\n     * alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || arrLength < LARGE_ARRAY_SIZE ||\n          (arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function assignInDefaults(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, baseClone, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      value = Object(value);\n      return (symToStringTag && symToStringTag in value)\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = arrayTag,\n          othTag = arrayTag;\n\n      if (!objIsArr) {\n        objTag = getTag(object);\n        objTag = objTag == argsTag ? objectTag : objTag;\n      }\n      if (!othIsArr) {\n        othTag = getTag(other);\n        othTag = othTag == argsTag ? objectTag : othTag;\n      }\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        if (isObject(srcValue)) {\n          stack || (stack = new Stack);\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = object[key],\n          srcValue = source[key],\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      var index = -1;\n      iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      object = Object(object);\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      value = iteratee(value);\n\n      var low = 0,\n          high = array == null ? 0 : array.length,\n          valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `map`.\n     *\n     * @private\n     * @param {Object} map The map to clone.\n     * @param {Function} cloneFunc The function to clone values.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned map.\n     */\n    function cloneMap(map, isDeep, cloneFunc) {\n      var array = isDeep ? cloneFunc(mapToArray(map), CLONE_DEEP_FLAG) : mapToArray(map);\n      return arrayReduce(array, addMapEntry, new map.constructor);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of `set`.\n     *\n     * @private\n     * @param {Object} set The set to clone.\n     * @param {Function} cloneFunc The function to clone values.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned set.\n     */\n    function cloneSet(set, isDeep, cloneFunc) {\n      var array = isDeep ? cloneFunc(setToArray(set), CLONE_DEEP_FLAG) : setToArray(set);\n      return arrayReduce(array, addSetEntry, new set.constructor);\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 &&\n              isArray(value) && value.length >= LARGE_ARRAY_SIZE) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = nativeMin(toInteger(precision), 292);\n        if (precision) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] == null\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(array);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = keys(object),\n          objLength = objProps.length,\n          othProps = keys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked && stack.get(other)) {\n        return stacked == other;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {Function} cloneFunc The function to clone values.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, cloneFunc, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return cloneMap(object, isDeep, cloneFunc);\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return cloneSet(object, isDeep, cloneFunc);\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      length = length == null ? MAX_SAFE_INTEGER : length;\n      return !!length &&\n        (typeof value == 'number' || reIsUint.test(value)) &&\n        (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function mergeDefaults(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, mergeDefaults, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (reLeadingDot.test(string)) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, string) {\n        result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false},\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            result = wait - timeSinceLastCall;\n\n        return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are **not** supported.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, '');\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(args) {\n      args.push(undefined, assignInDefaults);\n      return apply(assignInWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, mergeDefaults);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = baseClamp(toInteger(position), 0, string.length);\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, assignInDefaults);\n\n      var imports = assignInWith({}, options.imports, settings.imports, assignInDefaults),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      var sourceURL = '//# sourceURL=' +\n        ('sourceURL' in options\n          ? options.sourceURL\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrim, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimEnd, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        var filtered = this.__filtered__;\n        if (filtered && !index) {\n          return new LazyWrapper(this);\n        }\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = this.clone();\n        if (filtered) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = (lodashFunc.name + ''),\n            names = realNames[key] || (realNames[key] = []);\n\n        names.push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],188:[function(require,module,exports){\n/**\n * Byte sizes are taken from ECMAScript Language Specification\n * http://www.ecma-international.org/ecma-262/5.1/\n * http://bclary.com/2004/11/07/#a-4.3.16\n */\n\nmodule.exports = {\n    STRING: 2,\n    BOOLEAN: 4,\n    NUMBER: 8\n};\n},{}],189:[function(require,module,exports){\n(function (Buffer){\n// Copyright 2014 Andrei Karpushonak\n\n\"use strict\";\n\nvar ECMA_SIZES  = require('./byte_size');\n\n/**\n * Main module's entry point\n * Calculates Bytes for the provided parameter\n * @param object - handles object/string/boolean/buffer\n * @returns {*}\n */\nfunction sizeof(object) {\n    if (object !== null && typeof (object) === 'object') {\n      if (Buffer.isBuffer(object)) {\n        return object.length;\n      }\n      else {\n        var bytes = 0;\n        for (var key in object) {\n\n          if(!Object.hasOwnProperty.call(object, key)) {\n            continue;\n          }\n\n          bytes += sizeof(key);\n          try {\n            bytes += sizeof(object[key]);\n          } catch (ex) {\n            if(ex instanceof RangeError) {\n              // circular reference detected, final result might be incorrect\n              // let's be nice and not throw an exception\n              bytes = 0;\n            }\n          }\n        }\n        return bytes;\n      }\n    } else if (typeof (object) === 'string') {\n      return object.length * ECMA_SIZES.STRING;\n    } else if (typeof (object) === 'boolean') {\n      return ECMA_SIZES.BOOLEAN;\n    } else if (typeof (object) === 'number') {\n      return ECMA_SIZES.NUMBER;\n    } else {\n      return 0;\n    }\n}\n\nmodule.exports = sizeof;\n\n}).call(this,{\"isBuffer\":require(\"../is-buffer/index.js\")})\n},{\"../is-buffer/index.js\":174,\"./byte_size\":188}],190:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n}).call(this,require('_process'))\n},{\"_process\":113}],191:[function(require,module,exports){\n(function (process){\n'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = nextTick;\n} else {\n  module.exports = process.nextTick;\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n}).call(this,require('_process'))\n},{\"_process\":113}],192:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],193:[function(require,module,exports){\n//  Ramda v0.22.1\n//  https://github.com/ramda/ramda\n//  (c) 2013-2016 Scott Sauyet, Michael Hurley, and David Chambers\n//  Ramda may be freely distributed under the MIT license.\n\n;(function() {\n\n  'use strict';\n\n  /**\n     * A special placeholder value used to specify \"gaps\" within curried functions,\n     * allowing partial application of any combination of arguments, regardless of\n     * their positions.\n     *\n     * If `g` is a curried ternary function and `_` is `R.__`, the following are\n     * equivalent:\n     *\n     *   - `g(1, 2, 3)`\n     *   - `g(_, 2, 3)(1)`\n     *   - `g(_, _, 3)(1)(2)`\n     *   - `g(_, _, 3)(1, 2)`\n     *   - `g(_, 2, _)(1, 3)`\n     *   - `g(_, 2)(1)(3)`\n     *   - `g(_, 2)(1, 3)`\n     *   - `g(_, 2)(_, 3)(1)`\n     *\n     * @constant\n     * @memberOf R\n     * @since v0.6.0\n     * @category Function\n     * @example\n     *\n     *      var greet = R.replace('{name}', R.__, 'Hello, {name}!');\n     *      greet('Alice'); //=> 'Hello, Alice!'\n     */\n    var __ = { '@@functional/placeholder': true };\n\n    /* eslint-disable no-unused-vars */\n    var _arity = function _arity(n, fn) {\n        /* eslint-disable no-unused-vars */\n        switch (n) {\n        case 0:\n            return function () {\n                return fn.apply(this, arguments);\n            };\n        case 1:\n            return function (a0) {\n                return fn.apply(this, arguments);\n            };\n        case 2:\n            return function (a0, a1) {\n                return fn.apply(this, arguments);\n            };\n        case 3:\n            return function (a0, a1, a2) {\n                return fn.apply(this, arguments);\n            };\n        case 4:\n            return function (a0, a1, a2, a3) {\n                return fn.apply(this, arguments);\n            };\n        case 5:\n            return function (a0, a1, a2, a3, a4) {\n                return fn.apply(this, arguments);\n            };\n        case 6:\n            return function (a0, a1, a2, a3, a4, a5) {\n                return fn.apply(this, arguments);\n            };\n        case 7:\n            return function (a0, a1, a2, a3, a4, a5, a6) {\n                return fn.apply(this, arguments);\n            };\n        case 8:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n                return fn.apply(this, arguments);\n            };\n        case 9:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n                return fn.apply(this, arguments);\n            };\n        case 10:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n                return fn.apply(this, arguments);\n            };\n        default:\n            throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n        }\n    };\n\n    var _arrayFromIterator = function _arrayFromIterator(iter) {\n        var list = [];\n        var next;\n        while (!(next = iter.next()).done) {\n            list.push(next.value);\n        }\n        return list;\n    };\n\n    var _arrayOf = function _arrayOf() {\n        return Array.prototype.slice.call(arguments);\n    };\n\n    var _cloneRegExp = function _cloneRegExp(pattern) {\n        return new RegExp(pattern.source, (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : ''));\n    };\n\n    var _complement = function _complement(f) {\n        return function () {\n            return !f.apply(this, arguments);\n        };\n    };\n\n    /**\n     * Private `concat` function to merge two array-like objects.\n     *\n     * @private\n     * @param {Array|Arguments} [set1=[]] An array-like object.\n     * @param {Array|Arguments} [set2=[]] An array-like object.\n     * @return {Array} A new, merged array.\n     * @example\n     *\n     *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]\n     */\n    var _concat = function _concat(set1, set2) {\n        set1 = set1 || [];\n        set2 = set2 || [];\n        var idx;\n        var len1 = set1.length;\n        var len2 = set2.length;\n        var result = [];\n        idx = 0;\n        while (idx < len1) {\n            result[result.length] = set1[idx];\n            idx += 1;\n        }\n        idx = 0;\n        while (idx < len2) {\n            result[result.length] = set2[idx];\n            idx += 1;\n        }\n        return result;\n    };\n\n    var _containsWith = function _containsWith(pred, x, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            if (pred(x, list[idx])) {\n                return true;\n            }\n            idx += 1;\n        }\n        return false;\n    };\n\n    var _filter = function _filter(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        var result = [];\n        while (idx < len) {\n            if (fn(list[idx])) {\n                result[result.length] = list[idx];\n            }\n            idx += 1;\n        }\n        return result;\n    };\n\n    var _forceReduced = function _forceReduced(x) {\n        return {\n            '@@transducer/value': x,\n            '@@transducer/reduced': true\n        };\n    };\n\n    // String(x => x) evaluates to \"x => x\", so the pattern may not match.\n    var _functionName = function _functionName(f) {\n        // String(x => x) evaluates to \"x => x\", so the pattern may not match.\n        var match = String(f).match(/^function (\\w*)/);\n        return match == null ? '' : match[1];\n    };\n\n    var _has = function _has(prop, obj) {\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n\n    var _identity = function _identity(x) {\n        return x;\n    };\n\n    var _isArguments = function () {\n        var toString = Object.prototype.toString;\n        return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {\n            return toString.call(x) === '[object Arguments]';\n        } : function _isArguments(x) {\n            return _has('callee', x);\n        };\n    }();\n\n    /**\n     * Tests whether or not an object is an array.\n     *\n     * @private\n     * @param {*} val The object to test.\n     * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n     * @example\n     *\n     *      _isArray([]); //=> true\n     *      _isArray(null); //=> false\n     *      _isArray({}); //=> false\n     */\n    var _isArray = Array.isArray || function _isArray(val) {\n        return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n    };\n\n    var _isFunction = function _isFunction(x) {\n        return Object.prototype.toString.call(x) === '[object Function]';\n    };\n\n    /**\n     * Determine if the passed argument is an integer.\n     *\n     * @private\n     * @param {*} n\n     * @category Type\n     * @return {Boolean}\n     */\n    var _isInteger = Number.isInteger || function _isInteger(n) {\n        return n << 0 === n;\n    };\n\n    var _isNumber = function _isNumber(x) {\n        return Object.prototype.toString.call(x) === '[object Number]';\n    };\n\n    var _isObject = function _isObject(x) {\n        return Object.prototype.toString.call(x) === '[object Object]';\n    };\n\n    var _isPlaceholder = function _isPlaceholder(a) {\n        return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n    };\n\n    var _isRegExp = function _isRegExp(x) {\n        return Object.prototype.toString.call(x) === '[object RegExp]';\n    };\n\n    var _isString = function _isString(x) {\n        return Object.prototype.toString.call(x) === '[object String]';\n    };\n\n    var _isTransformer = function _isTransformer(obj) {\n        return typeof obj['@@transducer/step'] === 'function';\n    };\n\n    var _map = function _map(fn, functor) {\n        var idx = 0;\n        var len = functor.length;\n        var result = Array(len);\n        while (idx < len) {\n            result[idx] = fn(functor[idx]);\n            idx += 1;\n        }\n        return result;\n    };\n\n    // Based on https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n    var _objectAssign = function _objectAssign(target) {\n        if (target == null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n        var output = Object(target);\n        var idx = 1;\n        var length = arguments.length;\n        while (idx < length) {\n            var source = arguments[idx];\n            if (source != null) {\n                for (var nextKey in source) {\n                    if (_has(nextKey, source)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n            idx += 1;\n        }\n        return output;\n    };\n\n    var _of = function _of(x) {\n        return [x];\n    };\n\n    var _pipe = function _pipe(f, g) {\n        return function () {\n            return g.call(this, f.apply(this, arguments));\n        };\n    };\n\n    var _pipeP = function _pipeP(f, g) {\n        return function () {\n            var ctx = this;\n            return f.apply(ctx, arguments).then(function (x) {\n                return g.call(ctx, x);\n            });\n        };\n    };\n\n    // \\b matches word boundary; [\\b] matches backspace\n    var _quote = function _quote(s) {\n        var escaped = s.replace(/\\\\/g, '\\\\\\\\').replace(/[\\b]/g, '\\\\b')    // \\b matches word boundary; [\\b] matches backspace\n    .replace(/\\f/g, '\\\\f').replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r').replace(/\\t/g, '\\\\t').replace(/\\v/g, '\\\\v').replace(/\\0/g, '\\\\0');\n        return '\"' + escaped.replace(/\"/g, '\\\\\"') + '\"';\n    };\n\n    var _reduced = function _reduced(x) {\n        return x && x['@@transducer/reduced'] ? x : {\n            '@@transducer/value': x,\n            '@@transducer/reduced': true\n        };\n    };\n\n    /**\n     * An optimized, private array `slice` implementation.\n     *\n     * @private\n     * @param {Arguments|Array} args The array or arguments object to consider.\n     * @param {Number} [from=0] The array index to slice from, inclusive.\n     * @param {Number} [to=args.length] The array index to slice to, exclusive.\n     * @return {Array} A new, sliced array.\n     * @example\n     *\n     *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]\n     *\n     *      var firstThreeArgs = function(a, b, c, d) {\n     *        return _slice(arguments, 0, 3);\n     *      };\n     *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]\n     */\n    var _slice = function _slice(args, from, to) {\n        switch (arguments.length) {\n        case 1:\n            return _slice(args, 0, args.length);\n        case 2:\n            return _slice(args, from, args.length);\n        default:\n            var list = [];\n            var idx = 0;\n            var len = Math.max(0, Math.min(args.length, to) - from);\n            while (idx < len) {\n                list[idx] = args[from + idx];\n                idx += 1;\n            }\n            return list;\n        }\n    };\n\n    /**\n     * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.\n     */\n    var _toISOString = function () {\n        var pad = function pad(n) {\n            return (n < 10 ? '0' : '') + n;\n        };\n        return typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {\n            return d.toISOString();\n        } : function _toISOString(d) {\n            return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';\n        };\n    }();\n\n    var _xfBase = {\n        init: function () {\n            return this.xf['@@transducer/init']();\n        },\n        result: function (result) {\n            return this.xf['@@transducer/result'](result);\n        }\n    };\n\n    var _xwrap = function () {\n        function XWrap(fn) {\n            this.f = fn;\n        }\n        XWrap.prototype['@@transducer/init'] = function () {\n            throw new Error('init not implemented on XWrap');\n        };\n        XWrap.prototype['@@transducer/result'] = function (acc) {\n            return acc;\n        };\n        XWrap.prototype['@@transducer/step'] = function (acc, x) {\n            return this.f(acc, x);\n        };\n        return function _xwrap(fn) {\n            return new XWrap(fn);\n        };\n    }();\n\n    var _aperture = function _aperture(n, list) {\n        var idx = 0;\n        var limit = list.length - (n - 1);\n        var acc = new Array(limit >= 0 ? limit : 0);\n        while (idx < limit) {\n            acc[idx] = _slice(list, idx, idx + n);\n            idx += 1;\n        }\n        return acc;\n    };\n\n    var _assign = typeof Object.assign === 'function' ? Object.assign : _objectAssign;\n\n    /**\n     * Similar to hasMethod, this checks whether a function has a [methodname]\n     * function. If it isn't an array it will execute that function otherwise it\n     * will default to the ramda implementation.\n     *\n     * @private\n     * @param {Function} fn ramda implemtation\n     * @param {String} methodname property to check for a custom implementation\n     * @return {Object} Whatever the return value of the method is.\n     */\n    var _checkForMethod = function _checkForMethod(methodname, fn) {\n        return function () {\n            var length = arguments.length;\n            if (length === 0) {\n                return fn();\n            }\n            var obj = arguments[length - 1];\n            return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, _slice(arguments, 0, length - 1));\n        };\n    };\n\n    /**\n     * Optimized internal one-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry1 = function _curry1(fn) {\n        return function f1(a) {\n            if (arguments.length === 0 || _isPlaceholder(a)) {\n                return f1;\n            } else {\n                return fn.apply(this, arguments);\n            }\n        };\n    };\n\n    /**\n     * Optimized internal two-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry2 = function _curry2(fn) {\n        return function f2(a, b) {\n            switch (arguments.length) {\n            case 0:\n                return f2;\n            case 1:\n                return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n                    return fn(a, _b);\n                });\n            default:\n                return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n                    return fn(_a, b);\n                }) : _isPlaceholder(b) ? _curry1(function (_b) {\n                    return fn(a, _b);\n                }) : fn(a, b);\n            }\n        };\n    };\n\n    /**\n     * Optimized internal three-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry3 = function _curry3(fn) {\n        return function f3(a, b, c) {\n            switch (arguments.length) {\n            case 0:\n                return f3;\n            case 1:\n                return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                });\n            case 2:\n                return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n                    return fn(_a, b, _c);\n                }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                }) : _curry1(function (_c) {\n                    return fn(a, b, _c);\n                });\n            default:\n                return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n                    return fn(_a, _b, c);\n                }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n                    return fn(_a, b, _c);\n                }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                }) : _isPlaceholder(a) ? _curry1(function (_a) {\n                    return fn(_a, b, c);\n                }) : _isPlaceholder(b) ? _curry1(function (_b) {\n                    return fn(a, _b, c);\n                }) : _isPlaceholder(c) ? _curry1(function (_c) {\n                    return fn(a, b, _c);\n                }) : fn(a, b, c);\n            }\n        };\n    };\n\n    /**\n     * Internal curryN function.\n     *\n     * @private\n     * @category Function\n     * @param {Number} length The arity of the curried function.\n     * @param {Array} received An array of arguments received thus far.\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curryN = function _curryN(length, received, fn) {\n        return function () {\n            var combined = [];\n            var argsIdx = 0;\n            var left = length;\n            var combinedIdx = 0;\n            while (combinedIdx < received.length || argsIdx < arguments.length) {\n                var result;\n                if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n                    result = received[combinedIdx];\n                } else {\n                    result = arguments[argsIdx];\n                    argsIdx += 1;\n                }\n                combined[combinedIdx] = result;\n                if (!_isPlaceholder(result)) {\n                    left -= 1;\n                }\n                combinedIdx += 1;\n            }\n            return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n        };\n    };\n\n    /**\n     * Returns a function that dispatches with different strategies based on the\n     * object in list position (last argument). If it is an array, executes [fn].\n     * Otherwise, if it has a function with [methodname], it will execute that\n     * function (functor case). Otherwise, if it is a transformer, uses transducer\n     * [xf] to return a new transformer (transducer case). Otherwise, it will\n     * default to executing [fn].\n     *\n     * @private\n     * @param {String} methodname property to check for a custom implementation\n     * @param {Function} xf transducer to initialize if object is transformer\n     * @param {Function} fn default ramda implementation\n     * @return {Function} A function that dispatches on object in list position\n     */\n    var _dispatchable = function _dispatchable(methodname, xf, fn) {\n        return function () {\n            var length = arguments.length;\n            if (length === 0) {\n                return fn();\n            }\n            var obj = arguments[length - 1];\n            if (!_isArray(obj)) {\n                var args = _slice(arguments, 0, length - 1);\n                if (typeof obj[methodname] === 'function') {\n                    return obj[methodname].apply(obj, args);\n                }\n                if (_isTransformer(obj)) {\n                    var transducer = xf.apply(null, args);\n                    return transducer(obj);\n                }\n            }\n            return fn.apply(this, arguments);\n        };\n    };\n\n    var _dropLastWhile = function dropLastWhile(pred, list) {\n        var idx = list.length - 1;\n        while (idx >= 0 && pred(list[idx])) {\n            idx -= 1;\n        }\n        return _slice(list, 0, idx + 1);\n    };\n\n    var _xall = function () {\n        function XAll(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.all = true;\n        }\n        XAll.prototype['@@transducer/init'] = _xfBase.init;\n        XAll.prototype['@@transducer/result'] = function (result) {\n            if (this.all) {\n                result = this.xf['@@transducer/step'](result, true);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XAll.prototype['@@transducer/step'] = function (result, input) {\n            if (!this.f(input)) {\n                this.all = false;\n                result = _reduced(this.xf['@@transducer/step'](result, false));\n            }\n            return result;\n        };\n        return _curry2(function _xall(f, xf) {\n            return new XAll(f, xf);\n        });\n    }();\n\n    var _xany = function () {\n        function XAny(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.any = false;\n        }\n        XAny.prototype['@@transducer/init'] = _xfBase.init;\n        XAny.prototype['@@transducer/result'] = function (result) {\n            if (!this.any) {\n                result = this.xf['@@transducer/step'](result, false);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XAny.prototype['@@transducer/step'] = function (result, input) {\n            if (this.f(input)) {\n                this.any = true;\n                result = _reduced(this.xf['@@transducer/step'](result, true));\n            }\n            return result;\n        };\n        return _curry2(function _xany(f, xf) {\n            return new XAny(f, xf);\n        });\n    }();\n\n    var _xaperture = function () {\n        function XAperture(n, xf) {\n            this.xf = xf;\n            this.pos = 0;\n            this.full = false;\n            this.acc = new Array(n);\n        }\n        XAperture.prototype['@@transducer/init'] = _xfBase.init;\n        XAperture.prototype['@@transducer/result'] = function (result) {\n            this.acc = null;\n            return this.xf['@@transducer/result'](result);\n        };\n        XAperture.prototype['@@transducer/step'] = function (result, input) {\n            this.store(input);\n            return this.full ? this.xf['@@transducer/step'](result, this.getCopy()) : result;\n        };\n        XAperture.prototype.store = function (input) {\n            this.acc[this.pos] = input;\n            this.pos += 1;\n            if (this.pos === this.acc.length) {\n                this.pos = 0;\n                this.full = true;\n            }\n        };\n        XAperture.prototype.getCopy = function () {\n            return _concat(_slice(this.acc, this.pos), _slice(this.acc, 0, this.pos));\n        };\n        return _curry2(function _xaperture(n, xf) {\n            return new XAperture(n, xf);\n        });\n    }();\n\n    var _xdrop = function () {\n        function XDrop(n, xf) {\n            this.xf = xf;\n            this.n = n;\n        }\n        XDrop.prototype['@@transducer/init'] = _xfBase.init;\n        XDrop.prototype['@@transducer/result'] = _xfBase.result;\n        XDrop.prototype['@@transducer/step'] = function (result, input) {\n            if (this.n > 0) {\n                this.n -= 1;\n                return result;\n            }\n            return this.xf['@@transducer/step'](result, input);\n        };\n        return _curry2(function _xdrop(n, xf) {\n            return new XDrop(n, xf);\n        });\n    }();\n\n    var _xdropLast = function () {\n        function XDropLast(n, xf) {\n            this.xf = xf;\n            this.pos = 0;\n            this.full = false;\n            this.acc = new Array(n);\n        }\n        XDropLast.prototype['@@transducer/init'] = _xfBase.init;\n        XDropLast.prototype['@@transducer/result'] = function (result) {\n            this.acc = null;\n            return this.xf['@@transducer/result'](result);\n        };\n        XDropLast.prototype['@@transducer/step'] = function (result, input) {\n            if (this.full) {\n                result = this.xf['@@transducer/step'](result, this.acc[this.pos]);\n            }\n            this.store(input);\n            return result;\n        };\n        XDropLast.prototype.store = function (input) {\n            this.acc[this.pos] = input;\n            this.pos += 1;\n            if (this.pos === this.acc.length) {\n                this.pos = 0;\n                this.full = true;\n            }\n        };\n        return _curry2(function _xdropLast(n, xf) {\n            return new XDropLast(n, xf);\n        });\n    }();\n\n    var _xdropRepeatsWith = function () {\n        function XDropRepeatsWith(pred, xf) {\n            this.xf = xf;\n            this.pred = pred;\n            this.lastValue = undefined;\n            this.seenFirstValue = false;\n        }\n        XDropRepeatsWith.prototype['@@transducer/init'] = function () {\n            return this.xf['@@transducer/init']();\n        };\n        XDropRepeatsWith.prototype['@@transducer/result'] = function (result) {\n            return this.xf['@@transducer/result'](result);\n        };\n        XDropRepeatsWith.prototype['@@transducer/step'] = function (result, input) {\n            var sameAsLast = false;\n            if (!this.seenFirstValue) {\n                this.seenFirstValue = true;\n            } else if (this.pred(this.lastValue, input)) {\n                sameAsLast = true;\n            }\n            this.lastValue = input;\n            return sameAsLast ? result : this.xf['@@transducer/step'](result, input);\n        };\n        return _curry2(function _xdropRepeatsWith(pred, xf) {\n            return new XDropRepeatsWith(pred, xf);\n        });\n    }();\n\n    var _xdropWhile = function () {\n        function XDropWhile(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XDropWhile.prototype['@@transducer/init'] = _xfBase.init;\n        XDropWhile.prototype['@@transducer/result'] = _xfBase.result;\n        XDropWhile.prototype['@@transducer/step'] = function (result, input) {\n            if (this.f) {\n                if (this.f(input)) {\n                    return result;\n                }\n                this.f = null;\n            }\n            return this.xf['@@transducer/step'](result, input);\n        };\n        return _curry2(function _xdropWhile(f, xf) {\n            return new XDropWhile(f, xf);\n        });\n    }();\n\n    var _xfilter = function () {\n        function XFilter(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XFilter.prototype['@@transducer/init'] = _xfBase.init;\n        XFilter.prototype['@@transducer/result'] = _xfBase.result;\n        XFilter.prototype['@@transducer/step'] = function (result, input) {\n            return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;\n        };\n        return _curry2(function _xfilter(f, xf) {\n            return new XFilter(f, xf);\n        });\n    }();\n\n    var _xfind = function () {\n        function XFind(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.found = false;\n        }\n        XFind.prototype['@@transducer/init'] = _xfBase.init;\n        XFind.prototype['@@transducer/result'] = function (result) {\n            if (!this.found) {\n                result = this.xf['@@transducer/step'](result, void 0);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XFind.prototype['@@transducer/step'] = function (result, input) {\n            if (this.f(input)) {\n                this.found = true;\n                result = _reduced(this.xf['@@transducer/step'](result, input));\n            }\n            return result;\n        };\n        return _curry2(function _xfind(f, xf) {\n            return new XFind(f, xf);\n        });\n    }();\n\n    var _xfindIndex = function () {\n        function XFindIndex(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.idx = -1;\n            this.found = false;\n        }\n        XFindIndex.prototype['@@transducer/init'] = _xfBase.init;\n        XFindIndex.prototype['@@transducer/result'] = function (result) {\n            if (!this.found) {\n                result = this.xf['@@transducer/step'](result, -1);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XFindIndex.prototype['@@transducer/step'] = function (result, input) {\n            this.idx += 1;\n            if (this.f(input)) {\n                this.found = true;\n                result = _reduced(this.xf['@@transducer/step'](result, this.idx));\n            }\n            return result;\n        };\n        return _curry2(function _xfindIndex(f, xf) {\n            return new XFindIndex(f, xf);\n        });\n    }();\n\n    var _xfindLast = function () {\n        function XFindLast(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XFindLast.prototype['@@transducer/init'] = _xfBase.init;\n        XFindLast.prototype['@@transducer/result'] = function (result) {\n            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.last));\n        };\n        XFindLast.prototype['@@transducer/step'] = function (result, input) {\n            if (this.f(input)) {\n                this.last = input;\n            }\n            return result;\n        };\n        return _curry2(function _xfindLast(f, xf) {\n            return new XFindLast(f, xf);\n        });\n    }();\n\n    var _xfindLastIndex = function () {\n        function XFindLastIndex(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.idx = -1;\n            this.lastIdx = -1;\n        }\n        XFindLastIndex.prototype['@@transducer/init'] = _xfBase.init;\n        XFindLastIndex.prototype['@@transducer/result'] = function (result) {\n            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.lastIdx));\n        };\n        XFindLastIndex.prototype['@@transducer/step'] = function (result, input) {\n            this.idx += 1;\n            if (this.f(input)) {\n                this.lastIdx = this.idx;\n            }\n            return result;\n        };\n        return _curry2(function _xfindLastIndex(f, xf) {\n            return new XFindLastIndex(f, xf);\n        });\n    }();\n\n    var _xmap = function () {\n        function XMap(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XMap.prototype['@@transducer/init'] = _xfBase.init;\n        XMap.prototype['@@transducer/result'] = _xfBase.result;\n        XMap.prototype['@@transducer/step'] = function (result, input) {\n            return this.xf['@@transducer/step'](result, this.f(input));\n        };\n        return _curry2(function _xmap(f, xf) {\n            return new XMap(f, xf);\n        });\n    }();\n\n    var _xreduceBy = function () {\n        function XReduceBy(valueFn, valueAcc, keyFn, xf) {\n            this.valueFn = valueFn;\n            this.valueAcc = valueAcc;\n            this.keyFn = keyFn;\n            this.xf = xf;\n            this.inputs = {};\n        }\n        XReduceBy.prototype['@@transducer/init'] = _xfBase.init;\n        XReduceBy.prototype['@@transducer/result'] = function (result) {\n            var key;\n            for (key in this.inputs) {\n                if (_has(key, this.inputs)) {\n                    result = this.xf['@@transducer/step'](result, this.inputs[key]);\n                    if (result['@@transducer/reduced']) {\n                        result = result['@@transducer/value'];\n                        break;\n                    }\n                }\n            }\n            this.inputs = null;\n            return this.xf['@@transducer/result'](result);\n        };\n        XReduceBy.prototype['@@transducer/step'] = function (result, input) {\n            var key = this.keyFn(input);\n            this.inputs[key] = this.inputs[key] || [\n                key,\n                this.valueAcc\n            ];\n            this.inputs[key][1] = this.valueFn(this.inputs[key][1], input);\n            return result;\n        };\n        return _curryN(4, [], function _xreduceBy(valueFn, valueAcc, keyFn, xf) {\n            return new XReduceBy(valueFn, valueAcc, keyFn, xf);\n        });\n    }();\n\n    var _xtake = function () {\n        function XTake(n, xf) {\n            this.xf = xf;\n            this.n = n;\n            this.i = 0;\n        }\n        XTake.prototype['@@transducer/init'] = _xfBase.init;\n        XTake.prototype['@@transducer/result'] = _xfBase.result;\n        XTake.prototype['@@transducer/step'] = function (result, input) {\n            this.i += 1;\n            var ret = this.n === 0 ? result : this.xf['@@transducer/step'](result, input);\n            return this.i >= this.n ? _reduced(ret) : ret;\n        };\n        return _curry2(function _xtake(n, xf) {\n            return new XTake(n, xf);\n        });\n    }();\n\n    var _xtakeWhile = function () {\n        function XTakeWhile(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XTakeWhile.prototype['@@transducer/init'] = _xfBase.init;\n        XTakeWhile.prototype['@@transducer/result'] = _xfBase.result;\n        XTakeWhile.prototype['@@transducer/step'] = function (result, input) {\n            return this.f(input) ? this.xf['@@transducer/step'](result, input) : _reduced(result);\n        };\n        return _curry2(function _xtakeWhile(f, xf) {\n            return new XTakeWhile(f, xf);\n        });\n    }();\n\n    /**\n     * Adds two values.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} a\n     * @param {Number} b\n     * @return {Number}\n     * @see R.subtract\n     * @example\n     *\n     *      R.add(2, 3);       //=>  5\n     *      R.add(7)(10);      //=> 17\n     */\n    var add = _curry2(function add(a, b) {\n        return Number(a) + Number(b);\n    });\n\n    /**\n     * Applies a function to the value at the given index of an array, returning a\n     * new copy of the array with the element at the given index replaced with the\n     * result of the function application.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category List\n     * @sig (a -> a) -> Number -> [a] -> [a]\n     * @param {Function} fn The function to apply.\n     * @param {Number} idx The index.\n     * @param {Array|Arguments} list An array-like object whose value\n     *        at the supplied index will be replaced.\n     * @return {Array} A copy of the supplied array-like object with\n     *         the element at index `idx` replaced with the value\n     *         returned by applying `fn` to the existing element.\n     * @see R.update\n     * @example\n     *\n     *      R.adjust(R.add(10), 1, [0, 1, 2]);     //=> [0, 11, 2]\n     *      R.adjust(R.add(10))(1)([0, 1, 2]);     //=> [0, 11, 2]\n     */\n    var adjust = _curry3(function adjust(fn, idx, list) {\n        if (idx >= list.length || idx < -list.length) {\n            return list;\n        }\n        var start = idx < 0 ? list.length : 0;\n        var _idx = start + idx;\n        var _list = _concat(list);\n        _list[_idx] = fn(list[_idx]);\n        return _list;\n    });\n\n    /**\n     * Returns `true` if all elements of the list match the predicate, `false` if\n     * there are any that don't.\n     *\n     * Dispatches to the `all` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Boolean\n     * @param {Function} fn The predicate function.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the predicate is satisfied by every element, `false`\n     *         otherwise.\n     * @see R.any, R.none, R.transduce\n     * @example\n     *\n     *      var lessThan2 = R.flip(R.lt)(2);\n     *      var lessThan3 = R.flip(R.lt)(3);\n     *      R.all(lessThan2)([1, 2]); //=> false\n     *      R.all(lessThan3)([1, 2]); //=> true\n     */\n    var all = _curry2(_dispatchable('all', _xall, function all(fn, list) {\n        var idx = 0;\n        while (idx < list.length) {\n            if (!fn(list[idx])) {\n                return false;\n            }\n            idx += 1;\n        }\n        return true;\n    }));\n\n    /**\n     * Returns a function that always returns the given value. Note that for\n     * non-primitives the value returned is a reference to the original value.\n     *\n     * This function is known as `const`, `constant`, or `K` (for K combinator) in\n     * other languages and libraries.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig a -> (* -> a)\n     * @param {*} val The value to wrap in a function\n     * @return {Function} A Function :: * -> val.\n     * @example\n     *\n     *      var t = R.always('Tee');\n     *      t(); //=> 'Tee'\n     */\n    var always = _curry1(function always(val) {\n        return function () {\n            return val;\n        };\n    });\n\n    /**\n     * Returns `true` if both arguments are `true`; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Logic\n     * @sig * -> * -> *\n     * @param {Boolean} a A boolean value\n     * @param {Boolean} b A boolean value\n     * @return {Boolean} `true` if both arguments are `true`, `false` otherwise\n     * @see R.both\n     * @example\n     *\n     *      R.and(true, true); //=> true\n     *      R.and(true, false); //=> false\n     *      R.and(false, true); //=> false\n     *      R.and(false, false); //=> false\n     */\n    var and = _curry2(function and(a, b) {\n        return a && b;\n    });\n\n    /**\n     * Returns `true` if at least one of elements of the list match the predicate,\n     * `false` otherwise.\n     *\n     * Dispatches to the `any` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Boolean\n     * @param {Function} fn The predicate function.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the predicate is satisfied by at least one element, `false`\n     *         otherwise.\n     * @see R.all, R.none, R.transduce\n     * @example\n     *\n     *      var lessThan0 = R.flip(R.lt)(0);\n     *      var lessThan2 = R.flip(R.lt)(2);\n     *      R.any(lessThan0)([1, 2]); //=> false\n     *      R.any(lessThan2)([1, 2]); //=> true\n     */\n    var any = _curry2(_dispatchable('any', _xany, function any(fn, list) {\n        var idx = 0;\n        while (idx < list.length) {\n            if (fn(list[idx])) {\n                return true;\n            }\n            idx += 1;\n        }\n        return false;\n    }));\n\n    /**\n     * Returns a new list, composed of n-tuples of consecutive elements If `n` is\n     * greater than the length of the list, an empty list is returned.\n     *\n     * Dispatches to the `aperture` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category List\n     * @sig Number -> [a] -> [[a]]\n     * @param {Number} n The size of the tuples to create\n     * @param {Array} list The list to split into `n`-tuples\n     * @return {Array} The new list.\n     * @see R.transduce\n     * @example\n     *\n     *      R.aperture(2, [1, 2, 3, 4, 5]); //=> [[1, 2], [2, 3], [3, 4], [4, 5]]\n     *      R.aperture(3, [1, 2, 3, 4, 5]); //=> [[1, 2, 3], [2, 3, 4], [3, 4, 5]]\n     *      R.aperture(7, [1, 2, 3, 4, 5]); //=> []\n     */\n    var aperture = _curry2(_dispatchable('aperture', _xaperture, _aperture));\n\n    /**\n     * Returns a new list containing the contents of the given list, followed by\n     * the given element.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> [a]\n     * @param {*} el The element to add to the end of the new list.\n     * @param {Array} list The list whose contents will be added to the beginning of the output\n     *        list.\n     * @return {Array} A new list containing the contents of the old list followed by `el`.\n     * @see R.prepend\n     * @example\n     *\n     *      R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']\n     *      R.append('tests', []); //=> ['tests']\n     *      R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]\n     */\n    var append = _curry2(function append(el, list) {\n        return _concat(list, [el]);\n    });\n\n    /**\n     * Applies function `fn` to the argument list `args`. This is useful for\n     * creating a fixed-arity function from a variadic function. `fn` should be a\n     * bound function if context is significant.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Function\n     * @sig (*... -> a) -> [*] -> a\n     * @param {Function} fn\n     * @param {Array} args\n     * @return {*}\n     * @see R.call, R.unapply\n     * @example\n     *\n     *      var nums = [1, 2, 3, -99, 42, 6, 7];\n     *      R.apply(Math.max, nums); //=> 42\n     */\n    var apply = _curry2(function apply(fn, args) {\n        return fn.apply(this, args);\n    });\n\n    /**\n     * Makes a shallow clone of an object, setting or overriding the specified\n     * property with the given value. Note that this copies and flattens prototype\n     * properties onto the new object as well. All non-primitive properties are\n     * copied by reference.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Object\n     * @sig String -> a -> {k: v} -> {k: v}\n     * @param {String} prop the property name to set\n     * @param {*} val the new value\n     * @param {Object} obj the object to clone\n     * @return {Object} a new object similar to the original except for the specified property.\n     * @see R.dissoc\n     * @example\n     *\n     *      R.assoc('c', 3, {a: 1, b: 2}); //=> {a: 1, b: 2, c: 3}\n     */\n    var assoc = _curry3(function assoc(prop, val, obj) {\n        var result = {};\n        for (var p in obj) {\n            result[p] = obj[p];\n        }\n        result[prop] = val;\n        return result;\n    });\n\n    /**\n     * Makes a shallow clone of an object, setting or overriding the nodes required\n     * to create the given path, and placing the specific value at the tail end of\n     * that path. Note that this copies and flattens prototype properties onto the\n     * new object as well. All non-primitive properties are copied by reference.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Object\n     * @sig [String] -> a -> {k: v} -> {k: v}\n     * @param {Array} path the path to set\n     * @param {*} val the new value\n     * @param {Object} obj the object to clone\n     * @return {Object} a new object similar to the original except along the specified path.\n     * @see R.dissocPath\n     * @example\n     *\n     *      R.assocPath(['a', 'b', 'c'], 42, {a: {b: {c: 0}}}); //=> {a: {b: {c: 42}}}\n     */\n    var assocPath = _curry3(function assocPath(path, val, obj) {\n        switch (path.length) {\n        case 0:\n            return val;\n        case 1:\n            return assoc(path[0], val, obj);\n        default:\n            return assoc(path[0], assocPath(_slice(path, 1), val, Object(obj[path[0]])), obj);\n        }\n    });\n\n    /**\n     * Creates a function that is bound to a context.\n     * Note: `R.bind` does not provide the additional argument-binding capabilities of\n     * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.6.0\n     * @category Function\n     * @category Object\n     * @sig (* -> *) -> {*} -> (* -> *)\n     * @param {Function} fn The function to bind to context\n     * @param {Object} thisObj The context to bind `fn` to\n     * @return {Function} A function that will execute in the context of `thisObj`.\n     * @see R.partial\n     * @example\n     *\n     *      var log = R.bind(console.log, console);\n     *      R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\n     *      // logs {a: 2}\n     */\n    var bind = _curry2(function bind(fn, thisObj) {\n        return _arity(fn.length, function () {\n            return fn.apply(thisObj, arguments);\n        });\n    });\n\n    /**\n     * Restricts a number to be within a range.\n     *\n     * Also works for other ordered types such as Strings and Dates.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.20.0\n     * @category Relation\n     * @sig Ord a => a -> a -> a -> a\n     * @param {Number} minimum number\n     * @param {Number} maximum number\n     * @param {Number} value to be clamped\n     * @return {Number} Returns the clamped value\n     * @example\n     *\n     *      R.clamp(1, 10, -1) // => 1\n     *      R.clamp(1, 10, 11) // => 10\n     *      R.clamp(1, 10, 4)  // => 4\n     */\n    var clamp = _curry3(function clamp(min, max, value) {\n        if (min > max) {\n            throw new Error('min must not be greater than max in clamp(min, max, value)');\n        }\n        return value < min ? min : value > max ? max : value;\n    });\n\n    /**\n     * Makes a comparator function out of a function that reports whether the first\n     * element is less than the second.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (a, b -> Boolean) -> (a, b -> Number)\n     * @param {Function} pred A predicate function of arity two.\n     * @return {Function} A Function :: a -> b -> Int that returns `-1` if a < b, `1` if b < a, otherwise `0`.\n     * @example\n     *\n     *      var cmp = R.comparator((a, b) => a.age < b.age);\n     *      var people = [\n     *        // ...\n     *      ];\n     *      R.sort(cmp, people);\n     */\n    var comparator = _curry1(function comparator(pred) {\n        return function (a, b) {\n            return pred(a, b) ? -1 : pred(b, a) ? 1 : 0;\n        };\n    });\n\n    /**\n     * Returns a curried equivalent of the provided function, with the specified\n     * arity. The curried function has two unusual capabilities. First, its\n     * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n     * following are equivalent:\n     *\n     *   - `g(1)(2)(3)`\n     *   - `g(1)(2, 3)`\n     *   - `g(1, 2)(3)`\n     *   - `g(1, 2, 3)`\n     *\n     * Secondly, the special placeholder value `R.__` may be used to specify\n     * \"gaps\", allowing partial application of any combination of arguments,\n     * regardless of their positions. If `g` is as above and `_` is `R.__`, the\n     * following are equivalent:\n     *\n     *   - `g(1, 2, 3)`\n     *   - `g(_, 2, 3)(1)`\n     *   - `g(_, _, 3)(1)(2)`\n     *   - `g(_, _, 3)(1, 2)`\n     *   - `g(_, 2)(1)(3)`\n     *   - `g(_, 2)(1, 3)`\n     *   - `g(_, 2)(_, 3)(1)`\n     *\n     * @func\n     * @memberOf R\n     * @since v0.5.0\n     * @category Function\n     * @sig Number -> (* -> a) -> (* -> a)\n     * @param {Number} length The arity for the returned function.\n     * @param {Function} fn The function to curry.\n     * @return {Function} A new, curried function.\n     * @see R.curry\n     * @example\n     *\n     *      var sumArgs = (...args) => R.sum(args);\n     *\n     *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n     *      var f = curriedAddFourNumbers(1, 2);\n     *      var g = f(3);\n     *      g(4); //=> 10\n     */\n    var curryN = _curry2(function curryN(length, fn) {\n        if (length === 1) {\n            return _curry1(fn);\n        }\n        return _arity(length, _curryN(length, [], fn));\n    });\n\n    /**\n     * Decrements its argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Math\n     * @sig Number -> Number\n     * @param {Number} n\n     * @return {Number}\n     * @see R.inc\n     * @example\n     *\n     *      R.dec(42); //=> 41\n     */\n    var dec = add(-1);\n\n    /**\n     * Returns the second argument if it is not `null`, `undefined` or `NaN`\n     * otherwise the first argument is returned.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Logic\n     * @sig a -> b -> a | b\n     * @param {a} val The default value.\n     * @param {b} val The value to return if it is not null or undefined\n     * @return {*} The the second value or the default value\n     * @example\n     *\n     *      var defaultTo42 = R.defaultTo(42);\n     *\n     *      defaultTo42(null);  //=> 42\n     *      defaultTo42(undefined);  //=> 42\n     *      defaultTo42('Ramda');  //=> 'Ramda'\n     *      defaultTo42(parseInt('string')); //=> 42\n     */\n    var defaultTo = _curry2(function defaultTo(d, v) {\n        return v == null || v !== v ? d : v;\n    });\n\n    /**\n     * Finds the set (i.e. no duplicates) of all elements in the first list not\n     * contained in the second list. Duplication is determined according to the\n     * value returned by applying the supplied predicate to two list elements.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]\n     * @param {Function} pred A predicate used to test whether two items are equal.\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The elements in `list1` that are not in `list2`.\n     * @see R.difference, R.symmetricDifference, R.symmetricDifferenceWith\n     * @example\n     *\n     *      var cmp = (x, y) => x.a === y.a;\n     *      var l1 = [{a: 1}, {a: 2}, {a: 3}];\n     *      var l2 = [{a: 3}, {a: 4}];\n     *      R.differenceWith(cmp, l1, l2); //=> [{a: 1}, {a: 2}]\n     */\n    var differenceWith = _curry3(function differenceWith(pred, first, second) {\n        var out = [];\n        var idx = 0;\n        var firstLen = first.length;\n        while (idx < firstLen) {\n            if (!_containsWith(pred, first[idx], second) && !_containsWith(pred, first[idx], out)) {\n                out.push(first[idx]);\n            }\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns a new object that does not contain a `prop` property.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Object\n     * @sig String -> {k: v} -> {k: v}\n     * @param {String} prop the name of the property to dissociate\n     * @param {Object} obj the object to clone\n     * @return {Object} a new object similar to the original but without the specified property\n     * @see R.assoc\n     * @example\n     *\n     *      R.dissoc('b', {a: 1, b: 2, c: 3}); //=> {a: 1, c: 3}\n     */\n    var dissoc = _curry2(function dissoc(prop, obj) {\n        var result = {};\n        for (var p in obj) {\n            if (p !== prop) {\n                result[p] = obj[p];\n            }\n        }\n        return result;\n    });\n\n    /**\n     * Makes a shallow clone of an object, omitting the property at the given path.\n     * Note that this copies and flattens prototype properties onto the new object\n     * as well. All non-primitive properties are copied by reference.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.11.0\n     * @category Object\n     * @sig [String] -> {k: v} -> {k: v}\n     * @param {Array} path the path to set\n     * @param {Object} obj the object to clone\n     * @return {Object} a new object without the property at path\n     * @see R.assocPath\n     * @example\n     *\n     *      R.dissocPath(['a', 'b', 'c'], {a: {b: {c: 42}}}); //=> {a: {b: {}}}\n     */\n    var dissocPath = _curry2(function dissocPath(path, obj) {\n        switch (path.length) {\n        case 0:\n            return obj;\n        case 1:\n            return dissoc(path[0], obj);\n        default:\n            var head = path[0];\n            var tail = _slice(path, 1);\n            return obj[head] == null ? obj : assoc(head, dissocPath(tail, obj[head]), obj);\n        }\n    });\n\n    /**\n     * Divides two numbers. Equivalent to `a / b`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} a The first value.\n     * @param {Number} b The second value.\n     * @return {Number} The result of `a / b`.\n     * @see R.multiply\n     * @example\n     *\n     *      R.divide(71, 100); //=> 0.71\n     *\n     *      var half = R.divide(R.__, 2);\n     *      half(42); //=> 21\n     *\n     *      var reciprocal = R.divide(1);\n     *      reciprocal(4);   //=> 0.25\n     */\n    var divide = _curry2(function divide(a, b) {\n        return a / b;\n    });\n\n    /**\n     * Returns a new list excluding the leading elements of a given list which\n     * satisfy the supplied predicate function. It passes each value to the supplied\n     * predicate function, skipping elements while the predicate function returns\n     * `true`. The predicate function is applied to one argument: *(value)*.\n     *\n     * Dispatches to the `dropWhile` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [a]\n     * @param {Function} fn The function called per iteration.\n     * @param {Array} list The collection to iterate over.\n     * @return {Array} A new array.\n     * @see R.takeWhile, R.transduce, R.addIndex\n     * @example\n     *\n     *      var lteTwo = x => x <= 2;\n     *\n     *      R.dropWhile(lteTwo, [1, 2, 3, 4, 3, 2, 1]); //=> [3, 4, 3, 2, 1]\n     */\n    var dropWhile = _curry2(_dispatchable('dropWhile', _xdropWhile, function dropWhile(pred, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len && pred(list[idx])) {\n            idx += 1;\n        }\n        return _slice(list, idx);\n    }));\n\n    /**\n     * Returns the empty value of its argument's type. Ramda defines the empty\n     * value of Array (`[]`), Object (`{}`), String (`''`), and Arguments. Other\n     * types are supported if they define `<Type>.empty` and/or\n     * `<Type>.prototype.empty`.\n     *\n     * Dispatches to the `empty` method of the first argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Function\n     * @sig a -> a\n     * @param {*} x\n     * @return {*}\n     * @example\n     *\n     *      R.empty(Just(42));      //=> Nothing()\n     *      R.empty([1, 2, 3]);     //=> []\n     *      R.empty('unicorns');    //=> ''\n     *      R.empty({x: 1, y: 2});  //=> {}\n     */\n    // else\n    var empty = _curry1(function empty(x) {\n        return x != null && typeof x.empty === 'function' ? x.empty() : x != null && x.constructor != null && typeof x.constructor.empty === 'function' ? x.constructor.empty() : _isArray(x) ? [] : _isString(x) ? '' : _isObject(x) ? {} : _isArguments(x) ? function () {\n            return arguments;\n        }() : // else\n        void 0;\n    });\n\n    /**\n     * Creates a new object by recursively evolving a shallow copy of `object`,\n     * according to the `transformation` functions. All non-primitive properties\n     * are copied by reference.\n     *\n     * A `transformation` function will not be invoked if its corresponding key\n     * does not exist in the evolved object.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Object\n     * @sig {k: (v -> v)} -> {k: v} -> {k: v}\n     * @param {Object} transformations The object specifying transformation functions to apply\n     *        to the object.\n     * @param {Object} object The object to be transformed.\n     * @return {Object} The transformed object.\n     * @example\n     *\n     *      var tomato  = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};\n     *      var transformations = {\n     *        firstName: R.trim,\n     *        lastName: R.trim, // Will not get invoked.\n     *        data: {elapsed: R.add(1), remaining: R.add(-1)}\n     *      };\n     *      R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}\n     */\n    var evolve = _curry2(function evolve(transformations, object) {\n        var result = {};\n        var transformation, key, type;\n        for (key in object) {\n            transformation = transformations[key];\n            type = typeof transformation;\n            result[key] = type === 'function' ? transformation(object[key]) : type === 'object' ? evolve(transformations[key], object[key]) : object[key];\n        }\n        return result;\n    });\n\n    /**\n     * Returns the first element of the list which matches the predicate, or\n     * `undefined` if no element matches.\n     *\n     * Dispatches to the `find` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> a | undefined\n     * @param {Function} fn The predicate function used to determine if the element is the\n     *        desired one.\n     * @param {Array} list The array to consider.\n     * @return {Object} The element found, or `undefined`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1}, {a: 2}, {a: 3}];\n     *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}\n     *      R.find(R.propEq('a', 4))(xs); //=> undefined\n     */\n    var find = _curry2(_dispatchable('find', _xfind, function find(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            if (fn(list[idx])) {\n                return list[idx];\n            }\n            idx += 1;\n        }\n    }));\n\n    /**\n     * Returns the index of the first element of the list which matches the\n     * predicate, or `-1` if no element matches.\n     *\n     * Dispatches to the `findIndex` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Number\n     * @param {Function} fn The predicate function used to determine if the element is the\n     * desired one.\n     * @param {Array} list The array to consider.\n     * @return {Number} The index of the element found, or `-1`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1}, {a: 2}, {a: 3}];\n     *      R.findIndex(R.propEq('a', 2))(xs); //=> 1\n     *      R.findIndex(R.propEq('a', 4))(xs); //=> -1\n     */\n    var findIndex = _curry2(_dispatchable('findIndex', _xfindIndex, function findIndex(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            if (fn(list[idx])) {\n                return idx;\n            }\n            idx += 1;\n        }\n        return -1;\n    }));\n\n    /**\n     * Returns the last element of the list which matches the predicate, or\n     * `undefined` if no element matches.\n     *\n     * Dispatches to the `findLast` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> a | undefined\n     * @param {Function} fn The predicate function used to determine if the element is the\n     * desired one.\n     * @param {Array} list The array to consider.\n     * @return {Object} The element found, or `undefined`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];\n     *      R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}\n     *      R.findLast(R.propEq('a', 4))(xs); //=> undefined\n     */\n    var findLast = _curry2(_dispatchable('findLast', _xfindLast, function findLast(fn, list) {\n        var idx = list.length - 1;\n        while (idx >= 0) {\n            if (fn(list[idx])) {\n                return list[idx];\n            }\n            idx -= 1;\n        }\n    }));\n\n    /**\n     * Returns the index of the last element of the list which matches the\n     * predicate, or `-1` if no element matches.\n     *\n     * Dispatches to the `findLastIndex` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Number\n     * @param {Function} fn The predicate function used to determine if the element is the\n     * desired one.\n     * @param {Array} list The array to consider.\n     * @return {Number} The index of the element found, or `-1`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];\n     *      R.findLastIndex(R.propEq('a', 1))(xs); //=> 1\n     *      R.findLastIndex(R.propEq('a', 4))(xs); //=> -1\n     */\n    var findLastIndex = _curry2(_dispatchable('findLastIndex', _xfindLastIndex, function findLastIndex(fn, list) {\n        var idx = list.length - 1;\n        while (idx >= 0) {\n            if (fn(list[idx])) {\n                return idx;\n            }\n            idx -= 1;\n        }\n        return -1;\n    }));\n\n    /**\n     * Iterate over an input `list`, calling a provided function `fn` for each\n     * element in the list.\n     *\n     * `fn` receives one argument: *(value)*.\n     *\n     * Note: `R.forEach` does not skip deleted or unassigned indices (sparse\n     * arrays), unlike the native `Array.prototype.forEach` method. For more\n     * details on this behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description\n     *\n     * Also note that, unlike `Array.prototype.forEach`, Ramda's `forEach` returns\n     * the original array. In some libraries this function is named `each`.\n     *\n     * Dispatches to the `forEach` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> *) -> [a] -> [a]\n     * @param {Function} fn The function to invoke. Receives one argument, `value`.\n     * @param {Array} list The list to iterate over.\n     * @return {Array} The original list.\n     * @see R.addIndex\n     * @example\n     *\n     *      var printXPlusFive = x => console.log(x + 5);\n     *      R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]\n     *      // logs 6\n     *      // logs 7\n     *      // logs 8\n     */\n    var forEach = _curry2(_checkForMethod('forEach', function forEach(fn, list) {\n        var len = list.length;\n        var idx = 0;\n        while (idx < len) {\n            fn(list[idx]);\n            idx += 1;\n        }\n        return list;\n    }));\n\n    /**\n     * Creates a new object from a list key-value pairs. If a key appears in\n     * multiple pairs, the rightmost pair is included in the object.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig [[k,v]] -> {k: v}\n     * @param {Array} pairs An array of two-element arrays that will be the keys and values of the output object.\n     * @return {Object} The object made by pairing up `keys` and `values`.\n     * @see R.toPairs, R.pair\n     * @example\n     *\n     *      R.fromPairs([['a', 1], ['b', 2], ['c', 3]]); //=> {a: 1, b: 2, c: 3}\n     */\n    var fromPairs = _curry1(function fromPairs(pairs) {\n        var result = {};\n        var idx = 0;\n        while (idx < pairs.length) {\n            result[pairs[idx][0]] = pairs[idx][1];\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Takes a list and returns a list of lists where each sublist's elements are\n     * all \"equal\" according to the provided equality function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.21.0\n     * @category List\n     * @sig ((a, a)  Boolean)  [a]  [[a]]\n     * @param {Function} fn Function for determining whether two given (adjacent)\n     *        elements should be in the same group\n     * @param {Array} list The array to group. Also accepts a string, which will be\n     *        treated as a list of characters.\n     * @return {List} A list that contains sublists of equal elements,\n     *         whose concatenations are equal to the original list.\n     * @example\n     *\n     * R.groupWith(R.equals, [0, 1, 1, 2, 3, 5, 8, 13, 21])\n     * //=> [[0], [1, 1], [2], [3], [5], [8], [13], [21]]\n     *\n     * R.groupWith((a, b) => a % 2 === b % 2, [0, 1, 1, 2, 3, 5, 8, 13, 21])\n     * //=> [[0], [1, 1], [2], [3, 5], [8], [13, 21]]\n     *\n     * R.groupWith(R.eqBy(isVowel), 'aestiou')\n     * //=> ['ae', 'st', 'iou']\n     */\n    var groupWith = _curry2(function (fn, list) {\n        var res = [];\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            var nextidx = idx + 1;\n            while (nextidx < len && fn(list[idx], list[nextidx])) {\n                nextidx += 1;\n            }\n            res.push(list.slice(idx, nextidx));\n            idx = nextidx;\n        }\n        return res;\n    });\n\n    /**\n     * Returns `true` if the first argument is greater than the second; `false`\n     * otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @see R.lt\n     * @example\n     *\n     *      R.gt(2, 1); //=> true\n     *      R.gt(2, 2); //=> false\n     *      R.gt(2, 3); //=> false\n     *      R.gt('a', 'z'); //=> false\n     *      R.gt('z', 'a'); //=> true\n     */\n    var gt = _curry2(function gt(a, b) {\n        return a > b;\n    });\n\n    /**\n     * Returns `true` if the first argument is greater than or equal to the second;\n     * `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> Boolean\n     * @param {Number} a\n     * @param {Number} b\n     * @return {Boolean}\n     * @see R.lte\n     * @example\n     *\n     *      R.gte(2, 1); //=> true\n     *      R.gte(2, 2); //=> true\n     *      R.gte(2, 3); //=> false\n     *      R.gte('a', 'z'); //=> false\n     *      R.gte('z', 'a'); //=> true\n     */\n    var gte = _curry2(function gte(a, b) {\n        return a >= b;\n    });\n\n    /**\n     * Returns whether or not an object has an own property with the specified name\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Object\n     * @sig s -> {s: x} -> Boolean\n     * @param {String} prop The name of the property to check for.\n     * @param {Object} obj The object to query.\n     * @return {Boolean} Whether the property exists.\n     * @example\n     *\n     *      var hasName = R.has('name');\n     *      hasName({name: 'alice'});   //=> true\n     *      hasName({name: 'bob'});     //=> true\n     *      hasName({});                //=> false\n     *\n     *      var point = {x: 0, y: 0};\n     *      var pointHas = R.has(R.__, point);\n     *      pointHas('x');  //=> true\n     *      pointHas('y');  //=> true\n     *      pointHas('z');  //=> false\n     */\n    var has = _curry2(_has);\n\n    /**\n     * Returns whether or not an object or its prototype chain has a property with\n     * the specified name\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Object\n     * @sig s -> {s: x} -> Boolean\n     * @param {String} prop The name of the property to check for.\n     * @param {Object} obj The object to query.\n     * @return {Boolean} Whether the property exists.\n     * @example\n     *\n     *      function Rectangle(width, height) {\n     *        this.width = width;\n     *        this.height = height;\n     *      }\n     *      Rectangle.prototype.area = function() {\n     *        return this.width * this.height;\n     *      };\n     *\n     *      var square = new Rectangle(2, 2);\n     *      R.hasIn('width', square);  //=> true\n     *      R.hasIn('area', square);  //=> true\n     */\n    var hasIn = _curry2(function hasIn(prop, obj) {\n        return prop in obj;\n    });\n\n    /**\n     * Returns true if its arguments are identical, false otherwise. Values are\n     * identical if they reference the same memory. `NaN` is identical to `NaN`;\n     * `0` and `-0` are not identical.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Relation\n     * @sig a -> a -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @example\n     *\n     *      var o = {};\n     *      R.identical(o, o); //=> true\n     *      R.identical(1, 1); //=> true\n     *      R.identical(1, '1'); //=> false\n     *      R.identical([], []); //=> false\n     *      R.identical(0, -0); //=> false\n     *      R.identical(NaN, NaN); //=> true\n     */\n    // SameValue algorithm\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Step 6.a: NaN == NaN\n    var identical = _curry2(function identical(a, b) {\n        // SameValue algorithm\n        if (a === b) {\n            // Steps 1-5, 7-10\n            // Steps 6.b-6.e: +0 != -0\n            return a !== 0 || 1 / a === 1 / b;\n        } else {\n            // Step 6.a: NaN == NaN\n            return a !== a && b !== b;\n        }\n    });\n\n    /**\n     * A function that does nothing but return the parameter supplied to it. Good\n     * as a default or placeholder function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig a -> a\n     * @param {*} x The value to return.\n     * @return {*} The input value, `x`.\n     * @example\n     *\n     *      R.identity(1); //=> 1\n     *\n     *      var obj = {};\n     *      R.identity(obj) === obj; //=> true\n     */\n    var identity = _curry1(_identity);\n\n    /**\n     * Creates a function that will process either the `onTrue` or the `onFalse`\n     * function depending upon the result of the `condition` predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Logic\n     * @sig (*... -> Boolean) -> (*... -> *) -> (*... -> *) -> (*... -> *)\n     * @param {Function} condition A predicate function\n     * @param {Function} onTrue A function to invoke when the `condition` evaluates to a truthy value.\n     * @param {Function} onFalse A function to invoke when the `condition` evaluates to a falsy value.\n     * @return {Function} A new unary function that will process either the `onTrue` or the `onFalse`\n     *                    function depending upon the result of the `condition` predicate.\n     * @see R.unless, R.when\n     * @example\n     *\n     *      var incCount = R.ifElse(\n     *        R.has('count'),\n     *        R.over(R.lensProp('count'), R.inc),\n     *        R.assoc('count', 1)\n     *      );\n     *      incCount({});           //=> { count: 1 }\n     *      incCount({ count: 1 }); //=> { count: 2 }\n     */\n    var ifElse = _curry3(function ifElse(condition, onTrue, onFalse) {\n        return curryN(Math.max(condition.length, onTrue.length, onFalse.length), function _ifElse() {\n            return condition.apply(this, arguments) ? onTrue.apply(this, arguments) : onFalse.apply(this, arguments);\n        });\n    });\n\n    /**\n     * Increments its argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Math\n     * @sig Number -> Number\n     * @param {Number} n\n     * @return {Number}\n     * @see R.dec\n     * @example\n     *\n     *      R.inc(42); //=> 43\n     */\n    var inc = add(1);\n\n    /**\n     * Inserts the supplied element into the list, at index `index`. _Note that\n     * this is not destructive_: it returns a copy of the list with the changes.\n     * <small>No lists have been harmed in the application of this function.</small>\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.2\n     * @category List\n     * @sig Number -> a -> [a] -> [a]\n     * @param {Number} index The position to insert the element\n     * @param {*} elt The element to insert into the Array\n     * @param {Array} list The list to insert into\n     * @return {Array} A new Array with `elt` inserted at `index`.\n     * @example\n     *\n     *      R.insert(2, 'x', [1,2,3,4]); //=> [1,2,'x',3,4]\n     */\n    var insert = _curry3(function insert(idx, elt, list) {\n        idx = idx < list.length && idx >= 0 ? idx : list.length;\n        var result = _slice(list);\n        result.splice(idx, 0, elt);\n        return result;\n    });\n\n    /**\n     * Inserts the sub-list into the list, at index `index`. _Note that this is not\n     * destructive_: it returns a copy of the list with the changes.\n     * <small>No lists have been harmed in the application of this function.</small>\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category List\n     * @sig Number -> [a] -> [a] -> [a]\n     * @param {Number} index The position to insert the sub-list\n     * @param {Array} elts The sub-list to insert into the Array\n     * @param {Array} list The list to insert the sub-list into\n     * @return {Array} A new Array with `elts` inserted starting at `index`.\n     * @example\n     *\n     *      R.insertAll(2, ['x','y','z'], [1,2,3,4]); //=> [1,2,'x','y','z',3,4]\n     */\n    var insertAll = _curry3(function insertAll(idx, elts, list) {\n        idx = idx < list.length && idx >= 0 ? idx : list.length;\n        return _concat(_concat(_slice(list, 0, idx), elts), _slice(list, idx));\n    });\n\n    /**\n     * Creates a new list with the separator interposed between elements.\n     *\n     * Dispatches to the `intersperse` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category List\n     * @sig a -> [a] -> [a]\n     * @param {*} separator The element to add to the list.\n     * @param {Array} list The list to be interposed.\n     * @return {Array} The new list.\n     * @example\n     *\n     *      R.intersperse('n', ['ba', 'a', 'a']); //=> ['ba', 'n', 'a', 'n', 'a']\n     */\n    var intersperse = _curry2(_checkForMethod('intersperse', function intersperse(separator, list) {\n        var out = [];\n        var idx = 0;\n        var length = list.length;\n        while (idx < length) {\n            if (idx === length - 1) {\n                out.push(list[idx]);\n            } else {\n                out.push(list[idx], separator);\n            }\n            idx += 1;\n        }\n        return out;\n    }));\n\n    /**\n     * See if an object (`val`) is an instance of the supplied constructor. This\n     * function will check up the inheritance chain, if any.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Type\n     * @sig (* -> {*}) -> a -> Boolean\n     * @param {Object} ctor A constructor\n     * @param {*} val The value to test\n     * @return {Boolean}\n     * @example\n     *\n     *      R.is(Object, {}); //=> true\n     *      R.is(Number, 1); //=> true\n     *      R.is(Object, 1); //=> false\n     *      R.is(String, 's'); //=> true\n     *      R.is(String, new String('')); //=> true\n     *      R.is(Object, new String('')); //=> true\n     *      R.is(Object, 's'); //=> false\n     *      R.is(Number, {}); //=> false\n     */\n    var is = _curry2(function is(Ctor, val) {\n        return val != null && val.constructor === Ctor || val instanceof Ctor;\n    });\n\n    /**\n     * Tests whether or not an object is similar to an array.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.5.0\n     * @category Type\n     * @category List\n     * @sig * -> Boolean\n     * @param {*} x The object to test.\n     * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n     * @example\n     *\n     *      R.isArrayLike([]); //=> true\n     *      R.isArrayLike(true); //=> false\n     *      R.isArrayLike({}); //=> false\n     *      R.isArrayLike({length: 10}); //=> false\n     *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n     */\n    var isArrayLike = _curry1(function isArrayLike(x) {\n        if (_isArray(x)) {\n            return true;\n        }\n        if (!x) {\n            return false;\n        }\n        if (typeof x !== 'object') {\n            return false;\n        }\n        if (_isString(x)) {\n            return false;\n        }\n        if (x.nodeType === 1) {\n            return !!x.length;\n        }\n        if (x.length === 0) {\n            return true;\n        }\n        if (x.length > 0) {\n            return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n        }\n        return false;\n    });\n\n    /**\n     * Checks if the input value is `null` or `undefined`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Type\n     * @sig * -> Boolean\n     * @param {*} x The value to test.\n     * @return {Boolean} `true` if `x` is `undefined` or `null`, otherwise `false`.\n     * @example\n     *\n     *      R.isNil(null); //=> true\n     *      R.isNil(undefined); //=> true\n     *      R.isNil(0); //=> false\n     *      R.isNil([]); //=> false\n     */\n    var isNil = _curry1(function isNil(x) {\n        return x == null;\n    });\n\n    /**\n     * Returns a list containing the names of all the enumerable own properties of\n     * the supplied object.\n     * Note that the order of the output array is not guaranteed to be consistent\n     * across different JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {k: v} -> [k]\n     * @param {Object} obj The object to extract properties from\n     * @return {Array} An array of the object's own properties.\n     * @example\n     *\n     *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n     */\n    // cover IE < 9 keys issues\n    // Safari bug\n    var keys = function () {\n        // cover IE < 9 keys issues\n        var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');\n        var nonEnumerableProps = [\n            'constructor',\n            'valueOf',\n            'isPrototypeOf',\n            'toString',\n            'propertyIsEnumerable',\n            'hasOwnProperty',\n            'toLocaleString'\n        ];\n        // Safari bug\n        var hasArgsEnumBug = function () {\n            'use strict';\n            return arguments.propertyIsEnumerable('length');\n        }();\n        var contains = function contains(list, item) {\n            var idx = 0;\n            while (idx < list.length) {\n                if (list[idx] === item) {\n                    return true;\n                }\n                idx += 1;\n            }\n            return false;\n        };\n        return typeof Object.keys === 'function' && !hasArgsEnumBug ? _curry1(function keys(obj) {\n            return Object(obj) !== obj ? [] : Object.keys(obj);\n        }) : _curry1(function keys(obj) {\n            if (Object(obj) !== obj) {\n                return [];\n            }\n            var prop, nIdx;\n            var ks = [];\n            var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\n            for (prop in obj) {\n                if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\n                    ks[ks.length] = prop;\n                }\n            }\n            if (hasEnumBug) {\n                nIdx = nonEnumerableProps.length - 1;\n                while (nIdx >= 0) {\n                    prop = nonEnumerableProps[nIdx];\n                    if (_has(prop, obj) && !contains(ks, prop)) {\n                        ks[ks.length] = prop;\n                    }\n                    nIdx -= 1;\n                }\n            }\n            return ks;\n        });\n    }();\n\n    /**\n     * Returns a list containing the names of all the properties of the supplied\n     * object, including prototype properties.\n     * Note that the order of the output array is not guaranteed to be consistent\n     * across different JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category Object\n     * @sig {k: v} -> [k]\n     * @param {Object} obj The object to extract properties from\n     * @return {Array} An array of the object's own and prototype properties.\n     * @example\n     *\n     *      var F = function() { this.x = 'X'; };\n     *      F.prototype.y = 'Y';\n     *      var f = new F();\n     *      R.keysIn(f); //=> ['x', 'y']\n     */\n    var keysIn = _curry1(function keysIn(obj) {\n        var prop;\n        var ks = [];\n        for (prop in obj) {\n            ks[ks.length] = prop;\n        }\n        return ks;\n    });\n\n    /**\n     * Returns the number of elements in the array by returning `list.length`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig [a] -> Number\n     * @param {Array} list The array to inspect.\n     * @return {Number} The length of the array.\n     * @example\n     *\n     *      R.length([]); //=> 0\n     *      R.length([1, 2, 3]); //=> 3\n     */\n    var length = _curry1(function length(list) {\n        return list != null && _isNumber(list.length) ? list.length : NaN;\n    });\n\n    /**\n     * Returns `true` if the first argument is less than the second; `false`\n     * otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @see R.gt\n     * @example\n     *\n     *      R.lt(2, 1); //=> false\n     *      R.lt(2, 2); //=> false\n     *      R.lt(2, 3); //=> true\n     *      R.lt('a', 'z'); //=> true\n     *      R.lt('z', 'a'); //=> false\n     */\n    var lt = _curry2(function lt(a, b) {\n        return a < b;\n    });\n\n    /**\n     * Returns `true` if the first argument is less than or equal to the second;\n     * `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> Boolean\n     * @param {Number} a\n     * @param {Number} b\n     * @return {Boolean}\n     * @see R.gte\n     * @example\n     *\n     *      R.lte(2, 1); //=> false\n     *      R.lte(2, 2); //=> true\n     *      R.lte(2, 3); //=> true\n     *      R.lte('a', 'z'); //=> true\n     *      R.lte('z', 'a'); //=> false\n     */\n    var lte = _curry2(function lte(a, b) {\n        return a <= b;\n    });\n\n    /**\n     * The mapAccum function behaves like a combination of map and reduce; it\n     * applies a function to each element of a list, passing an accumulating\n     * parameter from left to right, and returning a final value of this\n     * accumulator together with the new list.\n     *\n     * The iterator function receives two arguments, *acc* and *value*, and should\n     * return a tuple *[acc, value]*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category List\n     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])\n     * @param {Function} fn The function to be called on every element of the input `list`.\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.addIndex\n     * @example\n     *\n     *      var digits = ['1', '2', '3', '4'];\n     *      var appender = (a, b) => [a + b, a + b];\n     *\n     *      R.mapAccum(appender, 0, digits); //=> ['01234', ['01', '012', '0123', '01234']]\n     */\n    var mapAccum = _curry3(function mapAccum(fn, acc, list) {\n        var idx = 0;\n        var len = list.length;\n        var result = [];\n        var tuple = [acc];\n        while (idx < len) {\n            tuple = fn(tuple[0], list[idx]);\n            result[idx] = tuple[1];\n            idx += 1;\n        }\n        return [\n            tuple[0],\n            result\n        ];\n    });\n\n    /**\n     * The mapAccumRight function behaves like a combination of map and reduce; it\n     * applies a function to each element of a list, passing an accumulating\n     * parameter from right to left, and returning a final value of this\n     * accumulator together with the new list.\n     *\n     * Similar to `mapAccum`, except moves through the input list from the right to\n     * the left.\n     *\n     * The iterator function receives two arguments, *acc* and *value*, and should\n     * return a tuple *[acc, value]*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category List\n     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])\n     * @param {Function} fn The function to be called on every element of the input `list`.\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.addIndex\n     * @example\n     *\n     *      var digits = ['1', '2', '3', '4'];\n     *      var append = (a, b) => [a + b, a + b];\n     *\n     *      R.mapAccumRight(append, 0, digits); //=> ['04321', ['04321', '0432', '043', '04']]\n     */\n    var mapAccumRight = _curry3(function mapAccumRight(fn, acc, list) {\n        var idx = list.length - 1;\n        var result = [];\n        var tuple = [acc];\n        while (idx >= 0) {\n            tuple = fn(tuple[0], list[idx]);\n            result[idx] = tuple[1];\n            idx -= 1;\n        }\n        return [\n            tuple[0],\n            result\n        ];\n    });\n\n    /**\n     * Tests a regular expression against a String. Note that this function will\n     * return an empty array when there are no matches. This differs from\n     * [`String.prototype.match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)\n     * which returns `null` when there are no matches.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category String\n     * @sig RegExp -> String -> [String | Undefined]\n     * @param {RegExp} rx A regular expression.\n     * @param {String} str The string to match against\n     * @return {Array} The list of matches or empty array.\n     * @see R.test\n     * @example\n     *\n     *      R.match(/([a-z]a)/g, 'bananas'); //=> ['ba', 'na', 'na']\n     *      R.match(/a/, 'b'); //=> []\n     *      R.match(/a/, null); //=> TypeError: null does not have a method named \"match\"\n     */\n    var match = _curry2(function match(rx, str) {\n        return str.match(rx) || [];\n    });\n\n    /**\n     * mathMod behaves like the modulo operator should mathematically, unlike the\n     * `%` operator (and by extension, R.modulo). So while \"-17 % 5\" is -2,\n     * mathMod(-17, 5) is 3. mathMod requires Integer arguments, and returns NaN\n     * when the modulus is zero or negative.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} m The dividend.\n     * @param {Number} p the modulus.\n     * @return {Number} The result of `b mod a`.\n     * @example\n     *\n     *      R.mathMod(-17, 5);  //=> 3\n     *      R.mathMod(17, 5);   //=> 2\n     *      R.mathMod(17, -5);  //=> NaN\n     *      R.mathMod(17, 0);   //=> NaN\n     *      R.mathMod(17.2, 5); //=> NaN\n     *      R.mathMod(17, 5.3); //=> NaN\n     *\n     *      var clock = R.mathMod(R.__, 12);\n     *      clock(15); //=> 3\n     *      clock(24); //=> 0\n     *\n     *      var seventeenMod = R.mathMod(17);\n     *      seventeenMod(3);  //=> 2\n     *      seventeenMod(4);  //=> 1\n     *      seventeenMod(10); //=> 7\n     */\n    var mathMod = _curry2(function mathMod(m, p) {\n        if (!_isInteger(m)) {\n            return NaN;\n        }\n        if (!_isInteger(p) || p < 1) {\n            return NaN;\n        }\n        return (m % p + p) % p;\n    });\n\n    /**\n     * Returns the larger of its two arguments.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> a\n     * @param {*} a\n     * @param {*} b\n     * @return {*}\n     * @see R.maxBy, R.min\n     * @example\n     *\n     *      R.max(789, 123); //=> 789\n     *      R.max('a', 'b'); //=> 'b'\n     */\n    var max = _curry2(function max(a, b) {\n        return b > a ? b : a;\n    });\n\n    /**\n     * Takes a function and two values, and returns whichever value produces the\n     * larger result when passed to the provided function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Relation\n     * @sig Ord b => (a -> b) -> a -> a -> a\n     * @param {Function} f\n     * @param {*} a\n     * @param {*} b\n     * @return {*}\n     * @see R.max, R.minBy\n     * @example\n     *\n     *      //  square :: Number -> Number\n     *      var square = n => n * n;\n     *\n     *      R.maxBy(square, -3, 2); //=> -3\n     *\n     *      R.reduce(R.maxBy(square), 0, [3, -5, 4, 1, -2]); //=> -5\n     *      R.reduce(R.maxBy(square), 0, []); //=> 0\n     */\n    var maxBy = _curry3(function maxBy(f, a, b) {\n        return f(b) > f(a) ? b : a;\n    });\n\n    /**\n     * Create a new object with the own properties of the first object merged with\n     * the own properties of the second object. If a key exists in both objects,\n     * the value from the second object will be used.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {k: v} -> {k: v} -> {k: v}\n     * @param {Object} l\n     * @param {Object} r\n     * @return {Object}\n     * @see R.mergeWith, R.mergeWithKey\n     * @example\n     *\n     *      R.merge({ 'name': 'fred', 'age': 10 }, { 'age': 40 });\n     *      //=> { 'name': 'fred', 'age': 40 }\n     *\n     *      var resetToDefault = R.merge(R.__, {x: 0});\n     *      resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}\n     */\n    var merge = _curry2(function merge(l, r) {\n        return _assign({}, l, r);\n    });\n\n    /**\n     * Merges a list of objects together into one object.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category List\n     * @sig [{k: v}] -> {k: v}\n     * @param {Array} list An array of objects\n     * @return {Object} A merged object.\n     * @see R.reduce\n     * @example\n     *\n     *      R.mergeAll([{foo:1},{bar:2},{baz:3}]); //=> {foo:1,bar:2,baz:3}\n     *      R.mergeAll([{foo:1},{foo:2},{bar:2}]); //=> {foo:2,bar:2}\n     */\n    var mergeAll = _curry1(function mergeAll(list) {\n        return _assign.apply(null, [{}].concat(list));\n    });\n\n    /**\n     * Creates a new object with the own properties of the two provided objects. If\n     * a key exists in both objects, the provided function is applied to the key\n     * and the values associated with the key in each object, with the result being\n     * used as the value associated with the key in the returned object. The key\n     * will be excluded from the returned object if the resulting value is\n     * `undefined`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Object\n     * @sig (String -> a -> a -> a) -> {a} -> {a} -> {a}\n     * @param {Function} fn\n     * @param {Object} l\n     * @param {Object} r\n     * @return {Object}\n     * @see R.merge, R.mergeWith\n     * @example\n     *\n     *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n     *      R.mergeWithKey(concatValues,\n     *                     { a: true, thing: 'foo', values: [10, 20] },\n     *                     { b: true, thing: 'bar', values: [15, 35] });\n     *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }\n     */\n    var mergeWithKey = _curry3(function mergeWithKey(fn, l, r) {\n        var result = {};\n        var k;\n        for (k in l) {\n            if (_has(k, l)) {\n                result[k] = _has(k, r) ? fn(k, l[k], r[k]) : l[k];\n            }\n        }\n        for (k in r) {\n            if (_has(k, r) && !_has(k, result)) {\n                result[k] = r[k];\n            }\n        }\n        return result;\n    });\n\n    /**\n     * Returns the smaller of its two arguments.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord a => a -> a -> a\n     * @param {*} a\n     * @param {*} b\n     * @return {*}\n     * @see R.minBy, R.max\n     * @example\n     *\n     *      R.min(789, 123); //=> 123\n     *      R.min('a', 'b'); //=> 'a'\n     */\n    var min = _curry2(function min(a, b) {\n        return b < a ? b : a;\n    });\n\n    /**\n     * Takes a function and two values, and returns whichever value produces the\n     * smaller result when passed to the provided function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Relation\n     * @sig Ord b => (a -> b) -> a -> a -> a\n     * @param {Function} f\n     * @param {*} a\n     * @param {*} b\n     * @return {*}\n     * @see R.min, R.maxBy\n     * @example\n     *\n     *      //  square :: Number -> Number\n     *      var square = n => n * n;\n     *\n     *      R.minBy(square, -3, 2); //=> 2\n     *\n     *      R.reduce(R.minBy(square), Infinity, [3, -5, 4, 1, -2]); //=> 1\n     *      R.reduce(R.minBy(square), Infinity, []); //=> Infinity\n     */\n    var minBy = _curry3(function minBy(f, a, b) {\n        return f(b) < f(a) ? b : a;\n    });\n\n    /**\n     * Divides the first parameter by the second and returns the remainder. Note\n     * that this function preserves the JavaScript-style behavior for modulo. For\n     * mathematical modulo see `mathMod`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} a The value to the divide.\n     * @param {Number} b The pseudo-modulus\n     * @return {Number} The result of `b % a`.\n     * @see R.mathMod\n     * @example\n     *\n     *      R.modulo(17, 3); //=> 2\n     *      // JS behavior:\n     *      R.modulo(-17, 3); //=> -2\n     *      R.modulo(17, -3); //=> 2\n     *\n     *      var isOdd = R.modulo(R.__, 2);\n     *      isOdd(42); //=> 0\n     *      isOdd(21); //=> 1\n     */\n    var modulo = _curry2(function modulo(a, b) {\n        return a % b;\n    });\n\n    /**\n     * Multiplies two numbers. Equivalent to `a * b` but curried.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} a The first value.\n     * @param {Number} b The second value.\n     * @return {Number} The result of `a * b`.\n     * @see R.divide\n     * @example\n     *\n     *      var double = R.multiply(2);\n     *      var triple = R.multiply(3);\n     *      double(3);       //=>  6\n     *      triple(4);       //=> 12\n     *      R.multiply(2, 5);  //=> 10\n     */\n    var multiply = _curry2(function multiply(a, b) {\n        return a * b;\n    });\n\n    /**\n     * Wraps a function of any arity (including nullary) in a function that accepts\n     * exactly `n` parameters. Any extraneous parameters will not be passed to the\n     * supplied function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig Number -> (* -> a) -> (* -> a)\n     * @param {Number} n The desired arity of the new function.\n     * @param {Function} fn The function to wrap.\n     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of\n     *         arity `n`.\n     * @example\n     *\n     *      var takesTwoArgs = (a, b) => [a, b];\n     *\n     *      takesTwoArgs.length; //=> 2\n     *      takesTwoArgs(1, 2); //=> [1, 2]\n     *\n     *      var takesOneArg = R.nAry(1, takesTwoArgs);\n     *      takesOneArg.length; //=> 1\n     *      // Only `n` arguments are passed to the wrapped function\n     *      takesOneArg(1, 2); //=> [1, undefined]\n     */\n    var nAry = _curry2(function nAry(n, fn) {\n        switch (n) {\n        case 0:\n            return function () {\n                return fn.call(this);\n            };\n        case 1:\n            return function (a0) {\n                return fn.call(this, a0);\n            };\n        case 2:\n            return function (a0, a1) {\n                return fn.call(this, a0, a1);\n            };\n        case 3:\n            return function (a0, a1, a2) {\n                return fn.call(this, a0, a1, a2);\n            };\n        case 4:\n            return function (a0, a1, a2, a3) {\n                return fn.call(this, a0, a1, a2, a3);\n            };\n        case 5:\n            return function (a0, a1, a2, a3, a4) {\n                return fn.call(this, a0, a1, a2, a3, a4);\n            };\n        case 6:\n            return function (a0, a1, a2, a3, a4, a5) {\n                return fn.call(this, a0, a1, a2, a3, a4, a5);\n            };\n        case 7:\n            return function (a0, a1, a2, a3, a4, a5, a6) {\n                return fn.call(this, a0, a1, a2, a3, a4, a5, a6);\n            };\n        case 8:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7);\n            };\n        case 9:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8);\n            };\n        case 10:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9);\n            };\n        default:\n            throw new Error('First argument to nAry must be a non-negative integer no greater than ten');\n        }\n    });\n\n    /**\n     * Negates its argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Math\n     * @sig Number -> Number\n     * @param {Number} n\n     * @return {Number}\n     * @example\n     *\n     *      R.negate(42); //=> -42\n     */\n    var negate = _curry1(function negate(n) {\n        return -n;\n    });\n\n    /**\n     * Returns `true` if no elements of the list match the predicate, `false`\n     * otherwise.\n     *\n     * Dispatches to the `any` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Boolean\n     * @param {Function} fn The predicate function.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the predicate is not satisfied by every element, `false` otherwise.\n     * @see R.all, R.any\n     * @example\n     *\n     *      var isEven = n => n % 2 === 0;\n     *\n     *      R.none(isEven, [1, 3, 5, 7, 9, 11]); //=> true\n     *      R.none(isEven, [1, 3, 5, 7, 8, 11]); //=> false\n     */\n    var none = _curry2(_complement(_dispatchable('any', _xany, any)));\n\n    /**\n     * A function that returns the `!` of its argument. It will return `true` when\n     * passed false-y value, and `false` when passed a truth-y one.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Logic\n     * @sig * -> Boolean\n     * @param {*} a any value\n     * @return {Boolean} the logical inverse of passed argument.\n     * @see R.complement\n     * @example\n     *\n     *      R.not(true); //=> false\n     *      R.not(false); //=> true\n     *      R.not(0); //=> true\n     *      R.not(1); //=> false\n     */\n    var not = _curry1(function not(a) {\n        return !a;\n    });\n\n    /**\n     * Returns the nth element of the given list or string. If n is negative the\n     * element at index length + n is returned.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Number -> [a] -> a | Undefined\n     * @sig Number -> String -> String\n     * @param {Number} offset\n     * @param {*} list\n     * @return {*}\n     * @example\n     *\n     *      var list = ['foo', 'bar', 'baz', 'quux'];\n     *      R.nth(1, list); //=> 'bar'\n     *      R.nth(-1, list); //=> 'quux'\n     *      R.nth(-99, list); //=> undefined\n     *\n     *      R.nth(2, 'abc'); //=> 'c'\n     *      R.nth(3, 'abc'); //=> ''\n     */\n    var nth = _curry2(function nth(offset, list) {\n        var idx = offset < 0 ? list.length + offset : offset;\n        return _isString(list) ? list.charAt(idx) : list[idx];\n    });\n\n    /**\n     * Returns a function which returns its nth argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Function\n     * @sig Number -> *... -> *\n     * @param {Number} n\n     * @return {Function}\n     * @example\n     *\n     *      R.nthArg(1)('a', 'b', 'c'); //=> 'b'\n     *      R.nthArg(-1)('a', 'b', 'c'); //=> 'c'\n     */\n    var nthArg = _curry1(function nthArg(n) {\n        var arity = n < 0 ? 1 : n + 1;\n        return curryN(arity, function () {\n            return nth(n, arguments);\n        });\n    });\n\n    /**\n     * Creates an object containing a single key:value pair.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category Object\n     * @sig String -> a -> {String:a}\n     * @param {String} key\n     * @param {*} val\n     * @return {Object}\n     * @see R.pair\n     * @example\n     *\n     *      var matchPhrases = R.compose(\n     *        R.objOf('must'),\n     *        R.map(R.objOf('match_phrase'))\n     *      );\n     *      matchPhrases(['foo', 'bar', 'baz']); //=> {must: [{match_phrase: 'foo'}, {match_phrase: 'bar'}, {match_phrase: 'baz'}]}\n     */\n    var objOf = _curry2(function objOf(key, val) {\n        var obj = {};\n        obj[key] = val;\n        return obj;\n    });\n\n    /**\n     * Returns a singleton array containing the value provided.\n     *\n     * Note this `of` is different from the ES6 `of`; See\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Function\n     * @sig a -> [a]\n     * @param {*} x any value\n     * @return {Array} An array wrapping `x`.\n     * @example\n     *\n     *      R.of(null); //=> [null]\n     *      R.of([42]); //=> [[42]]\n     */\n    var of = _curry1(_of);\n\n    /**\n     * Accepts a function `fn` and returns a function that guards invocation of\n     * `fn` such that `fn` can only ever be called once, no matter how many times\n     * the returned function is invoked. The first value calculated is returned in\n     * subsequent invocations.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (a... -> b) -> (a... -> b)\n     * @param {Function} fn The function to wrap in a call-only-once wrapper.\n     * @return {Function} The wrapped function.\n     * @example\n     *\n     *      var addOneOnce = R.once(x => x + 1);\n     *      addOneOnce(10); //=> 11\n     *      addOneOnce(addOneOnce(50)); //=> 11\n     */\n    var once = _curry1(function once(fn) {\n        var called = false;\n        var result;\n        return _arity(fn.length, function () {\n            if (called) {\n                return result;\n            }\n            called = true;\n            result = fn.apply(this, arguments);\n            return result;\n        });\n    });\n\n    /**\n     * Returns `true` if one or both of its arguments are `true`. Returns `false`\n     * if both arguments are `false`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Logic\n     * @sig * -> * -> *\n     * @param {Boolean} a A boolean value\n     * @param {Boolean} b A boolean value\n     * @return {Boolean} `true` if one or both arguments are `true`, `false` otherwise\n     * @see R.either\n     * @example\n     *\n     *      R.or(true, true); //=> true\n     *      R.or(true, false); //=> true\n     *      R.or(false, true); //=> true\n     *      R.or(false, false); //=> false\n     */\n    var or = _curry2(function or(a, b) {\n        return a || b;\n    });\n\n    /**\n     * Returns the result of \"setting\" the portion of the given data structure\n     * focused by the given lens to the result of applying the given function to\n     * the focused value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig Lens s a -> (a -> a) -> s -> s\n     * @param {Lens} lens\n     * @param {*} v\n     * @param {*} x\n     * @return {*}\n     * @see R.prop, R.lensIndex, R.lensProp\n     * @example\n     *\n     *      var headLens = R.lensIndex(0);\n     *\n     *      R.over(headLens, R.toUpper, ['foo', 'bar', 'baz']); //=> ['FOO', 'bar', 'baz']\n     */\n    // `Identity` is a functor that holds a single value, where `map` simply\n    // transforms the held value with the provided function.\n    // The value returned by the getter function is first transformed with `f`,\n    // then set as the value of an `Identity`. This is then mapped over with the\n    // setter function of the lens.\n    var over = function () {\n        // `Identity` is a functor that holds a single value, where `map` simply\n        // transforms the held value with the provided function.\n        var Identity = function (x) {\n            return {\n                value: x,\n                map: function (f) {\n                    return Identity(f(x));\n                }\n            };\n        };\n        return _curry3(function over(lens, f, x) {\n            // The value returned by the getter function is first transformed with `f`,\n            // then set as the value of an `Identity`. This is then mapped over with the\n            // setter function of the lens.\n            return lens(function (y) {\n                return Identity(f(y));\n            })(x).value;\n        });\n    }();\n\n    /**\n     * Takes two arguments, `fst` and `snd`, and returns `[fst, snd]`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category List\n     * @sig a -> b -> (a,b)\n     * @param {*} fst\n     * @param {*} snd\n     * @return {Array}\n     * @see R.objOf, R.of\n     * @example\n     *\n     *      R.pair('foo', 'bar'); //=> ['foo', 'bar']\n     */\n    var pair = _curry2(function pair(fst, snd) {\n        return [\n            fst,\n            snd\n        ];\n    });\n\n    /**\n     * Retrieve the value at a given path.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category Object\n     * @sig [String] -> {k: v} -> v | Undefined\n     * @param {Array} path The path to use.\n     * @param {Object} obj The object to retrieve the nested property from.\n     * @return {*} The data at `path`.\n     * @see R.prop\n     * @example\n     *\n     *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2\n     *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined\n     */\n    var path = _curry2(function path(paths, obj) {\n        var val = obj;\n        var idx = 0;\n        while (idx < paths.length) {\n            if (val == null) {\n                return;\n            }\n            val = val[paths[idx]];\n            idx += 1;\n        }\n        return val;\n    });\n\n    /**\n     * If the given, non-null object has a value at the given path, returns the\n     * value at that path. Otherwise returns the provided default value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category Object\n     * @sig a -> [String] -> Object -> a\n     * @param {*} d The default value.\n     * @param {Array} p The path to use.\n     * @param {Object} obj The object to retrieve the nested property from.\n     * @return {*} The data at `path` of the supplied object or the default value.\n     * @example\n     *\n     *      R.pathOr('N/A', ['a', 'b'], {a: {b: 2}}); //=> 2\n     *      R.pathOr('N/A', ['a', 'b'], {c: {b: 2}}); //=> \"N/A\"\n     */\n    var pathOr = _curry3(function pathOr(d, p, obj) {\n        return defaultTo(d, path(p, obj));\n    });\n\n    /**\n     * Returns `true` if the specified object property at given path satisfies the\n     * given predicate; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Logic\n     * @sig (a -> Boolean) -> [String] -> Object -> Boolean\n     * @param {Function} pred\n     * @param {Array} propPath\n     * @param {*} obj\n     * @return {Boolean}\n     * @see R.propSatisfies, R.path\n     * @example\n     *\n     *      R.pathSatisfies(y => y > 0, ['x', 'y'], {x: {y: 2}}); //=> true\n     */\n    var pathSatisfies = _curry3(function pathSatisfies(pred, propPath, obj) {\n        return propPath.length > 0 && pred(path(propPath, obj));\n    });\n\n    /**\n     * Returns a partial copy of an object containing only the keys specified. If\n     * the key does not exist, the property is ignored.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [k] -> {k: v} -> {k: v}\n     * @param {Array} names an array of String property names to copy onto a new object\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with only properties from `names` on it.\n     * @see R.omit, R.props\n     * @example\n     *\n     *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\n     *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}\n     */\n    var pick = _curry2(function pick(names, obj) {\n        var result = {};\n        var idx = 0;\n        while (idx < names.length) {\n            if (names[idx] in obj) {\n                result[names[idx]] = obj[names[idx]];\n            }\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Similar to `pick` except that this one includes a `key: undefined` pair for\n     * properties that don't exist.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [k] -> {k: v} -> {k: v}\n     * @param {Array} names an array of String property names to copy onto a new object\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with only properties from `names` on it.\n     * @see R.pick\n     * @example\n     *\n     *      R.pickAll(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\n     *      R.pickAll(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, e: undefined, f: undefined}\n     */\n    var pickAll = _curry2(function pickAll(names, obj) {\n        var result = {};\n        var idx = 0;\n        var len = names.length;\n        while (idx < len) {\n            var name = names[idx];\n            result[name] = obj[name];\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Returns a partial copy of an object containing only the keys that satisfy\n     * the supplied predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Object\n     * @sig (v, k -> Boolean) -> {k: v} -> {k: v}\n     * @param {Function} pred A predicate to determine whether or not a key\n     *        should be included on the output object.\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with only properties that satisfy `pred`\n     *         on it.\n     * @see R.pick, R.filter\n     * @example\n     *\n     *      var isUpperCase = (val, key) => key.toUpperCase() === key;\n     *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}\n     */\n    var pickBy = _curry2(function pickBy(test, obj) {\n        var result = {};\n        for (var prop in obj) {\n            if (test(obj[prop], prop, obj)) {\n                result[prop] = obj[prop];\n            }\n        }\n        return result;\n    });\n\n    /**\n     * Returns a new list with the given element at the front, followed by the\n     * contents of the list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> [a]\n     * @param {*} el The item to add to the head of the output list.\n     * @param {Array} list The array to add to the tail of the output list.\n     * @return {Array} A new array.\n     * @see R.append\n     * @example\n     *\n     *      R.prepend('fee', ['fi', 'fo', 'fum']); //=> ['fee', 'fi', 'fo', 'fum']\n     */\n    var prepend = _curry2(function prepend(el, list) {\n        return _concat([el], list);\n    });\n\n    /**\n     * Returns a function that when supplied an object returns the indicated\n     * property of that object, if it exists.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig s -> {s: a} -> a | Undefined\n     * @param {String} p The property name\n     * @param {Object} obj The object to query\n     * @return {*} The value at `obj.p`.\n     * @see R.path\n     * @example\n     *\n     *      R.prop('x', {x: 100}); //=> 100\n     *      R.prop('x', {}); //=> undefined\n     */\n    var prop = _curry2(function prop(p, obj) {\n        return obj[p];\n    });\n\n    /**\n     * Returns `true` if the specified object property is of the given type;\n     * `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Type\n     * @sig Type -> String -> Object -> Boolean\n     * @param {Function} type\n     * @param {String} name\n     * @param {*} obj\n     * @return {Boolean}\n     * @see R.is, R.propSatisfies\n     * @example\n     *\n     *      R.propIs(Number, 'x', {x: 1, y: 2});  //=> true\n     *      R.propIs(Number, 'x', {x: 'foo'});    //=> false\n     *      R.propIs(Number, 'x', {});            //=> false\n     */\n    var propIs = _curry3(function propIs(type, name, obj) {\n        return is(type, obj[name]);\n    });\n\n    /**\n     * If the given, non-null object has an own property with the specified name,\n     * returns the value of that property. Otherwise returns the provided default\n     * value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.6.0\n     * @category Object\n     * @sig a -> String -> Object -> a\n     * @param {*} val The default value.\n     * @param {String} p The name of the property to return.\n     * @param {Object} obj The object to query.\n     * @return {*} The value of given property of the supplied object or the default value.\n     * @example\n     *\n     *      var alice = {\n     *        name: 'ALICE',\n     *        age: 101\n     *      };\n     *      var favorite = R.prop('favoriteLibrary');\n     *      var favoriteWithDefault = R.propOr('Ramda', 'favoriteLibrary');\n     *\n     *      favorite(alice);  //=> undefined\n     *      favoriteWithDefault(alice);  //=> 'Ramda'\n     */\n    var propOr = _curry3(function propOr(val, p, obj) {\n        return obj != null && _has(p, obj) ? obj[p] : val;\n    });\n\n    /**\n     * Returns `true` if the specified object property satisfies the given\n     * predicate; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Logic\n     * @sig (a -> Boolean) -> String -> {String: a} -> Boolean\n     * @param {Function} pred\n     * @param {String} name\n     * @param {*} obj\n     * @return {Boolean}\n     * @see R.propEq, R.propIs\n     * @example\n     *\n     *      R.propSatisfies(x => x > 0, 'x', {x: 1, y: 2}); //=> true\n     */\n    var propSatisfies = _curry3(function propSatisfies(pred, name, obj) {\n        return pred(obj[name]);\n    });\n\n    /**\n     * Acts as multiple `prop`: array of keys in, array of values out. Preserves\n     * order.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [k] -> {k: v} -> [v]\n     * @param {Array} ps The property names to fetch\n     * @param {Object} obj The object to query\n     * @return {Array} The corresponding values or partially applied function.\n     * @example\n     *\n     *      R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]\n     *      R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]\n     *\n     *      var fullName = R.compose(R.join(' '), R.props(['first', 'last']));\n     *      fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'\n     */\n    var props = _curry2(function props(ps, obj) {\n        var len = ps.length;\n        var out = [];\n        var idx = 0;\n        while (idx < len) {\n            out[idx] = obj[ps[idx]];\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns a list of numbers from `from` (inclusive) to `to` (exclusive).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Number -> Number -> [Number]\n     * @param {Number} from The first number in the list.\n     * @param {Number} to One more than the last number in the list.\n     * @return {Array} The list of numbers in tthe set `[a, b)`.\n     * @example\n     *\n     *      R.range(1, 5);    //=> [1, 2, 3, 4]\n     *      R.range(50, 53);  //=> [50, 51, 52]\n     */\n    var range = _curry2(function range(from, to) {\n        if (!(_isNumber(from) && _isNumber(to))) {\n            throw new TypeError('Both arguments to range must be numbers');\n        }\n        var result = [];\n        var n = from;\n        while (n < to) {\n            result.push(n);\n            n += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Returns a single item by iterating through the list, successively calling\n     * the iterator function and passing it an accumulator value and the current\n     * value from the array, and then passing the result to the next call.\n     *\n     * Similar to `reduce`, except moves through the input list from the right to\n     * the left.\n     *\n     * The iterator function receives two values: *(acc, value)*\n     *\n     * Note: `R.reduceRight` does not skip deleted or unassigned indices (sparse\n     * arrays), unlike the native `Array.prototype.reduce` method. For more details\n     * on this behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight#Description\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a,b -> a) -> a -> [b] -> a\n     * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n     *        current element from the array.\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.addIndex\n     * @example\n     *\n     *      var pairs = [ ['a', 1], ['b', 2], ['c', 3] ];\n     *      var flattenPairs = (acc, pair) => acc.concat(pair);\n     *\n     *      R.reduceRight(flattenPairs, [], pairs); //=> [ 'c', 3, 'b', 2, 'a', 1 ]\n     */\n    var reduceRight = _curry3(function reduceRight(fn, acc, list) {\n        var idx = list.length - 1;\n        while (idx >= 0) {\n            acc = fn(acc, list[idx]);\n            idx -= 1;\n        }\n        return acc;\n    });\n\n    /**\n     * Returns a value wrapped to indicate that it is the final value of the reduce\n     * and transduce functions. The returned value should be considered a black\n     * box: the internal structure is not guaranteed to be stable.\n     *\n     * Note: this optimization is unavailable to functions not explicitly listed\n     * above. For instance, it is not currently supported by reduceRight.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category List\n     * @sig a -> *\n     * @param {*} x The final value of the reduce.\n     * @return {*} The wrapped value.\n     * @see R.reduce, R.transduce\n     * @example\n     *\n     *      R.reduce(\n     *        R.pipe(R.add, R.when(R.gte(R.__, 10), R.reduced)),\n     *        0,\n     *        [1, 2, 3, 4, 5]) // 10\n     */\n    var reduced = _curry1(_reduced);\n\n    /**\n     * Removes the sub-list of `list` starting at index `start` and containing\n     * `count` elements. _Note that this is not destructive_: it returns a copy of\n     * the list with the changes.\n     * <small>No lists have been harmed in the application of this function.</small>\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.2\n     * @category List\n     * @sig Number -> Number -> [a] -> [a]\n     * @param {Number} start The position to start removing elements\n     * @param {Number} count The number of elements to remove\n     * @param {Array} list The list to remove from\n     * @return {Array} A new Array with `count` elements from `start` removed.\n     * @example\n     *\n     *      R.remove(2, 3, [1,2,3,4,5,6,7,8]); //=> [1,2,6,7,8]\n     */\n    var remove = _curry3(function remove(start, count, list) {\n        return _concat(_slice(list, 0, Math.min(start, list.length)), _slice(list, Math.min(list.length, start + count)));\n    });\n\n    /**\n     * Replace a substring or regex match in a string with a replacement.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category String\n     * @sig RegExp|String -> String -> String -> String\n     * @param {RegExp|String} pattern A regular expression or a substring to match.\n     * @param {String} replacement The string to replace the matches with.\n     * @param {String} str The String to do the search and replacement in.\n     * @return {String} The result.\n     * @example\n     *\n     *      R.replace('foo', 'bar', 'foo foo foo'); //=> 'bar foo foo'\n     *      R.replace(/foo/, 'bar', 'foo foo foo'); //=> 'bar foo foo'\n     *\n     *      // Use the \"g\" (global) flag to replace all occurrences:\n     *      R.replace(/foo/g, 'bar', 'foo foo foo'); //=> 'bar bar bar'\n     */\n    var replace = _curry3(function replace(regex, replacement, str) {\n        return str.replace(regex, replacement);\n    });\n\n    /**\n     * Returns a new list or string with the elements or characters in reverse\n     * order.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a]\n     * @sig String -> String\n     * @param {Array|String} list\n     * @return {Array|String}\n     * @example\n     *\n     *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]\n     *      R.reverse([1, 2]);     //=> [2, 1]\n     *      R.reverse([1]);        //=> [1]\n     *      R.reverse([]);         //=> []\n     *\n     *      R.reverse('abc');      //=> 'cba'\n     *      R.reverse('ab');       //=> 'ba'\n     *      R.reverse('a');        //=> 'a'\n     *      R.reverse('');         //=> ''\n     */\n    var reverse = _curry1(function reverse(list) {\n        return _isString(list) ? list.split('').reverse().join('') : _slice(list).reverse();\n    });\n\n    /**\n     * Scan is similar to reduce, but returns a list of successively reduced values\n     * from the left\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category List\n     * @sig (a,b -> a) -> a -> [b] -> [a]\n     * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n     *        current element from the array\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {Array} A list of all intermediately reduced values.\n     * @example\n     *\n     *      var numbers = [1, 2, 3, 4];\n     *      var factorials = R.scan(R.multiply, 1, numbers); //=> [1, 1, 2, 6, 24]\n     */\n    var scan = _curry3(function scan(fn, acc, list) {\n        var idx = 0;\n        var len = list.length;\n        var result = [acc];\n        while (idx < len) {\n            acc = fn(acc, list[idx]);\n            result[idx + 1] = acc;\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Returns the result of \"setting\" the portion of the given data structure\n     * focused by the given lens to the given value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig Lens s a -> a -> s -> s\n     * @param {Lens} lens\n     * @param {*} v\n     * @param {*} x\n     * @return {*}\n     * @see R.prop, R.lensIndex, R.lensProp\n     * @example\n     *\n     *      var xLens = R.lensProp('x');\n     *\n     *      R.set(xLens, 4, {x: 1, y: 2});  //=> {x: 4, y: 2}\n     *      R.set(xLens, 8, {x: 1, y: 2});  //=> {x: 8, y: 2}\n     */\n    var set = _curry3(function set(lens, v, x) {\n        return over(lens, always(v), x);\n    });\n\n    /**\n     * Returns the elements of the given list or string (or object with a `slice`\n     * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n     *\n     * Dispatches to the `slice` method of the third argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.4\n     * @category List\n     * @sig Number -> Number -> [a] -> [a]\n     * @sig Number -> Number -> String -> String\n     * @param {Number} fromIndex The start index (inclusive).\n     * @param {Number} toIndex The end index (exclusive).\n     * @param {*} list\n     * @return {*}\n     * @example\n     *\n     *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n     *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n     *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n     *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n     *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n     */\n    var slice = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n        return Array.prototype.slice.call(list, fromIndex, toIndex);\n    }));\n\n    /**\n     * Returns a copy of the list, sorted according to the comparator function,\n     * which should accept two values at a time and return a negative number if the\n     * first value is smaller, a positive number if it's larger, and zero if they\n     * are equal. Please note that this is a **copy** of the list. It does not\n     * modify the original.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a,a -> Number) -> [a] -> [a]\n     * @param {Function} comparator A sorting function :: a -> b -> Int\n     * @param {Array} list The list to sort\n     * @return {Array} a new array with its elements sorted by the comparator function.\n     * @example\n     *\n     *      var diff = function(a, b) { return a - b; };\n     *      R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]\n     */\n    var sort = _curry2(function sort(comparator, list) {\n        return _slice(list).sort(comparator);\n    });\n\n    /**\n     * Sorts the list according to the supplied function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig Ord b => (a -> b) -> [a] -> [a]\n     * @param {Function} fn\n     * @param {Array} list The list to sort.\n     * @return {Array} A new list sorted by the keys generated by `fn`.\n     * @example\n     *\n     *      var sortByFirstItem = R.sortBy(R.prop(0));\n     *      var sortByNameCaseInsensitive = R.sortBy(R.compose(R.toLower, R.prop('name')));\n     *      var pairs = [[-1, 1], [-2, 2], [-3, 3]];\n     *      sortByFirstItem(pairs); //=> [[-3, 3], [-2, 2], [-1, 1]]\n     *      var alice = {\n     *        name: 'ALICE',\n     *        age: 101\n     *      };\n     *      var bob = {\n     *        name: 'Bob',\n     *        age: -10\n     *      };\n     *      var clara = {\n     *        name: 'clara',\n     *        age: 314.159\n     *      };\n     *      var people = [clara, bob, alice];\n     *      sortByNameCaseInsensitive(people); //=> [alice, bob, clara]\n     */\n    var sortBy = _curry2(function sortBy(fn, list) {\n        return _slice(list).sort(function (a, b) {\n            var aa = fn(a);\n            var bb = fn(b);\n            return aa < bb ? -1 : aa > bb ? 1 : 0;\n        });\n    });\n\n    /**\n     * Splits a given list or string at a given index.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig Number -> [a] -> [[a], [a]]\n     * @sig Number -> String -> [String, String]\n     * @param {Number} index The index where the array/string is split.\n     * @param {Array|String} array The array/string to be split.\n     * @return {Array}\n     * @example\n     *\n     *      R.splitAt(1, [1, 2, 3]);          //=> [[1], [2, 3]]\n     *      R.splitAt(5, 'hello world');      //=> ['hello', ' world']\n     *      R.splitAt(-1, 'foobar');          //=> ['fooba', 'r']\n     */\n    var splitAt = _curry2(function splitAt(index, array) {\n        return [\n            slice(0, index, array),\n            slice(index, length(array), array)\n        ];\n    });\n\n    /**\n     * Splits a collection into slices of the specified length.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig Number -> [a] -> [[a]]\n     * @sig Number -> String -> [String]\n     * @param {Number} n\n     * @param {Array} list\n     * @return {Array}\n     * @example\n     *\n     *      R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]\n     *      R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']\n     */\n    var splitEvery = _curry2(function splitEvery(n, list) {\n        if (n <= 0) {\n            throw new Error('First argument to splitEvery must be a positive integer');\n        }\n        var result = [];\n        var idx = 0;\n        while (idx < list.length) {\n            result.push(slice(idx, idx += n, list));\n        }\n        return result;\n    });\n\n    /**\n     * Takes a list and a predicate and returns a pair of lists with the following properties:\n     *\n     *  - the result of concatenating the two output lists is equivalent to the input list;\n     *  - none of the elements of the first output list satisfies the predicate; and\n     *  - if the second output list is non-empty, its first element satisfies the predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [[a], [a]]\n     * @param {Function} pred The predicate that determines where the array is split.\n     * @param {Array} list The array to be split.\n     * @return {Array}\n     * @example\n     *\n     *      R.splitWhen(R.equals(2), [1, 2, 3, 1, 2, 3]);   //=> [[1], [2, 3, 1, 2, 3]]\n     */\n    var splitWhen = _curry2(function splitWhen(pred, list) {\n        var idx = 0;\n        var len = list.length;\n        var prefix = [];\n        while (idx < len && !pred(list[idx])) {\n            prefix.push(list[idx]);\n            idx += 1;\n        }\n        return [\n            prefix,\n            _slice(list, idx)\n        ];\n    });\n\n    /**\n     * Subtracts its second argument from its first argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig Number -> Number -> Number\n     * @param {Number} a The first value.\n     * @param {Number} b The second value.\n     * @return {Number} The result of `a - b`.\n     * @see R.add\n     * @example\n     *\n     *      R.subtract(10, 8); //=> 2\n     *\n     *      var minus5 = R.subtract(R.__, 5);\n     *      minus5(17); //=> 12\n     *\n     *      var complementaryAngle = R.subtract(90);\n     *      complementaryAngle(30); //=> 60\n     *      complementaryAngle(72); //=> 18\n     */\n    var subtract = _curry2(function subtract(a, b) {\n        return Number(a) - Number(b);\n    });\n\n    /**\n     * Returns all but the first element of the given list or string (or object\n     * with a `tail` method).\n     *\n     * Dispatches to the `slice` method of the first argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a]\n     * @sig String -> String\n     * @param {*} list\n     * @return {*}\n     * @see R.head, R.init, R.last\n     * @example\n     *\n     *      R.tail([1, 2, 3]);  //=> [2, 3]\n     *      R.tail([1, 2]);     //=> [2]\n     *      R.tail([1]);        //=> []\n     *      R.tail([]);         //=> []\n     *\n     *      R.tail('abc');  //=> 'bc'\n     *      R.tail('ab');   //=> 'b'\n     *      R.tail('a');    //=> ''\n     *      R.tail('');     //=> ''\n     */\n    var tail = _checkForMethod('tail', slice(1, Infinity));\n\n    /**\n     * Returns the first `n` elements of the given list, string, or\n     * transducer/transformer (or object with a `take` method).\n     *\n     * Dispatches to the `take` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Number -> [a] -> [a]\n     * @sig Number -> String -> String\n     * @param {Number} n\n     * @param {*} list\n     * @return {*}\n     * @see R.drop\n     * @example\n     *\n     *      R.take(1, ['foo', 'bar', 'baz']); //=> ['foo']\n     *      R.take(2, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']\n     *      R.take(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\n     *      R.take(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\n     *      R.take(3, 'ramda');               //=> 'ram'\n     *\n     *      var personnel = [\n     *        'Dave Brubeck',\n     *        'Paul Desmond',\n     *        'Eugene Wright',\n     *        'Joe Morello',\n     *        'Gerry Mulligan',\n     *        'Bob Bates',\n     *        'Joe Dodge',\n     *        'Ron Crotty'\n     *      ];\n     *\n     *      var takeFive = R.take(5);\n     *      takeFive(personnel);\n     *      //=> ['Dave Brubeck', 'Paul Desmond', 'Eugene Wright', 'Joe Morello', 'Gerry Mulligan']\n     */\n    var take = _curry2(_dispatchable('take', _xtake, function take(n, xs) {\n        return slice(0, n < 0 ? Infinity : n, xs);\n    }));\n\n    /**\n     * Returns a new list containing the last `n` elements of a given list, passing\n     * each value to the supplied predicate function, and terminating when the\n     * predicate function returns `false`. Excludes the element that caused the\n     * predicate function to fail. The predicate function is passed one argument:\n     * *(value)*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [a]\n     * @param {Function} fn The function called per iteration.\n     * @param {Array} list The collection to iterate over.\n     * @return {Array} A new array.\n     * @see R.dropLastWhile, R.addIndex\n     * @example\n     *\n     *      var isNotOne = x => x !== 1;\n     *\n     *      R.takeLastWhile(isNotOne, [1, 2, 3, 4]); //=> [2, 3, 4]\n     */\n    var takeLastWhile = _curry2(function takeLastWhile(fn, list) {\n        var idx = list.length - 1;\n        while (idx >= 0 && fn(list[idx])) {\n            idx -= 1;\n        }\n        return _slice(list, idx + 1, Infinity);\n    });\n\n    /**\n     * Returns a new list containing the first `n` elements of a given list,\n     * passing each value to the supplied predicate function, and terminating when\n     * the predicate function returns `false`. Excludes the element that caused the\n     * predicate function to fail. The predicate function is passed one argument:\n     * *(value)*.\n     *\n     * Dispatches to the `takeWhile` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [a]\n     * @param {Function} fn The function called per iteration.\n     * @param {Array} list The collection to iterate over.\n     * @return {Array} A new array.\n     * @see R.dropWhile, R.transduce, R.addIndex\n     * @example\n     *\n     *      var isNotFour = x => x !== 4;\n     *\n     *      R.takeWhile(isNotFour, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3]\n     */\n    var takeWhile = _curry2(_dispatchable('takeWhile', _xtakeWhile, function takeWhile(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len && fn(list[idx])) {\n            idx += 1;\n        }\n        return _slice(list, 0, idx);\n    }));\n\n    /**\n     * Runs the given function with the supplied object, then returns the object.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (a -> *) -> a -> a\n     * @param {Function} fn The function to call with `x`. The return value of `fn` will be thrown away.\n     * @param {*} x\n     * @return {*} `x`.\n     * @example\n     *\n     *      var sayX = x => console.log('x is ' + x);\n     *      R.tap(sayX, 100); //=> 100\n     *      // logs 'x is 100'\n     */\n    var tap = _curry2(function tap(fn, x) {\n        fn(x);\n        return x;\n    });\n\n    /**\n     * Calls an input function `n` times, returning an array containing the results\n     * of those function calls.\n     *\n     * `fn` is passed one argument: The current value of `n`, which begins at `0`\n     * and is gradually incremented to `n - 1`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.3\n     * @category List\n     * @sig (Number -> a) -> Number -> [a]\n     * @param {Function} fn The function to invoke. Passed one argument, the current value of `n`.\n     * @param {Number} n A value between `0` and `n - 1`. Increments after each function call.\n     * @return {Array} An array containing the return values of all calls to `fn`.\n     * @example\n     *\n     *      R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]\n     */\n    var times = _curry2(function times(fn, n) {\n        var len = Number(n);\n        var idx = 0;\n        var list;\n        if (len < 0 || isNaN(len)) {\n            throw new RangeError('n must be a non-negative number');\n        }\n        list = new Array(len);\n        while (idx < len) {\n            list[idx] = fn(idx);\n            idx += 1;\n        }\n        return list;\n    });\n\n    /**\n     * Converts an object into an array of key, value arrays. Only the object's\n     * own properties are used.\n     * Note that the order of the output array is not guaranteed to be consistent\n     * across different JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.4.0\n     * @category Object\n     * @sig {String: *} -> [[String,*]]\n     * @param {Object} obj The object to extract from\n     * @return {Array} An array of key, value arrays from the object's own properties.\n     * @see R.fromPairs\n     * @example\n     *\n     *      R.toPairs({a: 1, b: 2, c: 3}); //=> [['a', 1], ['b', 2], ['c', 3]]\n     */\n    var toPairs = _curry1(function toPairs(obj) {\n        var pairs = [];\n        for (var prop in obj) {\n            if (_has(prop, obj)) {\n                pairs[pairs.length] = [\n                    prop,\n                    obj[prop]\n                ];\n            }\n        }\n        return pairs;\n    });\n\n    /**\n     * Converts an object into an array of key, value arrays. The object's own\n     * properties and prototype properties are used. Note that the order of the\n     * output array is not guaranteed to be consistent across different JS\n     * platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.4.0\n     * @category Object\n     * @sig {String: *} -> [[String,*]]\n     * @param {Object} obj The object to extract from\n     * @return {Array} An array of key, value arrays from the object's own\n     *         and prototype properties.\n     * @example\n     *\n     *      var F = function() { this.x = 'X'; };\n     *      F.prototype.y = 'Y';\n     *      var f = new F();\n     *      R.toPairsIn(f); //=> [['x','X'], ['y','Y']]\n     */\n    var toPairsIn = _curry1(function toPairsIn(obj) {\n        var pairs = [];\n        for (var prop in obj) {\n            pairs[pairs.length] = [\n                prop,\n                obj[prop]\n            ];\n        }\n        return pairs;\n    });\n\n    /**\n     * Transposes the rows and columns of a 2D list.\n     * When passed a list of `n` lists of length `x`,\n     * returns a list of `x` lists of length `n`.\n     *\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig [[a]] -> [[a]]\n     * @param {Array} list A 2D list\n     * @return {Array} A 2D list\n     * @example\n     *\n     *      R.transpose([[1, 'a'], [2, 'b'], [3, 'c']]) //=> [[1, 2, 3], ['a', 'b', 'c']]\n     *      R.transpose([[1, 2, 3], ['a', 'b', 'c']]) //=> [[1, 'a'], [2, 'b'], [3, 'c']]\n     *\n     * If some of the rows are shorter than the following rows, their elements are skipped:\n     *\n     *      R.transpose([[10, 11], [20], [], [30, 31, 32]]) //=> [[10, 20, 30], [11, 31], [32]]\n     */\n    var transpose = _curry1(function transpose(outerlist) {\n        var i = 0;\n        var result = [];\n        while (i < outerlist.length) {\n            var innerlist = outerlist[i];\n            var j = 0;\n            while (j < innerlist.length) {\n                if (typeof result[j] === 'undefined') {\n                    result[j] = [];\n                }\n                result[j].push(innerlist[j]);\n                j += 1;\n            }\n            i += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Removes (strips) whitespace from both ends of the string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.6.0\n     * @category String\n     * @sig String -> String\n     * @param {String} str The string to trim.\n     * @return {String} Trimmed version of `str`.\n     * @example\n     *\n     *      R.trim('   xyz  '); //=> 'xyz'\n     *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']\n     */\n    var trim = function () {\n        var ws = '\\t\\n\\x0B\\f\\r \\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' + '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' + '\\u2029\\uFEFF';\n        var zeroWidth = '\\u200B';\n        var hasProtoTrim = typeof String.prototype.trim === 'function';\n        if (!hasProtoTrim || (ws.trim() || !zeroWidth.trim())) {\n            return _curry1(function trim(str) {\n                var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');\n                var endRx = new RegExp('[' + ws + '][' + ws + ']*$');\n                return str.replace(beginRx, '').replace(endRx, '');\n            });\n        } else {\n            return _curry1(function trim(str) {\n                return str.trim();\n            });\n        }\n    }();\n\n    /**\n     * `tryCatch` takes two functions, a `tryer` and a `catcher`. The returned\n     * function evaluates the `tryer`; if it does not throw, it simply returns the\n     * result. If the `tryer` *does* throw, the returned function evaluates the\n     * `catcher` function and returns its result. Note that for effective\n     * composition with this function, both the `tryer` and `catcher` functions\n     * must return the same type of results.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.20.0\n     * @category Function\n     * @sig (...x -> a) -> ((e, ...x) -> a) -> (...x -> a)\n     * @param {Function} tryer The function that may throw.\n     * @param {Function} catcher The function that will be evaluated if `tryer` throws.\n     * @return {Function} A new function that will catch exceptions and send then to the catcher.\n     * @example\n     *\n     *      R.tryCatch(R.prop('x'), R.F)({x: true}); //=> true\n     *      R.tryCatch(R.prop('x'), R.F)(null);      //=> false\n     */\n    var tryCatch = _curry2(function _tryCatch(tryer, catcher) {\n        return _arity(tryer.length, function () {\n            try {\n                return tryer.apply(this, arguments);\n            } catch (e) {\n                return catcher.apply(this, _concat([e], arguments));\n            }\n        });\n    });\n\n    /**\n     * Gives a single-word string description of the (native) type of a value,\n     * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n     * attempt to distinguish user Object types any further, reporting them all as\n     * 'Object'.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Type\n     * @sig (* -> {*}) -> String\n     * @param {*} val The value to test\n     * @return {String}\n     * @example\n     *\n     *      R.type({}); //=> \"Object\"\n     *      R.type(1); //=> \"Number\"\n     *      R.type(false); //=> \"Boolean\"\n     *      R.type('s'); //=> \"String\"\n     *      R.type(null); //=> \"Null\"\n     *      R.type([]); //=> \"Array\"\n     *      R.type(/[A-z]/); //=> \"RegExp\"\n     */\n    var type = _curry1(function type(val) {\n        return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);\n    });\n\n    /**\n     * Takes a function `fn`, which takes a single array argument, and returns a\n     * function which:\n     *\n     *   - takes any number of positional arguments;\n     *   - passes these arguments to `fn` as an array; and\n     *   - returns the result.\n     *\n     * In other words, R.unapply derives a variadic function from a function which\n     * takes an array. R.unapply is the inverse of R.apply.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Function\n     * @sig ([*...] -> a) -> (*... -> a)\n     * @param {Function} fn\n     * @return {Function}\n     * @see R.apply\n     * @example\n     *\n     *      R.unapply(JSON.stringify)(1, 2, 3); //=> '[1,2,3]'\n     */\n    var unapply = _curry1(function unapply(fn) {\n        return function () {\n            return fn(_slice(arguments));\n        };\n    });\n\n    /**\n     * Wraps a function of any arity (including nullary) in a function that accepts\n     * exactly 1 parameter. Any extraneous parameters will not be passed to the\n     * supplied function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category Function\n     * @sig (* -> b) -> (a -> b)\n     * @param {Function} fn The function to wrap.\n     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of\n     *         arity 1.\n     * @example\n     *\n     *      var takesTwoArgs = function(a, b) {\n     *        return [a, b];\n     *      };\n     *      takesTwoArgs.length; //=> 2\n     *      takesTwoArgs(1, 2); //=> [1, 2]\n     *\n     *      var takesOneArg = R.unary(takesTwoArgs);\n     *      takesOneArg.length; //=> 1\n     *      // Only 1 argument is passed to the wrapped function\n     *      takesOneArg(1, 2); //=> [1, undefined]\n     */\n    var unary = _curry1(function unary(fn) {\n        return nAry(1, fn);\n    });\n\n    /**\n     * Returns a function of arity `n` from a (manually) curried function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Function\n     * @sig Number -> (a -> b) -> (a -> c)\n     * @param {Number} length The arity for the returned function.\n     * @param {Function} fn The function to uncurry.\n     * @return {Function} A new function.\n     * @see R.curry\n     * @example\n     *\n     *      var addFour = a => b => c => d => a + b + c + d;\n     *\n     *      var uncurriedAddFour = R.uncurryN(4, addFour);\n     *      uncurriedAddFour(1, 2, 3, 4); //=> 10\n     */\n    var uncurryN = _curry2(function uncurryN(depth, fn) {\n        return curryN(depth, function () {\n            var currentDepth = 1;\n            var value = fn;\n            var idx = 0;\n            var endIdx;\n            while (currentDepth <= depth && typeof value === 'function') {\n                endIdx = currentDepth === depth ? arguments.length : idx + value.length;\n                value = value.apply(this, _slice(arguments, idx, endIdx));\n                currentDepth += 1;\n                idx = endIdx;\n            }\n            return value;\n        });\n    });\n\n    /**\n     * Builds a list from a seed value. Accepts an iterator function, which returns\n     * either false to stop iteration or an array of length 2 containing the value\n     * to add to the resulting list and the seed to be used in the next call to the\n     * iterator function.\n     *\n     * The iterator function receives one argument: *(seed)*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category List\n     * @sig (a -> [b]) -> * -> [b]\n     * @param {Function} fn The iterator function. receives one argument, `seed`, and returns\n     *        either false to quit iteration or an array of length two to proceed. The element\n     *        at index 0 of this array will be added to the resulting array, and the element\n     *        at index 1 will be passed to the next call to `fn`.\n     * @param {*} seed The seed value.\n     * @return {Array} The final list.\n     * @example\n     *\n     *      var f = n => n > 50 ? false : [-n, n + 10];\n     *      R.unfold(f, 10); //=> [-10, -20, -30, -40, -50]\n     */\n    var unfold = _curry2(function unfold(fn, seed) {\n        var pair = fn(seed);\n        var result = [];\n        while (pair && pair.length) {\n            result[result.length] = pair[0];\n            pair = fn(pair[1]);\n        }\n        return result;\n    });\n\n    /**\n     * Returns a new list containing only one copy of each element in the original\n     * list, based upon the value returned by applying the supplied predicate to\n     * two list elements. Prefers the first item if two items compare equal based\n     * on the predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category List\n     * @sig (a, a -> Boolean) -> [a] -> [a]\n     * @param {Function} pred A predicate used to test whether two items are equal.\n     * @param {Array} list The array to consider.\n     * @return {Array} The list of unique items.\n     * @example\n     *\n     *      var strEq = R.eqBy(String);\n     *      R.uniqWith(strEq)([1, '1', 2, 1]); //=> [1, 2]\n     *      R.uniqWith(strEq)([{}, {}]);       //=> [{}]\n     *      R.uniqWith(strEq)([1, '1', 1]);    //=> [1]\n     *      R.uniqWith(strEq)(['1', 1, 1]);    //=> ['1']\n     */\n    var uniqWith = _curry2(function uniqWith(pred, list) {\n        var idx = 0;\n        var len = list.length;\n        var result = [];\n        var item;\n        while (idx < len) {\n            item = list[idx];\n            if (!_containsWith(pred, item, result)) {\n                result[result.length] = item;\n            }\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Tests the final argument by passing it to the given predicate function. If\n     * the predicate is not satisfied, the function will return the result of\n     * calling the `whenFalseFn` function with the same argument. If the predicate\n     * is satisfied, the argument is returned as is.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category Logic\n     * @sig (a -> Boolean) -> (a -> a) -> a -> a\n     * @param {Function} pred        A predicate function\n     * @param {Function} whenFalseFn A function to invoke when the `pred` evaluates\n     *                               to a falsy value.\n     * @param {*}        x           An object to test with the `pred` function and\n     *                               pass to `whenFalseFn` if necessary.\n     * @return {*} Either `x` or the result of applying `x` to `whenFalseFn`.\n     * @see R.ifElse, R.when\n     * @example\n     *\n     *      // coerceArray :: (a|[a]) -> [a]\n     *      var coerceArray = R.unless(R.isArrayLike, R.of);\n     *      coerceArray([1, 2, 3]); //=> [1, 2, 3]\n     *      coerceArray(1);         //=> [1]\n     */\n    var unless = _curry3(function unless(pred, whenFalseFn, x) {\n        return pred(x) ? x : whenFalseFn(x);\n    });\n\n    /**\n     * Takes a predicate, a transformation function, and an initial value,\n     * and returns a value of the same type as the initial value.\n     * It does so by applying the transformation until the predicate is satisfied,\n     * at which point it returns the satisfactory value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.20.0\n     * @category Logic\n     * @sig (a -> Boolean) -> (a -> a) -> a -> a\n     * @param {Function} pred A predicate function\n     * @param {Function} fn The iterator function\n     * @param {*} init Initial value\n     * @return {*} Final value that satisfies predicate\n     * @example\n     *\n     *      R.until(R.gt(R.__, 100), R.multiply(2))(1) // => 128\n     */\n    var until = _curry3(function until(pred, fn, init) {\n        var val = init;\n        while (!pred(val)) {\n            val = fn(val);\n        }\n        return val;\n    });\n\n    /**\n     * Returns a new copy of the array with the element at the provided index\n     * replaced with the given value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category List\n     * @sig Number -> a -> [a] -> [a]\n     * @param {Number} idx The index to update.\n     * @param {*} x The value to exist at the given index of the returned array.\n     * @param {Array|Arguments} list The source array-like object to be updated.\n     * @return {Array} A copy of `list` with the value at index `idx` replaced with `x`.\n     * @see R.adjust\n     * @example\n     *\n     *      R.update(1, 11, [0, 1, 2]);     //=> [0, 11, 2]\n     *      R.update(1)(11)([0, 1, 2]);     //=> [0, 11, 2]\n     */\n    var update = _curry3(function update(idx, x, list) {\n        return adjust(always(x), idx, list);\n    });\n\n    /**\n     * Accepts a function `fn` and a list of transformer functions and returns a\n     * new curried function. When the new function is invoked, it calls the\n     * function `fn` with parameters consisting of the result of calling each\n     * supplied handler on successive arguments to the new function.\n     *\n     * If more arguments are passed to the returned function than transformer\n     * functions, those arguments are passed directly to `fn` as additional\n     * parameters. If you expect additional arguments that don't need to be\n     * transformed, although you can ignore them, it's best to pass an identity\n     * function so that the new function reports the correct arity.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (x1 -> x2 -> ... -> z) -> [(a -> x1), (b -> x2), ...] -> (a -> b -> ... -> z)\n     * @param {Function} fn The function to wrap.\n     * @param {Array} transformers A list of transformer functions\n     * @return {Function} The wrapped function.\n     * @example\n     *\n     *      R.useWith(Math.pow, [R.identity, R.identity])(3, 4); //=> 81\n     *      R.useWith(Math.pow, [R.identity, R.identity])(3)(4); //=> 81\n     *      R.useWith(Math.pow, [R.dec, R.inc])(3, 4); //=> 32\n     *      R.useWith(Math.pow, [R.dec, R.inc])(3)(4); //=> 32\n     */\n    var useWith = _curry2(function useWith(fn, transformers) {\n        return curryN(transformers.length, function () {\n            var args = [];\n            var idx = 0;\n            while (idx < transformers.length) {\n                args.push(transformers[idx].call(this, arguments[idx]));\n                idx += 1;\n            }\n            return fn.apply(this, args.concat(_slice(arguments, transformers.length)));\n        });\n    });\n\n    /**\n     * Returns a list of all the enumerable own properties of the supplied object.\n     * Note that the order of the output array is not guaranteed across different\n     * JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {k: v} -> [v]\n     * @param {Object} obj The object to extract values from\n     * @return {Array} An array of the values of the object's own properties.\n     * @example\n     *\n     *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]\n     */\n    var values = _curry1(function values(obj) {\n        var props = keys(obj);\n        var len = props.length;\n        var vals = [];\n        var idx = 0;\n        while (idx < len) {\n            vals[idx] = obj[props[idx]];\n            idx += 1;\n        }\n        return vals;\n    });\n\n    /**\n     * Returns a list of all the properties, including prototype properties, of the\n     * supplied object.\n     * Note that the order of the output array is not guaranteed to be consistent\n     * across different JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category Object\n     * @sig {k: v} -> [v]\n     * @param {Object} obj The object to extract values from\n     * @return {Array} An array of the values of the object's own and prototype properties.\n     * @example\n     *\n     *      var F = function() { this.x = 'X'; };\n     *      F.prototype.y = 'Y';\n     *      var f = new F();\n     *      R.valuesIn(f); //=> ['X', 'Y']\n     */\n    var valuesIn = _curry1(function valuesIn(obj) {\n        var prop;\n        var vs = [];\n        for (prop in obj) {\n            vs[vs.length] = obj[prop];\n        }\n        return vs;\n    });\n\n    /**\n     * Returns a \"view\" of the given data structure, determined by the given lens.\n     * The lens's focus determines which portion of the data structure is visible.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig Lens s a -> s -> a\n     * @param {Lens} lens\n     * @param {*} x\n     * @return {*}\n     * @see R.prop, R.lensIndex, R.lensProp\n     * @example\n     *\n     *      var xLens = R.lensProp('x');\n     *\n     *      R.view(xLens, {x: 1, y: 2});  //=> 1\n     *      R.view(xLens, {x: 4, y: 2});  //=> 4\n     */\n    // `Const` is a functor that effectively ignores the function given to `map`.\n    // Using `Const` effectively ignores the setter function of the `lens`,\n    // leaving the value returned by the getter function unmodified.\n    var view = function () {\n        // `Const` is a functor that effectively ignores the function given to `map`.\n        var Const = function (x) {\n            return {\n                value: x,\n                map: function () {\n                    return this;\n                }\n            };\n        };\n        return _curry2(function view(lens, x) {\n            // Using `Const` effectively ignores the setter function of the `lens`,\n            // leaving the value returned by the getter function unmodified.\n            return lens(Const)(x).value;\n        });\n    }();\n\n    /**\n     * Tests the final argument by passing it to the given predicate function. If\n     * the predicate is satisfied, the function will return the result of calling\n     * the `whenTrueFn` function with the same argument. If the predicate is not\n     * satisfied, the argument is returned as is.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category Logic\n     * @sig (a -> Boolean) -> (a -> a) -> a -> a\n     * @param {Function} pred       A predicate function\n     * @param {Function} whenTrueFn A function to invoke when the `condition`\n     *                              evaluates to a truthy value.\n     * @param {*}        x          An object to test with the `pred` function and\n     *                              pass to `whenTrueFn` if necessary.\n     * @return {*} Either `x` or the result of applying `x` to `whenTrueFn`.\n     * @see R.ifElse, R.unless\n     * @example\n     *\n     *      // truncate :: String -> String\n     *      var truncate = R.when(\n     *        R.propSatisfies(R.gt(R.__, 10), 'length'),\n     *        R.pipe(R.take(10), R.append(''), R.join(''))\n     *      );\n     *      truncate('12345');         //=> '12345'\n     *      truncate('0123456789ABC'); //=> '0123456789'\n     */\n    var when = _curry3(function when(pred, whenTrueFn, x) {\n        return pred(x) ? whenTrueFn(x) : x;\n    });\n\n    /**\n     * Takes a spec object and a test object; returns true if the test satisfies\n     * the spec. Each of the spec's own properties must be a predicate function.\n     * Each predicate is applied to the value of the corresponding property of the\n     * test object. `where` returns true if all the predicates return true, false\n     * otherwise.\n     *\n     * `where` is well suited to declaratively expressing constraints for other\n     * functions such as `filter` and `find`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category Object\n     * @sig {String: (* -> Boolean)} -> {String: *} -> Boolean\n     * @param {Object} spec\n     * @param {Object} testObj\n     * @return {Boolean}\n     * @example\n     *\n     *      // pred :: Object -> Boolean\n     *      var pred = where({\n     *        a: equals('foo'),\n     *        b: complement(equals('bar')),\n     *        x: gt(__, 10),\n     *        y: lt(__, 20)\n     *      });\n     *\n     *      pred({a: 'foo', b: 'xxx', x: 11, y: 19}); //=> true\n     *      pred({a: 'xxx', b: 'xxx', x: 11, y: 19}); //=> false\n     *      pred({a: 'foo', b: 'bar', x: 11, y: 19}); //=> false\n     *      pred({a: 'foo', b: 'xxx', x: 10, y: 19}); //=> false\n     *      pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> false\n     */\n    var where = _curry2(function where(spec, testObj) {\n        for (var prop in spec) {\n            if (_has(prop, spec) && !spec[prop](testObj[prop])) {\n                return false;\n            }\n        }\n        return true;\n    });\n\n    /**\n     * Wrap a function inside another to allow you to make adjustments to the\n     * parameters, or do other processing either before the internal function is\n     * called or with its results.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (a... -> b) -> ((a... -> b) -> a... -> c) -> (a... -> c)\n     * @param {Function} fn The function to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @return {Function} The wrapped function.\n     * @deprecated since v0.22.0\n     * @example\n     *\n     *      var greet = name => 'Hello ' + name;\n     *\n     *      var shoutedGreet = R.wrap(greet, (gr, name) => gr(name).toUpperCase());\n     *\n     *      shoutedGreet(\"Kathy\"); //=> \"HELLO KATHY\"\n     *\n     *      var shortenedGreet = R.wrap(greet, function(gr, name) {\n     *        return gr(name.substring(0, 3));\n     *      });\n     *      shortenedGreet(\"Robert\"); //=> \"Hello Rob\"\n     */\n    var wrap = _curry2(function wrap(fn, wrapper) {\n        return curryN(fn.length, function () {\n            return wrapper.apply(this, _concat([fn], arguments));\n        });\n    });\n\n    /**\n     * Creates a new list out of the two supplied by creating each possible pair\n     * from the lists.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [b] -> [[a,b]]\n     * @param {Array} as The first list.\n     * @param {Array} bs The second list.\n     * @return {Array} The list made by combining each possible pair from\n     *         `as` and `bs` into pairs (`[a, b]`).\n     * @example\n     *\n     *      R.xprod([1, 2], ['a', 'b']); //=> [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]\n     */\n    // = xprodWith(prepend); (takes about 3 times as long...)\n    var xprod = _curry2(function xprod(a, b) {\n        // = xprodWith(prepend); (takes about 3 times as long...)\n        var idx = 0;\n        var ilen = a.length;\n        var j;\n        var jlen = b.length;\n        var result = [];\n        while (idx < ilen) {\n            j = 0;\n            while (j < jlen) {\n                result[result.length] = [\n                    a[idx],\n                    b[j]\n                ];\n                j += 1;\n            }\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Creates a new list out of the two supplied by pairing up equally-positioned\n     * items from both lists. The returned list is truncated to the length of the\n     * shorter of the two input lists.\n     * Note: `zip` is equivalent to `zipWith(function(a, b) { return [a, b] })`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [b] -> [[a,b]]\n     * @param {Array} list1 The first array to consider.\n     * @param {Array} list2 The second array to consider.\n     * @return {Array} The list made by pairing up same-indexed elements of `list1` and `list2`.\n     * @example\n     *\n     *      R.zip([1, 2, 3], ['a', 'b', 'c']); //=> [[1, 'a'], [2, 'b'], [3, 'c']]\n     */\n    var zip = _curry2(function zip(a, b) {\n        var rv = [];\n        var idx = 0;\n        var len = Math.min(a.length, b.length);\n        while (idx < len) {\n            rv[idx] = [\n                a[idx],\n                b[idx]\n            ];\n            idx += 1;\n        }\n        return rv;\n    });\n\n    /**\n     * Creates a new object out of a list of keys and a list of values.\n     * Key/value pairing is truncated to the length of the shorter of the two lists.\n     * Note: `zipObj` is equivalent to `pipe(zipWith(pair), fromPairs)`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig [String] -> [*] -> {String: *}\n     * @param {Array} keys The array that will be properties on the output object.\n     * @param {Array} values The list of values on the output object.\n     * @return {Object} The object made by pairing up same-indexed elements of `keys` and `values`.\n     * @example\n     *\n     *      R.zipObj(['a', 'b', 'c'], [1, 2, 3]); //=> {a: 1, b: 2, c: 3}\n     */\n    var zipObj = _curry2(function zipObj(keys, values) {\n        var idx = 0;\n        var len = Math.min(keys.length, values.length);\n        var out = {};\n        while (idx < len) {\n            out[keys[idx]] = values[idx];\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Creates a new list out of the two supplied by applying the function to each\n     * equally-positioned pair in the lists. The returned list is truncated to the\n     * length of the shorter of the two input lists.\n     *\n     * @function\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a,b -> c) -> [a] -> [b] -> [c]\n     * @param {Function} fn The function used to combine the two elements into one value.\n     * @param {Array} list1 The first array to consider.\n     * @param {Array} list2 The second array to consider.\n     * @return {Array} The list made by combining same-indexed elements of `list1` and `list2`\n     *         using `fn`.\n     * @example\n     *\n     *      var f = (x, y) => {\n     *        // ...\n     *      };\n     *      R.zipWith(f, [1, 2, 3], ['a', 'b', 'c']);\n     *      //=> [f(1, 'a'), f(2, 'b'), f(3, 'c')]\n     */\n    var zipWith = _curry3(function zipWith(fn, a, b) {\n        var rv = [];\n        var idx = 0;\n        var len = Math.min(a.length, b.length);\n        while (idx < len) {\n            rv[idx] = fn(a[idx], b[idx]);\n            idx += 1;\n        }\n        return rv;\n    });\n\n    /**\n     * A function that always returns `false`. Any passed in parameters are ignored.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Function\n     * @sig * -> Boolean\n     * @param {*}\n     * @return {Boolean}\n     * @see R.always, R.T\n     * @example\n     *\n     *      R.F(); //=> false\n     */\n    var F = always(false);\n\n    /**\n     * A function that always returns `true`. Any passed in parameters are ignored.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Function\n     * @sig * -> Boolean\n     * @param {*}\n     * @return {Boolean}\n     * @see R.always, R.F\n     * @example\n     *\n     *      R.T(); //=> true\n     */\n    var T = always(true);\n\n    /**\n     * Copies an object.\n     *\n     * @private\n     * @param {*} value The value to be copied\n     * @param {Array} refFrom Array containing the source references\n     * @param {Array} refTo Array containing the copied source references\n     * @param {Boolean} deep Whether or not to perform deep cloning.\n     * @return {*} The copied value.\n     */\n    var _clone = function _clone(value, refFrom, refTo, deep) {\n        var copy = function copy(copiedValue) {\n            var len = refFrom.length;\n            var idx = 0;\n            while (idx < len) {\n                if (value === refFrom[idx]) {\n                    return refTo[idx];\n                }\n                idx += 1;\n            }\n            refFrom[idx + 1] = value;\n            refTo[idx + 1] = copiedValue;\n            for (var key in value) {\n                copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key];\n            }\n            return copiedValue;\n        };\n        switch (type(value)) {\n        case 'Object':\n            return copy({});\n        case 'Array':\n            return copy([]);\n        case 'Date':\n            return new Date(value.valueOf());\n        case 'RegExp':\n            return _cloneRegExp(value);\n        default:\n            return value;\n        }\n    };\n\n    var _createPartialApplicator = function _createPartialApplicator(concat) {\n        return _curry2(function (fn, args) {\n            return _arity(Math.max(0, fn.length - args.length), function () {\n                return fn.apply(this, concat(args, arguments));\n            });\n        });\n    };\n\n    var _dropLast = function dropLast(n, xs) {\n        return take(n < xs.length ? xs.length - n : 0, xs);\n    };\n\n    // Values of other types are only equal if identical.\n    var _equals = function _equals(a, b, stackA, stackB) {\n        if (identical(a, b)) {\n            return true;\n        }\n        if (type(a) !== type(b)) {\n            return false;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        if (typeof a.equals === 'function' || typeof b.equals === 'function') {\n            return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);\n        }\n        switch (type(a)) {\n        case 'Arguments':\n        case 'Array':\n        case 'Object':\n            if (typeof a.constructor === 'function' && _functionName(a.constructor) === 'Promise') {\n                return a === b;\n            }\n            break;\n        case 'Boolean':\n        case 'Number':\n        case 'String':\n            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {\n                return false;\n            }\n            break;\n        case 'Date':\n            if (!identical(a.valueOf(), b.valueOf())) {\n                return false;\n            }\n            break;\n        case 'Error':\n            return a.name === b.name && a.message === b.message;\n        case 'RegExp':\n            if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {\n                return false;\n            }\n            break;\n        case 'Map':\n        case 'Set':\n            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {\n                return false;\n            }\n            break;\n        case 'Int8Array':\n        case 'Uint8Array':\n        case 'Uint8ClampedArray':\n        case 'Int16Array':\n        case 'Uint16Array':\n        case 'Int32Array':\n        case 'Uint32Array':\n        case 'Float32Array':\n        case 'Float64Array':\n            break;\n        case 'ArrayBuffer':\n            break;\n        default:\n            // Values of other types are only equal if identical.\n            return false;\n        }\n        var keysA = keys(a);\n        if (keysA.length !== keys(b).length) {\n            return false;\n        }\n        var idx = stackA.length - 1;\n        while (idx >= 0) {\n            if (stackA[idx] === a) {\n                return stackB[idx] === b;\n            }\n            idx -= 1;\n        }\n        stackA.push(a);\n        stackB.push(b);\n        idx = keysA.length - 1;\n        while (idx >= 0) {\n            var key = keysA[idx];\n            if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {\n                return false;\n            }\n            idx -= 1;\n        }\n        stackA.pop();\n        stackB.pop();\n        return true;\n    };\n\n    /**\n     * `_makeFlat` is a helper function that returns a one-level or fully recursive\n     * function based on the flag passed in.\n     *\n     * @private\n     */\n    var _makeFlat = function _makeFlat(recursive) {\n        return function flatt(list) {\n            var value, jlen, j;\n            var result = [];\n            var idx = 0;\n            var ilen = list.length;\n            while (idx < ilen) {\n                if (isArrayLike(list[idx])) {\n                    value = recursive ? flatt(list[idx]) : list[idx];\n                    j = 0;\n                    jlen = value.length;\n                    while (j < jlen) {\n                        result[result.length] = value[j];\n                        j += 1;\n                    }\n                } else {\n                    result[result.length] = list[idx];\n                }\n                idx += 1;\n            }\n            return result;\n        };\n    };\n\n    var _reduce = function () {\n        function _arrayReduce(xf, acc, list) {\n            var idx = 0;\n            var len = list.length;\n            while (idx < len) {\n                acc = xf['@@transducer/step'](acc, list[idx]);\n                if (acc && acc['@@transducer/reduced']) {\n                    acc = acc['@@transducer/value'];\n                    break;\n                }\n                idx += 1;\n            }\n            return xf['@@transducer/result'](acc);\n        }\n        function _iterableReduce(xf, acc, iter) {\n            var step = iter.next();\n            while (!step.done) {\n                acc = xf['@@transducer/step'](acc, step.value);\n                if (acc && acc['@@transducer/reduced']) {\n                    acc = acc['@@transducer/value'];\n                    break;\n                }\n                step = iter.next();\n            }\n            return xf['@@transducer/result'](acc);\n        }\n        function _methodReduce(xf, acc, obj) {\n            return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));\n        }\n        var symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\n        return function _reduce(fn, acc, list) {\n            if (typeof fn === 'function') {\n                fn = _xwrap(fn);\n            }\n            if (isArrayLike(list)) {\n                return _arrayReduce(fn, acc, list);\n            }\n            if (typeof list.reduce === 'function') {\n                return _methodReduce(fn, acc, list);\n            }\n            if (list[symIterator] != null) {\n                return _iterableReduce(fn, acc, list[symIterator]());\n            }\n            if (typeof list.next === 'function') {\n                return _iterableReduce(fn, acc, list);\n            }\n            throw new TypeError('reduce: list must be array or iterable');\n        };\n    }();\n\n    var _stepCat = function () {\n        var _stepCatArray = {\n            '@@transducer/init': Array,\n            '@@transducer/step': function (xs, x) {\n                xs.push(x);\n                return xs;\n            },\n            '@@transducer/result': _identity\n        };\n        var _stepCatString = {\n            '@@transducer/init': String,\n            '@@transducer/step': function (a, b) {\n                return a + b;\n            },\n            '@@transducer/result': _identity\n        };\n        var _stepCatObject = {\n            '@@transducer/init': Object,\n            '@@transducer/step': function (result, input) {\n                return _assign(result, isArrayLike(input) ? objOf(input[0], input[1]) : input);\n            },\n            '@@transducer/result': _identity\n        };\n        return function _stepCat(obj) {\n            if (_isTransformer(obj)) {\n                return obj;\n            }\n            if (isArrayLike(obj)) {\n                return _stepCatArray;\n            }\n            if (typeof obj === 'string') {\n                return _stepCatString;\n            }\n            if (typeof obj === 'object') {\n                return _stepCatObject;\n            }\n            throw new Error('Cannot create transformer for ' + obj);\n        };\n    }();\n\n    var _xdropLastWhile = function () {\n        function XDropLastWhile(fn, xf) {\n            this.f = fn;\n            this.retained = [];\n            this.xf = xf;\n        }\n        XDropLastWhile.prototype['@@transducer/init'] = _xfBase.init;\n        XDropLastWhile.prototype['@@transducer/result'] = function (result) {\n            this.retained = null;\n            return this.xf['@@transducer/result'](result);\n        };\n        XDropLastWhile.prototype['@@transducer/step'] = function (result, input) {\n            return this.f(input) ? this.retain(result, input) : this.flush(result, input);\n        };\n        XDropLastWhile.prototype.flush = function (result, input) {\n            result = _reduce(this.xf['@@transducer/step'], result, this.retained);\n            this.retained = [];\n            return this.xf['@@transducer/step'](result, input);\n        };\n        XDropLastWhile.prototype.retain = function (result, input) {\n            this.retained.push(input);\n            return result;\n        };\n        return _curry2(function _xdropLastWhile(fn, xf) {\n            return new XDropLastWhile(fn, xf);\n        });\n    }();\n\n    /**\n     * Creates a new list iteration function from an existing one by adding two new\n     * parameters to its callback function: the current index, and the entire list.\n     *\n     * This would turn, for instance, Ramda's simple `map` function into one that\n     * more closely resembles `Array.prototype.map`. Note that this will only work\n     * for functions in which the iteration callback function is the first\n     * parameter, and where the list is the last parameter. (This latter might be\n     * unimportant if the list parameter is not used.)\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Function\n     * @category List\n     * @sig ((a ... -> b) ... -> [a] -> *) -> (a ..., Int, [a] -> b) ... -> [a] -> *)\n     * @param {Function} fn A list iteration function that does not pass index or list to its callback\n     * @return {Function} An altered list iteration function that passes (item, index, list) to its callback\n     * @example\n     *\n     *      var mapIndexed = R.addIndex(R.map);\n     *      mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);\n     *      //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']\n     */\n    var addIndex = _curry1(function addIndex(fn) {\n        return curryN(fn.length, function () {\n            var idx = 0;\n            var origFn = arguments[0];\n            var list = arguments[arguments.length - 1];\n            var args = _slice(arguments);\n            args[0] = function () {\n                var result = origFn.apply(this, _concat(arguments, [\n                    idx,\n                    list\n                ]));\n                idx += 1;\n                return result;\n            };\n            return fn.apply(this, args);\n        });\n    });\n\n    /**\n     * Wraps a function of any arity (including nullary) in a function that accepts\n     * exactly 2 parameters. Any extraneous parameters will not be passed to the\n     * supplied function.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.2.0\n     * @category Function\n     * @sig (* -> c) -> (a, b -> c)\n     * @param {Function} fn The function to wrap.\n     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of\n     *         arity 2.\n     * @example\n     *\n     *      var takesThreeArgs = function(a, b, c) {\n     *        return [a, b, c];\n     *      };\n     *      takesThreeArgs.length; //=> 3\n     *      takesThreeArgs(1, 2, 3); //=> [1, 2, 3]\n     *\n     *      var takesTwoArgs = R.binary(takesThreeArgs);\n     *      takesTwoArgs.length; //=> 2\n     *      // Only 2 arguments are passed to the wrapped function\n     *      takesTwoArgs(1, 2, 3); //=> [1, 2, undefined]\n     */\n    var binary = _curry1(function binary(fn) {\n        return nAry(2, fn);\n    });\n\n    /**\n     * Creates a deep copy of the value which may contain (nested) `Array`s and\n     * `Object`s, `Number`s, `String`s, `Boolean`s and `Date`s. `Function`s are not\n     * copied, but assigned by their reference.\n     *\n     * Dispatches to a `clone` method if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {*} -> {*}\n     * @param {*} value The object or array to clone\n     * @return {*} A new object or array.\n     * @example\n     *\n     *      var objects = [{}, {}, {}];\n     *      var objectsClone = R.clone(objects);\n     *      objects[0] === objectsClone[0]; //=> false\n     */\n    var clone = _curry1(function clone(value) {\n        return value != null && typeof value.clone === 'function' ? value.clone() : _clone(value, [], [], true);\n    });\n\n    /**\n     * Returns a curried equivalent of the provided function. The curried function\n     * has two unusual capabilities. First, its arguments needn't be provided one\n     * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the\n     * following are equivalent:\n     *\n     *   - `g(1)(2)(3)`\n     *   - `g(1)(2, 3)`\n     *   - `g(1, 2)(3)`\n     *   - `g(1, 2, 3)`\n     *\n     * Secondly, the special placeholder value `R.__` may be used to specify\n     * \"gaps\", allowing partial application of any combination of arguments,\n     * regardless of their positions. If `g` is as above and `_` is `R.__`, the\n     * following are equivalent:\n     *\n     *   - `g(1, 2, 3)`\n     *   - `g(_, 2, 3)(1)`\n     *   - `g(_, _, 3)(1)(2)`\n     *   - `g(_, _, 3)(1, 2)`\n     *   - `g(_, 2)(1)(3)`\n     *   - `g(_, 2)(1, 3)`\n     *   - `g(_, 2)(_, 3)(1)`\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (* -> a) -> (* -> a)\n     * @param {Function} fn The function to curry.\n     * @return {Function} A new, curried function.\n     * @see R.curryN\n     * @example\n     *\n     *      var addFourNumbers = (a, b, c, d) => a + b + c + d;\n     *\n     *      var curriedAddFourNumbers = R.curry(addFourNumbers);\n     *      var f = curriedAddFourNumbers(1, 2);\n     *      var g = f(3);\n     *      g(4); //=> 10\n     */\n    var curry = _curry1(function curry(fn) {\n        return curryN(fn.length, fn);\n    });\n\n    /**\n     * Returns all but the first `n` elements of the given list, string, or\n     * transducer/transformer (or object with a `drop` method).\n     *\n     * Dispatches to the `drop` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Number -> [a] -> [a]\n     * @sig Number -> String -> String\n     * @param {Number} n\n     * @param {*} list\n     * @return {*}\n     * @see R.take, R.transduce\n     * @example\n     *\n     *      R.drop(1, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']\n     *      R.drop(2, ['foo', 'bar', 'baz']); //=> ['baz']\n     *      R.drop(3, ['foo', 'bar', 'baz']); //=> []\n     *      R.drop(4, ['foo', 'bar', 'baz']); //=> []\n     *      R.drop(3, 'ramda');               //=> 'da'\n     */\n    var drop = _curry2(_dispatchable('drop', _xdrop, function drop(n, xs) {\n        return slice(Math.max(0, n), Infinity, xs);\n    }));\n\n    /**\n     * Returns a list containing all but the last `n` elements of the given `list`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig Number -> [a] -> [a]\n     * @sig Number -> String -> String\n     * @param {Number} n The number of elements of `xs` to skip.\n     * @param {Array} xs The collection to consider.\n     * @return {Array}\n     * @see R.takeLast\n     * @example\n     *\n     *      R.dropLast(1, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']\n     *      R.dropLast(2, ['foo', 'bar', 'baz']); //=> ['foo']\n     *      R.dropLast(3, ['foo', 'bar', 'baz']); //=> []\n     *      R.dropLast(4, ['foo', 'bar', 'baz']); //=> []\n     *      R.dropLast(3, 'ramda');               //=> 'ra'\n     */\n    var dropLast = _curry2(_dispatchable('dropLast', _xdropLast, _dropLast));\n\n    /**\n     * Returns a new list excluding all the tailing elements of a given list which\n     * satisfy the supplied predicate function. It passes each value from the right\n     * to the supplied predicate function, skipping elements while the predicate\n     * function returns `true`. The predicate function is applied to one argument:\n     * *(value)*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [a]\n     * @param {Function} fn The function called per iteration.\n     * @param {Array} list The collection to iterate over.\n     * @return {Array} A new array.\n     * @see R.takeLastWhile, R.addIndex\n     * @example\n     *\n     *      var lteThree = x => x <= 3;\n     *\n     *      R.dropLastWhile(lteThree, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3, 4]\n     */\n    var dropLastWhile = _curry2(_dispatchable('dropLastWhile', _xdropLastWhile, _dropLastWhile));\n\n    /**\n     * Returns `true` if its arguments are equivalent, `false` otherwise. Handles\n     * cyclical data structures.\n     *\n     * Dispatches symmetrically to the `equals` methods of both arguments, if\n     * present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Relation\n     * @sig a -> b -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @example\n     *\n     *      R.equals(1, 1); //=> true\n     *      R.equals(1, '1'); //=> false\n     *      R.equals([1, 2, 3], [1, 2, 3]); //=> true\n     *\n     *      var a = {}; a.v = a;\n     *      var b = {}; b.v = b;\n     *      R.equals(a, b); //=> true\n     */\n    var equals = _curry2(function equals(a, b) {\n        return _equals(a, b, [], []);\n    });\n\n    /**\n     * Takes a predicate and a \"filterable\", and returns a new filterable of the\n     * same type containing the members of the given filterable which satisfy the\n     * given predicate.\n     *\n     * Dispatches to the `filter` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Filterable f => (a -> Boolean) -> f a -> f a\n     * @param {Function} pred\n     * @param {Array} filterable\n     * @return {Array}\n     * @see R.reject, R.transduce, R.addIndex\n     * @example\n     *\n     *      var isEven = n => n % 2 === 0;\n     *\n     *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]\n     *\n     *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\n     */\n    // else\n    var filter = _curry2(_dispatchable('filter', _xfilter, function (pred, filterable) {\n        return _isObject(filterable) ? _reduce(function (acc, key) {\n            if (pred(filterable[key])) {\n                acc[key] = filterable[key];\n            }\n            return acc;\n        }, {}, keys(filterable)) : // else\n        _filter(pred, filterable);\n    }));\n\n    /**\n     * Returns a new list by pulling every item out of it (and all its sub-arrays)\n     * and putting them in a new array, depth-first.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [b]\n     * @param {Array} list The array to consider.\n     * @return {Array} The flattened list.\n     * @see R.unnest\n     * @example\n     *\n     *      R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);\n     *      //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n     */\n    var flatten = _curry1(_makeFlat(true));\n\n    /**\n     * Returns a new function much like the supplied one, except that the first two\n     * arguments' order is reversed.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (a -> b -> c -> ... -> z) -> (b -> a -> c -> ... -> z)\n     * @param {Function} fn The function to invoke with its first two parameters reversed.\n     * @return {*} The result of invoking `fn` with its first two parameters' order reversed.\n     * @example\n     *\n     *      var mergeThree = (a, b, c) => [].concat(a, b, c);\n     *\n     *      mergeThree(1, 2, 3); //=> [1, 2, 3]\n     *\n     *      R.flip(mergeThree)(1, 2, 3); //=> [2, 1, 3]\n     */\n    var flip = _curry1(function flip(fn) {\n        return curry(function (a, b) {\n            var args = _slice(arguments);\n            args[0] = b;\n            args[1] = a;\n            return fn.apply(this, args);\n        });\n    });\n\n    /**\n     * Returns the first element of the given list or string. In some libraries\n     * this function is named `first`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> a | Undefined\n     * @sig String -> String\n     * @param {Array|String} list\n     * @return {*}\n     * @see R.tail, R.init, R.last\n     * @example\n     *\n     *      R.head(['fi', 'fo', 'fum']); //=> 'fi'\n     *      R.head([]); //=> undefined\n     *\n     *      R.head('abc'); //=> 'a'\n     *      R.head(''); //=> ''\n     */\n    var head = nth(0);\n\n    /**\n     * Returns all but the last element of the given list or string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category List\n     * @sig [a] -> [a]\n     * @sig String -> String\n     * @param {*} list\n     * @return {*}\n     * @see R.last, R.head, R.tail\n     * @example\n     *\n     *      R.init([1, 2, 3]);  //=> [1, 2]\n     *      R.init([1, 2]);     //=> [1]\n     *      R.init([1]);        //=> []\n     *      R.init([]);         //=> []\n     *\n     *      R.init('abc');  //=> 'ab'\n     *      R.init('ab');   //=> 'a'\n     *      R.init('a');    //=> ''\n     *      R.init('');     //=> ''\n     */\n    var init = slice(0, -1);\n\n    /**\n     * Combines two lists into a set (i.e. no duplicates) composed of those\n     * elements common to both lists. Duplication is determined according to the\n     * value returned by applying the supplied predicate to two list elements.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]\n     * @param {Function} pred A predicate function that determines whether\n     *        the two supplied elements are equal.\n     * @param {Array} list1 One list of items to compare\n     * @param {Array} list2 A second list of items to compare\n     * @return {Array} A new list containing those elements common to both lists.\n     * @see R.intersection\n     * @example\n     *\n     *      var buffaloSpringfield = [\n     *        {id: 824, name: 'Richie Furay'},\n     *        {id: 956, name: 'Dewey Martin'},\n     *        {id: 313, name: 'Bruce Palmer'},\n     *        {id: 456, name: 'Stephen Stills'},\n     *        {id: 177, name: 'Neil Young'}\n     *      ];\n     *      var csny = [\n     *        {id: 204, name: 'David Crosby'},\n     *        {id: 456, name: 'Stephen Stills'},\n     *        {id: 539, name: 'Graham Nash'},\n     *        {id: 177, name: 'Neil Young'}\n     *      ];\n     *\n     *      R.intersectionWith(R.eqBy(R.prop('id')), buffaloSpringfield, csny);\n     *      //=> [{id: 456, name: 'Stephen Stills'}, {id: 177, name: 'Neil Young'}]\n     */\n    var intersectionWith = _curry3(function intersectionWith(pred, list1, list2) {\n        var lookupList, filteredList;\n        if (list1.length > list2.length) {\n            lookupList = list1;\n            filteredList = list2;\n        } else {\n            lookupList = list2;\n            filteredList = list1;\n        }\n        var results = [];\n        var idx = 0;\n        while (idx < filteredList.length) {\n            if (_containsWith(pred, filteredList[idx], lookupList)) {\n                results[results.length] = filteredList[idx];\n            }\n            idx += 1;\n        }\n        return uniqWith(pred, results);\n    });\n\n    /**\n     * Transforms the items of the list with the transducer and appends the\n     * transformed items to the accumulator using an appropriate iterator function\n     * based on the accumulator type.\n     *\n     * The accumulator can be an array, string, object or a transformer. Iterated\n     * items will be appended to arrays and concatenated to strings. Objects will\n     * be merged directly or 2-item arrays will be merged as key, value pairs.\n     *\n     * The accumulator can also be a transformer object that provides a 2-arity\n     * reducing iterator function, step, 0-arity initial value function, init, and\n     * 1-arity result extraction function result. The step function is used as the\n     * iterator function in reduce. The result function is used to convert the\n     * final accumulator into the return type and in most cases is R.identity. The\n     * init function is used to provide the initial accumulator.\n     *\n     * The iteration is performed with R.reduce after initializing the transducer.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category List\n     * @sig a -> (b -> b) -> [c] -> a\n     * @param {*} acc The initial accumulator value.\n     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @example\n     *\n     *      var numbers = [1, 2, 3, 4];\n     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));\n     *\n     *      R.into([], transducer, numbers); //=> [2, 3]\n     *\n     *      var intoArray = R.into([]);\n     *      intoArray(transducer, numbers); //=> [2, 3]\n     */\n    var into = _curry3(function into(acc, xf, list) {\n        return _isTransformer(acc) ? _reduce(xf(acc), acc['@@transducer/init'](), list) : _reduce(xf(_stepCat(acc)), _clone(acc, [], [], false), list);\n    });\n\n    /**\n     * Same as R.invertObj, however this accounts for objects with duplicate values\n     * by putting the values into an array.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Object\n     * @sig {s: x} -> {x: [ s, ... ]}\n     * @param {Object} obj The object or array to invert\n     * @return {Object} out A new object with keys\n     * in an array.\n     * @example\n     *\n     *      var raceResultsByFirstName = {\n     *        first: 'alice',\n     *        second: 'jake',\n     *        third: 'alice',\n     *      };\n     *      R.invert(raceResultsByFirstName);\n     *      //=> { 'alice': ['first', 'third'], 'jake':['second'] }\n     */\n    var invert = _curry1(function invert(obj) {\n        var props = keys(obj);\n        var len = props.length;\n        var idx = 0;\n        var out = {};\n        while (idx < len) {\n            var key = props[idx];\n            var val = obj[key];\n            var list = _has(val, out) ? out[val] : out[val] = [];\n            list[list.length] = key;\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns a new object with the keys of the given object as values, and the\n     * values of the given object, which are coerced to strings, as keys. Note\n     * that the last key found is preferred when handling the same value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Object\n     * @sig {s: x} -> {x: s}\n     * @param {Object} obj The object or array to invert\n     * @return {Object} out A new object\n     * @example\n     *\n     *      var raceResults = {\n     *        first: 'alice',\n     *        second: 'jake'\n     *      };\n     *      R.invertObj(raceResults);\n     *      //=> { 'alice': 'first', 'jake':'second' }\n     *\n     *      // Alternatively:\n     *      var raceResults = ['alice', 'jake'];\n     *      R.invertObj(raceResults);\n     *      //=> { 'alice': '0', 'jake':'1' }\n     */\n    var invertObj = _curry1(function invertObj(obj) {\n        var props = keys(obj);\n        var len = props.length;\n        var idx = 0;\n        var out = {};\n        while (idx < len) {\n            var key = props[idx];\n            out[obj[key]] = key;\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns `true` if the given value is its type's empty value; `false`\n     * otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Logic\n     * @sig a -> Boolean\n     * @param {*} x\n     * @return {Boolean}\n     * @see R.empty\n     * @example\n     *\n     *      R.isEmpty([1, 2, 3]);   //=> false\n     *      R.isEmpty([]);          //=> true\n     *      R.isEmpty('');          //=> true\n     *      R.isEmpty(null);        //=> false\n     *      R.isEmpty({});          //=> true\n     *      R.isEmpty({length: 0}); //=> false\n     */\n    var isEmpty = _curry1(function isEmpty(x) {\n        return x != null && equals(x, empty(x));\n    });\n\n    /**\n     * Returns the last element of the given list or string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.4\n     * @category List\n     * @sig [a] -> a | Undefined\n     * @sig String -> String\n     * @param {*} list\n     * @return {*}\n     * @see R.init, R.head, R.tail\n     * @example\n     *\n     *      R.last(['fi', 'fo', 'fum']); //=> 'fum'\n     *      R.last([]); //=> undefined\n     *\n     *      R.last('abc'); //=> 'c'\n     *      R.last(''); //=> ''\n     */\n    var last = nth(-1);\n\n    /**\n     * Returns the position of the last occurrence of an item in an array, or -1 if\n     * the item is not included in the array. `R.equals` is used to determine\n     * equality.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> Number\n     * @param {*} target The item to find.\n     * @param {Array} xs The array to search in.\n     * @return {Number} the index of the target, or -1 if the target is not found.\n     * @see R.indexOf\n     * @example\n     *\n     *      R.lastIndexOf(3, [-1,3,3,0,1,2,3,4]); //=> 6\n     *      R.lastIndexOf(10, [1,2,3,4]); //=> -1\n     */\n    var lastIndexOf = _curry2(function lastIndexOf(target, xs) {\n        if (typeof xs.lastIndexOf === 'function' && !_isArray(xs)) {\n            return xs.lastIndexOf(target);\n        } else {\n            var idx = xs.length - 1;\n            while (idx >= 0) {\n                if (equals(xs[idx], target)) {\n                    return idx;\n                }\n                idx -= 1;\n            }\n            return -1;\n        }\n    });\n\n    /**\n     * Takes a function and\n     * a [functor](https://github.com/fantasyland/fantasy-land#functor),\n     * applies the function to each of the functor's values, and returns\n     * a functor of the same shape.\n     *\n     * Ramda provides suitable `map` implementations for `Array` and `Object`,\n     * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.\n     *\n     * Dispatches to the `map` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * Also treats functions as functors and will compose them together.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Functor f => (a -> b) -> f a -> f b\n     * @param {Function} fn The function to be called on every element of the input `list`.\n     * @param {Array} list The list to be iterated over.\n     * @return {Array} The new list.\n     * @see R.transduce, R.addIndex\n     * @example\n     *\n     *      var double = x => x * 2;\n     *\n     *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n     *\n     *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n     */\n    var map = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {\n        switch (Object.prototype.toString.call(functor)) {\n        case '[object Function]':\n            return curryN(functor.length, function () {\n                return fn.call(this, functor.apply(this, arguments));\n            });\n        case '[object Object]':\n            return _reduce(function (acc, key) {\n                acc[key] = fn(functor[key]);\n                return acc;\n            }, {}, keys(functor));\n        default:\n            return _map(fn, functor);\n        }\n    }));\n\n    /**\n     * An Object-specific version of `map`. The function is applied to three\n     * arguments: *(value, key, obj)*. If only the value is significant, use\n     * `map` instead.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Object\n     * @sig ((*, String, Object) -> *) -> Object -> Object\n     * @param {Function} fn\n     * @param {Object} obj\n     * @return {Object}\n     * @see R.map\n     * @example\n     *\n     *      var values = { x: 1, y: 2, z: 3 };\n     *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);\n     *\n     *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }\n     */\n    var mapObjIndexed = _curry2(function mapObjIndexed(fn, obj) {\n        return _reduce(function (acc, key) {\n            acc[key] = fn(obj[key], key, obj);\n            return acc;\n        }, {}, keys(obj));\n    });\n\n    /**\n     * Creates a new object with the own properties of the two provided objects. If\n     * a key exists in both objects, the provided function is applied to the values\n     * associated with the key in each object, with the result being used as the\n     * value associated with the key in the returned object. The key will be\n     * excluded from the returned object if the resulting value is `undefined`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Object\n     * @sig (a -> a -> a) -> {a} -> {a} -> {a}\n     * @param {Function} fn\n     * @param {Object} l\n     * @param {Object} r\n     * @return {Object}\n     * @see R.merge, R.mergeWithKey\n     * @example\n     *\n     *      R.mergeWith(R.concat,\n     *                  { a: true, values: [10, 20] },\n     *                  { b: true, values: [15, 35] });\n     *      //=> { a: true, b: true, values: [10, 20, 15, 35] }\n     */\n    var mergeWith = _curry3(function mergeWith(fn, l, r) {\n        return mergeWithKey(function (_, _l, _r) {\n            return fn(_l, _r);\n        }, l, r);\n    });\n\n    /**\n     * Takes a function `f` and a list of arguments, and returns a function `g`.\n     * When applied, `g` returns the result of applying `f` to the arguments\n     * provided initially followed by the arguments provided to `g`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Function\n     * @sig ((a, b, c, ..., n) -> x) -> [a, b, c, ...] -> ((d, e, f, ..., n) -> x)\n     * @param {Function} f\n     * @param {Array} args\n     * @return {Function}\n     * @see R.partialRight\n     * @example\n     *\n     *      var multiply = (a, b) => a * b;\n     *      var double = R.partial(multiply, [2]);\n     *      double(2); //=> 4\n     *\n     *      var greet = (salutation, title, firstName, lastName) =>\n     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\n     *\n     *      var sayHello = R.partial(greet, ['Hello']);\n     *      var sayHelloToMs = R.partial(sayHello, ['Ms.']);\n     *      sayHelloToMs('Jane', 'Jones'); //=> 'Hello, Ms. Jane Jones!'\n     */\n    var partial = _createPartialApplicator(_concat);\n\n    /**\n     * Takes a function `f` and a list of arguments, and returns a function `g`.\n     * When applied, `g` returns the result of applying `f` to the arguments\n     * provided to `g` followed by the arguments provided initially.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Function\n     * @sig ((a, b, c, ..., n) -> x) -> [d, e, f, ..., n] -> ((a, b, c, ...) -> x)\n     * @param {Function} f\n     * @param {Array} args\n     * @return {Function}\n     * @see R.partial\n     * @example\n     *\n     *      var greet = (salutation, title, firstName, lastName) =>\n     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\n     *\n     *      var greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);\n     *\n     *      greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'\n     */\n    var partialRight = _createPartialApplicator(flip(_concat));\n\n    /**\n     * Determines whether a nested path on an object has a specific value, in\n     * `R.equals` terms. Most likely used to filter a list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Relation\n     * @sig [String] -> * -> {String: *} -> Boolean\n     * @param {Array} path The path of the nested property to use\n     * @param {*} val The value to compare the nested property with\n     * @param {Object} obj The object to check the nested property in\n     * @return {Boolean} `true` if the value equals the nested object property,\n     *         `false` otherwise.\n     * @example\n     *\n     *      var user1 = { address: { zipCode: 90210 } };\n     *      var user2 = { address: { zipCode: 55555 } };\n     *      var user3 = { name: 'Bob' };\n     *      var users = [ user1, user2, user3 ];\n     *      var isFamous = R.pathEq(['address', 'zipCode'], 90210);\n     *      R.filter(isFamous, users); //=> [ user1 ]\n     */\n    var pathEq = _curry3(function pathEq(_path, val, obj) {\n        return equals(path(_path, obj), val);\n    });\n\n    /**\n     * Returns a new list by plucking the same named property off all objects in\n     * the list supplied.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig k -> [{k: v}] -> [v]\n     * @param {Number|String} key The key name to pluck off of each object.\n     * @param {Array} list The array to consider.\n     * @return {Array} The list of values for the given key.\n     * @see R.props\n     * @example\n     *\n     *      R.pluck('a')([{a: 1}, {a: 2}]); //=> [1, 2]\n     *      R.pluck(0)([[1, 2], [3, 4]]);   //=> [1, 3]\n     */\n    var pluck = _curry2(function pluck(p, list) {\n        return map(prop(p), list);\n    });\n\n    /**\n     * Reasonable analog to SQL `select` statement.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @category Relation\n     * @sig [k] -> [{k: v}] -> [{k: v}]\n     * @param {Array} props The property names to project\n     * @param {Array} objs The objects to query\n     * @return {Array} An array of objects with just the `props` properties.\n     * @example\n     *\n     *      var abby = {name: 'Abby', age: 7, hair: 'blond', grade: 2};\n     *      var fred = {name: 'Fred', age: 12, hair: 'brown', grade: 7};\n     *      var kids = [abby, fred];\n     *      R.project(['name', 'grade'], kids); //=> [{name: 'Abby', grade: 2}, {name: 'Fred', grade: 7}]\n     */\n    // passing `identity` gives correct arity\n    var project = useWith(_map, [\n        pickAll,\n        identity\n    ]);\n\n    /**\n     * Returns `true` if the specified object property is equal, in `R.equals`\n     * terms, to the given value; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig String -> a -> Object -> Boolean\n     * @param {String} name\n     * @param {*} val\n     * @param {*} obj\n     * @return {Boolean}\n     * @see R.equals, R.propSatisfies\n     * @example\n     *\n     *      var abby = {name: 'Abby', age: 7, hair: 'blond'};\n     *      var fred = {name: 'Fred', age: 12, hair: 'brown'};\n     *      var rusty = {name: 'Rusty', age: 10, hair: 'brown'};\n     *      var alois = {name: 'Alois', age: 15, disposition: 'surly'};\n     *      var kids = [abby, fred, rusty, alois];\n     *      var hasBrownHair = R.propEq('hair', 'brown');\n     *      R.filter(hasBrownHair, kids); //=> [fred, rusty]\n     */\n    var propEq = _curry3(function propEq(name, val, obj) {\n        return equals(val, obj[name]);\n    });\n\n    /**\n     * Returns a single item by iterating through the list, successively calling\n     * the iterator function and passing it an accumulator value and the current\n     * value from the array, and then passing the result to the next call.\n     *\n     * The iterator function receives two values: *(acc, value)*. It may use\n     * `R.reduced` to shortcut the iteration.\n     *\n     * Note: `R.reduce` does not skip deleted or unassigned indices (sparse\n     * arrays), unlike the native `Array.prototype.reduce` method. For more details\n     * on this behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n     *\n     * Dispatches to the `reduce` method of the third argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig ((a, b) -> a) -> a -> [b] -> a\n     * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n     *        current element from the array.\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.reduced, R.addIndex\n     * @example\n     *\n     *      var numbers = [1, 2, 3];\n     *      var plus = (a, b) => a + b;\n     *\n     *      R.reduce(plus, 10, numbers); //=> 16\n     */\n    var reduce = _curry3(_reduce);\n\n    /**\n     * Groups the elements of the list according to the result of calling\n     * the String-returning function `keyFn` on each element and reduces the elements\n     * of each group to a single value via the reducer function `valueFn`.\n     *\n     * This function is basically a more general `groupBy` function.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.20.0\n     * @category List\n     * @sig ((a, b) -> a) -> a -> (b -> String) -> [b] -> {String: a}\n     * @param {Function} valueFn The function that reduces the elements of each group to a single\n     *        value. Receives two values, accumulator for a particular group and the current element.\n     * @param {*} acc The (initial) accumulator value for each group.\n     * @param {Function} keyFn The function that maps the list's element into a key.\n     * @param {Array} list The array to group.\n     * @return {Object} An object with the output of `keyFn` for keys, mapped to the output of\n     *         `valueFn` for elements which produced that key when passed to `keyFn`.\n     * @see R.groupBy, R.reduce\n     * @example\n     *\n     *      var reduceToNamesBy = R.reduceBy((acc, student) => acc.concat(student.name), []);\n     *      var namesByGrade = reduceToNamesBy(function(student) {\n     *        var score = student.score;\n     *        return score < 65 ? 'F' :\n     *               score < 70 ? 'D' :\n     *               score < 80 ? 'C' :\n     *               score < 90 ? 'B' : 'A';\n     *      });\n     *      var students = [{name: 'Lucy', score: 92},\n     *                      {name: 'Drew', score: 85},\n     *                      // ...\n     *                      {name: 'Bart', score: 62}];\n     *      namesByGrade(students);\n     *      // {\n     *      //   'A': ['Lucy'],\n     *      //   'B': ['Drew']\n     *      //   // ...,\n     *      //   'F': ['Bart']\n     *      // }\n     */\n    var reduceBy = _curryN(4, [], _dispatchable('reduceBy', _xreduceBy, function reduceBy(valueFn, valueAcc, keyFn, list) {\n        return _reduce(function (acc, elt) {\n            var key = keyFn(elt);\n            acc[key] = valueFn(_has(key, acc) ? acc[key] : valueAcc, elt);\n            return acc;\n        }, {}, list);\n    }));\n\n    /**\n     * Like `reduce`, `reduceWhile` returns a single item by iterating through\n     * the list, successively calling the iterator function. `reduceWhile` also\n     * takes a predicate that is evaluated before each step. If the predicate returns\n     * `false`, it \"short-circuits\" the iteration and returns the current value\n     * of the accumulator.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.22.0\n     * @category List\n     * @sig ((a, b) -> Boolean) -> ((a, b) -> a) -> a -> [b] -> a\n     * @param {Function} pred The predicate. It is passed the accumulator and the\n     *        current element.\n     * @param {Function} fn The iterator function. Receives two values, the\n     *        accumulator and the current element.\n     * @param {*} a The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.reduce, R.reduced\n     * @example\n     *\n     *      var isOdd = (acc, x) => x % 2 === 1;\n     *      var xs = [1, 3, 5, 60, 777, 800];\n     *      R.reduceWhile(isOdd, R.add, 0, xs); //=> 9\n     *\n     *      var ys = [2, 4, 6]\n     *      R.reduceWhile(isOdd, R.add, 111, ys); //=> 111\n     */\n    var reduceWhile = _curryN(4, [], function _reduceWhile(pred, fn, a, list) {\n        return _reduce(function (acc, x) {\n            return pred(acc, x) ? fn(acc, x) : _reduced(acc);\n        }, a, list);\n    });\n\n    /**\n     * The complement of `filter`.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Filterable f => (a -> Boolean) -> f a -> f a\n     * @param {Function} pred\n     * @param {Array} filterable\n     * @return {Array}\n     * @see R.filter, R.transduce, R.addIndex\n     * @example\n     *\n     *      var isOdd = (n) => n % 2 === 1;\n     *\n     *      R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]\n     *\n     *      R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\n     */\n    var reject = _curry2(function reject(pred, filterable) {\n        return filter(_complement(pred), filterable);\n    });\n\n    /**\n     * Returns a fixed list of size `n` containing a specified identical value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig a -> n -> [a]\n     * @param {*} value The value to repeat.\n     * @param {Number} n The desired size of the output list.\n     * @return {Array} A new array containing `n` `value`s.\n     * @example\n     *\n     *      R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']\n     *\n     *      var obj = {};\n     *      var repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]\n     *      repeatedObjs[0] === repeatedObjs[1]; //=> true\n     */\n    var repeat = _curry2(function repeat(value, n) {\n        return times(always(value), n);\n    });\n\n    /**\n     * Adds together all the elements of a list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig [Number] -> Number\n     * @param {Array} list An array of numbers\n     * @return {Number} The sum of all the numbers in the list.\n     * @see R.reduce\n     * @example\n     *\n     *      R.sum([2,4,6,8,100,1]); //=> 121\n     */\n    var sum = reduce(add, 0);\n\n    /**\n     * Returns a new list containing the last `n` elements of the given list.\n     * If `n > list.length`, returns a list of `list.length` elements.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig Number -> [a] -> [a]\n     * @sig Number -> String -> String\n     * @param {Number} n The number of elements to return.\n     * @param {Array} xs The collection to consider.\n     * @return {Array}\n     * @see R.dropLast\n     * @example\n     *\n     *      R.takeLast(1, ['foo', 'bar', 'baz']); //=> ['baz']\n     *      R.takeLast(2, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']\n     *      R.takeLast(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\n     *      R.takeLast(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']\n     *      R.takeLast(3, 'ramda');               //=> 'mda'\n     */\n    var takeLast = _curry2(function takeLast(n, xs) {\n        return drop(n >= 0 ? xs.length - n : 0, xs);\n    });\n\n    /**\n     * Initializes a transducer using supplied iterator function. Returns a single\n     * item by iterating through the list, successively calling the transformed\n     * iterator function and passing it an accumulator value and the current value\n     * from the array, and then passing the result to the next call.\n     *\n     * The iterator function receives two values: *(acc, value)*. It will be\n     * wrapped as a transformer to initialize the transducer. A transformer can be\n     * passed directly in place of an iterator function. In both cases, iteration\n     * may be stopped early with the `R.reduced` function.\n     *\n     * A transducer is a function that accepts a transformer and returns a\n     * transformer and can be composed directly.\n     *\n     * A transformer is an an object that provides a 2-arity reducing iterator\n     * function, step, 0-arity initial value function, init, and 1-arity result\n     * extraction function, result. The step function is used as the iterator\n     * function in reduce. The result function is used to convert the final\n     * accumulator into the return type and in most cases is R.identity. The init\n     * function can be used to provide an initial accumulator, but is ignored by\n     * transduce.\n     *\n     * The iteration is performed with R.reduce after initializing the transducer.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category List\n     * @sig (c -> c) -> (a,b -> a) -> a -> [b] -> a\n     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.\n     * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n     *        current element from the array. Wrapped as transformer, if necessary, and used to\n     *        initialize the transducer\n     * @param {*} acc The initial accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.reduce, R.reduced, R.into\n     * @example\n     *\n     *      var numbers = [1, 2, 3, 4];\n     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));\n     *\n     *      R.transduce(transducer, R.flip(R.append), [], numbers); //=> [2, 3]\n     */\n    var transduce = curryN(4, function transduce(xf, fn, acc, list) {\n        return _reduce(xf(typeof fn === 'function' ? _xwrap(fn) : fn), acc, list);\n    });\n\n    /**\n     * Combines two lists into a set (i.e. no duplicates) composed of the elements\n     * of each list. Duplication is determined according to the value returned by\n     * applying the supplied predicate to two list elements.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]\n     * @param {Function} pred A predicate used to test whether two items are equal.\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The first and second lists concatenated, with\n     *         duplicates removed.\n     * @see R.union\n     * @example\n     *\n     *      var l1 = [{a: 1}, {a: 2}];\n     *      var l2 = [{a: 1}, {a: 4}];\n     *      R.unionWith(R.eqBy(R.prop('a')), l1, l2); //=> [{a: 1}, {a: 2}, {a: 4}]\n     */\n    var unionWith = _curry3(function unionWith(pred, list1, list2) {\n        return uniqWith(pred, _concat(list1, list2));\n    });\n\n    /**\n     * Takes a spec object and a test object; returns true if the test satisfies\n     * the spec, false otherwise. An object satisfies the spec if, for each of the\n     * spec's own properties, accessing that property of the object gives the same\n     * value (in `R.equals` terms) as accessing that property of the spec.\n     *\n     * `whereEq` is a specialization of [`where`](#where).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Object\n     * @sig {String: *} -> {String: *} -> Boolean\n     * @param {Object} spec\n     * @param {Object} testObj\n     * @return {Boolean}\n     * @see R.where\n     * @example\n     *\n     *      // pred :: Object -> Boolean\n     *      var pred = R.whereEq({a: 1, b: 2});\n     *\n     *      pred({a: 1});              //=> false\n     *      pred({a: 1, b: 2});        //=> true\n     *      pred({a: 1, b: 2, c: 3});  //=> true\n     *      pred({a: 1, b: 1});        //=> false\n     */\n    var whereEq = _curry2(function whereEq(spec, testObj) {\n        return where(map(equals, spec), testObj);\n    });\n\n    var _flatCat = function () {\n        var preservingReduced = function (xf) {\n            return {\n                '@@transducer/init': _xfBase.init,\n                '@@transducer/result': function (result) {\n                    return xf['@@transducer/result'](result);\n                },\n                '@@transducer/step': function (result, input) {\n                    var ret = xf['@@transducer/step'](result, input);\n                    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;\n                }\n            };\n        };\n        return function _xcat(xf) {\n            var rxf = preservingReduced(xf);\n            return {\n                '@@transducer/init': _xfBase.init,\n                '@@transducer/result': function (result) {\n                    return rxf['@@transducer/result'](result);\n                },\n                '@@transducer/step': function (result, input) {\n                    return !isArrayLike(input) ? _reduce(rxf, result, [input]) : _reduce(rxf, result, input);\n                }\n            };\n        };\n    }();\n\n    // Array.prototype.indexOf doesn't exist below IE9\n    // manually crawl the list to distinguish between +0 and -0\n    // NaN\n    // non-zero numbers can utilise Set\n    // all these types can utilise Set\n    // null can utilise Set\n    // anything else not covered above, defer to R.equals\n    var _indexOf = function _indexOf(list, a, idx) {\n        var inf, item;\n        // Array.prototype.indexOf doesn't exist below IE9\n        if (typeof list.indexOf === 'function') {\n            switch (typeof a) {\n            case 'number':\n                if (a === 0) {\n                    // manually crawl the list to distinguish between +0 and -0\n                    inf = 1 / a;\n                    while (idx < list.length) {\n                        item = list[idx];\n                        if (item === 0 && 1 / item === inf) {\n                            return idx;\n                        }\n                        idx += 1;\n                    }\n                    return -1;\n                } else if (a !== a) {\n                    // NaN\n                    while (idx < list.length) {\n                        item = list[idx];\n                        if (typeof item === 'number' && item !== item) {\n                            return idx;\n                        }\n                        idx += 1;\n                    }\n                    return -1;\n                }\n                // non-zero numbers can utilise Set\n                return list.indexOf(a, idx);\n            // all these types can utilise Set\n            case 'string':\n            case 'boolean':\n            case 'function':\n            case 'undefined':\n                return list.indexOf(a, idx);\n            case 'object':\n                if (a === null) {\n                    // null can utilise Set\n                    return list.indexOf(a, idx);\n                }\n            }\n        }\n        // anything else not covered above, defer to R.equals\n        while (idx < list.length) {\n            if (equals(list[idx], a)) {\n                return idx;\n            }\n            idx += 1;\n        }\n        return -1;\n    };\n\n    var _xchain = _curry2(function _xchain(f, xf) {\n        return map(f, _flatCat(xf));\n    });\n\n    /**\n     * Takes a list of predicates and returns a predicate that returns true for a\n     * given list of arguments if every one of the provided predicates is satisfied\n     * by those arguments.\n     *\n     * The function returned is a curried function whose arity matches that of the\n     * highest-arity predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Logic\n     * @sig [(*... -> Boolean)] -> (*... -> Boolean)\n     * @param {Array} preds\n     * @return {Function}\n     * @see R.anyPass\n     * @example\n     *\n     *      var isQueen = R.propEq('rank', 'Q');\n     *      var isSpade = R.propEq('suit', '');\n     *      var isQueenOfSpades = R.allPass([isQueen, isSpade]);\n     *\n     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> false\n     *      isQueenOfSpades({rank: 'Q', suit: ''}); //=> true\n     */\n    var allPass = _curry1(function allPass(preds) {\n        return curryN(reduce(max, 0, pluck('length', preds)), function () {\n            var idx = 0;\n            var len = preds.length;\n            while (idx < len) {\n                if (!preds[idx].apply(this, arguments)) {\n                    return false;\n                }\n                idx += 1;\n            }\n            return true;\n        });\n    });\n\n    /**\n     * Takes a list of predicates and returns a predicate that returns true for a\n     * given list of arguments if at least one of the provided predicates is\n     * satisfied by those arguments.\n     *\n     * The function returned is a curried function whose arity matches that of the\n     * highest-arity predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Logic\n     * @sig [(*... -> Boolean)] -> (*... -> Boolean)\n     * @param {Array} preds\n     * @return {Function}\n     * @see R.allPass\n     * @example\n     *\n     *      var gte = R.anyPass([R.gt, R.equals]);\n     *\n     *      gte(3, 2); //=> true\n     *      gte(2, 2); //=> true\n     *      gte(2, 3); //=> false\n     */\n    var anyPass = _curry1(function anyPass(preds) {\n        return curryN(reduce(max, 0, pluck('length', preds)), function () {\n            var idx = 0;\n            var len = preds.length;\n            while (idx < len) {\n                if (preds[idx].apply(this, arguments)) {\n                    return true;\n                }\n                idx += 1;\n            }\n            return false;\n        });\n    });\n\n    /**\n     * ap applies a list of functions to a list of values.\n     *\n     * Dispatches to the `ap` method of the second argument, if present. Also\n     * treats curried functions as applicatives.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Function\n     * @sig [a -> b] -> [a] -> [b]\n     * @sig Apply f => f (a -> b) -> f a -> f b\n     * @param {Array} fns An array of functions\n     * @param {Array} vs An array of values\n     * @return {Array} An array of results of applying each of `fns` to all of `vs` in turn.\n     * @example\n     *\n     *      R.ap([R.multiply(2), R.add(3)], [1,2,3]); //=> [2, 4, 6, 4, 5, 6]\n     */\n    // else\n    var ap = _curry2(function ap(applicative, fn) {\n        return typeof applicative.ap === 'function' ? applicative.ap(fn) : typeof applicative === 'function' ? function (x) {\n            return applicative(x)(fn(x));\n        } : // else\n        _reduce(function (acc, f) {\n            return _concat(acc, map(f, fn));\n        }, [], applicative);\n    });\n\n    /**\n     * Given a spec object recursively mapping properties to functions, creates a\n     * function producing an object of the same structure, by mapping each property\n     * to the result of calling its associated function with the supplied arguments.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.20.0\n     * @category Function\n     * @sig {k: ((a, b, ..., m) -> v)} -> ((a, b, ..., m) -> {k: v})\n     * @param {Object} spec an object recursively mapping properties to functions for\n     *        producing the values for these properties.\n     * @return {Function} A function that returns an object of the same structure\n     * as `spec', with each property set to the value returned by calling its\n     * associated function with the supplied arguments.\n     * @see R.converge, R.juxt\n     * @example\n     *\n     *      var getMetrics = R.applySpec({\n     *                                      sum: R.add,\n     *                                      nested: { mul: R.multiply }\n     *                                   });\n     *      getMetrics(2, 4); // => { sum: 6, nested: { mul: 8 } }\n     */\n    var applySpec = _curry1(function applySpec(spec) {\n        spec = map(function (v) {\n            return typeof v == 'function' ? v : applySpec(v);\n        }, spec);\n        return curryN(reduce(max, 0, pluck('length', values(spec))), function () {\n            var args = arguments;\n            return map(function (f) {\n                return apply(f, args);\n            }, spec);\n        });\n    });\n\n    /**\n     * Returns the result of calling its first argument with the remaining\n     * arguments. This is occasionally useful as a converging function for\n     * `R.converge`: the left branch can produce a function while the right branch\n     * produces a value to be passed to that function as an argument.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Function\n     * @sig (*... -> a),*... -> a\n     * @param {Function} fn The function to apply to the remaining arguments.\n     * @param {...*} args Any number of positional arguments.\n     * @return {*}\n     * @see R.apply\n     * @example\n     *\n     *      var indentN = R.pipe(R.times(R.always(' ')),\n     *                           R.join(''),\n     *                           R.replace(/^(?!$)/gm));\n     *\n     *      var format = R.converge(R.call, [\n     *                                  R.pipe(R.prop('indent'), indentN),\n     *                                  R.prop('value')\n     *                              ]);\n     *\n     *      format({indent: 2, value: 'foo\\nbar\\nbaz\\n'}); //=> '  foo\\n  bar\\n  baz\\n'\n     */\n    var call = curry(function call(fn) {\n        return fn.apply(this, _slice(arguments, 1));\n    });\n\n    /**\n     * `chain` maps a function over a list and concatenates the results. `chain`\n     * is also known as `flatMap` in some libraries\n     *\n     * Dispatches to the `chain` method of the second argument, if present,\n     * according to the [FantasyLand Chain spec](https://github.com/fantasyland/fantasy-land#chain).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig Chain m => (a -> m b) -> m a -> m b\n     * @param {Function} fn\n     * @param {Array} list\n     * @return {Array}\n     * @example\n     *\n     *      var duplicate = n => [n, n];\n     *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]\n     */\n    var chain = _curry2(_dispatchable('chain', _xchain, function chain(fn, monad) {\n        if (typeof monad === 'function') {\n            return function () {\n                return monad.call(this, fn.apply(this, arguments)).apply(this, arguments);\n            };\n        }\n        return _makeFlat(false)(map(fn, monad));\n    }));\n\n    /**\n     * Returns a function, `fn`, which encapsulates if/else-if/else logic.\n     * `R.cond` takes a list of [predicate, transform] pairs. All of the arguments\n     * to `fn` are applied to each of the predicates in turn until one returns a\n     * \"truthy\" value, at which point `fn` returns the result of applying its\n     * arguments to the corresponding transformer. If none of the predicates\n     * matches, `fn` returns undefined.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.6.0\n     * @category Logic\n     * @sig [[(*... -> Boolean),(*... -> *)]] -> (*... -> *)\n     * @param {Array} pairs\n     * @return {Function}\n     * @example\n     *\n     *      var fn = R.cond([\n     *        [R.equals(0),   R.always('water freezes at 0C')],\n     *        [R.equals(100), R.always('water boils at 100C')],\n     *        [R.T,           temp => 'nothing special happens at ' + temp + 'C']\n     *      ]);\n     *      fn(0); //=> 'water freezes at 0C'\n     *      fn(50); //=> 'nothing special happens at 50C'\n     *      fn(100); //=> 'water boils at 100C'\n     */\n    var cond = _curry1(function cond(pairs) {\n        var arity = reduce(max, 0, map(function (pair) {\n            return pair[0].length;\n        }, pairs));\n        return _arity(arity, function () {\n            var idx = 0;\n            while (idx < pairs.length) {\n                if (pairs[idx][0].apply(this, arguments)) {\n                    return pairs[idx][1].apply(this, arguments);\n                }\n                idx += 1;\n            }\n        });\n    });\n\n    /**\n     * Wraps a constructor function inside a curried function that can be called\n     * with the same arguments and returns the same type. The arity of the function\n     * returned is specified to allow using variadic constructor functions.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.4.0\n     * @category Function\n     * @sig Number -> (* -> {*}) -> (* -> {*})\n     * @param {Number} n The arity of the constructor function.\n     * @param {Function} Fn The constructor function to wrap.\n     * @return {Function} A wrapped, curried constructor function.\n     * @example\n     *\n     *      // Variadic constructor function\n     *      var Widget = () => {\n     *        this.children = Array.prototype.slice.call(arguments);\n     *        // ...\n     *      };\n     *      Widget.prototype = {\n     *        // ...\n     *      };\n     *      var allConfigs = [\n     *        // ...\n     *      ];\n     *      R.map(R.constructN(1, Widget), allConfigs); // a list of Widgets\n     */\n    var constructN = _curry2(function constructN(n, Fn) {\n        if (n > 10) {\n            throw new Error('Constructor with greater than ten arguments');\n        }\n        if (n === 0) {\n            return function () {\n                return new Fn();\n            };\n        }\n        return curry(nAry(n, function ($0, $1, $2, $3, $4, $5, $6, $7, $8, $9) {\n            switch (arguments.length) {\n            case 1:\n                return new Fn($0);\n            case 2:\n                return new Fn($0, $1);\n            case 3:\n                return new Fn($0, $1, $2);\n            case 4:\n                return new Fn($0, $1, $2, $3);\n            case 5:\n                return new Fn($0, $1, $2, $3, $4);\n            case 6:\n                return new Fn($0, $1, $2, $3, $4, $5);\n            case 7:\n                return new Fn($0, $1, $2, $3, $4, $5, $6);\n            case 8:\n                return new Fn($0, $1, $2, $3, $4, $5, $6, $7);\n            case 9:\n                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8);\n            case 10:\n                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8, $9);\n            }\n        }));\n    });\n\n    /**\n     * Accepts a converging function and a list of branching functions and returns\n     * a new function. When invoked, this new function is applied to some\n     * arguments, each branching function is applied to those same arguments. The\n     * results of each branching function are passed as arguments to the converging\n     * function to produce the return value.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.4.2\n     * @category Function\n     * @sig (x1 -> x2 -> ... -> z) -> [(a -> b -> ... -> x1), (a -> b -> ... -> x2), ...] -> (a -> b -> ... -> z)\n     * @param {Function} after A function. `after` will be invoked with the return values of\n     *        `fn1` and `fn2` as its arguments.\n     * @param {Array} functions A list of functions.\n     * @return {Function} A new function.\n     * @example\n     *\n     *      var add = (a, b) => a + b;\n     *      var multiply = (a, b) => a * b;\n     *      var subtract = (a, b) => a - b;\n     *\n     *      // multiply( add(1, 2), subtract(1, 2) );\n     *      R.converge(multiply, [add, subtract])(1, 2); //=> -3\n     *\n     *      var add3 = (a, b, c) => a + b + c;\n     *      R.converge(add3, [multiply, add, subtract])(1, 2); //=> 4\n     */\n    var converge = _curry2(function converge(after, fns) {\n        return curryN(reduce(max, 0, pluck('length', fns)), function () {\n            var args = arguments;\n            var context = this;\n            return after.apply(context, _map(function (fn) {\n                return fn.apply(context, args);\n            }, fns));\n        });\n    });\n\n    /**\n     * Counts the elements of a list according to how many match each value of a\n     * key generated by the supplied function. Returns an object mapping the keys\n     * produced by `fn` to the number of occurrences in the list. Note that all\n     * keys are coerced to strings because of how JavaScript objects work.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig (a -> String) -> [a] -> {*}\n     * @param {Function} fn The function used to map values to keys.\n     * @param {Array} list The list to count elements from.\n     * @return {Object} An object mapping keys to number of occurrences in the list.\n     * @example\n     *\n     *      var numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];\n     *      var letters = R.split('', 'abcABCaaaBBc');\n     *      R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}\n     *      R.countBy(R.toLower)(letters);   //=> {'a': 5, 'b': 4, 'c': 3}\n     */\n    var countBy = reduceBy(function (acc, elem) {\n        return acc + 1;\n    }, 0);\n\n    /**\n     * Returns a new list without any consecutively repeating elements. Equality is\n     * determined by applying the supplied predicate two consecutive elements. The\n     * first element in a series of equal element is the one being preserved.\n     *\n     * Dispatches to the `dropRepeatsWith` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category List\n     * @sig (a, a -> Boolean) -> [a] -> [a]\n     * @param {Function} pred A predicate used to test whether two items are equal.\n     * @param {Array} list The array to consider.\n     * @return {Array} `list` without repeating elements.\n     * @see R.transduce\n     * @example\n     *\n     *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];\n     *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]\n     */\n    var dropRepeatsWith = _curry2(_dispatchable('dropRepeatsWith', _xdropRepeatsWith, function dropRepeatsWith(pred, list) {\n        var result = [];\n        var idx = 1;\n        var len = list.length;\n        if (len !== 0) {\n            result[0] = list[0];\n            while (idx < len) {\n                if (!pred(last(result), list[idx])) {\n                    result[result.length] = list[idx];\n                }\n                idx += 1;\n            }\n        }\n        return result;\n    }));\n\n    /**\n     * Takes a function and two values in its domain and returns `true` if the\n     * values map to the same value in the codomain; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.18.0\n     * @category Relation\n     * @sig (a -> b) -> a -> a -> Boolean\n     * @param {Function} f\n     * @param {*} x\n     * @param {*} y\n     * @return {Boolean}\n     * @example\n     *\n     *      R.eqBy(Math.abs, 5, -5); //=> true\n     */\n    var eqBy = _curry3(function eqBy(f, x, y) {\n        return equals(f(x), f(y));\n    });\n\n    /**\n     * Reports whether two objects have the same value, in `R.equals` terms, for\n     * the specified property. Useful as a curried predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig k -> {k: v} -> {k: v} -> Boolean\n     * @param {String} prop The name of the property to compare\n     * @param {Object} obj1\n     * @param {Object} obj2\n     * @return {Boolean}\n     *\n     * @example\n     *\n     *      var o1 = { a: 1, b: 2, c: 3, d: 4 };\n     *      var o2 = { a: 10, b: 20, c: 3, d: 40 };\n     *      R.eqProps('a', o1, o2); //=> false\n     *      R.eqProps('c', o1, o2); //=> true\n     */\n    var eqProps = _curry3(function eqProps(prop, obj1, obj2) {\n        return equals(obj1[prop], obj2[prop]);\n    });\n\n    /**\n     * Splits a list into sub-lists stored in an object, based on the result of\n     * calling a String-returning function on each element, and grouping the\n     * results according to values returned.\n     *\n     * Dispatches to the `groupBy` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> String) -> [a] -> {String: [a]}\n     * @param {Function} fn Function :: a -> String\n     * @param {Array} list The array to group\n     * @return {Object} An object with the output of `fn` for keys, mapped to arrays of elements\n     *         that produced that key when passed to `fn`.\n     * @see R.transduce\n     * @example\n     *\n     *      var byGrade = R.groupBy(function(student) {\n     *        var score = student.score;\n     *        return score < 65 ? 'F' :\n     *               score < 70 ? 'D' :\n     *               score < 80 ? 'C' :\n     *               score < 90 ? 'B' : 'A';\n     *      });\n     *      var students = [{name: 'Abby', score: 84},\n     *                      {name: 'Eddy', score: 58},\n     *                      // ...\n     *                      {name: 'Jack', score: 69}];\n     *      byGrade(students);\n     *      // {\n     *      //   'A': [{name: 'Dianne', score: 99}],\n     *      //   'B': [{name: 'Abby', score: 84}]\n     *      //   // ...,\n     *      //   'F': [{name: 'Eddy', score: 58}]\n     *      // }\n     */\n    var groupBy = _curry2(_checkForMethod('groupBy', reduceBy(function (acc, item) {\n        if (acc == null) {\n            acc = [];\n        }\n        acc.push(item);\n        return acc;\n    }, null)));\n\n    /**\n     * Given a function that generates a key, turns a list of objects into an\n     * object indexing the objects by the given key. Note that if multiple\n     * objects generate the same value for the indexing key only the last value\n     * will be included in the generated object.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig (a -> String) -> [{k: v}] -> {k: {k: v}}\n     * @param {Function} fn Function :: a -> String\n     * @param {Array} array The array of objects to index\n     * @return {Object} An object indexing each array element by the given property.\n     * @example\n     *\n     *      var list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];\n     *      R.indexBy(R.prop('id'), list);\n     *      //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}\n     */\n    var indexBy = reduceBy(function (acc, elem) {\n        return elem;\n    }, null);\n\n    /**\n     * Returns the position of the first occurrence of an item in an array, or -1\n     * if the item is not included in the array. `R.equals` is used to determine\n     * equality.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> Number\n     * @param {*} target The item to find.\n     * @param {Array} xs The array to search in.\n     * @return {Number} the index of the target, or -1 if the target is not found.\n     * @see R.lastIndexOf\n     * @example\n     *\n     *      R.indexOf(3, [1,2,3,4]); //=> 2\n     *      R.indexOf(10, [1,2,3,4]); //=> -1\n     */\n    var indexOf = _curry2(function indexOf(target, xs) {\n        return typeof xs.indexOf === 'function' && !_isArray(xs) ? xs.indexOf(target) : _indexOf(xs, target, 0);\n    });\n\n    /**\n     * juxt applies a list of functions to a list of values.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Function\n     * @sig [(a, b, ..., m) -> n] -> ((a, b, ..., m) -> [n])\n     * @param {Array} fns An array of functions\n     * @return {Function} A function that returns a list of values after applying each of the original `fns` to its parameters.\n     * @see R.applySpec\n     * @example\n     *\n     *      var getRange = R.juxt([Math.min, Math.max]);\n     *      getRange(3, 4, 9, -3); //=> [-3, 9]\n     */\n    var juxt = _curry1(function juxt(fns) {\n        return converge(_arrayOf, fns);\n    });\n\n    /**\n     * Returns a lens for the given getter and setter functions. The getter \"gets\"\n     * the value of the focus; the setter \"sets\" the value of the focus. The setter\n     * should not mutate the data structure.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig (s -> a) -> ((a, s) -> s) -> Lens s a\n     * @param {Function} getter\n     * @param {Function} setter\n     * @return {Lens}\n     * @see R.view, R.set, R.over, R.lensIndex, R.lensProp\n     * @example\n     *\n     *      var xLens = R.lens(R.prop('x'), R.assoc('x'));\n     *\n     *      R.view(xLens, {x: 1, y: 2});            //=> 1\n     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}\n     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}\n     */\n    var lens = _curry2(function lens(getter, setter) {\n        return function (toFunctorFn) {\n            return function (target) {\n                return map(function (focus) {\n                    return setter(focus, target);\n                }, toFunctorFn(getter(target)));\n            };\n        };\n    });\n\n    /**\n     * Returns a lens whose focus is the specified index.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig Number -> Lens s a\n     * @param {Number} n\n     * @return {Lens}\n     * @see R.view, R.set, R.over\n     * @example\n     *\n     *      var headLens = R.lensIndex(0);\n     *\n     *      R.view(headLens, ['a', 'b', 'c']);            //=> 'a'\n     *      R.set(headLens, 'x', ['a', 'b', 'c']);        //=> ['x', 'b', 'c']\n     *      R.over(headLens, R.toUpper, ['a', 'b', 'c']); //=> ['A', 'b', 'c']\n     */\n    var lensIndex = _curry1(function lensIndex(n) {\n        return lens(nth(n), update(n));\n    });\n\n    /**\n     * Returns a lens whose focus is the specified path.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig [String] -> Lens s a\n     * @param {Array} path The path to use.\n     * @return {Lens}\n     * @see R.view, R.set, R.over\n     * @example\n     *\n     *      var xyLens = R.lensPath(['x', 'y']);\n     *\n     *      R.view(xyLens, {x: {y: 2, z: 3}});            //=> 2\n     *      R.set(xyLens, 4, {x: {y: 2, z: 3}});          //=> {x: {y: 4, z: 3}}\n     *      R.over(xyLens, R.negate, {x: {y: 2, z: 3}});  //=> {x: {y: -2, z: 3}}\n     */\n    var lensPath = _curry1(function lensPath(p) {\n        return lens(path(p), assocPath(p));\n    });\n\n    /**\n     * Returns a lens whose focus is the specified property.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Object\n     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s\n     * @sig String -> Lens s a\n     * @param {String} k\n     * @return {Lens}\n     * @see R.view, R.set, R.over\n     * @example\n     *\n     *      var xLens = R.lensProp('x');\n     *\n     *      R.view(xLens, {x: 1, y: 2});            //=> 1\n     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}\n     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}\n     */\n    var lensProp = _curry1(function lensProp(k) {\n        return lens(prop(k), assoc(k));\n    });\n\n    /**\n     * \"lifts\" a function to be the specified arity, so that it may \"map over\" that\n     * many lists, Functions or other objects that satisfy the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Function\n     * @sig Number -> (*... -> *) -> ([*]... -> [*])\n     * @param {Function} fn The function to lift into higher context\n     * @return {Function} The lifted function.\n     * @see R.lift, R.ap\n     * @example\n     *\n     *      var madd3 = R.liftN(3, R.curryN(3, (...args) => R.sum(args)));\n     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]\n     */\n    var liftN = _curry2(function liftN(arity, fn) {\n        var lifted = curryN(arity, fn);\n        return curryN(arity, function () {\n            return _reduce(ap, map(lifted, arguments[0]), _slice(arguments, 1));\n        });\n    });\n\n    /**\n     * Returns the mean of the given list of numbers.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Math\n     * @sig [Number] -> Number\n     * @param {Array} list\n     * @return {Number}\n     * @example\n     *\n     *      R.mean([2, 7, 9]); //=> 6\n     *      R.mean([]); //=> NaN\n     */\n    var mean = _curry1(function mean(list) {\n        return sum(list) / list.length;\n    });\n\n    /**\n     * Returns the median of the given list of numbers.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category Math\n     * @sig [Number] -> Number\n     * @param {Array} list\n     * @return {Number}\n     * @example\n     *\n     *      R.median([2, 9, 7]); //=> 7\n     *      R.median([7, 2, 10, 9]); //=> 8\n     *      R.median([]); //=> NaN\n     */\n    var median = _curry1(function median(list) {\n        var len = list.length;\n        if (len === 0) {\n            return NaN;\n        }\n        var width = 2 - len % 2;\n        var idx = (len - width) / 2;\n        return mean(_slice(list).sort(function (a, b) {\n            return a < b ? -1 : a > b ? 1 : 0;\n        }).slice(idx, idx + width));\n    });\n\n    /**\n     * Takes a predicate and a list or other \"filterable\" object and returns the\n     * pair of filterable objects of the same type of elements which do and do not\n     * satisfy, the predicate, respectively.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.4\n     * @category List\n     * @sig Filterable f => (a -> Boolean) -> f a -> [f a, f a]\n     * @param {Function} pred A predicate to determine which side the element belongs to.\n     * @param {Array} filterable the list (or other filterable) to partition.\n     * @return {Array} An array, containing first the subset of elements that satisfy the\n     *         predicate, and second the subset of elements that do not satisfy.\n     * @see R.filter, R.reject\n     * @example\n     *\n     *      R.partition(R.contains('s'), ['sss', 'ttt', 'foo', 'bars']);\n     *      // => [ [ 'sss', 'bars' ],  [ 'ttt', 'foo' ] ]\n     *\n     *      R.partition(R.contains('s'), { a: 'sss', b: 'ttt', foo: 'bars' });\n     *      // => [ { a: 'sss', foo: 'bars' }, { b: 'ttt' }  ]\n     */\n    var partition = juxt([\n        filter,\n        reject\n    ]);\n\n    /**\n     * Performs left-to-right function composition. The leftmost function may have\n     * any arity; the remaining functions must be unary.\n     *\n     * In some libraries this function is named `sequence`.\n     *\n     * **Note:** The result of pipe is not automatically curried.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.compose\n     * @example\n     *\n     *      var f = R.pipe(Math.pow, R.negate, R.inc);\n     *\n     *      f(3, 4); // -(3^4) + 1\n     */\n    var pipe = function pipe() {\n        if (arguments.length === 0) {\n            throw new Error('pipe requires at least one argument');\n        }\n        return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));\n    };\n\n    /**\n     * Performs left-to-right composition of one or more Promise-returning\n     * functions. The leftmost function may have any arity; the remaining functions\n     * must be unary.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Function\n     * @sig ((a -> Promise b), (b -> Promise c), ..., (y -> Promise z)) -> (a -> Promise z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.composeP\n     * @example\n     *\n     *      //  followersForUser :: String -> Promise [User]\n     *      var followersForUser = R.pipeP(db.getUserById, db.getFollowers);\n     */\n    var pipeP = function pipeP() {\n        if (arguments.length === 0) {\n            throw new Error('pipeP requires at least one argument');\n        }\n        return _arity(arguments[0].length, reduce(_pipeP, arguments[0], tail(arguments)));\n    };\n\n    /**\n     * Multiplies together all the elements of a list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Math\n     * @sig [Number] -> Number\n     * @param {Array} list An array of numbers\n     * @return {Number} The product of all the numbers in the list.\n     * @see R.reduce\n     * @example\n     *\n     *      R.product([2,4,6,8,100,1]); //=> 38400\n     */\n    var product = reduce(multiply, 1);\n\n    /**\n     * Transforms a [Traversable](https://github.com/fantasyland/fantasy-land#traversable)\n     * of [Applicative](https://github.com/fantasyland/fantasy-land#applicative) into an\n     * Applicative of Traversable.\n     *\n     * Dispatches to the `sequence` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig (Applicative f, Traversable t) => (a -> f a) -> t (f a) -> f (t a)\n     * @param {Function} of\n     * @param {*} traversable\n     * @return {*}\n     * @see R.traverse\n     * @example\n     *\n     *      R.sequence(Maybe.of, [Just(1), Just(2), Just(3)]);   //=> Just([1, 2, 3])\n     *      R.sequence(Maybe.of, [Just(1), Just(2), Nothing()]); //=> Nothing()\n     *\n     *      R.sequence(R.of, Just([1, 2, 3])); //=> [Just(1), Just(2), Just(3)]\n     *      R.sequence(R.of, Nothing());       //=> [Nothing()]\n     */\n    var sequence = _curry2(function sequence(of, traversable) {\n        return typeof traversable.sequence === 'function' ? traversable.sequence(of) : reduceRight(function (acc, x) {\n            return ap(map(prepend, x), acc);\n        }, of([]), traversable);\n    });\n\n    /**\n     * Maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning\n     * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),\n     * then uses [`sequence`](#sequence) to transform the resulting Traversable of Applicative\n     * into an Applicative of Traversable.\n     *\n     * Dispatches to the `sequence` method of the third argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig (Applicative f, Traversable t) => (a -> f a) -> (a -> f b) -> t a -> f (t b)\n     * @param {Function} of\n     * @param {Function} f\n     * @param {*} traversable\n     * @return {*}\n     * @see R.sequence\n     * @example\n     *\n     *      // Returns `Nothing` if the given divisor is `0`\n     *      safeDiv = n => d => d === 0 ? Nothing() : Just(n / d)\n     *\n     *      R.traverse(Maybe.of, safeDiv(10), [2, 4, 5]); //=> Just([5, 2.5, 2])\n     *      R.traverse(Maybe.of, safeDiv(10), [2, 0, 5]); //=> Nothing\n     */\n    var traverse = _curry3(function traverse(of, f, traversable) {\n        return sequence(of, map(f, traversable));\n    });\n\n    /**\n     * Shorthand for `R.chain(R.identity)`, which removes one level of nesting from\n     * any [Chain](https://github.com/fantasyland/fantasy-land#chain).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig Chain c => c (c a) -> c a\n     * @param {*} list\n     * @return {*}\n     * @see R.flatten, R.chain\n     * @example\n     *\n     *      R.unnest([1, [2], [[3]]]); //=> [1, 2, [3]]\n     *      R.unnest([[1, 2], [3, 4], [5, 6]]); //=> [1, 2, 3, 4, 5, 6]\n     */\n    var unnest = chain(_identity);\n\n    var _contains = function _contains(a, list) {\n        return _indexOf(list, a, 0) >= 0;\n    };\n\n    //  mapPairs :: (Object, [String]) -> [String]\n    var _toString = function _toString(x, seen) {\n        var recur = function recur(y) {\n            var xs = seen.concat([x]);\n            return _contains(y, xs) ? '<Circular>' : _toString(y, xs);\n        };\n        //  mapPairs :: (Object, [String]) -> [String]\n        var mapPairs = function (obj, keys) {\n            return _map(function (k) {\n                return _quote(k) + ': ' + recur(obj[k]);\n            }, keys.slice().sort());\n        };\n        switch (Object.prototype.toString.call(x)) {\n        case '[object Arguments]':\n            return '(function() { return arguments; }(' + _map(recur, x).join(', ') + '))';\n        case '[object Array]':\n            return '[' + _map(recur, x).concat(mapPairs(x, reject(function (k) {\n                return /^\\d+$/.test(k);\n            }, keys(x)))).join(', ') + ']';\n        case '[object Boolean]':\n            return typeof x === 'object' ? 'new Boolean(' + recur(x.valueOf()) + ')' : x.toString();\n        case '[object Date]':\n            return 'new Date(' + (isNaN(x.valueOf()) ? recur(NaN) : _quote(_toISOString(x))) + ')';\n        case '[object Null]':\n            return 'null';\n        case '[object Number]':\n            return typeof x === 'object' ? 'new Number(' + recur(x.valueOf()) + ')' : 1 / x === -Infinity ? '-0' : x.toString(10);\n        case '[object String]':\n            return typeof x === 'object' ? 'new String(' + recur(x.valueOf()) + ')' : _quote(x);\n        case '[object Undefined]':\n            return 'undefined';\n        default:\n            if (typeof x.toString === 'function') {\n                var repr = x.toString();\n                if (repr !== '[object Object]') {\n                    return repr;\n                }\n            }\n            return '{' + mapPairs(x, keys(x)).join(', ') + '}';\n        }\n    };\n\n    /**\n     * Performs right-to-left function composition. The rightmost function may have\n     * any arity; the remaining functions must be unary.\n     *\n     * **Note:** The result of compose is not automatically curried.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.pipe\n     * @example\n     *\n     *      var f = R.compose(R.inc, R.negate, Math.pow);\n     *\n     *      f(3, 4); // -(3^4) + 1\n     */\n    var compose = function compose() {\n        if (arguments.length === 0) {\n            throw new Error('compose requires at least one argument');\n        }\n        return pipe.apply(this, reverse(arguments));\n    };\n\n    /**\n     * Returns the right-to-left Kleisli composition of the provided functions,\n     * each of which must return a value of a type supported by [`chain`](#chain).\n     *\n     * `R.composeK(h, g, f)` is equivalent to `R.compose(R.chain(h), R.chain(g), R.chain(f))`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Function\n     * @sig Chain m => ((y -> m z), (x -> m y), ..., (a -> m b)) -> (m a -> m z)\n     * @param {...Function}\n     * @return {Function}\n     * @see R.pipeK\n     * @example\n     *\n     *      //  parseJson :: String -> Maybe *\n     *      //  get :: String -> Object -> Maybe *\n     *\n     *      //  getStateCode :: Maybe String -> Maybe String\n     *      var getStateCode = R.composeK(\n     *        R.compose(Maybe.of, R.toUpper),\n     *        get('state'),\n     *        get('address'),\n     *        get('user'),\n     *        parseJson\n     *      );\n     *\n     *      getStateCode(Maybe.of('{\"user\":{\"address\":{\"state\":\"ny\"}}}'));\n     *      //=> Just('NY')\n     *      getStateCode(Maybe.of('[Invalid JSON]'));\n     *      //=> Nothing()\n     */\n    var composeK = function composeK() {\n        return compose.apply(this, prepend(identity, map(chain, arguments)));\n    };\n\n    /**\n     * Performs right-to-left composition of one or more Promise-returning\n     * functions. The rightmost function may have any arity; the remaining\n     * functions must be unary.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.10.0\n     * @category Function\n     * @sig ((y -> Promise z), (x -> Promise y), ..., (a -> Promise b)) -> (a -> Promise z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.pipeP\n     * @example\n     *\n     *      //  followersForUser :: String -> Promise [User]\n     *      var followersForUser = R.composeP(db.getFollowers, db.getUserById);\n     */\n    var composeP = function composeP() {\n        if (arguments.length === 0) {\n            throw new Error('composeP requires at least one argument');\n        }\n        return pipeP.apply(this, reverse(arguments));\n    };\n\n    /**\n     * Wraps a constructor function inside a curried function that can be called\n     * with the same arguments and returns the same type.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (* -> {*}) -> (* -> {*})\n     * @param {Function} Fn The constructor function to wrap.\n     * @return {Function} A wrapped, curried constructor function.\n     * @example\n     *\n     *      // Constructor function\n     *      var Widget = config => {\n     *        // ...\n     *      };\n     *      Widget.prototype = {\n     *        // ...\n     *      };\n     *      var allConfigs = [\n     *        // ...\n     *      ];\n     *      R.map(R.construct(Widget), allConfigs); // a list of Widgets\n     */\n    var construct = _curry1(function construct(Fn) {\n        return constructN(Fn.length, Fn);\n    });\n\n    /**\n     * Returns `true` if the specified value is equal, in `R.equals` terms, to at\n     * least one element of the given list; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> Boolean\n     * @param {Object} a The item to compare against.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the item is in the list, `false` otherwise.\n     * @see R.any\n     * @example\n     *\n     *      R.contains(3, [1, 2, 3]); //=> true\n     *      R.contains(4, [1, 2, 3]); //=> false\n     *      R.contains([42], [[42]]); //=> true\n     */\n    var contains = _curry2(_contains);\n\n    /**\n     * Finds the set (i.e. no duplicates) of all elements in the first list not\n     * contained in the second list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig [*] -> [*] -> [*]\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The elements in `list1` that are not in `list2`.\n     * @see R.differenceWith, R.symmetricDifference, R.symmetricDifferenceWith\n     * @example\n     *\n     *      R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]\n     *      R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]\n     */\n    var difference = _curry2(function difference(first, second) {\n        var out = [];\n        var idx = 0;\n        var firstLen = first.length;\n        while (idx < firstLen) {\n            if (!_contains(first[idx], second) && !_contains(first[idx], out)) {\n                out[out.length] = first[idx];\n            }\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns a new list without any consecutively repeating elements. `R.equals`\n     * is used to determine equality.\n     *\n     * Dispatches to the `dropRepeats` method of the first argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category List\n     * @sig [a] -> [a]\n     * @param {Array} list The array to consider.\n     * @return {Array} `list` without repeating elements.\n     * @see R.transduce\n     * @example\n     *\n     *     R.dropRepeats([1, 1, 1, 2, 3, 4, 4, 2, 2]); //=> [1, 2, 3, 4, 2]\n     */\n    var dropRepeats = _curry1(_dispatchable('dropRepeats', _xdropRepeatsWith(equals), dropRepeatsWith(equals)));\n\n    /**\n     * \"lifts\" a function of arity > 1 so that it may \"map over\" a list, Function or other\n     * object that satisfies the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.7.0\n     * @category Function\n     * @sig (*... -> *) -> ([*]... -> [*])\n     * @param {Function} fn The function to lift into higher context\n     * @return {Function} The lifted function.\n     * @see R.liftN\n     * @example\n     *\n     *      var madd3 = R.lift(R.curry((a, b, c) => a + b + c));\n     *\n     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]\n     *\n     *      var madd5 = R.lift(R.curry((a, b, c, d, e) => a + b + c + d + e));\n     *\n     *      madd5([1,2], [3], [4, 5], [6], [7, 8]); //=> [21, 22, 22, 23, 22, 23, 23, 24]\n     */\n    var lift = _curry1(function lift(fn) {\n        return liftN(fn.length, fn);\n    });\n\n    /**\n     * Returns a partial copy of an object omitting the keys specified.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [String] -> {String: *} -> {String: *}\n     * @param {Array} names an array of String property names to omit from the new object\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with properties from `names` not on it.\n     * @see R.pick\n     * @example\n     *\n     *      R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}\n     */\n    var omit = _curry2(function omit(names, obj) {\n        var result = {};\n        for (var prop in obj) {\n            if (!_contains(prop, names)) {\n                result[prop] = obj[prop];\n            }\n        }\n        return result;\n    });\n\n    /**\n     * Returns the left-to-right Kleisli composition of the provided functions,\n     * each of which must return a value of a type supported by [`chain`](#chain).\n     *\n     * `R.pipeK(f, g, h)` is equivalent to `R.pipe(R.chain(f), R.chain(g), R.chain(h))`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category Function\n     * @sig Chain m => ((a -> m b), (b -> m c), ..., (y -> m z)) -> (m a -> m z)\n     * @param {...Function}\n     * @return {Function}\n     * @see R.composeK\n     * @example\n     *\n     *      //  parseJson :: String -> Maybe *\n     *      //  get :: String -> Object -> Maybe *\n     *\n     *      //  getStateCode :: Maybe String -> Maybe String\n     *      var getStateCode = R.pipeK(\n     *        parseJson,\n     *        get('user'),\n     *        get('address'),\n     *        get('state'),\n     *        R.compose(Maybe.of, R.toUpper)\n     *      );\n     *\n     *      getStateCode(Maybe.of('{\"user\":{\"address\":{\"state\":\"ny\"}}}'));\n     *      //=> Just('NY')\n     *      getStateCode(Maybe.of('[Invalid JSON]'));\n     *      //=> Nothing()\n     */\n    var pipeK = function pipeK() {\n        return composeK.apply(this, reverse(arguments));\n    };\n\n    /**\n     * Returns the string representation of the given value. `eval`'ing the output\n     * should result in a value equivalent to the input value. Many of the built-in\n     * `toString` methods do not satisfy this requirement.\n     *\n     * If the given value is an `[object Object]` with a `toString` method other\n     * than `Object.prototype.toString`, this method is invoked with no arguments\n     * to produce the return value. This means user-defined constructor functions\n     * can provide a suitable `toString` method. For example:\n     *\n     *     function Point(x, y) {\n     *       this.x = x;\n     *       this.y = y;\n     *     }\n     *\n     *     Point.prototype.toString = function() {\n     *       return 'new Point(' + this.x + ', ' + this.y + ')';\n     *     };\n     *\n     *     R.toString(new Point(1, 2)); //=> 'new Point(1, 2)'\n     *\n     * @func\n     * @memberOf R\n     * @since v0.14.0\n     * @category String\n     * @sig * -> String\n     * @param {*} val\n     * @return {String}\n     * @example\n     *\n     *      R.toString(42); //=> '42'\n     *      R.toString('abc'); //=> '\"abc\"'\n     *      R.toString([1, 2, 3]); //=> '[1, 2, 3]'\n     *      R.toString({foo: 1, bar: 2, baz: 3}); //=> '{\"bar\": 2, \"baz\": 3, \"foo\": 1}'\n     *      R.toString(new Date('2001-02-03T04:05:06Z')); //=> 'new Date(\"2001-02-03T04:05:06.000Z\")'\n     */\n    var toString = _curry1(function toString(val) {\n        return _toString(val, []);\n    });\n\n    /**\n     * Returns a new list without values in the first argument.\n     * `R.equals` is used to determine equality.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category List\n     * @sig [a] -> [a] -> [a]\n     * @param {Array} list1 The values to be removed from `list2`.\n     * @param {Array} list2 The array to remove values from.\n     * @return {Array} The new array without values in `list1`.\n     * @see R.transduce\n     * @example\n     *\n     *      R.without([1, 2], [1, 2, 1, 3, 4]); //=> [3, 4]\n     */\n    var without = _curry2(function (xs, list) {\n        return reject(flip(_contains)(xs), list);\n    });\n\n    // A simple Set type that honours R.equals semantics\n    /* globals Set */\n    // until we figure out why jsdoc chokes on this\n    // @param item The item to add to the Set\n    // @returns {boolean} true if the item did not exist prior, otherwise false\n    //\n    //\n    // @param item The item to check for existence in the Set\n    // @returns {boolean} true if the item exists in the Set, otherwise false\n    //\n    //\n    // Combines the logic for checking whether an item is a member of the set and\n    // for adding a new item to the set.\n    //\n    // @param item       The item to check or add to the Set instance.\n    // @param shouldAdd  If true, the item will be added to the set if it doesn't\n    //                   already exist.\n    // @param set        The set instance to check or add to.\n    // @return {boolean} true if the item already existed, otherwise false.\n    //\n    // distinguish between +0 and -0\n    // these types can all utilise the native Set\n    // set._items['boolean'] holds a two element array\n    // representing [ falseExists, trueExists ]\n    // compare functions for reference equality\n    /* falls through */\n    // reduce the search size of heterogeneous sets by creating buckets\n    // for each type.\n    // scan through all previously applied items\n    var _Set = function () {\n        function _Set() {\n            /* globals Set */\n            this._nativeSet = typeof Set === 'function' ? new Set() : null;\n            this._items = {};\n        }\n        // until we figure out why jsdoc chokes on this\n        // @param item The item to add to the Set\n        // @returns {boolean} true if the item did not exist prior, otherwise false\n        //\n        _Set.prototype.add = function (item) {\n            return !hasOrAdd(item, true, this);\n        };\n        //\n        // @param item The item to check for existence in the Set\n        // @returns {boolean} true if the item exists in the Set, otherwise false\n        //\n        _Set.prototype.has = function (item) {\n            return hasOrAdd(item, false, this);\n        };\n        //\n        // Combines the logic for checking whether an item is a member of the set and\n        // for adding a new item to the set.\n        //\n        // @param item       The item to check or add to the Set instance.\n        // @param shouldAdd  If true, the item will be added to the set if it doesn't\n        //                   already exist.\n        // @param set        The set instance to check or add to.\n        // @return {boolean} true if the item already existed, otherwise false.\n        //\n        function hasOrAdd(item, shouldAdd, set) {\n            var type = typeof item;\n            var prevSize, newSize;\n            switch (type) {\n            case 'string':\n            case 'number':\n                // distinguish between +0 and -0\n                if (item === 0 && 1 / item === -Infinity) {\n                    if (set._items['-0']) {\n                        return true;\n                    } else {\n                        if (shouldAdd) {\n                            set._items['-0'] = true;\n                        }\n                        return false;\n                    }\n                }\n                // these types can all utilise the native Set\n                if (set._nativeSet !== null) {\n                    if (shouldAdd) {\n                        prevSize = set._nativeSet.size;\n                        set._nativeSet.add(item);\n                        newSize = set._nativeSet.size;\n                        return newSize === prevSize;\n                    } else {\n                        return set._nativeSet.has(item);\n                    }\n                } else {\n                    if (!(type in set._items)) {\n                        if (shouldAdd) {\n                            set._items[type] = {};\n                            set._items[type][item] = true;\n                        }\n                        return false;\n                    } else if (item in set._items[type]) {\n                        return true;\n                    } else {\n                        if (shouldAdd) {\n                            set._items[type][item] = true;\n                        }\n                        return false;\n                    }\n                }\n            case 'boolean':\n                // set._items['boolean'] holds a two element array\n                // representing [ falseExists, trueExists ]\n                if (type in set._items) {\n                    var bIdx = item ? 1 : 0;\n                    if (set._items[type][bIdx]) {\n                        return true;\n                    } else {\n                        if (shouldAdd) {\n                            set._items[type][bIdx] = true;\n                        }\n                        return false;\n                    }\n                } else {\n                    if (shouldAdd) {\n                        set._items[type] = item ? [\n                            false,\n                            true\n                        ] : [\n                            true,\n                            false\n                        ];\n                    }\n                    return false;\n                }\n            case 'function':\n                // compare functions for reference equality\n                if (set._nativeSet !== null) {\n                    if (shouldAdd) {\n                        prevSize = set._nativeSet.size;\n                        set._nativeSet.add(item);\n                        newSize = set._nativeSet.size;\n                        return newSize > prevSize;\n                    } else {\n                        return set._nativeSet.has(item);\n                    }\n                } else {\n                    if (!(type in set._items)) {\n                        if (shouldAdd) {\n                            set._items[type] = [item];\n                        }\n                        return false;\n                    }\n                    if (!_contains(item, set._items[type])) {\n                        if (shouldAdd) {\n                            set._items[type].push(item);\n                        }\n                        return false;\n                    }\n                    return true;\n                }\n            case 'undefined':\n                if (set._items[type]) {\n                    return true;\n                } else {\n                    if (shouldAdd) {\n                        set._items[type] = true;\n                    }\n                    return false;\n                }\n            case 'object':\n                if (item === null) {\n                    if (!set._items['null']) {\n                        if (shouldAdd) {\n                            set._items['null'] = true;\n                        }\n                        return false;\n                    }\n                    return true;\n                }\n            /* falls through */\n            default:\n                // reduce the search size of heterogeneous sets by creating buckets\n                // for each type.\n                type = Object.prototype.toString.call(item);\n                if (!(type in set._items)) {\n                    if (shouldAdd) {\n                        set._items[type] = [item];\n                    }\n                    return false;\n                }\n                // scan through all previously applied items\n                if (!_contains(item, set._items[type])) {\n                    if (shouldAdd) {\n                        set._items[type].push(item);\n                    }\n                    return false;\n                }\n                return true;\n            }\n        }\n        return _Set;\n    }();\n\n    /**\n     * A function wrapping calls to the two functions in an `&&` operation,\n     * returning the result of the first function if it is false-y and the result\n     * of the second function otherwise. Note that this is short-circuited,\n     * meaning that the second function will not be invoked if the first returns a\n     * false-y value.\n     *\n     * In addition to functions, `R.both` also accepts any fantasy-land compatible\n     * applicative functor.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category Logic\n     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)\n     * @param {Function} f a predicate\n     * @param {Function} g another predicate\n     * @return {Function} a function that applies its arguments to `f` and `g` and `&&`s their outputs together.\n     * @see R.and\n     * @example\n     *\n     *      var gt10 = x => x > 10;\n     *      var even = x => x % 2 === 0;\n     *      var f = R.both(gt10, even);\n     *      f(100); //=> true\n     *      f(101); //=> false\n     */\n    var both = _curry2(function both(f, g) {\n        return _isFunction(f) ? function _both() {\n            return f.apply(this, arguments) && g.apply(this, arguments);\n        } : lift(and)(f, g);\n    });\n\n    /**\n     * Takes a function `f` and returns a function `g` such that:\n     *\n     *   - applying `g` to zero or more arguments will give __true__ if applying\n     *     the same arguments to `f` gives a logical __false__ value; and\n     *\n     *   - applying `g` to zero or more arguments will give __false__ if applying\n     *     the same arguments to `f` gives a logical __true__ value.\n     *\n     * `R.complement` will work on all other functors as well.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category Logic\n     * @sig (*... -> *) -> (*... -> Boolean)\n     * @param {Function} f\n     * @return {Function}\n     * @see R.not\n     * @example\n     *\n     *      var isEven = n => n % 2 === 0;\n     *      var isOdd = R.complement(isEven);\n     *      isOdd(21); //=> true\n     *      isOdd(42); //=> false\n     */\n    var complement = lift(not);\n\n    /**\n     * Returns the result of concatenating the given lists or strings.\n     *\n     * Note: `R.concat` expects both arguments to be of the same type,\n     * unlike the native `Array.prototype.concat` method. It will throw\n     * an error if you `concat` an Array with a non-Array value.\n     *\n     * Dispatches to the `concat` method of the first argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a] -> [a]\n     * @sig String -> String -> String\n     * @param {Array|String} a\n     * @param {Array|String} b\n     * @return {Array|String}\n     *\n     * @example\n     *\n     *      R.concat([], []); //=> []\n     *      R.concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]\n     *      R.concat('ABC', 'DEF'); // 'ABCDEF'\n     */\n    var concat = _curry2(function concat(a, b) {\n        if (a == null || !_isFunction(a.concat)) {\n            throw new TypeError(toString(a) + ' does not have a method named \"concat\"');\n        }\n        if (_isArray(a) && !_isArray(b)) {\n            throw new TypeError(toString(b) + ' is not an array');\n        }\n        return a.concat(b);\n    });\n\n    /**\n     * A function wrapping calls to the two functions in an `||` operation,\n     * returning the result of the first function if it is truth-y and the result\n     * of the second function otherwise. Note that this is short-circuited,\n     * meaning that the second function will not be invoked if the first returns a\n     * truth-y value.\n     *\n     * In addition to functions, `R.either` also accepts any fantasy-land compatible\n     * applicative functor.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category Logic\n     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)\n     * @param {Function} f a predicate\n     * @param {Function} g another predicate\n     * @return {Function} a function that applies its arguments to `f` and `g` and `||`s their outputs together.\n     * @see R.or\n     * @example\n     *\n     *      var gt10 = x => x > 10;\n     *      var even = x => x % 2 === 0;\n     *      var f = R.either(gt10, even);\n     *      f(101); //=> true\n     *      f(8); //=> true\n     */\n    var either = _curry2(function either(f, g) {\n        return _isFunction(f) ? function _either() {\n            return f.apply(this, arguments) || g.apply(this, arguments);\n        } : lift(or)(f, g);\n    });\n\n    /**\n     * Turns a named method with a specified arity into a function that can be\n     * called directly supplied with arguments and a target object.\n     *\n     * The returned function is curried and accepts `arity + 1` parameters where\n     * the final parameter is the target object.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig Number -> String -> (a -> b -> ... -> n -> Object -> *)\n     * @param {Number} arity Number of arguments the returned function should take\n     *        before the target object.\n     * @param {String} method Name of the method to call.\n     * @return {Function} A new curried function.\n     * @example\n     *\n     *      var sliceFrom = R.invoker(1, 'slice');\n     *      sliceFrom(6, 'abcdefghijklm'); //=> 'ghijklm'\n     *      var sliceFrom6 = R.invoker(2, 'slice')(6);\n     *      sliceFrom6(8, 'abcdefghijklm'); //=> 'gh'\n     */\n    var invoker = _curry2(function invoker(arity, method) {\n        return curryN(arity + 1, function () {\n            var target = arguments[arity];\n            if (target != null && _isFunction(target[method])) {\n                return target[method].apply(target, _slice(arguments, 0, arity));\n            }\n            throw new TypeError(toString(target) + ' does not have a method named \"' + method + '\"');\n        });\n    });\n\n    /**\n     * Returns a string made by inserting the `separator` between each element and\n     * concatenating all the elements into a single string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig String -> [a] -> String\n     * @param {Number|String} separator The string used to separate the elements.\n     * @param {Array} xs The elements to join into a string.\n     * @return {String} str The string made by concatenating `xs` with `separator`.\n     * @see R.split\n     * @example\n     *\n     *      var spacer = R.join(' ');\n     *      spacer(['a', 2, 3.4]);   //=> 'a 2 3.4'\n     *      R.join('|', [1, 2, 3]);    //=> '1|2|3'\n     */\n    var join = invoker(1, 'join');\n\n    /**\n     * Creates a new function that, when invoked, caches the result of calling `fn`\n     * for a given argument set and returns the result. Subsequent calls to the\n     * memoized `fn` with the same argument set will not result in an additional\n     * call to `fn`; instead, the cached result for that set of arguments will be\n     * returned.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (*... -> a) -> (*... -> a)\n     * @param {Function} fn The function to memoize.\n     * @return {Function} Memoized version of `fn`.\n     * @example\n     *\n     *      var count = 0;\n     *      var factorial = R.memoize(n => {\n     *        count += 1;\n     *        return R.product(R.range(1, n + 1));\n     *      });\n     *      factorial(5); //=> 120\n     *      factorial(5); //=> 120\n     *      factorial(5); //=> 120\n     *      count; //=> 1\n     */\n    var memoize = _curry1(function memoize(fn) {\n        var cache = {};\n        return _arity(fn.length, function () {\n            var key = toString(arguments);\n            if (!_has(key, cache)) {\n                cache[key] = fn.apply(this, arguments);\n            }\n            return cache[key];\n        });\n    });\n\n    /**\n     * Splits a string into an array of strings based on the given\n     * separator.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category String\n     * @sig (String | RegExp) -> String -> [String]\n     * @param {String|RegExp} sep The pattern.\n     * @param {String} str The string to separate into an array.\n     * @return {Array} The array of strings from `str` separated by `str`.\n     * @see R.join\n     * @example\n     *\n     *      var pathComponents = R.split('/');\n     *      R.tail(pathComponents('/usr/local/bin/node')); //=> ['usr', 'local', 'bin', 'node']\n     *\n     *      R.split('.', 'a.b.c.xyz.d'); //=> ['a', 'b', 'c', 'xyz', 'd']\n     */\n    var split = invoker(1, 'split');\n\n    /**\n     * Finds the set (i.e. no duplicates) of all elements contained in the first or\n     * second list, but not both.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Relation\n     * @sig [*] -> [*] -> [*]\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The elements in `list1` or `list2`, but not both.\n     * @see R.symmetricDifferenceWith, R.difference, R.differenceWith\n     * @example\n     *\n     *      R.symmetricDifference([1,2,3,4], [7,6,5,4,3]); //=> [1,2,7,6,5]\n     *      R.symmetricDifference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5,1,2]\n     */\n    var symmetricDifference = _curry2(function symmetricDifference(list1, list2) {\n        return concat(difference(list1, list2), difference(list2, list1));\n    });\n\n    /**\n     * Finds the set (i.e. no duplicates) of all elements contained in the first or\n     * second list, but not both. Duplication is determined according to the value\n     * returned by applying the supplied predicate to two list elements.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.19.0\n     * @category Relation\n     * @sig (a -> a -> Boolean) -> [a] -> [a] -> [a]\n     * @param {Function} pred A predicate used to test whether two items are equal.\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The elements in `list1` or `list2`, but not both.\n     * @see R.symmetricDifference, R.difference, R.differenceWith\n     * @example\n     *\n     *      var eqA = R.eqBy(R.prop('a'));\n     *      var l1 = [{a: 1}, {a: 2}, {a: 3}, {a: 4}];\n     *      var l2 = [{a: 3}, {a: 4}, {a: 5}, {a: 6}];\n     *      R.symmetricDifferenceWith(eqA, l1, l2); //=> [{a: 1}, {a: 2}, {a: 5}, {a: 6}]\n     */\n    var symmetricDifferenceWith = _curry3(function symmetricDifferenceWith(pred, list1, list2) {\n        return concat(differenceWith(pred, list1, list2), differenceWith(pred, list2, list1));\n    });\n\n    /**\n     * Determines whether a given string matches a given regular expression.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.12.0\n     * @category String\n     * @sig RegExp -> String -> Boolean\n     * @param {RegExp} pattern\n     * @param {String} str\n     * @return {Boolean}\n     * @see R.match\n     * @example\n     *\n     *      R.test(/^x/, 'xyz'); //=> true\n     *      R.test(/^y/, 'xyz'); //=> false\n     */\n    var test = _curry2(function test(pattern, str) {\n        if (!_isRegExp(pattern)) {\n            throw new TypeError('\\u2018test\\u2019 requires a value of type RegExp as its first argument; received ' + toString(pattern));\n        }\n        return _cloneRegExp(pattern).test(str);\n    });\n\n    /**\n     * The lower case version of a string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category String\n     * @sig String -> String\n     * @param {String} str The string to lower case.\n     * @return {String} The lower case version of `str`.\n     * @see R.toUpper\n     * @example\n     *\n     *      R.toLower('XYZ'); //=> 'xyz'\n     */\n    var toLower = invoker(0, 'toLowerCase');\n\n    /**\n     * The upper case version of a string.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category String\n     * @sig String -> String\n     * @param {String} str The string to upper case.\n     * @return {String} The upper case version of `str`.\n     * @see R.toLower\n     * @example\n     *\n     *      R.toUpper('abc'); //=> 'ABC'\n     */\n    var toUpper = invoker(0, 'toUpperCase');\n\n    /**\n     * Returns a new list containing only one copy of each element in the original\n     * list, based upon the value returned by applying the supplied function to\n     * each list element. Prefers the first item if the supplied function produces\n     * the same value on two items. `R.equals` is used for comparison.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.16.0\n     * @category List\n     * @sig (a -> b) -> [a] -> [a]\n     * @param {Function} fn A function used to produce a value to use during comparisons.\n     * @param {Array} list The array to consider.\n     * @return {Array} The list of unique items.\n     * @example\n     *\n     *      R.uniqBy(Math.abs, [-1, -5, 2, 10, 1, 2]); //=> [-1, -5, 2, 10]\n     */\n    var uniqBy = _curry2(function uniqBy(fn, list) {\n        var set = new _Set();\n        var result = [];\n        var idx = 0;\n        var appliedItem, item;\n        while (idx < list.length) {\n            item = list[idx];\n            appliedItem = fn(item);\n            if (set.add(appliedItem)) {\n                result.push(item);\n            }\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Returns a new list containing only one copy of each element in the original\n     * list. `R.equals` is used to determine equality.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a]\n     * @param {Array} list The array to consider.\n     * @return {Array} The list of unique items.\n     * @example\n     *\n     *      R.uniq([1, 1, 2, 1]); //=> [1, 2]\n     *      R.uniq([1, '1']);     //=> [1, '1']\n     *      R.uniq([[42], [42]]); //=> [[42]]\n     */\n    var uniq = uniqBy(identity);\n\n    /**\n     * Combines two lists into a set (i.e. no duplicates) composed of those\n     * elements common to both lists.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig [*] -> [*] -> [*]\n     * @param {Array} list1 The first list.\n     * @param {Array} list2 The second list.\n     * @return {Array} The list of elements found in both `list1` and `list2`.\n     * @see R.intersectionWith\n     * @example\n     *\n     *      R.intersection([1,2,3,4], [7,6,5,4,3]); //=> [4, 3]\n     */\n    var intersection = _curry2(function intersection(list1, list2) {\n        var lookupList, filteredList;\n        if (list1.length > list2.length) {\n            lookupList = list1;\n            filteredList = list2;\n        } else {\n            lookupList = list2;\n            filteredList = list1;\n        }\n        return uniq(_filter(flip(_contains)(lookupList), filteredList));\n    });\n\n    /**\n     * Combines two lists into a set (i.e. no duplicates) composed of the elements\n     * of each list.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Relation\n     * @sig [*] -> [*] -> [*]\n     * @param {Array} as The first list.\n     * @param {Array} bs The second list.\n     * @return {Array} The first and second lists concatenated, with\n     *         duplicates removed.\n     * @example\n     *\n     *      R.union([1, 2, 3], [2, 3, 4]); //=> [1, 2, 3, 4]\n     */\n    var union = _curry2(compose(uniq, _concat));\n\n    var R = {\n        F: F,\n        T: T,\n        __: __,\n        add: add,\n        addIndex: addIndex,\n        adjust: adjust,\n        all: all,\n        allPass: allPass,\n        always: always,\n        and: and,\n        any: any,\n        anyPass: anyPass,\n        ap: ap,\n        aperture: aperture,\n        append: append,\n        apply: apply,\n        applySpec: applySpec,\n        assoc: assoc,\n        assocPath: assocPath,\n        binary: binary,\n        bind: bind,\n        both: both,\n        call: call,\n        chain: chain,\n        clamp: clamp,\n        clone: clone,\n        comparator: comparator,\n        complement: complement,\n        compose: compose,\n        composeK: composeK,\n        composeP: composeP,\n        concat: concat,\n        cond: cond,\n        construct: construct,\n        constructN: constructN,\n        contains: contains,\n        converge: converge,\n        countBy: countBy,\n        curry: curry,\n        curryN: curryN,\n        dec: dec,\n        defaultTo: defaultTo,\n        difference: difference,\n        differenceWith: differenceWith,\n        dissoc: dissoc,\n        dissocPath: dissocPath,\n        divide: divide,\n        drop: drop,\n        dropLast: dropLast,\n        dropLastWhile: dropLastWhile,\n        dropRepeats: dropRepeats,\n        dropRepeatsWith: dropRepeatsWith,\n        dropWhile: dropWhile,\n        either: either,\n        empty: empty,\n        eqBy: eqBy,\n        eqProps: eqProps,\n        equals: equals,\n        evolve: evolve,\n        filter: filter,\n        find: find,\n        findIndex: findIndex,\n        findLast: findLast,\n        findLastIndex: findLastIndex,\n        flatten: flatten,\n        flip: flip,\n        forEach: forEach,\n        fromPairs: fromPairs,\n        groupBy: groupBy,\n        groupWith: groupWith,\n        gt: gt,\n        gte: gte,\n        has: has,\n        hasIn: hasIn,\n        head: head,\n        identical: identical,\n        identity: identity,\n        ifElse: ifElse,\n        inc: inc,\n        indexBy: indexBy,\n        indexOf: indexOf,\n        init: init,\n        insert: insert,\n        insertAll: insertAll,\n        intersection: intersection,\n        intersectionWith: intersectionWith,\n        intersperse: intersperse,\n        into: into,\n        invert: invert,\n        invertObj: invertObj,\n        invoker: invoker,\n        is: is,\n        isArrayLike: isArrayLike,\n        isEmpty: isEmpty,\n        isNil: isNil,\n        join: join,\n        juxt: juxt,\n        keys: keys,\n        keysIn: keysIn,\n        last: last,\n        lastIndexOf: lastIndexOf,\n        length: length,\n        lens: lens,\n        lensIndex: lensIndex,\n        lensPath: lensPath,\n        lensProp: lensProp,\n        lift: lift,\n        liftN: liftN,\n        lt: lt,\n        lte: lte,\n        map: map,\n        mapAccum: mapAccum,\n        mapAccumRight: mapAccumRight,\n        mapObjIndexed: mapObjIndexed,\n        match: match,\n        mathMod: mathMod,\n        max: max,\n        maxBy: maxBy,\n        mean: mean,\n        median: median,\n        memoize: memoize,\n        merge: merge,\n        mergeAll: mergeAll,\n        mergeWith: mergeWith,\n        mergeWithKey: mergeWithKey,\n        min: min,\n        minBy: minBy,\n        modulo: modulo,\n        multiply: multiply,\n        nAry: nAry,\n        negate: negate,\n        none: none,\n        not: not,\n        nth: nth,\n        nthArg: nthArg,\n        objOf: objOf,\n        of: of,\n        omit: omit,\n        once: once,\n        or: or,\n        over: over,\n        pair: pair,\n        partial: partial,\n        partialRight: partialRight,\n        partition: partition,\n        path: path,\n        pathEq: pathEq,\n        pathOr: pathOr,\n        pathSatisfies: pathSatisfies,\n        pick: pick,\n        pickAll: pickAll,\n        pickBy: pickBy,\n        pipe: pipe,\n        pipeK: pipeK,\n        pipeP: pipeP,\n        pluck: pluck,\n        prepend: prepend,\n        product: product,\n        project: project,\n        prop: prop,\n        propEq: propEq,\n        propIs: propIs,\n        propOr: propOr,\n        propSatisfies: propSatisfies,\n        props: props,\n        range: range,\n        reduce: reduce,\n        reduceBy: reduceBy,\n        reduceRight: reduceRight,\n        reduceWhile: reduceWhile,\n        reduced: reduced,\n        reject: reject,\n        remove: remove,\n        repeat: repeat,\n        replace: replace,\n        reverse: reverse,\n        scan: scan,\n        sequence: sequence,\n        set: set,\n        slice: slice,\n        sort: sort,\n        sortBy: sortBy,\n        split: split,\n        splitAt: splitAt,\n        splitEvery: splitEvery,\n        splitWhen: splitWhen,\n        subtract: subtract,\n        sum: sum,\n        symmetricDifference: symmetricDifference,\n        symmetricDifferenceWith: symmetricDifferenceWith,\n        tail: tail,\n        take: take,\n        takeLast: takeLast,\n        takeLastWhile: takeLastWhile,\n        takeWhile: takeWhile,\n        tap: tap,\n        test: test,\n        times: times,\n        toLower: toLower,\n        toPairs: toPairs,\n        toPairsIn: toPairsIn,\n        toString: toString,\n        toUpper: toUpper,\n        transduce: transduce,\n        transpose: transpose,\n        traverse: traverse,\n        trim: trim,\n        tryCatch: tryCatch,\n        type: type,\n        unapply: unapply,\n        unary: unary,\n        uncurryN: uncurryN,\n        unfold: unfold,\n        union: union,\n        unionWith: unionWith,\n        uniq: uniq,\n        uniqBy: uniqBy,\n        uniqWith: uniqWith,\n        unless: unless,\n        unnest: unnest,\n        until: until,\n        update: update,\n        useWith: useWith,\n        values: values,\n        valuesIn: valuesIn,\n        view: view,\n        when: when,\n        where: where,\n        whereEq: whereEq,\n        without: without,\n        wrap: wrap,\n        xprod: xprod,\n        zip: zip,\n        zipObj: zipObj,\n        zipWith: zipWith\n    };\n  /* eslint-env amd */\n\n  /* TEST_ENTRY_POINT */\n\n  if (typeof exports === 'object') {\n    module.exports = R;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function() { return R; });\n  } else {\n    this.R = R;\n  }\n\n}.call(this));\n\n},{}],194:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_duplex.js\")\n\n},{\"./lib/_stream_duplex.js\":195}],195:[function(require,module,exports){\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nvar keys = objectKeys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  processNextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n},{\"./_stream_readable\":197,\"./_stream_writable\":199,\"core-util-is\":116,\"inherits\":173,\"process-nextick-args\":191}],196:[function(require,module,exports){\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n},{\"./_stream_transform\":198,\"core-util-is\":116,\"inherits\":173}],197:[function(require,module,exports){\n(function (process){\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream;\n(function () {\n  try {\n    Stream = require('st' + 'ream');\n  } catch (_) {} finally {\n    if (!Stream) Stream = require('events').EventEmitter;\n  }\n})();\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nfunction prependListener(emitter, event, fn) {\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\n\nvar Duplex;\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nvar Duplex;\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options && typeof options.read === 'function') this._read = options.read;\n\n  Stream.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n\n  if (!state.objectMode && typeof chunk === 'string') {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = bufferShim.from(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var _e = new Error('stream.unshift() after end event');\n      stream.emit('error', _e);\n    } else {\n      var skipAdd;\n      if (state.decoder && !addToFront && !encoding) {\n        chunk = state.decoder.write(chunk);\n        skipAdd = !state.objectMode && chunk.length === 0;\n      }\n\n      if (!addToFront) state.reading = false;\n\n      // Don't add to the buffer if we've decoded to an empty string chunk and\n      // we're not in object mode\n      if (!skipAdd) {\n        // if we want the data now, just emit it.\n        if (state.flowing && state.length === 0 && !state.sync) {\n          stream.emit('data', chunk);\n          stream.read(0);\n        } else {\n          // update the buffer info.\n          state.length += state.objectMode ? 1 : chunk.length;\n          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n          if (state.needReadable) emitReadable(stream);\n        }\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    processNextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var _i = 0; _i < len; _i++) {\n      dests[_i].emit('unpipe', this);\n    }return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1) return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        processNextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    processNextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function (ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = bufferShim.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    processNextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n}).call(this,require('_process'))\n},{\"./_stream_duplex\":195,\"./internal/streams/BufferList\":200,\"_process\":113,\"buffer\":115,\"buffer-shims\":114,\"core-util-is\":116,\"events\":148,\"inherits\":173,\"isarray\":176,\"process-nextick-args\":191,\"string_decoder/\":213,\"util\":110}],198:[function(require,module,exports){\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er) {\n      done(stream, er);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('Not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nfunction done(stream, er) {\n  if (er) return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n},{\"./_stream_duplex\":195,\"core-util-is\":116,\"inherits\":173}],199:[function(require,module,exports){\n(function (process){\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream;\n(function () {\n  try {\n    Stream = require('st' + 'ream');\n  } catch (_) {} finally {\n    if (!Stream) Stream = require('events').EventEmitter;\n  }\n})();\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\nvar Duplex;\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function writableStateGetBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')\n    });\n  } catch (_) {}\n})();\n\nvar Duplex;\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  processNextTick(cb, er);\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n  // Always throw error if a null is written\n  // if we are not in object mode then throw\n  // if it is not a buffer, string, or undefined.\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    processNextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = bufferShim.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) processNextTick(cb, er);else cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n        afterWrite(stream, state, finished, cb);\n      }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    while (entry) {\n      buffer[count] = entry;\n      entry = entry.next;\n      count += 1;\n    }\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else {\n      prefinish(stream, state);\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) processNextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function (err) {\n    var entry = _this.entry;\n    _this.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = _this;\n    } else {\n      state.corkedRequestsFree = _this;\n    }\n  };\n}\n}).call(this,require('_process'))\n},{\"./_stream_duplex\":195,\"_process\":113,\"buffer\":115,\"buffer-shims\":114,\"core-util-is\":116,\"events\":148,\"inherits\":173,\"process-nextick-args\":191,\"util-deprecate\":219}],200:[function(require,module,exports){\n'use strict';\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\nmodule.exports = BufferList;\n\nfunction BufferList() {\n  this.head = null;\n  this.tail = null;\n  this.length = 0;\n}\n\nBufferList.prototype.push = function (v) {\n  var entry = { data: v, next: null };\n  if (this.length > 0) this.tail.next = entry;else this.head = entry;\n  this.tail = entry;\n  ++this.length;\n};\n\nBufferList.prototype.unshift = function (v) {\n  var entry = { data: v, next: this.head };\n  if (this.length === 0) this.tail = entry;\n  this.head = entry;\n  ++this.length;\n};\n\nBufferList.prototype.shift = function () {\n  if (this.length === 0) return;\n  var ret = this.head.data;\n  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n  --this.length;\n  return ret;\n};\n\nBufferList.prototype.clear = function () {\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nBufferList.prototype.join = function (s) {\n  if (this.length === 0) return '';\n  var p = this.head;\n  var ret = '' + p.data;\n  while (p = p.next) {\n    ret += s + p.data;\n  }return ret;\n};\n\nBufferList.prototype.concat = function (n) {\n  if (this.length === 0) return bufferShim.alloc(0);\n  if (this.length === 1) return this.head.data;\n  var ret = bufferShim.allocUnsafe(n >>> 0);\n  var p = this.head;\n  var i = 0;\n  while (p) {\n    p.data.copy(ret, i);\n    i += p.data.length;\n    p = p.next;\n  }\n  return ret;\n};\n},{\"buffer\":115,\"buffer-shims\":114}],201:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_passthrough.js\")\n\n},{\"./lib/_stream_passthrough.js\":196}],202:[function(require,module,exports){\n(function (process){\nvar Stream = (function (){\n  try {\n    return require('st' + 'ream'); // hack to fix a circular dependency issue when used with browserify\n  } catch(_){}\n}());\nexports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = Stream || exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n\nif (!process.browser && process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream;\n}\n\n}).call(this,require('_process'))\n},{\"./lib/_stream_duplex.js\":195,\"./lib/_stream_passthrough.js\":196,\"./lib/_stream_readable.js\":197,\"./lib/_stream_transform.js\":198,\"./lib/_stream_writable.js\":199,\"_process\":113}],203:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_transform.js\")\n\n},{\"./lib/_stream_transform.js\":198}],204:[function(require,module,exports){\nmodule.exports = require(\"./lib/_stream_writable.js\")\n\n},{\"./lib/_stream_writable.js\":199}],205:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n},{\"./compose\":208}],206:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n},{}],207:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nvar _createStore = require('./createStore');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!(0, _isPlainObject2['default'])(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerSanity(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        (0, _warning2['default'])('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var unexpectedKeyCache = {};\n  }\n\n  var sanityError;\n  try {\n    assertReducerSanity(finalReducers);\n  } catch (e) {\n    sanityError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var action = arguments[1];\n\n    if (sanityError) {\n      throw sanityError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        (0, _warning2['default'])(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i];\n      var reducer = finalReducers[key];\n      var previousStateForKey = state[key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n}).call(this,require('_process'))\n},{\"./createStore\":209,\"./utils/warning\":211,\"_process\":113,\"lodash/isPlainObject\":186}],208:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  var last = funcs[funcs.length - 1];\n  var rest = funcs.slice(0, -1);\n  return function () {\n    return rest.reduceRight(function (composed, f) {\n      return f(composed);\n    }, last.apply(undefined, arguments));\n  };\n}\n},{}],209:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports.ActionTypes = undefined;\nexports['default'] = createStore;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _symbolObservable = require('symbol-observable');\n\nvar _symbolObservable2 = _interopRequireDefault(_symbolObservable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = exports.ActionTypes = {\n  INIT: '@@redux/INIT'\n};\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} enhancer The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!(0, _isPlainObject2['default'])(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i]();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/zenparsing/es-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[_symbolObservable2['default']] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[_symbolObservable2['default']] = observable, _ref2;\n}\n},{\"lodash/isPlainObject\":186,\"symbol-observable\":214}],210:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports.compose = exports.applyMiddleware = exports.bindActionCreators = exports.combineReducers = exports.createStore = undefined;\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  (0, _warning2['default'])('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];\n}).call(this,require('_process'))\n},{\"./applyMiddleware\":205,\"./bindActionCreators\":206,\"./combineReducers\":207,\"./compose\":208,\"./createStore\":209,\"./utils/warning\":211,\"_process\":113}],211:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = warning;\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}\n},{}],212:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\n},{\"events\":148,\"inherits\":173,\"readable-stream/duplex.js\":194,\"readable-stream/passthrough.js\":201,\"readable-stream/readable.js\":202,\"readable-stream/transform.js\":203,\"readable-stream/writable.js\":204}],213:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n\n},{\"buffer\":115}],214:[function(require,module,exports){\nmodule.exports = require('./lib/index');\n\n},{\"./lib/index\":215}],215:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _ponyfill = require('./ponyfill');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root = undefined; /* global window */\n\nif (typeof global !== 'undefined') {\n\troot = global;\n} else if (typeof window !== 'undefined') {\n\troot = window;\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./ponyfill\":216}],216:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n},{}],217:[function(require,module,exports){\nmodule.exports = /*process.env.TYPR_COV\n  ? require('./lib-cov/typr.js')\n  :*/ require('./lib/typr.js');\n\n},{\"./lib/typr.js\":218}],218:[function(require,module,exports){\nvar toStr = Object.prototype.toString\n  , t = {};\n\n['Function', 'Object', 'Date', 'Number', 'String', 'Boolean', 'RegExp', 'Arguments']\n.forEach(function (type) {\n  var expected = '[object ' + type + ']';\n  t['is' + type] = function (o) {\n    return toStr.call(o) === expected;\n  };\n});\n\nt.isArray = Array.isArray;\nt.isNaN = Number.isNaN;\nt.isNumeric = Number.isFinite;\n\nt.isInfinite = function (n) {\n  return Math.abs(n) === Infinity;\n};\n\nt.isNull = function (o) {\n  return o === null;\n};\n\nt.isUndefined = function (o) {\n  var undef;\n  return o === undef;\n};\n\nt.hasKeys = function (o) {\n  return Object(o) === o;\n};\n\nmodule.exports = t;\n\n},{}],219:[function(require,module,exports){\n(function (global){\n\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],220:[function(require,module,exports){\narguments[4][173][0].apply(exports,arguments)\n},{\"dup\":173}],221:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],222:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./support/isBuffer\":221,\"_process\":113,\"inherits\":220}],223:[function(require,module,exports){\n'use strict';\n\nvar types = require('./types');\nvar VirtualNode = require('virtual-dom/vnode/vnode');\nvar VirtualText = require('virtual-dom/vnode/vtext');\nvar VirtualPatch = require('virtual-dom/vnode/vpatch');\nvar SoftSetHook =\n  require('virtual-dom/virtual-hyperscript/hooks/soft-set-hook');\n\nfunction arrayFromJson(json) {\n  var len = json.length;\n  var i = -1;\n  var res = new Array(len);\n  while (++i < len) {\n    res[i] = fromJson(json[i]);\n  }\n  return res;\n}\n\nfunction plainObjectFromJson(json) {\n  var res = {};\n  /* jshint -W089 */\n  /* this is fine; these objects are always plain */\n  for (var key in json) {\n    var val = json[key];\n    res[key] = typeof val !== 'undefined' ? fromJson(val) : val;\n  }\n  return res;\n}\n\nfunction virtualNodeFromJson(json) {\n  return new VirtualNode(json.tn,\n    json.p ? plainObjectFromJson(json.p) : {}, // patch\n    json.c ? arrayFromJson(json.c) : [], // children\n    json.k, // key\n    json.n); // namespace\n}\n\nfunction virtualTextFromJson(json) {\n  return new VirtualText(json.x);\n}\n\nfunction virtualPatchFromJson(json) {\n  return new VirtualPatch(\n    json.pt, // patchType\n    json.v ? fromJson(json.v) : null, // virtualNode\n    json.p && fromJson(json.p) // patch\n  );\n}\n\nfunction softSetHookFromJson(json) {\n  return new SoftSetHook(json.value);\n}\n\nfunction objectFromJson(json) {\n  switch (json.t) { // type\n    case types.VirtualPatch:\n      return virtualPatchFromJson(json);\n    case types.VirtualNode:\n      return virtualNodeFromJson(json);\n    case types.VirtualTree:\n      return virtualTextFromJson(json);\n    case types.SoftSetHook:\n      return softSetHookFromJson(json);\n  }\n  return plainObjectFromJson(json);\n}\n\nfunction fromJson(json) {\n  var type = typeof json;\n\n  switch (type) {\n    case 'string':\n    case 'boolean':\n    case 'number':\n      return json;\n  }\n\n  // type === 'object'\n\n  if (Array.isArray(json)) {\n    return arrayFromJson(json);\n  }\n\n  if (!json) { // null\n    return null;\n  }\n\n  return objectFromJson(json);\n}\n\nmodule.exports = fromJson;\n},{\"./types\":226,\"virtual-dom/virtual-hyperscript/hooks/soft-set-hook\":241,\"virtual-dom/vnode/vnode\":251,\"virtual-dom/vnode/vpatch\":252,\"virtual-dom/vnode/vtext\":253}],224:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  fromJson: require('./fromJson'),\n  toJson: require('./toJson')\n};\n},{\"./fromJson\":223,\"./toJson\":225}],225:[function(require,module,exports){\n'use strict';\n\nvar types = require('./types');\n\nvar SoftSetHook =\n  require('virtual-dom/virtual-hyperscript/hooks/soft-set-hook');\n\nfunction arrayToJson(arr) {\n  var len = arr.length;\n  var i = -1;\n  var res = new Array(len);\n  while (++i < len) {\n    res[i] = toJson(arr[i]);\n  }\n  return res;\n}\n\nfunction plainObjectToJson(obj) {\n  var res = {};\n  /* jshint -W089 */\n  /* this is fine; these objects are always plain */\n  for (var key in obj) {\n    var val = obj[key];\n    res[key] = typeof val !== 'undefined' ? toJson(val) : val;\n  }\n  return res;\n}\n\nfunction virtualNodeToJson(obj) {\n  var res = {\n    // type\n    t: types.VirtualNode,\n    tn: obj.tagName\n  };\n  if (Object.keys(obj.properties).length) {\n    res.p = plainObjectToJson(obj.properties);\n  }\n  if (obj.children.length) {\n    res.c = arrayToJson(obj.children);\n  }\n  if (obj.key) {\n    res.k = obj.key;\n  }\n  if (obj.namespace) {\n    res.n = obj.namespace;\n  }\n  return res;\n}\n\nfunction virtualTextToJson(obj) {\n  return {\n    // type\n    t: types.VirtualTree,\n    // text\n    x: obj.text\n  };\n}\n\nfunction virtualPatchToJson(obj) {\n  var res = {\n    // type\n    t: types.VirtualPatch,\n    // patch type\n    pt: obj.type\n  };\n\n  if (obj.vNode) {\n    res.v = toJson(obj.vNode);\n  }\n\n  if (obj.patch) {\n    res.p = toJson(obj.patch);\n  }\n\n  return res;\n}\n\nfunction softSetHookToJson(obj) {\n  return {\n    // type\n    t: types.SoftSetHook,\n    value: obj.value\n  };\n}\n\nfunction objectToJson(obj) {\n  if ('patch' in obj && typeof obj.type === 'number') {\n    return virtualPatchToJson(obj);\n  }\n  if (obj.type === 'VirtualNode') {\n    return virtualNodeToJson(obj);\n  }\n  if (obj.type === 'VirtualText') {\n    return virtualTextToJson(obj);\n  }\n  if (obj instanceof SoftSetHook) {\n    return softSetHookToJson(obj);\n  }\n\n  // plain object\n  return plainObjectToJson(obj);\n}\n\nfunction toJson(obj) {\n\n  var type = typeof obj;\n\n  switch (type) {\n    case 'string':\n    case 'boolean':\n    case 'number':\n      return obj;\n  }\n\n  // type === 'object'\n  if (Array.isArray(obj)) {\n    return arrayToJson(obj);\n  }\n\n  if (!obj) { // null\n    return null;\n  }\n\n  return objectToJson(obj);\n}\n\nmodule.exports = toJson;\n},{\"./types\":226,\"virtual-dom/virtual-hyperscript/hooks/soft-set-hook\":241}],226:[function(require,module,exports){\nmodule.exports = {\n  VirtualTree: 1,\n  VirtualPatch: 2,\n  VirtualNode: 3,\n  SoftSetHook: 4\n};\n},{}],227:[function(require,module,exports){\n\n/**\n * index.js\n *\n * A client-side DOM to vdom parser based on DOMParser API\n */\n\n'use strict';\n\nvar VNode = require('virtual-dom/vnode/vnode');\nvar VText = require('virtual-dom/vnode/vtext');\nvar domParser;\n\nvar propertyMap = require('./property-map');\nvar namespaceMap = require('./namespace-map');\n\nvar HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nmodule.exports = parser;\n\n/**\n * DOM/html string to vdom parser\n *\n * @param   Mixed   el    DOM element or html string\n * @param   String  attr  Attribute name that contains vdom key\n * @return  Object        VNode or VText\n */\nfunction parser(el, attr) {\n\t// empty input fallback to empty text node\n\tif (!el) {\n\t\treturn createNode(document.createTextNode(''));\n\t}\n\n\tif (typeof el === 'string') {\n\t\tif ( !('DOMParser' in window) ) {\n\t\t\tthrow new Error('DOMParser is not available, so parsing string to DOM node is not possible.');\n\t\t}\n\t\tdomParser = domParser || new DOMParser();\n\t\tvar doc = domParser.parseFromString(el, 'text/html');\n\n\t\t// most tags default to body\n\t\tif (doc.body.firstChild) {\n\t\t\tel = doc.getElementsByTagName('body')[0].firstChild;\n\n\t\t// some tags, like script and style, default to head\n\t\t} else if (doc.head.firstChild && (doc.head.firstChild.tagName !== 'TITLE' || doc.title)) {\n\t\t\tel = doc.head.firstChild;\n\n\t\t// special case for html comment, cdata, doctype\n\t\t} else if (doc.firstChild && doc.firstChild.tagName !== 'HTML') {\n\t\t\tel = doc.firstChild;\n\n\t\t// other element, such as whitespace, or html/body/head tag, fallback to empty text node\n\t\t} else {\n\t\t\tel = document.createTextNode('');\n\t\t}\n\t}\n\n\tif (typeof el !== 'object' || !el || !el.nodeType) {\n\t\tthrow new Error('invalid dom node', el);\n\t}\n\n\treturn createNode(el, attr);\n}\n\n/**\n * Create vdom from dom node\n *\n * @param   Object  el    DOM element\n * @param   String  attr  Attribute name that contains vdom key\n * @return  Object        VNode or VText\n */\nfunction createNode(el, attr) {\n\t// html comment is not currently supported by virtual-dom\n\tif (el.nodeType === 3) {\n\t\treturn createVirtualTextNode(el);\n\n\t// cdata or doctype is not currently supported by virtual-dom\n\t} else if (el.nodeType === 1 || el.nodeType === 9) {\n\t\treturn createVirtualDomNode(el, attr);\n\t}\n\n\t// default to empty text node\n\treturn new VText('');\n}\n\n/**\n * Create vtext from dom node\n *\n * @param   Object  el  Text node\n * @return  Object      VText\n */\nfunction createVirtualTextNode(el) {\n\treturn new VText(el.nodeValue);\n}\n\n/**\n * Create vnode from dom node\n *\n * @param   Object  el    DOM element\n * @param   String  attr  Attribute name that contains vdom key\n * @return  Object        VNode\n */\nfunction createVirtualDomNode(el, attr) {\n\tvar ns = el.namespaceURI !== HTML_NAMESPACE ? el.namespaceURI : null;\n\tvar key = attr && el.getAttribute(attr) ? el.getAttribute(attr) : null;\n\n\treturn new VNode(\n\t\tel.tagName\n\t\t, createProperties(el)\n\t\t, createChildren(el, attr)\n\t\t, key\n\t\t, ns\n\t);\n}\n\n/**\n * Recursively create vdom\n *\n * @param   Object  el    Parent element\n * @param   String  attr  Attribute name that contains vdom key\n * @return  Array         Child vnode or vtext\n */\nfunction createChildren(el, attr) {\n\tvar children = [];\n\tfor (var i = 0; i < el.childNodes.length; i++) {\n\t\tchildren.push(createNode(el.childNodes[i], attr));\n\t};\n\n\treturn children;\n}\n\n/**\n * Create properties from dom node\n *\n * @param   Object  el  DOM element\n * @return  Object      Node properties and attributes\n */\nfunction createProperties(el) {\n\tvar properties = {};\n\n\tif (!el.hasAttributes()) {\n\t\treturn properties;\n\t}\n\n\tvar ns;\n\tif (el.namespaceURI && el.namespaceURI !== HTML_NAMESPACE) {\n\t\tns = el.namespaceURI;\n\t}\n\n\tvar attr;\n\tfor (var i = 0; i < el.attributes.length; i++) {\n\t\t// use built in css style parsing\n\t\tif(el.attributes[i].name == 'style'){\n\t\t\tattr = createStyleProperty(el);\n\t\t}\n\t\telse if (ns) {\n\t\t\tattr = createPropertyNS(el.attributes[i]);\n\t\t} else {\n\t\t\tattr = createProperty(el.attributes[i]);\n\t\t}\n\n\t\t// special case, namespaced attribute, use properties.foobar\n\t\tif (attr.ns) {\n\t\t\tproperties[attr.name] = {\n\t\t\t\tnamespace: attr.ns\n\t\t\t\t, value: attr.value\n\t\t\t};\n\n\t\t// special case, use properties.attributes.foobar\n\t\t} else if (attr.isAttr) {\n\t\t\t// init attributes object only when necessary\n\t\t\tif (!properties.attributes) {\n\t\t\t\tproperties.attributes = {}\n\t\t\t}\n\t\t\tproperties.attributes[attr.name] = attr.value;\n\n\t\t// default case, use properties.foobar\n\t\t} else {\n\t\t\tproperties[attr.name] = attr.value;\n\t\t}\n\t};\n\n\treturn properties;\n}\n\n/**\n * Create property from dom attribute\n *\n * @param   Object  attr  DOM attribute\n * @return  Object        Normalized attribute\n */\nfunction createProperty(attr) {\n\tvar name, value, isAttr;\n\n\t// using a map to find the correct case of property name\n\tif (propertyMap[attr.name]) {\n\t\tname = propertyMap[attr.name];\n\t} else {\n\t\tname = attr.name;\n\t}\n\t// special cases for data attribute, we default to properties.attributes.data\n\tif (name.indexOf('data-') === 0 || name.indexOf('aria-') === 0) {\n\t\tvalue = attr.value;\n\t\tisAttr = true;\n\t} else {\n\t\tvalue = attr.value;\n\t}\n\n\treturn {\n\t\tname: name\n\t\t, value: value\n\t\t, isAttr: isAttr || false\n\t};\n}\n\n/**\n * Create namespaced property from dom attribute\n *\n * @param   Object  attr  DOM attribute\n * @return  Object        Normalized attribute\n */\nfunction createPropertyNS(attr) {\n\tvar name, value;\n\n\treturn {\n\t\tname: attr.name\n\t\t, value: attr.value\n\t\t, ns: namespaceMap[attr.name] || ''\n\t};\n}\n\n/**\n * Create style property from dom node\n *\n * @param   Object  el  DOM node\n * @return  Object        Normalized attribute\n */\nfunction createStyleProperty(el) {\n\tvar style = el.style;\n\tvar output = {};\n\tfor (var i = 0; i < style.length; ++i) {\n\t\tvar item = style.item(i);\n\t\toutput[item] = style[item];\n\t\t// hack to workaround browser inconsistency with url()\n\t\tif (output[item].indexOf('url') > -1) {\n\t\t\toutput[item] = output[item].replace(/\\\"/g, '')\n\t\t}\n\t}\n\treturn { name: 'style', value: output };\n}\n\n},{\"./namespace-map\":228,\"./property-map\":229,\"virtual-dom/vnode/vnode\":251,\"virtual-dom/vnode/vtext\":253}],228:[function(require,module,exports){\n\n/**\n * namespace-map.js\n *\n * Necessary to map svg attributes back to their namespace\n */\n\n'use strict';\n\n// extracted from https://github.com/Matt-Esch/virtual-dom/blob/master/virtual-hyperscript/svg-attribute-namespace.js\nvar DEFAULT_NAMESPACE = null;\nvar EV_NAMESPACE = 'http://www.w3.org/2001/xml-events';\nvar XLINK_NAMESPACE = 'http://www.w3.org/1999/xlink';\nvar XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace';\n\nvar namespaces = {\n\t'about': DEFAULT_NAMESPACE\n\t, 'accent-height': DEFAULT_NAMESPACE\n\t, 'accumulate': DEFAULT_NAMESPACE\n\t, 'additive': DEFAULT_NAMESPACE\n\t, 'alignment-baseline': DEFAULT_NAMESPACE\n\t, 'alphabetic': DEFAULT_NAMESPACE\n\t, 'amplitude': DEFAULT_NAMESPACE\n\t, 'arabic-form': DEFAULT_NAMESPACE\n\t, 'ascent': DEFAULT_NAMESPACE\n\t, 'attributeName': DEFAULT_NAMESPACE\n\t, 'attributeType': DEFAULT_NAMESPACE\n\t, 'azimuth': DEFAULT_NAMESPACE\n\t, 'bandwidth': DEFAULT_NAMESPACE\n\t, 'baseFrequency': DEFAULT_NAMESPACE\n\t, 'baseProfile': DEFAULT_NAMESPACE\n\t, 'baseline-shift': DEFAULT_NAMESPACE\n\t, 'bbox': DEFAULT_NAMESPACE\n\t, 'begin': DEFAULT_NAMESPACE\n\t, 'bias': DEFAULT_NAMESPACE\n\t, 'by': DEFAULT_NAMESPACE\n\t, 'calcMode': DEFAULT_NAMESPACE\n\t, 'cap-height': DEFAULT_NAMESPACE\n\t, 'class': DEFAULT_NAMESPACE\n\t, 'clip': DEFAULT_NAMESPACE\n\t, 'clip-path': DEFAULT_NAMESPACE\n\t, 'clip-rule': DEFAULT_NAMESPACE\n\t, 'clipPathUnits': DEFAULT_NAMESPACE\n\t, 'color': DEFAULT_NAMESPACE\n\t, 'color-interpolation': DEFAULT_NAMESPACE\n\t, 'color-interpolation-filters': DEFAULT_NAMESPACE\n\t, 'color-profile': DEFAULT_NAMESPACE\n\t, 'color-rendering': DEFAULT_NAMESPACE\n\t, 'content': DEFAULT_NAMESPACE\n\t, 'contentScriptType': DEFAULT_NAMESPACE\n\t, 'contentStyleType': DEFAULT_NAMESPACE\n\t, 'cursor': DEFAULT_NAMESPACE\n\t, 'cx': DEFAULT_NAMESPACE\n\t, 'cy': DEFAULT_NAMESPACE\n\t, 'd': DEFAULT_NAMESPACE\n\t, 'datatype': DEFAULT_NAMESPACE\n\t, 'defaultAction': DEFAULT_NAMESPACE\n\t, 'descent': DEFAULT_NAMESPACE\n\t, 'diffuseConstant': DEFAULT_NAMESPACE\n\t, 'direction': DEFAULT_NAMESPACE\n\t, 'display': DEFAULT_NAMESPACE\n\t, 'divisor': DEFAULT_NAMESPACE\n\t, 'dominant-baseline': DEFAULT_NAMESPACE\n\t, 'dur': DEFAULT_NAMESPACE\n\t, 'dx': DEFAULT_NAMESPACE\n\t, 'dy': DEFAULT_NAMESPACE\n\t, 'edgeMode': DEFAULT_NAMESPACE\n\t, 'editable': DEFAULT_NAMESPACE\n\t, 'elevation': DEFAULT_NAMESPACE\n\t, 'enable-background': DEFAULT_NAMESPACE\n\t, 'end': DEFAULT_NAMESPACE\n\t, 'ev:event': EV_NAMESPACE\n\t, 'event': DEFAULT_NAMESPACE\n\t, 'exponent': DEFAULT_NAMESPACE\n\t, 'externalResourcesRequired': DEFAULT_NAMESPACE\n\t, 'fill': DEFAULT_NAMESPACE\n\t, 'fill-opacity': DEFAULT_NAMESPACE\n\t, 'fill-rule': DEFAULT_NAMESPACE\n\t, 'filter': DEFAULT_NAMESPACE\n\t, 'filterRes': DEFAULT_NAMESPACE\n\t, 'filterUnits': DEFAULT_NAMESPACE\n\t, 'flood-color': DEFAULT_NAMESPACE\n\t, 'flood-opacity': DEFAULT_NAMESPACE\n\t, 'focusHighlight': DEFAULT_NAMESPACE\n\t, 'focusable': DEFAULT_NAMESPACE\n\t, 'font-family': DEFAULT_NAMESPACE\n\t, 'font-size': DEFAULT_NAMESPACE\n\t, 'font-size-adjust': DEFAULT_NAMESPACE\n\t, 'font-stretch': DEFAULT_NAMESPACE\n\t, 'font-style': DEFAULT_NAMESPACE\n\t, 'font-variant': DEFAULT_NAMESPACE\n\t, 'font-weight': DEFAULT_NAMESPACE\n\t, 'format': DEFAULT_NAMESPACE\n\t, 'from': DEFAULT_NAMESPACE\n\t, 'fx': DEFAULT_NAMESPACE\n\t, 'fy': DEFAULT_NAMESPACE\n\t, 'g1': DEFAULT_NAMESPACE\n\t, 'g2': DEFAULT_NAMESPACE\n\t, 'glyph-name': DEFAULT_NAMESPACE\n\t, 'glyph-orientation-horizontal': DEFAULT_NAMESPACE\n\t, 'glyph-orientation-vertical': DEFAULT_NAMESPACE\n\t, 'glyphRef': DEFAULT_NAMESPACE\n\t, 'gradientTransform': DEFAULT_NAMESPACE\n\t, 'gradientUnits': DEFAULT_NAMESPACE\n\t, 'handler': DEFAULT_NAMESPACE\n\t, 'hanging': DEFAULT_NAMESPACE\n\t, 'height': DEFAULT_NAMESPACE\n\t, 'horiz-adv-x': DEFAULT_NAMESPACE\n\t, 'horiz-origin-x': DEFAULT_NAMESPACE\n\t, 'horiz-origin-y': DEFAULT_NAMESPACE\n\t, 'id': DEFAULT_NAMESPACE\n\t, 'ideographic': DEFAULT_NAMESPACE\n\t, 'image-rendering': DEFAULT_NAMESPACE\n\t, 'in': DEFAULT_NAMESPACE\n\t, 'in2': DEFAULT_NAMESPACE\n\t, 'initialVisibility': DEFAULT_NAMESPACE\n\t, 'intercept': DEFAULT_NAMESPACE\n\t, 'k': DEFAULT_NAMESPACE\n\t, 'k1': DEFAULT_NAMESPACE\n\t, 'k2': DEFAULT_NAMESPACE\n\t, 'k3': DEFAULT_NAMESPACE\n\t, 'k4': DEFAULT_NAMESPACE\n\t, 'kernelMatrix': DEFAULT_NAMESPACE\n\t, 'kernelUnitLength': DEFAULT_NAMESPACE\n\t, 'kerning': DEFAULT_NAMESPACE\n\t, 'keyPoints': DEFAULT_NAMESPACE\n\t, 'keySplines': DEFAULT_NAMESPACE\n\t, 'keyTimes': DEFAULT_NAMESPACE\n\t, 'lang': DEFAULT_NAMESPACE\n\t, 'lengthAdjust': DEFAULT_NAMESPACE\n\t, 'letter-spacing': DEFAULT_NAMESPACE\n\t, 'lighting-color': DEFAULT_NAMESPACE\n\t, 'limitingConeAngle': DEFAULT_NAMESPACE\n\t, 'local': DEFAULT_NAMESPACE\n\t, 'marker-end': DEFAULT_NAMESPACE\n\t, 'marker-mid': DEFAULT_NAMESPACE\n\t, 'marker-start': DEFAULT_NAMESPACE\n\t, 'markerHeight': DEFAULT_NAMESPACE\n\t, 'markerUnits': DEFAULT_NAMESPACE\n\t, 'markerWidth': DEFAULT_NAMESPACE\n\t, 'mask': DEFAULT_NAMESPACE\n\t, 'maskContentUnits': DEFAULT_NAMESPACE\n\t, 'maskUnits': DEFAULT_NAMESPACE\n\t, 'mathematical': DEFAULT_NAMESPACE\n\t, 'max': DEFAULT_NAMESPACE\n\t, 'media': DEFAULT_NAMESPACE\n\t, 'mediaCharacterEncoding': DEFAULT_NAMESPACE\n\t, 'mediaContentEncodings': DEFAULT_NAMESPACE\n\t, 'mediaSize': DEFAULT_NAMESPACE\n\t, 'mediaTime': DEFAULT_NAMESPACE\n\t, 'method': DEFAULT_NAMESPACE\n\t, 'min': DEFAULT_NAMESPACE\n\t, 'mode': DEFAULT_NAMESPACE\n\t, 'name': DEFAULT_NAMESPACE\n\t, 'nav-down': DEFAULT_NAMESPACE\n\t, 'nav-down-left': DEFAULT_NAMESPACE\n\t, 'nav-down-right': DEFAULT_NAMESPACE\n\t, 'nav-left': DEFAULT_NAMESPACE\n\t, 'nav-next': DEFAULT_NAMESPACE\n\t, 'nav-prev': DEFAULT_NAMESPACE\n\t, 'nav-right': DEFAULT_NAMESPACE\n\t, 'nav-up': DEFAULT_NAMESPACE\n\t, 'nav-up-left': DEFAULT_NAMESPACE\n\t, 'nav-up-right': DEFAULT_NAMESPACE\n\t, 'numOctaves': DEFAULT_NAMESPACE\n\t, 'observer': DEFAULT_NAMESPACE\n\t, 'offset': DEFAULT_NAMESPACE\n\t, 'opacity': DEFAULT_NAMESPACE\n\t, 'operator': DEFAULT_NAMESPACE\n\t, 'order': DEFAULT_NAMESPACE\n\t, 'orient': DEFAULT_NAMESPACE\n\t, 'orientation': DEFAULT_NAMESPACE\n\t, 'origin': DEFAULT_NAMESPACE\n\t, 'overflow': DEFAULT_NAMESPACE\n\t, 'overlay': DEFAULT_NAMESPACE\n\t, 'overline-position': DEFAULT_NAMESPACE\n\t, 'overline-thickness': DEFAULT_NAMESPACE\n\t, 'panose-1': DEFAULT_NAMESPACE\n\t, 'path': DEFAULT_NAMESPACE\n\t, 'pathLength': DEFAULT_NAMESPACE\n\t, 'patternContentUnits': DEFAULT_NAMESPACE\n\t, 'patternTransform': DEFAULT_NAMESPACE\n\t, 'patternUnits': DEFAULT_NAMESPACE\n\t, 'phase': DEFAULT_NAMESPACE\n\t, 'playbackOrder': DEFAULT_NAMESPACE\n\t, 'pointer-events': DEFAULT_NAMESPACE\n\t, 'points': DEFAULT_NAMESPACE\n\t, 'pointsAtX': DEFAULT_NAMESPACE\n\t, 'pointsAtY': DEFAULT_NAMESPACE\n\t, 'pointsAtZ': DEFAULT_NAMESPACE\n\t, 'preserveAlpha': DEFAULT_NAMESPACE\n\t, 'preserveAspectRatio': DEFAULT_NAMESPACE\n\t, 'primitiveUnits': DEFAULT_NAMESPACE\n\t, 'propagate': DEFAULT_NAMESPACE\n\t, 'property': DEFAULT_NAMESPACE\n\t, 'r': DEFAULT_NAMESPACE\n\t, 'radius': DEFAULT_NAMESPACE\n\t, 'refX': DEFAULT_NAMESPACE\n\t, 'refY': DEFAULT_NAMESPACE\n\t, 'rel': DEFAULT_NAMESPACE\n\t, 'rendering-intent': DEFAULT_NAMESPACE\n\t, 'repeatCount': DEFAULT_NAMESPACE\n\t, 'repeatDur': DEFAULT_NAMESPACE\n\t, 'requiredExtensions': DEFAULT_NAMESPACE\n\t, 'requiredFeatures': DEFAULT_NAMESPACE\n\t, 'requiredFonts': DEFAULT_NAMESPACE\n\t, 'requiredFormats': DEFAULT_NAMESPACE\n\t, 'resource': DEFAULT_NAMESPACE\n\t, 'restart': DEFAULT_NAMESPACE\n\t, 'result': DEFAULT_NAMESPACE\n\t, 'rev': DEFAULT_NAMESPACE\n\t, 'role': DEFAULT_NAMESPACE\n\t, 'rotate': DEFAULT_NAMESPACE\n\t, 'rx': DEFAULT_NAMESPACE\n\t, 'ry': DEFAULT_NAMESPACE\n\t, 'scale': DEFAULT_NAMESPACE\n\t, 'seed': DEFAULT_NAMESPACE\n\t, 'shape-rendering': DEFAULT_NAMESPACE\n\t, 'slope': DEFAULT_NAMESPACE\n\t, 'snapshotTime': DEFAULT_NAMESPACE\n\t, 'spacing': DEFAULT_NAMESPACE\n\t, 'specularConstant': DEFAULT_NAMESPACE\n\t, 'specularExponent': DEFAULT_NAMESPACE\n\t, 'spreadMethod': DEFAULT_NAMESPACE\n\t, 'startOffset': DEFAULT_NAMESPACE\n\t, 'stdDeviation': DEFAULT_NAMESPACE\n\t, 'stemh': DEFAULT_NAMESPACE\n\t, 'stemv': DEFAULT_NAMESPACE\n\t, 'stitchTiles': DEFAULT_NAMESPACE\n\t, 'stop-color': DEFAULT_NAMESPACE\n\t, 'stop-opacity': DEFAULT_NAMESPACE\n\t, 'strikethrough-position': DEFAULT_NAMESPACE\n\t, 'strikethrough-thickness': DEFAULT_NAMESPACE\n\t, 'string': DEFAULT_NAMESPACE\n\t, 'stroke': DEFAULT_NAMESPACE\n\t, 'stroke-dasharray': DEFAULT_NAMESPACE\n\t, 'stroke-dashoffset': DEFAULT_NAMESPACE\n\t, 'stroke-linecap': DEFAULT_NAMESPACE\n\t, 'stroke-linejoin': DEFAULT_NAMESPACE\n\t, 'stroke-miterlimit': DEFAULT_NAMESPACE\n\t, 'stroke-opacity': DEFAULT_NAMESPACE\n\t, 'stroke-width': DEFAULT_NAMESPACE\n\t, 'surfaceScale': DEFAULT_NAMESPACE\n\t, 'syncBehavior': DEFAULT_NAMESPACE\n\t, 'syncBehaviorDefault': DEFAULT_NAMESPACE\n\t, 'syncMaster': DEFAULT_NAMESPACE\n\t, 'syncTolerance': DEFAULT_NAMESPACE\n\t, 'syncToleranceDefault': DEFAULT_NAMESPACE\n\t, 'systemLanguage': DEFAULT_NAMESPACE\n\t, 'tableValues': DEFAULT_NAMESPACE\n\t, 'target': DEFAULT_NAMESPACE\n\t, 'targetX': DEFAULT_NAMESPACE\n\t, 'targetY': DEFAULT_NAMESPACE\n\t, 'text-anchor': DEFAULT_NAMESPACE\n\t, 'text-decoration': DEFAULT_NAMESPACE\n\t, 'text-rendering': DEFAULT_NAMESPACE\n\t, 'textLength': DEFAULT_NAMESPACE\n\t, 'timelineBegin': DEFAULT_NAMESPACE\n\t, 'title': DEFAULT_NAMESPACE\n\t, 'to': DEFAULT_NAMESPACE\n\t, 'transform': DEFAULT_NAMESPACE\n\t, 'transformBehavior': DEFAULT_NAMESPACE\n\t, 'type': DEFAULT_NAMESPACE\n\t, 'typeof': DEFAULT_NAMESPACE\n\t, 'u1': DEFAULT_NAMESPACE\n\t, 'u2': DEFAULT_NAMESPACE\n\t, 'underline-position': DEFAULT_NAMESPACE\n\t, 'underline-thickness': DEFAULT_NAMESPACE\n\t, 'unicode': DEFAULT_NAMESPACE\n\t, 'unicode-bidi': DEFAULT_NAMESPACE\n\t, 'unicode-range': DEFAULT_NAMESPACE\n\t, 'units-per-em': DEFAULT_NAMESPACE\n\t, 'v-alphabetic': DEFAULT_NAMESPACE\n\t, 'v-hanging': DEFAULT_NAMESPACE\n\t, 'v-ideographic': DEFAULT_NAMESPACE\n\t, 'v-mathematical': DEFAULT_NAMESPACE\n\t, 'values': DEFAULT_NAMESPACE\n\t, 'version': DEFAULT_NAMESPACE\n\t, 'vert-adv-y': DEFAULT_NAMESPACE\n\t, 'vert-origin-x': DEFAULT_NAMESPACE\n\t, 'vert-origin-y': DEFAULT_NAMESPACE\n\t, 'viewBox': DEFAULT_NAMESPACE\n\t, 'viewTarget': DEFAULT_NAMESPACE\n\t, 'visibility': DEFAULT_NAMESPACE\n\t, 'width': DEFAULT_NAMESPACE\n\t, 'widths': DEFAULT_NAMESPACE\n\t, 'word-spacing': DEFAULT_NAMESPACE\n\t, 'writing-mode': DEFAULT_NAMESPACE\n\t, 'x': DEFAULT_NAMESPACE\n\t, 'x-height': DEFAULT_NAMESPACE\n\t, 'x1': DEFAULT_NAMESPACE\n\t, 'x2': DEFAULT_NAMESPACE\n\t, 'xChannelSelector': DEFAULT_NAMESPACE\n\t, 'xlink:actuate': XLINK_NAMESPACE\n\t, 'xlink:arcrole': XLINK_NAMESPACE\n\t, 'xlink:href': XLINK_NAMESPACE\n\t, 'xlink:role': XLINK_NAMESPACE\n\t, 'xlink:show': XLINK_NAMESPACE\n\t, 'xlink:title': XLINK_NAMESPACE\n\t, 'xlink:type': XLINK_NAMESPACE\n\t, 'xml:base': XML_NAMESPACE\n\t, 'xml:id': XML_NAMESPACE\n\t, 'xml:lang': XML_NAMESPACE\n\t, 'xml:space': XML_NAMESPACE\n\t, 'y': DEFAULT_NAMESPACE\n\t, 'y1': DEFAULT_NAMESPACE\n\t, 'y2': DEFAULT_NAMESPACE\n\t, 'yChannelSelector': DEFAULT_NAMESPACE\n\t, 'z': DEFAULT_NAMESPACE\n\t, 'zoomAndPan': DEFAULT_NAMESPACE\n};\n\nmodule.exports = namespaces;\n\n},{}],229:[function(require,module,exports){\n\n/**\n * property-map.js\n *\n * Necessary to map dom attributes back to vdom properties\n */\n\n'use strict';\n\n// invert of https://www.npmjs.com/package/html-attributes\nvar properties = {\n\t'abbr': 'abbr'\n\t, 'accept': 'accept'\n\t, 'accept-charset': 'acceptCharset'\n\t, 'accesskey': 'accessKey'\n\t, 'action': 'action'\n\t, 'allowfullscreen': 'allowFullScreen'\n\t, 'allowtransparency': 'allowTransparency'\n\t, 'alt': 'alt'\n\t, 'async': 'async'\n\t, 'autocomplete': 'autoComplete'\n\t, 'autofocus': 'autoFocus'\n\t, 'autoplay': 'autoPlay'\n\t, 'cellpadding': 'cellPadding'\n\t, 'cellspacing': 'cellSpacing'\n\t, 'challenge': 'challenge'\n\t, 'charset': 'charset'\n\t, 'checked': 'checked'\n\t, 'cite': 'cite'\n\t, 'class': 'className'\n\t, 'cols': 'cols'\n\t, 'colspan': 'colSpan'\n\t, 'command': 'command'\n\t, 'content': 'content'\n\t, 'contenteditable': 'contentEditable'\n\t, 'contextmenu': 'contextMenu'\n\t, 'controls': 'controls'\n\t, 'coords': 'coords'\n\t, 'crossorigin': 'crossOrigin'\n\t, 'data': 'data'\n\t, 'datetime': 'dateTime'\n\t, 'default': 'default'\n\t, 'defer': 'defer'\n\t, 'dir': 'dir'\n\t, 'disabled': 'disabled'\n\t, 'download': 'download'\n\t, 'draggable': 'draggable'\n\t, 'dropzone': 'dropzone'\n\t, 'enctype': 'encType'\n\t, 'for': 'htmlFor'\n\t, 'form': 'form'\n\t, 'formaction': 'formAction'\n\t, 'formenctype': 'formEncType'\n\t, 'formmethod': 'formMethod'\n\t, 'formnovalidate': 'formNoValidate'\n\t, 'formtarget': 'formTarget'\n\t, 'frameBorder': 'frameBorder'\n\t, 'headers': 'headers'\n\t, 'height': 'height'\n\t, 'hidden': 'hidden'\n\t, 'high': 'high'\n\t, 'href': 'href'\n\t, 'hreflang': 'hrefLang'\n\t, 'http-equiv': 'httpEquiv'\n\t, 'icon': 'icon'\n\t, 'id': 'id'\n\t, 'inputmode': 'inputMode'\n\t, 'ismap': 'isMap'\n\t, 'itemid': 'itemId'\n\t, 'itemprop': 'itemProp'\n\t, 'itemref': 'itemRef'\n\t, 'itemscope': 'itemScope'\n\t, 'itemtype': 'itemType'\n\t, 'kind': 'kind'\n\t, 'label': 'label'\n\t, 'lang': 'lang'\n\t, 'list': 'list'\n\t, 'loop': 'loop'\n\t, 'manifest': 'manifest'\n\t, 'max': 'max'\n\t, 'maxlength': 'maxLength'\n\t, 'media': 'media'\n\t, 'mediagroup': 'mediaGroup'\n\t, 'method': 'method'\n\t, 'min': 'min'\n\t, 'minlength': 'minLength'\n\t, 'multiple': 'multiple'\n\t, 'muted': 'muted'\n\t, 'name': 'name'\n\t, 'novalidate': 'noValidate'\n\t, 'open': 'open'\n\t, 'optimum': 'optimum'\n\t, 'pattern': 'pattern'\n\t, 'ping': 'ping'\n\t, 'placeholder': 'placeholder'\n\t, 'poster': 'poster'\n\t, 'preload': 'preload'\n\t, 'radiogroup': 'radioGroup'\n\t, 'readonly': 'readOnly'\n\t, 'rel': 'rel'\n\t, 'required': 'required'\n\t, 'role': 'role'\n\t, 'rows': 'rows'\n\t, 'rowspan': 'rowSpan'\n\t, 'sandbox': 'sandbox'\n\t, 'scope': 'scope'\n\t, 'scoped': 'scoped'\n\t, 'scrolling': 'scrolling'\n\t, 'seamless': 'seamless'\n\t, 'selected': 'selected'\n\t, 'shape': 'shape'\n\t, 'size': 'size'\n\t, 'sizes': 'sizes'\n\t, 'sortable': 'sortable'\n\t, 'span': 'span'\n\t, 'spellcheck': 'spellCheck'\n\t, 'src': 'src'\n\t, 'srcdoc': 'srcDoc'\n\t, 'srcset': 'srcSet'\n\t, 'start': 'start'\n\t, 'step': 'step'\n\t, 'style': 'style'\n\t, 'tabindex': 'tabIndex'\n\t, 'target': 'target'\n\t, 'title': 'title'\n\t, 'translate': 'translate'\n\t, 'type': 'type'\n\t, 'typemustmatch': 'typeMustMatch'\n\t, 'usemap': 'useMap'\n\t, 'value': 'value'\n\t, 'width': 'width'\n\t, 'wmode': 'wmode'\n\t, 'wrap': 'wrap'\n};\n\nmodule.exports = properties;\n\n},{}],230:[function(require,module,exports){\nvar createElement = require(\"./vdom/create-element.js\")\n\nmodule.exports = createElement\n\n},{\"./vdom/create-element.js\":235}],231:[function(require,module,exports){\nvar diff = require(\"./vtree/diff.js\")\n\nmodule.exports = diff\n\n},{\"./vtree/diff.js\":255}],232:[function(require,module,exports){\nvar h = require(\"./virtual-hyperscript/index.js\")\n\nmodule.exports = h\n\n},{\"./virtual-hyperscript/index.js\":242}],233:[function(require,module,exports){\nvar patch = require(\"./vdom/patch.js\")\n\nmodule.exports = patch\n\n},{\"./vdom/patch.js\":238}],234:[function(require,module,exports){\nvar isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook.js\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, propName, propValue, previous);\n        } else if (isHook(propValue)) {\n            removeProperty(node, propName, propValue, previous)\n            if (propValue.hook) {\n                propValue.hook(node,\n                    propName,\n                    previous ? previous[propName] : undefined)\n            }\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, propName, propValue, previous) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        } else if (previousValue.unhook) {\n            previousValue.unhook(node, propName, propValue)\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n\n},{\"../vnode/is-vhook.js\":246,\"is-object\":175}],235:[function(require,module,exports){\nvar document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"../vnode/is-vnode.js\")\nvar isVText = require(\"../vnode/is-vtext.js\")\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar handleThunk = require(\"../vnode/handle-thunk.js\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n\n},{\"../vnode/handle-thunk.js\":244,\"../vnode/is-vnode.js\":247,\"../vnode/is-vtext.js\":248,\"../vnode/is-widget.js\":249,\"./apply-properties\":234,\"global/document\":149}],236:[function(require,module,exports){\n// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n\n},{}],237:[function(require,module,exports){\nvar applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar VPatch = require(\"../vnode/vpatch.js\")\n\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = renderOptions.render(vText, renderOptions)\n\n        if (parentNode && newNode !== domNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    var updating = updateWidget(leftVNode, widget)\n    var newNode\n\n    if (updating) {\n        newNode = widget.update(leftVNode, domNode) || domNode\n    } else {\n        newNode = renderOptions.render(widget, renderOptions)\n    }\n\n    var parentNode = domNode.parentNode\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    if (!updating) {\n        destroyWidget(domNode, leftVNode)\n    }\n\n    return newNode\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, moves) {\n    var childNodes = domNode.childNodes\n    var keyMap = {}\n    var node\n    var remove\n    var insert\n\n    for (var i = 0; i < moves.removes.length; i++) {\n        remove = moves.removes[i]\n        node = childNodes[remove.from]\n        if (remove.key) {\n            keyMap[remove.key] = node\n        }\n        domNode.removeChild(node)\n    }\n\n    var length = childNodes.length\n    for (var j = 0; j < moves.inserts.length; j++) {\n        insert = moves.inserts[j]\n        node = keyMap[insert.key]\n        // this is the weirdest bug i've ever seen in webkit\n        domNode.insertBefore(node, insert.to >= length++ ? null : childNodes[insert.to])\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n\n},{\"../vnode/is-widget.js\":249,\"../vnode/vpatch.js\":252,\"./apply-properties\":234,\"./update-widget\":239}],238:[function(require,module,exports){\nvar document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar render = require(\"./create-element\")\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches, renderOptions) {\n    renderOptions = renderOptions || {}\n    renderOptions.patch = renderOptions.patch && renderOptions.patch !== patch\n        ? renderOptions.patch\n        : patchRecursive\n    renderOptions.render = renderOptions.render || render\n\n    return renderOptions.patch(rootNode, patches, renderOptions)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions.document && ownerDocument !== document) {\n        renderOptions.document = ownerDocument\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n\n},{\"./create-element\":235,\"./dom-index\":236,\"./patch-op\":237,\"global/document\":149,\"x-is-array\":256}],239:[function(require,module,exports){\nvar isWidget = require(\"../vnode/is-widget.js\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n\n},{\"../vnode/is-widget.js\":249}],240:[function(require,module,exports){\n'use strict';\n\nvar EvStore = require('ev-store');\n\nmodule.exports = EvHook;\n\nfunction EvHook(value) {\n    if (!(this instanceof EvHook)) {\n        return new EvHook(value);\n    }\n\n    this.value = value;\n}\n\nEvHook.prototype.hook = function (node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = this.value;\n};\n\nEvHook.prototype.unhook = function(node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = undefined;\n};\n\n},{\"ev-store\":147}],241:[function(require,module,exports){\n'use strict';\n\nmodule.exports = SoftSetHook;\n\nfunction SoftSetHook(value) {\n    if (!(this instanceof SoftSetHook)) {\n        return new SoftSetHook(value);\n    }\n\n    this.value = value;\n}\n\nSoftSetHook.prototype.hook = function (node, propertyName) {\n    if (node[propertyName] !== this.value) {\n        node[propertyName] = this.value;\n    }\n};\n\n},{}],242:[function(require,module,exports){\n'use strict';\n\nvar isArray = require('x-is-array');\n\nvar VNode = require('../vnode/vnode.js');\nvar VText = require('../vnode/vtext.js');\nvar isVNode = require('../vnode/is-vnode');\nvar isVText = require('../vnode/is-vtext');\nvar isWidget = require('../vnode/is-widget');\nvar isHook = require('../vnode/is-vhook');\nvar isVThunk = require('../vnode/is-thunk');\n\nvar parseTag = require('./parse-tag.js');\nvar softSetHook = require('./hooks/soft-set-hook.js');\nvar evHook = require('./hooks/ev-hook.js');\n\nmodule.exports = h;\n\nfunction h(tagName, properties, children) {\n    var childNodes = [];\n    var tag, props, key, namespace;\n\n    if (!children && isChildren(properties)) {\n        children = properties;\n        props = {};\n    }\n\n    props = props || properties || {};\n    tag = parseTag(tagName, props);\n\n    // support keys\n    if (props.hasOwnProperty('key')) {\n        key = props.key;\n        props.key = undefined;\n    }\n\n    // support namespace\n    if (props.hasOwnProperty('namespace')) {\n        namespace = props.namespace;\n        props.namespace = undefined;\n    }\n\n    // fix cursor bug\n    if (tag === 'INPUT' &&\n        !namespace &&\n        props.hasOwnProperty('value') &&\n        props.value !== undefined &&\n        !isHook(props.value)\n    ) {\n        props.value = softSetHook(props.value);\n    }\n\n    transformProperties(props);\n\n    if (children !== undefined && children !== null) {\n        addChild(children, childNodes, tag, props);\n    }\n\n\n    return new VNode(tag, props, childNodes, key, namespace);\n}\n\nfunction addChild(c, childNodes, tag, props) {\n    if (typeof c === 'string') {\n        childNodes.push(new VText(c));\n    } else if (typeof c === 'number') {\n        childNodes.push(new VText(String(c)));\n    } else if (isChild(c)) {\n        childNodes.push(c);\n    } else if (isArray(c)) {\n        for (var i = 0; i < c.length; i++) {\n            addChild(c[i], childNodes, tag, props);\n        }\n    } else if (c === null || c === undefined) {\n        return;\n    } else {\n        throw UnexpectedVirtualElement({\n            foreignObject: c,\n            parentVnode: {\n                tagName: tag,\n                properties: props\n            }\n        });\n    }\n}\n\nfunction transformProperties(props) {\n    for (var propName in props) {\n        if (props.hasOwnProperty(propName)) {\n            var value = props[propName];\n\n            if (isHook(value)) {\n                continue;\n            }\n\n            if (propName.substr(0, 3) === 'ev-') {\n                // add ev-foo support\n                props[propName] = evHook(value);\n            }\n        }\n    }\n}\n\nfunction isChild(x) {\n    return isVNode(x) || isVText(x) || isWidget(x) || isVThunk(x);\n}\n\nfunction isChildren(x) {\n    return typeof x === 'string' || isArray(x) || isChild(x);\n}\n\nfunction UnexpectedVirtualElement(data) {\n    var err = new Error();\n\n    err.type = 'virtual-hyperscript.unexpected.virtual-element';\n    err.message = 'Unexpected virtual child passed to h().\\n' +\n        'Expected a VNode / Vthunk / VWidget / string but:\\n' +\n        'got:\\n' +\n        errorString(data.foreignObject) +\n        '.\\n' +\n        'The parent vnode is:\\n' +\n        errorString(data.parentVnode)\n        '\\n' +\n        'Suggested fix: change your `h(..., [ ... ])` callsite.';\n    err.foreignObject = data.foreignObject;\n    err.parentVnode = data.parentVnode;\n\n    return err;\n}\n\nfunction errorString(obj) {\n    try {\n        return JSON.stringify(obj, null, '    ');\n    } catch (e) {\n        return String(obj);\n    }\n}\n\n},{\"../vnode/is-thunk\":245,\"../vnode/is-vhook\":246,\"../vnode/is-vnode\":247,\"../vnode/is-vtext\":248,\"../vnode/is-widget\":249,\"../vnode/vnode.js\":251,\"../vnode/vtext.js\":253,\"./hooks/ev-hook.js\":240,\"./hooks/soft-set-hook.js\":241,\"./parse-tag.js\":243,\"x-is-array\":256}],243:[function(require,module,exports){\n'use strict';\n\nvar split = require('browser-split');\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9\\u007F-\\uFFFF_:-]+)/;\nvar notClassId = /^\\.|#/;\n\nmodule.exports = parseTag;\n\nfunction parseTag(tag, props) {\n    if (!tag) {\n        return 'DIV';\n    }\n\n    var noId = !(props.hasOwnProperty('id'));\n\n    var tagParts = split(tag, classIdSplit);\n    var tagName = null;\n\n    if (notClassId.test(tagParts[1])) {\n        tagName = 'DIV';\n    }\n\n    var classes, part, type, i;\n\n    for (i = 0; i < tagParts.length; i++) {\n        part = tagParts[i];\n\n        if (!part) {\n            continue;\n        }\n\n        type = part.charAt(0);\n\n        if (!tagName) {\n            tagName = part;\n        } else if (type === '.') {\n            classes = classes || [];\n            classes.push(part.substring(1, part.length));\n        } else if (type === '#' && noId) {\n            props.id = part.substring(1, part.length);\n        }\n    }\n\n    if (classes) {\n        if (props.className) {\n            classes.push(props.className);\n        }\n\n        props.className = classes.join(' ');\n    }\n\n    return props.namespace ? tagName : tagName.toUpperCase();\n}\n\n},{\"browser-split\":111}],244:[function(require,module,exports){\nvar isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n\n},{\"./is-thunk\":245,\"./is-vnode\":247,\"./is-vtext\":248,\"./is-widget\":249}],245:[function(require,module,exports){\nmodule.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n\n},{}],246:[function(require,module,exports){\nmodule.exports = isHook\n\nfunction isHook(hook) {\n    return hook &&\n      (typeof hook.hook === \"function\" && !hook.hasOwnProperty(\"hook\") ||\n       typeof hook.unhook === \"function\" && !hook.hasOwnProperty(\"unhook\"))\n}\n\n},{}],247:[function(require,module,exports){\nvar version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n\n},{\"./version\":250}],248:[function(require,module,exports){\nvar version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n\n},{\"./version\":250}],249:[function(require,module,exports){\nmodule.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n\n},{}],250:[function(require,module,exports){\nmodule.exports = \"2\"\n\n},{}],251:[function(require,module,exports){\nvar version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property) && property.unhook) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n\n},{\"./is-thunk\":245,\"./is-vhook\":246,\"./is-vnode\":247,\"./is-widget\":249,\"./version\":250}],252:[function(require,module,exports){\nvar version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n\n},{\"./version\":250}],253:[function(require,module,exports){\nvar version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n\n},{\"./version\":250}],254:[function(require,module,exports){\nvar isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook\")\n\nmodule.exports = diffProps\n\nfunction diffProps(a, b) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (aValue === bValue) {\n            continue\n        } else if (isObject(aValue) && isObject(bValue)) {\n            if (getPrototype(bValue) !== getPrototype(aValue)) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            } else if (isHook(bValue)) {\n                 diff = diff || {}\n                 diff[aKey] = bValue\n            } else {\n                var objectDiff = diffProps(aValue, bValue)\n                if (objectDiff) {\n                    diff = diff || {}\n                    diff[aKey] = objectDiff\n                }\n            }\n        } else {\n            diff = diff || {}\n            diff[aKey] = bValue\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n  if (Object.getPrototypeOf) {\n    return Object.getPrototypeOf(value)\n  } else if (value.__proto__) {\n    return value.__proto__\n  } else if (value.constructor) {\n    return value.constructor.prototype\n  }\n}\n\n},{\"../vnode/is-vhook\":246,\"is-object\":175}],255:[function(require,module,exports){\nvar isArray = require(\"x-is-array\")\n\nvar VPatch = require(\"../vnode/vpatch\")\nvar isVNode = require(\"../vnode/is-vnode\")\nvar isVText = require(\"../vnode/is-vtext\")\nvar isWidget = require(\"../vnode/is-widget\")\nvar isThunk = require(\"../vnode/is-thunk\")\nvar handleThunk = require(\"../vnode/handle-thunk\")\n\nvar diffProps = require(\"./diff-props\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        return\n    }\n\n    var apply = patch[index]\n    var applyClear = false\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n\n        // If a is a widget we will add a remove patch for it\n        // Otherwise any child widgets/hooks must be destroyed.\n        // This prevents adding two remove patches for a widget.\n        if (!isWidget(a)) {\n            clearState(a, patch, index)\n            apply = patch[index]\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.REMOVE, a, b))\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                applyClear = true\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            applyClear = true\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            applyClear = true\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        if (!isWidget(a)) {\n            applyClear = true\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n\n    if (applyClear) {\n        clearState(a, patch, index)\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var orderedSet = reorder(aChildren, b.children)\n    var bChildren = orderedSet.children\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (orderedSet.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(\n            VPatch.ORDER,\n            a,\n            orderedSet.moves\n        ))\n    }\n\n    return apply\n}\n\nfunction clearState(vNode, patch, index) {\n    // TODO: Make this a single walk, not two\n    unhook(vNode, patch, index)\n    destroyWidgets(vNode, patch, index)\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(VPatch.REMOVE, vNode, null)\n            )\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b)\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Execute hooks when two nodes are identical\nfunction unhook(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(\n                    VPatch.PROPS,\n                    vNode,\n                    undefinedKeys(vNode.hooks)\n                )\n            )\n        }\n\n        if (vNode.descendantHooks || vNode.hasThunks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                unhook(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\nfunction undefinedKeys(obj) {\n    var result = {}\n\n    for (var key in obj) {\n        result[key] = undefined\n    }\n\n    return result\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n    // O(M) time, O(M) memory\n    var bChildIndex = keyIndex(bChildren)\n    var bKeys = bChildIndex.keys\n    var bFree = bChildIndex.free\n\n    if (bFree.length === bChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(N) time, O(N) memory\n    var aChildIndex = keyIndex(aChildren)\n    var aKeys = aChildIndex.keys\n    var aFree = aChildIndex.free\n\n    if (aFree.length === aChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(MAX(N, M)) memory\n    var newChildren = []\n\n    var freeIndex = 0\n    var freeCount = bFree.length\n    var deletedItems = 0\n\n    // Iterate through a and match a node in b\n    // O(N) time,\n    for (var i = 0 ; i < aChildren.length; i++) {\n        var aItem = aChildren[i]\n        var itemIndex\n\n        if (aItem.key) {\n            if (bKeys.hasOwnProperty(aItem.key)) {\n                // Match up the old keys\n                itemIndex = bKeys[aItem.key]\n                newChildren.push(bChildren[itemIndex])\n\n            } else {\n                // Remove old keyed items\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        } else {\n            // Match the item in a with the next free item in b\n            if (freeIndex < freeCount) {\n                itemIndex = bFree[freeIndex++]\n                newChildren.push(bChildren[itemIndex])\n            } else {\n                // There are no free items in b to match with\n                // the free items in a, so the extra free nodes\n                // are deleted.\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        }\n    }\n\n    var lastFreeIndex = freeIndex >= bFree.length ?\n        bChildren.length :\n        bFree[freeIndex]\n\n    // Iterate through b and append any new keys\n    // O(M) time\n    for (var j = 0; j < bChildren.length; j++) {\n        var newItem = bChildren[j]\n\n        if (newItem.key) {\n            if (!aKeys.hasOwnProperty(newItem.key)) {\n                // Add any new keyed items\n                // We are adding new items to the end and then sorting them\n                // in place. In future we should insert new items in place.\n                newChildren.push(newItem)\n            }\n        } else if (j >= lastFreeIndex) {\n            // Add any leftover non-keyed items\n            newChildren.push(newItem)\n        }\n    }\n\n    var simulate = newChildren.slice()\n    var simulateIndex = 0\n    var removes = []\n    var inserts = []\n    var simulateItem\n\n    for (var k = 0; k < bChildren.length;) {\n        var wantedItem = bChildren[k]\n        simulateItem = simulate[simulateIndex]\n\n        // remove items\n        while (simulateItem === null && simulate.length) {\n            removes.push(remove(simulate, simulateIndex, null))\n            simulateItem = simulate[simulateIndex]\n        }\n\n        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n            // if we need a key in this position...\n            if (wantedItem.key) {\n                if (simulateItem && simulateItem.key) {\n                    // if an insert doesn't put this key in place, it needs to move\n                    if (bKeys[simulateItem.key] !== k + 1) {\n                        removes.push(remove(simulate, simulateIndex, simulateItem.key))\n                        simulateItem = simulate[simulateIndex]\n                        // if the remove didn't put the wanted item in place, we need to insert it\n                        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n                            inserts.push({key: wantedItem.key, to: k})\n                        }\n                        // items are matching, so skip ahead\n                        else {\n                            simulateIndex++\n                        }\n                    }\n                    else {\n                        inserts.push({key: wantedItem.key, to: k})\n                    }\n                }\n                else {\n                    inserts.push({key: wantedItem.key, to: k})\n                }\n                k++\n            }\n            // a key in simulate has no matching wanted key, remove it\n            else if (simulateItem && simulateItem.key) {\n                removes.push(remove(simulate, simulateIndex, simulateItem.key))\n            }\n        }\n        else {\n            simulateIndex++\n            k++\n        }\n    }\n\n    // remove all the remaining nodes from simulate\n    while(simulateIndex < simulate.length) {\n        simulateItem = simulate[simulateIndex]\n        removes.push(remove(simulate, simulateIndex, simulateItem && simulateItem.key))\n    }\n\n    // If the only moves we have are deletes then we can just\n    // let the delete patch remove these items.\n    if (removes.length === deletedItems && !inserts.length) {\n        return {\n            children: newChildren,\n            moves: null\n        }\n    }\n\n    return {\n        children: newChildren,\n        moves: {\n            removes: removes,\n            inserts: inserts\n        }\n    }\n}\n\nfunction remove(arr, index, key) {\n    arr.splice(index, 1)\n\n    return {\n        from: index,\n        key: key\n    }\n}\n\nfunction keyIndex(children) {\n    var keys = {}\n    var free = []\n    var length = children.length\n\n    for (var i = 0; i < length; i++) {\n        var child = children[i]\n\n        if (child.key) {\n            keys[child.key] = i\n        } else {\n            free.push(i)\n        }\n    }\n\n    return {\n        keys: keys,     // A hash of key name to index\n        free: free      // An array of unkeyed item indices\n    }\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n\n},{\"../vnode/handle-thunk\":244,\"../vnode/is-thunk\":245,\"../vnode/is-vnode\":247,\"../vnode/is-vtext\":248,\"../vnode/is-widget\":249,\"../vnode/vpatch\":252,\"./diff-props\":254,\"x-is-array\":256}],256:[function(require,module,exports){\nvar nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n\n},{}],\"client_runtime\":[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _assert = require('assert');\n\nvar _assert2 = _interopRequireDefault(_assert);\n\nvar _baconjs = require('baconjs');\n\nvar _baconjs2 = _interopRequireDefault(_baconjs);\n\nvar _immutable = require('immutable');\n\nvar _types = require('../../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _credentials = require('../../common/base/credentials');\n\nvar _credentials2 = _interopRequireDefault(_credentials);\n\nvar _redux_store = require('../../common/state_store/redux_store');\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _runtime_base = require('../../common/base/runtime_base');\n\nvar _runtime_base2 = _interopRequireDefault(_runtime_base);\n\nvar _rendering_default_plugin = require('../../common/default_plugins/rendering_default_plugin');\n\nvar _rendering_default_plugin2 = _interopRequireDefault(_rendering_default_plugin);\n\nvar _rendering_plugin = require('../../common/plugins/rendering_plugin');\n\nvar _rendering_plugin2 = _interopRequireDefault(_rendering_plugin);\n\nvar _console_logger = require('../loggers/console_logger');\n\nvar _console_logger2 = _interopRequireDefault(_console_logger);\n\nvar _stream_logger = require('../loggers/stream_logger');\n\nvar _stream_logger2 = _interopRequireDefault(_stream_logger);\n\nvar _service = require('./service');\n\nvar _service2 = _interopRequireDefault(_service);\n\nvar _ui = require('./ui');\n\nvar _ui2 = _interopRequireDefault(_ui);\n\nvar _router = require('./router');\n\nvar _router2 = _interopRequireDefault(_router);\n\nvar _display_command = require('../commands/display_command');\n\nvar _display_command2 = _interopRequireDefault(_display_command);\n\nvar _component = require('../base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // NPM IMPORTS\n\n\n// COMMON IMPORTS\n\n\n// BROWSER IMPORTS\n\n\nvar context = 'browser/runtime/client_runtime';\n\n/**\r\n * @file client runtime class - main library interface.\r\n * \r\n * @author Luc BORIES\r\n * \r\n * @license Apache-2.0\r\n */\n\nvar ClientRuntime = function (_RuntimeBase) {\n\t_inherits(ClientRuntime, _RuntimeBase);\n\n\t/**\r\n  * Create a client Runtime instance.\r\n  * @extends RuntimeBase\r\n  * \r\n  * \tAPI:\r\n  * \t\t->constructor()\r\n  * \t\t->load(arg_settings):nothing - Load runtime settings.\r\n  * \r\n  * \t\t->register_service(arg_svc_name, arg_svc_settings):Promise(Service) - Register a remote service.\r\n  * \t\t->service(arg_name):Service - Get a service by its name.\r\n  * \r\n  * \t\t->command(arg_name):object - Get a command by its name.\r\n  * \r\n  * \t\t->ping():nothing - Emit a ping request through SocketIO.\r\n  * \r\n  * \t\t->get_state_store():object - Get state store, a Redux data store.(INHERITED)\r\n  * \t\t->get_store_reducers():function - Get reducer pure function: (previous state, action) => new state.\r\n  * \t\t->handle_store_change():nothing - Handle Redux store changes.\r\n  * \t\t->create_store_observer(arg_component):unsubscribe function - Create a store change observer.\r\n  * \r\n  * \t\t->router():Router - Get runtime router.\r\n  * \r\n  * @returns {nothing}\r\n  */\n\tfunction ClientRuntime() {\n\t\t_classCallCheck(this, ClientRuntime);\n\n\t\t// INIT LOGGING FEATURE ON BROWSER\n\t\tvar _this = _possibleConstructorReturn(this, (ClientRuntime.__proto__ || Object.getPrototypeOf(ClientRuntime)).call(this, context));\n\n\t\tvar console_logger = new _console_logger2.default(true);\n\t\t_this.get_logger_manager().loggers.push(console_logger);\n\n\t\tvar stream_logger = new _stream_logger2.default(undefined, true);\n\t\t_this.get_logger_manager().loggers.push(stream_logger);\n\n\t\tstream_logger.get_stream().subscribe(function (arg_log) {\n\t\t\t// console.log(context + ':stream_logger:logs', arg_log)\n\t\t\tif (_this._state_store) {\n\t\t\t\tvar action = {\n\t\t\t\t\ttype: 'ADD_JSON_LOGS',\n\t\t\t\t\tlogs: arg_log.logs\n\t\t\t\t};\n\t\t\t\t_this._state_store.dispatch(action);\n\t\t\t}\n\t\t});\n\n\t\t_this.logs_stream = stream_logger.get_stream();\n\n\t\t_this.is_browser_runtime = true;\n\n\t\t_this.classes = {};\n\t\t_this.classes.T = _types2.default;\n\t\t_this.classes.DefaultRenderingPlugin = _rendering_default_plugin2.default;\n\t\t_this.classes.Component = _component2.default;\n\t\t_this.classes.RenderingPlugin = _rendering_plugin2.default;\n\n\t\t_this._services = {};\n\t\t_this._services_promises = {};\n\t\t_this._ui = undefined;\n\t\t_this._router = undefined;\n\t\t_this._commands = undefined;\n\n\t\t_this.info('Client Runtime is created');\n\n\t\t// this.enable_trace()\n\t\t_this.disable_trace();\n\t\t// this.update_trace_enabled()\n\t\treturn _this;\n\t}\n\n\t/**\r\n  * Get UI.\r\n  */\n\n\n\t_createClass(ClientRuntime, [{\n\t\tkey: 'ui',\n\t\tvalue: function ui() {\n\t\t\treturn this._ui;\n\t\t}\n\n\t\t/**\r\n   * \r\n   */\n\n\t}, {\n\t\tkey: 'shoud_log_bindingd_stream',\n\t\tvalue: function shoud_log_bindingd_stream() {\n\t\t\treturn false;\n\t\t}\n\n\t\t/**\r\n   * Get application initial state: from browser cache or from DOM script.\r\n   * \tState strategy is {\r\n   * \t\tsource:'browser' or 'session' or 'html',\r\n   * \t\tsave_period: 5000, milliseconds between two state saves, 0 to disable save\r\n   * \t\tstate_key: '...' name of the store key which corresponding value contains the key name of the application state.\r\n   * \t}\r\n   * \r\n   * @param {object} arg_app_state_strategy - strategy to manage application state.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'get_app_initial_state',\n\t\tvalue: function get_app_initial_state(arg_app_state_strategy) {\n\t\t\tvar browser_supports_storage = typeof Storage !== \"undefined\";\n\t\t\tvar source = _types2.default.isObject(arg_app_state_strategy) && browser_supports_storage ? arg_app_state_strategy.source : 'html';\n\t\t\tvar app_state_key = _types2.default.isObject(arg_app_state_strategy) && _types2.default.isString(arg_app_state_strategy.state_key) ? arg_app_state_strategy.state_key : '__DEVAPT_APP_STATE_KEY__';\n\n\t\t\tvar state = undefined;\n\t\t\tvar window_state = window ? window.__INITIAL_STATE__ : { error: 'no browser window object' };\n\t\t\tswitch (source) {\n\t\t\t\tcase 'browser':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar store_key = localStorage.getItem(app_state_key);\n\t\t\t\t\t\tif (!_types2.default.isString(store_key)) {\n\t\t\t\t\t\t\tstate = window_state;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar state_str = localStorage.getItem(store_key);\n\t\t\t\t\t\t// console.log('get_app_initial_state:state_str', typeof state_str)\n\t\t\t\t\t\tstate = _types2.default.isString(state_str) ? JSON.parse(state_str) : window_state;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'session':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _store_key = sessionStorage.getItem(app_state_key);\n\t\t\t\t\t\tif (!_types2.default.isString(_store_key)) {\n\t\t\t\t\t\t\tstate = window_state;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar _state_str = sessionStorage.getItem(_store_key);\n\t\t\t\t\t\t// console.log('get_app_initial_state:state_str', typeof state_str)\n\t\t\t\t\t\tstate = _types2.default.isString(_state_str) ? JSON.parse(_state_str) : window_state;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'html':\n\t\t\t\t\t{\n\t\t\t\t\t\tstate = window_state;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn state ? state : { error: 'no app state found' };\n\t\t}\n\n\t\t/**\r\n   * Configure application state save: to browser local or session storage.\r\n   * \tState strategy is {\r\n   * \t\tsource:'browser' or 'session' or 'html',\r\n   * \t\tsave_period: 5000, milliseconds between two state saves, 0 to disable save\r\n   * \t\tstate_key: '...' name of the store key which corresponding value contains the key name of the application state.\r\n   * \t}\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'init_app_state_save',\n\t\tvalue: function init_app_state_save() {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.enter_group('init_app_state_save');\n\n\t\t\t// GET AND CHECK PERIOD\n\t\t\tvar period = this.app_state_strategy.save_period;\n\t\t\tif (period == 0 || !_types2.default.isNumber(period)) {\n\t\t\t\tthis.leave_group('init_app_state_save:disabled with not period > 0');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (period < 3000) {\n\t\t\t\tperiod = 3000;\n\t\t\t}\n\n\t\t\t// CHECK STORAGE BROWSER SUPPORT\n\t\t\tvar browser_supports_storage = typeof Storage !== \"undefined\";\n\t\t\tif (!browser_supports_storage) {\n\t\t\t\tthis.error('init_app_state_save:no storage support');\n\t\t\t\tthis.leave_group('init_app_state_save:error');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// CHECK STRATEGY\n\t\t\tif (!_types2.default.isObject(this.app_state_strategy)) {\n\t\t\t\tthis.error('init_app_state_save:no state save strategy');\n\t\t\t\tthis.leave_group('init_app_state_save:error');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// GET ATTRIBUTES\n\t\t\tvar source = this.app_state_strategy.source;\n\t\t\tvar app_state_key = _types2.default.isString(this.app_state_strategy.state_key) ? this.app_state_strategy.state_key : '__DEVAPT_APP_STATE_KEY__';\n\n\t\t\tvar state = this._state_store.get_state();\n\t\t\tvar state_app = _types2.default.isObject(state) && state.getIn ? state.getIn(['credentials', 'application'], undefined) : undefined;\n\t\t\tvar app = _types2.default.isString(state_app) ? state_app.toLocaleUpperCase() : 'NO_APP_NAME';\n\t\t\tvar default_store_key = '__DEVAPT_APP_STATE_' + app + '__';\n\n\t\t\t// GET SAVE CALLBACK\n\t\t\tvar save_cb = undefined;\n\t\t\tswitch (source) {\n\t\t\t\tcase 'browser':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret = function () {\n\t\t\t\t\t\t\tvar store_key = localStorage.getItem(app_state_key);\n\t\t\t\t\t\t\tif (!_types2.default.isString(store_key)) {\n\t\t\t\t\t\t\t\tstore_key = default_store_key;\n\t\t\t\t\t\t\t\tlocalStorage.setItem(app_state_key, store_key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsave_cb = function save_cb() {\n\t\t\t\t\t\t\t\tvar state_str = JSON.stringify(_this2._state_store.get_state().toJS());\n\t\t\t\t\t\t\t\tlocalStorage.setItem(store_key, state_str);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn 'break';\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tif (_ret === 'break') break;\n\t\t\t\t\t}\n\t\t\t\tcase 'session':\n\t\t\t\t\t{\n\t\t\t\t\t\tvar _ret2 = function () {\n\t\t\t\t\t\t\tvar store_key = sessionStorage.getItem(app_state_key);\n\t\t\t\t\t\t\tif (!_types2.default.isString(store_key)) {\n\t\t\t\t\t\t\t\tstore_key = default_store_key;\n\t\t\t\t\t\t\t\tsessionStorage.setItem(app_state_key, store_key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsave_cb = function save_cb() {\n\t\t\t\t\t\t\t\tvar state_str = JSON.stringify(_this2._state_store.get_state().toJS());\n\t\t\t\t\t\t\t\tsessionStorage.setItem(store_key, state_str);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn 'break';\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tif (_ret2 === 'break') break;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\t// REGISTER PERIODICAL SAVES\n\t\t\tif (save_cb) {\n\t\t\t\tthis.info('init_app_state_save:register saves with period=%s', period);\n\t\t\t\tsetTimeout(save_cb, period);\n\t\t\t}\n\n\t\t\tthis.leave_group('init_app_state_save');\n\t\t}\n\n\t\t/**\r\n   * Load runtime settings.\r\n   * \r\n   * @param {object} arg_settings - runtime settings.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(arg_settings) {\n\t\t\tvar _this3 = this;\n\n\t\t\tthis.separate_level_1();\n\t\t\tthis.enter_group('load');\n\n\t\t\t// SET DEFAULT REMOTE LOGGING\n\t\t\t// const svc_logger_settings = ('default' in arg_settings) ? arg_settings['default'] : {}\n\t\t\t// this.loggers.push( new LoggerSvc(true, svc_logger_settings) )\n\n\t\t\t// GET INITIAL STATE\n\t\t\tvar initial_app_state = this.get_app_initial_state(arg_settings.app_state_strategy);\n\t\t\t// this.debug('initialState', initial_app_state)\n\t\t\tthis.app_state_strategy = arg_settings.app_state_strategy;\n\n\t\t\t// GET DEFAULT REDUCER\n\t\t\tif (_types2.default.isFunction(arg_settings.reducers)) {\n\t\t\t\tthis.default_reducer = arg_settings.reducers;\n\t\t\t} else {\n\t\t\t\tthis.default_reducer = function (arg_previous_state /*, arg_action*/) {\n\t\t\t\t\treturn arg_previous_state;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// CREATE STATE STORE\n\t\t\tvar reducer = this.get_store_reducers();\n\t\t\tvar self = this;\n\t\t\tthis._state_store = new _redux_store2.default(reducer, initial_app_state, context, this.logger_manager);\n\t\t\tthis._state_store_unsubscribe = this._state_store.subscribe(self.handle_store_change.bind(self));\n\t\t\tthis._state_store.dispatch({ type: 'store_created' });\n\n\t\t\t// CREATE CREDENTIALS INSTANCE\n\t\t\tvar credentials_settings = this._state_store.get_state().get('credentials', undefined);\n\t\t\tthis.debug('credentials_settings', credentials_settings);\n\n\t\t\tvar credentials_update_handler = function credentials_update_handler(arg_credentials_map) {\n\t\t\t\t_this3._state_store.dispatch({ type: 'SET_CREDENTIALS', credentials: arg_credentials_map });\n\t\t\t};\n\t\t\tvar credentials_datas = credentials_settings ? credentials_settings.toJS() : _credentials2.default.get_empty_credentials();\n\t\t\tthis.session_credentials = new _credentials2.default(credentials_datas, credentials_update_handler);\n\n\t\t\t// CREATE UI WRAPPER\n\t\t\tthis._ui = new _ui2.default(this, this._state_store);\n\n\t\t\t// CREATE NAVIGATION ROUTER\n\t\t\tthis._router = new _router2.default();\n\n\t\t\tthis._ui.load();\n\n\t\t\t// ADD COMMANDS ROUTE\n\t\t\tvar add_cmd_cb = function add_cmd_cb() {\n\t\t\t\t_this3._commands = _this3._state_store.get_state().get('commands', {}).toJS();\n\t\t\t\t_this3._commands_instances = {};\n\t\t\t\tObject.keys(_this3._commands).forEach(function (cmd_name) {\n\t\t\t\t\tvar cmd = _this3._commands[cmd_name];\n\n\t\t\t\t\tif (cmd.type != 'display') {\n\t\t\t\t\t\tconsole.warn('load:bad cmd [' + cmd_name + '] with type:' + cmd.type);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcmd.name = cmd_name;\n\t\t\t\t\tif (!(cmd_name in _this3._commands_instances)) {\n\t\t\t\t\t\t_this3._commands_instances[cmd_name] = new _display_command2.default(_this3, cmd);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar display_command = _this3._commands_instances[cmd_name];\n\t\t\t\t\tif (!display_command.is_valid()) {\n\t\t\t\t\t\t_this3.error('load:no route handler for cmd [' + cmd_name + ']:no valid command settings');\n\t\t\t\t\t\tconsole.error('load:no route handler for cmd [' + cmd_name + ']:no valid command settings');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar route = display_command.get_route();\n\t\t\t\t\t_this3.debug('load:add route handler for cmd [' + cmd_name + '] with route:' + route);\n\t\t\t\t\t// console.debug(context + ':load:add route handler for cmd [' + cmd_name + '] with route:' + route)\n\n\t\t\t\t\t_this3._router.add_handler(route, function () {\n\t\t\t\t\t\t// console.debug(context + ':load:execute handler for cmd [' + cmd_name + '] with route:' + route)\n\t\t\t\t\t\t_this3._ui.pipe_display_command(display_command);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tadd_cmd_cb();\n\n\t\t\t// ENABLE HASH HANDLING\n\t\t\tthis._router.init();\n\n\t\t\tthis.leave_group('load');\n\t\t\tthis.separate_level_1();\n\t\t}\n\n\t\t/**\r\n   * Register a remote service.\r\n   * \r\n   * @param {string} arg_svc_name - service name.\r\n   * @param {object} arg_svc_settings - service settings.\r\n   * \r\n   * @returns {Promise} - Promise(Service)\r\n   */\n\n\t}, {\n\t\tkey: 'register_service',\n\t\tvalue: function register_service(arg_svc_name, arg_svc_settings) {\n\t\t\tvar _this4 = this;\n\n\t\t\t// this.enable_trace()\n\t\t\tvar self = this;\n\t\t\tthis.enter_group('register_service:' + arg_svc_name);\n\n\t\t\tif (arg_svc_name in this._services_promises) {\n\t\t\t\tthis.leave_group('register_service:svc promise found for ' + arg_svc_name);\n\t\t\t\treturn this._services_promises[arg_svc_name];\n\t\t\t}\n\n\t\t\tthis.debug('register_service:create svc promise:' + arg_svc_name);\n\t\t\tthis._services_promises[arg_svc_name] = new Promise(function (resolve, reject) {\n\t\t\t\tself.register_service_self(resolve, reject, arg_svc_name, arg_svc_settings);\n\t\t\t}).then(function (service) {\n\t\t\t\t_this4.leave_group('register_service:svc promise created for ' + arg_svc_name);\n\t\t\t\treturn service;\n\t\t\t});\n\n\t\t\tthis.info('Client Service is created (async):' + arg_svc_name);\n\t\t\t// console.info('Client Service is created (async):' + arg_svc_name)\n\n\t\t\tthis.leave_group('register_service:async');\n\t\t\treturn this._services_promises[arg_svc_name];\n\t\t}\n\n\t\t/**\r\n   * Register a remote service (end of process).\r\n   * \r\n   * @param {string} arg_svc_name - service name.\r\n   * @param {object} arg_svc_settings - service settings.\r\n   * @param {Function} arg_resolve_cb - function to call when promise is resolved.\r\n   * @param {Function} arg_reject_cb - function to call when promise is rejected.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'register_service_self',\n\t\tvalue: function register_service_self(arg_resolve_cb, arg_reject_cb, arg_svc_name, arg_svc_settings) {\n\t\t\tvar self = this;\n\n\t\t\t// this.enter_group('register_service_self')\n\n\n\t\t\t// const app_credentials = this._state_store.get_state().get('credentials')\n\t\t\tvar app_credentials = this.session_credentials.get_credentials();\n\t\t\tvar request_svc_settings = 'request_settings';\n\t\t\tvar reply_svc_settings = 'reply_settings';\n\n\t\t\t// CHECK SERVICE NAME\n\t\t\tif (!_types2.default.isString(arg_svc_name)) {\n\t\t\t\tthis.error('register_service:svc promise rejected:' + arg_svc_name);\n\t\t\t\targ_reject_cb(context + ':register_service:bad service name string [' + arg_svc_name + ']');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// TEST IF SERVICE IS ALREADY REGISTERED\n\t\t\tif (this._services && arg_svc_name in this._services) {\n\t\t\t\tthis.debug('register_service_self:SERVICE IS ALREADY REGISTERED for ' + arg_svc_name);\n\n\t\t\t\tvar svc = this._services[arg_svc_name];\n\n\t\t\t\t// console.log(context + ':register_service_self:SERVICE IS ALREADY REGISTERED:svc', svc)\n\t\t\t\tthis.debug('register_service:svc promise resolved:' + arg_svc_name);\n\n\t\t\t\targ_resolve_cb(svc);\n\n\t\t\t\t// this.leave_group('register_service_self')\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// GET SERVICE SETTINGS FROM GIVEN SETTINGS\n\t\t\tif (_types2.default.isObject(arg_svc_settings)) {\n\t\t\t\tthis.debug('register_service_self:SERVICE FROM GIVEN SETTINGS for ' + arg_svc_name);\n\t\t\t\t// console.log(context + ':register_service_self:SERVICE FROM GIVEN SETTINGS:arg_svc_settings', arg_svc_settings)\n\n\t\t\t\t// GET APPLICATION CREDENTIALS\n\t\t\t\t// TODO CHECK CREDENTIAL FORMAT STRING -> MAP ?\n\t\t\t\targ_svc_settings.credentials = app_credentials;\n\n\t\t\t\t// console.log(context + ':register_service_self:credentials', arg_svc_settings.credentials = app_credentials)\n\n\t\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_svc_settings), context + ':register_service:bad service settings object');\n\n\t\t\t\tif (_types2.default.isString(arg_svc_settings.credentials)) {\n\t\t\t\t\targ_svc_settings.credentials = JSON.parse(arg_svc_settings.credentials);\n\t\t\t\t}\n\t\t\t\tvar _svc = new _service2.default(arg_svc_name, arg_svc_settings);\n\n\t\t\t\t// console.log(context + ':register_service_self:SERVICE FROM GIVEN SETTINGS:svc', svc)\n\n\t\t\t\tself._services[arg_svc_name] = _svc;\n\t\t\t\tthis.debug('register_service:svc promise resolved:' + arg_svc_name);\n\t\t\t\targ_resolve_cb(_svc);\n\n\t\t\t\t// this.leave_group('register_service_self')\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// GET SERVICE SETTINGS FROM SERVER SETTINGS: PROCESS RESPONSE\n\n\t\t\tvar svc_path = '/' + arg_svc_name;\n\t\t\tvar svc_socket = io(svc_path);\n\t\t\tvar get_settings_stream = _baconjs2.default.fromEvent(svc_socket, reply_svc_settings);\n\n\t\t\tthis.debug('register_service_self:SERVICE FROM SERVER SETTINGS for ' + arg_svc_name);\n\t\t\tget_settings_stream.onValue(function (response) {\n\t\t\t\t// console.log(context + ':register_service_self:SERVICE FROM SERVER SETTINGS:response', response)\n\n\t\t\t\targ_svc_settings = response.settings;\n\t\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_svc_settings), context + ':register_service:bad service settings object');\n\t\t\t\tself.debug('register_service_self:SERVICE FROM SERVER SETTINGS:arg_svc_settings', arg_svc_settings);\n\n\t\t\t\t// GET APPLICATION CREDENTIALS\n\t\t\t\t// TODO CHECK CREDENTIAL FORMAT STRING -> MAP ?\n\t\t\t\targ_svc_settings.credentials = app_credentials;\n\t\t\t\tif (_types2.default.isString(arg_svc_settings.credentials)) {\n\t\t\t\t\targ_svc_settings.credentials = JSON.parse(arg_svc_settings.credentials);\n\t\t\t\t}\n\n\t\t\t\tvar svc = new _service2.default(arg_svc_name, arg_svc_settings);\n\t\t\t\tself.debug('register_service_self:SERVICE FROM SERVER SETTINGS:svc', svc);\n\n\t\t\t\tself._services[arg_svc_name] = svc;\n\t\t\t\tdelete self._services_promises[arg_svc_name];\n\n\t\t\t\tself.debug('register_service:svc promise resolved:' + arg_svc_name);\n\t\t\t\targ_resolve_cb(svc);\n\t\t\t});\n\n\t\t\tget_settings_stream.onError(function (error) {\n\t\t\t\tself.error('register_service:svc promise rejected:' + arg_svc_name + ' with error:' + error);\n\t\t\t\targ_reject_cb(context + ':register_service:request error for  [' + arg_svc_name + '] error=' + error);\n\t\t\t});\n\n\t\t\t// GET SERVICE SETTINGS FROM SERVER SETTINGS: REQUEST SETTINGS\n\t\t\tvar payload = {\n\t\t\t\trequest: {\n\t\t\t\t\toperation: request_svc_settings,\n\t\t\t\t\toperands: []\n\t\t\t\t},\n\t\t\t\tcredentials: app_credentials\n\t\t\t};\n\t\t\tthis.debug('register_service_self:emit with path=' + request_svc_settings + ' and payload', payload.request.operation, payload.credentials);\n\t\t\tsvc_socket.emit(request_svc_settings, payload);\n\n\t\t\t// this.leave_group('register_service_self')\n\t\t}\n\n\t\t/**\r\n   * Get a service by its name.\r\n   * \r\n   * @param {string} arg_name - service name.\r\n   * \r\n   * @returns {Service}\r\n   */\n\n\t}, {\n\t\tkey: 'service',\n\t\tvalue: function service(arg_name) {\n\t\t\t// console.info('getting/creating service', arg_name)\n\t\t\treturn arg_name in this._services ? this._services[arg_name] : undefined;\n\t\t}\n\n\t\t/**\r\n   * Get a command by its name.\r\n   * \r\n   * @param {string} arg_name - command name.\r\n   * \r\n   * @returns {object}\r\n   */\n\n\t}, {\n\t\tkey: 'command',\n\t\tvalue: function command(arg_name) {\n\t\t\t// console.info('getting/creating service', arg_name)\n\t\t\treturn arg_name in this._commands ? this._commands[arg_name] : undefined;\n\t\t}\n\n\t\t/**\r\n   * Emit a ping request through SocketIO.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'ping',\n\t\tvalue: function ping() {\n\t\t\tvar socketio = io();\n\t\t\tsocketio.emit('ping');\n\t\t}\n\n\t\t/**\r\n   * Get store reducers.\r\n   * \r\n   * !!! Do not trace with Loggable.* into reducers with an enabled StreamLogger instance\r\n   *  because it dispatch its received trace to update app state.\r\n   * \r\n   * @returns {function} - reducer pure function: (previous state, action) => new state\r\n   */\n\n\t}, {\n\t\tkey: 'get_store_reducers',\n\t\tvalue: function get_store_reducers() {\n\t\t\tvar _this5 = this;\n\n\t\t\treturn function (arg_previous_state, arg_action) {\n\t\t\t\t// console.info('reducer 1:type=' + arg_action.type + ' for ' + arg_action.component)\n\n\t\t\t\t// ADD LOG RECORD\n\t\t\t\tif (_types2.default.isString(arg_action.type) && arg_action.type == 'ADD_JSON_LOGS' && _types2.default.isArray(arg_action.logs)) {\n\t\t\t\t\tvar path = ['logs', 'state', 'items'];\n\t\t\t\t\tvar logs = arg_previous_state.getIn(path, []).concat(arg_action.logs);\n\t\t\t\t\treturn arg_previous_state.setIn(path, logs);\n\t\t\t\t}\n\n\t\t\t\t// SET PAGE CONTENT\n\t\t\t\tif (_types2.default.isString(arg_action.type) && arg_action.type == 'SET_PAGE_CONTENT' && _types2.default.isString(arg_action.resource) && arg_action.resource == 'content') {\n\t\t\t\t\tif (_types2.default.isArray(arg_action.content_body)) {\n\t\t\t\t\t\tvar body_contents_path = ['views', 'content', 'state', 'body_contents'];\n\t\t\t\t\t\treturn arg_previous_state.setIn(body_contents_path, (0, _immutable.fromJS)(arg_action.content_body));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// ADD JSON RESOURCE SETTINGS\n\t\t\t\tif (_types2.default.isString(arg_action.type) && arg_action.type == 'ADD_JSON_RESOURCE' && _types2.default.isString(arg_action.resource) && _types2.default.isObject(arg_action.json)) {\n\t\t\t\t\t// console.log('reducer:ADD_JSON_RESOURCE', arg_action.resource, arg_action.json)\n\n\t\t\t\t\tif (_types2.default.isString(arg_action.collection)) {\n\t\t\t\t\t\tif (_types2.default.isArray(arg_action.path)) {\n\t\t\t\t\t\t\treturn arg_previous_state.setIn([arg_action.collection, arg_action.resource].concat(arg_action.path), (0, _immutable.fromJS)(arg_action.json));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn arg_previous_state.setIn([arg_action.collection, arg_action.resource], (0, _immutable.fromJS)(arg_action.json));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_types2.default.isArray(arg_action.path)) {\n\t\t\t\t\t\treturn arg_previous_state.setIn(arg_action.path, (0, _immutable.fromJS)(arg_action.json));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// SET SESSION CREDENTIALS\n\t\t\t\tif (_types2.default.isString(arg_action.type) && arg_action.type == 'SET_CREDENTIALS' && _types2.default.isObject(arg_action.credentials)) {\n\t\t\t\t\t// console.log('reducer:SET_CREDENTIALS', arg_action.credentials)\n\t\t\t\t\treturn arg_previous_state.set('credentials', arg_action.credentials);\n\t\t\t\t}\n\n\t\t\t\t// DISPATCH TO COMPONENTS REDUCERS\n\t\t\t\tif (_types2.default.isString(arg_action.component)) {\n\t\t\t\t\t// console.info(context + ':reducer 2:type=' + arg_action.type + ' for ' + arg_action.component)\n\t\t\t\t\tvar component = _this5._ui.get(arg_action.component);\n\n\t\t\t\t\tif (_types2.default.isObject(component) && component.is_component) {\n\t\t\t\t\t\t// console.info(context + ':reducer 3:type=' + arg_action.type + ' for ' + arg_action.component, component)\n\n\t\t\t\t\t\tif (_types2.default.isFunction(component.reduce_action)) {\n\t\t\t\t\t\t\t// console.info(context + ':reducer 4:type=' + arg_action.type + ' for ' + arg_action.component)\n\n\t\t\t\t\t\t\t// console.log(context + ':reducer 4:path', component.get_state_path())\n\t\t\t\t\t\t\t// console.log(context + ':reducer 4:arg_previous_state', arg_previous_state.toJS())\n\n\t\t\t\t\t\t\tvar prev_component_state = arg_previous_state.getIn(component.get_state_path());\n\t\t\t\t\t\t\tif (!prev_component_state) {\n\t\t\t\t\t\t\t\tconsole.log(context + ':reducer:arg_previous_state', arg_previous_state.toJS());\n\t\t\t\t\t\t\t\tconsole.log(context + ':reducer:component.get_state_path()', component.get_state_path());\n\t\t\t\t\t\t\t\tconsole.error(context + ':reducer:bad prev_component_state', prev_component_state);\n\t\t\t\t\t\t\t\treturn (0, _immutable.fromJS)({ error: 'no state' });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// console.log(context + ':reducer 4:prev_component_state', prev_component_state.toJS())\n\n\t\t\t\t\t\t\tvar new_component_state = component.reduce_action(prev_component_state, arg_action);\n\t\t\t\t\t\t\tif (new_component_state && new_component_state != prev_component_state) {\n\t\t\t\t\t\t\t\tvar prev_state_version = prev_component_state.get('state_version', 0);\n\t\t\t\t\t\t\t\tnew_component_state = new_component_state.set('state_version', prev_state_version + 1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// console.log(context + ':reducer 4:new_component_state', new_component_state.toJS())\n\n\t\t\t\t\t\t\tvar state = _this5._state_store.get_state();\n\t\t\t\t\t\t\tstate = state.setIn(component.get_state_path(), new_component_state);\n\t\t\t\t\t\t\t// console.log(context + ':reducer 4:state', state.toJS())\n\n\t\t\t\t\t\t\treturn state;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _this5.default_reducer(arg_previous_state, arg_action);\n\t\t\t};\n\t\t}\n\n\t\t/**\r\n   * Handle Redux store changes.\r\n   * \r\n   * !! Do not trace with Loggable.* here.\r\n   * \r\n   * @returns {nothing}\r\n   */\n\n\t}, {\n\t\tkey: 'handle_store_change',\n\t\tvalue: function handle_store_change() {}\n\t\t// let previous_state = this.current_state\n\t\t// this.current_state = this._state_store.get_state()\n\n\t\t/// TODO\n\n\t\t// this.info('handle_store_change:global', this._state_store.get_state())\n\n\n\t\t/**\r\n   * Create a store change observer.\r\n   * \r\n   * @param {Component} arg_component - component instance.\r\n   * \r\n   * @returns {function} - store unsubscribe function.\r\n   */\n\n\t}, {\n\t\tkey: 'create_store_observer',\n\t\tvalue: function create_store_observer(arg_component) {\n\t\t\t(0, _assert2.default)(_types2.default.isObject(arg_component) && arg_component.is_component, context + ':create_store_observer:bas component object');\n\n\t\t\tvar current_state = undefined;\n\n\t\t\tvar handle_change = function handle_change() {\n\t\t\t\tvar next_state = arg_component.get_state();\n\t\t\t\t// console.log(context + ':handle_change:arg_component', arg_component)\n\t\t\t\t// console.log(context + ':handle_change:next_state', next_state)\n\n\t\t\t\tif (next_state && !next_state.equals(current_state)) {\n\t\t\t\t\t// console.info(context + ':create_store_observer:state changes for ' + arg_component.get_name())\n\n\t\t\t\t\targ_component.handle_state_change(current_state, next_state);\n\t\t\t\t\tcurrent_state = next_state;\n\t\t\t\t}\n\t\t\t\t// else\n\t\t\t\t// {\n\t\t\t\t// \tconsole.info(context + ':create_store_observer:no state change for ' + arg_component.get_name())\n\t\t\t\t// }\n\t\t\t};\n\n\t\t\tvar unsubscribe = this._state_store.subscribe(handle_change);\n\n\t\t\thandle_change();\n\n\t\t\treturn unsubscribe;\n\t\t}\n\n\t\t/**\r\n   * Get runtime router.\r\n   * \r\n   * @returns {Router}\r\n   */\n\n\t}, {\n\t\tkey: 'router',\n\t\tvalue: function router() {\n\t\t\t(0, _assert2.default)(_types2.default.isObject(this._router), context + ':router:bad router object');\n\t\t\treturn this._router;\n\t\t}\n\t}]);\n\n\treturn ClientRuntime;\n}(_runtime_base2.default);\n\nexports.default = ClientRuntime;\n\n\n},{\"../../common/base/credentials\":33,\"../../common/base/runtime_base\":39,\"../../common/default_plugins/rendering_default_plugin\":42,\"../../common/plugins/rendering_plugin\":52,\"../../common/state_store/redux_store\":80,\"../../common/utils/types\":105,\"../base/component\":5,\"../commands/display_command\":13,\"../loggers/console_logger\":25,\"../loggers/stream_logger\":26,\"./router\":27,\"./service\":29,\"./ui\":30,\"assert\":107,\"baconjs\":108,\"immutable\":170}],\"devapt\":[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _types = require('../common/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _client_runtime = require('./runtime/client_runtime');\n\nvar _client_runtime2 = _interopRequireDefault(_client_runtime);\n\nvar _rendering_default_plugin = require('../common/default_plugins/rendering_default_plugin');\n\nvar _rendering_default_plugin2 = _interopRequireDefault(_rendering_default_plugin);\n\nvar _rendering_plugin = require('../common/plugins/rendering_plugin');\n\nvar _rendering_plugin2 = _interopRequireDefault(_rendering_plugin);\n\nvar _component = require('../browser/base/component');\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _container = require('../browser/base/container');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Main public part of Devapt library on client side\r\n * @name index.js\r\n * \r\n * @license Apache-2.0\r\n * @auhtor Luc BORIES\r\n */\n\n// BROWSER IMPORTS\n\n// COMMON IMPORTS\nexports.default = { T: _types2.default, runtime: _client_runtime2.default, Component: _component2.default, Container: _container2.default, RenderingPlugin: _rendering_plugin2.default, DefaultRenderingPlugin: _rendering_default_plugin2.default };\n// import es5 from '../common/utils/es5-compat'\n\n\n},{\"../browser/base/component\":5,\"../browser/base/container\":6,\"../common/default_plugins/rendering_default_plugin\":42,\"../common/plugins/rendering_plugin\":52,\"../common/utils/types\":105,\"./runtime/client_runtime\":\"client_runtime\"}],\"forge-browser\":[function(require,module,exports){\n(function (process,Buffer){\n(function(e,t){typeof define==\"function\"&&define.amd?define([],t):e.forge=t()})(this,function(){var e,t,n;return function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split(\"/\"),m=l.map,g=m&&m[\"*\"]||{};if(e&&e.charAt(0)===\".\")if(t){v=v.slice(0,v.length-1),e=e.split(\"/\"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,\"\")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===\".\")e.splice(c,1),c-=1;else if(p===\"..\"){if(c===1&&(e[2]===\"..\"||e[0]===\"..\"))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join(\"/\")}else e.indexOf(\"./\")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split(\"/\");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join(\"/\");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join(\"/\")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join(\"/\"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error(\"No \"+e);return a[e]}function E(e){var t,n=e?e.indexOf(\"!\"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+\"!\"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!=\"undefined\"?t:a[e]={}},module:function(e){return{id:e,uri:\"\",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y===\"undefined\"||y===\"function\"){t=!t.length&&n.length?[\"require\",\"exports\",\"module\"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l===\"require\")m[d]=u.require(e);else if(l===\"exports\")m[d]=u.exports(e),E=!0;else if(l===\"module\")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+\" missing \"+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e==\"string\")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n==\"function\"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n(\"node_modules/almond/almond\",function(){}),function(){function e(e){function n(e){this.data=\"\",this.read=0;if(typeof e==\"string\")this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e)){var r=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,r)}catch(i){for(var s=0;s<r.length;++s)this.putByte(r[s])}}else if(e instanceof n||typeof e==\"object\"&&typeof e.data==\"string\"&&typeof e.read==\"number\")this.data=e.data,this.read=e.read;this._constructedStringLength=0}function i(e,n){n=n||{},this.read=n.readOffset||0,this.growSize=n.growSize||1024;var r=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(r||i){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write=\"writeOffset\"in n?n.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!==null&&e!==undefined&&this.putBytes(e),\"writeOffset\"in n&&(this.write=n.writeOffset)}var t=e.util=e.util||{};(function(){if(typeof process!=\"undefined\"&&process.nextTick){t.nextTick=process.nextTick,typeof setImmediate==\"function\"?t.setImmediate=setImmediate:t.setImmediate=t.nextTick;return}if(typeof setImmediate==\"function\"){t.setImmediate=function(){return setImmediate.apply(undefined,arguments)},t.nextTick=function(e){return setImmediate(e)};return}t.setImmediate=function(e){setTimeout(e,0)};if(typeof window!=\"undefined\"&&typeof window.postMessage==\"function\"){var e=\"forge.setImmediate\",n=[];t.setImmediate=function(t){n.push(t),n.length===1&&window.postMessage(e,\"*\")};function r(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach(function(e){e()})}}window.addEventListener(\"message\",r,!0)}if(typeof MutationObserver!=\"undefined\"){var i=Date.now(),s=!0,o=document.createElement(\"div\"),n=[];(new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})})).observe(o,{attributes:!0});var u=t.setImmediate;t.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),u(e)):(n.push(e),n.length===1&&o.setAttribute(\"a\",s=!s))}}t.nextTick=t.setImmediate})(),t.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)===\"[object Array]\"},t.isArrayBuffer=function(e){return typeof ArrayBuffer!=\"undefined\"&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&e.byteLength!==undefined},t.ByteBuffer=n,t.ByteStringBuffer=n;var r=4096;t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>r&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);var n=this.data;while(t>0)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){var n=\"\";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t=\"\":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return typeof e==\"undefined\"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data=\"\",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){var e=\"\";for(var t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+=\"0\"),e+=n.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=i,t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,n){if(t.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var s=new Uint8Array(this.data.buffer,this.write);return s.set(r),this.write+=i,this}if(t.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var s=new Uint8Array(this.data.buffer);return s.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof t.DataBuffer||typeof e==\"object\"&&typeof e.read==\"number\"&&typeof e.write==\"number\"&&t.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var s=new Uint8Array(e.data.byteLength,this.write);return s.set(r),this.write+=r.byteLength,this}e instanceof t.ByteStringBuffer&&(e=e.data,n=\"binary\"),n=n||\"binary\";if(typeof e==\"string\"){var o;if(n===\"hex\")return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if(n===\"base64\")return this.accommodate(Math.ceil(e.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;n===\"utf8\"&&(e=t.encodeUtf8(e),n=\"binary\");if(n===\"binary\"||n===\"raw\")return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if(n===\"utf16\")return this.accommodate(e.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error(\"Invalid encoding: \"+n)}throw Error(\"Invalid parameter: \"+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,\"utf16\")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t=\"\":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return typeof e==\"undefined\"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){var e=\"\";for(var t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+=\"0\"),e+=n.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var n=new Uint8Array(this.data,this.read,this.length());e=e||\"utf8\";if(e===\"binary\"||e===\"raw\")return t.binary.raw.encode(n);if(e===\"hex\")return t.binary.hex.encode(n);if(e===\"base64\")return t.binary.base64.encode(n);if(e===\"utf8\")return t.text.utf8.decode(n);if(e===\"utf16\")return t.text.utf16.decode(n);throw new Error(\"Invalid encoding: \"+e)},t.createBuffer=function(e,n){return n=n||\"raw\",e!==undefined&&n===\"utf8\"&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){var n=\"\";while(t>0)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n},t.xorBytes=function(e,t,n){var r=\"\",i=\"\",s=\"\",o=0,u=0;for(;n>0;--n,++o)i=e.charCodeAt(o)^t.charCodeAt(o),u>=10&&(r+=s,s=\"\",u=0),s+=String.fromCharCode(i),++u;return r+=s,r},t.hexToBytes=function(e){var t=\"\",n=0;e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));for(;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];t.encode64=function(e,t){var n=\"\",r=\"\",i,o,u,a=0;while(a<e.length)i=e.charCodeAt(a++),o=e.charCodeAt(a++),u=e.charCodeAt(a++),n+=s.charAt(i>>2),n+=s.charAt((i&3)<<4|o>>4),isNaN(o)?n+=\"==\":(n+=s.charAt((o&15)<<2|u>>6),n+=isNaN(u)?\"=\":s.charAt(u&63)),t&&n.length>t&&(r+=n.substr(0,t)+\"\\r\\n\",n=n.substr(t));return r+=n,r},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");var t=\"\",n,r,i,s,u=0;while(u<e.length)n=o[e.charCodeAt(u++)-43],r=o[e.charCodeAt(u++)-43],i=o[e.charCodeAt(u++)-43],s=o[e.charCodeAt(u++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;var i=n;for(var s=0;s<e.length;++s)r[i++]=e.charCodeAt(s);return t?i-n:r},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,s=n;e.length&1&&(i=1,r[s++]=parseInt(e[0],16));for(;i<e.length;i+=2)r[s++]=parseInt(e.substr(i,2),16);return t?s-n:r},t.binary.base64.encode=function(e,t){var n=\"\",r=\"\",i,o,u,a=0;while(a<e.byteLength)i=e[a++],o=e[a++],u=e[a++],n+=s.charAt(i>>2),n+=s.charAt((i&3)<<4|o>>4),isNaN(o)?n+=\"==\":(n+=s.charAt((o&15)<<2|u>>6),n+=isNaN(u)?\"=\":s.charAt(u&63)),t&&n.length>t&&(r+=n.substr(0,t)+\"\\r\\n\",n=n.substr(t));return r+=n,r},t.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\"),n=n||0;var i,s,u,a,f=0,l=n;while(f<e.length)i=o[e.charCodeAt(f++)-43],s=o[e.charCodeAt(f++)-43],u=o[e.charCodeAt(f++)-43],a=o[e.charCodeAt(f++)-43],r[l++]=i<<2|s>>4,u!==64&&(r[l++]=(s&15)<<4|u>>2,a!==64&&(r[l++]=(u&3)<<6|a));return t?l-n:r.subarray(0,l)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,n,r){e=t.encodeUtf8(e);var i=n;i||(i=new Uint8Array(e.length)),r=r||0;var s=r;for(var o=0;o<e.length;++o)i[s++]=e.charCodeAt(o);return n?s-r:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;var s=n,o=n;for(var u=0;u<e.length;++u)i[o++]=e.charCodeAt(u),s+=2;return t?s-n:r},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,n,r){n=t.decode64(e.deflate(t.encode64(n)).rval);if(r){var i=2,s=n.charCodeAt(1);s&32&&(i=6),n=n.substring(i,n.length-4)}return n},t.inflate=function(e,n,r){var i=e.inflate(t.encode64(n)).rval;return i===null?null:t.decode64(i)};var u=function(e,n,r){if(!e)throw new Error(\"WebStorage not available.\");var i;r===null?i=e.removeItem(n):(r=t.encode64(JSON.stringify(r)),i=e.setItem(n,r));if(typeof i!=\"undefined\"&&i.rval!==!0){var s=new Error(i.error.message);throw s.id=i.error.id,s.name=i.error.name,s}},a=function(e,n){if(!e)throw new Error(\"WebStorage not available.\");var r=e.getItem(n);if(e.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(t.decode64(r))),r},f=function(e,t,n,r){var i=a(e,t);i===null&&(i={}),i[n]=r,u(e,t,i)},l=function(e,t,n){var r=a(e,t);return r!==null&&(r=n in r?r[n]:null),r},c=function(e,t,n){var r=a(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var s in r){i=!1;break}i&&(r=null),u(e,t,r)}},h=function(e,t){u(e,t,null)},p=function(e,t,n){var r=null;typeof n==\"undefined\"&&(n=[\"web\",\"flash\"]);var i,s=!1,o=null;for(var u in n){i=n[u];try{if(i===\"flash\"||i===\"both\"){if(t[0]===null)throw new Error(\"Flash local storage not available.\");r=e.apply(this,t),s=i===\"flash\"}if(i===\"web\"||i===\"both\")t[0]=localStorage,r=e.apply(this,t),s=!0}catch(a){o=a}if(s)break}if(!s)throw o;return r};t.setItem=function(e,t,n,r,i){p(f,arguments,i)},t.getItem=function(e,t,n,r){return p(l,arguments,r)},t.removeItem=function(e,t,n,r){p(c,arguments,r)},t.clearItems=function(e,t,n){p(h,arguments,n)},t.parseUrl=function(e){var t=/^(https?):\\/\\/([^:&^\\/]*):?(\\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=n===null?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?r.port!==80&&r.scheme===\"http\"?r.fullHost+=\":\"+r.port:r.port!==443&&r.scheme===\"https\"&&(r.fullHost+=\":\"+r.port):r.scheme===\"http\"?r.port=80:r.scheme===\"https\"&&(r.port=443),r.full=r.scheme+\"://\"+r.fullHost),r};var d=null;t.getQueryVariables=function(e){var t=function(e){var t={},n=e.split(\"&\");for(var r=0;r<n.length;r++){var i=n[r].indexOf(\"=\"),s,o;i>0?(s=n[r].substring(0,i),o=n[r].substring(i+1)):(s=n[r],o=null),s in t||(t[s]=[]),!(s in Object.prototype)&&o!==null&&t[s].push(unescape(o))}return t},n;return typeof e==\"undefined\"?(d===null&&(typeof window!=\"undefined\"&&window.location&&window.location.search?d=t(window.location.search.substring(1)):d={}),n=d):n=t(e),n},t.parseFragment=function(e){var n=e,r=\"\",i=e.indexOf(\"?\");i>0&&(n=e.substring(0,i),r=e.substring(i+1));var s=n.split(\"/\");s.length>0&&s[0]===\"\"&&s.shift();var o=r===\"\"?{}:t.getQueryVariables(r);return{pathString:n,queryString:r,path:s,query:o}},t.makeRequest=function(e){var n=t.parseFragment(e),r={path:n.pathString,query:n.queryString,getPath:function(e){return typeof e==\"undefined\"?n.path:n.path[e]},getQuery:function(e,t){var r;return typeof e==\"undefined\"?r=n.query:(r=n.query[e],r&&typeof t!=\"undefined\"&&(r=r[t])),r},getQueryLast:function(e,t){var n,i=r.getQuery(e);return i?n=i[i.length-1]:n=t,n}};return r},t.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join(\"/\"):e;var r=jQuery.param(t||{});return n=n||\"\",e+(r.length>0?\"?\"+r:\"\")+(n.length>0?\"#\"+n:\"\")},t.setPath=function(e,t,n){if(typeof e==\"object\"&&e!==null){var r=0,i=t.length;while(r<i){var s=t[r++];if(r==i)e[s]=n;else{var o=s in e;if(!o||o&&typeof e[s]!=\"object\"||o&&e[s]===null)e[s]={};e=e[s]}}}},t.getPath=function(e,t,n){var r=0,i=t.length,s=!0;while(s&&r<i&&typeof e==\"object\"&&e!==null){var o=t[r++];s=o in e,s&&(e=e[o])}return s?e:n},t.deletePath=function(e,t){if(typeof e==\"object\"&&e!==null){var n=0,r=t.length;while(n<r){var i=t[n++];if(n==r)delete e[i];else{if(!(i in e&&typeof e[i]==\"object\"&&e[i]!==null))break;e=e[i]}}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){var t=/%./g,n,r,i=0,s=[],o=0;while(n=t.exec(e)){r=e.substring(o,t.lastIndex-2),r.length>0&&s.push(r),o=t.lastIndex;var u=n[0][1];switch(u){case\"s\":case\"o\":i<arguments.length?s.push(arguments[i++ +1]):s.push(\"<?>\");break;case\"%\":s.push(\"%\");break;default:s.push(\"<%\"+u+\"?>\")}}return s.push(e.substring(o)),s.join(\"\")},t.formatNumber=function(e,t,n,r){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=n===undefined?\",\":n,u=r===undefined?\".\":r,a=i<0?\"-\":\"\",f=parseInt(i=Math.abs(+i||0).toFixed(s),10)+\"\",l=f.length>3?f.length%3:0;return a+(l?f.substr(0,l)+u:\"\")+f.substr(l).replace(/(\\d{3})(?=\\d)/g,\"$1\"+u)+(s?o+Math.abs(i-f).toFixed(s).slice(2):\"\")},t.formatSize=function(e){return e>=1073741824?e=t.formatNumber(e/1073741824,2,\".\",\"\")+\" GiB\":e>=1048576?e=t.formatNumber(e/1048576,2,\".\",\"\")+\" MiB\":e>=1024?e=t.formatNumber(e/1024,0)+\" KiB\":e=t.formatNumber(e,0)+\" bytes\",e},t.bytesFromIP=function(e){return e.indexOf(\".\")!==-1?t.bytesFromIPv4(e):e.indexOf(\":\")!==-1?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){e=e.split(\".\");if(e.length!==4)return null;var n=t.createBuffer();for(var r=0;r<e.length;++r){var i=parseInt(e[r],10);if(isNaN(i))return null;n.putByte(i)}return n.getBytes()},t.bytesFromIPv6=function(e){var n=0;e=e.split(\":\").filter(function(e){return e.length===0&&++n,!0});var r=(8-e.length+n)*2,i=t.createBuffer();for(var s=0;s<8;++s){if(!e[s]||e[s].length===0){i.fillWithByte(0,r),r=0;continue}var o=t.hexToBytes(e[s]);o.length<2&&i.putByte(0),i.putBytes(o)}return i.getBytes()},t.bytesToIP=function(e){return e.length===4?t.bytesToIPv4(e):e.length===16?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(e.length!==4)return null;var t=[];for(var n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(\".\")},t.bytesToIPv6=function(e){if(e.length!==16)return null;var n=[],r=[],i=0;for(var s=0;s<e.length;s+=2){var o=t.bytesToHex(e[s]+e[s+1]);while(o[0]===\"0\"&&o!==\"0\")o=o.substr(1);if(o===\"0\"){var u=r[r.length-1],a=n.length;!u||a!==u.end+1?r.push({start:a,end:a}):(u.end=a,u.end-u.start>r[i].end-r[i].start&&(i=r.length-1))}n.push(o)}if(r.length>0){var f=r[i];f.end-f.start>0&&(n.splice(f.start,f.end-f.start+1,\"\"),f.start===0&&n.unshift(\"\"),f.end===7&&n.push(\"\"))}return n.join(\":\")},t.estimateCores=function(e,n){function i(e,u,a){if(u===0){var f=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return t.cores=Math.max(1,f),URL.revokeObjectURL(r),n(null,t.cores)}s(a,function(t,n){e.push(o(a,n)),i(e,u-1,a)})}function s(e,t){var n=[],i=[];for(var s=0;s<e;++s){var o=new Worker(r);o.addEventListener(\"message\",function(r){i.push(r.data);if(i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}}),n.push(o)}for(var s=0;s<e;++s)n[s].postMessage(s)}function o(e,t){var n=[];for(var r=0;r<e;++r){var i=t[r],s=n[r]=[];for(var o=0;o<e;++o){if(r===o)continue;var u=t[o];(i.st>u.st&&i.st<u.et||u.st>i.st&&u.st<i.et)&&s.push(o)}}return n.reduce(function(e,t){return Math.max(e,t.length)},0)}typeof e==\"function\"&&(n=e,e={}),e=e||{};if(\"cores\"in t&&!e.update)return n(null,t.cores);if(typeof navigator!=\"undefined\"&&\"hardwareConcurrency\"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,n(null,t.cores);if(typeof Worker==\"undefined\")return t.cores=1,n(null,t.cores);if(typeof Blob==\"undefined\")return t.cores=2,n(null,t.cores);var r=URL.createObjectURL(new Blob([\"(\",function(){self.addEventListener(\"message\",function(e){var t=Date.now(),n=t+4;while(Date.now()<n);self.postMessage({st:t,et:n})})}.toString(),\")()\"],{type:\"application/javascript\"}));i([],5,16)}}var r=\"util\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/util\",[\"require\",\"module\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(t,n){var r=t;typeof r==\"string\"&&(r=e.cipher.getAlgorithm(r),r&&(r=r()));if(!r)throw new Error(\"Unsupported algorithm: \"+t);return new e.cipher.BlockCipher({algorithm:r,key:n,decrypt:!1})},e.cipher.createDecipher=function(t,n){var r=t;typeof r==\"string\"&&(r=e.cipher.getAlgorithm(r),r&&(r=r()));if(!r)throw new Error(\"Unsupported algorithm: \"+t);return new e.cipher.BlockCipher({algorithm:r,key:n,decrypt:!0})},e.cipher.registerAlgorithm=function(t,n){t=t.toUpperCase(),e.cipher.algorithms[t]=n},e.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in e.cipher.algorithms?e.cipher.algorithms[t]:null};var t=e.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};t.prototype.start=function(t){t=t||{};var n={};for(var r in t)n[r]=t[r];n.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=t.output||e.util.createBuffer(),this.mode.start(n)},t.prototype.update=function(e){e&&this._input.putBuffer(e);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},t.prototype.finish=function(e){e&&(this.mode.name===\"ECB\"||this.mode.name===\"CBC\")&&(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)?!1:(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)?!1:!0)}}var r=\"cipher\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/cipher\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(t){typeof t==\"string\"&&(t=e.util.createBuffer(t));if(e.util.isArray(t)&&t.length>4){var n=t;t=e.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}return e.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function r(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,e&4294967295]}e.cipher=e.cipher||{};var t=e.cipher.modes=e.cipher.modes||{};t.ecb=function(e){e=e||{},this.name=\"ECB\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},t.cbc=function(e){e=e||{},this.name=\"CBC\",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error(\"Invalid IV parameter.\");this._iv=this._prev.slice(0)}else{if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=n(e.iv),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)},t.cfb=function(t){t=t||{},this.name=\"CFB\",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},t.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},t.ofb=function(t){t=t||{},this.name=\"OFB\",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(t){t=t||{},this.name=\"CTR\",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!(\"iv\"in e))throw new Error(\"Invalid IV parameter.\");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,n){var i=e.length();if(i===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&i>=this.blockSize)for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(t){t=t||{},this.name=\"GCM\",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(t){if(!(\"iv\"in t))throw new Error(\"Invalid IV parameter.\");var n=e.util.createBuffer(t.iv);this._cipherLength=0;var s;\"additionalData\"in t?s=e.util.createBuffer(t.additionalData):s=e.util.createBuffer(),\"tagLength\"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null;if(t.decrypt){this._tag=e.util.createBuffer(t.tag).getBytes();if(this._tag.length!==this._tagLength/8)throw new Error(\"Authentication tag does not match tag length.\")}this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=n.length();if(o===12)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{this._j0=[0,0,0,0];while(n.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(o*8)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,s=e.util.createBuffer(s),this._aDataLength=i(s.length()*8);var u=s.length()%this.blockSize;u&&s.fillWithByte(0,this.blockSize-u),this._s=[0,0,0,0];while(s.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[s.getInt32(),s.getInt32(),s.getInt32(),s.getInt32()])},t.gcm.prototype.encrypt=function(e,t,n){var i=e.length();if(i===0)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(this._partialBytes===0&&i>=this.blockSize){for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(o===0||n){if(n){var u=i%this.blockSize;this._cipherLength+=u,this._partialOutput.truncate(this.blockSize-u)}else this._cipherLength+=this.blockSize;for(var s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes);if(o>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,n){var i=e.length();if(i<this.blockSize&&!(n&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^this._hashBlock[s]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(t,n){var r=!0;n.decrypt&&n.overflow&&t.truncate(this.blockSize-n.overflow),this.tag=e.util.createBuffer();var s=this._aDataLength.concat(i(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,s);var o=[];this.cipher.encrypt(this._j0,o);for(var u=0;u<this._ints;++u)this.tag.putInt32(this._s[u]^o[u]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},t.gcm.prototype.multiply=function(e,t){var n=[0,0,0,0],r=t.slice(0);for(var i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},t.gcm.prototype.pow=function(e,t){var n=e[3]&1;for(var r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){var t=[0,0,0,0];for(var n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,s=this._m[n][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t},t.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){var n=8/t,r=4*n,i=16*n,s=new Array(i);for(var o=0;o<i;++o){var u=[0,0,0,0],a=o/r|0,f=(r-1-o%r)*t;u[a]=1<<t-1<<f,s[o]=this.generateSubHashTable(this.multiply(u,e),t)}return s},t.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);var s=r>>>1;while(s>0)this.pow(i[2*s],i[s]=[]),s>>=1;s=2;while(s<r){for(var o=1;o<s;++o){var u=i[s],a=i[o];i[s+o]=[u[0]^a[0],u[1]^a[1],u[2]^a[2],u[3]^a[3]]}s*=2}i[0]=[0,0,0,0];for(s=r+1;s<n;++s){var f=i[s^r];i[s]=[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}return i}}var r=\"cipherModes\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/cipherModes\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n){var r=function(){return new e.aes.Algorithm(t,n)};e.cipher.registerAlgorithm(t,r)}function f(){n=!0,o=[0,1,2,4,8,16,32,64,128,27,54];var e=new Array(256);for(var t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;i=new Array(256),s=new Array(256),u=new Array(4),a=new Array(4);for(var t=0;t<4;++t)u[t]=new Array(256),a[t]=new Array(256);var r=0,f=0,l,c,h,p,d,v,m;for(var t=0;t<256;++t){p=f^f<<1^f<<2^f<<3^f<<4,p=p>>8^p&255^99,i[r]=p,s[p]=r,d=e[p],l=e[r],c=e[l],h=e[c],v=d<<24^p<<16^p<<8^(p^d),m=(l^c^h)<<24^(r^h)<<16^(r^c^h)<<8^(r^l^h);for(var g=0;g<4;++g)u[g][r]=v,a[g][p]=m,v=v<<24|v>>>8,m=m<<24|m>>>8;r===0?r=f=1:(r=l^e[e[e[l^h]]],f^=e[e[f]])}}function l(e,t){var n=e.slice(0),s,u=1,f=n.length,l=f+6+1,c=r*l;for(var h=f;h<c;++h)s=n[h-1],h%f===0?(s=i[s>>>16&255]<<24^i[s>>>8&255]<<16^i[s&255]<<8^i[s>>>24]^o[u]<<24,u++):f>6&&h%f===4&&(s=i[s>>>24]<<24^i[s>>>16&255]<<16^i[s>>>8&255]<<8^i[s&255]),n[h]=n[h-f]^s;if(t){var p,d=a[0],v=a[1],m=a[2],g=a[3],y=n.slice(0);c=n.length;for(var h=0,b=c-r;h<c;h+=r,b-=r)if(h===0||h===c-r)y[h]=n[b],y[h+1]=n[b+3],y[h+2]=n[b+2],y[h+3]=n[b+1];else for(var w=0;w<r;++w)p=n[b+w],y[h+(3&-w)]=d[i[p>>>24]]^v[i[p>>>16&255]]^m[i[p>>>8&255]]^g[i[p&255]];n=y}return n}function c(e,t,n,r){var o=e.length/4-1,f,l,c,h,p;r?(f=a[0],l=a[1],c=a[2],h=a[3],p=s):(f=u[0],l=u[1],c=u[2],h=u[3],p=i);var d,v,m,g,y,b,w;d=t[0]^e[0],v=t[r?3:1]^e[1],m=t[2]^e[2],g=t[r?1:3]^e[3];var E=3;for(var S=1;S<o;++S)y=f[d>>>24]^l[v>>>16&255]^c[m>>>8&255]^h[g&255]^e[++E],b=f[v>>>24]^l[m>>>16&255]^c[g>>>8&255]^h[d&255]^e[++E],w=f[m>>>24]^l[g>>>16&255]^c[d>>>8&255]^h[v&255]^e[++E],g=f[g>>>24]^l[d>>>16&255]^c[v>>>8&255]^h[m&255]^e[++E],d=y,v=b,m=w;n[0]=p[d>>>24]<<24^p[v>>>16&255]<<16^p[m>>>8&255]<<8^p[g&255]^e[++E],n[r?3:1]=p[v>>>24]<<24^p[m>>>16&255]<<16^p[g>>>8&255]<<8^p[d&255]^e[++E],n[2]=p[m>>>24]<<24^p[g>>>16&255]<<16^p[d>>>8&255]<<8^p[v&255]^e[++E],n[r?1:3]=p[g>>>24]<<24^p[d>>>16&255]<<16^p[v>>>8&255]<<8^p[m&255]^e[++E]}function h(t){t=t||{};var n=(t.mode||\"CBC\").toUpperCase(),r=\"AES-\"+n,i;t.decrypt?i=e.cipher.createDecipher(r,t.key):i=e.cipher.createCipher(r,t.key);var s=i.start;return i.start=function(t,n){var r=null;n instanceof e.util.ByteBuffer&&(r=n,n={}),n=n||{},n.output=r,n.iv=t,s.call(i,n)},i}e.aes=e.aes||{},e.aes.startEncrypting=function(e,t,n,r){var i=h({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i},e.aes.createEncryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!1,mode:t})},e.aes.startDecrypting=function(e,t,n,r){var i=h({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i},e.aes.createDecryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!0,mode:t})},e.aes.Algorithm=function(e,t){n||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return c(r._w,e,t,!1)},decrypt:function(e,t){return c(r._w,e,t,!0)}}}),r._init=!1},e.aes.Algorithm.prototype.initialize=function(t){if(this._init)return;var n=t.key,r;if(typeof n!=\"string\"||n.length!==16&&n.length!==24&&n.length!==32){if(e.util.isArray(n)&&(n.length===16||n.length===24||n.length===32)){r=n,n=e.util.createBuffer();for(var i=0;i<r.length;++i)n.putByte(r[i])}}else n=e.util.createBuffer(n);if(!e.util.isArray(n)){r=n,n=[];var s=r.length();if(s===16||s===24||s===32){s>>>=2;for(var i=0;i<s;++i)n.push(r.getInt32())}}if(!e.util.isArray(n)||n.length!==4&&n.length!==6&&n.length!==8)throw new Error(\"Invalid key parameter.\");var o=this.mode.name,u=[\"CFB\",\"OFB\",\"CTR\",\"GCM\"].indexOf(o)!==-1;this._w=l(n,t.decrypt&&!u),this._init=!0},e.aes._expandKey=function(e,t){return n||f(),l(e,t)},e.aes._updateBlock=c,t(\"AES-ECB\",e.cipher.modes.ecb),t(\"AES-CBC\",e.cipher.modes.cbc),t(\"AES-CFB\",e.cipher.modes.cfb),t(\"AES-OFB\",e.cipher.modes.ofb),t(\"AES-CTR\",e.cipher.modes.ctr),t(\"AES-GCM\",e.cipher.modes.gcm);var n=!1,r=4,i,s,o,u,a}var r=\"aes\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/aes\",[\"require\",\"module\",\"./cipher\",\"./cipherModes\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.pki=e.pki||{};var t=e.pki.oids=e.oids=e.oids||{};t[\"1.2.840.113549.1.1.1\"]=\"rsaEncryption\",t.rsaEncryption=\"1.2.840.113549.1.1.1\",t[\"1.2.840.113549.1.1.4\"]=\"md5WithRSAEncryption\",t.md5WithRSAEncryption=\"1.2.840.113549.1.1.4\",t[\"1.2.840.113549.1.1.5\"]=\"sha1WithRSAEncryption\",t.sha1WithRSAEncryption=\"1.2.840.113549.1.1.5\",t[\"1.2.840.113549.1.1.7\"]=\"RSAES-OAEP\",t[\"RSAES-OAEP\"]=\"1.2.840.113549.1.1.7\",t[\"1.2.840.113549.1.1.8\"]=\"mgf1\",t.mgf1=\"1.2.840.113549.1.1.8\",t[\"1.2.840.113549.1.1.9\"]=\"pSpecified\",t.pSpecified=\"1.2.840.113549.1.1.9\",t[\"1.2.840.113549.1.1.10\"]=\"RSASSA-PSS\",t[\"RSASSA-PSS\"]=\"1.2.840.113549.1.1.10\",t[\"1.2.840.113549.1.1.11\"]=\"sha256WithRSAEncryption\",t.sha256WithRSAEncryption=\"1.2.840.113549.1.1.11\",t[\"1.2.840.113549.1.1.12\"]=\"sha384WithRSAEncryption\",t.sha384WithRSAEncryption=\"1.2.840.113549.1.1.12\",t[\"1.2.840.113549.1.1.13\"]=\"sha512WithRSAEncryption\",t.sha512WithRSAEncryption=\"1.2.840.113549.1.1.13\",t[\"1.3.14.3.2.7\"]=\"desCBC\",t.desCBC=\"1.3.14.3.2.7\",t[\"1.3.14.3.2.26\"]=\"sha1\",t.sha1=\"1.3.14.3.2.26\",t[\"2.16.840.1.101.3.4.2.1\"]=\"sha256\",t.sha256=\"2.16.840.1.101.3.4.2.1\",t[\"2.16.840.1.101.3.4.2.2\"]=\"sha384\",t.sha384=\"2.16.840.1.101.3.4.2.2\",t[\"2.16.840.1.101.3.4.2.3\"]=\"sha512\",t.sha512=\"2.16.840.1.101.3.4.2.3\",t[\"1.2.840.113549.2.5\"]=\"md5\",t.md5=\"1.2.840.113549.2.5\",t[\"1.2.840.113549.1.7.1\"]=\"data\",t.data=\"1.2.840.113549.1.7.1\",t[\"1.2.840.113549.1.7.2\"]=\"signedData\",t.signedData=\"1.2.840.113549.1.7.2\",t[\"1.2.840.113549.1.7.3\"]=\"envelopedData\",t.envelopedData=\"1.2.840.113549.1.7.3\",t[\"1.2.840.113549.1.7.4\"]=\"signedAndEnvelopedData\",t.signedAndEnvelopedData=\"1.2.840.113549.1.7.4\",t[\"1.2.840.113549.1.7.5\"]=\"digestedData\",t.digestedData=\"1.2.840.113549.1.7.5\",t[\"1.2.840.113549.1.7.6\"]=\"encryptedData\",t.encryptedData=\"1.2.840.113549.1.7.6\",t[\"1.2.840.113549.1.9.1\"]=\"emailAddress\",t.emailAddress=\"1.2.840.113549.1.9.1\",t[\"1.2.840.113549.1.9.2\"]=\"unstructuredName\",t.unstructuredName=\"1.2.840.113549.1.9.2\",t[\"1.2.840.113549.1.9.3\"]=\"contentType\",t.contentType=\"1.2.840.113549.1.9.3\",t[\"1.2.840.113549.1.9.4\"]=\"messageDigest\",t.messageDigest=\"1.2.840.113549.1.9.4\",t[\"1.2.840.113549.1.9.5\"]=\"signingTime\",t.signingTime=\"1.2.840.113549.1.9.5\",t[\"1.2.840.113549.1.9.6\"]=\"counterSignature\",t.counterSignature=\"1.2.840.113549.1.9.6\",t[\"1.2.840.113549.1.9.7\"]=\"challengePassword\",t.challengePassword=\"1.2.840.113549.1.9.7\",t[\"1.2.840.113549.1.9.8\"]=\"unstructuredAddress\",t.unstructuredAddress=\"1.2.840.113549.1.9.8\",t[\"1.2.840.113549.1.9.14\"]=\"extensionRequest\",t.extensionRequest=\"1.2.840.113549.1.9.14\",t[\"1.2.840.113549.1.9.20\"]=\"friendlyName\",t.friendlyName=\"1.2.840.113549.1.9.20\",t[\"1.2.840.113549.1.9.21\"]=\"localKeyId\",t.localKeyId=\"1.2.840.113549.1.9.21\",t[\"1.2.840.113549.1.9.22.1\"]=\"x509Certificate\",t.x509Certificate=\"1.2.840.113549.1.9.22.1\",t[\"1.2.840.113549.1.12.10.1.1\"]=\"keyBag\",t.keyBag=\"1.2.840.113549.1.12.10.1.1\",t[\"1.2.840.113549.1.12.10.1.2\"]=\"pkcs8ShroudedKeyBag\",t.pkcs8ShroudedKeyBag=\"1.2.840.113549.1.12.10.1.2\",t[\"1.2.840.113549.1.12.10.1.3\"]=\"certBag\",t.certBag=\"1.2.840.113549.1.12.10.1.3\",t[\"1.2.840.113549.1.12.10.1.4\"]=\"crlBag\",t.crlBag=\"1.2.840.113549.1.12.10.1.4\",t[\"1.2.840.113549.1.12.10.1.5\"]=\"secretBag\",t.secretBag=\"1.2.840.113549.1.12.10.1.5\",t[\"1.2.840.113549.1.12.10.1.6\"]=\"safeContentsBag\",t.safeContentsBag=\"1.2.840.113549.1.12.10.1.6\",t[\"1.2.840.113549.1.5.13\"]=\"pkcs5PBES2\",t.pkcs5PBES2=\"1.2.840.113549.1.5.13\",t[\"1.2.840.113549.1.5.12\"]=\"pkcs5PBKDF2\",t.pkcs5PBKDF2=\"1.2.840.113549.1.5.12\",t[\"1.2.840.113549.1.12.1.1\"]=\"pbeWithSHAAnd128BitRC4\",t.pbeWithSHAAnd128BitRC4=\"1.2.840.113549.1.12.1.1\",t[\"1.2.840.113549.1.12.1.2\"]=\"pbeWithSHAAnd40BitRC4\",t.pbeWithSHAAnd40BitRC4=\"1.2.840.113549.1.12.1.2\",t[\"1.2.840.113549.1.12.1.3\"]=\"pbeWithSHAAnd3-KeyTripleDES-CBC\",t[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]=\"1.2.840.113549.1.12.1.3\",t[\"1.2.840.113549.1.12.1.4\"]=\"pbeWithSHAAnd2-KeyTripleDES-CBC\",t[\"pbeWithSHAAnd2-KeyTripleDES-CBC\"]=\"1.2.840.113549.1.12.1.4\",t[\"1.2.840.113549.1.12.1.5\"]=\"pbeWithSHAAnd128BitRC2-CBC\",t[\"pbeWithSHAAnd128BitRC2-CBC\"]=\"1.2.840.113549.1.12.1.5\",t[\"1.2.840.113549.1.12.1.6\"]=\"pbewithSHAAnd40BitRC2-CBC\",t[\"pbewithSHAAnd40BitRC2-CBC\"]=\"1.2.840.113549.1.12.1.6\",t[\"1.2.840.113549.3.7\"]=\"des-EDE3-CBC\",t[\"des-EDE3-CBC\"]=\"1.2.840.113549.3.7\",t[\"2.16.840.1.101.3.4.1.2\"]=\"aes128-CBC\",t[\"aes128-CBC\"]=\"2.16.840.1.101.3.4.1.2\",t[\"2.16.840.1.101.3.4.1.22\"]=\"aes192-CBC\",t[\"aes192-CBC\"]=\"2.16.840.1.101.3.4.1.22\",t[\"2.16.840.1.101.3.4.1.42\"]=\"aes256-CBC\",t[\"aes256-CBC\"]=\"2.16.840.1.101.3.4.1.42\",t[\"2.5.4.3\"]=\"commonName\",t.commonName=\"2.5.4.3\",t[\"2.5.4.5\"]=\"serialName\",t.serialName=\"2.5.4.5\",t[\"2.5.4.6\"]=\"countryName\",t.countryName=\"2.5.4.6\",t[\"2.5.4.7\"]=\"localityName\",t.localityName=\"2.5.4.7\",t[\"2.5.4.8\"]=\"stateOrProvinceName\",t.stateOrProvinceName=\"2.5.4.8\",t[\"2.5.4.10\"]=\"organizationName\",t.organizationName=\"2.5.4.10\",t[\"2.5.4.11\"]=\"organizationalUnitName\",t.organizationalUnitName=\"2.5.4.11\",t[\"2.16.840.1.113730.1.1\"]=\"nsCertType\",t.nsCertType=\"2.16.840.1.113730.1.1\",t[\"2.5.29.1\"]=\"authorityKeyIdentifier\",t[\"2.5.29.2\"]=\"keyAttributes\",t[\"2.5.29.3\"]=\"certificatePolicies\",t[\"2.5.29.4\"]=\"keyUsageRestriction\",t[\"2.5.29.5\"]=\"policyMapping\",t[\"2.5.29.6\"]=\"subtreesConstraint\",t[\"2.5.29.7\"]=\"subjectAltName\",t[\"2.5.29.8\"]=\"issuerAltName\",t[\"2.5.29.9\"]=\"subjectDirectoryAttributes\",t[\"2.5.29.10\"]=\"basicConstraints\",t[\"2.5.29.11\"]=\"nameConstraints\",t[\"2.5.29.12\"]=\"policyConstraints\",t[\"2.5.29.13\"]=\"basicConstraints\",t[\"2.5.29.14\"]=\"subjectKeyIdentifier\",t.subjectKeyIdentifier=\"2.5.29.14\",t[\"2.5.29.15\"]=\"keyUsage\",t.keyUsage=\"2.5.29.15\",t[\"2.5.29.16\"]=\"privateKeyUsagePeriod\",t[\"2.5.29.17\"]=\"subjectAltName\",t.subjectAltName=\"2.5.29.17\",t[\"2.5.29.18\"]=\"issuerAltName\",t.issuerAltName=\"2.5.29.18\",t[\"2.5.29.19\"]=\"basicConstraints\",t.basicConstraints=\"2.5.29.19\",t[\"2.5.29.20\"]=\"cRLNumber\",t[\"2.5.29.21\"]=\"cRLReason\",t[\"2.5.29.22\"]=\"expirationDate\",t[\"2.5.29.23\"]=\"instructionCode\",t[\"2.5.29.24\"]=\"invalidityDate\",t[\"2.5.29.25\"]=\"cRLDistributionPoints\",t[\"2.5.29.26\"]=\"issuingDistributionPoint\",t[\"2.5.29.27\"]=\"deltaCRLIndicator\",t[\"2.5.29.28\"]=\"issuingDistributionPoint\",t[\"2.5.29.29\"]=\"certificateIssuer\",t[\"2.5.29.30\"]=\"nameConstraints\",t[\"2.5.29.31\"]=\"cRLDistributionPoints\",t[\"2.5.29.32\"]=\"certificatePolicies\",t[\"2.5.29.33\"]=\"policyMappings\",t[\"2.5.29.34\"]=\"policyConstraints\",t[\"2.5.29.35\"]=\"authorityKeyIdentifier\",t.authorityKeyIdentifier=\"2.5.29.35\",t[\"2.5.29.36\"]=\"policyConstraints\",t[\"2.5.29.37\"]=\"extKeyUsage\",t.extKeyUsage=\"2.5.29.37\",t[\"2.5.29.46\"]=\"freshestCRL\",t[\"2.5.29.54\"]=\"inhibitAnyPolicy\",t[\"1.3.6.1.5.5.7.3.1\"]=\"serverAuth\",t.serverAuth=\"1.3.6.1.5.5.7.3.1\",t[\"1.3.6.1.5.5.7.3.2\"]=\"clientAuth\",t.clientAuth=\"1.3.6.1.5.5.7.3.2\",t[\"1.3.6.1.5.5.7.3.3\"]=\"codeSigning\",t.codeSigning=\"1.3.6.1.5.5.7.3.3\",t[\"1.3.6.1.5.5.7.3.4\"]=\"emailProtection\",t.emailProtection=\"1.3.6.1.5.5.7.3.4\",t[\"1.3.6.1.5.5.7.3.8\"]=\"timeStamping\",t.timeStamping=\"1.3.6.1.5.5.7.3.8\"}var r=\"oids\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/oids\",[\"require\",\"module\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(t,n,r,i){if(e.util.isArray(i)){var s=[];for(var o=0;o<i.length;++o)i[o]!==undefined&&s.push(i[o]);i=s}return{tagClass:t,type:n,constructed:r,composed:r||e.util.isArray(i),value:i}};var n=t.getBerValueLength=function(e){var t=e.getByte();if(t===128)return undefined;var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n};t.fromDer=function(r,i){i===undefined&&(i=!0),typeof r==\"string\"&&(r=e.util.createBuffer(r));if(r.length()<2){var s=new Error(\"Too few bytes to parse DER.\");throw s.bytes=r.length(),s}var o=r.getByte(),u=o&192,a=o&31,f=n(r);if(r.length()<f){if(i){var s=new Error(\"Too few bytes to read ASN.1 value.\");throw s.detail=r.length()+\" < \"+f,s}f=r.length()}var l,c=(o&32)===32,h=c;if(!h&&u===t.Class.UNIVERSAL&&a===t.Type.BITSTRING&&f>1){var p=r.read,d=r.getByte();if(d===0){o=r.getByte();var v=o&192;if(v===t.Class.UNIVERSAL||v===t.Class.CONTEXT_SPECIFIC)try{var m=n(r);h=m===f-(r.read-p),h&&(++p,--f)}catch(g){}}r.read=p}if(h){l=[];if(f===undefined)for(;;){if(r.bytes(2)===String.fromCharCode(0,0)){r.getBytes(2);break}l.push(t.fromDer(r,i))}else{var y=r.length();while(f>0)l.push(t.fromDer(r,i)),f-=y-r.length(),y=r.length()}}else{if(f===undefined){if(i)throw new Error(\"Non-constructed ASN.1 object of indefinite length.\");f=r.length()}if(a===t.Type.BMPSTRING){l=\"\";for(var b=0;b<f;b+=2)l+=String.fromCharCode(r.getInt16())}else l=r.getBytes(f)}return t.create(u,a,c,l)},t.toDer=function(n){var r=e.util.createBuffer(),i=n.tagClass|n.type,s=e.util.createBuffer();if(n.composed){n.constructed?i|=32:s.putByte(0);for(var o=0;o<n.value.length;++o)n.value[o]!==undefined&&s.putBuffer(t.toDer(n.value[o]))}else if(n.type===t.Type.BMPSTRING)for(var o=0;o<n.value.length;++o)s.putInt16(n.value.charCodeAt(o));else s.putBytes(n.value);r.putByte(i);if(s.length()<=127)r.putByte(s.length()&127);else{var u=s.length(),a=\"\";do a+=String.fromCharCode(u&255),u>>>=8;while(u>0);r.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)r.putByte(a.charCodeAt(o))}return r.putBuffer(s),r},t.oidToDer=function(t){var n=t.split(\".\"),r=e.util.createBuffer();r.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));var i,s,o,u;for(var a=2;a<n.length;++a){i=!0,s=[],o=parseInt(n[a],10);do u=o&127,o>>>=7,i||(u|=128),s.push(u),i=!1;while(o>0);for(var f=s.length-1;f>=0;--f)r.putByte(s[f])}return r},t.derToOid=function(t){var n;typeof t==\"string\"&&(t=e.util.createBuffer(t));var r=t.getByte();n=Math.floor(r/40)+\".\"+r%40;var i=0;while(t.length()>0)r=t.getByte(),i<<=7,r&128?i+=r&127:(n+=\".\"+(i+r),i=0);return n},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),u=0;if(e.length>11){var a=e.charAt(10),f=10;a!==\"+\"&&a!==\"-\"&&(u=parseInt(e.substr(10,2),10),f+=2)}t.setUTCFullYear(n,r,i),t.setUTCHours(s,o,u,0);if(f){a=e.charAt(f);if(a===\"+\"||a===\"-\"){var l=parseInt(e.substr(f+1,2),10),c=parseInt(e.substr(f+4,2),10),h=l*60+c;h*=6e4,a===\"+\"?t.setTime(+t-h):t.setTime(+t+h)}}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),u=parseInt(e.substr(12,2),10),a=0,f=0,l=!1;e.charAt(e.length-1)===\"Z\"&&(l=!0);var c=e.length-5,h=e.charAt(c);if(h===\"+\"||h===\"-\"){var p=parseInt(e.substr(c+1,2),10),d=parseInt(e.substr(c+4,2),10);f=p*60+d,f*=6e4,h===\"+\"&&(f*=-1),l=!0}return e.charAt(14)===\".\"&&(a=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(n,r,i),t.setUTCHours(s,o,u,a),t.setTime(+t+f)):(t.setFullYear(n,r,i),t.setHours(s,o,u,a)),t},t.dateToUtcTime=function(e){if(typeof e==\"string\")return e;var t=\"\",n=[];n.push((\"\"+e.getUTCFullYear()).substr(2)),n.push(\"\"+(e.getUTCMonth()+1)),n.push(\"\"+e.getUTCDate()),n.push(\"\"+e.getUTCHours()),n.push(\"\"+e.getUTCMinutes()),n.push(\"\"+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+=\"0\"),t+=n[r];return t+=\"Z\",t},t.dateToGeneralizedTime=function(e){if(typeof e==\"string\")return e;var t=\"\",n=[];n.push(\"\"+e.getUTCFullYear()),n.push(\"\"+(e.getUTCMonth()+1)),n.push(\"\"+e.getUTCDate()),n.push(\"\"+e.getUTCHours()),n.push(\"\"+e.getUTCMinutes()),n.push(\"\"+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+=\"0\"),t+=n[r];return t+=\"Z\",t},t.integerToDer=function(t){var n=e.util.createBuffer();if(t>=-128&&t<128)return n.putSignedInt(t,8);if(t>=-32768&&t<32768)return n.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return n.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return n.putSignedInt(t,32);var r=new Error(\"Integer too large; max is 32-bits.\");throw r.integer=t,r},t.derToInteger=function(t){typeof t==\"string\"&&(t=e.util.createBuffer(t));var n=t.length()*8;if(n>32)throw new Error(\"Integer too large; max is 32-bits.\");return t.getSignedInt(n)},t.validate=function(n,r,i,s){var o=!1;if(n.tagClass!==r.tagClass&&typeof r.tagClass!=\"undefined\"||n.type!==r.type&&typeof r.type!=\"undefined\")s&&(n.tagClass!==r.tagClass&&s.push(\"[\"+r.name+\"] \"+'Expected tag class \"'+r.tagClass+'\", got \"'+n.tagClass+'\"'),n.type!==r.type&&s.push(\"[\"+r.name+\"] \"+'Expected type \"'+r.type+'\", got \"'+n.type+'\"'));else if(n.constructed===r.constructed||typeof r.constructed==\"undefined\"){o=!0;if(r.value&&e.util.isArray(r.value)){var u=0;for(var a=0;o&&a<r.value.length;++a)o=r.value[a].optional||!1,n.value[u]&&(o=t.validate(n.value[u],r.value[a],i,s),o?++u:r.value[a].optional&&(o=!0)),!o&&s&&s.push(\"[\"+r.name+\"] \"+'Tag class \"'+r.tagClass+'\", type \"'+r.type+'\" expected value length \"'+r.value.length+'\", got \"'+n.value.length+'\"')}o&&i&&(r.capture&&(i[r.capture]=n.value),r.captureAsn1&&(i[r.captureAsn1]=n))}else s&&s.push(\"[\"+r.name+\"] \"+'Expected constructed \"'+r.constructed+'\", got \"'+n.constructed+'\"');return o};var r=/[^\\\\u0000-\\\\u00ff]/;t.prettyPrint=function(n,i,s){var o=\"\";i=i||0,s=s||2,i>0&&(o+=\"\\n\");var u=\"\";for(var a=0;a<i*s;++a)u+=\" \";o+=u+\"Tag: \";switch(n.tagClass){case t.Class.UNIVERSAL:o+=\"Universal:\";break;case t.Class.APPLICATION:o+=\"Application:\";break;case t.Class.CONTEXT_SPECIFIC:o+=\"Context-Specific:\";break;case t.Class.PRIVATE:o+=\"Private:\"}if(n.tagClass===t.Class.UNIVERSAL){o+=n.type;switch(n.type){case t.Type.NONE:o+=\" (None)\";break;case t.Type.BOOLEAN:o+=\" (Boolean)\";break;case t.Type.BITSTRING:o+=\" (Bit string)\";break;case t.Type.INTEGER:o+=\" (Integer)\";break;case t.Type.OCTETSTRING:o+=\" (Octet string)\";break;case t.Type.NULL:o+=\" (Null)\";break;case t.Type.OID:o+=\" (Object Identifier)\";break;case t.Type.ODESC:o+=\" (Object Descriptor)\";break;case t.Type.EXTERNAL:o+=\" (External or Instance of)\";break;case t.Type.REAL:o+=\" (Real)\";break;case t.Type.ENUMERATED:o+=\" (Enumerated)\";break;case t.Type.EMBEDDED:o+=\" (Embedded PDV)\";break;case t.Type.UTF8:o+=\" (UTF8)\";break;case t.Type.ROID:o+=\" (Relative Object Identifier)\";break;case t.Type.SEQUENCE:o+=\" (Sequence)\";break;case t.Type.SET:o+=\" (Set)\";break;case t.Type.PRINTABLESTRING:o+=\" (Printable String)\";break;case t.Type.IA5String:o+=\" (IA5String (ASCII))\";break;case t.Type.UTCTIME:o+=\" (UTC time)\";break;case t.Type.GENERALIZEDTIME:o+=\" (Generalized time)\";break;case t.Type.BMPSTRING:o+=\" (BMP String)\"}}else o+=n.type;o+=\"\\n\",o+=u+\"Constructed: \"+n.constructed+\"\\n\";if(n.composed){var f=0,l=\"\";for(var a=0;a<n.value.length;++a)n.value[a]!==undefined&&(f+=1,l+=t.prettyPrint(n.value[a],i+1,s),a+1<n.value.length&&(l+=\",\"));o+=u+\"Sub values: \"+f+l}else{o+=u+\"Value: \";if(n.type===t.Type.OID){var c=t.derToOid(n.value);o+=c,e.pki&&e.pki.oids&&c in e.pki.oids&&(o+=\" (\"+e.pki.oids[c]+\") \")}if(n.type===t.Type.INTEGER)try{o+=t.derToInteger(n.value)}catch(h){o+=\"0x\"+e.util.bytesToHex(n.value)}else n.type===t.Type.OCTETSTRING?(r.test(n.value)||(o+=\"(\"+n.value+\") \"),o+=\"0x\"+e.util.bytesToHex(n.value)):n.type===t.Type.UTF8?o+=e.util.decodeUtf8(n.value):n.type===t.Type.PRINTABLESTRING||n.type===t.Type.IA5String?o+=n.value:r.test(n.value)?o+=\"0x\"+e.util.bytesToHex(n.value):n.value.length===0?o+=\"[null]\":o+=n.value}return o}}var r=\"asn1\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/asn1\",[\"require\",\"module\",\"./util\",\"./oids\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function u(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],i=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s=new Array(64);for(var t=0;t<64;++t)s[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);o=!0}function a(e,t,n){var o,u,a,f,l,c,h,p,d=n.length();while(d>=64){u=e.h0,a=e.h1,f=e.h2,l=e.h3;for(p=0;p<16;++p)t[p]=n.getInt32Le(),c=l^a&(f^l),o=u+c+s[p]+t[p],h=i[p],u=l,l=f,f=a,a+=o<<h|o>>>32-h;for(;p<32;++p)c=f^l&(a^f),o=u+c+s[p]+t[r[p]],h=i[p],u=l,l=f,f=a,a+=o<<h|o>>>32-h;for(;p<48;++p)c=a^f^l,o=u+c+s[p]+t[r[p]],h=i[p],u=l,l=f,f=a,a+=o<<h|o>>>32-h;for(;p<64;++p)c=f^(a|~l),o=u+c+s[p]+t[r[p]],h=i[p],u=l,l=f,f=a,a+=o<<h|o>>>32-h;e.h0=e.h0+u|0,e.h1=e.h1+a|0,e.h2=e.h2+f|0,e.h3=e.h3+l|0,d-=64}}var t=e.md5=e.md5||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.md5=e.md.algorithms.md5=t,t.create=function(){o||u();var t=null,r=e.util.createBuffer(),i=new Array(16),s={algorithm:\"md5\",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];var n=s.messageLengthSize/4;for(var i=0;i<n;++i)s.fullMessageLength.push(0);return r=e.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s},s.start(),s.update=function(n,o){o===\"utf8\"&&(n=e.util.encodeUtf8(n));var u=n.length;s.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var f=s.fullMessageLength.length-1;f>=0;--f)s.fullMessageLength[f]+=u[1],u[1]=u[0]+(s.fullMessageLength[f]/4294967296>>>0),s.fullMessageLength[f]=s.fullMessageLength[f]>>>0,u[0]=u[1]/4294967296>>>0;return r.putBytes(n),a(t,i,r),(r.read>2048||r.length()===0)&&r.compact(),s},s.digest=function(){var o=e.util.createBuffer();o.putBytes(r.bytes());var u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,f=u&s.blockLength-1;o.putBytes(n.substr(0,s.blockLength-f));var l,c=0;for(var h=s.fullMessageLength.length-1;h>=0;--h)l=s.fullMessageLength[h]*8+c,c=l/4294967296>>>0,o.putInt32Le(l>>>0);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};a(p,i,o);var d=e.util.createBuffer();return d.putInt32Le(p.h0),d.putInt32Le(p.h1),d.putInt32Le(p.h2),d.putInt32Le(p.h3),d},s};var n=null,r=null,i=null,s=null,o=!1}var r=\"md5\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/md5\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function i(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),r=!0}function s(e,t,n){var r,i,s,o,u,a,f,l,c=n.length();while(c>=64){i=e.h0,s=e.h1,o=e.h2,u=e.h3,a=e.h4;for(l=0;l<16;++l)r=n.getInt32(),t[l]=r,f=u^s&(o^u),r=(i<<5|i>>>27)+f+a+1518500249+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;for(;l<20;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,f=u^s&(o^u),r=(i<<5|i>>>27)+f+a+1518500249+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;for(;l<32;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+1859775393+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;for(;l<40;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+1859775393+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;for(;l<60;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s&o|u&(s^o),r=(i<<5|i>>>27)+f+a+2400959708+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;for(;l<80;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,f=s^o^u,r=(i<<5|i>>>27)+f+a+3395469782+r,a=u,u=o,o=s<<30|s>>>2,s=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+u|0,e.h4=e.h4+a|0,c-=64}}var t=e.sha1=e.sha1||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha1=e.md.algorithms.sha1=t,t.create=function(){r||i();var t=null,o=e.util.createBuffer(),u=new Array(80),a={algorithm:\"sha1\",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];var n=a.messageLengthSize/4;for(var r=0;r<n;++r)a.fullMessageLength.push(0);return o=e.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a},a.start(),a.update=function(n,r){r===\"utf8\"&&(n=e.util.encodeUtf8(n));var i=n.length;a.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var f=a.fullMessageLength.length-1;f>=0;--f)a.fullMessageLength[f]+=i[1],i[1]=i[0]+(a.fullMessageLength[f]/4294967296>>>0),a.fullMessageLength[f]=a.fullMessageLength[f]>>>0,i[0]=i[1]/4294967296>>>0;return o.putBytes(n),s(t,u,o),(o.read>2048||o.length()===0)&&o.compact(),a},a.digest=function(){var r=e.util.createBuffer();r.putBytes(o.bytes());var i=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=i&a.blockLength-1;r.putBytes(n.substr(0,a.blockLength-f));var l=e.util.createBuffer(),c,h,p=a.fullMessageLength[0]*8;for(var d=0;d<a.fullMessageLength.length;++d)c=a.fullMessageLength[d+1]*8,h=c/4294967296>>>0,p+=h,r.putInt32(p>>>0),p=c;var v={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};s(v,u,r);var m=e.util.createBuffer();return m.putInt32(v.h0),m.putInt32(v.h1),m.putInt32(v.h2),m.putInt32(v.h3),m.putInt32(v.h4),m},a};var n=null,r=!1}var r=\"sha1\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/sha1\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function s(){n=String.fromCharCode(128),n+=e.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=!0}function o(e,t,n){var r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b=n.length();while(b>=64){for(l=0;l<16;++l)t[l]=n.getInt32();for(;l<64;++l)r=t[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,s=t[l-15],s=(s>>>7|s<<25)^(s>>>18|s<<14)^s>>>3,t[l]=r+t[l-7]+s+t[l-16]|0;c=e.h0,h=e.h1,p=e.h2,d=e.h3,v=e.h4,m=e.h5,g=e.h6,y=e.h7;for(l=0;l<64;++l)u=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),a=g^v&(m^g),o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|p&(c^h),r=y+u+a+i[l]+t[l],s=o+f,y=g,g=m,m=v,v=d+r|0,d=p,p=h,h=c,c=r+s|0;e.h0=e.h0+c|0,e.h1=e.h1+h|0,e.h2=e.h2+p|0,e.h3=e.h3+d|0,e.h4=e.h4+v|0,e.h5=e.h5+m|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,b-=64}}var t=e.sha256=e.sha256||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha256=e.md.algorithms.sha256=t,t.create=function(){r||s();var t=null,i=e.util.createBuffer(),u=new Array(64),a={algorithm:\"sha256\",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];var n=a.messageLengthSize/4;for(var r=0;r<n;++r)a.fullMessageLength.push(0);return i=e.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a},a.start(),a.update=function(n,r){r===\"utf8\"&&(n=e.util.encodeUtf8(n));var s=n.length;a.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var f=a.fullMessageLength.length-1;f>=0;--f)a.fullMessageLength[f]+=s[1],s[1]=s[0]+(a.fullMessageLength[f]/4294967296>>>0),a.fullMessageLength[f]=a.fullMessageLength[f]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(n),o(t,u,i),(i.read>2048||i.length()===0)&&i.compact(),a},a.digest=function(){var r=e.util.createBuffer();r.putBytes(i.bytes());var s=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=s&a.blockLength-1;r.putBytes(n.substr(0,a.blockLength-f));var l=e.util.createBuffer(),c,h,p=a.fullMessageLength[0]*8;for(var d=0;d<a.fullMessageLength.length;++d)c=a.fullMessageLength[d+1]*8,h=c/4294967296>>>0,p+=h,r.putInt32(p>>>0),p=c;var v={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};o(v,u,r);var m=e.util.createBuffer();return m.putInt32(v.h0),m.putInt32(v.h1),m.putInt32(v.h2),m.putInt32(v.h3),m.putInt32(v.h4),m.putInt32(v.h5),m.putInt32(v.h6),m.putInt32(v.h7),m},a};var n=null,r=!1,i=null}var r=\"sha256\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/sha256\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function u(){r=String.fromCharCode(128),r+=e.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],o={},o[\"SHA-512\"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],o[\"SHA-384\"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],o[\"SHA-512/256\"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],o[\"SHA-512/224\"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0}function a(e,t,n){var r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I=n.length();while(I>=128){for(_=0;_<16;++_)t[_][0]=n.getInt32()>>>0,t[_][1]=n.getInt32()>>>0;for(;_<80;++_)H=t[_-2],D=H[0],P=H[1],r=((D>>>19|P<<13)^(P>>>29|D<<3)^D>>>6)>>>0,i=((D<<13|P>>>19)^(P<<3|D>>>29)^(D<<26|P>>>6))>>>0,j=t[_-15],D=j[0],P=j[1],o=((D>>>1|P<<31)^(D>>>8|P<<24)^D>>>7)>>>0,u=((D<<31|P>>>1)^(D<<24|P>>>8)^(D<<25|P>>>7))>>>0,B=t[_-7],F=t[_-16],P=i+B[1]+u+F[1],t[_][0]=r+B[0]+o+F[0]+(P/4294967296>>>0)>>>0,t[_][1]=P>>>0;m=e[0][0],g=e[0][1],y=e[1][0],b=e[1][1],w=e[2][0],E=e[2][1],S=e[3][0],x=e[3][1],T=e[4][0],N=e[4][1],C=e[5][0],k=e[5][1],L=e[6][0],A=e[6][1],O=e[7][0],M=e[7][1];for(_=0;_<80;++_)l=((T>>>14|N<<18)^(T>>>18|N<<14)^(N>>>9|T<<23))>>>0,c=((T<<18|N>>>14)^(T<<14|N>>>18)^(N<<23|T>>>9))>>>0,h=(L^T&(C^L))>>>0,p=(A^N&(k^A))>>>0,a=((m>>>28|g<<4)^(g>>>2|m<<30)^(g>>>7|m<<25))>>>0,f=((m<<4|g>>>28)^(g<<30|m>>>2)^(g<<25|m>>>7))>>>0,d=(m&y|w&(m^y))>>>0,v=(g&b|E&(g^b))>>>0,P=M+c+p+s[_][1]+t[_][1],r=O+l+h+s[_][0]+t[_][0]+(P/4294967296>>>0)>>>0,i=P>>>0,P=f+v,o=a+d+(P/4294967296>>>0)>>>0,u=P>>>0,O=L,M=A,L=C,A=k,C=T,k=N,P=x+i,T=S+r+(P/4294967296>>>0)>>>0,N=P>>>0,S=w,x=E,w=y,E=b,y=m,b=g,P=i+u,m=r+o+(P/4294967296>>>0)>>>0,g=P>>>0;P=e[0][1]+g,e[0][0]=e[0][0]+m+(P/4294967296>>>0)>>>0,e[0][1]=P>>>0,P=e[1][1]+b,e[1][0]=e[1][0]+y+(P/4294967296>>>0)>>>0,e[1][1]=P>>>0,P=e[2][1]+E,e[2][0]=e[2][0]+w+(P/4294967296>>>0)>>>0,e[2][1]=P>>>0,P=e[3][1]+x,e[3][0]=e[3][0]+S+(P/4294967296>>>0)>>>0,e[3][1]=P>>>0,P=e[4][1]+N,e[4][0]=e[4][0]+T+(P/4294967296>>>0)>>>0,e[4][1]=P>>>0,P=e[5][1]+k,e[5][0]=e[5][0]+C+(P/4294967296>>>0)>>>0,e[5][1]=P>>>0,P=e[6][1]+A,e[6][0]=e[6][0]+L+(P/4294967296>>>0)>>>0,e[6][1]=P>>>0,P=e[7][1]+M,e[7][0]=e[7][0]+O+(P/4294967296>>>0)>>>0,e[7][1]=P>>>0,I-=128}}var t=e.sha512=e.sha512||{};e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},e.md.sha512=e.md.algorithms.sha512=t;var n=e.sha384=e.sha512.sha384=e.sha512.sha384||{};n.create=function(){return t.create(\"SHA-384\")},e.md.sha384=e.md.algorithms.sha384=n,e.sha512.sha256=e.sha512.sha256||{create:function(){return t.create(\"SHA-512/256\")}},e.md[\"sha512/256\"]=e.md.algorithms[\"sha512/256\"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return t.create(\"SHA-512/224\")}},e.md[\"sha512/224\"]=e.md.algorithms[\"sha512/224\"]=e.sha512.sha224,t.create=function(t){i||u(),typeof t==\"undefined\"&&(t=\"SHA-512\");if(t in o){var n=o[t],s=null,f=e.util.createBuffer(),l=new Array(80);for(var c=0;c<80;++c)l[c]=new Array(2);var h={algorithm:t.replace(\"-\",\"\").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];var t=h.messageLengthSize/4;for(var r=0;r<t;++r)h.fullMessageLength.push(0);f=e.util.createBuffer(),s=new Array(n.length);for(var r=0;r<n.length;++r)s[r]=n[r].slice(0);return h},h.start(),h.update=function(t,n){n===\"utf8\"&&(t=e.util.encodeUtf8(t));var r=t.length;h.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var i=h.fullMessageLength.length-1;i>=0;--i)h.fullMessageLength[i]+=r[1],r[1]=r[0]+(h.fullMessageLength[i]/4294967296>>>0),h.fullMessageLength[i]=h.fullMessageLength[i]>>>0,r[0]=r[1]/4294967296>>>0;return f.putBytes(t),a(s,l,f),(f.read>2048||f.length()===0)&&f.compact(),h},h.digest=function(){var n=e.util.createBuffer();n.putBytes(f.bytes());var i=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,o=i&h.blockLength-1;n.putBytes(r.substr(0,h.blockLength-o));var u=e.util.createBuffer(),c,p,d=h.fullMessageLength[0]*8;for(var v=0;v<h.fullMessageLength.length;++v)c=h.fullMessageLength[v+1]*8,p=c/4294967296>>>0,d+=p,n.putInt32(d>>>0),d=c;var m=new Array(s.length);for(var v=0;v<s.length;++v)m[v]=s[v].slice(0);a(m,l,n);var g=e.util.createBuffer(),y;t===\"SHA-512\"?y=m.length:t===\"SHA-384\"?y=m.length-2:y=m.length-4;for(var v=0;v<y;++v)g.putInt32(m[v][0]),(v!==y-1||t!==\"SHA-512/224\")&&g.putInt32(m[v][1]);return g},h}throw new Error(\"Invalid SHA-512 algorithm: \"+t)};var r=null,i=!1,s=null,o=null}var r=\"sha512\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/sha512\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.md=e.md||{},e.md.algorithms={md5:e.md5,sha1:e.sha1,sha256:e.sha256},e.md.md5=e.md5,e.md.sha1=e.sha1,e.md.sha256=e.sha256}var r=\"md\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/md\",[\"require\",\"module\",\"./md5\",\"./sha1\",\"./sha256\",\"./sha512\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.hmac=e.hmac||{};t.create=function(){var t=null,n=null,r=null,i=null,s={};return s.start=function(s,o){if(s!==null)if(typeof s==\"string\"){s=s.toLowerCase();if(!(s in e.md.algorithms))throw new Error('Unknown hash algorithm \"'+s+'\"');n=e.md.algorithms[s].create()}else n=s;if(o===null)o=t;else{if(typeof o==\"string\")o=e.util.createBuffer(o);else if(e.util.isArray(o)){var u=o;o=e.util.createBuffer();for(var a=0;a<u.length;++a)o.putByte(u[a])}var f=o.length();f>n.blockLength&&(n.start(),n.update(o.bytes()),o=n.digest()),r=e.util.createBuffer(),i=e.util.createBuffer(),f=o.length();for(var a=0;a<f;++a){var u=o.at(a);r.putByte(54^u),i.putByte(92^u)}if(f<n.blockLength){var u=n.blockLength-f;for(var a=0;a<u;++a)r.putByte(54),i.putByte(92)}t=o,r=r.bytes(),i=i.bytes()}n.start(),n.update(r)},s.update=function(e){n.update(e)},s.getMac=function(){var e=n.digest().bytes();return n.start(),n.update(i),n.update(e),n.digest()},s.digest=s.getMac,s}}var r=\"hmac\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/hmac\",[\"require\",\"module\",\"./md\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(e){var t=e.name+\": \",n=[],r=function(e,t){return\" \"+t};for(var i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\\S+\\r\\n)/,r));t+=n.join(\",\")+\"\\r\\n\";var s=0,o=-1;for(var i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var u=t[o];u===\",\"?(++o,t=t.substr(0,o)+\"\\r\\n \"+t.substr(o)):t=t.substr(0,o)+\"\\r\\n\"+u+t.substr(o+1),s=i-o-1,o=-1,++i}else if(t[i]===\" \"||t[i]===\"\t\"||t[i]===\",\")o=i;return t}function r(e){return e.replace(/^\\s+/,\"\")}var t=e.pem=e.pem||{};t.encode=function(t,r){r=r||{};var i=\"-----BEGIN \"+t.type+\"-----\\r\\n\",s;t.procType&&(s={name:\"Proc-Type\",values:[String(t.procType.version),t.procType.type]},i+=n(s)),t.contentDomain&&(s={name:\"Content-Domain\",values:[t.contentDomain]},i+=n(s)),t.dekInfo&&(s={name:\"DEK-Info\",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&s.values.push(t.dekInfo.parameters),i+=n(s));if(t.headers)for(var o=0;o<t.headers.length;++o)i+=n(t.headers[o]);return t.procType&&(i+=\"\\r\\n\"),i+=e.util.encode64(t.body,r.maxline||64)+\"\\r\\n\",i+=\"-----END \"+t.type+\"-----\\r\\n\",i},t.decode=function(t){var n=[],i=/\\s*-----BEGIN ([A-Z0-9- ]+)-----\\r?\\n?([\\x21-\\x7e\\s]+?(?:\\r?\\n\\r?\\n))?([:A-Za-z0-9+\\/=\\s]+?)-----END \\1-----/g,s=/([\\x21-\\x7e]+):\\s*([\\x21-\\x7e\\s^:]+)/,o=/\\r?\\n/,u;for(;;){u=i.exec(t);if(!u)break;var a={type:u[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(u[3])};n.push(a);if(!u[2])continue;var f=u[2].split(o),l=0;while(u&&l<f.length){var c=f[l].replace(/\\s+$/,\"\");for(var h=l+1;h<f.length;++h){var p=f[h];if(!/\\s/.test(p[0]))break;c+=p,l=h}u=c.match(s);if(u){var d={name:u[1],values:[]},v=u[2].split(\",\");for(var m=0;m<v.length;++m)d.values.push(r(v[m]));if(!a.procType){if(d.name!==\"Proc-Type\")throw new Error('Invalid PEM formatted message. The first encapsulated header must be \"Proc-Type\".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The \"Proc-Type\" header must have two subfields.');a.procType={version:v[0],type:v[1]}}else if(!a.contentDomain&&d.name===\"Content-Domain\")a.contentDomain=v[0]||\"\";else if(!a.dekInfo&&d.name===\"DEK-Info\"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The \"DEK-Info\" header must have at least one subfield.');a.dekInfo={algorithm:v[0],parameters:v[1]||null}}else a.headers.push(d)}++l}if(a.procType===\"ENCRYPTED\"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The \"DEK-Info\" header must be present if \"Proc-Type\" is \"ENCRYPTED\".')}if(n.length===0)throw new Error(\"Invalid PEM formatted message.\");return n}}var r=\"pem\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pem\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function t(t,n){var r=function(){return new e.des.Algorithm(t,n)};e.cipher.registerAlgorithm(t,r)}function l(e){var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],a=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],c=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=e.length()>8?3:1,m=[],g=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],y=0,b;for(var w=0;w<v;w++){var E=e.getInt32(),S=e.getInt32();b=(E>>>4^S)&252645135,S^=b,E^=b<<4,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>2^S)&858993459,S^=b,E^=b<<2,b=(S>>>-16^E)&65535,E^=b,S^=b<<-16,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=(S>>>8^E)&16711935,E^=b,S^=b<<8,b=(E>>>1^S)&1431655765,S^=b,E^=b<<1,b=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=b;for(var x=0;x<g.length;++x){g[x]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var T=t[E>>>28]|n[E>>>24&15]|r[E>>>20&15]|i[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|u[E>>>4&15],N=a[S>>>28]|f[S>>>24&15]|l[S>>>20&15]|c[S>>>16&15]|h[S>>>12&15]|p[S>>>8&15]|d[S>>>4&15];b=(N>>>16^T)&65535,m[y++]=T^b,m[y++]=N^b<<16}}return m}function c(e,t,l,c){var h=e.length===32?3:9,p;h===3?p=c?[30,-2,-2]:[0,32,2]:p=c?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d,v=t[0],m=t[1];d=(v>>>4^m)&252645135,m^=d,v^=d<<4,d=(v>>>16^m)&65535,m^=d,v^=d<<16,d=(m>>>2^v)&858993459,v^=d,m^=d<<2,d=(m>>>8^v)&16711935,v^=d,m^=d<<8,d=(v>>>1^m)&1431655765,m^=d,v^=d<<1,v=v<<1|v>>>31,m=m<<1|m>>>31;for(var g=0;g<h;g+=3){var y=p[g+1],b=p[g+2];for(var w=p[g];w!=y;w+=b){var E=m^e[w],S=(m>>>4|m<<28)^e[w+1];d=v,v=m,m=d^(r[E>>>24&63]|s[E>>>16&63]|u[E>>>8&63]|f[E&63]|n[S>>>24&63]|i[S>>>16&63]|o[S>>>8&63]|a[S&63])}d=v,v=m,m=d}v=v>>>1|v<<31,m=m>>>1|m<<31,d=(v>>>1^m)&1431655765,m^=d,v^=d<<1,d=(m>>>8^v)&16711935,v^=d,m^=d<<8,d=(m>>>2^v)&858993459,v^=d,m^=d<<2,d=(v>>>16^m)&65535,m^=d,v^=d<<16,d=(v>>>4^m)&252645135,m^=d,v^=d<<4,l[0]=v,l[1]=m}function h(t){t=t||{};var n=(t.mode||\"CBC\").toUpperCase(),r=\"DES-\"+n,i;t.decrypt?i=e.cipher.createDecipher(r,t.key):i=e.cipher.createCipher(r,t.key);var s=i.start;return i.start=function(t,n){var r=null;n instanceof e.util.ByteBuffer&&(r=n,n={}),n=n||{},n.output=r,n.iv=t,s.call(i,n)},i}e.des=e.des||{},e.des.startEncrypting=function(e,t,n,r){var i=h({key:e,output:n,decrypt:!1,mode:r||(t===null?\"ECB\":\"CBC\")});return i.start(t),i},e.des.createEncryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!1,mode:t})},e.des.startDecrypting=function(e,t,n,r){var i=h({key:e,output:n,decrypt:!0,mode:r||(t===null?\"ECB\":\"CBC\")});return i.start(t),i},e.des.createDecryptionCipher=function(e,t){return h({key:e,output:null,decrypt:!0,mode:t})},e.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return c(n._keys,e,t,!1)},decrypt:function(e,t){return c(n._keys,e,t,!0)}}}),n._init=!1},e.des.Algorithm.prototype.initialize=function(t){if(this._init)return;var n=e.util.createBuffer(t.key);if(this.name.indexOf(\"3DES\")===0&&n.length()!==24)throw new Error(\"Invalid Triple-DES key size: \"+n.length()*8);this._keys=l(n),this._init=!0},t(\"DES-ECB\",e.cipher.modes.ecb),t(\"DES-CBC\",e.cipher.modes.cbc),t(\"DES-CFB\",e.cipher.modes.cfb),t(\"DES-OFB\",e.cipher.modes.ofb),t(\"DES-CTR\",e.cipher.modes.ctr),t(\"3DES-ECB\",e.cipher.modes.ecb),t(\"3DES-CBC\",e.cipher.modes.cbc),t(\"3DES-CFB\",e.cipher.modes.cfb),t(\"3DES-OFB\",e.cipher.modes.ofb),t(\"3DES-CTR\",e.cipher.modes.ctr);var n=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],r=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],i=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],s=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],o=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],u=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],a=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]}var r=\"des\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/des\",[\"require\",\"module\",\"./cipher\",\"./cipherModes\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var n=e.pkcs5=e.pkcs5||{},r=typeof process!=\"undefined\"&&process.versions&&process.versions.node,i;r&&!e.disableNativeCode&&(i=t(\"crypto\")),e.pbkdf2=n.pbkdf2=function(t,n,s,o,u,a){function w(){if(y>c)return a(null,d);p.start(null,null),p.update(n),p.update(e.util.int32ToBytes(y)),v=g=p.digest().getBytes(),b=2,E()}function E(){if(b<=s)return p.start(null,null),p.update(g),m=p.digest().getBytes(),v=e.util.xorBytes(v,m,f),g=m,++b,e.util.setImmediate(E);d+=y<c?v:v.substr(0,h),++y,w()}typeof u==\"function\"&&(a=u,u=null);if(r&&!e.disableNativeCode&&i.pbkdf2&&(u===null||typeof u!=\"object\")&&(i.pbkdf2Sync.length>4||!u||u===\"sha1\"))return typeof u!=\"string\"&&(u=\"sha1\"),n=new Buffer(n,\"binary\"),a?i.pbkdf2Sync.length===4?i.pbkdf2(t,n,s,o,function(e,t){if(e)return a(e);a(null,t.toString(\"binary\"))}):i.pbkdf2(t,n,s,o,u,function(e,t){if(e)return a(e);a(null,t.toString(\"binary\"))}):i.pbkdf2Sync.length===4?i.pbkdf2Sync(t,n,s,o).toString(\"binary\"):i.pbkdf2Sync(t,n,s,o,u).toString(\"binary\");if(typeof u==\"undefined\"||u===null)u=e.md.sha1.create();if(typeof u==\"string\"){if(!(u in e.md.algorithms))throw new Error(\"Unknown hash algorithm: \"+u);u=e.md[u].create()}var f=u.digestLength;if(o>4294967295*f){var l=new Error(\"Derived key is too long.\");if(a)return a(l);throw l}var c=Math.ceil(o/f),h=o-(c-1)*f,p=e.hmac.create();p.start(u,t);var d=\"\",v,m,g;if(!a){for(var y=1;y<=c;++y){p.start(null,null),p.update(n),p.update(e.util.int32ToBytes(y)),v=g=p.digest().getBytes();for(var b=2;b<=s;++b)p.start(null,null),p.update(g),m=p.digest().getBytes(),v=e.util.xorBytes(v,m,f),g=m;d+=y<c?v:v.substr(0,h)}return d}var y=1,b;w()}}var r=\"pbkdf2\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pbkdf2\",[\"require\",\"module\",\"./hmac\",\"./md\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var n=typeof process!=\"undefined\"&&process.versions&&process.versions.node,r=null;!e.disableNativeCode&&n&&!process.versions[\"node-webkit\"]&&(r=t(\"crypto\"));var i=e.prng=e.prng||{};i.create=function(t){function u(e){if(n.pools[0].messageLength>=32)return f(),e();var t=32-n.pools[0].messageLength<<5;n.seedFile(t,function(t,r){if(t)return e(t);n.collect(r),f(),e()})}function a(){if(n.pools[0].messageLength>=32)return f();var e=32-n.pools[0].messageLength<<5;n.collect(n.seedFileSync(e)),f()}function f(){var e=n.plugin.md.create();e.update(n.pools[0].digest().getBytes()),n.pools[0].start();var t=1;for(var r=1;r<32;++r)t=t===31?2147483648:t<<2,t%n.reseeds===0&&(e.update(n.pools[r].digest().getBytes()),n.pools[r].start());var i=e.digest().getBytes();e.start(),e.update(i);var s=e.digest().getBytes();n.key=n.plugin.formatKey(i),n.seed=n.plugin.formatSeed(s),n.reseeds=n.reseeds===4294967295?0:n.reseeds+1,n.generated=0}function l(t){var n=null;if(typeof window!=\"undefined\"){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(n=function(e){return r.getRandomValues(e)})}var i=e.util.createBuffer();if(n)while(i.length()<t){var s=Math.max(1,Math.min(t-i.length(),65536)/4),o=new Uint32Array(Math.floor(s));try{n(o);for(var u=0;u<o.length;++u)i.putInt32(o[u])}catch(a){if(!(typeof QuotaExceededError!=\"undefined\"&&a instanceof QuotaExceededError))throw a}}if(i.length()<t){var f,l,c,h=Math.floor(Math.random()*65536);while(i.length()<t){l=16807*(h&65535),f=16807*(h>>16),l+=(f&32767)<<16,l+=f>>15,l=(l&2147483647)+(l>>31),h=l&4294967295;for(var u=0;u<3;++u)c=h>>>(u<<3),c^=Math.floor(Math.random()*256),i.putByte(String.fromCharCode(c&255))}}return i.getBytes(t)}var n={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0},i=t.md,s=new Array(32);for(var o=0;o<32;++o)s[o]=i.create();return n.pools=s,n.pool=0,n.generate=function(t,r){function l(c){if(c)return r(c);if(f.length()>=t)return r(null,f.getBytes(t));n.generated>1048575&&(n.key=null);if(n.key===null)return e.util.nextTick(function(){u(l)});var h=i(n.key,n.seed);n.generated+=h.length,f.putBytes(h),n.key=o(i(n.key,s(n.seed))),n.seed=a(i(n.key,n.seed)),e.util.setImmediate(l)}if(!r)return n.generateSync(t);var i=n.plugin.cipher,s=n.plugin.increment,o=n.plugin.formatKey,a=n.plugin.formatSeed,f=e.util.createBuffer();n.key=null,l()},n.generateSync=function(t){var r=n.plugin.cipher,i=n.plugin.increment,s=n.plugin.formatKey,o=n.plugin.formatSeed;n.key=null;var u=e.util.createBuffer();while(u.length()<t){n.generated>1048575&&(n.key=null),n.key===null&&a();var f=r(n.key,n.seed);n.generated+=f.length,u.putBytes(f),n.key=s(r(n.key,i(n.seed))),n.seed=o(r(n.key,n.seed))}return u.getBytes(t)},r?(n.seedFile=function(e,t){r.randomBytes(e,function(e,n){if(e)return t(e);t(null,n.toString())})},n.seedFileSync=function(e){return r.randomBytes(e).toString()}):(n.seedFile=function(e,t){try{t(null,l(e))}catch(n){t(n)}},n.seedFileSync=l),n.collect=function(e){var t=e.length;for(var r=0;r<t;++r)n.pools[n.pool].update(e.substr(r,1)),n.pool=n.pool===31?0:n.pool+1},n.collectInt=function(e,t){var r=\"\";for(var i=0;i<t;i+=8)r+=String.fromCharCode(e>>i&255);n.collect(r)},n.registerWorker=function(e){if(e===self)n.seedFile=function(e,t){function n(e){var r=e.data;r.forge&&r.forge.prng&&(self.removeEventListener(\"message\",n),t(r.forge.prng.err,r.forge.prng.bytes))}self.addEventListener(\"message\",n),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var r=t.data;r.forge&&r.forge.prng&&n.seedFile(r.forge.prng.needed,function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})})};e.addEventListener(\"message\",t)}},n}}var r=\"prng\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/prng\",[\"require\",\"module\",\"./md\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){if(e.random&&e.random.getBytes)return;(function(t){function s(){var t=e.prng.create(n);return t.getBytes=function(e,n){return t.generate(e,n)},t.getBytesSync=function(e){return t.generate(e)},t}var n={},r=new Array(4),i=e.util.createBuffer();n.formatKey=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),e.aes._expandKey(t,!1)},n.formatSeed=function(t){var n=e.util.createBuffer(t);return t=new Array(4),t[0]=n.getInt32(),t[1]=n.getInt32(),t[2]=n.getInt32(),t[3]=n.getInt32(),t},n.cipher=function(t,n){return e.aes._updateBlock(t,n,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},n.increment=function(e){return++e[3],e},n.md=e.md.sha256;var o=s(),u=typeof process!=\"undefined\"&&process.versions&&process.versions.node,a=null;if(typeof window!=\"undefined\"){var f=window.crypto||window.msCrypto;f&&f.getRandomValues&&(a=function(e){return f.getRandomValues(e)})}if(e.disableNativeCode||!u&&!a){typeof window==\"undefined\"||window.document===undefined,o.collectInt(+(new Date),32);if(typeof navigator!=\"undefined\"){var l=\"\";for(var c in navigator)try{typeof navigator[c]==\"string\"&&(l+=navigator[c])}catch(h){}o.collect(l),l=null}t&&(t().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),t().keypress(function(e){o.collectInt(e.charCode,8)}))}if(!e.random)e.random=o;else for(var c in o)e.random[c]=o[c];e.random.createInstance=s})(typeof jQuery!=\"undefined\"?jQuery:null)}var r=\"random\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/random\",[\"require\",\"module\",\"./aes\",\"./md\",\"./prng\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n=[1,2,3,5],r=function(e,t){return e<<t&65535|(e&65535)>>16-t},i=function(e,t){return(e&65535)>>t|e<<16-t&65535};e.rc2=e.rc2||{},e.rc2.expandKey=function(n,r){typeof n==\"string\"&&(n=e.util.createBuffer(n)),r=r||128;var i=n,s=n.length(),o=r,u=Math.ceil(o/8),a=255>>(o&7),f;for(f=s;f<128;f++)i.putByte(t[i.at(f-1)+i.at(f-s)&255]);i.setAt(128-u,t[i.at(128-u)&a]);for(f=127-u;f>=0;f--)i.setAt(f,t[i.at(f+1)^i.at(f+u)]);return i};var s=function(t,s,o){var u=!1,a=null,f=null,l=null,c,h,p,d,v=[];t=e.rc2.expandKey(t,s);for(p=0;p<64;p++)v.push(t.getInt16Le());o?(c=function(e){for(p=0;p<4;p++)e[p]+=v[d]+(e[(p+3)%4]&e[(p+2)%4])+(~e[(p+3)%4]&e[(p+1)%4]),e[p]=r(e[p],n[p]),d++},h=function(e){for(p=0;p<4;p++)e[p]+=v[e[(p+3)%4]&63]}):(c=function(e){for(p=3;p>=0;p--)e[p]=i(e[p],n[p]),e[p]-=v[d]+(e[(p+3)%4]&e[(p+2)%4])+(~e[(p+3)%4]&e[(p+1)%4]),d--},h=function(e){for(p=3;p>=0;p--)e[p]-=v[e[(p+3)%4]&63]});var m=function(e){var t=[];for(p=0;p<4;p++){var n=a.getInt16Le();l!==null&&(o?n^=l.getInt16Le():l.putInt16Le(n)),t.push(n&65535)}d=o?0:63;for(var r=0;r<e.length;r++)for(var i=0;i<e[r][0];i++)e[r][1](t);for(p=0;p<4;p++)l!==null&&(o?l.putInt16Le(t[p]):t[p]^=l.getInt16Le()),f.putInt16Le(t[p])},g=null;return g={start:function(t,n){t&&typeof t==\"string\"&&(t=e.util.createBuffer(t)),u=!1,a=e.util.createBuffer(),f=n||new e.util.createBuffer,l=t,g.output=f},update:function(e){u||a.putBuffer(e);while(a.length()>=8)m([[5,c],[1,h],[6,c],[1,h],[5,c]])},finish:function(e){var t=!0;if(o)if(e)t=e(8,a,!o);else{var n=a.length()===8?8:8-a.length();a.fillWithByte(n,n)}t&&(u=!0,g.update());if(!o){t=a.length()===0;if(t)if(e)t=e(8,f,!o);else{var r=f.length(),i=f.at(r-1);i>r?t=!1:f.truncate(i)}}return t}},g};e.rc2.startEncrypting=function(t,n,r){var i=e.rc2.createEncryptionCipher(t,128);return i.start(n,r),i},e.rc2.createEncryptionCipher=function(e,t){return s(e,t,!0)},e.rc2.startDecrypting=function(t,n,r){var i=e.rc2.createDecryptionCipher(t,128);return i.start(n,r),i},e.rc2.createDecryptionCipher=function(e,t){return s(e,t,!1)}}var r=\"rc2\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/rc2\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function i(e,t,n){this.data=[],e!=null&&(\"number\"==typeof e?this.fromNumber(e,t,n):t==null&&\"string\"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function s(){return new i(null)}function o(e,t,n,r,i,s){while(--s>=0){var o=t*this.data[e++]+n.data[r]+i;i=Math.floor(o/67108864),n.data[r++]=o&67108863}return i}function u(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this.data[e]&32767,f=this.data[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n.data[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n.data[r++]=a&1073741823}return i}function a(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this.data[e]&16383,f=this.data[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n.data[r]+i,i=(a>>28)+(l>>14)+u*f,n.data[r++]=a&268435455}return i}function d(e){return l.charAt(e)}function v(e,t){var n=c[e.charCodeAt(t)];return n==null?-1:n}function m(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function g(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function y(e){var t=s();return t.fromInt(e),t}function b(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var r=e.length,s=!1,o=0;while(--r>=0){var u=n==8?e[r]&255:v(e,r);if(u<0){e.charAt(r)==\"-\"&&(s=!0);continue}s=!1,o==0?this.data[this.t++]=u:o+n>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this.data[this.t++]=u>>this.DB-o):this.data[this.t-1]|=u<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&i.ZERO.subTo(this,this)}function w(){var e=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==e)--this.t}function E(e){if(this.s<0)return\"-\"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s=\"\",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this.data[o]>>u)>0&&(i=!0,s=d(r));while(o>=0)u<t?(r=(this.data[o]&(1<<u)-1)<<t-u,r|=this.data[--o]>>(u+=this.DB-t)):(r=this.data[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=d(r))}return i?s:\"0\"}function S(){var e=s();return i.ZERO.subTo(this,e),e}function x(){return this.s<0?this.negate():this}function T(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function N(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function C(){return this.t<=0?0:this.DB*(this.t-1)+N(this.data[this.t-1]^this.s&this.DM)}function k(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function L(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function A(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t.data[u+s+1]=this.data[u]>>r|o,o=(this.data[u]&i)<<n;for(u=s-1;u>=0;--u)t.data[u]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function O(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var o=n+1;o<this.t;++o)t.data[o-n-1]|=(this.data[o]&s)<<i,t.data[o-n]=this.data[o]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function M(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function _(e,t){var n=this.abs(),r=e.abs(),s=n.t;t.t=s+r.t;while(--s>=0)t.data[s]=0;for(s=0;s<r.t;++s)t.data[s+n.t]=n.am(0,r.data[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)}function D(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function P(e,t,n){var r=e.abs();if(r.t<=0)return;var o=this.abs();if(o.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=s());var u=s(),a=this.s,f=e.s,l=this.DB-N(r.data[r.t-1]);l>0?(r.lShiftTo(l,u),o.lShiftTo(l,n)):(r.copyTo(u),o.copyTo(n));var c=u.t,h=u.data[c-1];if(h==0)return;var p=h*(1<<this.F1)+(c>1?u.data[c-2]>>this.F2:0),d=this.FV/p,v=(1<<this.F1)/p,m=1<<this.F2,g=n.t,y=g-c,b=t==null?s():t;u.dlShiftTo(y,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),i.ONE.dlShiftTo(c,b),b.subTo(u,u);while(u.t<c)u.data[u.t++]=0;while(--y>=0){var w=n.data[--g]==h?this.DM:Math.floor(n.data[g]*d+(n.data[g-1]+m)*v);if((n.data[g]+=u.am(0,w,n,y,0,c))<w){u.dlShiftTo(y,b),n.subTo(b,n);while(n.data[g]<--w)n.subTo(b,n)}}t!=null&&(n.drShiftTo(c,t),a!=f&&i.ZERO.subTo(t,t)),n.t=c,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&i.ZERO.subTo(n,n)}function H(e){var t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t}function B(e){this.m=e}function j(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function F(e){return e}function I(e){e.divRemTo(this.m,null,e)}function q(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function R(e,t){e.squareTo(t),this.reduce(t)}function U(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function z(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function W(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t}function X(e){var t=s();return e.copyTo(t),this.reduce(t),t}function V(e){while(e.t<=this.mt2)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e.data[n]>=e.DV)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function $(e,t){e.squareTo(t),this.reduce(t)}function J(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function K(){return(this.t>0?this.data[0]&1:this.s)==0}function Q(e,t){if(e>4294967295||e<1)return i.ONE;var n=s(),r=s(),o=t.convert(this),u=N(e)-1;o.copyTo(n);while(--u>=0){t.sqrTo(n,r);if((e&1<<u)>0)t.mulTo(r,o,n);else{var a=n;n=r,r=a}}return t.revert(n)}function G(e,t){var n;return e<256||t.isEven()?n=new B(t):n=new z(t),this.exp(e,n)}function Y(){var e=s();return this.copyTo(e),e}function Z(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function et(){return this.t==0?this.s:this.data[0]<<24>>24}function tt(){return this.t==0?this.s:this.data[0]<<16>>16}function nt(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function rt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function it(e){e==null&&(e=10);if(this.signum()==0||e<2||e>36)return\"0\";var t=this.chunkSize(e),n=Math.pow(e,t),r=y(n),i=s(),o=s(),u=\"\";this.divRemTo(r,i,o);while(i.signum()>0)u=(n+o.intValue()).toString(e).substr(1)+u,i.divRemTo(r,i,o);return o.intValue().toString(e)+u}function st(e,t){this.fromInt(0),t==null&&(t=10);var n=this.chunkSize(t),r=Math.pow(t,n),s=!1,o=0,u=0;for(var a=0;a<e.length;++a){var f=v(e,a);if(f<0){e.charAt(a)==\"-\"&&this.signum()==0&&(s=!0);continue}u=t*u+f,++o>=n&&(this.dMultiply(r),this.dAddOffset(u,0),o=0,u=0)}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(u,0)),s&&i.ZERO.subTo(this,this)}function ot(e,t,n){if(\"number\"==typeof t)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),dt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(t))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this)}else{var r=new Array,s=e&7;r.length=(e>>3)+1,t.nextBytes(r),s>0?r[0]&=(1<<s)-1:r[0]=0,this.fromString(r,256)}}function ut(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-->0){n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);while(e>=0){n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i;if(i>0||r!=this.s)t[i++]=r}}return t}function at(e){return this.compareTo(e)==0}function ft(e){return this.compareTo(e)<0?this:e}function lt(e){return this.compareTo(e)>0?this:e}function ct(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){i=e.s&this.DM;for(r=s;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{i=this.s&this.DM;for(r=s;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function ht(e,t){return e&t}function pt(e){var t=s();return this.bitwiseTo(e,ht,t),t}function dt(e,t){return e|t}function vt(e){var t=s();return this.bitwiseTo(e,dt,t),t}function mt(e,t){return e^t}function gt(e){var t=s();return this.bitwiseTo(e,mt,t),t}function yt(e,t){return e&~t}function bt(e){var t=s();return this.bitwiseTo(e,yt,t),t}function wt(){var e=s();for(var t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Et(e){var t=s();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function St(e){var t=s();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function xt(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function Tt(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+xt(this.data[e]);return this.s<0?this.t*this.DB:-1}function Nt(e){var t=0;while(e!=0)e&=e-1,++t;return t}function Ct(){var e=0,t=this.s&this.DM;for(var n=0;n<this.t;++n)e+=Nt(this.data[n]^t);return e}function kt(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Lt(e,t){var n=i.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function At(e){return this.changeBit(e,dt)}function Ot(e){return this.changeBit(e,yt)}function Mt(e){return this.changeBit(e,mt)}function _t(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r+=e.s;while(n<this.t)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function Dt(e){var t=s();return this.addTo(e,t),t}function Pt(e){var t=s();return this.subTo(e,t),t}function Ht(e){var t=s();return this.multiplyTo(e,t),t}function Bt(e){var t=s();return this.divRemTo(e,t,null),t}function jt(e){var t=s();return this.divRemTo(e,null,t),t}function Ft(e){var t=s(),n=s();return this.divRemTo(e,t,n),new Array(t,n)}function It(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function qt(e,t){if(e==0)return;while(this.t<=t)this.data[this.t++]=0;this.data[t]+=e;while(this.data[t]>=this.DV)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}function Rt(){}function Ut(e){return e}function zt(e,t,n){e.multiplyTo(t,n)}function Wt(e,t){e.squareTo(t)}function Xt(e){return this.exp(e,new Rt)}function Vt(e,t,n){var r=Math.min(this.t+e.t,t);n.s=0,n.t=r;while(r>0)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function $t(e,t,n){--t;var r=n.t=this.t+e.t-t;n.s=0;while(--r>=0)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Jt(e){this.r2=s(),this.q3=s(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Kt(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=s();return e.copyTo(t),this.reduce(t),t}function Qt(e){return e}function Gt(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(e.compareTo(this.r2)<0)e.dAddOffset(1,this.m.t+1);e.subTo(this.r2,e);while(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function Yt(e,t){e.squareTo(t),this.reduce(t)}function Zt(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function en(e,t){var n=e.bitLength(),r,i=y(1),o;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?o=new B(t):t.isEven()?o=new Jt(t):o=new z(t);var u=new Array,a=3,f=r-1,l=(1<<r)-1;u[1]=o.convert(this);if(r>1){var c=s();o.sqrTo(u[1],c);while(a<=l)u[a]=s(),o.mulTo(c,u[a-2],u[a]),a+=2}var h=e.t-1,p,d=!0,v=s(),m;n=N(e.data[h])-1;while(h>=0){n>=f?p=e.data[h]>>n-f&l:(p=(e.data[h]&(1<<n+1)-1)<<f-n,h>0&&(p|=e.data[h-1]>>this.DB+n-f)),a=r;while((p&1)==0)p>>=1,--a;(n-=a)<0&&(n+=this.DB,--h);if(d)u[p].copyTo(i),d=!1;else{while(a>1)o.sqrTo(i,v),o.sqrTo(v,i),a-=2;a>0?o.sqrTo(i,v):(m=i,i=v,v=m),o.mulTo(v,u[p],i)}while(h>=0&&(e.data[h]&1<<n)==0)o.sqrTo(i,v),m=i,i=v,v=m,--n<0&&(n=this.DB-1,--h)}return o.revert(i)}function tn(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));while(t.signum()>0)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function nn(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function rn(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return i.ZERO;var n=e.clone(),r=this.clone(),s=y(1),o=y(0),u=y(0),a=y(1);while(n.signum()!=0){while(n.isEven()){n.rShiftTo(1,n);if(t){if(!s.isEven()||!o.isEven())s.addTo(this,s),o.subTo(e,o);s.rShiftTo(1,s)}else o.isEven()||o.subTo(e,o);o.rShiftTo(1,o)}while(r.isEven()){r.rShiftTo(1,r);if(t){if(!u.isEven()||!a.isEven())u.addTo(this,u),a.subTo(e,a);u.rShiftTo(1,u)}else a.isEven()||a.subTo(e,a);a.rShiftTo(1,a)}n.compareTo(r)>=0?(n.subTo(r,n),t&&s.subTo(u,s),o.subTo(a,o)):(r.subTo(n,r),t&&u.subTo(s,u),a.subTo(o,a))}return r.compareTo(i.ONE)!=0?i.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a}function un(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=sn[sn.length-1]){for(t=0;t<sn.length;++t)if(n.data[0]==sn[t])return!0;return!1}if(n.isEven())return!1;t=1;while(t<sn.length){var r=sn[t],i=t+1;while(i<sn.length&&r<on)r*=sn[i++];r=n.modInt(r);while(t<i)if(r%sn[t++]==0)return!1}return n.millerRabin(e)}function an(e){var t=this.subtract(i.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n),s=fn(),o;for(var u=0;u<e;++u){do o=new i(this.bitLength(),s);while(o.compareTo(i.ONE)<=0||o.compareTo(t)>=0);var a=o.modPow(r,this);if(a.compareTo(i.ONE)!=0&&a.compareTo(t)!=0){var f=1;while(f++<n&&a.compareTo(t)!=0){a=a.modPowInt(2,this);if(a.compareTo(i.ONE)==0)return!1}if(a.compareTo(t)!=0)return!1}}return!0}function fn(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}var t,n=0xdeadbeefcafe,r=(n&16777215)==15715070;typeof navigator==\"undefined\"?(i.prototype.am=a,t=28):r&&navigator.appName==\"Microsoft Internet Explorer\"?(i.prototype.am=u,t=30):r&&navigator.appName!=\"Netscape\"?(i.prototype.am=o,t=26):(i.prototype.am=a,t=28),i.prototype.DB=t,i.prototype.DM=(1<<t)-1,i.prototype.DV=1<<t;var f=52;i.prototype.FV=Math.pow(2,f),i.prototype.F1=f-t,i.prototype.F2=2*t-f;var l=\"0123456789abcdefghijklmnopqrstuvwxyz\",c=new Array,h,p;h=\"0\".charCodeAt(0);for(p=0;p<=9;++p)c[h++]=p;h=\"a\".charCodeAt(0);for(p=10;p<36;++p)c[h++]=p;h=\"A\".charCodeAt(0);for(p=10;p<36;++p)c[h++]=p;B.prototype.convert=j,B.prototype.revert=F,B.prototype.reduce=I,B.prototype.mulTo=q,B.prototype.sqrTo=R,z.prototype.convert=W,z.prototype.revert=X,z.prototype.reduce=V,z.prototype.mulTo=J,z.prototype.sqrTo=$,i.prototype.copyTo=m,i.prototype.fromInt=g,i.prototype.fromString=b,i.prototype.clamp=w,i.prototype.dlShiftTo=k,i.prototype.drShiftTo=L,i.prototype.lShiftTo=A,i.prototype.rShiftTo=O,i.prototype.subTo=M,i.prototype.multiplyTo=_,i.prototype.squareTo=D,i.prototype.divRemTo=P,i.prototype.invDigit=U,i.prototype.isEven=K,i.prototype.exp=Q,i.prototype.toString=E,i.prototype.negate=S,i.prototype.abs=x,i.prototype.compareTo=T,i.prototype.bitLength=C,i.prototype.mod=H,i.prototype.modPowInt=G,i.ZERO=y(0),i.ONE=y(1),Rt.prototype.convert=Ut,Rt.prototype.revert=Ut,Rt.prototype.mulTo=zt,Rt.prototype.sqrTo=Wt,Jt.prototype.convert=Kt,Jt.prototype.revert=Qt,Jt.prototype.reduce=Gt,Jt.prototype.mulTo=Zt,Jt.prototype.sqrTo=Yt;var sn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],on=(1<<26)/sn[sn.length-1];i.prototype.chunkSize=nt,i.prototype.toRadix=it,i.prototype.fromRadix=st,i.prototype.fromNumber=ot,i.prototype.bitwiseTo=ct,i.prototype.changeBit=Lt,i.prototype.addTo=_t,i.prototype.dMultiply=It,i.prototype.dAddOffset=qt,i.prototype.multiplyLowerTo=Vt,i.prototype.multiplyUpperTo=$t,i.prototype.modInt=nn,i.prototype.millerRabin=an,i.prototype.clone=Y,i.prototype.intValue=Z,i.prototype.byteValue=et,i.prototype.shortValue=tt,i.prototype.signum=rt,i.prototype.toByteArray=ut,i.prototype.equals=at,i.prototype.min=ft,i.prototype.max=lt,i.prototype.and=pt,i.prototype.or=vt,i.prototype.xor=gt,i.prototype.andNot=bt,i.prototype.not=wt,i.prototype.shiftLeft=Et,i.prototype.shiftRight=St,i.prototype.getLowestSetBit=Tt,i.prototype.bitCount=Ct,i.prototype.testBit=kt,i.prototype.setBit=At,i.prototype.clearBit=Ot,i.prototype.flipBit=Mt,i.prototype.add=Dt,i.prototype.subtract=Pt,i.prototype.multiply=Ht,i.prototype.divide=Bt,i.prototype.remainder=jt,i.prototype.divideAndRemainder=Ft,i.prototype.modPow=en,i.prototype.modInverse=rn,i.prototype.pow=Xt,i.prototype.gcd=tn,i.prototype.isProbablePrime=un,e.jsbn=e.jsbn||{},e.jsbn.BigInteger=i}var r=\"jsbn\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/jsbn\",[\"require\",\"module\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(t,n,r){r||(r=e.md.sha1.create());var i=\"\",s=Math.ceil(n/r.digestLength);for(var o=0;o<s;++o){var u=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+u),i+=r.digest().getBytes()}return i.substring(0,n)}var t=e.pkcs1=e.pkcs1||{};t.encode_rsa_oaep=function(t,r,i){var s,o,u,a;typeof i==\"string\"?(s=i,o=arguments[3]||undefined,u=arguments[4]||undefined):i&&(s=i.label||undefined,o=i.seed||undefined,u=i.md||undefined,i.mgf1&&i.mgf1.md&&(a=i.mgf1.md)),u?u.start():u=e.md.sha1.create(),a||(a=u);var f=Math.ceil(t.n.bitLength()/8),l=f-2*u.digestLength-2;if(r.length>l){var c=new Error(\"RSAES-OAEP input message length is too long.\");throw c.length=r.length,c.maxLength=l,c}s||(s=\"\"),u.update(s,\"raw\");var h=u.digest(),p=\"\",d=l-r.length;for(var v=0;v<d;v++)p+=\"\\0\";var m=h.getBytes()+p+\"\u0001\"+r;if(!o)o=e.random.getBytes(u.digestLength);else if(o.length!==u.digestLength){var c=new Error(\"Invalid RSAES-OAEP seed. The seed length must match the digest length.\");throw c.seedLength=o.length,c.digestLength=u.digestLength,c}var g=n(o,f-u.digestLength-1,a),y=e.util.xorBytes(m,g,m.length),b=n(y,u.digestLength,a),w=e.util.xorBytes(o,b,o.length);return\"\\0\"+w+y},t.decode_rsa_oaep=function(t,r,i){var s,o,u;typeof i==\"string\"?(s=i,o=arguments[3]||undefined):i&&(s=i.label||undefined,o=i.md||undefined,i.mgf1&&i.mgf1.md&&(u=i.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(r.length!==a){var f=new Error(\"RSAES-OAEP encoded message length is invalid.\");throw f.length=r.length,f.expectedLength=a,f}o===undefined?o=e.md.sha1.create():o.start(),u||(u=o);if(a<2*o.digestLength+2)throw new Error(\"RSAES-OAEP key is too short for the hash function.\");s||(s=\"\"),o.update(s,\"raw\");var l=o.digest().getBytes(),c=r.charAt(0),h=r.substring(1,o.digestLength+1),p=r.substring(1+o.digestLength),d=n(p,o.digestLength,u),v=e.util.xorBytes(h,d,h.length),m=n(v,a-o.digestLength-1,u),g=e.util.xorBytes(p,m,p.length),y=g.substring(0,o.digestLength),f=c!==\"\\0\";for(var b=0;b<o.digestLength;++b)f|=l.charAt(b)!==y.charAt(b);var w=1,E=o.digestLength;for(var S=o.digestLength;S<g.length;S++){var x=g.charCodeAt(S),T=x&1^1,N=w?65534:0;f|=x&N,w&=T,E+=w}if(f||g.charCodeAt(E)!==1)throw new Error(\"Invalid RSAES-OAEP padding.\");return g.substring(E+1)}}var r=\"pkcs1\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pkcs1\",[\"require\",\"module\",\"./util\",\"./random\",\"./sha1\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function o(e,t,n,r){return\"workers\"in n?a(e,t,n,r):u(e,t,n,r)}function u(t,n,i,s){var o=f(t,n),a=0,c=l(o.bitLength());\"millerRabinTests\"in i&&(c=i.millerRabinTests);var h=10;\"maxBlockTime\"in i&&(h=i.maxBlockTime);var p=+(new Date);do{o.bitLength()>t&&(o=f(t,n));if(o.isProbablePrime(c))return s(null,o);o.dAddOffset(r[a++%8],0)}while(h<0||+(new Date)-p<h);e.util.setImmediate(function(){u(t,n,i,s)})}function a(t,r,i,s){function p(){function d(i){if(p)return;--u;var a=i.data;if(a.found){for(var h=0;h<e.length;++h)e[h].terminate();return p=!0,s(null,new n(a.prime,16))}o.bitLength()>t&&(o=f(t,r));var d=o.toString(16);i.target.postMessage({hex:d,workLoad:l}),o.dAddOffset(c,0)}a=Math.max(1,a);var e=[];for(var i=0;i<a;++i)e[i]=new Worker(h);var u=a;for(var i=0;i<a;++i)e[i].addEventListener(\"message\",d);var p=!1}if(typeof Worker==\"undefined\")return u(t,r,i,s);var o=f(t,r),a=i.workers,l=i.workLoad||100,c=l*30/8,h=i.workerScript||\"forge/prime.worker.js\";if(a===-1)return e.util.estimateCores(function(e,t){e&&(t=2),a=t-1,p()});p()}function f(e,t){var r=new n(e,t),o=e-1;return r.testBit(o)||r.bitwiseTo(n.ONE.shiftLeft(o),s,r),r.dAddOffset(31-r.mod(i).byteValue(),0),r}function l(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}if(e.prime)return;var t=e.prime=e.prime||{},n=e.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new n(null);i.fromInt(30);var s=function(e,t){return e|t};t.generateProbablePrime=function(t,n,r){typeof n==\"function\"&&(r=n,n={}),n=n||{};var i=n.algorithm||\"PRIMEINC\";typeof i==\"string\"&&(i={name:i}),i.options=i.options||{};var s=n.prng||e.random,u={nextBytes:function(e){var t=s.getBytesSync(e.length);for(var n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if(i.name===\"PRIMEINC\")return o(t,u,i.options,r);throw new Error(\"Invalid prime generation algorithm: \"+i.name)}}var r=\"prime\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/prime\",[\"require\",\"module\",\"./util\",\"./jsbn\",\"./random\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function c(t,n,r){var i=e.util.createBuffer(),s=Math.ceil(n.n.bitLength()/8);if(t.length>s-11){var o=new Error(\"Message is too long for PKCS#1 v1.5 padding.\");throw o.length=t.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var u=s-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var f=0;f<u;++f)i.putByte(a)}else while(u>0){var l=0,c=e.random.getBytes(u);for(var f=0;f<u;++f)a=c.charCodeAt(f),a===0?++l:i.putByte(a);u=l}return i.putByte(0),i.putBytes(t),i}function h(t,n,r,i){var s=Math.ceil(n.n.bitLength()/8),o=e.util.createBuffer(t),u=o.getByte(),a=o.getByte();if(u!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof i==\"undefined\")throw new Error(\"Encryption block is invalid.\");var f=0;if(a===0){f=s-3-i;for(var l=0;l<f;++l)if(o.getByte()!==0)throw new Error(\"Encryption block is invalid.\")}else if(a===1){f=0;while(o.length()>1){if(o.getByte()!==255){--o.read;break}++f}}else if(a===2){f=0;while(o.length()>1){if(o.getByte()===0){--o.read;break}++f}}var c=o.getByte();if(c!==0||f!==s-3-o.length())throw new Error(\"Encryption block is invalid.\");return o.getBytes()}function p(n,i,s){function u(){a(n.pBits,function(e,t){if(e)return s(e);n.p=t;if(n.q!==null)return f(e,n.q);a(n.qBits,f)})}function a(t,n){e.prime.generateProbablePrime(t,o,n)}function f(e,i){if(e)return s(e);n.q=i;if(n.p.compareTo(n.q)<0){var o=n.p;n.p=n.q,n.q=o}if(n.p.subtract(t.ONE).gcd(n.e).compareTo(t.ONE)!==0){n.p=null,u();return}if(n.q.subtract(t.ONE).gcd(n.e).compareTo(t.ONE)!==0){n.q=null,a(n.qBits,f);return}n.p1=n.p.subtract(t.ONE),n.q1=n.q.subtract(t.ONE),n.phi=n.p1.multiply(n.q1);if(n.phi.gcd(n.e).compareTo(t.ONE)!==0){n.p=n.q=null,u();return}n.n=n.p.multiply(n.q);if(n.n.bitLength()!==n.bits){n.q=null,a(n.qBits,f);return}var l=n.e.modInverse(n.phi);n.keys={privateKey:r.rsa.setPrivateKey(n.n,n.e,l,n.p,n.q,l.mod(n.p1),l.mod(n.q1),n.q.modInverse(n.p)),publicKey:r.rsa.setPublicKey(n.n,n.e)},s(null,n.keys)}typeof i==\"function\"&&(s=i,i={}),i=i||{};var o={algorithm:{name:i.algorithm||\"PRIMEINC\",options:{workers:i.workers||2,workLoad:i.workLoad||100,workerScript:i.workerScript}}};\"prng\"in i&&(o.prng=i.prng),u()}function d(t){var n=t.toString(16);return n[0]>=\"8\"&&(n=\"00\"+n),e.util.hexToBytes(n)}function v(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function m(e){return typeof window!=\"undefined\"&&typeof window.crypto==\"object\"&&typeof window.crypto.subtle==\"object\"&&typeof window.crypto.subtle[e]==\"function\"}function g(e){return typeof window!=\"undefined\"&&typeof window.msCrypto==\"object\"&&typeof window.msCrypto.subtle==\"object\"&&typeof window.msCrypto.subtle[e]==\"function\"}function y(t){var n=e.util.hexToBytes(t.toString(16)),r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}function b(e){if(e.kty!==\"RSA\")throw new Error('Unsupported key algorithm \"'+e.kty+'\"; algorithm must be \"RSA\".');return r.setRsaPrivateKey(E(e.n),E(e.e),E(e.d),E(e.p),E(e.q),E(e.dp),E(e.dq),E(e.qi))}function w(e){if(e.kty!==\"RSA\")throw new Error('Key algorithm must be \"RSA\".');return r.setRsaPublicKey(E(e.n),E(e.e))}function E(n){return new t(e.util.bytesToHex(e.util.decode64(n)),16)}if(typeof t==\"undefined\")var t=e.jsbn.BigInteger;var n=e.asn1;e.pki=e.pki||{},e.pki.rsa=e.rsa=e.rsa||{};var r=e.pki,i=[6,4,2,4,2,4,6,2],s={name:\"PrivateKeyInfo\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"PrivateKeyInfo.version\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyVersion\"},{name:\"PrivateKeyInfo.privateKeyAlgorithm\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"AlgorithmIdentifier.algorithm\",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:\"privateKeyOid\"}]},{name:\"PrivateKeyInfo\",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:\"privateKey\"}]},o={name:\"RSAPrivateKey\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"RSAPrivateKey.version\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyVersion\"},{name:\"RSAPrivateKey.modulus\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyModulus\"},{name:\"RSAPrivateKey.publicExponent\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyPublicExponent\"},{name:\"RSAPrivateKey.privateExponent\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyPrivateExponent\"},{name:\"RSAPrivateKey.prime1\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyPrime1\"},{name:\"RSAPrivateKey.prime2\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyPrime2\"},{name:\"RSAPrivateKey.exponent1\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyExponent1\"},{name:\"RSAPrivateKey.exponent2\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyExponent2\"},{name:\"RSAPrivateKey.coefficient\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"privateKeyCoefficient\"}]},u={name:\"RSAPublicKey\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"RSAPublicKey.modulus\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"publicKeyModulus\"},{name:\"RSAPublicKey.exponent\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"publicKeyExponent\"}]},a=e.pki.rsa.publicKeyValidator={name:\"SubjectPublicKeyInfo\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:\"subjectPublicKeyInfo\",value:[{name:\"SubjectPublicKeyInfo.AlgorithmIdentifier\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"AlgorithmIdentifier.algorithm\",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:\"publicKeyOid\"}]},{name:\"SubjectPublicKeyInfo.subjectPublicKey\",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,value:[{name:\"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:\"rsaPublicKey\"}]}]},f=function(e){var t;if(e.algorithm in r.oids){t=r.oids[e.algorithm];var s=n.oidToDer(t).getBytes(),o=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),u=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);u.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,s)),u.value.push(n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,\"\"));var a=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.digest().getBytes());return o.value.push(u),o.value.push(a),n.toDer(o).getBytes()}var i=new Error(\"Unknown message digest algorithm.\");throw i.algorithm=e.algorithm,i},l=function(n,r,i){if(i)return n.modPow(r.e,r.n);if(!r.p||!r.q)return n.modPow(r.d,r.n);r.dP||(r.dP=r.d.mod(r.p.subtract(t.ONE))),r.dQ||(r.dQ=r.d.mod(r.q.subtract(t.ONE))),r.qInv||(r.qInv=r.q.modInverse(r.p));var s;do s=new t(e.util.bytesToHex(e.random.getBytes(r.n.bitLength()/8)),16);while(s.compareTo(r.n)>=0||!s.gcd(r.n).equals(t.ONE));n=n.multiply(s.modPow(r.e,r.n)).mod(r.n);var o=n.mod(r.p).modPow(r.dP,r.p),u=n.mod(r.q).modPow(r.dQ,r.q);while(o.compareTo(u)<0)o=o.add(r.p);var a=o.subtract(u).multiply(r.qInv).mod(r.p).multiply(r.q).add(u);return a=a.multiply(s.modInverse(r.n)).mod(r.n),a};r.rsa.encrypt=function(n,r,i){var s=i,o,u=Math.ceil(r.n.bitLength()/8);i!==!1&&i!==!0?(s=i===2,o=c(n,r,i)):(o=e.util.createBuffer(),o.putBytes(n));var a=new t(o.toHex(),16),f=l(a,r,s),h=f.toString(16),p=e.util.createBuffer(),d=u-Math.ceil(h.length/2);while(d>0)p.putByte(0),--d;return p.putBytes(e.util.hexToBytes(h)),p.getBytes()},r.rsa.decrypt=function(n,r,i,s){var o=Math.ceil(r.n.bitLength()/8);if(n.length!==o){var u=new Error(\"Encrypted message length is invalid.\");throw u.length=n.length,u.expected=o,u}var a=new t(e.util.createBuffer(n).toHex(),16);if(a.compareTo(r.n)>=0)throw new Error(\"Encrypted message is invalid.\");var f=l(a,r,i),c=f.toString(16),p=e.util.createBuffer(),d=o-Math.ceil(c.length/2);while(d>0)p.putByte(0),--d;return p.putBytes(e.util.hexToBytes(c)),s!==!1?h(p.getBytes(),r,i):p.getBytes()},r.rsa.createKeyPairGenerationState=function(n,r,i){typeof n==\"string\"&&(n=parseInt(n,10)),n=n||2048,i=i||{};var s=i.prng||e.random,o={nextBytes:function(e){var t=s.getBytesSync(e.length);for(var n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},u=i.algorithm||\"PRIMEINC\",a;if(u!==\"PRIMEINC\")throw new Error(\"Invalid key generation algorithm: \"+u);return a={algorithm:u,state:0,bits:n,rng:o,eInt:r||65537,e:new t(null),p:null,q:null,qBits:n>>1,pBits:n-(n>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt),a},r.rsa.stepKeyPairGenerationState=function(e,n){\"algorithm\"in e||(e.algorithm=\"PRIMEINC\");var s=new t(null);s.fromInt(30);var o=0,u=function(e,t){return e|t},a=+(new Date),f,l=0;while(e.keys===null&&(n<=0||l<n)){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,h=c-1;e.pqState===0?(e.num=new t(c,e.rng),e.num.testBit(h)||e.num.bitwiseTo(t.ONE.shiftLeft(h),u,e.num),e.num.dAddOffset(31-e.num.mod(s).byteValue(),0),o=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(v(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(i[o++%8],0):e.pqState===2?e.pqState=e.num.subtract(t.ONE).gcd(e.e).compareTo(t.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(t.ONE),e.q1=e.q.subtract(t.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(t.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var p=e.e.modInverse(e.phi);e.keys={privateKey:r.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:r.rsa.setPublicKey(e.n,e.e)}}f=+(new Date),l+=f-a,a=f}return e.keys!==null},r.rsa.generateKeyPair=function(t,i,s,o){arguments.length===1?typeof t==\"object\"?(s=t,t=undefined):typeof t==\"function\"&&(o=t,t=undefined):arguments.length===2?typeof t==\"number\"?typeof i==\"function\"?(o=i,i=undefined):typeof i!=\"number\"&&(s=i,i=undefined):(s=t,o=i,t=undefined,i=undefined):arguments.length===3&&(typeof i==\"number\"?typeof s==\"function\"&&(o=s,s=undefined):(o=s,s=i,i=undefined)),s=s||{},t===undefined&&(t=s.bits||2048),i===undefined&&(i=s.e||65537);if(!e.disableNativeCode&&o&&t>=256&&t<=16384&&(i===65537||i===3)){if(m(\"generateKey\")&&m(\"exportKey\"))return window.crypto.subtle.generateKey({name:\"RSASSA-PKCS1-v1_5\",modulusLength:t,publicExponent:y(i),hash:{name:\"SHA-256\"}},!0,[\"sign\",\"verify\"]).then(function(e){return window.crypto.subtle.exportKey(\"pkcs8\",e.privateKey)}).catch(function(e){o(e)}).then(function(t){if(t){var i=r.privateKeyFromAsn1(n.fromDer(e.util.createBuffer(t)));o(null,{privateKey:i,publicKey:r.setRsaPublicKey(i.n,i.e)})}});if(g(\"generateKey\")&&g(\"exportKey\")){var u=window.msCrypto.subtle.generateKey({name:\"RSASSA-PKCS1-v1_5\",modulusLength:t,publicExponent:y(i),hash:{name:\"SHA-256\"}},!0,[\"sign\",\"verify\"]);u.oncomplete=function(t){var i=t.target.result,s=window.msCrypto.subtle.exportKey(\"pkcs8\",i.privateKey);s.oncomplete=function(t){var i=t.target.result,s=r.privateKeyFromAsn1(n.fromDer(e.util.createBuffer(i)));o(null,{privateKey:s,publicKey:r.setRsaPublicKey(s.n,s.e)})},s.onerror=function(e){o(e)}},u.onerror=function(e){o(e)};return}}var a=r.rsa.createKeyPairGenerationState(t,i,s);if(!o)return r.rsa.stepKeyPairGenerationState(a,0),a.keys;p(a,s,o)},r.setRsaPublicKey=r.rsa.setPublicKey=function(t,i){var s={n:t,e:i};return s.encrypt=function(t,n,i){typeof n==\"string\"?n=n.toUpperCase():n===undefined&&(n=\"RSAES-PKCS1-V1_5\");if(n===\"RSAES-PKCS1-V1_5\")n={encode:function(e,t,n){return c(e,t,2).getBytes()}};else if(n===\"RSA-OAEP\"||n===\"RSAES-OAEP\")n={encode:function(t,n){return e.pkcs1.encode_rsa_oaep(n,t,i)}};else if([\"RAW\",\"NONE\",\"NULL\",null].indexOf(n)!==-1)n={encode:function(e){return e}};else if(typeof n==\"string\")throw new Error('Unsupported encryption scheme: \"'+n+'\".');var o=n.encode(t,s,!0);return r.rsa.encrypt(o,s,!0)},s.verify=function(e,t,i){typeof i==\"string\"?i=i.toUpperCase():i===undefined&&(i=\"RSASSA-PKCS1-V1_5\");if(i===\"RSASSA-PKCS1-V1_5\")i={verify:function(e,t){t=h(t,s,!0);var r=n.fromDer(t);return e===r.value[1].value}};else if(i===\"NONE\"||i===\"NULL\"||i===null)i={verify:function(e,t){return t=h(t,s,!0),e===t}};var o=r.rsa.decrypt(t,s,!0,!1);return i.verify(e,o,s.n.bitLength())},s},r.setRsaPrivateKey=r.rsa.setPrivateKey=function(t,n,i,s,o,u,a,l){var c={n:t,e:n,d:i,p:s,q:o,dP:u,dQ:a,qInv:l};return c.decrypt=function(t,n,i){typeof n==\"string\"?n=n.toUpperCase():n===undefined&&(n=\"RSAES-PKCS1-V1_5\");var s=r.rsa.decrypt(t,c,!1,!1);if(n===\"RSAES-PKCS1-V1_5\")n={decode:h};else if(n===\"RSA-OAEP\"||n===\"RSAES-OAEP\")n={decode:function(t,n){return e.pkcs1.decode_rsa_oaep(n,t,i)}};else{if([\"RAW\",\"NONE\",\"NULL\",null].indexOf(n)===-1)throw new Error('Unsupported encryption scheme: \"'+n+'\".');n={decode:function(e){return e}}}return n.decode(s,c,!1)},c.sign=function(e,t){var n=!1;typeof t==\"string\"&&(t=t.toUpperCase());if(t===undefined||t===\"RSASSA-PKCS1-V1_5\")t={encode:f},n=1;else if(t===\"NONE\"||t===\"NULL\"||t===null)t={encode:function(){return e}},n=1;var i=t.encode(e,c.n.bitLength());return r.rsa.encrypt(i,c,n)},c},r.wrapRsaPrivateKey=function(e){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,\"\")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(e).getBytes())])},r.privateKeyFromAsn1=function(i){var u={},a=[];n.validate(i,s,u,a)&&(i=n.fromDer(e.util.createBuffer(u.privateKey))),u={},a=[];if(!n.validate(i,o,u,a)){var f=new Error(\"Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.\");throw f.errors=a,f}var l,c,h,p,d,v,m,g;return l=e.util.createBuffer(u.privateKeyModulus).toHex(),c=e.util.createBuffer(u.privateKeyPublicExponent).toHex(),h=e.util.createBuffer(u.privateKeyPrivateExponent).toHex(),p=e.util.createBuffer(u.privateKeyPrime1).toHex(),d=e.util.createBuffer(u.privateKeyPrime2).toHex(),v=e.util.createBuffer(u.privateKeyExponent1).toHex(),m=e.util.createBuffer(u.privateKeyExponent2).toHex(),g=e.util.createBuffer(u.privateKeyCoefficient).toHex(),r.setRsaPrivateKey(new t(l,16),new t(c,16),new t(h,16),new t(p,16),new t(d,16),new t(v,16),new t(m,16),new t(g,16))},r.privateKeyToAsn1=r.privateKeyToRSAPrivateKey=function(e){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.e)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.d)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.p)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.q)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.dP)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.dQ)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.qInv))])},r.publicKeyFromAsn1=function(i){var s={},o=[];if(n.validate(i,a,s,o)){var f=n.derToOid(s.publicKeyOid);if(f!==r.oids.rsaEncryption){var l=new Error(\"Cannot read public key. Unknown OID.\");throw l.oid=f,l}i=s.rsaPublicKey}o=[];if(!n.validate(i,u,s,o)){var l=new Error(\"Cannot read public key. ASN.1 object does not contain an RSAPublicKey.\");throw l.errors=o,l}var c=e.util.createBuffer(s.publicKeyModulus).toHex(),h=e.util.createBuffer(s.publicKeyExponent).toHex();return r.setRsaPublicKey(new t(c,16),new t(h,16))},r.publicKeyToAsn1=r.publicKeyToSubjectPublicKeyInfo=function(e){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,\"\")]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,[r.publicKeyToRSAPublicKey(e)])])},r.publicKeyToRSAPublicKey=function(e){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,d(e.e))])}}var r=\"rsa\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/rsa\",[\"require\",\"module\",\"./asn1\",\"./jsbn\",\"./oids\",\"./pkcs1\",\"./prime\",\"./random\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function a(e,t){return e.start().update(t).digest().getBytes()}if(typeof t==\"undefined\")var t=e.jsbn.BigInteger;var n=e.asn1,r=e.pki=e.pki||{};r.pbe=e.pbe=e.pbe||{};var i=r.oids,s={name:\"EncryptedPrivateKeyInfo\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedPrivateKeyInfo.encryptionAlgorithm\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"AlgorithmIdentifier.algorithm\",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:\"encryptionOid\"},{name:\"AlgorithmIdentifier.parameters\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:\"encryptionParams\"}]},{name:\"EncryptedPrivateKeyInfo.encryptedData\",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:\"encryptedData\"}]},o={name:\"PBES2Algorithms\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.keyDerivationFunc\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.keyDerivationFunc.oid\",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:\"kdfOid\"},{name:\"PBES2Algorithms.params\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.params.salt\",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:\"kdfSalt\"},{name:\"PBES2Algorithms.params.iterationCount\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,onstructed:!0,capture:\"kdfIterationCount\"}]}]},{name:\"PBES2Algorithms.encryptionScheme\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"PBES2Algorithms.encryptionScheme.oid\",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:\"encOid\"},{name:\"PBES2Algorithms.encryptionScheme.iv\",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:\"encIv\"}]}]},u={name:\"pkcs-12PbeParams\",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:\"pkcs-12PbeParams.salt\",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:\"salt\"},{name:\"pkcs-12PbeParams.iterations\",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:\"iterations\"}]};r.encryptPrivateKeyInfo=function(t,s,o){o=o||{},o.saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||\"aes128\";var u=e.random.getBytesSync(o.saltSize),a=o.count,f=n.integerToDer(a),l,c,h;if(o.algorithm.indexOf(\"aes\")===0||o.algorithm===\"des\"){var p,d,v;switch(o.algorithm){case\"aes128\":l=16,p=16,d=i[\"aes128-CBC\"],v=e.aes.createEncryptionCipher;break;case\"aes192\":l=24,p=16,d=i[\"aes192-CBC\"],v=e.aes.createEncryptionCipher;break;case\"aes256\":l=32,p=16,d=i[\"aes256-CBC\"],v=e.aes.createEncryptionCipher;break;case\"des\":l=8,p=8,d=i.desCBC,v=e.des.createEncryptionCipher;break;default:var m=new Error(\"Cannot encrypt private key. Unknown encryption algorithm.\");throw m.algorithm=o.algorithm,m}var g=e.pkcs5.pbkdf2(s,u,a,l),y=e.random.getBytesSync(p),b=v(g);b.start(y),b.update(n.toDer(t)),b.finish(),h=b.output.getBytes(),c=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(i.pkcs5PBES2).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(i.pkcs5PBKDF2).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,u),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,f.getBytes())])]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(d).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,y)])])])}else{if(o.algorithm!==\"3des\"){var m=new Error(\"Cannot encrypt private key. Unknown encryption algorithm.\");throw m.algorithm=o.algorithm,m}l=24;var w=new e.util.ByteBuffer(u),g=r.pbe.generatePkcs12Key(s,w,1,a,l),y=r.pbe.generatePkcs12Key(s,w,2,a,l),b=e.des.createEncryptionCipher(g);b.start(y),b.update(n.toDer(t)),b.finish(),h=b.output.getBytes(),c=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(i[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,u),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,f.getBytes())])])}var E=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[c,n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,h)]);return E},r.decryptPrivateKeyInfo=function(t,i){var o=null,u={},a=[];if(!n.validate(t,s,u,a)){var f=new Error(\"Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\");throw f.errors=a,f}var l=n.derToOid(u.encryptionOid),c=r.pbe.getCipher(l,u.encryptionParams,i),h=e.util.createBuffer(u.encryptedData);return c.update(h),c.finish()&&(o=n.fromDer(c.output)),o},r.encryptedPrivateKeyToPem=function(t,r){var i={type:\"ENCRYPTED PRIVATE KEY\",body:n.toDer(t).getBytes()};return e.pem.encode(i,{maxline:r})},r.encryptedPrivateKeyFromPem=function(t){var r=e.pem.decode(t)[0];if(r.type!==\"ENCRYPTED PRIVATE KEY\"){var i=new Error('Could not convert encrypted private key from PEM; PEM header type is \"ENCRYPTED PRIVATE KEY\".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert encrypted private key from PEM; PEM is encrypted.\");return n.fromDer(r.body)},r.encryptRsaPrivateKey=function(t,i,s){s=s||{};if(!s.legacy){var o=r.wrapRsaPrivateKey(r.privateKeyToAsn1(t));return o=r.encryptPrivateKeyInfo(o,i,s),r.encryptedPrivateKeyToPem(o)}var u,a,f,l;switch(s.algorithm){case\"aes128\":u=\"AES-128-CBC\",f=16,a=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case\"aes192\":u=\"AES-192-CBC\",f=24,a=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case\"aes256\":u=\"AES-256-CBC\",f=32,a=e.random.getBytesSync(16),l=e.aes.createEncryptionCipher;break;case\"3des\":u=\"DES-EDE3-CBC\",f=24,a=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;case\"des\":u=\"DES-CBC\",f=8,a=e.random.getBytesSync(8),l=e.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm \"'+s.algorithm+'\".');throw c.algorithm=s.algorithm,c}var h=e.pbe.opensslDeriveBytes(i,a.substr(0,8),f),p=l(h);p.start(a),p.update(n.toDer(r.privateKeyToAsn1(t))),p.finish();var d={type:\"RSA PRIVATE KEY\",procType:{version:\"4\",type:\"ENCRYPTED\"},dekInfo:{algorithm:u,parameters:e.util.bytesToHex(a).toUpperCase()},body:p.output.getBytes()};return e.pem.encode(d)},r.decryptRsaPrivateKey=function(t,i){var s=null,o=e.pem.decode(t)[0];if(o.type!==\"ENCRYPTED PRIVATE KEY\"&&o.type!==\"PRIVATE KEY\"&&o.type!==\"RSA PRIVATE KEY\"){var u=new Error('Could not convert private key from PEM; PEM header type is not \"ENCRYPTED PRIVATE KEY\", \"PRIVATE KEY\", or \"RSA PRIVATE KEY\".');throw u.headerType=u,u}if(o.procType&&o.procType.type===\"ENCRYPTED\"){var a,f;switch(o.dekInfo.algorithm){case\"DES-CBC\":a=8,f=e.des.createDecryptionCipher;break;case\"DES-EDE3-CBC\":a=24,f=e.des.createDecryptionCipher;break;case\"AES-128-CBC\":a=16,f=e.aes.createDecryptionCipher;break;case\"AES-192-CBC\":a=24,f=e.aes.createDecryptionCipher;break;case\"AES-256-CBC\":a=32,f=e.aes.createDecryptionCipher;break;case\"RC2-40-CBC\":a=5,f=function(t){return e.rc2.createDecryptionCipher(t,40)};break;case\"RC2-64-CBC\":a=8,f=function(t){return e.rc2.createDecryptionCipher(t,64)};break;case\"RC2-128-CBC\":a=16,f=function(t){return e.rc2.createDecryptionCipher(t,128)};break;default:var u=new Error('Could not decrypt private key; unsupported encryption algorithm \"'+o.dekInfo.algorithm+'\".');throw u.algorithm=o.dekInfo.algorithm,u}var l=e.util.hexToBytes(o.dekInfo.parameters),c=e.pbe.opensslDeriveBytes(i,l.substr(0,8),a),h=f(c);h.start(l),h.update(e.util.createBuffer(o.body));if(!h.finish())return s;s=h.output.getBytes()}else s=o.body;return o.type===\"ENCRYPTED PRIVATE KEY\"?s=r.decryptPrivateKeyInfo(n.fromDer(s),i):s=n.fromDer(s),s!==null&&(s=r.privateKeyFromAsn1(s)),s},r.pbe.generatePkcs12Key=function(t,n,r,i,s,o){var u,a;if(typeof o==\"undefined\"||o===null)o=e.md.sha1.create();var f=o.digestLength,l=o.blockLength,c=new e.util.ByteBuffer,h=new e.util.ByteBuffer;if(t!==null&&t!==undefined){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var p=h.length(),d=n.length(),v=new e.util.ByteBuffer;v.fillWithByte(r,l);var m=l*Math.ceil(d/l),g=new e.util.ByteBuffer;for(a=0;a<m;a++)g.putByte(n.at(a%d));var y=l*Math.ceil(p/l),b=new e.util.ByteBuffer;for(a=0;a<y;a++)b.putByte(h.at(a%p));var w=g;w.putBuffer(b);var E=Math.ceil(s/f);for(var S=1;S<=E;S++){var x=new e.util.ByteBuffer;x.putBytes(v.bytes()),x.putBytes(w.bytes());for(var T=0;T<i;T++)o.start(),o.update(x.getBytes()),x=o.digest();var N=new e.util.ByteBuffer;for(a=0;a<l;a++)N.putByte(x.at(a%f));var C=Math.ceil(d/l)+Math.ceil(p/l),k=new e.util.ByteBuffer;for(u=0;u<C;u++){var L=new e.util.ByteBuffer(w.getBytes(l)),A=511;for(a=N.length()-1;a>=0;a--)A>>=8,A+=N.at(a)+L.at(a),L.setAt(a,A&255);k.putBuffer(L)}w=k,c.putBuffer(x)}return c.truncate(c.length()-s),c},r.pbe.getCipher=function(e,t,n){switch(e){case r.oids.pkcs5PBES2:return r.pbe.getCipherForPBES2(e,t,n);case r.oids[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]:case r.oids[\"pbewithSHAAnd40BitRC2-CBC\"]:return r.pbe.getCipherForPKCS12PBE(e,t,n);default:var i=new Error(\"Cannot read encrypted PBE data block. Unsupported OID.\");throw i.oid=e,i.supportedOids=[\"pkcs5PBES2\",\"pbeWithSHAAnd3-KeyTripleDES-CBC\",\"pbewithSHAAnd40BitRC2-CBC\"],i}},r.pbe.getCipherForPBES2=function(t,i,s){var u={},a=[];if(!n.validate(i,o,u,a)){var f=new Error(\"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\");throw f.errors=a,f}t=n.derToOid(u.kdfOid);if(t!==r.oids.pkcs5PBKDF2){var f=new Error(\"Cannot read encrypted private key. Unsupported key derivation function OID.\");throw f.oid=t,f.supportedOids=[\"pkcs5PBKDF2\"],f}t=n.derToOid(u.encOid);if(t!==r.oids[\"aes128-CBC\"]&&t!==r.oids[\"aes192-CBC\"]&&t!==r.oids[\"aes256-CBC\"]&&t!==r.oids[\"des-EDE3-CBC\"]&&t!==r.oids.desCBC){var f=new Error(\"Cannot read encrypted private key. Unsupported encryption scheme OID.\");throw f.oid=t,f.supportedOids=[\"aes128-CBC\",\"aes192-CBC\",\"aes256-CBC\",\"des-EDE3-CBC\",\"desCBC\"],f}var l=u.kdfSalt,c=e.util.createBuffer(u.kdfIterationCount);c=c.getInt(c.length()<<3);var h,p;switch(r.oids[t]){case\"aes128-CBC\":h=16,p=e.aes.createDecryptionCipher;break;case\"aes192-CBC\":h=24,p=e.aes.createDecryptionCipher;break;case\"aes256-CBC\":h=32,p=e.aes.createDecryptionCipher;break;case\"des-EDE3-CBC\":h=24,p=e.des.createDecryptionCipher;break;case\"desCBC\":h=8,p=e.des.createDecryptionCipher}var d=e.pkcs5.pbkdf2(s,l,c,h),v=u.encIv,m=p(d);return m.start(v),m},r.pbe.getCipherForPKCS12PBE=function(t,i,s){var o={},a=[];if(!n.validate(i,u,o,a)){var f=new Error(\"Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.\");throw f.errors=a,f}var l=e.util.createBuffer(o.salt),c=e.util.createBuffer(o.iterations);c=c.getInt(c.length()<<3);var h,p,d;switch(t){case r.oids[\"pbeWithSHAAnd3-KeyTripleDES-CBC\"]:h=24,p=8,d=e.des.startDecrypting;break;case r.oids[\"pbewithSHAAnd40BitRC2-CBC\"]:h=5,p=8,d=function(t,n){var r=e.rc2.createDecryptionCipher(t,40);return r.start(n,null),r};break;default:var f=new Error(\"Cannot read PKCS #12 PBE data block. Unsupported OID.\");throw f.oid=t,f}var v=r.pbe.generatePkcs12Key(s,l,1,c,h),m=r.pbe.generatePkcs12Key(s,l,2,c,p);return d(v,m)},r.pbe.opensslDeriveBytes=function(t,n,r,i){if(typeof i==\"undefined\"||i===null)i=e.md.md5.create();n===null&&(n=\"\");var s=[a(i,t+n)];for(var o=16,u=1;o<r;++u,o+=16)s.push(a(i,s[u-1]+t+n));return s.join(\"\").substr(0,r)}}var r=\"pbe\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pbe\",[\"require\",\"module\",\"./aes\",\"./asn1\",\"./des\",\"./md\",\"./oids\",\"./pem\",\"./pbkdf2\",\"./random\",\"./rc2\",\"./rsa\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=n;var r={name:\"ContentInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"ContentInfo.ContentType\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"ContentInfo.content\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:\"content\"}]};n.contentInfoValidator=r;var i={name:\"EncryptedContentInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedContentInfo.contentType\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"EncryptedContentInfo.contentEncryptionAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"encAlgorithm\"},{name:\"EncryptedContentInfo.contentEncryptionAlgorithm.parameter\",tagClass:t.Class.UNIVERSAL,captureAsn1:\"encParameter\"}]},{name:\"EncryptedContentInfo.encryptedContent\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:\"encryptedContent\",captureAsn1:\"encryptedContentAsn1\"}]};n.envelopedDataValidator={name:\"EnvelopedData\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"EnvelopedData.Version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"EnvelopedData.RecipientInfos\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:\"recipientInfos\"}].concat(i)},n.encryptedDataValidator={name:\"EncryptedData\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"EncryptedData.Version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"version\"}].concat(i)};var s={name:\"SignerInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:\"SignerInfo.issuerAndSerialNumber\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.issuerAndSerialNumber.issuer\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"issuer\"},{name:\"SignerInfo.issuerAndSerialNumber.serialNumber\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"serial\"}]},{name:\"SignerInfo.digestAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"SignerInfo.digestAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"digestAlgorithm\"},{name:\"SignerInfo.digestAlgorithm.parameter\",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:\"digestParameter\",optional:!0}]},{name:\"SignerInfo.authenticatedAttributes\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:\"authenticatedAttributes\"},{name:\"SignerInfo.digestEncryptionAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:\"signatureAlgorithm\"},{name:\"SignerInfo.encryptedDigest\",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:\"signature\"},{name:\"SignerInfo.unauthenticatedAttributes\",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:\"unauthenticatedAttributes\"}]};n.signedDataValidator={name:\"SignedData\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"SignedData.Version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"SignedData.DigestAlgorithms\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:\"digestAlgorithms\"},r,{name:\"SignedData.Certificates\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:\"certificates\"},{name:\"SignedData.CertificateRevocationLists\",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:\"crls\"},{name:\"SignedData.SignerInfos\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:\"signerInfos\",optional:!0,value:[s]}]},n.recipientInfoValidator={name:\"RecipientInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"version\"},{name:\"RecipientInfo.issuerAndSerial\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.issuerAndSerial.issuer\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"issuer\"},{name:\"RecipientInfo.issuerAndSerial.serialNumber\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"serial\"}]},{name:\"RecipientInfo.keyEncryptionAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"RecipientInfo.keyEncryptionAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"encAlgorithm\"},{name:\"RecipientInfo.keyEncryptionAlgorithm.parameter\",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:\"encParameter\"}]},{name:\"RecipientInfo.encryptedKey\",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:\"encKey\"}]}}var r=\"pkcs7asn1\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pkcs7asn1\",[\"require\",\"module\",\"./asn1\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{};var t=e.mgf.mgf1=e.mgf1=e.mgf1||{};t.create=function(t){var n={generate:function(n,r){var i=new e.util.ByteBuffer,s=Math.ceil(r/t.digestLength);for(var o=0;o<s;o++){var u=new e.util.ByteBuffer;u.putInt32(o),t.start(),t.update(n+u.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()}};return n}}var r=\"mgf1\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/mgf1\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1}var r=\"mgf\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/mgf\",[\"require\",\"module\",\"./mgf1\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.pss=e.pss||{};t.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var n=t.md,r=t.mgf,i=n.digestLength,s=t.salt||null;typeof s==\"string\"&&(s=e.util.createBuffer(s));var o;if(\"saltLength\"in t)o=t.saltLength;else{if(s===null)throw new Error(\"Salt length not specified or specific salt not given.\");o=s.length()}if(s!==null&&s.length()!==o)throw new Error(\"Given salt length does not match length of given salt.\");var u=t.prng||e.random,a={};return a.encode=function(t,a){var f,l=a-1,c=Math.ceil(l/8),h=t.digest().getBytes();if(c<i+o+2)throw new Error(\"Message is too long to encrypt.\");var p;s===null?p=u.getBytesSync(o):p=s.bytes();var d=new e.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(h),d.putBytes(p),n.start(),n.update(d.getBytes());var v=n.digest().getBytes(),m=new e.util.ByteBuffer;m.fillWithByte(0,c-o-i-2),m.putByte(1),m.putBytes(p);var g=m.getBytes(),y=c-i-1,b=r.generate(v,y),w=\"\";for(f=0;f<y;f++)w+=String.fromCharCode(g.charCodeAt(f)^b.charCodeAt(f));var E=65280>>8*c-l&255;return w=String.fromCharCode(w.charCodeAt(0)&~E)+w.substr(1),w+v+String.fromCharCode(188)},a.verify=function(t,s,u){var a,f=u-1,l=Math.ceil(f/8);s=s.substr(-l);if(l<i+o+2)throw new Error(\"Inconsistent parameters to PSS signature verification.\");if(s.charCodeAt(l-1)!==188)throw new Error(\"Encoded message does not end in 0xBC.\");var c=l-i-1,h=s.substr(0,c),p=s.substr(c,i),d=65280>>8*l-f&255;if((h.charCodeAt(0)&d)!==0)throw new Error(\"Bits beyond keysize not zero as expected.\");var v=r.generate(p,c),m=\"\";for(a=0;a<c;a++)m+=String.fromCharCode(h.charCodeAt(a)^v.charCodeAt(a));m=String.fromCharCode(m.charCodeAt(0)&~d)+m.substr(1);var g=l-i-o-2;for(a=0;a<g;a++)if(m.charCodeAt(a)!==0)throw new Error(\"Leftmost octets not zero as expected\");if(m.charCodeAt(g)!==1)throw new Error(\"Inconsistent PSS signature, 0x01 marker not found\");var y=m.substr(-o),b=new e.util.ByteBuffer;b.fillWithByte(0,8),b.putBytes(t),b.putBytes(y),n.start(),n.update(b.getBytes());var w=n.digest().getBytes();return p===w},a}}var r=\"pss\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pss\",[\"require\",\"module\",\"./random\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function l(e,t){typeof t==\"string\"&&(t={shortName:t});var n=null,r;for(var i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}function h(n){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),i,s,o=n.attributes;for(var u=0;u<o.length;++u){i=o[u];var a=i.value,f=t.Type.PRINTABLESTRING;\"valueTagClass\"in i&&(f=i.valueTagClass,f===t.Type.UTF8&&(a=e.util.encodeUtf8(a))),s=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(i.type).getBytes()),t.create(t.Class.UNIVERSAL,f,!1,a)])]),r.value.push(s)}return r}function p(n){var r={};for(var i=0;i<n.length;++i){var s=n[i];if(s.shortName&&(s.valueTagClass===t.Type.UTF8||s.valueTagClass===t.Type.PRINTABLESTRING||s.valueTagClass===t.Type.IA5STRING)){var o=s.value;s.valueTagClass===t.Type.UTF8&&(o=e.util.encodeUtf8(s.value)),s.shortName in r?e.util.isArray(r[s.shortName])?r[s.shortName].push(o):r[s.shortName]=[r[s.shortName],o]:r[s.shortName]=o}}return r}function d(e){var s;for(var o=0;o<e.length;++o){s=e[o],typeof s.name==\"undefined\"&&(s.type&&s.type in n.oids?s.name=n.oids[s.type]:s.shortName&&s.shortName in i&&(s.name=n.oids[i[s.shortName]]));if(typeof s.type==\"undefined\"){if(!(s.name&&s.name in n.oids)){var u=new Error(\"Attribute type not specified.\");throw u.attribute=s,u}s.type=n.oids[s.name]}typeof s.shortName==\"undefined\"&&s.name&&s.name in i&&(s.shortName=i[s.name]);if(s.type===r.extensionRequest){s.valueConstructed=!0,s.valueTagClass=t.Type.SEQUENCE;if(!s.value&&s.extensions){s.value=[];for(var a=0;a<s.extensions.length;++a)s.value.push(n.certificateExtensionToAsn1(v(s.extensions[a])))}}if(typeof s.value==\"undefined\"){var u=new Error(\"Attribute value not specified.\");throw u.attribute=s,u}}}function v(i,s){s=s||{},typeof i.name==\"undefined\"&&i.id&&i.id in n.oids&&(i.name=n.oids[i.id]);if(typeof i.id==\"undefined\"){if(!(i.name&&i.name in n.oids)){var o=new Error(\"Extension ID not specified.\");throw o.extension=i,o}i.id=n.oids[i.name]}if(typeof i.value!=\"undefined\")return i;if(i.name===\"keyUsage\"){var u=0,a=0,f=0;i.digitalSignature&&(a|=128,u=7),i.nonRepudiation&&(a|=64,u=6),i.keyEncipherment&&(a|=32,u=5),i.dataEncipherment&&(a|=16,u=4),i.keyAgreement&&(a|=8,u=3),i.keyCertSign&&(a|=4,u=2),i.cRLSign&&(a|=2,u=1),i.encipherOnly&&(a|=1,u=0),i.decipherOnly&&(f|=128,u=7);var l=String.fromCharCode(u);f!==0?l+=String.fromCharCode(a)+String.fromCharCode(f):a!==0&&(l+=String.fromCharCode(a)),i.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,l)}else if(i.name===\"basicConstraints\")i.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),i.cA&&i.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),\"pathLenConstraint\"in i&&i.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(i.pathLenConstraint).getBytes()));else if(i.name===\"extKeyUsage\"){i.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=i.value.value;for(var p in i){if(i[p]!==!0)continue;p in r?c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r[p]).getBytes())):p.indexOf(\".\")!==-1&&c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(p).getBytes()))}}else if(i.name===\"nsCertType\"){var u=0,a=0;i.client&&(a|=128,u=7),i.server&&(a|=64,u=6),i.email&&(a|=32,u=5),i.objsign&&(a|=16,u=4),i.reserved&&(a|=8,u=3),i.sslCA&&(a|=4,u=2),i.emailCA&&(a|=2,u=1),i.objCA&&(a|=1,u=0);var l=String.fromCharCode(u);a!==0&&(l+=String.fromCharCode(a)),i.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,l)}else if(i.name===\"subjectAltName\"||i.name===\"issuerAltName\"){i.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var d;for(var v=0;v<i.altNames.length;++v){d=i.altNames[v];var l=d.value;if(d.type===7&&d.ip){l=e.util.bytesFromIP(d.ip);if(l===null){var o=new Error('Extension \"ip\" value is not a valid IPv4 or IPv6 address.');throw o.extension=i,o}}else d.type===8&&(d.oid?l=t.oidToDer(t.oidToDer(d.oid)):l=t.oidToDer(l));i.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,d.type,!1,l))}}else if(i.name===\"subjectKeyIdentifier\"&&s.cert){var m=s.cert.generateSubjectKeyIdentifier();i.subjectKeyIdentifier=m.toHex(),i.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,m.getBytes())}else if(i.name===\"authorityKeyIdentifier\"&&s.cert){i.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=i.value.value;if(i.keyIdentifier){var g=i.keyIdentifier===!0?s.cert.generateSubjectKeyIdentifier().getBytes():i.keyIdentifier;c.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,g))}if(i.authorityCertIssuer){var y=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[h(i.authorityCertIssuer===!0?s.cert.issuer:i.authorityCertIssuer)])];c.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,y))}if(i.serialNumber){var b=e.util.hexToBytes(i.serialNumber===!0?s.cert.serialNumber:i.serialNumber);c.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,b))}}else if(i.name===\"cRLDistributionPoints\"){i.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=i.value.value,w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),E=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]),d;for(var v=0;v<i.altNames.length;++v){d=i.altNames[v];var l=d.value;if(d.type===7&&d.ip){l=e.util.bytesFromIP(d.ip);if(l===null){var o=new Error('Extension \"ip\" value is not a valid IPv4 or IPv6 address.');throw o.extension=i,o}}else d.type===8&&(d.oid?l=t.oidToDer(t.oidToDer(d.oid)):l=t.oidToDer(l));E.value.push(t.create(t.Class.CONTEXT_SPECIFIC,d.type,!1,l))}w.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(w)}if(typeof i.value==\"undefined\"){var o=new Error(\"Extension value not specified.\");throw o.extension=i,o}return i}function m(e,n){switch(e){case r[\"RSASSA-PSS\"]:var i=[];return n.hash.algorithmOid!==undefined&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")])])),n.mgf.algorithmOid!==undefined&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")])])])),n.saltLength!==undefined&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,i);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")}}function g(n){var r=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(n.attributes.length===0)return r;var i=n.attributes;for(var s=0;s<i.length;++s){var o=i[s],u=o.value,a=t.Type.UTF8;\"valueTagClass\"in o&&(a=o.valueTagClass),a===t.Type.UTF8&&(u=e.util.encodeUtf8(u));var f=!1;\"valueConstructed\"in o&&(f=o.valueConstructed);var l=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,a,f,u)])]);r.value.push(l)}return r}var t=e.asn1,n=e.pki=e.pki||{},r=n.oids,i={};i.CN=r.commonName,i.commonName=\"CN\",i.C=r.countryName,i.countryName=\"C\",i.L=r.localityName,i.localityName=\"L\",i.ST=r.stateOrProvinceName,i.stateOrProvinceName=\"ST\",i.O=r.organizationName,i.organizationName=\"O\",i.OU=r.organizationalUnitName,i.organizationalUnitName=\"OU\",i.E=r.emailAddress,i.emailAddress=\"E\";var s=e.pki.rsa.publicKeyValidator,o={name:\"Certificate\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"Certificate.TBSCertificate\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"tbsCertificate\",value:[{name:\"Certificate.TBSCertificate.version\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:\"Certificate.TBSCertificate.version.integer\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"certVersion\"}]},{name:\"Certificate.TBSCertificate.serialNumber\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"certSerialNumber\"},{name:\"Certificate.TBSCertificate.signature\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"Certificate.TBSCertificate.signature.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"certinfoSignatureOid\"},{name:\"Certificate.TBSCertificate.signature.parameters\",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:\"certinfoSignatureParams\"}]},{name:\"Certificate.TBSCertificate.issuer\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"certIssuer\"},{name:\"Certificate.TBSCertificate.validity\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"Certificate.TBSCertificate.validity.notBefore (utc)\",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:\"certValidity1UTCTime\"},{name:\"Certificate.TBSCertificate.validity.notBefore (generalized)\",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:\"certValidity2GeneralizedTime\"},{name:\"Certificate.TBSCertificate.validity.notAfter (utc)\",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:\"certValidity3UTCTime\"},{name:\"Certificate.TBSCertificate.validity.notAfter (generalized)\",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:\"certValidity4GeneralizedTime\"}]},{name:\"Certificate.TBSCertificate.subject\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"certSubject\"},s,{name:\"Certificate.TBSCertificate.issuerUniqueID\",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:\"Certificate.TBSCertificate.issuerUniqueID.id\",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,capture:\"certIssuerUniqueId\"}]},{name:\"Certificate.TBSCertificate.subjectUniqueID\",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:\"Certificate.TBSCertificate.subjectUniqueID.id\",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,capture:\"certSubjectUniqueId\"}]},{name:\"Certificate.TBSCertificate.extensions\",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:\"certExtensions\",optional:!0}]},{name:\"Certificate.signatureAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"Certificate.signatureAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"certSignatureOid\"},{name:\"Certificate.TBSCertificate.signature.parameters\",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:\"certSignatureParams\"}]},{name:\"Certificate.signatureValue\",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,capture:\"certSignature\"}]},u={name:\"rsapss\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"rsapss.hashAlgorithm\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:\"rsapss.hashAlgorithm.AlgorithmIdentifier\",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:\"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"hashOid\"}]}]},{name:\"rsapss.maskGenAlgorithm\",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:\"rsapss.maskGenAlgorithm.AlgorithmIdentifier\",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:\"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"maskGenOid\"},{name:\"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"maskGenHashOid\"}]}]}]},{name:\"rsapss.saltLength\",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:\"rsapss.saltLength.saltLength\",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:\"saltLength\"}]},{name:\"rsapss.trailerField\",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:\"rsapss.trailer.trailer\",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:\"trailer\"}]}]},a={name:\"CertificationRequestInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"certificationRequestInfo\",value:[{name:\"CertificationRequestInfo.integer\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"certificationRequestInfoVersion\"},{name:\"CertificationRequestInfo.subject\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"certificationRequestInfoSubject\"},s,{name:\"CertificationRequestInfo.attributes\",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:\"certificationRequestInfoAttributes\",value:[{name:\"CertificationRequestInfo.attributes\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"CertificationRequestInfo.attributes.type\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:\"CertificationRequestInfo.attributes.value\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},f={name:\"CertificationRequest\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:\"csr\",value:[a,{name:\"CertificationRequest.signatureAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"CertificationRequest.signatureAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"csrSignatureOid\"},{name:\"CertificationRequest.signatureAlgorithm.parameters\",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:\"csrSignatureParams\"}]},{name:\"CertificationRequest.signature\",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,capture:\"csrSignature\"}]};n.RDNAttributesAsArray=function(e,n){var s=[],o,u,a;for(var f=0;f<e.value.length;++f){o=e.value[f];for(var l=0;l<o.value.length;++l)a={},u=o.value[l],a.type=t.derToOid(u.value[0].value),a.value=u.value[1].value,a.valueTagClass=u.value[1].type,a.type in r&&(a.name=r[a.type],a.name in i&&(a.shortName=i[a.name])),n&&(n.update(a.type),n.update(a.value)),s.push(a)}return s},n.CRIAttributesAsArray=function(e){var s=[];for(var o=0;o<e.length;++o){var u=e[o],a=t.derToOid(u.value[0].value),f=u.value[1].value;for(var l=0;l<f.length;++l){var c={};c.type=a,c.value=f[l].value,c.valueTagClass=f[l].type,c.type in r&&(c.name=r[c.type],c.name in i&&(c.shortName=i[c.name]));if(c.type===r.extensionRequest){c.extensions=[];for(var h=0;h<c.value.length;++h)c.extensions.push(n.certificateExtensionFromAsn1(c.value[h]))}s.push(c)}}return s};var c=function(e,n,i){var s={};if(e!==r[\"RSASSA-PSS\"])return s;i&&(s={hash:{algorithmOid:r.sha1},mgf:{algorithmOid:r.mgf1,hash:{algorithmOid:r.sha1}},saltLength:20});var o={},a=[];if(!t.validate(n,u,o,a)){var f=new Error(\"Cannot read RSASSA-PSS parameter block.\");throw f.errors=a,f}return o.hashOid!==undefined&&(s.hash=s.hash||{},s.hash.algorithmOid=t.derToOid(o.hashOid)),o.maskGenOid!==undefined&&(s.mgf=s.mgf||{},s.mgf.algorithmOid=t.derToOid(o.maskGenOid),s.mgf.hash=s.mgf.hash||{},s.mgf.hash.algorithmOid=t.derToOid(o.maskGenHashOid)),o.saltLength!==undefined&&(s.saltLength=o.saltLength.charCodeAt(0)),s};n.certificateFromPem=function(r,i,s){var o=e.pem.decode(r)[0];if(o.type!==\"CERTIFICATE\"&&o.type!==\"X509 CERTIFICATE\"&&o.type!==\"TRUSTED CERTIFICATE\"){var u=new Error('Could not convert certificate from PEM; PEM header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert certificate from PEM; PEM is encrypted.\");var a=t.fromDer(o.body,s);return n.certificateFromAsn1(a,i)},n.certificateToPem=function(r,i){var s={type:\"CERTIFICATE\",body:t.toDer(n.certificateToAsn1(r)).getBytes()};return e.pem.encode(s,{maxline:i})},n.publicKeyFromPem=function(r){var i=e.pem.decode(r)[0];if(i.type!==\"PUBLIC KEY\"&&i.type!==\"RSA PUBLIC KEY\"){var s=new Error('Could not convert public key from PEM; PEM header type is not \"PUBLIC KEY\" or \"RSA PUBLIC KEY\".');throw s.headerType=i.type,s}if(i.procType&&i.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert public key from PEM; PEM is encrypted.\");var o=t.fromDer(i.body);return n.publicKeyFromAsn1(o)},n.publicKeyToPem=function(r,i){var s={type:\"PUBLIC KEY\",body:t.toDer(n.publicKeyToAsn1(r)).getBytes()};return e.pem.encode(s,{maxline:i})},n.publicKeyToRSAPublicKeyPem=function(r,i){var s={type:\"RSA PUBLIC KEY\",body:t.toDer(n.publicKeyToRSAPublicKey(r)).getBytes()};return e.pem.encode(s,{maxline:i})},n.getPublicKeyFingerprint=function(r,i){i=i||{};var s=i.md||e.md.sha1.create(),o=i.type||\"RSAPublicKey\",u;switch(o){case\"RSAPublicKey\":u=t.toDer(n.publicKeyToRSAPublicKey(r)).getBytes();break;case\"SubjectPublicKeyInfo\":u=t.toDer(n.publicKeyToAsn1(r)).getBytes();break;default:throw new Error('Unknown fingerprint type \"'+i.type+'\".')}s.start(),s.update(u);var a=s.digest();if(i.encoding===\"hex\"){var f=a.toHex();return i.delimiter?f.match(/.{2}/g).join(i.delimiter):f}if(i.encoding===\"binary\")return a.getBytes();if(i.encoding)throw new Error('Unknown encoding \"'+i.encoding+'\".');return a},n.certificationRequestFromPem=function(r,i,s){var o=e.pem.decode(r)[0];if(o.type!==\"CERTIFICATE REQUEST\"){var u=new Error('Could not convert certification request from PEM; PEM header type is not \"CERTIFICATE REQUEST\".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert certification request from PEM; PEM is encrypted.\");var a=t.fromDer(o.body,s);return n.certificationRequestFromAsn1(a,i)},n.certificationRequestToPem=function(r,i){var s={type:\"CERTIFICATE REQUEST\",body:t.toDer(n.certificationRequestToAsn1(r)).getBytes()};return e.pem.encode(s,{maxline:i})},n.createCertificate=function(){var i={};return i.version=2,i.serialNumber=\"00\",i.signatureOid=null,i.signature=null,i.siginfo={},i.siginfo.algorithmOid=null,i.validity={},i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.issuer={},i.issuer.getField=function(e){return l(i.issuer,e)},i.issuer.addField=function(e){d([e]),i.issuer.attributes.push(e)},i.issuer.attributes=[],i.issuer.hash=null,i.subject={},i.subject.getField=function(e){return l(i.subject,e)},i.subject.addField=function(e){d([e]),i.subject.attributes.push(e)},i.subject.attributes=[],i.subject.hash=null,i.extensions=[],i.publicKey=null,i.md=null,i.setSubject=function(e,t){d(e),i.subject.attributes=e,delete i.subject.uniqueId,t&&(i.subject.uniqueId=t),i.subject.hash=null},i.setIssuer=function(e,t){d(e),i.issuer.attributes=e,delete i.issuer.uniqueId,t&&(i.issuer.uniqueId=t),i.issuer.hash=null},i.setExtensions=function(e){for(var t=0;t<e.length;++t)v(e[t],{cert:i});i.extensions=e},i.getExtension=function(e){typeof e==\"string\"&&(e={name:e});var t=null,n;for(var r=0;t===null&&r<i.extensions.length;++r)n=i.extensions[r],e.id&&n.id===e.id?t=n:e.name&&n.name===e.name&&(t=n);return t},i.sign=function(s,o){i.md=o||e.md.sha1.create();var u=r[i.md.algorithm+\"WithRSAEncryption\"];if(!u){var a=new Error(\"Could not compute certificate digest. Unknown message digest algorithm OID.\");throw a.algorithm=i.md.algorithm,a}i.signatureOid=i.siginfo.algorithmOid=u,i.tbsCertificate=n.getTBSCertificate(i);var f=t.toDer(i.tbsCertificate);i.md.update(f.getBytes()),i.signature=s.sign(i.md)},i.verify=function(s){var o=!1;if(!i.issued(s)){var u=s.issuer,a=i.subject,f=new Error(\"The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.\");throw f.expectedIssuer=u.attributes,f.actualIssuer=a.attributes,f}var l=s.md;if(l===null){if(s.signatureOid in r){var c=r[s.signatureOid];switch(c){case\"sha1WithRSAEncryption\":l=e.md.sha1.create();break;case\"md5WithRSAEncryption\":l=e.md.md5.create();break;case\"sha256WithRSAEncryption\":l=e.md.sha256.create();break;case\"sha512WithRSAEncryption\":l=e.md.sha512.create();break;case\"RSASSA-PSS\":l=e.md.sha256.create()}}if(l===null){var f=new Error(\"Could not compute certificate digest. Unknown signature OID.\");throw f.signatureOid=s.signatureOid,f}var h=s.tbsCertificate||n.getTBSCertificate(s),p=t.toDer(h);l.update(p.getBytes())}if(l!==null){var d;switch(s.signatureOid){case r.sha1WithRSAEncryption:d=undefined;break;case r[\"RSASSA-PSS\"]:var v,m;v=r[s.signatureParameters.mgf.hash.algorithmOid];if(v===undefined||e.md[v]===undefined){var f=new Error(\"Unsupported MGF hash function.\");throw f.oid=s.signatureParameters.mgf.hash.algorithmOid,f.name=v,f}m=r[s.signatureParameters.mgf.algorithmOid];if(m===undefined||e.mgf[m]===undefined){var f=new Error(\"Unsupported MGF function.\");throw f.oid=s.signatureParameters.mgf.algorithmOid,f.name=m,f}m=e.mgf[m].create(e.md[v].create()),v=r[s.signatureParameters.hash.algorithmOid];if(v===undefined||e.md[v]===undefined)throw{message:\"Unsupported RSASSA-PSS hash function.\",oid:s.signatureParameters.hash.algorithmOid,name:v};d=e.pss.create(e.md[v].create(),m,s.signatureParameters.saltLength)}o=i.publicKey.verify(l.digest().getBytes(),s.signature,d)}return o},i.isIssuer=function(e){var t=!1,n=i.issuer,r=e.subject;if(n.hash&&r.hash)t=n.hash===r.hash;else if(n.attributes.length===r.attributes.length){t=!0;var s,o;for(var u=0;t&&u<n.attributes.length;++u){s=n.attributes[u],o=r.attributes[u];if(s.type!==o.type||s.value!==o.value)t=!1}}return t},i.issued=function(e){return e.isIssuer(i)},i.generateSubjectKeyIdentifier=function(){return n.getPublicKeyFingerprint(i.publicKey,{type:\"RSAPublicKey\"})},i.verifySubjectKeyIdentifier=function(){var t=r.subjectKeyIdentifier;for(var n=0;n<i.extensions.length;++n){var s=i.extensions[n];if(s.id===t){var o=i.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(s.subjectKeyIdentifier)===o}}return!1},i},n.certificateFromAsn1=function(i,s){var u={},a=[];if(!t.validate(i,o,u,a)){var f=new Error(\"Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.\");throw f.errors=a,f}if(typeof u.certSignature!=\"string\"){var h=\"\\0\";for(var p=0;p<u.certSignature.length;++p)h+=t.toDer(u.certSignature[p]).getBytes();u.certSignature=h}var v=t.derToOid(u.publicKeyOid);if(v!==n.oids.rsaEncryption)throw new Error(\"Cannot read public key. OID is not RSA.\");var m=n.createCertificate();m.version=u.certVersion?u.certVersion.charCodeAt(0):0;var g=e.util.createBuffer(u.certSerialNumber);m.serialNumber=g.toHex(),m.signatureOid=e.asn1.derToOid(u.certSignatureOid),m.signatureParameters=c(m.signatureOid,u.certSignatureParams,!0),m.siginfo.algorithmOid=e.asn1.derToOid(u.certinfoSignatureOid),m.siginfo.parameters=c(m.siginfo.algorithmOid,u.certinfoSignatureParams,!1);var y=e.util.createBuffer(u.certSignature);++y.read,m.signature=y.getBytes();var b=[];u.certValidity1UTCTime!==undefined&&b.push(t.utcTimeToDate(u.certValidity1UTCTime)),u.certValidity2GeneralizedTime!==undefined&&b.push(t.generalizedTimeToDate(u.certValidity2GeneralizedTime)),u.certValidity3UTCTime!==undefined&&b.push(t.utcTimeToDate(u.certValidity3UTCTime)),u.certValidity4GeneralizedTime!==undefined&&b.push(t.generalizedTimeToDate(u.certValidity4GeneralizedTime));if(b.length>2)throw new Error(\"Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.\");if(b.length<2)throw new Error(\"Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.\");m.validity.notBefore=b[0],m.validity.notAfter=b[1],m.tbsCertificate=u.tbsCertificate;if(s){m.md=null;if(m.signatureOid in r){var v=r[m.signatureOid];switch(v){case\"sha1WithRSAEncryption\":m.md=e.md.sha1.create();break;case\"md5WithRSAEncryption\":m.md=e.md.md5.create();break;case\"sha256WithRSAEncryption\":m.md=e.md.sha256.create();break;case\"sha512WithRSAEncryption\":m.md=e.md.sha512.create();break;case\"RSASSA-PSS\":m.md=e.md.sha256.create()}}if(m.md===null){var f=new Error(\"Could not compute certificate digest. Unknown signature OID.\");throw f.signatureOid=m.signatureOid,f}var w=t.toDer(m.tbsCertificate);m.md.update(w.getBytes())}var E=e.md.sha1.create();m.issuer.getField=function(e){return l(m.issuer,e)},m.issuer.addField=function(e){d([e]),m.issuer.attributes.push(e)},m.issuer.attributes=n.RDNAttributesAsArray(u.certIssuer,E),u.certIssuerUniqueId&&(m.issuer.uniqueId=u.certIssuerUniqueId),m.issuer.hash=E.digest().toHex();var S=e.md.sha1.create();return m.subject.getField=function(e){return l(m.subject,e)},m.subject.addField=function(e){d([e]),m.subject.attributes.push(e)},m.subject.attributes=n.RDNAttributesAsArray(u.certSubject,S),u.certSubjectUniqueId&&(m.subject.uniqueId=u.certSubjectUniqueId),m.subject.hash=S.digest().toHex(),u.certExtensions?m.extensions=n.certificateExtensionsFromAsn1(u.certExtensions):m.extensions=[],m.publicKey=n.publicKeyFromAsn1(u.subjectPublicKeyInfo),m},n.certificateExtensionsFromAsn1=function(e){var t=[];for(var r=0;r<e.value.length;++r){var i=e.value[r];for(var s=0;s<i.value.length;++s)t.push(n.certificateExtensionFromAsn1(i.value[s]))}return t},n.certificateExtensionFromAsn1=function(n){var i={};i.id=t.derToOid(n.value[0].value),i.critical=!1,n.value[1].type===t.Type.BOOLEAN?(i.critical=n.value[1].value.charCodeAt(0)!==0,i.value=n.value[2].value):i.value=n.value[1].value;if(i.id in r){i.name=r[i.id];if(i.name===\"keyUsage\"){var s=t.fromDer(i.value),o=0,u=0;s.value.length>1&&(o=s.value.charCodeAt(1),u=s.value.length>2?s.value.charCodeAt(2):0),i.digitalSignature=(o&128)===128,i.nonRepudiation=(o&64)===64,i.keyEncipherment=(o&32)===32,i.dataEncipherment=(o&16)===16,i.keyAgreement=(o&8)===8,i.keyCertSign=(o&4)===4,i.cRLSign=(o&2)===2,i.encipherOnly=(o&1)===1,i.decipherOnly=(u&128)===128}else if(i.name===\"basicConstraints\"){var s=t.fromDer(i.value);s.value.length>0&&s.value[0].type===t.Type.BOOLEAN?i.cA=s.value[0].value.charCodeAt(0)!==0:i.cA=!1;var a=null;s.value.length>0&&s.value[0].type===t.Type.INTEGER?a=s.value[0].value:s.value.length>1&&(a=s.value[1].value),a!==null&&(i.pathLenConstraint=t.derToInteger(a))}else if(i.name===\"extKeyUsage\"){var s=t.fromDer(i.value);for(var f=0;f<s.value.length;++f){var l=t.derToOid(s.value[f].value);l in r?i[r[l]]=!0:i[l]=!0}}else if(i.name===\"nsCertType\"){var s=t.fromDer(i.value),o=0;s.value.length>1&&(o=s.value.charCodeAt(1)),i.client=(o&128)===128,i.server=(o&64)===64,i.email=(o&32)===32,i.objsign=(o&16)===16,i.reserved=(o&8)===8,i.sslCA=(o&4)===4,i.emailCA=(o&2)===2,i.objCA=(o&1)===1}else if(i.name===\"subjectAltName\"||i.name===\"issuerAltName\"){i.altNames=[];var c,s=t.fromDer(i.value);for(var h=0;h<s.value.length;++h){c=s.value[h];var p={type:c.type,value:c.value};i.altNames.push(p);switch(c.type){case 1:case 2:case 6:break;case 7:p.ip=e.util.bytesToIP(c.value);break;case 8:p.oid=t.derToOid(c.value);break;default:}}}else if(i.name===\"subjectKeyIdentifier\"){var s=t.fromDer(i.value);i.subjectKeyIdentifier=e.util.bytesToHex(s.value)}}return i},n.certificationRequestFromAsn1=function(i,s){var o={},u=[];if(!t.validate(i,f,o,u)){var a=new Error(\"Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.\");throw a.errors=u,a}if(typeof o.csrSignature!=\"string\"){var h=\"\\0\";for(var p=0;p<o.csrSignature.length;++p)h+=t.toDer(o.csrSignature[p]).getBytes();o.csrSignature=h}var v=t.derToOid(o.publicKeyOid);if(v!==n.oids.rsaEncryption)throw new Error(\"Cannot read public key. OID is not RSA.\");var m=n.createCertificationRequest();m.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,m.signatureOid=e.asn1.derToOid(o.csrSignatureOid),m.signatureParameters=c(m.signatureOid,o.csrSignatureParams,!0),m.siginfo.algorithmOid=e.asn1.derToOid(o.csrSignatureOid),m.siginfo.parameters=c(m.siginfo.algorithmOid,o.csrSignatureParams,!1);var g=e.util.createBuffer(o.csrSignature);++g.read,m.signature=g.getBytes(),m.certificationRequestInfo=o.certificationRequestInfo;if(s){m.md=null;if(m.signatureOid in r){var v=r[m.signatureOid];switch(v){case\"sha1WithRSAEncryption\":m.md=e.md.sha1.create();break;case\"md5WithRSAEncryption\":m.md=e.md.md5.create();break;case\"sha256WithRSAEncryption\":m.md=e.md.sha256.create();break;case\"sha512WithRSAEncryption\":m.md=e.md.sha512.create();break;case\"RSASSA-PSS\":m.md=e.md.sha256.create()}}if(m.md===null){var a=new Error(\"Could not compute certification request digest. Unknown signature OID.\");throw a.signatureOid=m.signatureOid,a}var y=t.toDer(m.certificationRequestInfo);m.md.update(y.getBytes())}var b=e.md.sha1.create();return m.subject.getField=function(e){return l(m.subject,e)},m.subject.addField=function(e){d([e]),m.subject.attributes.push(e)},m.subject.attributes=n.RDNAttributesAsArray(o.certificationRequestInfoSubject,b),m.subject.hash=b.digest().toHex(),m.publicKey=n.publicKeyFromAsn1(o.subjectPublicKeyInfo),m.getAttribute=function(e){return l(m,e)},m.addAttribute=function(e){d([e]),m.attributes.push(e)},m.attributes=n.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),m},n.createCertificationRequest=function(){var i={};return i.version=0,i.signatureOid=null,i.signature=null,i.siginfo={},i.siginfo.algorithmOid=null,i.subject={},i.subject.getField=function(e){return l(i.subject,e)},i.subject.addField=function(e){d([e]),i.subject.attributes.push(e)},i.subject.attributes=[],i.subject.hash=null,i.publicKey=null,i.attributes=[],i.getAttribute=function(e){return l(i,e)},i.addAttribute=function(e){d([e]),i.attributes.push(e)},i.md=null,i.setSubject=function(e){d(e),i.subject.attributes=e,i.subject.hash=null},i.setAttributes=function(e){d(e),i.attributes=e},i.sign=function(s,o){i.md=o||e.md.sha1.create();var u=r[i.md.algorithm+\"WithRSAEncryption\"];if(!u){var a=new Error(\"Could not compute certification request digest. Unknown message digest algorithm OID.\");throw a.algorithm=i.md.algorithm,a}i.signatureOid=i.siginfo.algorithmOid=u,i.certificationRequestInfo=n.getCertificationRequestInfo(i);var f=t.toDer(i.certificationRequestInfo);i.md.update(f.getBytes()),i.signature=s.sign(i.md)},i.verify=function(){var s=!1,o=i.md;if(o===null){if(i.signatureOid in r){var u=r[i.signatureOid];switch(u){case\"sha1WithRSAEncryption\":o=e.md.sha1.create();break;case\"md5WithRSAEncryption\":o=e.md.md5.create();break;case\"sha256WithRSAEncryption\":o=e.md.sha256.create();break;case\"sha512WithRSAEncryption\":o=e.md.sha512.create();break;case\"RSASSA-PSS\":o=e.md.sha256.create()}}if(o===null){var a=new Error(\"Could not compute certification request digest. Unknown signature OID.\");throw a.signatureOid=i.signatureOid,a}var f=i.certificationRequestInfo||n.getCertificationRequestInfo(i),l=t.toDer(f);o.update(l.getBytes())}if(o!==null){var c;switch(i.signatureOid){case r.sha1WithRSAEncryption:break;case r[\"RSASSA-PSS\"]:var h,p;h=r[i.signatureParameters.mgf.hash.algorithmOid];if(h===undefined||e.md[h]===undefined){var a=new Error(\"Unsupported MGF hash function.\");throw a.oid=i.signatureParameters.mgf.hash.algorithmOid,a.name=h,a}p=r[i.signatureParameters.mgf.algorithmOid];if(p===undefined||e.mgf[p]===undefined){var a=new Error(\"Unsupported MGF function.\");throw a.oid=i.signatureParameters.mgf.algorithmOid,a.name=p,a}p=e.mgf[p].create(e.md[h].create()),h=r[i.signatureParameters.hash.algorithmOid];if(h===undefined||e.md[h]===undefined){var a=new Error(\"Unsupported RSASSA-PSS hash function.\");throw a.oid=i.signatureParameters.hash.algorithmOid,a.name=h,a}c=e.pss.create(e.md[h].create(),p,i.signatureParameters.saltLength)}s=i.publicKey.verify(o.digest().getBytes(),i.signature,c)}return s},i},n.getTBSCertificate=function(r){var i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(r.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.siginfo.algorithmOid).getBytes()),m(r.siginfo.algorithmOid,r.siginfo.parameters)]),h(r.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(r.validity.notBefore)),t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(r.validity.notAfter))]),h(r.subject),n.publicKeyToAsn1(r.publicKey)]);return r.issuer.uniqueId&&i.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+r.issuer.uniqueId)])),r.subject.uniqueId&&i.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+r.subject.uniqueId)])),r.extensions.length>0&&i.value.push(n.certificateExtensionsToAsn1(r.extensions)),i},n.getCertificationRequestInfo=function(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),h(e.subject),n.publicKeyToAsn1(e.publicKey),g(e)]);return r},n.distinguishedNameToAsn1=function(e){return h(e)},n.certificateToAsn1=function(e){var r=e.tbsCertificate||n.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.certificateExtensionsToAsn1=function(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(i);for(var s=0;s<e.length;++s)i.value.push(n.certificateExtensionToAsn1(e[s]));return r},n.certificateExtensionToAsn1=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&n.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return typeof e.value!=\"string\"&&(r=t.toDer(r).getBytes()),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r)),n},n.certificationRequestToAsn1=function(e){var r=e.certificationRequestInfo||n.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.createCaStore=function(r){function s(e){return o(e),i.certs[e.hash]||null}function o(t){if(!t.hash){var r=e.md.sha1.create();t.attributes=n.RDNAttributesAsArray(h(t),r),t.hash=r.digest().toHex()}}var i={certs:{}};i.getIssuer=function(e){var t=s(e.issuer);return t},i.addCertificate=function(t){typeof t==\"string\"&&(t=e.pki.certificateFromPem(t)),o(t.subject);if(!i.hasCertificate(t))if(t.subject.hash in i.certs){var n=i.certs[t.subject.hash];e.util.isArray(n)||(n=[n]),n.push(t),i.certs[t.subject.hash]=n}else i.certs[t.subject.hash]=t},i.hasCertificate=function(r){typeof r==\"string\"&&(r=e.pki.certificateFromPem(r));var i=s(r.subject);if(!i)return!1;e.util.isArray(i)||(i=[i]);var o=t.toDer(n.certificateToAsn1(r)).getBytes();for(var u=0;u<i.length;++u){var a=t.toDer(n.certificateToAsn1(i[u])).getBytes();if(o===a)return!0}return!1},i.listAllCertificates=function(){var t=[];for(var n in i.certs)if(i.certs.hasOwnProperty(n)){var r=i.certs[n];if(!e.util.isArray(r))t.push(r);else for(var s=0;s<r.length;++s)t.push(r[s])}return t},i.removeCertificate=function(r){var u;typeof r==\"string\"&&(r=e.pki.certificateFromPem(r)),o(r.subject);if(!i.hasCertificate(r))return null;var a=s(r.subject);if(!e.util.isArray(a))return u=i.certs[r.subject.hash],delete i.certs[r.subject.hash],u;var f=t.toDer(n.certificateToAsn1(r)).getBytes();for(var l=0;l<a.length;++l){var c=t.toDer(n.certificateToAsn1(a[l])).getBytes();f===c&&(u=a[l],a.splice(l,1))}return a.length===0&&delete i.certs[r.subject.hash],u};if(r)for(var u=0;u<r.length;++u){var a=r[u];i.addCertificate(a)}return i},n.certificateError={bad_certificate:\"forge.pki.BadCertificate\",unsupported_certificate:\"forge.pki.UnsupportedCertificate\",certificate_revoked:\"forge.pki.CertificateRevoked\",certificate_expired:\"forge.pki.CertificateExpired\",certificate_unknown:\"forge.pki.CertificateUnknown\",unknown_ca:\"forge.pki.UnknownCertificateAuthority\"},n.verifyCertificateChain=function(t,r,i){r=r.slice(0);var s=r.slice(0),o=new Date,u=!0,a=null,f=0;do{var l=r.shift(),c=null,h=!1;if(o<l.validity.notBefore||o>l.validity.notAfter)a={message:\"Certificate is not valid yet or has expired.\",error:n.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o};if(a===null){c=r[0]||t.getIssuer(l),c===null&&l.isIssuer(l)&&(h=!0,c=l);if(c){var p=c;e.util.isArray(p)||(p=[p]);var d=!1;while(!d&&p.length>0){c=p.shift();try{d=c.verify(l)}catch(v){}}d||(a={message:\"Certificate signature is invalid.\",error:n.certificateError.bad_certificate})}a===null&&(!c||h)&&!t.hasCertificate(l)&&(a={message:\"Certificate is not trusted.\",error:n.certificateError.unknown_ca})}a===null&&c&&!l.isIssuer(c)&&(a={message:\"Certificate issuer is invalid.\",error:n.certificateError.bad_certificate});if(a===null){var m={keyUsage:!0,basicConstraints:!0};for(var g=0;a===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in m)&&(a={message:\"Certificate has an unsupported critical extension.\",error:n.certificateError.unsupported_certificate})}}if(a===null&&(!u||r.length===0&&(!c||h))){var b=l.getExtension(\"basicConstraints\"),w=l.getExtension(\"keyUsage\");w!==null&&(!w.keyCertSign||b===null)&&(a={message:\"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.\",error:n.certificateError.bad_certificate}),a===null&&b!==null&&!b.cA&&(a={message:\"Certificate basicConstraints indicates the certificate is not a CA.\",error:n.certificateError.bad_certificate});if(a===null&&w!==null&&\"pathLenConstraint\"in b){var E=f-1;E>b.pathLenConstraint&&(a={message:\"Certificate basicConstraints pathLenConstraint violated.\",error:n.certificateError.bad_certificate})}}var S=a===null?!0:a.error,x=i?i(S,f,s):S;if(x!==!0){S===!0&&(a={message:\"The application rejected the certificate.\",error:n.certificateError.bad_certificate});if(x||x===0)typeof x==\"object\"&&!e.util.isArray(x)?(x.message&&(a.message=x.message),x.error&&(a.error=x.error)):typeof x==\"string\"&&(a.error=x);throw a}a=null,u=!1,++f}while(r.length>0);return!0}}var r=\"x509\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n.pki}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/x509\",[\"require\",\"module\",\"./aes\",\"./asn1\",\"./des\",\"./md\",\"./mgf\",\"./oids\",\"./pem\",\"./pss\",\"./rsa\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function f(e,t,n,r){var i=[];for(var s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var u=e[s].safeBags[o];if(r!==undefined&&u.type!==r)continue;if(t===null){i.push(u);continue}u.attributes[t]!==undefined&&u.attributes[t].indexOf(n)>=0&&i.push(u)}return i}function l(t){if(t.composed||t.constructed){var n=e.util.createBuffer();for(var r=0;r<t.value.length;++r)n.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=n.getBytes()}return t}function c(e,r,s,o){r=t.fromDer(r,s);if(r.tagClass!==t.Class.UNIVERSAL||r.type!==t.Type.SEQUENCE||r.constructed!==!0)throw new Error(\"PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo\");for(var u=0;u<r.value.length;u++){var a=r.value[u],f={},c=[];if(!t.validate(a,i,f,c)){var d=new Error(\"Cannot read ContentInfo.\");throw d.errors=c,d}var v={encrypted:!1},m=null,g=f.content.value[0];switch(t.derToOid(f.contentType)){case n.oids.data:if(g.tagClass!==t.Class.UNIVERSAL||g.type!==t.Type.OCTETSTRING)throw new Error(\"PKCS#12 SafeContents Data is not an OCTET STRING.\");m=l(g).value;break;case n.oids.encryptedData:m=h(g,o),v.encrypted=!0;break;default:var d=new Error(\"Unsupported PKCS#12 contentType.\");throw d.contentType=t.derToOid(f.contentType),d}v.safeBags=p(m,s,o),e.safeContents.push(v)}}function h(r,i){var s={},o=[];if(!t.validate(r,e.pkcs7.asn1.encryptedDataValidator,s,o)){var u=new Error(\"Cannot read EncryptedContentInfo.\");throw u.errors=o,u}var a=t.derToOid(s.contentType);if(a!==n.oids.data){var u=new Error(\"PKCS#12 EncryptedContentInfo ContentType is not Data.\");throw u.oid=a,u}a=t.derToOid(s.encAlgorithm);var f=n.pbe.getCipher(a,s.encParameter,i),c=l(s.encryptedContentAsn1),h=e.util.createBuffer(c.value);f.update(h);if(!f.finish())throw new Error(\"Failed to decrypt PKCS#12 SafeContents.\");return f.output.getBytes()}function p(e,r,i){if(!r&&e.length===0)return[];e=t.fromDer(e,r);if(e.tagClass!==t.Class.UNIVERSAL||e.type!==t.Type.SEQUENCE||e.constructed!==!0)throw new Error(\"PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.\");var s=[];for(var u=0;u<e.value.length;u++){var f=e.value[u],l={},c=[];if(!t.validate(f,o,l,c)){var h=new Error(\"Cannot read SafeBag.\");throw h.errors=c,h}var p={type:t.derToOid(l.bagId),attributes:d(l.bagAttributes)};s.push(p);var v,m,g=l.bagValue.value[0];switch(p.type){case n.oids.pkcs8ShroudedKeyBag:g=n.decryptPrivateKeyInfo(g,i);if(g===null)throw new Error(\"Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?\");case n.oids.keyBag:try{p.key=n.privateKeyFromAsn1(g)}catch(y){p.key=null,p.asn1=g}continue;case n.oids.certBag:v=a,m=function(){if(t.derToOid(l.certId)!==n.oids.x509Certificate){var e=new Error(\"Unsupported certificate type, only X.509 supported.\");throw e.oid=t.derToOid(l.certId),e}var i=t.fromDer(l.cert,r);try{p.cert=n.certificateFromAsn1(i,!0)}catch(s){p.cert=null,p.asn1=i}};break;default:var h=new Error(\"Unsupported PKCS#12 SafeBag type.\");throw h.oid=p.type,h}if(v!==undefined&&!t.validate(g,v,l,c)){var h=new Error(\"Cannot read PKCS#12 \"+v.name);throw h.errors=c,h}m()}return s}function d(e){var r={};if(e!==undefined)for(var i=0;i<e.length;++i){var s={},o=[];if(!t.validate(e[i],u,s,o)){var a=new Error(\"Cannot read PKCS#12 BagAttribute.\");throw a.errors=o,a}var f=t.derToOid(s.oid);if(n.oids[f]===undefined)continue;r[n.oids[f]]=[];for(var l=0;l<s.values.length;++l)r[n.oids[f]].push(s.values[l].value)}return r}var t=e.asn1,n=e.pki,r=e.pkcs12=e.pkcs12||{},i={name:\"ContentInfo\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"ContentInfo.contentType\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"contentType\"},{name:\"ContentInfo.content\",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:\"content\"}]},s={name:\"PFX\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.version\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:\"version\"},i,{name:\"PFX.macData\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:\"mac\",value:[{name:\"PFX.macData.mac\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.macData.mac.digestAlgorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"PFX.macData.mac.digestAlgorithm.algorithm\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"macAlgorithm\"},{name:\"PFX.macData.mac.digestAlgorithm.parameters\",tagClass:t.Class.UNIVERSAL,captureAsn1:\"macAlgorithmParameters\"}]},{name:\"PFX.macData.mac.digest\",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:\"macDigest\"}]},{name:\"PFX.macData.macSalt\",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:\"macSalt\"},{name:\"PFX.macData.iterations\",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:\"macIterations\"}]}]},o={name:\"SafeBag\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"SafeBag.bagId\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"bagId\"},{name:\"SafeBag.bagValue\",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:\"bagValue\"},{name:\"SafeBag.bagAttributes\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:\"bagAttributes\"}]},u={name:\"Attribute\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"Attribute.attrId\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"oid\"},{name:\"Attribute.attrValues\",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:\"values\"}]},a={name:\"CertBag\",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:\"CertBag.certId\",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:\"certId\"},{name:\"CertBag.certValue\",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:\"CertBag.certValue[0]\",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:\"cert\"}]}]};r.pkcs12FromAsn1=function(i,o,u){typeof o==\"string\"?(u=o,o=!0):o===undefined&&(o=!0);var a={},h=[];if(!t.validate(i,s,a,h)){var p=new Error(\"Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.\");throw p.errors=p,p}var d={version:a.version.charCodeAt(0),safeContents:[],getBags:function(t){var n={},r;return\"localKeyId\"in t?r=t.localKeyId:\"localKeyIdHex\"in t&&(r=e.util.hexToBytes(t.localKeyIdHex)),r===undefined&&!(\"friendlyName\"in t)&&\"bagType\"in t&&(n[t.bagType]=f(d.safeContents,null,null,t.bagType)),r!==undefined&&(n.localKeyId=f(d.safeContents,\"localKeyId\",r,t.bagType)),\"friendlyName\"in t&&(n.friendlyName=f(d.safeContents,\"friendlyName\",t.friendlyName,t.bagType)),n},getBagsByFriendlyName:function(e,t){return f(d.safeContents,\"friendlyName\",e,t)},getBagsByLocalKeyId:function(e,t){return f(d.safeContents,\"localKeyId\",e,t)}};if(a.version.charCodeAt(0)!==3){var p=new Error(\"PKCS#12 PFX of version other than 3 not supported.\");throw p.version=a.version.charCodeAt(0),p}if(t.derToOid(a.contentType)!==n.oids.data){var p=new Error(\"Only PKCS#12 PFX in password integrity mode supported.\");throw p.oid=t.derToOid(a.contentType),p}var v=a.content.value[0];if(v.tagClass!==t.Class.UNIVERSAL||v.type!==t.Type.OCTETSTRING)throw new Error(\"PKCS#12 authSafe content data is not an OCTET STRING.\");v=l(v);if(a.mac){var m=null,g=0,y=t.derToOid(a.macAlgorithm);switch(y){case n.oids.sha1:m=e.md.sha1.create(),g=20;break;case n.oids.sha256:m=e.md.sha256.create(),g=32;break;case n.oids.sha384:m=e.md.sha384.create(),g=48;break;case n.oids.sha512:m=e.md.sha512.create(),g=64;break;case n.oids.md5:m=e.md.md5.create(),g=16}if(m===null)throw new Error(\"PKCS#12 uses unsupported MAC algorithm: \"+y);var b=new e.util.ByteBuffer(a.macSalt),w=\"macIterations\"in a?parseInt(e.util.bytesToHex(a.macIterations),16):1,E=r.generateKey(u,b,3,w,g,m),S=e.hmac.create();S.start(m,E),S.update(v.value);var x=S.getMac();if(x.getBytes()!==a.macDigest)throw new Error(\"PKCS#12 MAC could not be verified. Invalid password?\")}return c(d,v.value,o,u),d},r.toPkcs12Asn1=function(i,s,o,u){u=u||{},u.saltSize=u.saltSize||8,u.count=u.count||2048,u.algorithm=u.algorithm||u.encAlgorithm||\"aes128\",\"useMac\"in u||(u.useMac=!0),\"localKeyId\"in u||(u.localKeyId=null),\"generateLocalKeyId\"in u||(u.generateLocalKeyId=!0);var a=u.localKeyId,f;if(a!==null)a=e.util.hexToBytes(a);else if(u.generateLocalKeyId)if(s){var l=e.util.isArray(s)?s[0]:s;typeof l==\"string\"&&(l=n.certificateFromPem(l));var c=e.md.sha1.create();c.update(t.toDer(n.certificateToAsn1(l)).getBytes()),a=c.digest().getBytes()}else a=e.random.getBytes(20);var h=[];a!==null&&h.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,a)])])),\"friendlyName\"in u&&h.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,u.friendlyName)])])),h.length>0&&(f=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,h));var p=[],d=[];s!==null&&(e.util.isArray(s)?d=s:d=[s]);var v=[];for(var m=0;m<d.length;++m){s=d[m],typeof s==\"string\"&&(s=n.certificateFromPem(s));var g=m===0?f:undefined,y=n.certificateToAsn1(s),b=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(y).getBytes())])])]),g]);v.push(b)}if(v.length>0){var w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,v),E=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(w).getBytes())])]);p.push(E)}var S=null;if(i!==null){var x=n.wrapRsaPrivateKey(n.privateKeyToAsn1(i));o===null?S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[x]),f]):S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[n.encryptPrivateKeyInfo(x,o,u)]),f]);var T=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[S]),N=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(T).getBytes())])]);p.push(N)}var C=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,p),k;if(u.useMac){var c=e.md.sha1.create(),L=new e.util.ByteBuffer(e.random.getBytes(u.saltSize)),A=u.count,i=r.generateKey(o,L,3,A,20),O=e.hmac.create();O.start(c,i),O.update(t.toDer(C).getBytes());var M=O.getMac();k=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,M.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,L.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(A).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(C).getBytes())])]),k])},r.generateKey=e.pbe.generatePkcs12Key}var r=\"pkcs12\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pkcs12\",[\"require\",\"module\",\"./asn1\",\"./hmac\",\"./oids\",\"./pkcs7asn1\",\"./pbe\",\"./random\",\"./rsa\",\"./sha1\",\"./util\",\"./x509\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=e.asn1,n=e.pki=e.pki||{};n.pemToDer=function(t){var n=e.pem.decode(t)[0];if(n.procType&&n.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert PEM to DER; PEM is encrypted.\");return e.util.createBuffer(n.body)},n.privateKeyFromPem=function(r){var i=e.pem.decode(r)[0];if(i.type!==\"PRIVATE KEY\"&&i.type!==\"RSA PRIVATE KEY\"){var s=new Error('Could not convert private key from PEM; PEM header type is not \"PRIVATE KEY\" or \"RSA PRIVATE KEY\".');throw s.headerType=i.type,s}if(i.procType&&i.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert private key from PEM; PEM is encrypted.\");var o=t.fromDer(i.body);return n.privateKeyFromAsn1(o)},n.privateKeyToPem=function(r,i){var s={type:\"RSA PRIVATE KEY\",body:t.toDer(n.privateKeyToAsn1(r)).getBytes()};return e.pem.encode(s,{maxline:i})},n.privateKeyInfoToPem=function(n,r){var i={type:\"PRIVATE KEY\",body:t.toDer(n).getBytes()};return e.pem.encode(i,{maxline:r})}}var r=\"pki\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pki\",[\"require\",\"module\",\"./asn1\",\"./oids\",\"./pbe\",\"./pem\",\"./pbkdf2\",\"./pkcs12\",\"./pss\",\"./rsa\",\"./util\",\"./x509\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=function(t,n,r,i){var s=e.util.createBuffer(),o=t.length>>1,u=o+(t.length&1),a=t.substr(0,u),f=t.substr(o,u),l=e.util.createBuffer(),c=e.hmac.create();r=n+r;var h=Math.ceil(i/16),p=Math.ceil(i/20);c.start(\"MD5\",a);var d=e.util.createBuffer();l.putBytes(r);for(var v=0;v<h;++v)c.start(null,null),c.update(l.getBytes()),l.putBuffer(c.digest()),c.start(null,null),c.update(l.bytes()+r),d.putBuffer(c.digest());c.start(\"SHA1\",f);var m=e.util.createBuffer();l.clear(),l.putBytes(r);for(var v=0;v<p;++v)c.start(null,null),c.update(l.getBytes()),l.putBuffer(c.digest()),c.start(null,null),c.update(l.bytes()+r),m.putBuffer(c.digest());return s.putBytes(e.util.xorBytes(d.getBytes(),m.getBytes(),i)),s},n=function(e,t,n,r){},r=function(t,n,r){var i=e.hmac.create();i.start(\"SHA1\",t);var s=e.util.createBuffer();return s.putInt32(n[0]),s.putInt32(n[1]),s.putByte(r.type),s.putByte(r.version.major),s.putByte(r.version.minor),s.putInt16(r.length),s.putBytes(r.fragment.bytes()),i.update(s.getBytes()),i.digest().getBytes()},i=function(t,n,r){var i=!1;try{var s=t.deflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(s),n.length=s.length,i=!0}catch(o){}return i},s=function(t,n,r){var i=!1;try{var s=t.inflate(n.fragment.getBytes());n.fragment=e.util.createBuffer(s),n.length=s.length,i=!0}catch(o){}return i},o=function(t,n){var r=0;switch(n){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return e.util.createBuffer(t.getBytes(r))},u=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},a={};a.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},a.SupportedVersions=[a.Versions.TLS_1_1,a.Versions.TLS_1_0],a.Version=a.SupportedVersions[0],a.MaxFragment=15360,a.ConnectionEnd={server:0,client:1},a.PRFAlgorithm={tls_prf_sha256:0},a.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},a.CipherType={stream:0,block:1,aead:2},a.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},a.CompressionMethod={none:0,deflate:1},a.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},a.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},a.Alert={},a.Alert.Level={warning:1,fatal:2},a.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},a.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},a.CipherSuites={},a.getCipherSuite=function(e){var t=null;for(var n in a.CipherSuites){var r=a.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t},a.handleUnexpected=function(e,t){var n=!e.open&&e.entity===a.ConnectionEnd.client;n||e.error(e,{message:\"Unexpected message. Received TLS record out of order.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})},a.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(a.queue(e,a.createAlert(e,{level:a.Alert.Level.warning,description:a.Alert.Description.no_renegotiation})),a.flush(e)),e.process()},a.parseHelloMessage=function(t,n,r){var i=null,s=t.entity===a.ConnectionEnd.client;if(r<38)t.error(t,{message:s?\"Invalid ServerHello message. Message too short.\":\"Invalid ClientHello message. Message too short.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});else{var u=n.fragment,f=u.length();i={version:{major:u.getByte(),minor:u.getByte()},random:e.util.createBuffer(u.getBytes(32)),session_id:o(u,1),extensions:[]},s?(i.cipher_suite=u.getBytes(2),i.compression_method=u.getByte()):(i.cipher_suites=o(u,2),i.compression_methods=o(u,1)),f=r-(f-u.length());if(f>0){var l=o(u,2);while(l.length()>0)i.extensions.push({type:[l.getByte(),l.getByte()],data:o(l,2)});if(!s)for(var c=0;c<i.extensions.length;++c){var h=i.extensions[c];if(h.type[0]===0&&h.type[1]===0){var p=o(h.data,2);while(p.length()>0){var d=p.getByte();if(d!==0)break;t.session.extensions.server_name.serverNameList.push(o(p,2).getBytes())}}}}if(t.session.version)if(i.version.major!==t.session.version.major||i.version.minor!==t.session.version.minor)return t.error(t,{message:\"TLS version change is disallowed during renegotiation.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});if(s)t.session.cipherSuite=a.getCipherSuite(i.cipher_suite);else{var v=e.util.createBuffer(i.cipher_suites.bytes());while(v.length()>0){t.session.cipherSuite=a.getCipherSuite(v.getBytes(2));if(t.session.cipherSuite!==null)break}}if(t.session.cipherSuite===null)return t.error(t,{message:\"No cipher suites in common.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(i.cipher_suite)});s?t.session.compressionMethod=i.compression_method:t.session.compressionMethod=a.CompressionMethod.none}return i},a.createSecurityParameters=function(e,t){var n=e.entity===a.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,s=n?r:a.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:a.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}},a.handleServerHello=function(e,t,n){var r=a.parseHelloMessage(e,t,n);if(e.fail)return;if(!(r.version.minor<=e.version.minor))return e.error(e,{message:\"Incompatible TLS version.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});e.version.minor=r.version.minor,e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=d,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=l,e.session.resuming=!1,a.createSecurityParameters(e,r)),e.session.id=i,e.process()},a.handleClientHello=function(t,n,r){var i=a.parseHelloMessage(t,n,r);if(t.fail)return;var s=i.session_id.bytes(),o=null;if(t.sessionCache){o=t.sessionCache.getSession(s);if(o===null)s=\"\";else if(o.version.major!==i.version.major||o.version.minor>i.version.minor)o=null,s=\"\"}s.length===0&&(s=e.random.getBytes(32)),t.session.id=s,t.session.clientHelloVersion=i.version,t.session.sp={};if(o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{var u;for(var f=1;f<a.SupportedVersions.length;++f){u=a.SupportedVersions[f];if(u.minor<=i.version.minor)break}t.version={major:u.major,minor:u.minor},t.session.version=t.version}o!==null?(t.expect=S,t.session.resuming=!0,t.session.sp.client_random=i.random.bytes()):(t.expect=t.verifyClient!==!1?b:w,t.session.resuming=!1,a.createSecurityParameters(t,i)),t.open=!0,a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createServerHello(t)})),t.session.resuming?(a.queue(t,a.createRecord(t,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),t.state.pending=a.createConnectionState(t),t.state.current.write=t.state.pending.write,a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createFinished(t)}))):(a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createCertificate(t)})),t.fail||(a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createServerKeyExchange(t)})),t.verifyClient!==!1&&a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createCertificateRequest(t)})),a.queue(t,a.createRecord(t,{type:a.ContentType.handshake,data:a.createServerHelloDone(t)})))),a.flush(t),t.process()},a.handleCertificate=function(t,n,r){if(r<3)return t.error(t,{message:\"Invalid Certificate message. Message too short.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var i=n.fragment,s={certificate_list:o(i,3)},u,f,l=[];try{while(s.certificate_list.length()>0)u=o(s.certificate_list,3),f=e.asn1.fromDer(u),u=e.pki.certificateFromAsn1(f,!0),l.push(u)}catch(h){return t.error(t,{message:\"Could not parse certificate list.\",cause:h,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var p=t.entity===a.ConnectionEnd.client;!p&&t.verifyClient!==!0||l.length!==0?l.length===0?t.expect=p?c:w:(p?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],a.verifyCertificateChain(t,l)&&(t.expect=p?c:w)):t.error(t,{message:p?\"No server certificate provided.\":\"No client certificate provided.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}}),t.process()},a.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:\"Invalid key parameters. Only RSA is supported.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});e.expect=h,e.process()},a.handleClientKeyExchange=function(t,n,r){if(r<48)return t.error(t,{message:\"Invalid key parameters. Only RSA is supported.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});var i=n.fragment,s={enc_pre_master_secret:o(i,2).getBytes()},u=null;if(t.getPrivateKey)try{u=t.getPrivateKey(t,t.session.serverCertificate),u=e.pki.privateKeyFromPem(u)}catch(f){t.error(t,{message:\"Could not get private key.\",cause:f,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}if(u===null)return t.error(t,{message:\"No private key set.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}});try{var l=t.session.sp;l.pre_master_secret=u.decrypt(s.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==l.pre_master_secret.charCodeAt(0)||c.minor!==l.pre_master_secret.charCodeAt(1))throw new Error(\"TLS version rollback attack detected.\")}catch(f){l.pre_master_secret=e.random.getBytes(48)}t.expect=S,t.session.clientCertificate!==null&&(t.expect=E),t.process()},a.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:\"Invalid CertificateRequest. Message too short.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:o(r,1),certificate_authorities:o(r,2)};e.session.certificateRequest=i,e.expect=p,e.process()},a.handleCertificateVerify=function(t,n,r){if(r<2)return t.error(t,{message:\"Invalid CertificateVerify. Message too short.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var i=n.fragment;i.read-=4;var s=i.bytes();i.read+=4;var u={signature:o(i,2).getBytes()},f=e.util.createBuffer();f.putBuffer(t.session.md5.digest()),f.putBuffer(t.session.sha1.digest()),f=f.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(f,u.signature,\"NONE\"))throw new Error(\"CertificateVerify signature does not match.\");t.session.md5.update(s),t.session.sha1.update(s)}catch(c){return t.error(t,{message:\"Bad signature in CertificateVerify.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure}})}t.expect=S,t.process()},a.handleServerHelloDone=function(t,n,r){if(r>0)return t.error(t,{message:\"Invalid ServerHelloDone message. Invalid length.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.record_overflow}});if(t.serverCertificate===null){var i={message:\"No server certificate provided. Not enough security.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.insufficient_security}},s=0,o=t.verify(t,i.alert.description,s,[]);if(o!==!0){if(o||o===0)typeof o==\"object\"&&!e.util.isArray(o)?(o.message&&(i.message=o.message),o.alert&&(i.alert.description=o.alert)):typeof o==\"number\"&&(i.alert.description=o);return t.error(t,i)}}t.session.certificateRequest!==null&&(n=a.createRecord(t,{type:a.ContentType.handshake,data:a.createCertificate(t)}),a.queue(t,n)),n=a.createRecord(t,{type:a.ContentType.handshake,data:a.createClientKeyExchange(t)}),a.queue(t,n),t.expect=g;var u=function(e,t){e.session.certificateRequest!==null&&e.session.clientCertificate!==null&&a.queue(e,a.createRecord(e,{type:a.ContentType.handshake,data:a.createCertificateVerify(e,t)})),a.queue(e,a.createRecord(e,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),e.state.pending=a.createConnectionState(e),e.state.current.write=e.state.pending.write,a.queue(e,a.createRecord(e,{type:a.ContentType.handshake,data:a.createFinished(e)})),e.expect=d,a.flush(e),e.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return u(t,null);a.getClientSignature(t,u)},a.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:\"Invalid ChangeCipherSpec message received.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var n=e.entity===a.ConnectionEnd.client;if(e.session.resuming&&n||!e.session.resuming&&!n)e.state.pending=a.createConnectionState(e);e.state.current.read=e.state.pending.read;if(!e.session.resuming&&n||e.session.resuming&&!n)e.state.pending=null;e.expect=n?v:x,e.process()},a.handleFinished=function(n,r,i){var s=r.fragment;s.read-=4;var o=s.bytes();s.read+=4;var u=r.fragment.getBytes();s=e.util.createBuffer(),s.putBuffer(n.session.md5.digest()),s.putBuffer(n.session.sha1.digest());var f=n.entity===a.ConnectionEnd.client,l=f?\"server finished\":\"client finished\",c=n.session.sp,h=12,p=t;s=p(c.master_secret,l,s.getBytes(),h);if(s.getBytes()!==u)return n.error(n,{message:\"Invalid verify_data in Finished message.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decrypt_error}});n.session.md5.update(o),n.session.sha1.update(o);if(n.session.resuming&&f||!n.session.resuming&&!f)a.queue(n,a.createRecord(n,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),n.state.current.write=n.state.pending.write,n.state.pending=null,a.queue(n,a.createRecord(n,{type:a.ContentType.handshake,data:a.createFinished(n)}));n.expect=f?m:T,n.handshaking=!1,++n.handshakes,n.peerCertificate=f?n.session.serverCertificate:n.session.clientCertificate,a.flush(n),n.isConnected=!0,n.connected(n),n.process()},a.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case a.Alert.Description.close_notify:i=\"Connection closed.\";break;case a.Alert.Description.unexpected_message:i=\"Unexpected message.\";break;case a.Alert.Description.bad_record_mac:i=\"Bad record MAC.\";break;case a.Alert.Description.decryption_failed:i=\"Decryption failed.\";break;case a.Alert.Description.record_overflow:i=\"Record overflow.\";break;case a.Alert.Description.decompression_failure:i=\"Decompression failed.\";break;case a.Alert.Description.handshake_failure:i=\"Handshake failure.\";break;case a.Alert.Description.bad_certificate:i=\"Bad certificate.\";break;case a.Alert.Description.unsupported_certificate:i=\"Unsupported certificate.\";break;case a.Alert.Description.certificate_revoked:i=\"Certificate revoked.\";break;case a.Alert.Description.certificate_expired:i=\"Certificate expired.\";break;case a.Alert.Description.certificate_unknown:i=\"Certificate unknown.\";break;case a.Alert.Description.illegal_parameter:i=\"Illegal parameter.\";break;case a.Alert.Description.unknown_ca:i=\"Unknown certificate authority.\";break;case a.Alert.Description.access_denied:i=\"Access denied.\";break;case a.Alert.Description.decode_error:i=\"Decode error.\";break;case a.Alert.Description.decrypt_error:i=\"Decrypt error.\";break;case a.Alert.Description.export_restriction:i=\"Export restriction.\";break;case a.Alert.Description.protocol_version:i=\"Unsupported protocol version.\";break;case a.Alert.Description.insufficient_security:i=\"Insufficient security.\";break;case a.Alert.Description.internal_error:i=\"Internal error.\";break;case a.Alert.Description.user_canceled:i=\"User canceled.\";break;case a.Alert.Description.no_renegotiation:i=\"Renegotiation not supported.\";break;default:i=\"Unknown error.\"}if(r.description===a.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===a.ConnectionEnd.client?\"server\":\"client\",alert:r}),e.process()},a.handleHandshake=function(t,n){var r=n.fragment,i=r.getByte(),s=r.getInt24();if(s>r.length())return t.fragmented=n,n.fragment=e.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(s+4);r.read+=4,i in q[t.entity][t.expect]?(t.entity===a.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),i!==a.HandshakeType.hello_request&&i!==a.HandshakeType.certificate_verify&&i!==a.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),q[t.entity][t.expect][i](t,n,s)):a.handleUnexpected(t,n)},a.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},a.handleHeartbeat=function(t,n){var r=n.fragment,i=r.getByte(),s=r.getInt16(),o=r.getBytes(s);if(i===a.HeartbeatMessageType.heartbeat_request){if(t.handshaking||s>o.length)return t.process();a.queue(t,a.createRecord(t,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_response,o)})),a.flush(t)}else if(i===a.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,e.util.createBuffer(o))}t.process()};var f=0,l=1,c=2,h=3,p=4,d=5,v=6,m=7,g=8,y=0,b=1,w=2,E=3,S=4,x=5,T=6,N=7,C=a.handleUnexpected,k=a.handleChangeCipherSpec,L=a.handleAlert,A=a.handleHandshake,O=a.handleApplicationData,M=a.handleHeartbeat,_=[];_[a.ConnectionEnd.client]=[[C,L,A,C,M],[C,L,A,C,M],[C,L,A,C,M],[C,L,A,C,M],[C,L,A,C,M],[k,L,C,C,M],[C,L,A,C,M],[C,L,A,O,M],[C,L,A,C,M]],_[a.ConnectionEnd.server]=[[C,L,A,C,M],[C,L,A,C,M],[C,L,A,C,M],[C,L,A,C,M],[k,L,C,C,M],[C,L,A,C,M],[C,L,A,O,M],[C,L,A,C,M]];var D=a.handleHelloRequest,P=a.handleServerHello,H=a.handleCertificate,B=a.handleServerKeyExchange,j=a.handleCertificateRequest,F=a.handleServerHelloDone,I=a.handleFinished,q=[];q[a.ConnectionEnd.client]=[[C,C,P,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,H,B,j,F,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,B,j,F,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,C,j,F,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,C,C,F,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,I],[D,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[D,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C]];var R=a.handleClientHello,U=a.handleClientKeyExchange,z=a.handleCertificateVerify;q[a.ConnectionEnd.server]=[[C,R,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,H,C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,U,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,z,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,I],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C],[C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C]],a.generateKeys=function(e,n){var r=t,i=n.client_random+n.server_random;e.session.resuming||(n.master_secret=r(n.pre_master_secret,\"master secret\",i,48).bytes(),n.pre_master_secret=null),i=n.server_random+n.client_random;var s=2*n.mac_key_length+2*n.enc_key_length,o=e.version.major===a.Versions.TLS_1_0.major&&e.version.minor===a.Versions.TLS_1_0.minor;o&&(s+=2*n.fixed_iv_length);var u=r(n.master_secret,\"key expansion\",i,s),f={client_write_MAC_key:u.getBytes(n.mac_key_length),server_write_MAC_key:u.getBytes(n.mac_key_length),client_write_key:u.getBytes(n.enc_key_length),server_write_key:u.getBytes(n.enc_key_length)};return o&&(f.client_write_IV=u.getBytes(n.fixed_iv_length),f.server_write_IV=u.getBytes(n.fixed_iv_length)),f},a.createConnectionState=function(e){var t=e.entity===a.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){e.sequenceNumber[1]===4294967295?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},r={read:n(),write:n()};r.read.update=function(e,t){return r.read.cipherFunction(t,r.read)?r.read.compressFunction(e,t,r.read)||e.error(e,{message:\"Could not decompress record.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decompression_failure}}):e.error(e,{message:\"Could not decrypt record or bad MAC.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_record_mac}}),!e.fail},r.write.update=function(e,t){return r.write.compressFunction(e,t,r.write)?r.write.cipherFunction(t,r.write)||e.error(e,{message:\"Could not encrypt record.\",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):e.error(e,{message:\"Could not compress record.\",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}),!e.fail};if(e.session){var o=e.session.sp;e.session.cipherSuite.initSecurityParameters(o),o.keys=a.generateKeys(e,o),r.read.macKey=t?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,r.write.macKey=t?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,o);switch(o.compression_algorithm){case a.CompressionMethod.none:break;case a.CompressionMethod.deflate:r.read.compressFunction=s,r.write.compressFunction=i;break;default:throw new Error(\"Unsupported compression algorithm.\")}}return r},a.createRandom=function(){var t=new Date,n=+t+t.getTimezoneOffset()*6e4,r=e.util.createBuffer();return r.putInt32(n),r.putBytes(e.random.getBytes(28)),r},a.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n},a.createAlert=function(t,n){var r=e.util.createBuffer();return r.putByte(n.level),r.putByte(n.description),a.createRecord(t,{type:a.ContentType.alert,data:r})},a.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};var n=e.util.createBuffer();for(var r=0;r<t.cipherSuites.length;++r){var i=t.cipherSuites[r];n.putByte(i.id[0]),n.putByte(i.id[1])}var s=n.length(),o=e.util.createBuffer();o.putByte(a.CompressionMethod.none);var f=o.length(),l=e.util.createBuffer();if(t.virtualHost){var c=e.util.createBuffer();c.putByte(0),c.putByte(0);var h=e.util.createBuffer();h.putByte(0),u(h,2,e.util.createBuffer(t.virtualHost));var p=e.util.createBuffer();u(p,2,h),u(c,2,p),l.putBuffer(c)}var d=l.length();d>0&&(d+=2);var v=t.session.id,m=v.length+1+2+4+28+2+s+1+f+d,g=e.util.createBuffer();return g.putByte(a.HandshakeType.client_hello),g.putInt24(m),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),u(g,1,e.util.createBuffer(v)),u(g,2,n),u(g,1,o),d>0&&u(g,2,l),g},a.createServerHello=function(t){var n=t.session.id,r=n.length+1+2+4+28+2+1,i=e.util.createBuffer();return i.putByte(a.HandshakeType.server_hello),i.putInt24(r),i.putByte(t.version.major),i.putByte(t.version.minor),i.putBytes(t.session.sp.server_random),u(i,1,e.util.createBuffer(n)),i.putByte(t.session.cipherSuite.id[0]),i.putByte(t.session.cipherSuite.id[1]),i.putByte(t.session.compressionMethod),i},a.createCertificate=function(t){var n=t.entity===a.ConnectionEnd.client,r=null;if(t.getCertificate){var i;n?i=t.session.certificateRequest:i=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,i)}var s=e.util.createBuffer();if(r!==null)try{e.util.isArray(r)||(r=[r]);var o=null;for(var f=0;f<r.length;++f){var l=e.pem.decode(r[f])[0];if(l.type!==\"CERTIFICATE\"&&l.type!==\"X509 CERTIFICATE\"&&l.type!==\"TRUSTED CERTIFICATE\"){var c=new Error('Could not convert certificate from PEM; PEM header type is not \"CERTIFICATE\", \"X509 CERTIFICATE\", or \"TRUSTED CERTIFICATE\".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert certificate from PEM; PEM is encrypted.\");var h=e.util.createBuffer(l.body);o===null&&(o=e.asn1.fromDer(h.bytes(),!1));var p=e.util.createBuffer();u(p,3,h),s.putBuffer(p)}r=e.pki.certificateFromAsn1(o),n?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(d){return t.error(t,{message:\"Could not send certificate list.\",cause:d,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var v=3+s.length(),m=e.util.createBuffer();return m.putByte(a.HandshakeType.certificate),m.putInt24(v),u(m,3,s),m},a.createClientKeyExchange=function(t){var n=e.util.createBuffer();n.putByte(t.session.clientHelloVersion.major),n.putByte(t.session.clientHelloVersion.minor),n.putBytes(e.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=n.getBytes();var i=t.session.serverCertificate.publicKey;n=i.encrypt(r.pre_master_secret);var s=n.length+2,o=e.util.createBuffer();return o.putByte(a.HandshakeType.client_key_exchange),o.putInt24(s),o.putInt16(n.length),o.putBytes(n),o},a.createServerKeyExchange=function(t){var n=0,r=e.util.createBuffer();return n>0&&(r.putByte(a.HandshakeType.server_key_exchange),r.putInt24(n)),r},a.getClientSignature=function(t,n){var r=e.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,n,r){var i=null;if(t.getPrivateKey)try{i=t.getPrivateKey(t,t.session.clientCertificate),i=e.pki.privateKeyFromPem(i)}catch(s){t.error(t,{message:\"Could not get private key.\",cause:s,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}i===null?t.error(t,{message:\"No private key set.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):n=i.sign(n,null),r(t,n)},t.getSignature(t,r,n)},a.createCertificateVerify=function(t,n){var r=n.length+2,i=e.util.createBuffer();return i.putByte(a.HandshakeType.certificate_verify),i.putInt24(r),i.putInt16(n.length),i.putBytes(n),i},a.createCertificateRequest=function(t){var n=e.util.createBuffer();n.putByte(1);var r=e.util.createBuffer();for(var i in t.caStore.certs){var s=t.caStore.certs[i],o=e.pki.distinguishedNameToAsn1(s.subject),f=e.asn1.toDer(o);r.putInt16(f.length()),r.putBuffer(f)}var l=1+n.length()+2+r.length(),c=e.util.createBuffer();return c.putByte(a.HandshakeType.certificate_request),c.putInt24(l),u(c,1,n),u(c,2,r),c},a.createServerHelloDone=function(t){var n=e.util.createBuffer();return n.putByte(a.HandshakeType.server_hello_done),n.putInt24(0),n},a.createChangeCipherSpec=function(){var t=e.util.createBuffer();return t.putByte(1),t},a.createFinished=function(n){var r=e.util.createBuffer();r.putBuffer(n.session.md5.digest()),r.putBuffer(n.session.sha1.digest());var i=n.entity===a.ConnectionEnd.client,s=n.session.sp,o=12,u=t,f=i?\"client finished\":\"server finished\";r=u(s.master_secret,f,r.getBytes(),o);var l=e.util.createBuffer();return l.putByte(a.HandshakeType.finished),l.putInt24(r.length()),l.putBuffer(r),l},a.createHeartbeat=function(t,n,r){typeof r==\"undefined\"&&(r=n.length);var i=e.util.createBuffer();i.putByte(t),i.putInt16(r),i.putBytes(n);var s=i.length(),o=Math.max(16,s-r-3);return i.putBytes(e.random.getBytes(o)),i},a.queue=function(t,n){if(!n)return;if(n.type===a.ContentType.handshake){var r=n.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var i;if(n.fragment.length()<=a.MaxFragment)i=[n];else{i=[];var s=n.fragment.bytes();while(s.length>a.MaxFragment)i.push(a.createRecord(t,{type:n.type,data:e.util.createBuffer(s.slice(0,a.MaxFragment))})),s=s.slice(a.MaxFragment);s.length>0&&i.push(a.createRecord(t,{type:n.type,data:e.util.createBuffer(s)}))}for(var o=0;o<i.length&&!t.fail;++o){var u=i[o],f=t.state.current.write;f.update(t,u)&&t.records.push(u)}},a.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var W=function(t){switch(t){case!0:return!0;case e.pki.certificateError.bad_certificate:return a.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return a.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return a.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return a.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return a.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return a.Alert.Description.unknown_ca;default:return a.Alert.Description.bad_certificate}},X=function(t){switch(t){case!0:return!0;case a.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case a.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case a.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case a.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case a.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case a.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};a.verifyCertificateChain=function(t,n){try{e.pki.verifyCertificateChain(t.caStore,n,function(r,i,s){var o=W(r),u=t.verify(t,r,i,s);if(u!==!0){if(typeof u==\"object\"&&!e.util.isArray(u)){var f=new Error(\"The application rejected the certificate.\");throw f.send=!0,f.alert={level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==r&&(u=X(u))}return u})}catch(r){var i=r;if(typeof i!=\"object\"||e.util.isArray(i))i={send:!0,alert:{level:a.Alert.Level.fatal,description:W(r)}};\"send\"in i||(i.send=!0),\"alert\"in i||(i.alert={level:a.Alert.Level.fatal,description:W(i.error)}),t.error(t,i)}return!t.fail},a.createSessionCache=function(t,n){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(n||100,1),r.order=[];for(var i in t)r.order.length<=n?r.order.push(i):delete t[i];r.getSession=function(t){var n=null,i=null;t?i=e.util.bytesToHex(t):r.order.length>0&&(i=r.order[0]);if(i!==null&&i in r.cache){n=r.cache[i],delete r.cache[i];for(var s in r.order)if(r.order[s]===i){r.order.splice(s,1);break}}return n},r.setSession=function(t,n){if(r.order.length===r.capacity){var i=r.order.shift();delete r.cache[i]}var i=e.util.bytesToHex(t);r.order.push(i),r.cache[i]=n}}return r},a.createConnection=function(t){var n=null;t.caStore?e.util.isArray(t.caStore)?n=e.pki.createCaStore(t.caStore):n=t.caStore:n=e.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var i in a.CipherSuites)r.push(a.CipherSuites[i])}var s=t.server||!1?a.ConnectionEnd.server:a.ConnectionEnd.client,o=t.sessionCache?a.createSessionCache(t.sessionCache):null,u={version:{major:a.Version.major,minor:a.Version.minor},entity:s,sessionId:t.sessionId,caStore:n,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(e,t,n,r){return t},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,n){n.origin=n.origin||(e.entity===a.ConnectionEnd.client?\"client\":\"server\"),n.send&&(a.queue(e,a.createAlert(e,n.alert)),a.flush(e));var r=n.fatal!==!1;r&&(e.fail=!0),t.error(e,n),r&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};u.reset=function(e){u.version={major:a.Version.major,minor:a.Version.minor},u.record=null,u.session=null,u.peerCertificate=null,u.state={pending:null,current:null},u.expect=u.entity===a.ConnectionEnd.client?f:y,u.fragmented=null,u.records=[],u.open=!1,u.handshakes=0,u.handshaking=!1,u.isConnected=!1,u.fail=!e&&typeof e!=\"undefined\",u.input.clear(),u.tlsData.clear(),u.data.clear(),u.state.current=a.createConnectionState(u)},u.reset();var l=function(e,t){var n=t.type-a.ContentType.change_cipher_spec,r=_[e.entity][e.expect];n in r?r[n](e,t):a.handleUnexpected(e,t)},c=function(t){var n=0,r=t.input,i=r.length();if(i<5)n=5-i;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:e.util.createBuffer(),ready:!1};var s=t.record.version.major===t.version.major;s&&t.session&&t.session.version&&(s=t.record.version.minor===t.version.minor),s||t.error(t,{message:\"Incompatible TLS version.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}})}return n},h=function(e){var t=0,n=e.input,r=n.length();if(r<e.record.length)t=e.record.length-r;else{e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact();var i=e.state.current.read;i.update(e,e.record)&&(e.fragmented!==null&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:\"Invalid fragmented record.\",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return u.handshake=function(t){if(u.entity!==a.ConnectionEnd.client)u.error(u,{message:\"Cannot initiate handshake as a server.\",fatal:!1});else if(u.handshaking)u.error(u,{message:\"Handshake already in progress.\",fatal:!1});else{u.fail&&!u.open&&u.handshakes===0&&(u.fail=!1),u.handshaking=!0,t=t||\"\";var n=null;t.length>0&&(u.sessionCache&&(n=u.sessionCache.getSession(t)),n===null&&(t=\"\")),t.length===0&&u.sessionCache&&(n=u.sessionCache.getSession(),n!==null&&(t=n.id)),u.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},n&&(u.version=n.version,u.session.sp=n.sp),u.session.sp.client_random=a.createRandom().getBytes(),u.open=!0,a.queue(u,a.createRecord(u,{type:a.ContentType.handshake,data:a.createClientHello(u)})),a.flush(u)}},u.process=function(e){var t=0;return e&&u.input.putBytes(e),u.fail||(u.record!==null&&u.record.ready&&u.record.fragment.isEmpty()&&(u.record=null),u.record===null&&(t=c(u)),!u.fail&&u.record!==null&&!u.record.ready&&(t=h(u)),!u.fail&&u.record!==null&&u.record.ready&&l(u,u.record)),t},u.prepare=function(t){return a.queue(u,a.createRecord(u,{type:a.ContentType.application_data,data:e.util.createBuffer(t)})),a.flush(u)},u.prepareHeartbeatRequest=function(t,n){return t instanceof e.util.ByteBuffer&&(t=t.bytes()),typeof n==\"undefined\"&&(n=t.length),u.expectedHeartbeatPayload=t,a.queue(u,a.createRecord(u,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_request,t,n)})),a.flush(u)},u.close=function(e){if(!u.fail&&u.sessionCache&&u.session){var t={id:u.session.id,version:u.session.version,sp:u.session.sp};t.sp.keys=null,u.sessionCache.setSession(t.id,t)}if(u.open){u.open=!1,u.input.clear();if(u.isConnected||u.handshaking)u.isConnected=u.handshaking=!1,a.queue(u,a.createAlert(u,{level:a.Alert.Level.warning,description:a.Alert.Description.close_notify})),a.flush(u);u.closed(u)}u.reset(e)},u},e.tls=e.tls||{};for(var V in a)typeof a[V]!=\"function\"&&(e.tls[V]=a[V]);e.tls.prf_tls1=t,e.tls.hmac_sha1=r,e.tls.createSessionCache=a.createSessionCache,e.tls.createConnection=a.createConnection}var r=\"tls\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/tls\",[\"require\",\"module\",\"./asn1\",\"./hmac\",\"./md\",\"./pem\",\"./pki\",\"./random\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(n,i,s){var o=i.entity===e.tls.ConnectionEnd.client;n.read.cipherState={init:!1,cipher:e.cipher.createDecipher(\"AES-CBC\",o?s.keys.server_write_key:s.keys.client_write_key),iv:o?s.keys.server_write_IV:s.keys.client_write_IV},n.write.cipherState={init:!1,cipher:e.cipher.createCipher(\"AES-CBC\",o?s.keys.client_write_key:s.keys.server_write_key),iv:o?s.keys.client_write_IV:s.keys.server_write_IV},n.read.cipherFunction=u,n.write.cipherFunction=r,n.read.macLength=n.write.macLength=s.mac_length,n.read.macFunction=n.write.macFunction=t.hmac_sha1}function r(n,r){var s=!1,o=r.macFunction(r.macKey,r.sequenceNumber,n);n.fragment.putBytes(o),r.updateSequenceNumber();var u;n.version.minor===t.Versions.TLS_1_0.minor?u=r.cipherState.init?null:r.cipherState.iv:u=e.random.getBytesSync(16),r.cipherState.init=!0;var a=r.cipherState.cipher;return a.start({iv:u}),n.version.minor>=t.Versions.TLS_1_1.minor&&a.output.putBytes(u),a.update(n.fragment),a.finish(i)&&(n.fragment=a.output,n.length=n.fragment.length(),s=!0),s}function i(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function s(e,t,n){var r=!0;if(n){var i=t.length(),s=t.last();for(var o=i-1-s;o<i-1;++o)r=r&&t.at(o)==s;r&&t.truncate(s+1)}return r}function u(n,r){var i=!1;++o;var u;n.version.minor===t.Versions.TLS_1_0.minor?u=r.cipherState.init?null:r.cipherState.iv:u=n.fragment.getBytes(16),r.cipherState.init=!0;var f=r.cipherState.cipher;f.start({iv:u}),f.update(n.fragment),i=f.finish(s);var l=r.macLength,c=e.random.getBytesSync(l),h=f.output.length();h>=l?(n.fragment=f.output.getBytes(h-l),c=f.output.getBytes(l)):n.fragment=f.output.getBytes(),n.fragment=e.util.createBuffer(n.fragment),n.length=n.fragment.length();var p=r.macFunction(r.macKey,r.sequenceNumber,n);return r.updateSequenceNumber(),i=a(r.macKey,c,p)&&i,i}function a(t,n,r){var i=e.hmac.create();return i.start(\"SHA1\",t),i.update(n),n=i.digest().getBytes(),i.start(null,null),i.update(r),r=i.digest().getBytes(),n===r}var t=e.tls;t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:\"TLS_RSA_WITH_AES_128_CBC_SHA\",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:\"TLS_RSA_WITH_AES_256_CBC_SHA\",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n};var o=0}var r=\"aesCipherSuites\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/aesCipherSuites\",[\"require\",\"module\",\"./aes\",\"./tls\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.debug=e.debug||{},e.debug.storage={},e.debug.get=function(t,n){var r;return typeof t==\"undefined\"?r=e.debug.storage:t in e.debug.storage&&(typeof n==\"undefined\"?r=e.debug.storage[t]:r=e.debug.storage[t][n]),r},e.debug.set=function(t,n,r){t in e.debug.storage||(e.debug.storage[t]={}),e.debug.storage[t][n]=r},e.debug.clear=function(t,n){typeof t==\"undefined\"?e.debug.storage={}:t in e.debug.storage&&(typeof n==\"undefined\"?delete e.debug.storage[t]:delete e.debug.storage[t][n])}}var r=\"debug\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/debug\",[\"require\",\"module\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(t,n,r,i){t.generate=function(t,s){var o=new e.util.ByteBuffer,u=Math.ceil(s/i)+r,a=new e.util.ByteBuffer;for(var f=r;f<u;++f){a.putInt32(f),n.start(),n.update(t+a.getBytes());var l=n.digest();o.putBytes(l.getBytes(i))}return o.truncate(o.length()-s),o.getBytes()}}e.kem=e.kem||{};var t=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(n,r){r=r||{};var i=r.prng||e.random,s={};return s.encrypt=function(r,s){var o=Math.ceil(r.n.bitLength()/8),u;do u=(new t(e.util.bytesToHex(i.getBytesSync(o)),16)).mod(r.n);while(u.equals(t.ZERO));u=e.util.hexToBytes(u.toString(16));var a=o-u.length;a>0&&(u=e.util.fillString(String.fromCharCode(0),a)+u);var f=r.encrypt(u,\"NONE\"),l=n.generate(u,s);return{encapsulation:f,key:l}},s.decrypt=function(e,t,r){var i=e.decrypt(t,\"NONE\");return n.generate(i,r)},s},e.kem.kdf1=function(e,t){n(this,e,0,t||e.digestLength)},e.kem.kdf2=function(e,t){n(this,e,1,t||e.digestLength)}}var r=\"kem\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/kem\",[\"require\",\"module\",\"./util\",\"./random\",\"./jsbn\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){e.log=e.log||{},e.log.levels=[\"none\",\"error\",\"warning\",\"info\",\"debug\",\"verbose\",\"max\"];var t={},n=[],r=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var i=0;i<e.log.levels.length;++i){var s=e.log.levels[i];t[s]={index:i,name:s.toUpperCase()}}e.log.logMessage=function(r){var i=t[r.level].index;for(var s=0;s<n.length;++s){var o=n[s];if(o.flags&e.log.NO_LEVEL_CHECK)o.f(r);else{var u=t[o.level].index;i<=u&&o.f(o,r)}}},e.log.prepareStandard=function(e){\"standard\"in e||(e.standard=t[e.level].name+\" [\"+e.category+\"] \"+e.message)},e.log.prepareFull=function(t){if(!(\"full\"in t)){var n=[t.message];n=n.concat([]||t.arguments),t.full=e.util.format.apply(this,n)}},e.log.prepareStandardFull=function(t){\"standardFull\"in t||(e.log.prepareStandard(t),t.standardFull=t.standard)};var o=[\"error\",\"warning\",\"info\",\"debug\",\"verbose\"];for(var i=0;i<o.length;++i)(function(t){e.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:n,message:r,arguments:i};e.log.logMessage(s)}})(o[i]);e.log.makeLogger=function(t){var n={flags:0,f:t};return e.log.setLevel(n,\"none\"),n},e.log.setLevel=function(t,n){var r=!1;if(t&&!(t.flags&e.log.LEVEL_LOCKED))for(var i=0;i<e.log.levels.length;++i){var s=e.log.levels[i];if(n==s){t.level=n,r=!0;break}}return r},e.log.lock=function(t,n){typeof n==\"undefined\"||n?t.flags|=e.log.LEVEL_LOCKED:t.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(e){n.push(e)};if(typeof console!=\"undefined\"&&\"log\"in console){var u;if(console.error&&console.warn&&console.info&&console.debug){var a={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(t,n){e.log.prepareStandard(n);var r=a[n.level],i=[n.standard];i=i.concat(n.arguments.slice()),r.apply(console,i)};u=e.log.makeLogger(f)}else{var f=function(t,n){e.log.prepareStandardFull(n),console.log(n.standardFull)};u=e.log.makeLogger(f)}e.log.setLevel(u,\"debug\"),e.log.addLogger(u),r=u}else console={log:function(){}};if(r!==null){var l=e.util.getQueryVariables();\"console.level\"in l&&e.log.setLevel(r,l[\"console.level\"].slice(-1)[0]);if(\"console.lock\"in l){var c=l[\"console.lock\"].slice(-1)[0];c==\"true\"&&e.log.lock(r)}}e.log.consoleLogger=r}var r=\"log\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/log\",[\"require\",\"module\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function r(r){var i={},s=[];if(!t.validate(r,n.asn1.recipientInfoValidator,i,s)){var o=new Error(\"Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.\");throw o.errors=s,o}return{version:i.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(i.issuer),serialNumber:e.util.createBuffer(i.serial).toHex(),encryptedContent:{algorithm:t.derToOid(i.encAlgorithm),parameter:i.encParameter.value,content:i.encKey}}}function i(n){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:n.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(n.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.encryptedContent.content)])}function s(e){var t=[];for(var n=0;n<e.length;++n)t.push(r(e[n]));return t}function o(e){var t=[];for(var n=0;n<e.length;++n)t.push(i(e[n]));return t}function u(r){var i={},s=[];if(!t.validate(r,n.asn1.signerInfoValidator,i,s)){var o=new Error(\"Cannot read PKCS#7 SignerInfo. ASN.1 object is not an PKCS#7 SignerInfo.\");throw o.errors=s,o}var u={version:i.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(i.issuer),serialNumber:e.util.createBuffer(i.serial).toHex(),digestAlgorithm:t.derToOid(i.digestAlgorithm),signatureAlgorithm:t.derToOid(i.signatureAlgorithm),signature:i.signature,authenticatedAttributes:[],unauthenticatedAttributes:[]},a=i.authenticatedAttributes||[],f=i.unauthenticatedAttributes||[];return u}function a(n){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:n.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(n.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")])]);n.authenticatedAttributesAsn1&&r.value.push(n.authenticatedAttributesAsn1),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")])),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.signature));if(n.unauthenticatedAttributes.length>0){var i=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]);for(var s=0;s<n.unauthenticatedAttributes.length;++s){var o=n.unauthenticatedAttributes[s];i.values.push(c(o))}r.value.push(i)}return r}function f(e){var t=[];for(var n=0;n<e.length;++n)t.push(u(e[n]));return t}function l(e){var t=[];for(var n=0;n<e.length;++n)t.push(a(e[n]));return t}function c(n){var r;if(n.type===e.pki.oids.contentType)r=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.value).getBytes());else if(n.type===e.pki.oids.messageDigest)r=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.value.bytes());else if(n.type===e.pki.oids.signingTime){var i=new Date(\"Jan 1, 1950 00:00:00Z\"),s=new Date(\"Jan 1, 2050 00:00:00Z\"),o=n.value;if(typeof o==\"string\"){var u=Date.parse(o);isNaN(u)?o.length===13?o=t.utcTimeToDate(o):o=t.generalizedTimeToDate(o):o=new Date(u)}o>=i&&o<s?r=t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(o)):r=t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(o))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[r])])}function h(n){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.content.getBytes())])]}function p(n,r,i){var s={},o=[];if(!t.validate(r,i,s,o)){var u=new Error(\"Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.\");throw u.errors=u,u}var a=t.derToOid(s.contentType);if(a!==e.pki.oids.data)throw new Error(\"Unsupported PKCS#7 message. Only wrapped ContentType Data supported.\");if(s.encryptedContent){var f=\"\";if(e.util.isArray(s.encryptedContent))for(var l=0;l<s.encryptedContent.length;++l){if(s.encryptedContent[l].type!==t.Type.OCTETSTRING)throw new Error(\"Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.\");f+=s.encryptedContent[l].value}else f=s.encryptedContent;n.encryptedContent={algorithm:t.derToOid(s.encAlgorithm),parameter:e.util.createBuffer(s.encParameter.value),content:e.util.createBuffer(f)}}if(s.content){var f=\"\";if(e.util.isArray(s.content))for(var l=0;l<s.content.length;++l){if(s.content[l].type!==t.Type.OCTETSTRING)throw new Error(\"Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.\");f+=s.content[l].value}else f=s.content;n.content=e.util.createBuffer(f)}return n.version=s.version.charCodeAt(0),n.rawCapture=s,s}function d(t){if(t.encryptedContent.key===undefined)throw new Error(\"Symmetric key not available.\");if(t.content===undefined){var n;switch(t.encryptedContent.algorithm){case e.pki.oids[\"aes128-CBC\"]:case e.pki.oids[\"aes192-CBC\"]:case e.pki.oids[\"aes256-CBC\"]:n=e.aes.createDecryptionCipher(t.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids[\"des-EDE3-CBC\"]:n=e.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error(\"Unsupported symmetric cipher, OID \"+t.encryptedContent.algorithm)}n.start(t.encryptedContent.parameter),n.update(t.encryptedContent.content);if(!n.finish())throw new Error(\"Symmetric decryption failed.\");t.content=n.output}}var t=e.asn1,n=e.pkcs7=e.pkcs7||{};n.messageFromPem=function(r){var i=e.pem.decode(r)[0];if(i.type!==\"PKCS7\"){var s=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not \"PKCS#7\".');throw s.headerType=i.type,s}if(i.procType&&i.procType.type===\"ENCRYPTED\")throw new Error(\"Could not convert PKCS#7 message from PEM; PEM is encrypted.\");var o=t.fromDer(i.body);return n.messageFromAsn1(o)},n.messageToPem=function(n,r){var i={type:\"PKCS7\",body:t.toDer(n.toAsn1()).getBytes()};return e.pem.encode(i,{maxline:r})},n.messageFromAsn1=function(r){var i={},s=[];if(!t.validate(r,n.asn1.contentInfoValidator,i,s)){var o=new Error(\"Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.\");throw o.errors=s,o}var u=t.derToOid(i.contentType),a;switch(u){case e.pki.oids.envelopedData:a=n.createEnvelopedData();break;case e.pki.oids.encryptedData:a=n.createEncryptedData();break;case e.pki.oids.signedData:a=n.createSignedData();break;default:throw new Error(\"Cannot read PKCS#7 message. ContentType with OID \"+u+\" is not (yet) supported.\")}return a.fromAsn1(i.content.value[0]),a},n.createSignedData=function(){function i(){var n={};for(var i=0;i<r.signers.length;++i){var s=r.signers[i],o=s.digestAlgorithm;o in n||(n[o]=e.md[e.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=n[o]:s.md=e.md[e.pki.oids[o]].create()}r.digestAlgorithmIdentifiers=[];for(var o in n)r.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,\"\")]));return n}function s(n){if(r.contentInfo.value.length<2)throw new Error(\"Could not sign PKCS#7 message; there is no content to sign.\");var i=t.derToOid(r.contentInfo.value[0].value),s=r.contentInfo.value[1];s=s.value[0];var o=t.toDer(s);o.getByte(),t.getBerValueLength(o),o=o.getBytes();for(var u in n)n[u].start().update(o);var a=new Date;for(var f=0;f<r.signers.length;++f){var h=r.signers[f];if(h.authenticatedAttributes.length===0){if(i!==e.pki.oids.data)throw new Error(\"Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.\")}else{h.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);var p=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]);for(var d=0;d<h.authenticatedAttributes.length;++d){var v=h.authenticatedAttributes[d];v.type===e.pki.oids.messageDigest?v.value=n[h.digestAlgorithm].digest():v.type===e.pki.oids.signingTime&&(v.value||(v.value=a)),p.value.push(c(v)),h.authenticatedAttributesAsn1.value.push(c(v))}o=t.toDer(p).getBytes(),h.md.start().update(o)}h.signature=h.key.sign(h.md,\"RSASSA-PKCS1-V1_5\")}r.signerInfos=l(r.signers)}var r=null;return r={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){p(r,t,n.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[];var i=r.rawCapture.certificates.value;for(var s=0;s<i.length;++s)r.certificates.push(e.pki.certificateFromAsn1(i[s]))},toAsn1:function(){r.contentInfo||r.sign();var n=[];for(var i=0;i<r.certificates.length;++i)n.push(e.pki.certificateToAsn1(r.certificates[i]));var s=[],o=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return n.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,r.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;typeof s==\"string\"&&(s=e.pki.certificateFromPem(s)),n=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error(\"Could not add PKCS#7 signer; no private key specified.\");typeof o==\"string\"&&(o=e.pki.privateKeyFromPem(o));var u=t.digestAlgorithm||e.pki.oids.sha1;switch(u){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error(\"Could not add PKCS#7 signer; unknown message digest algorithm: \"+u)}var a=t.authenticatedAttributes||[];if(a.length>0){var f=!1,l=!1;for(var c=0;c<a.length;++c){var h=a[c];if(!f&&h.type===e.pki.oids.contentType){f=!0;if(l)break;continue}if(!l&&h.type===e.pki.oids.messageDigest){l=!0;if(f)break;continue}}if(!f||!l)throw new Error(\"Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.\")}r.signers.push({key:o,version:1,issuer:n,serialNumber:i,digestAlgorithm:u,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(){if(typeof r.content!=\"object\"||r.contentInfo===null){r.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes())]);if(\"content\"in r){var n;r.content instanceof e.util.ByteBuffer?n=r.content.bytes():typeof r.content==\"string\"&&(n=e.util.encodeUtf8(r.content)),r.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)]))}}if(r.signers.length===0)return;var o=i();s(o)},verify:function(){throw new Error(\"PKCS#7 signature verification not yet implemented.\")},addCertificate:function(t){typeof t==\"string\"&&(t=e.pki.certificateFromPem(t)),r.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error(\"PKCS#7 CRL support not yet implemented.\")}},r},n.createEncryptedData=function(){var t=null;return t={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids[\"aes256-CBC\"]},fromAsn1:function(e){p(t,e,n.asn1.encryptedDataValidator)},decrypt:function(e){e!==undefined&&(t.encryptedContent.key=e),d(t)}},t},n.createEnvelopedData=function(){var r=null;return r={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids[\"aes256-CBC\"]},fromAsn1:function(e){var t=p(r,e,n.asn1.envelopedDataValidator);r.recipients=s(t.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,o(r.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,h(r.encryptedContent))])])])},findRecipient:function(e){var t=e.issuer.attributes;for(var n=0;n<r.recipients.length;++n){var i=r.recipients[n],s=i.issuer;if(i.serialNumber!==e.serialNumber)continue;if(s.length!==t.length)continue;var o=!0;for(var u=0;u<t.length;++u)if(s[u].type!==t[u].type||s[u].value!==t[u].value){o=!1;break}if(o)return i}return null},decrypt:function(t,n){if(r.encryptedContent.key===undefined&&t!==undefined&&n!==undefined)switch(t.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var i=n.decrypt(t.encryptedContent.content);r.encryptedContent.key=e.util.createBuffer(i);break;default:throw new Error(\"Unsupported asymmetric cipher, OID \"+t.encryptedContent.algorithm)}d(r)},addRecipient:function(t){r.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(r.encryptedContent.content===undefined){n=n||r.encryptedContent.algorithm,t=t||r.encryptedContent.key;var i,s,o;switch(n){case e.pki.oids[\"aes128-CBC\"]:i=16,s=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids[\"aes192-CBC\"]:i=24,s=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids[\"aes256-CBC\"]:i=32,s=16,o=e.aes.createEncryptionCipher;break;case e.pki.oids[\"des-EDE3-CBC\"]:i=24,s=8,o=e.des.createEncryptionCipher;break;default:throw new Error(\"Unsupported symmetric cipher, OID \"+n)}if(t===undefined)t=e.util.createBuffer(e.random.getBytes(i));else if(t.length()!=i)throw new Error(\"Symmetric key has wrong length; got \"+t.length()+\" bytes, expected \"+i+\".\");r.encryptedContent.algorithm=n,r.encryptedContent.key=t,r.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(s));var u=o(t);u.start(r.encryptedContent.parameter.copy()),u.update(r.content);if(!u.finish())throw new Error(\"Symmetric encryption failed.\");r.encryptedContent.content=u.output}for(var a=0;a<r.recipients.length;++a){var f=r.recipients[a];if(f.encryptedContent.content!==undefined)continue;switch(f.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:f.encryptedContent.content=f.encryptedContent.key.encrypt(r.encryptedContent.key.data);break;default:throw new Error(\"Unsupported asymmetric cipher, OID \"+f.encryptedContent.algorithm)}}}},r}}var r=\"pkcs7\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/pkcs7\",[\"require\",\"module\",\"./aes\",\"./asn1\",\"./des\",\"./oids\",\"./pem\",\"./pkcs7asn1\",\"./random\",\"./util\",\"./x509\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){function n(t,n){var r=n.toString(16);r[0]>=\"8\"&&(r=\"00\"+r);var i=e.util.hexToBytes(r);t.putInt32(i.length),t.putBytes(i)}function r(e,t){e.putInt32(t.length),e.putString(t)}function i(){var t=e.md.sha1.create(),n=arguments.length;for(var r=0;r<n;++r)t.update(arguments[r]);return t.digest()}var t=e.ssh=e.ssh||{};t.privateKeyToPutty=function(t,s,o){o=o||\"\",s=s||\"\";var u=\"ssh-rsa\",a=s===\"\"?\"none\":\"aes256-cbc\",f=\"PuTTY-User-Key-File-2: \"+u+\"\\r\\n\";f+=\"Encryption: \"+a+\"\\r\\n\",f+=\"Comment: \"+o+\"\\r\\n\";var l=e.util.createBuffer();r(l,u),n(l,t.e),n(l,t.n);var c=e.util.encode64(l.bytes(),64),h=Math.floor(c.length/66)+1;f+=\"Public-Lines: \"+h+\"\\r\\n\",f+=c;var p=e.util.createBuffer();n(p,t.d),n(p,t.p),n(p,t.q),n(p,t.qInv);var d;if(!s)d=e.util.encode64(p.bytes(),64);else{var v=p.length()+16-1;v-=v%16;var m=i(p.bytes());m.truncate(m.length()-v+p.length()),p.putBuffer(m);var g=e.util.createBuffer();g.putBuffer(i(\"\\0\\0\\0\\0\",s)),g.putBuffer(i(\"\\0\\0\\0\u0001\",s));var y=e.aes.createEncryptionCipher(g.truncate(8),\"CBC\");y.start(e.util.createBuffer().fillWithByte(0,16)),y.update(p.copy()),y.finish();var b=y.output;b.truncate(16),d=e.util.encode64(b.bytes(),64)}h=Math.floor(d.length/66)+1,f+=\"\\r\\nPrivate-Lines: \"+h+\"\\r\\n\",f+=d;var w=i(\"putty-private-key-file-mac-key\",s),E=e.util.createBuffer();r(E,u),r(E,a),r(E,o),E.putInt32(l.length()),E.putBuffer(l),E.putInt32(p.length()),E.putBuffer(p);var S=e.hmac.create();return S.start(\"sha1\",w),S.update(E.bytes()),f+=\"\\r\\nPrivate-MAC: \"+S.digest().toHex()+\"\\r\\n\",f},t.publicKeyToOpenSSH=function(t,i){var s=\"ssh-rsa\";i=i||\"\";var o=e.util.createBuffer();return r(o,s),n(o,t.e),n(o,t.n),s+\" \"+e.util.encode64(o.bytes())+\" \"+i},t.privateKeyToOpenSSH=function(t,n){return n?e.pki.encryptRsaPrivateKey(t,n,{legacy:!0,algorithm:\"aes128\"}):e.pki.privateKeyToPem(t)},t.getPublicKeyFingerprint=function(t,i){i=i||{};var s=i.md||e.md.md5.create(),o=\"ssh-rsa\",u=e.util.createBuffer();r(u,o),n(u,t.e),n(u,t.n),s.start(),s.update(u.getBytes());var a=s.digest();if(i.encoding===\"hex\"){var f=a.toHex();return i.delimiter?f.match(/.{2}/g).join(i.delimiter):f}if(i.encoding===\"binary\")return a.getBytes();if(i.encoding)throw new Error('Unknown encoding \"'+i.encoding+'\".');return a}}var r=\"ssh\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/ssh\",[\"require\",\"module\",\"./aes\",\"./hmac\",\"./md5\",\"./sha1\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function e(e){var t=\"forge.task\",n=0,r={},i=0;e.debug.set(t,\"tasks\",r);var s={};e.debug.set(t,\"queues\",s);var o=\"?\",u=30,a=20,f=\"ready\",l=\"running\",c=\"blocked\",h=\"sleeping\",p=\"done\",d=\"error\",v=\"stop\",m=\"start\",g=\"block\",y=\"unblock\",b=\"sleep\",w=\"wakeup\",E=\"cancel\",S=\"fail\",x={};x[f]={},x[f][v]=f,x[f][m]=l,x[f][E]=p,x[f][S]=d,x[l]={},x[l][v]=f,x[l][m]=l,x[l][g]=c,x[l][y]=l,x[l][b]=h,x[l][w]=l,x[l][E]=p,x[l][S]=d,x[c]={},x[c][v]=c,x[c][m]=c,x[c][g]=c,x[c][y]=c,x[c][b]=c,x[c][w]=c,x[c][E]=p,x[c][S]=d,x[h]={},x[h][v]=h,x[h][m]=h,x[h][g]=h,x[h][y]=h,x[h][b]=h,x[h][w]=h,x[h][E]=p,x[h][S]=d,x[p]={},x[p][v]=p,x[p][m]=p,x[p][g]=p,x[p][y]=p,x[p][b]=p,x[p][w]=p,x[p][E]=p,x[p][S]=d,x[d]={},x[d][v]=d,x[d][m]=d,x[d][g]=d,x[d][y]=d,x[d][b]=d,x[d][w]=d,x[d][E]=d,x[d][S]=d;var T=function(s){this.id=-1,this.name=s.name||o,this.parent=s.parent||null,this.run=s.run,this.subtasks=[],this.error=!1,this.state=f,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=i++,r[this.id]=this,n>=1&&e.log.verbose(t,\"[%s][%s] init\",this.id,this.name,this)};T.prototype.debug=function(n){n=n||\"\",e.log.debug(t,n,\"[%s][%s] task:\",this.id,this.name,this,\"subtasks:\",this.subtasks.length,\"queue:\",s)},T.prototype.next=function(e,t){typeof e==\"function\"&&(t=e,e=this.name);var n=new T({run:t,name:e,parent:this});return n.state=l,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},T.prototype.parallel=function(t,n){return e.util.isArray(t)&&(n=t,t=this.name),this.next(t,function(r){var i=r;i.block(n.length);var s=function(t,r){e.task.start({type:t,run:function(e){n[r](e)},success:function(e){i.unblock()},failure:function(e){i.unblock()}})};for(var o=0;o<n.length;o++){var u=t+\"__parallel-\"+r.id+\"-\"+o,a=o;s(u,a)}})},T.prototype.stop=function(){this.state=x[this.state][v]},T.prototype.start=function(){this.error=!1,this.state=x[this.state][m],this.state===l&&(this.start=new Date,this.run(this),C(this,0))},T.prototype.block=function(e){e=typeof e==\"undefined\"?1:e,this.blocks+=e,this.blocks>0&&(this.state=x[this.state][g])},T.prototype.unblock=function(e){return e=typeof e==\"undefined\"?1:e,this.blocks-=e,this.blocks===0&&this.state!==p&&(this.state=l,C(this,0)),this.blocks},T.prototype.sleep=function(e){e=typeof e==\"undefined\"?0:e,this.state=x[this.state][b];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=l,C(t,0)},e)},T.prototype.wait=function(e){e.wait(this)},T.prototype.wakeup=function(){this.state===h&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=l,C(this,0))},T.prototype.cancel=function(){this.state=x[this.state][E],this.permitsNeeded=0,this.timeoutId!==null&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},T.prototype.fail=function(e){this.error=!0,k(this,!0);if(e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,C(e,0);else{if(this.parent!==null){var t=this.parent;while(t.parent!==null)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;k(t,!0)}this.failureCallback&&this.failureCallback(this)}};var N=function(e){e.error=!1,e.state=x[e.state][m],setTimeout(function(){e.state===l&&(e.swapTime=+(new Date),e.run(e),C(e,0))},0)},C=function(e,t){var n=t>u||+(new Date)-e.swapTime>a,r=function(t){t++;if(e.state===l){n&&(e.swapTime=+(new Date));if(e.subtasks.length>0){var r=e.subtasks.shift();r.error=e.error,r.swapTime=e.swapTime,r.userData=e.userData,r.run(r),r.error||C(r,t)}else k(e),e.error||e.parent!==null&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,C(e.parent,t))}};n?setTimeout(r,0):r(t)},k=function(i,o){i.state=p,delete r[i.id],n>=1&&e.log.verbose(t,\"[%s][%s] finish\",i.id,i.name,i),i.parent===null&&(i.type in s?s[i.type].length===0?e.log.error(t,\"[%s][%s] task queue empty [%s]\",i.id,i.name,i.type):s[i.type][0]!==i?e.log.error(t,\"[%s][%s] task not first in queue [%s]\",i.id,i.name,i.type):(s[i.type].shift(),s[i.type].length===0?(n>=1&&e.log.verbose(t,\"[%s][%s] delete queue [%s]\",i.id,i.name,i.type),delete s[i.type]):(n>=1&&e.log.verbose(t,\"[%s][%s] queue start next [%s] remain:%s\",i.id,i.name,i.type,s[i.type].length),s[i.type][0].start())):e.log.error(t,\"[%s][%s] task queue missing [%s]\",i.id,i.name,i.type),o||(i.error&&i.failureCallback?i.failureCallback(i):!i.error&&i.successCallback&&i.successCallback(i)))};e.task=e.task||{},e.task.start=function(r){var i=new T({run:r.run,name:r.name||o});i.type=r.type,i.successCallback=r.success||null,i.failureCallback=r.failure||null,i.type in s?s[r.type].push(i):(n>=1&&e.log.verbose(t,\"[%s][%s] create queue [%s]\",i.id,i.name,i.type),s[i.type]=[i],N(i))},e.task.cancel=function(e){e in s&&(s[e]=[s[e][0]])},e.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var n in t)t[n].unblock()},e}}var r=\"task\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports)return typeof forge==\"undefined\"&&(forge={}),e(forge);var i=!0;n=function(e,n){n(t,module)}}var s,o=function(t,n){n.exports=function(n){var i=s.map(function(e){return t(e)}).concat(e);n=n||{},n.defined=n.defined||{};if(n.defined[r])return n[r];n.defined[r]=!0;for(var o=0;o<i.length;++o)i[o](n);return n[r]}},u=n;n=function(e,t){return s=typeof e==\"string\"?t.slice(2):e.slice(2),i?(delete n,u.apply(null,Array.prototype.slice.call(arguments,0))):(n=u,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/task\",[\"require\",\"module\",\"./debug\",\"./log\",\"./util\"],function(){o.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var e=\"forge\";if(typeof n!=\"function\"){if(typeof module!=\"object\"||!module.exports){typeof forge==\"undefined\"&&(forge={disableNativeCode:!1});return}var r=!0;n=function(e,n){n(t,module)}}var i,s=function(t,n){n.exports=function(n){var r=i.map(function(e){return t(e)});n=n||{},n.defined=n.defined||{};if(n.defined[e])return n[e];n.defined[e]=!0;for(var s=0;s<r.length;++s)r[s](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},o=n;n=function(e,t){return i=typeof e==\"string\"?t.slice(2):e.slice(2),r?(delete n,o.apply(null,Array.prototype.slice.call(arguments,0))):(n=o,n.apply(null,Array.prototype.slice.call(arguments,0)))},n(\"js/forge\",[\"require\",\"module\",\"./aes\",\"./aesCipherSuites\",\"./asn1\",\"./cipher\",\"./cipherModes\",\"./debug\",\"./des\",\"./hmac\",\"./kem\",\"./log\",\"./md\",\"./mgf1\",\"./pbkdf2\",\"./pem\",\"./pkcs7\",\"./pkcs1\",\"./pkcs12\",\"./pki\",\"./prime\",\"./prng\",\"./pss\",\"./random\",\"./rc2\",\"./ssh\",\"./task\",\"./tls\",\"./util\"],function(){s.apply(null,Array.prototype.slice.call(arguments,0))})}(),t(\"js/forge\")});\n}).call(this,require('_process'),require(\"buffer\").Buffer)\n},{\"_process\":113,\"buffer\":115}]},{},[\"devapt\"]);\n"],"file":"devapt-browser.js"}